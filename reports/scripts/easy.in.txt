--------------------------------------------------------------------------------
Profile data file '../easy/callgrind.out.1992' (creator: callgrind-3.13.0)
--------------------------------------------------------------------------------
I1 cache: 
D1 cache: 
LL cache: 
Timerange: Basic block 0 - 1215845
Trigger: Program termination
Profiled target:  ./clish -x ../../xml-examples/clish (PID 1992, part 1)
Events recorded:  Ir
Events shown:     Ir
Event sort order: Ir
Thresholds:       99
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir                 
--------------------------------------------------------------------------------
5,399,537 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir                  file:function
--------------------------------------------------------------------------------
5,399,537 (100.0%)  ???:0x0000000000000c20 [/lib/x86_64-linux-gnu/ld-2.24.so]
5,123,819 (94.89%)  ???:_start [/home/ykuznetsov/klish-2.1.3/bin/.libs/clish]
5,123,808 (94.89%)  /opt/build/glibc/glibc-2.24/csu/../csu/libc-start.c:(below main) [/lib/x86_64-linux-gnu/libc-2.24.so]
5,120,471 (94.83%)  /home/ykuznetsov/klish-2.1.3/bin/clish.c:main [/home/ykuznetsov/klish-2.1.3/bin/.libs/clish]
5,119,160 (94.81%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave [/lib/x86_64-linux-gnu/ld-2.24.so]
4,178,557 (77.39%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:clish_shell_load_scheme [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
3,005,018 (55.65%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,363,579 (43.77%)  /usr/include/x86_64-linux-gnu/bits/string2.h:clish_shell_load_scheme
2,363,395 (43.77%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,353,098 (43.58%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,347,728 (43.48%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,279,222 (42.21%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
2,089,455 (38.70%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,080,076 (38.52%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,066,058 (38.26%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,988,022 (36.82%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp [/lib/x86_64-linux-gnu/libc-2.24.so]
1,805,880 (33.45%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,590,368 (29.45%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,417,657 (26.26%)  ???:XML_Parse [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,405,042 (26.02%)  ???:XML_ParseBuffer [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,404,612 (26.01%)  ???:0x000000000000b4f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,398,342 (25.90%)  ???:0x00000000000094a0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,355,102 (25.10%)  ???:0x0000000000009440 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,354,812 (25.09%)  ???:0x0000000000008190 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,100,831 (20.39%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap [/lib/x86_64-linux-gnu/libc-2.24.so]
1,100,236 (20.38%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap_iter.isra.24 [/lib/x86_64-linux-gnu/libc-2.24.so]
1,013,962 (18.78%)  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c:mbrtowc [/lib/x86_64-linux-gnu/libc-2.24.so]
  934,566 (17.31%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  884,949 (16.39%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  801,819 (14.85%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  800,055 (14.82%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  796,662 (14.75%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  713,348 (13.21%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  669,202 (12.39%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  590,799 (10.94%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c:__gconv_transform_utf8_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  536,939 ( 9.94%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:_dl_lookup_symbol_x [/lib/x86_64-linux-gnu/ld-2.24.so]
  511,308 ( 9.47%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp [/lib/x86_64-linux-gnu/libc-2.24.so]
  511,021 ( 9.46%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch [/lib/x86_64-linux-gnu/libc-2.24.so]
  509,733 ( 9.44%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression [/lib/x86_64-linux-gnu/libc-2.24.so]
  493,262 ( 9.14%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  461,654 ( 8.55%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  444,022 ( 8.22%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_chardata_handler [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  437,116 ( 8.10%)  ???:0x0000000005686930 [???]
  416,159 ( 7.71%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  399,763 ( 7.40%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:free [/lib/x86_64-linux-gnu/libc-2.24.so]
  390,922 ( 7.24%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:do_lookup_x [/lib/x86_64-linux-gnu/ld-2.24.so]
  382,924 ( 7.09%)  ???:0x0000000000007580 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  339,402 ( 6.29%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c:_dl_fixup [/lib/x86_64-linux-gnu/ld-2.24.so]
  324,792 ( 6.02%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_free [/lib/x86_64-linux-gnu/libc-2.24.so]
  319,750 ( 5.92%)  /opt/build/glibc/glibc-2.24/string/strdup.c:strdup [/lib/x86_64-linux-gnu/ld-2.24.so]
  303,158 ( 5.61%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_view [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  288,347 ( 5.34%)  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c:_dl_relocate_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  272,383 ( 5.04%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:_dl_start [/lib/x86_64-linux-gnu/ld-2.24.so]
  271,740 ( 5.03%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-sysdep.c:_dl_sysdep_start [/lib/x86_64-linux-gnu/ld-2.24.so]
  271,064 ( 5.02%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:dl_main [/lib/x86_64-linux-gnu/ld-2.24.so]
  265,724 ( 4.92%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h:_dl_relocate_object
  248,633 ( 4.60%)  ???:0x0000000000013e60 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  241,303 ( 4.47%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_param [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  226,529 ( 4.20%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:clish_shell_prepare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  204,244 ( 3.78%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_element_start [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  197,624 ( 3.66%)  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c:btowc [/lib/x86_64-linux-gnu/libc-2.24.so]
  193,045 ( 3.58%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  192,211 ( 3.56%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  191,721 ( 3.55%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_delete [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  191,055 ( 3.54%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  190,544 ( 3.53%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_init [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  188,778 ( 3.50%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error [/lib/x86_64-linux-gnu/ld-2.24.so]
  172,879 ( 3.20%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c:__gconv_transform_utf8_internal
  156,736 ( 2.90%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
  155,355 ( 2.88%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_load_plugins [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  154,692 ( 2.86%)  /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_load [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  145,295 ( 2.69%)  ???:0x000000000000f290 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  137,525 ( 2.55%)  /opt/build/glibc/glibc-2.24/dlfcn/dlerror.c:_dlerror_run [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,470 ( 2.45%)  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c:dlopen@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,349 ( 2.45%)  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c:dlopen_doit [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,320 ( 2.45%)  /opt/build/glibc/glibc-2.24/elf/dl-open.c:_dl_open [/lib/x86_64-linux-gnu/ld-2.24.so]
  132,178 ( 2.45%)  /opt/build/glibc/glibc-2.24/elf/dl-open.c:dl_open_worker [/lib/x86_64-linux-gnu/ld-2.24.so]
  127,757 ( 2.37%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter [/lib/x86_64-linux-gnu/libc-2.24.so]
  119,677 ( 2.22%)  /opt/build/glibc/glibc-2.24/elf/dl-misc.c:_dl_name_match_p [/lib/x86_64-linux-gnu/ld-2.24.so]
  111,156 ( 2.06%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:strcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  108,808 ( 2.02%)  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c:__collseq_table_lookup [/lib/x86_64-linux-gnu/libc-2.24.so]
  106,846 ( 1.98%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  101,318 ( 1.88%)  ???:0x000000000001a2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   97,231 ( 1.80%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_delete [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   96,912 ( 1.79%)  ???:XML_ParserCreate [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   96,882 ( 1.79%)  ???:XML_ParserCreate_MM [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   92,591 ( 1.71%)  /opt/build/glibc/glibc-2.24/locale/setlocale.c:setlocale [/lib/x86_64-linux-gnu/libc-2.24.so]
   91,128 ( 1.69%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_consolidate [/lib/x86_64-linux-gnu/libc-2.24.so]
   90,892 ( 1.68%)  ???:0x0000000000004c30 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   87,417 ( 1.62%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:regfree [/lib/x86_64-linux-gnu/libc-2.24.so]
   86,906 ( 1.61%)  /opt/build/glibc/glibc-2.24/locale/findlocale.c:_nl_find_locale [/lib/x86_64-linux-gnu/libc-2.24.so]
   86,805 ( 1.61%)  ???:0x0000000000004cb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   86,298 ( 1.60%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:free_dfa_content [/lib/x86_64-linux-gnu/libc-2.24.so]
   84,985 ( 1.57%)  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
   84,841 ( 1.57%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:_dl_map_object_deps [/lib/x86_64-linux-gnu/ld-2.24.so]
   83,522 ( 1.55%)  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
   82,441 ( 1.53%)  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c:vsnprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
   80,590 ( 1.49%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   78,620 ( 1.46%)  ???:0x0000000000005570 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   78,353 ( 1.45%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_loop.c:clish_shell_loop [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   78,304 ( 1.45%)  ???:0x0000000005686938 [???]
   76,713 ( 1.42%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object [/lib/x86_64-linux-gnu/ld-2.24.so]
   73,260 ( 1.36%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_readline [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   73,257 ( 1.36%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_execline [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   73,168 ( 1.36%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_compile_internal
   72,620 ( 1.34%)  /opt/build/glibc/glibc-2.24/locale/loadarchive.c:_nl_load_locale_from_archive [/lib/x86_64-linux-gnu/libc-2.24.so]
   70,912 ( 1.31%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_action [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   70,726 ( 1.31%)  ???:0x0000000000005130 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   70,629 ( 1.31%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:openaux [/lib/x86_64-linux-gnu/ld-2.24.so]
   66,700 ( 1.24%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
   66,016 ( 1.22%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
   65,260 ( 1.21%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:clish_shell_startup [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   60,798 ( 1.13%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_delete [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   60,174 ( 1.11%)  /opt/build/glibc/glibc-2.24/intl/../intl/l10nflist.c:_nl_normalize_codeset [/lib/x86_64-linux-gnu/libc-2.24.so]
   60,022 ( 1.11%)  /opt/build/glibc/glibc-2.24/malloc/hooks.c:malloc_hook_ini [/lib/x86_64-linux-gnu/libc-2.24.so]
   59,273 ( 1.10%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_acquire_state_context [/lib/x86_64-linux-gnu/libc-2.24.so]
   58,930 ( 1.09%)  /opt/build/glibc/glibc-2.24/malloc/arena.c:ptmalloc_init.part.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
   58,880 ( 1.09%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
   58,553 ( 1.08%)  /opt/build/glibc/glibc-2.24/elf/dl-addr.c:_dl_addr [/lib/x86_64-linux-gnu/libc-2.24.so]
   56,515 ( 1.05%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   53,231 ( 0.99%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:check_match [/lib/x86_64-linux-gnu/ld-2.24.so]

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c
--------------------------------------------------------------------------------
Ir          

-- line 9 ----------------------------------------
 .           #include "lub/string.h"
 .           #include "lub/list.h"
 .           #include "lub/bintree.h"
 .           #include "clish/plugin.h"
 .           #include "clish/view.h"
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_plugin_t * clish_shell_find_plugin(clish_shell_t *this, const char *name)
 3 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           
 2 ( 0.00%)  	assert(this);
 .           
 5 ( 0.00%)  	if (!name || !name[0])
 1 ( 0.00%)  		return NULL;
 .           	/* Iterate elements */
 7 ( 0.00%)  	for(iter = lub_list__get_head(this->plugins);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 .           		iter; iter = lub_list_node__get_next(iter)) {
 .           		plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 .           		if (!strcmp(name, clish_plugin__get_name(plugin)))
 .           			return plugin;
 .           	}
 .           
 .           	return NULL;
 5 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_plugin_t * clish_shell_find_create_plugin(clish_shell_t *this,
 .           	const char *name)
 3 ( 0.00%)  {
 .           	clish_plugin_t *plugin;
 2 ( 0.00%)  	assert(this);
 .           
 6 ( 0.00%)  	if (!name || !name[0])
 1 ( 0.00%)  		return NULL;
 .           
 7 ( 0.00%)  	plugin = clish_shell_find_plugin(this, name);
710 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 2 ( 0.00%)  	if (plugin)
 .           		return plugin;
 8 ( 0.00%)  	plugin = clish_plugin_new(name);
1,322 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 4 ( 0.00%)  	lub_list_add(this->plugins, plugin);
249 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (1x)
 .           
 1 ( 0.00%)  	return plugin;
 5 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* For all plugins:
 .            *  * dlopen(plugin)
 .            *  * dlsym(initialize function)
 .            *  * exec init functions to get all plugin syms
 .            */
 .           int clish_shell_load_plugins(clish_shell_t *this)
 3 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           
 3 ( 0.00%)  	assert(this);
 .           
 .           	/* Iterate elements */
 8 ( 0.00%)  	for(iter = lub_list__get_head(this->plugins);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 4 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (1x)
 3 ( 0.00%)  		plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (1x)
10 ( 0.00%)  		if (clish_plugin_load(plugin, (void *)this))
155,313 ( 2.88%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           			return -1;
 .           #ifdef DEBUG
 .           		clish_plugin_dump(plugin);
 .           #endif
 .           	}
 .           
 1 ( 0.00%)  	return 0;
 4 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Iterate plugins to find symbol by name.
 .            * The symbol name can be simple or with namespace:
 .            * mysym@plugin1
 .            * The symbols with suffix will be resolved using specified plugin only.
 .            */
 .           static clish_sym_t *plugins_find_sym(clish_shell_t *this, const char *name, int type)
 .           {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           	clish_sym_t *sym = NULL;
 .           	/* To parse command name */
 6 ( 0.00%)  	char *saveptr = NULL;
 .           	const char *delim = "@";
 .           	char *plugin_name = NULL;
 .           	char *cmdn = NULL;
24 ( 0.00%)  	char *str = lub_string_dup(name);
1,045 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (6x)
 .           
 .           	assert(this);
 .           
 .           	/* Parse name to get sym name and optional plugin name */
42 ( 0.00%)  	cmdn = strtok_r(str, delim, &saveptr);
1,583 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
597 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r (5x)
12 ( 0.00%)  	if (!cmdn) {
 .           		lub_string_free(str);
 .           		return NULL;
 .           	}
36 ( 0.00%)  	plugin_name = strtok_r(NULL, delim, &saveptr);
483 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r (6x)
 .           
12 ( 0.00%)  	if (plugin_name) {
 .           		/* Search for symbol in specified namespace */
 .           		/* Iterate elements */
27 ( 0.00%)  		for(iter = lub_list__get_head(this->plugins);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 .           			iter; iter = lub_list_node__get_next(iter)) {
12 ( 0.00%)  			plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
31 ( 0.00%)  			if (strcmp(clish_plugin__get_pubname(plugin), plugin_name))
730 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (3x)
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin__get_pubname (2x)
 .           				continue;
21 ( 0.00%)  			if ((sym = clish_plugin_get_sym(plugin, cmdn, type)))
984 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym (3x)
 .           				break;
 .           		}
 .           	} else {
 .           		/* Iterate all plugins */
15 ( 0.00%)  		for(iter = lub_list__get_head(this->plugins);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 .           			iter; iter = lub_list_node__get_next(iter)) {
 9 ( 0.00%)  			plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
28 ( 0.00%)  			if ((sym = clish_plugin_get_sym(plugin, cmdn, type)))
722 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
561 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym (2x)
 .           				break;
 .           		}
 .           	}
24 ( 0.00%)  	lub_string_free(str);
540 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (6x)
 .           
 .           	return sym;
 .           }
 .           
 .           /*--------------------------------------------------------- */
 .           /* Find symbol by name in the list of unresolved symbols */
 .           clish_sym_t *clish_shell_find_sym(clish_shell_t *this, const char *name, int type)
28 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_sym_t *sym;
 .           
 .           	/* Iterate elements */
31 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
853 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 8 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
900 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		int res;
20 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
877 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
32 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
639 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
84 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (4x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (3x)
19 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           			return sym;
 3 ( 0.00%)  		if (res > 0) /* No chance to find name */
 .           			break;
 .           	}
 .           
 3 ( 0.00%)  	return NULL;
28 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Add symbol to the table of unresolved symbols */
 .           clish_sym_t *clish_shell_add_sym(clish_shell_t *this,
 .           	void *func, const char *name, int type)
20 ( 0.00%)  {
 .           	clish_sym_t *sym = NULL;
 .           
16 ( 0.00%)  	if (!name)
 .           		return NULL;
40 ( 0.00%)  	if ((sym = clish_shell_find_sym(this, name, type)))
3,327 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_find_sym (3x)
1,564 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		return sym;
24 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
1,164 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (3x)
 .           		return NULL;
19 ( 0.00%)  	lub_list_add(this->syms, sym);
1,697 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
604 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (2x)
 .           
 .           	return sym;
28 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_sym_t *clish_shell_add_unresolved_sym(clish_shell_t *this,
 .           	const char *name, int type)
 .           {
24 ( 0.00%)  	return clish_shell_add_sym(this, NULL, name, type);
4,893 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_sym (3x)
4,301 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Link one unresolved symbol.
 .            * sym - unresolved symbol
 .            * Returns 0 if the symbol was succesfully resolved
 .            */
 .           static int link_unresolved_sym(clish_shell_t *this, clish_sym_t *sym)
 .           {
 .           	clish_sym_t *plugin_sym;
 .           	char *sym_name = NULL;
 .           	int sym_type;
 .           
34 ( 0.00%)  	if (clish_sym__get_func(sym)) /* Don't relink non-null fn */
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (5x)
 .           		return 0;
30 ( 0.00%)  	sym_name = clish_sym__get_name(sym);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (6x)
24 ( 0.00%)  	sym_type = clish_sym__get_type(sym);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
 .           	plugin_sym = plugins_find_sym(this, sym_name, sym_type);
 .           	if (!plugin_sym) {
 .           		fprintf(stderr, "Error: Can't resolve symbol %s.\n",
 .           			sym_name);
 .           		return -1;
 .           	}
 .           	/* Copy symbol attributes */
34 ( 0.00%)  	clish_sym_clone(sym, plugin_sym);
623 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_clone (5x)
 .           
 .           	return 0;
 .           }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Link unresolved symbols */
 .           int clish_shell_link_plugins(clish_shell_t *this)
 8 ( 0.00%)  {
 .           	clish_sym_t *sym;
 .           	lub_list_node_t *iter;
 .           
 .           	/* Iterate elements */
18 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
24 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (6x)
24 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (6x)
 .           		if (link_unresolved_sym(this, sym) < 0)
 .           			return -1;
 .           	}
 .           
 1 ( 0.00%)  	return 0;
 8 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Get hook sym */
 .           clish_sym_t *clish_shell_get_hook(const clish_shell_t *this, int type)
 .           {
 2 ( 0.00%)  	return this->hooks[type];
 1 ( 0.00%)  }

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 5 ----------------------------------------
  .           #include <assert.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_shell_find_ptype(clish_shell_t *this,
  .           	const char *name)
  .           {
 75 ( 0.00%)  	return lub_bintree_find(&this->ptype_tree, name);
6,443 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_shell_find_create_ptype(clish_shell_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
169 ( 0.00%)  {
 43 ( 0.00%)  	clish_ptype_t *ptype = lub_bintree_find(&this->ptype_tree, name);
1,629 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,441 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (12x)
  .           
 39 ( 0.00%)  	if (!ptype) {
  .           		/* create a ptype */
108 ( 0.00%)  		ptype = clish_ptype_new(name, text, pattern,
1,929,722 (35.74%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new (12x)
150,975 ( 2.80%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			method, preprocess);
 26 ( 0.00%)  		assert(ptype);
 69 ( 0.00%)  		clish_shell_insert_ptype(this, ptype);
1,539 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,578 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_insert_ptype (12x)
  .           	} else {
  .           		if (pattern) {
  .           			/* set the pattern */
  .           			clish_ptype__set_pattern(ptype, pattern, method);
  .           			/* set the preprocess */
  .           			clish_ptype__set_preprocess(ptype, preprocess);
  .           		}
  .           		/* set the help text */
  .           		if (text)
  .           			clish_ptype__set_text(ptype, text);
  .           	}
  .           
  .           	return ptype;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_shell_insert_ptype(clish_shell_t * this, clish_ptype_t * ptype)
  .           {
 43 ( 0.00%)  	(void)lub_bintree_insert(&this->ptype_tree, ptype);
2,542 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (12x)
855 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_loop.c
--------------------------------------------------------------------------------
Ir         

-- line 9 ----------------------------------------
.           #include <string.h>
.           #include <assert.h>
.           #include <unistd.h>
.           
.           /*-------------------------------------------------------- */
.           /* The main CLI loop while interactive execution.
.            */
.           int clish_shell_loop(clish_shell_t *this)
3 ( 0.00%)  {
.           	int running = 0;
.           	int retval = SHELL_STATE_OK;
.           
3 ( 0.00%)  	assert(this);
9 ( 0.00%)  	if (!tinyrl__get_istream(this->tinyrl))
1,672 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1 ( 0.00%)  		return SHELL_STATE_IO_ERROR;
.           	/* Check the shell isn't closing down */
3 ( 0.00%)  	if (this && (SHELL_STATE_CLOSING == this->state))
.           		return retval;
.           
.           	/* Loop reading and executing lines until the user quits */
2 ( 0.00%)  	while (!running) {
.           		retval = SHELL_STATE_OK;
.           		/* Get input from the stream */
9 ( 0.00%)  		running = clish_shell_readline(this, NULL);
73,921 ( 1.37%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2 ( 0.00%)  		if (running) {
.           			switch (this->state) {
.           			case SHELL_STATE_SCRIPT_ERROR:
.           			case SHELL_STATE_SYNTAX_ERROR:
.           				/* Interactive session doesn't exit on error */
.           				if (tinyrl__get_isatty(this->tinyrl) ||
.           					(this->current_file &&
.           					!this->current_file->stop_on_error))
.           					running = 0;
.           				retval = this->state;
.           			default:
.           				break;
.           			}
.           		}
3 ( 0.00%)  		if (SHELL_STATE_CLOSING == this->state)
.           			running = -1;
.           		if (running)
7 ( 0.00%)  			running = clish_shell_pop_file(this);
2,713 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
.           	}
.           
.           	return retval;
5 ( 0.00%)  }
.           
.           /*-------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c
--------------------------------------------------------------------------------
Ir           

-- line 12 ----------------------------------------
  .           	"clish_script@clish",
  .           	NULL,
  .           	"clish_hook_config@clish",
  .           	"clish_hook_log@clish"
  .           };
  .           
  .           /*----------------------------------------------------------- */
  .           int clish_shell_startup(clish_shell_t *this)
  3 ( 0.00%)  {
  .           	const char *banner;
  .           	clish_context_t context;
  .           
  3 ( 0.00%)  	if (!this->startup) {
  .           		fprintf(stderr, "Error: Can't get valid STARTUP tag.\n");
  .           		return -1;
  .           	}
  .           
  .           	/* Prepare context */
  9 ( 0.00%)  	clish_context_init(&context, this);
645 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_cmd(&context, this->startup);
681 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_action(&context,
689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		clish_command__get_action(this->startup));
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (1x)
  .           
  7 ( 0.00%)  	banner = clish_command__get_detail(this->startup);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	if (banner)
 10 ( 0.00%)  		tinyrl_printf(this->tinyrl, "%s\n", banner);
18,898 ( 0.35%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Call log initialize */
  9 ( 0.00%)  	if (clish_shell__get_log(this))
657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		clish_shell_exec_log(&context, NULL, 0);
  .           	/* Call startup script */
  8 ( 0.00%)  	return clish_shell_execute(&context, NULL);
42,927 ( 0.80%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */
  .           void clish_shell__set_startup_view(clish_shell_t *this, const char *viewname)
  .           {
  .           	clish_view_t *view;
  .           
  .           	assert(this);
  .           	assert(this->startup);
-- line 52 ----------------------------------------
-- line 70 ----------------------------------------
  .           	assert(this);
  .           	lub_string_free(this->default_shebang);
  .           	this->default_shebang = lub_string_dup(shebang);
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           const char * clish_shell__get_default_shebang(const clish_shell_t *this)
  .           {
  2 ( 0.00%)  	assert(this);
  1 ( 0.00%)  	return this->default_shebang;
  1 ( 0.00%)  }
  .           
  .           
  .           
  .           /*-------------------------------------------------------- */
  .           /* Resolve PTYPE for given PARAM.
  .            */
  .           static clish_ptype_t * resolve_ptype(clish_shell_t *this, clish_param_t *param)
 75 ( 0.00%)  {
  .           	clish_ptype_t *ptype = NULL;
  .           
125 ( 0.00%)  	if (!this || !param)
  .           		return NULL;
  .           
  .           	/* Resolve PARAM's PTYPE */
233 ( 0.00%)  	ptype = clish_shell_find_ptype(this, clish_param__get_ptype_name(param));
6,192 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_ptype (24x)
1,698 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype_name (24x)
 50 ( 0.00%)  	if (!ptype) {
  .           		fprintf(stderr, "Error: Unresolved PTYPE \"%s\" in PARAM \"%s\"\n",
  .           			clish_param__get_ptype_name(param),
  .           			clish_param__get_name(param));
  .           		return NULL;
  .           	}
104 ( 0.00%)  	clish_param__set_ptype(param, ptype);
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype (24x)
104 ( 0.00%)  	clish_param__set_ptype_name(param, NULL); /* Free some memory */
813 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,688 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype_name (24x)
  .           
  .           	return ptype;
125 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* Static recursive function to iterate parameters. Logically it's the
  .            * part of clish_shell_prepare() function.
  .            */
  .           static int iterate_paramv(clish_shell_t *this, clish_paramv_t *paramv,
  .           	clish_hook_access_fn_t *access_fn)
400 ( 0.01%)  {
100 ( 0.00%)  	int i = 0;
  .           	clish_param_t *param;
  .           
522 ( 0.01%)  	while((param = clish_paramv__get_param(paramv, i))) {
673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
214 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (44x)
  .           		clish_paramv_t *nested_paramv;
  .           
  .           		/* Resolve PARAM's PTYPE */
120 ( 0.00%)  		if (!resolve_ptype(this, param))
10,533 ( 0.20%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (19x)
  .           			return -1;
  .           
  .           		/* Check access for PARAM */
 48 ( 0.00%)  		if (access_fn && clish_param__get_access(param) &&
  .           			access_fn(this, clish_param__get_access(param))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove PARAM \"%s\"\n",
  .           				clish_param__get_name(param));
  .           #endif
  .           			if (clish_paramv_remove(paramv, i) < 0) {
  .           				fprintf(stderr, "Error: Some system problem\n");
  .           				return -1;
  .           			}
  .           			clish_param_delete(param);
  .           			continue; /* Don't increment index */
  .           		}
  .           		/* Recursive iterate nested PARAMs */
 76 ( 0.00%)  		nested_paramv = clish_param__get_paramv(param);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_paramv (18x)
144 ( 0.00%)  		if (iterate_paramv(this, nested_paramv, access_fn) < 0)
2,728 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 (19x)
  .           			return -1;
 48 ( 0.00%)  		i++;
  .           	}
  .           
 50 ( 0.00%)  	return 0;
300 ( 0.01%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This function prepares schema for execution. It loads
  .            * plugins, link unresolved symbols, then iterates all the
  .            * objects and link them to each other, check access
  .            * permissions. Don't execute clish_shell_startup() without this
  .            * function.
  .            */
  .           int clish_shell_prepare(clish_shell_t *this)
  8 ( 0.00%)  {
  .           	clish_command_t *cmd;
  .           	clish_view_t *view;
  .           	clish_nspace_t *nspace;
  .           	lub_bintree_t *view_tree, *cmd_tree;
  .           	lub_list_t *nspace_tree;
  .           	lub_bintree_iterator_t cmd_iter, view_iter;
  .           	lub_list_node_t *nspace_iter;
  .           	clish_hook_access_fn_t *access_fn = NULL;
  .           	clish_paramv_t *paramv;
  .           	int i = 0;
  .           
  .           	/* Add statically linked plugins */
  4 ( 0.00%)  	while (clish_plugin_builtin_list[i].name) {
  .           		clish_plugin_t *plugin;
  .           		plugin = clish_shell_find_create_plugin(this,
  .           			clish_plugin_builtin_list[i].name);
  .           		clish_plugin_add_init(plugin,
  .           			clish_plugin_builtin_list[i].init);
  .           		clish_plugin__set_builtin_flag(plugin, BOOL_TRUE);
  .           		i++;
  .           	}
  .           
  .           	/* Add default plugin to the list of plugins */
  5 ( 0.00%)  	if (this->default_plugin) {
  9 ( 0.00%)  		clish_shell_find_create_plugin(this, "clish");
3,061 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* Default hooks */
 11 ( 0.00%)  		for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 15 ( 0.00%)  			if (this->hooks_use[i])
  .           				continue;
 20 ( 0.00%)  			if (!clish_plugin_default_hook[i])
  .           				continue;
 18 ( 0.00%)  			clish_sym__set_name(this->hooks[i],
957 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
640 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_name (2x)
  .           				clish_plugin_default_hook[i]);
  .           		}
  .           	}
  .           	/* Add default syms to unresolved table */
 10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 25 ( 0.00%)  		if (clish_sym__get_name(this->hooks[i]))
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (5x)
 17 ( 0.00%)  			lub_list_add(this->syms, this->hooks[i]);
1,234 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (3x)
  .           	}
  .           
  .           	/* Load plugins and link symbols */
  9 ( 0.00%)  	if (clish_shell_load_plugins(this) < 0)
156,032 ( 2.89%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  9 ( 0.00%)  	if (clish_shell_link_plugins(this) < 0)
9,951 ( 0.18%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  .           
 12 ( 0.00%)  	access_fn = clish_sym__get_func(clish_shell_get_hook(this, CLISH_SYM_TYPE_ACCESS));
648 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (1x)
  .           
  .           	/* Iterate the VIEWs */
  .           	view_tree = &this->view_tree;
  9 ( 0.00%)  	view = lub_bintree_findfirst(view_tree);
1,054 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 23 ( 0.00%)  	for (lub_bintree_iterator_init(&view_iter, view_tree, view);
948 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 20 ( 0.00%)  		view; view = lub_bintree_iterator_next(&view_iter)) {
2,213 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (5x)
  .           		/* Check access rights for the VIEW */
 10 ( 0.00%)  		if (access_fn && clish_view__get_access(view) &&
  .           			access_fn(this, clish_view__get_access(view))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove VIEW \"%s\"\n",
  .           				clish_view__get_name(view));
  .           #endif
  .           			lub_bintree_remove(view_tree, view);
  .           			clish_view_delete(view);
  .           			continue;
  .           		}
  .           
  .           		/* Iterate the NAMESPACEs */
 24 ( 0.00%)  		nspace_tree = clish_view__get_nspace_tree(view);
703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_nspace_tree (4x)
 20 ( 0.00%)  		nspace_iter = lub_list__get_head(nspace_tree);
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
 10 ( 0.00%)  		while(nspace_iter) {
  .           			clish_view_t *ref_view;
  .           			lub_list_node_t *old_nspace_iter;
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(nspace_iter);
  .           			old_nspace_iter = nspace_iter;
  .           			nspace_iter = lub_list_node__get_next(nspace_iter);
  .           			/* Resolve NAMESPACEs and remove unresolved ones */
  .           			ref_view = clish_shell_find_view(this, clish_nspace__get_view_name(nspace));
  .           			if (!ref_view) {
-- line 235 ----------------------------------------
-- line 259 ----------------------------------------
  .           				lub_list_del(nspace_tree, old_nspace_iter);
  .           				lub_list_node_free(old_nspace_iter);
  .           				clish_nspace_delete(nspace);
  .           				continue;
  .           			}
  .           		}
  .           
  .           		/* Iterate the COMMANDs */
 24 ( 0.00%)  		cmd_tree = clish_view__get_command_tree(view);
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_command_tree (4x)
 20 ( 0.00%)  		cmd = lub_bintree_findfirst(cmd_tree);
441 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (5x)
 88 ( 0.00%)  		for (lub_bintree_iterator_init(&cmd_iter, cmd_tree, cmd);
204 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_init.c:lub_bintree_iterator_init (5x)
108 ( 0.00%)  			cmd; cmd = lub_bintree_iterator_next(&cmd_iter)) {
3,573 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
24,271 ( 0.45%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (25x)
108 ( 0.00%)  			int cmd_is_alias = clish_command__get_alias(cmd)?1:0;
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_alias (25x)
  .           			clish_param_t *args = NULL;
  .           
  .           			/* Check access rights for the COMMAND */
 52 ( 0.00%)  			if (access_fn && clish_command__get_access(cmd) &&
  .           				access_fn(this, clish_command__get_access(cmd))) {
  .           #ifdef DEBUG
  .           				fprintf(stderr, "Warning: Access denied. Remove COMMAND \"%s\" from VIEW \"%s\"\n",
  .           					clish_command__get_name(cmd), clish_view__get_name(view));
  .           #endif
  .           				lub_bintree_remove(cmd_tree, cmd);
  .           				clish_command_delete(cmd);
  .           				continue;
  .           			}
  .           
  .           			/* Resolve command aliases */
 52 ( 0.00%)  			if (cmd_is_alias) {
  .           				clish_view_t *aview;
  .           				clish_command_t *cmdref;
 26 ( 0.00%)  				const char *alias_view = clish_command__get_alias_view(cmd);
  .           				if (!alias_view)
  .           					aview = clish_command__get_pview(cmd);
  .           				else
  .           					aview = clish_shell_find_view(this, alias_view);
  .           				if (!aview /* Removed or broken VIEW */
  .           					||
  .           					/* Removed or broken referenced COMMAND */
  .           					!(cmdref = clish_view_find_command(aview, clish_command__get_alias(cmd), BOOL_FALSE))
-- line 298 ----------------------------------------
-- line 328 ----------------------------------------
  .           					lub_bintree_remove(cmd_tree, cmd);
  .           					clish_command_delete(cmd);
  .           					continue;
  .           				}
  .           			}
  .           			if (cmd_is_alias) /* Don't duplicate paramv processing for aliases */
  .           				continue;
  .           			/* Iterate PARAMeters */
 56 ( 0.00%)  			paramv = clish_command__get_paramv(cmd);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (25x)
156 ( 0.00%)  			if (iterate_paramv(this, paramv, access_fn) < 0)
15,978 ( 0.30%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv (26x)
  .           				return -1;
  .           			/* Resolve PTYPE for args */
134 ( 0.00%)  			if ((args = clish_command__get_args(cmd))) {
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (25x)
  5 ( 0.00%)  				if (!resolve_ptype(this, args))
542 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (1x)
  .           					return -1;
  .           			}
  .           		}
  .           	}
  .           
  2 ( 0.00%)  	return 0;
  8 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c
--------------------------------------------------------------------------------
Ir          

-- line 13 ----------------------------------------
 .           #include "lub/string.h"
 .           #include "lub/db.h"
 .           #include "lub/list.h"
 .           #include "clish/plugin.h"
 .           
 .           /*-------------------------------------------------------- */
 .           static void clish_shell_init(clish_shell_t * this,
 .           	FILE * istream, FILE * ostream, bool_t stop_on_error)
10 ( 0.00%)  {
 .           	clish_ptype_t *tmp_ptype = NULL;
 .           	int i;
 .           	char template[PATH_MAX];
 .           
 .           	/* initialise the tree of views */
16 ( 0.00%)  	lub_bintree_init(&this->view_tree,
1,603 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 .           		clish_view_bt_offset(),
 .           		clish_view_bt_compare, clish_view_bt_getkey);
 .           
 .           	/* initialise the tree of ptypes */
12 ( 0.00%)  	lub_bintree_init(&this->ptype_tree,
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (1x)
 .           		clish_ptype_bt_offset(),
 .           		clish_ptype_bt_compare, clish_ptype_bt_getkey);
 .           
 .           	/* initialise the tree of vars */
12 ( 0.00%)  	lub_bintree_init(&this->var_tree,
639 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (1x)
 .           		clish_var_bt_offset(),
 .           		clish_var_bt_compare, clish_var_bt_getkey);
 .           
 .           	/* Initialize plugin list */
 8 ( 0.00%)  	this->plugins = lub_list_new(NULL);
956 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 .           	/* Initialise the list of unresolved (yet) symbols */
 4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
210 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
 .           
 .           	/* Create userdata storage */
 4 ( 0.00%)  	this->udata = lub_list_new(clish_udata_compare);
210 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
 3 ( 0.00%)  	assert(this->udata);
 .           
 .           	/* Hooks */
10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
34 ( 0.00%)  		this->hooks[i] = clish_sym_new(NULL, NULL, i);
1,607 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
912 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (4x)
10 ( 0.00%)  		this->hooks_use[i] = BOOL_FALSE;
 .           	}
 .           
 .           	/* Set up defaults */
 1 ( 0.00%)  	this->global = NULL;
 1 ( 0.00%)  	this->startup = NULL;
 1 ( 0.00%)  	this->idle_timeout = 0; /* No idle timeout by default */
 1 ( 0.00%)  	this->wdog = NULL;
 1 ( 0.00%)  	this->wdog_timeout = 0; /* No watchdog timeout by default */
 1 ( 0.00%)  	this->wdog_active = BOOL_FALSE;
 1 ( 0.00%)  	this->state = SHELL_STATE_INITIALISING;
 1 ( 0.00%)  	this->overview = NULL;
10 ( 0.00%)  	this->tinyrl = clish_shell_tinyrl_new(istream, ostream, 0);
15,691 ( 0.29%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1 ( 0.00%)  	this->current_file = NULL;
 1 ( 0.00%)  	this->pwdv = NULL;
 1 ( 0.00%)  	this->pwdc = 0;
 1 ( 0.00%)  	this->depth = -1; /* Current depth is undefined */
 1 ( 0.00%)  	this->client = NULL;
 4 ( 0.00%)  	this->lockfile = lub_string_dup(CLISH_LOCK_PATH);
1,762 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 4 ( 0.00%)  	this->default_shebang = lub_string_dup("/bin/sh");
245 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 1 ( 0.00%)  	this->interactive = BOOL_TRUE; /* The interactive shell by default. */
 1 ( 0.00%)  	this->log = BOOL_FALSE; /* Disable logging by default */
 1 ( 0.00%)  	this->log_facility = LOG_LOCAL0; /* LOCAL0 for compatibility */
 1 ( 0.00%)  	this->dryrun = BOOL_FALSE; /* Disable dry-run by default */
14 ( 0.00%)  	this->user = lub_db_getpwuid(getuid()); /* Get user information */
6,629 ( 0.12%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 1 ( 0.00%)  	this->default_plugin = BOOL_TRUE; /* Load default plugin by default */
 .           
 .           	/* Create template (string) for FIFO name generation */
18 ( 0.00%)  	snprintf(template, sizeof(template),
4,010 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 .           		"%s/klish.fifo.%u.XXXXXX", "/tmp", getpid());
 1 ( 0.00%)  	template[sizeof(template) - 1] = '\0';
 4 ( 0.00%)  	this->fifo_temp = lub_string_dup(template);
263 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 .           
 .           	/* Create internal ptypes and params */
 .           	/* Args */
12 ( 0.00%)  	tmp_ptype = clish_shell_find_create_ptype(this,
154,923 ( 2.87%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		"__ptype_ARGS",
 .           		"Arguments", "[^\\\\]+",
 .           		CLISH_PTYPE_REGEXP,
 .           		CLISH_PTYPE_NONE);
 2 ( 0.00%)  	assert(tmp_ptype);
 .           
 .           	/* Push non-NULL istream */
 2 ( 0.00%)  	if (istream)
 .           		clish_shell_push_fd(this, istream, stop_on_error);
 7 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           static void clish_shell_fini(clish_shell_t *this)
 .           {
 .           	clish_view_t *view;
 .           	clish_ptype_t *ptype;
 .           	clish_var_t *var;
 .           	unsigned i;
 .           	lub_list_node_t *iter;
 .           
 .           	/* Free all loaded plugins */
12 ( 0.00%)  	while ((iter = lub_list__get_head(this->plugins))) {
 4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (2x)
 .           		/* Remove the symbol from the list */
 9 ( 0.00%)  		lub_list_del(this->plugins, iter);
757 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		/* Free the instance */
11 ( 0.00%)  		clish_plugin_free((clish_plugin_t *)lub_list_node__get_data(iter),
11,027 ( 0.20%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (1x)
 .           			(void *)this);
 3 ( 0.00%)  		lub_list_node_free(iter);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_free (1x)
 .           	}
 3 ( 0.00%)  	lub_list_free(this->plugins);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_free (1x)
 .           
 .           	/* delete each VIEW held  */
38 ( 0.00%)  	while ((view = lub_bintree_findfirst(&this->view_tree))) {
407 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (6x)
24 ( 0.00%)  		lub_bintree_remove(&this->view_tree, view);
2,082 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
985 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c:lub_bintree_remove (4x)
19 ( 0.00%)  		clish_view_delete(view);
33,554 ( 0.62%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
27,873 ( 0.52%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_delete (4x)
 .           	}
 .           
 .           	/* delete each PTYPE held  */
86 ( 0.00%)  	while ((ptype = lub_bintree_findfirst(&this->ptype_tree))) {
1,021 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (14x)
52 ( 0.00%)  		lub_bintree_remove(&this->ptype_tree, ptype);
2,368 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c:lub_bintree_remove (13x)
43 ( 0.00%)  		clish_ptype_delete(ptype);
96,333 ( 1.78%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_delete (12x)
1,643 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           	}
 .           
 .           	/* delete each VAR held  */
 7 ( 0.00%)  	while ((var = lub_bintree_findfirst(&this->var_tree))) {
38 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (1x)
 .           		lub_bintree_remove(&this->var_tree, var);
 .           		clish_var_delete(var);
 .           	}
 .           
 .           	/* Free empty hooks */
10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
31 ( 0.00%)  		if (clish_sym__get_name(this->hooks[i]))
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (5x)
 .           			continue;
 8 ( 0.00%)  		clish_sym_free(this->hooks[i]);
216 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_free (2x)
 .           	}
 .           
 .           	/* Free symbol list */
42 ( 0.00%)  	while ((iter = lub_list__get_head(this->syms))) {
14 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (7x)
 .           		/* Remove the symbol from the list */
25 ( 0.00%)  		lub_list_del(this->syms, iter);
66 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_del (6x)
 .           		/* Free the instance */
36 ( 0.00%)  		clish_sym_free((clish_sym_t *)lub_list_node__get_data(iter));
1,134 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_free (6x)
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (6x)
18 ( 0.00%)  		lub_list_node_free(iter);
540 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_free (6x)
 .           	}
 3 ( 0.00%)  	lub_list_free(this->syms);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_free (1x)
 .           
 .           	/* Free user data storage */
 6 ( 0.00%)  	while ((iter = lub_list__get_head(this->udata))) {
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 .           		/* Remove the symbol from the list */
 1 ( 0.00%)  		lub_list_del(this->udata, iter);
 .           		/* Free the instance */
 .           		clish_udata_free((clish_udata_t *)lub_list_node__get_data(iter));
 .           		lub_list_node_free(iter);
 .           	}
 2 ( 0.00%)  	lub_list_free(this->udata);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_free (1x)
 .           
 .           	/* free the textual details */
 3 ( 0.00%)  	lub_string_free(this->overview);
138 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 .           
 .           	/* Remove the startup command */
 3 ( 0.00%)  	if (this->startup)
 2 ( 0.00%)  		clish_command_delete(this->startup);
1,001 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_delete (1x)
 .           	/* Remove the watchdog command */
 3 ( 0.00%)  	if (this->wdog)
 .           		clish_command_delete(this->wdog);
 .           	/* clean up the file stack */
 5 ( 0.00%)  	while (!clish_shell_pop_file(this));
13 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_file.c:clish_shell_pop_file (1x)
 .           	/* delete the tinyrl object */
 7 ( 0.00%)  	clish_shell_tinyrl_delete(this->tinyrl);
6,949 ( 0.13%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 .           	/* finalize each of the pwd strings */
 8 ( 0.00%)  	for (i = 0; i < this->pwdc; i++) {
 5 ( 0.00%)  		clish_shell__fini_pwd(this->pwdv[i]);
250 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_pwd.c:clish_shell__fini_pwd (1x)
 4 ( 0.00%)  		free(this->pwdv[i]);
88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
 .           	}
 .           	/* free the pwd vector */
 3 ( 0.00%)  	free(this->pwdv);
88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
 3 ( 0.00%)  	konf_client_free(this->client);
1,680 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/konf/net/net.c:konf_client_free (1x)
 .           
 3 ( 0.00%)  	lub_string_free(this->lockfile);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 3 ( 0.00%)  	lub_string_free(this->default_shebang);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 3 ( 0.00%)  	free(this->user);
119 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
 3 ( 0.00%)  	if (this->fifo_temp)
 2 ( 0.00%)  		lub_string_free(this->fifo_temp);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           clish_shell_t *clish_shell_new(
 .           	FILE * istream,
 .           	FILE * ostream,
 .           	bool_t stop_on_error)
 8 ( 0.00%)  {
 8 ( 0.00%)  	clish_shell_t *this = malloc(sizeof(clish_shell_t));
1,637 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 2 ( 0.00%)  	if (this)
 5 ( 0.00%)  		clish_shell_init(this, istream, ostream, stop_on_error);
190,544 ( 3.53%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_init (1x)
 .           
 .           	return this;
 7 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           void clish_shell_delete(clish_shell_t *this)
 5 ( 0.00%)  {
 .           	clish_shell_fini(this);
 3 ( 0.00%)  	free(this);
117 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
 3 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           struct passwd *clish_shell__get_user(clish_shell_t * this)
 .           {
 .           	return this->user;
 .           }
 .           
 .           /*-------------------------------------------------------- */
-- line 223 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/string/string.c
--------------------------------------------------------------------------------
Ir             

-- line 10 ----------------------------------------
    .           
    .           const char *lub_string_esc_default = "`|$<>&()#;\\\"!";
    .           const char *lub_string_esc_regex = "^$.*+[](){}";
    .           const char *lub_string_esc_quoted = "\\\"";
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_free(char *ptr)
    .           {
1,692 ( 0.03%)  	free(ptr);
33,110 ( 0.61%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (843x)
1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_ndecode(const char *string, unsigned int len)
   88 ( 0.00%)  {
    .           	const char *s = string;
    .           	char *res, *p;
    .           	int esc = 0;
    .           
   44 ( 0.00%)  	if (!string)
    .           		return NULL;
    .           
    .           	/* Allocate enough memory for result */
   88 ( 0.00%)  	p = res = malloc(len + 1);
3,877 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (22x)
    .           
1,294 ( 0.02%)  	while (*s && (s < (string +len))) {
  436 ( 0.01%)  		if (!esc) {
  436 ( 0.01%)  			if ('\\' == *s)
  218 ( 0.00%)  				esc = 1;
    .           			else
    .           				*p = *s;
    .           		} else {
    .           /*			switch (*s) {
    .           			case 'r':
    .           			case 'n':
    .           				*p = '\n';
    .           				break;
    .           			case 't':
    .           				*p = '\t';
    .           				break;
    .           			default:
    .           				*p = *s;
    .           				break;
    .           			}
  218 ( 0.00%)  */			*p = *s;
    .           			esc = 0;
    .           		}
    .           		if (!esc)
  436 ( 0.01%)  			p++;
  218 ( 0.00%)  		s++;
    .           	}
   22 ( 0.00%)  	*p = '\0';
    .           
    .           	return res;
   88 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           inline char *lub_string_decode(const char *string)
    .           {
    .           	return lub_string_ndecode(string, strlen(string));
    .           }
    .           
    .           /*----------------------------------------------------------- */
-- line 71 ----------------------------------------
-- line 95 ----------------------------------------
    .           			break;
    .           		}
    .           	}
    .           	return result;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_catn(char **string, const char *text, size_t len)
  744 ( 0.01%)  {
  248 ( 0.00%)  	if (text) {
    .           		char *q;
  620 ( 0.01%)  		size_t length, initlen, textlen = strlen(text);
2,450 ( 0.05%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (124x)
    .           
    .           		/* make sure the client cannot give us duff details */
  248 ( 0.00%)  		len = (len < textlen) ? len : textlen;
    .           
    .           		/* remember the size of the original string */
  784 ( 0.01%)  		initlen = *string ? strlen(*string) : 0;
2,330 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (82x)
    .           
    .           		/* account for '\0' */
  124 ( 0.00%)  		length = initlen + len + 1;
    .           
    .           		/* allocate the memory for the result */
  376 ( 0.01%)  		q = realloc(*string, length);
19,633 ( 0.36%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (123x)
1,846 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  248 ( 0.00%)  		if (NULL != q) {
  124 ( 0.00%)  			*string = q;
    .           			/* move to the end of the initial string */
  124 ( 0.00%)  			q += initlen;
    .           
2,788 ( 0.05%)  			while (len--) {
3,270 ( 0.06%)  				*q++ = *text++;
    .           			}
  124 ( 0.00%)  			*q = '\0';
    .           		}
    .           	}
  744 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_cat(char **string, const char *text)
  615 ( 0.01%)  {
  742 ( 0.01%)  	size_t len = text ? strlen(text) : 0;
1,456 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,400 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (122x)
  496 ( 0.01%)  	lub_string_catn(string, text, len);
34,712 ( 0.64%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn (122x)
2,759 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  369 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_dup(const char *string)
    .           {
  612 ( 0.01%)  	if (!string)
    .           		return NULL;
  548 ( 0.01%)  	return strdup(string);
63,034 ( 1.17%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (271x)
1,754 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   68 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_dupn(const char *string, unsigned int len)
   69 ( 0.00%)  {
    .           	char *res = NULL;
    .           
   92 ( 0.00%)  	if (!string)
    .           		return res;
   92 ( 0.00%)  	res = malloc(len + 1);
2,643 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (23x)
  119 ( 0.00%)  	strncpy(res, string, len);
1,579 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  635 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (22x)
   23 ( 0.00%)  	res[len] = '\0';
    .           
    .           	return res;
  115 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int lub_string_nocasecmp(const char *cs, const char *ct)
2,316 ( 0.04%)  {
    .           	int result = 0;
8,590 ( 0.16%)  	while ((0 == result) && *cs && *ct) {
    .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
    .           		 * MACRO implementation uses braces to prevent multiple increments
    .           		 * when called.
    .           		 */
5,034 ( 0.09%)  		int s = lub_ctype_tolower(*cs++);
11,055 ( 0.20%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (1,005x)
2,407 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,030 ( 0.09%)  		int t = lub_ctype_tolower(*ct++);
11,066 ( 0.20%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (1,006x)
    .           
    .           		result = s - t;
    .           	}
    .           	/*lint -e774 Boolean within 'if' always evealuates to True 
    .           	 * not the case because of tolower() evaluating to 0 under lint
    .           	 * (see above)
    .           	 */
    .           	if (0 == result) {
    .           		/* account for different string lengths */
  135 ( 0.00%)  		result = *cs - *ct;
    .           	}
    .           	return result;
1,930 ( 0.04%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_tolower(const char *str)
    .           {
    .           	char *tmp = strdup(str);
    .           	char *p = tmp;
    .           
    .           	while (*p) {
-- line 192 ----------------------------------------
-- line 232 ----------------------------------------
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned int lub_string_equal_part(const char *str1, const char *str2,
    .           	bool_t utf8)
    .           {
    .           	unsigned int cnt = 0;
    .           
   16 ( 0.00%)  	if (!str1 || !str2)
    .           		return cnt;
   40 ( 0.00%)  	while (*str1 && *str2) {
   39 ( 0.00%)  		if (*str1 != *str2)
    .           			break;
    9 ( 0.00%)  		cnt++;
    6 ( 0.00%)  		str1++;
    6 ( 0.00%)  		str2++;
    .           	}
    6 ( 0.00%)  	if (!utf8)
    .           		return cnt;
    .           
    .           	/* UTF8 features */
   12 ( 0.00%)  	if (cnt && (UTF8_11 == (*(str1 - 1) & UTF8_MASK)))
    9 ( 0.00%)  		cnt--;
    .           
    .           	return cnt;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *lub_string_suffix(const char *string)
    .           {
    .           	const char *p1, *p2;
    .           	p1 = p2 = string;
    .           	while (*p1) {
    .           		if (lub_ctype_isspace(*p1)) {
-- line 265 ----------------------------------------
-- line 269 ----------------------------------------
    .           		p1++;
    .           	}
    .           	return p2;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *lub_string_nextword(const char *string,
    .           	size_t *len, size_t *offset, size_t *quoted)
  496 ( 0.01%)  {
    .           	const char *word;
    .           
   62 ( 0.00%)  	*quoted = 0;
    .           
    .           	/* Find the start of a word (not including an opening quote) */
  718 ( 0.01%)  	while (*string && isspace(*string)) {
1,542 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  132 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (44x)
   45 ( 0.00%)  		string++;
   28 ( 0.00%)  		(*offset)++;
    .           	}
    .           	/* Is this the start of a quoted string ? */
  135 ( 0.00%)  	if (*string == '"') {
    .           		*quoted = 1;
    .           		string++;
    .           	}
    .           	word = string;
  124 ( 0.00%)  	*len = 0;
    .           
    .           	/* Find the end of the word */
1,066 ( 0.02%)  	while (*string) {
  936 ( 0.02%)  		if (*string == '\\') {
    .           			string++;
    .           			(*len)++;
    .           			if (*string) {
    .           				(*len)++;
    .           				string++;
    .           			}
    .           			continue;
    .           		}
    .           		/* End of word */
3,744 ( 0.07%)  		if (!*quoted && isspace(*string))
1,404 ( 0.03%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (468x)
    .           			break;
  880 ( 0.02%)  		if (*string == '"') {
    .           			/* End of a quoted string */
    .           			*quoted = 2;
    .           			break;
    .           		}
  440 ( 0.01%)  		(*len)++;
  880 ( 0.02%)  		string++;
    .           	}
    .           
    .           	return word;
  434 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned int lub_string_wordcount(const char *line)
   45 ( 0.00%)  {
    .           	const char *word;
    9 ( 0.00%)  	unsigned int result = 0;
   18 ( 0.00%)  	size_t len = 0, offset = 0;
    .           	size_t quoted;
    .           
  149 ( 0.00%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
1,390 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (8x)
2,674 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   18 ( 0.00%)  		*word || quoted;
  138 ( 0.00%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
4,192 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (23x)
    .           		/* account for the terminating quotation mark */
  124 ( 0.00%)  		len += quoted ? quoted - 1 : 0;
   23 ( 0.00%)  		result++;
    .           	}
    .           
    .           	return result;
   63 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c
--------------------------------------------------------------------------------
Ir          

-- line 19 ----------------------------------------
 .           #include "lub/string.h"
 .           
 .           /*-------------------------------------------------------- */
 .           static void clish_shell_renew_prompt(clish_shell_t *this)
 .           {
 .           	clish_context_t prompt_context;
 .           	char *prompt = NULL;
 .           	const clish_view_t *view;
 1 ( 0.00%)  	char *str = NULL;
 .           
 .           	/* Create appropriate context */
 5 ( 0.00%)  	clish_context_init(&prompt_context, this);
 8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (1x)
 .           
 .           	/* Obtain the prompt */
 4 ( 0.00%)  	view = clish_shell__get_view(this);
 9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (1x)
 2 ( 0.00%)  	assert(view);
 5 ( 0.00%)  	lub_string_cat(&str, "${_PROMPT_PREFIX}");
342 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
11 ( 0.00%)  	lub_string_cat(&str, clish_view__get_prompt(view));
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
527 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
 4 ( 0.00%)  	lub_string_cat(&str, "${_PROMPT_SUFFIX}");
402 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
 6 ( 0.00%)  	prompt = clish_shell_expand(str, SHELL_VAR_NONE, &prompt_context);
12,377 ( 0.23%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand (1x)
 2 ( 0.00%)  	assert(prompt);
 3 ( 0.00%)  	lub_string_free(str);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 8 ( 0.00%)  	tinyrl__set_prompt(this->tinyrl, prompt);
2,501 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 3 ( 0.00%)  	lub_string_free(prompt);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           static bool_t clish_shell_tinyrl_key_help(tinyrl_t *this, int key)
 .           {
 .           	bool_t result = BOOL_TRUE;
 .           
 .           	if (tinyrl_is_quoting(this)) {
-- line 50 ----------------------------------------
-- line 211 ----------------------------------------
 .           	/* keep compiler happy */
 .           	key = key;
 .           
 .           	return result;
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           static bool_t clish_shell_tinyrl_key_enter(tinyrl_t *this, int key)
 6 ( 0.00%)  {
 3 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(this);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (1x)
 4 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (1x)
 .           	const clish_command_t *cmd = NULL;
 8 ( 0.00%)  	const char *line = tinyrl__get_line(this);
789 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           	bool_t result = BOOL_FALSE;
 .           	char *errmsg = NULL;
 .           
 .           	/* Inc line counter */
 3 ( 0.00%)  	if (shell->current_file)
 1 ( 0.00%)  		shell->current_file->line++;
 .           
 .           	/* nothing to pass simply move down the screen */
 2 ( 0.00%)  	if (!*line) {
 .           		tinyrl_multi_crlf(this);
 .           		tinyrl_done(this);
 .           		return BOOL_TRUE;
 .           	}
 .           
 .           	/* try and parse the command */
 8 ( 0.00%)  	cmd = clish_shell_resolve_command(shell, line);
9,941 ( 0.18%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 2 ( 0.00%)  	if (!cmd) {
 .           		tinyrl_match_e status = clish_shell_tinyrl_complete(this);
 .           		switch (status) {
 .           		case TINYRL_MATCH:
 .           		case TINYRL_MATCH_WITH_EXTENSIONS:
 .           		case TINYRL_COMPLETED_MATCH:
 .           			/* re-fetch the line as it may have changed
 .           			 * due to auto-completion
 .           			 */
-- line 248 ----------------------------------------
-- line 263 ----------------------------------------
 .           				tinyrl_multi_crlf(this);
 .           				errmsg = "Unknown command";
 .           			}
 .           			break;
 .           		}
 .           	}
 .           	if (cmd) {
 .           		clish_pargv_status_e arg_status;
 7 ( 0.00%)  		tinyrl_multi_crlf(this);
2,118 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		/* we've got a command so check the syntax */
10 ( 0.00%)  		arg_status = clish_shell_parse(shell,
10,078 ( 0.19%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           			line, &context->cmd, &context->pargv);
 7 ( 0.00%)  		switch (arg_status) {
 .           		case CLISH_LINE_OK:
 7 ( 0.00%)  			tinyrl_done(this);
695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1 ( 0.00%)  			result = BOOL_TRUE;
 1 ( 0.00%)  			break;
 .           		case CLISH_BAD_HISTORY:
 .           			errmsg = "Bad history entry";
 .           			break;
 .           		case CLISH_BAD_CMD:
 .           			errmsg = "Illegal command line";
 .           			break;
 .           		case CLISH_BAD_PARAM:
 .           			errmsg = "Illegal parameter";
-- line 287 ----------------------------------------
-- line 307 ----------------------------------------
 .           			"%s\n", fname, shell->current_file->line,
 .           			line, errmsg);
 .           		}
 .           	}
 .           	/* keep the compiler happy */
 .           	key = key;
 .           
 .           	return result;
 7 ( 0.00%)  }
 .           
 .           /*-------------------------------------------------------- */
 .           static bool_t clish_shell_tinyrl_hotkey(tinyrl_t *this, int key)
 .           {
 .           	clish_view_t *view;
 .           	const char *cmd = NULL;
 .           	clish_context_t *context = tinyrl__get_context(this);
 .           	clish_shell_t *shell = clish_context__get_shell(context);
-- line 323 ----------------------------------------
-- line 409 ----------------------------------------
 .           	return result;
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           static void clish_shell_tinyrl_init(tinyrl_t * this)
 .           {
 .           	bool_t status;
 .           	/* bind the '?' key to the help function */
 9 ( 0.00%)  	status = tinyrl_bind_key(this, '?', clish_shell_tinyrl_key_help);
835 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 2 ( 0.00%)  	assert(status);
 .           
 .           	/* bind the <RET> key to the help function */
 5 ( 0.00%)  	status = tinyrl_bind_key(this, '\r', clish_shell_tinyrl_key_enter);
 7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
 2 ( 0.00%)  	assert(status);
 5 ( 0.00%)  	status = tinyrl_bind_key(this, '\n', clish_shell_tinyrl_key_enter);
 7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
 2 ( 0.00%)  	assert(status);
 .           
 .           	/* bind the <SPACE> key to auto-complete if necessary */
 5 ( 0.00%)  	status = tinyrl_bind_key(this, ' ', clish_shell_tinyrl_key_space);
 7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
 2 ( 0.00%)  	assert(status);
 .           
 .           	/* Set external hotkey callback */
 8 ( 0.00%)  	tinyrl__set_hotkey_fn(this, clish_shell_tinyrl_hotkey);
808 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 .           	/* Assign timeout callback */
 8 ( 0.00%)  	tinyrl__set_timeout_fn(this, clish_shell_timeout_fn);
847 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           	/* Assign keypress callback */
 8 ( 0.00%)  	tinyrl__set_keypress_fn(this, clish_shell_keypress_fn);
838 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           /*
 .            * Create an instance of the specialised class
 .            */
 .           tinyrl_t *clish_shell_tinyrl_new(FILE * istream,
 .           	FILE * ostream, unsigned stifle)
 1 ( 0.00%)  {
 .           	/* call the parent constructor */
 8 ( 0.00%)  	tinyrl_t *this = tinyrl_new(istream,
11,579 ( 0.21%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		ostream, stifle, clish_shell_tinyrl_completion);
 .           	/* now call our own constructor */
 2 ( 0.00%)  	if (this)
 .           		clish_shell_tinyrl_init(this);
 .           	return this;
 3 ( 0.00%)  }
 .           
 .           /*-------------------------------------------------------- */
 .           void clish_shell_tinyrl_fini(tinyrl_t * this)
 1 ( 0.00%)  {
 .           	/* nothing to do... yet */
 .           	this = this;
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           void clish_shell_tinyrl_delete(tinyrl_t * this)
 2 ( 0.00%)  {
 .           	/* call our destructor */
 6 ( 0.00%)  	clish_shell_tinyrl_fini(this);
670 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           	/* and call the parent destructor */
 7 ( 0.00%)  	tinyrl_delete(this);
5,578 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1 ( 0.00%)  }
 .           
 .           /*-------------------------------------------------------- */
 .           static int clish_shell_execline(clish_shell_t *this, const char *line, char **out)
 7 ( 0.00%)  {
 .           	char *str;
 .           	clish_context_t context;
 .           	tinyrl_history_t *history;
 .           	int lerror = 0;
 .           
 2 ( 0.00%)  	assert(this);
 1 ( 0.00%)  	this->state = SHELL_STATE_OK;
10 ( 0.00%)  	if (!line && !tinyrl__get_istream(this->tinyrl)) {
 5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_istream (1x)
 .           		this->state = SHELL_STATE_SYSTEM_ERROR;
 .           		return -1;
 .           	}
 .           
 .           	/* Renew prompt */
 .           	clish_shell_renew_prompt(this);
 .           
 .           	/* Set up the context for tinyrl */
 4 ( 0.00%)  	clish_context_init(&context, this);
 8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (1x)
 .           
 .           	/* Push the specified line or interactive line */
 2 ( 0.00%)  	if (line)
 1 ( 0.00%)  		str = tinyrl_forceline(this->tinyrl, &context, line);
 .           	else
 9 ( 0.00%)  		str = tinyrl_readline(this->tinyrl, &context);
48,160 ( 0.89%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  	lerror = errno;
1,596 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 2 ( 0.00%)  	if (!str) {
 .           		switch (lerror) {
 .           		case ENOENT:
 .           			this->state = SHELL_STATE_EOF;
 .           			break;
 .           		case ENOEXEC:
 .           			this->state = SHELL_STATE_SYNTAX_ERROR;
 .           			break;
 .           		default:
 .           			this->state = SHELL_STATE_SYSTEM_ERROR;
 .           			break;
 .           		};
 .           		return -1;
 .           	}
 .           
 .           	/* Deal with the history list */
 9 ( 0.00%)  	if (tinyrl__get_isatty(this->tinyrl)) {
810 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 7 ( 0.00%)  		history = tinyrl__get_history(this->tinyrl);
878 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 9 ( 0.00%)  		tinyrl_history_add(history, str);
2,513 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           	}
 3 ( 0.00%)  	free(str);
88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
 .           
 .           	/* Execute the provided command */
 4 ( 0.00%)  	if (context.cmd && context.pargv) {
 .           		int res;
 6 ( 0.00%)  		if ((res = clish_shell_execute(&context, out))) {
1,926 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_execute.c:clish_shell_execute (1x)
 .           			this->state = SHELL_STATE_SCRIPT_ERROR;
 .           			if (context.pargv)
 .           				clish_pargv_delete(context.pargv);
 .           			return res;
 .           		}
 .           	}
 .           
 3 ( 0.00%)  	if (context.pargv)
 2 ( 0.00%)  		clish_pargv_delete(context.pargv);
114 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_delete (1x)
 .           
 1 ( 0.00%)  	return 0;
 8 ( 0.00%)  }
 .           
 .           /*-------------------------------------------------------- */
 .           int clish_shell_forceline(clish_shell_t *this, const char *line, char **out)
 .           {
 .           	return clish_shell_execline(this, line, out);
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           int clish_shell_readline(clish_shell_t *this, char **out)
 1 ( 0.00%)  {
 2 ( 0.00%)  	return clish_shell_execline(this, NULL, out);
73,257 ( 1.36%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_execline (1x)
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           FILE * clish_shell__get_istream(const clish_shell_t * this)
 .           {
 .           	return tinyrl__get_istream(this->tinyrl);
 .           }
 .           
-- line 554 ----------------------------------------
-- line 577 ----------------------------------------
 .           {
 .           	assert(this);
 .           	return tinyrl__get_utf8(this->tinyrl);
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           void clish_shell__set_utf8(clish_shell_t * this, bool_t utf8)
 .           {
 2 ( 0.00%)  	assert(this);
 7 ( 0.00%)  	tinyrl__set_utf8(this->tinyrl, utf8);
768 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           void clish_shell__set_timeout(clish_shell_t *this, unsigned int timeout)
 .           {
 .           	assert(this);
 .           	this->idle_timeout = timeout;
 .           }
-- line 594 ----------------------------------------
-- line 597 ----------------------------------------
 .           tinyrl_t *clish_shell__get_tinyrl(const clish_shell_t * this)
 .           {
 .           	return this->tinyrl;
 .           }
 .           
 .           /*----------------------------------------------------------*/
 .           int clish_shell__save_history(const clish_shell_t *this, const char *fname)
 .           {
 7 ( 0.00%)  	return tinyrl__save_history(this->tinyrl, fname);
11,386 ( 0.21%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           }
 .           
 .           /*----------------------------------------------------------*/
 .           int clish_shell__restore_history(clish_shell_t *this, const char *fname)
 .           {
 7 ( 0.00%)  	return tinyrl__restore_history(this->tinyrl, fname);
32,955 ( 0.61%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           }
 .           
 .           /*----------------------------------------------------------*/
 .           void clish_shell__stifle_history(clish_shell_t *this, unsigned int stifle)
 .           {
 7 ( 0.00%)  	tinyrl__stifle_history(this->tinyrl, stifle);
1,599 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           }
 .           
 .           /*-------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/bin/clish.c
--------------------------------------------------------------------------------
Ir          

-- line 43 ----------------------------------------
 .           /* #define version(v) printf("%s\n", QUOTE(v)) */
 .           #define version(v) printf("%s\n", v)
 .           
 .           static void sighandler(int signo);
 .           static void help(int status, const char *argv0);
 .           
 .           /*--------------------------------------------------------- */
 .           int main(int argc, char **argv)
 9 ( 0.00%)  {
 .           	int running;
 .           	int result = -1;
 .           	clish_shell_t *shell = NULL;
 .           
 .           	/* Command line options */
 2 ( 0.00%)  	const char *socket_path = KONFD_SOCKET_PATH;
 1 ( 0.00%)  	bool_t lockless = BOOL_FALSE;
 1 ( 0.00%)  	bool_t stop_on_error = BOOL_FALSE;
 1 ( 0.00%)  	bool_t interactive = BOOL_TRUE;
 1 ( 0.00%)  	bool_t quiet = BOOL_FALSE;
 1 ( 0.00%)  	bool_t utf8 = BOOL_FALSE;
 1 ( 0.00%)  	bool_t bit8 = BOOL_FALSE;
 1 ( 0.00%)  	bool_t log = BOOL_FALSE;
 1 ( 0.00%)  	int log_facility = LOG_LOCAL0;
 1 ( 0.00%)  	bool_t dryrun = BOOL_FALSE;
 1 ( 0.00%)  	bool_t dryrun_config = BOOL_FALSE;
 8 ( 0.00%)  	const char *xml_path = getenv("CLISH_PATH");
1,913 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 4 ( 0.00%)  	const char *view = getenv("CLISH_VIEW");
380 ( 0.01%)  => /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv (1x)
 4 ( 0.00%)  	const char *viewid = getenv("CLISH_VIEWID");
380 ( 0.01%)  => /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv (1x)
 .           	const char *xslt_file = NULL;
 .           
 2 ( 0.00%)  	FILE *outfd = stdout;
 1 ( 0.00%)  	bool_t istimeout = BOOL_FALSE;
 1 ( 0.00%)  	unsigned int timeout = 0;
 1 ( 0.00%)  	bool_t cmd = BOOL_FALSE; /* -c option */
 .           	lub_list_t *cmds; /* Commands defined by -c */
 .           	lub_list_node_t *iter;
 2 ( 0.00%)  	const char *histfile = "~/.clish_history";
 .           	char *histfile_expanded = NULL;
 1 ( 0.00%)  	unsigned int histsize = 50;
 .           	clish_sym_t *sym = NULL;
 .           
 .           	/* Signal vars */
 .           	struct sigaction sigpipe_act;
 .           	sigset_t sigpipe_set;
 .           
 .           	static const char *shortopts = "hvs:ledx:w:i:bqu8oO:kt:c:f:z:p:";
 .           #ifdef HAVE_GETOPT_LONG
-- line 89 ----------------------------------------
-- line 109 ----------------------------------------
 .           		{"histfile",	1, NULL, 'f'},
 .           		{"histsize",	1, NULL, 'z'},
 .           		{"xslt",	1, NULL, 'p'},
 .           		{NULL,		0, NULL, 0}
 .           	};
 .           #endif
 .           
 .           	/* Ignore SIGPIPE */
 8 ( 0.00%)  	sigemptyset(&sigpipe_set);
1,626 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 8 ( 0.00%)  	sigaddset(&sigpipe_set, SIGPIPE);
1,589 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 1 ( 0.00%)  	sigpipe_act.sa_flags = 0;
32 ( 0.00%)  	sigpipe_act.sa_mask = sigpipe_set;
 2 ( 0.00%)  	sigpipe_act.sa_handler = &sighandler;
 9 ( 0.00%)  	sigaction(SIGPIPE, &sigpipe_act, NULL);
1,622 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           #if HAVE_LOCALE_H
 .           	/* Set current locale */
 8 ( 0.00%)  	setlocale(LC_ALL, "");
94,116 ( 1.74%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           #endif
 .           
 .           	/* Var initialization */
 8 ( 0.00%)  	cmds = lub_list_new(NULL);
2,408 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           	/* Parse command line options */
 .           	while(1) {
 .           		int opt;
 .           #ifdef HAVE_GETOPT_LONG
18 ( 0.00%)  		opt = getopt_long(argc, argv, shortopts, longopts, NULL);
2,245 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
109 ( 0.00%)  => /opt/build/glibc/glibc-2.24/posix/getopt1.c:getopt_long (1x)
 .           #else
 .           		opt = getopt(argc, argv, shortopts);
 .           #endif
 4 ( 0.00%)  		if (-1 == opt)
 .           			break;
 7 ( 0.00%)  		switch (opt) {
 .           		case 's':
 .           			socket_path = optarg;
 .           			break;
 .           		case 'l':
 .           			lockless = BOOL_TRUE;
 .           			break;
 .           		case 'e':
 .           			stop_on_error = BOOL_TRUE;
-- line 150 ----------------------------------------
-- line 160 ----------------------------------------
 .           			break;
 .           		case '8':
 .           			bit8 = BOOL_TRUE;
 .           			break;
 .           		case 'o':
 .           			log = BOOL_TRUE;
 .           			break;
 .           		case 'O':
 3 ( 0.00%)  			if (lub_log_facility(optarg, &log_facility)) {
 .           				fprintf(stderr, "Error: Illegal syslog facility %s.\n", optarg);
 .           				help(-1, argv[0]);
 .           				goto end;
 .           			}
 .           			break;
 .           		case 'd':
 .           			dryrun = BOOL_TRUE;
 .           			break;
 .           		case 'x':
 2 ( 0.00%)  			xml_path = optarg;
 1 ( 0.00%)  			break;
 .           		case 'w':
 .           			view = optarg;
 .           			break;
 .           		case 'i':
 .           			viewid = optarg;
 .           			break;
 .           		case 'k':
 .           			lockless = BOOL_TRUE;
 .           			dryrun = BOOL_TRUE;
 .           			dryrun_config = BOOL_TRUE;
 .           			break;
 .           		case 't':
 .           			istimeout = BOOL_TRUE;
 .           			timeout = 0;
 2 ( 0.00%)  			lub_conv_atoui(optarg, &timeout, 0);
 .           			break;
 .           		case 'c': {
 .           			char *str;
 .           			cmd = BOOL_TRUE;
 .           			quiet = BOOL_TRUE;
 .           			str = strdup(optarg);
 .           			lub_list_add(cmds, str);
 .           			}
-- line 202 ----------------------------------------
-- line 204 ----------------------------------------
 .           		case 'f':
 .           			if (!strcmp(optarg, "/dev/null"))
 .           				histfile = NULL;
 .           			else
 .           				histfile = optarg;
 .           			break;
 .           		case 'z': {
 .           			histsize = 0;
 2 ( 0.00%)  			lub_conv_atoui(optarg, &histsize, 0);
 .           			}
 .           			break;
 .           		case 'p':
 .           #ifdef HAVE_LIB_LIBXSLT
 .           			xslt_file = optarg;
 .           #else
 .           			fprintf(stderr, "Error: The klish was built without XSLT support.\n");
 .           			goto end;
-- line 220 ----------------------------------------
-- line 231 ----------------------------------------
 .           		default:
 .           			help(-1, argv[0]);
 .           			goto end;
 .           			break;
 .           		}
 .           	}
 .           
 .           	/* Validate command line options */
 4 ( 0.00%)  	if (utf8 && bit8) {
 .           		fprintf(stderr, "Error: The -u and -8 options can't be used together.\n");
 .           		goto end;
 .           	}
 .           
 .           	/* Create shell instance */
 2 ( 0.00%)  	if (quiet) {
 .           		FILE *tmpfd = NULL;
 .           		if ((tmpfd = fopen("/dev/null", "w")))
 .           			outfd = tmpfd;
 .           	}
10 ( 0.00%)  	shell = clish_shell_new(NULL, outfd, stop_on_error);
192,854 ( 3.57%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 2 ( 0.00%)  	if (!shell) {
 .           		fprintf(stderr, "Error: Can't run clish.\n");
 .           		goto end;
 .           	}
 .           	/* Load the XML files */
 6 ( 0.00%)  	clish_xmldoc_start();
702 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
11 ( 0.00%)  	if (clish_shell_load_scheme(shell, xml_path, xslt_file))
4,179,319 (77.40%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		goto end;
 .           	/* Set communication to the konfd */
 8 ( 0.00%)  	clish_shell__set_socket(shell, socket_path);
5,538 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	/* Set lockless mode */
 2 ( 0.00%)  	if (lockless)
 .           		clish_shell__set_lockfile(shell, NULL);
 .           	/* Set interactive mode */
 2 ( 0.00%)  	if (!interactive)
 .           		clish_shell__set_interactive(shell, interactive);
 .           	/* Set startup view */
 3 ( 0.00%)  	if (view)
 .           		clish_shell__set_startup_view(shell, view);
 .           	/* Set startup viewid */
 3 ( 0.00%)  	if (viewid)
 .           		clish_shell__set_startup_viewid(shell, viewid);
 .           	/* Set UTF-8 or 8-bit mode */
 4 ( 0.00%)  	if (utf8 || bit8)
 .           		clish_shell__set_utf8(shell, utf8);
 .           	else {
 .           #if HAVE_LANGINFO_CODESET
 .           		/* Autodetect encoding */
17 ( 0.00%)  		if (!strcmp(nl_langinfo(CODESET), "UTF-8"))
3,103 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 9 ( 0.00%)  			clish_shell__set_utf8(shell, BOOL_TRUE);
1,501 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           #else
 .           		/* The default is 8-bit if locale is not supported */
 .           		clish_shell__set_utf8(shell, BOOL_FALSE);
 .           #endif
 .           	}
 .           	/* Set logging */
 2 ( 0.00%)  	if (log) {
 .           		clish_shell__set_log(shell, log);
 .           		clish_shell__set_facility(shell, log_facility);
 .           	}
 .           	/* Set dry-run */
 2 ( 0.00%)  	if (dryrun)
 .           		clish_shell__set_dryrun(shell, dryrun);
 .           	/* Set idle timeout */
 2 ( 0.00%)  	if (istimeout)
 .           		clish_shell__set_timeout(shell, timeout);
 .           	/* Set history settings */
 8 ( 0.00%)  	clish_shell__stifle_history(shell, histsize);
2,399 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 3 ( 0.00%)  	if (histfile)
 8 ( 0.00%)  		histfile_expanded = lub_system_tilde_expand(histfile);
2,160 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 2 ( 0.00%)  	if (histfile_expanded)
 8 ( 0.00%)  		clish_shell__restore_history(shell, histfile_expanded);
33,763 ( 0.63%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	/* Load plugins, link aliases and check access rights */
 9 ( 0.00%)  	if (clish_shell_prepare(shell) < 0)
227,259 ( 4.21%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		goto end;
 .           	/* Dryrun config and log hooks */
 2 ( 0.00%)  	if (dryrun_config) {
 .           		if ((sym = clish_shell_get_hook(shell, CLISH_SYM_TYPE_CONFIG)))
 .           			clish_sym__set_permanent(sym, BOOL_FALSE);
 .           		if ((sym = clish_shell_get_hook(shell, CLISH_SYM_TYPE_LOG)))
 .           			clish_sym__set_permanent(sym, BOOL_FALSE);
 .           	}
 .           #ifdef DEBUG
 .           	clish_shell_dump(shell);
 .           #endif
 .           
 .           	/* Set source of command stream: files or interactive tty */
 3 ( 0.00%)  	if(optind < argc) {
 .           		int i;
 .           		/* Run the commands from the files */
 .           		for (i = argc - 1; i >= optind; i--)
 .           			clish_shell_push_file(shell, argv[i], stop_on_error);
 .           	} else {
 .           		/* The interactive shell */
15 ( 0.00%)  		int tmpfd = dup(fileno(stdin));
2,979 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 .           #ifdef FD_CLOEXEC
16 ( 0.00%)  		fcntl(tmpfd, F_SETFD, fcntl(tmpfd, F_GETFD) | FD_CLOEXEC);
1,522 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
22 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/sysv/linux/fcntl.c:fcntl (1x)
 .           #endif
18 ( 0.00%)  		clish_shell_push_fd(shell, fdopen(tmpfd, "r"), stop_on_error);
6,901 ( 0.13%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 .           	}
 .           
 .           	/* Execute startup */
 7 ( 0.00%)  	running = clish_shell_startup(shell);
65,982 ( 1.22%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 2 ( 0.00%)  	if (running) {
 .           		fprintf(stderr, "Error: Can't startup clish.\n");
 .           		goto end;
 .           	}
 .           
 2 ( 0.00%)  	if (cmd) {
 .           		/* Iterate cmds */
 .           		for(iter = lub_list__get_head(cmds);
 .           			iter; iter = lub_list_node__get_next(iter)) {
 .           			char *str = (char *)lub_list_node__get_data(iter);
 .           			result = clish_shell_forceline(shell, str, NULL);
 .           			if (stop_on_error && result)
 .           				break;
 .           		}
 .           	} else {
 .           		/* Main loop */
 9 ( 0.00%)  		result = clish_shell_loop(shell);
79,045 ( 1.46%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	}
 .           
 .           end:
 .           	/* Cleanup */
 .           	if (shell) {
 2 ( 0.00%)  		if (histfile_expanded) {
 8 ( 0.00%)  			clish_shell__save_history(shell, histfile_expanded);
12,170 ( 0.23%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 7 ( 0.00%)  			free(histfile_expanded);
1,622 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		}
 8 ( 0.00%)  		clish_shell_delete(shell);
192,429 ( 3.56%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	}
 2 ( 0.00%)  	if (quiet && (outfd != stdout))
 .           		fclose(outfd);
 .           
 .           	/* Delete each cmds element */
10 ( 0.00%)  	while ((iter = lub_list__get_head(cmds))) {
847 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		lub_list_del(cmds, iter);
 .           		free(lub_list_node__get_data(iter));
 .           		lub_list_node_free(iter);
 .           	}
 7 ( 0.00%)  	lub_list_free(cmds);
844 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           	/* Stop XML engine */
 6 ( 0.00%)  	clish_xmldoc_stop();
702 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           	return result;
 9 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           /* Print help message */
 .           static void help(int status, const char *argv0)
 .           {
 .           	const char *name = NULL;
 .           
 .           	if (!argv0)
-- line 385 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/view/view.c
--------------------------------------------------------------------------------
Ir           

-- line 17 ----------------------------------------
  .           /*---------------------------------------------------------
  .            * PRIVATE META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_view_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_view_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
183 ( 0.00%)  	return strcmp(this->name, key);
2,764 ( 0.05%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (61x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_view_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 14 ( 0.00%)  {
  .           	const clish_view_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
 60 ( 0.00%)  	strcpy((char *)key, this->name);
1,495 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
295 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (13x)
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
  .           static void clish_view_init(clish_view_t * this, const char *name, const char *prompt)
  .           {
  .           	/* set up defaults */
 20 ( 0.00%)  	this->name = lub_string_dup(name);
838 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
  5 ( 0.00%)  	this->prompt = NULL;
  5 ( 0.00%)  	this->depth = 0;
  5 ( 0.00%)  	this->restore = CLISH_RESTORE_NONE;
  5 ( 0.00%)  	this->access = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 15 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
 25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (5x)
  .           
  .           	/* initialise the tree of commands for this view */
 44 ( 0.00%)  	lub_bintree_init(&this->tree,
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (5x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_offset (4x)
  .           		clish_command_bt_offset(),
  .           		clish_command_bt_compare, clish_command_bt_getkey);
  .           
  .           	/* Initialise the list of namespaces.
  .           	 * It's important to add new items to the
  .           	 * tail of list.
  .           	 */
 20 ( 0.00%)  	this->nspaces = lub_list_new(NULL);
599 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (5x)
  .           
  .           	/* set up the defaults */
 24 ( 0.00%)  	clish_view__set_prompt(this, prompt);
827 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
830 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__set_prompt (4x)
  .           
  .           	/* Initialize hotkey structures */
 19 ( 0.00%)  	this->hotkeys = clish_hotkeyv_new();
734 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
533 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/hotkey/hotkey.c:clish_hotkeyv_new (4x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_view_fini(clish_view_t * this)
  .           {
  .           	clish_command_t *cmd;
  .           	lub_list_node_t *iter;
  .           	clish_nspace_t *nspace;
  .           
  .           	/* delete each command held by this view */
191 ( 0.00%)  	while ((cmd = lub_bintree_findfirst(&this->tree))) {
2,096 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (31x)
  .           		/* remove the command from the tree */
104 ( 0.00%)  		lub_bintree_remove(&this->tree, cmd);
14,562 ( 0.27%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c:lub_bintree_remove (26x)
  .           		/* release the instance */
 82 ( 0.00%)  		clish_command_delete(cmd);
37,151 ( 0.69%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_delete (25x)
3,380 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           
  .           	/* Free namespaces list */
 30 ( 0.00%)  	while ((iter = lub_list__get_head(this->nspaces))) {
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
  .           		/* Remove the nspace from the list */
  5 ( 0.00%)  		lub_list_del(this->nspaces, iter);
  .           		nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
  .           		lub_list_node_free(iter);
  .           		/* Free the instance */
  .           		clish_nspace_delete(nspace);
  .           	}
 10 ( 0.00%)  	lub_list_free(this->nspaces);
450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_free (5x)
  .           
  .           	/* Free hotkey structures */
 19 ( 0.00%)  	clish_hotkeyv_delete(this->hotkeys);
767 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
456 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/hotkey/hotkey.c:clish_hotkeyv_delete (4x)
  .           
  .           	/* free our memory */
 15 ( 0.00%)  	lub_string_free(this->name);
450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
 15 ( 0.00%)  	lub_string_free(this->prompt);
450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
 15 ( 0.00%)  	lub_string_free(this->access);
 45 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           size_t clish_view_bt_offset(void)
  .           {
  .           	return offsetof(clish_view_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_view_t *clish_view_new(const char *name, const char *prompt)
 25 ( 0.00%)  {
 20 ( 0.00%)  	clish_view_t *this = malloc(sizeof(clish_view_t));
1,175 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (5x)
  .           
 10 ( 0.00%)  	if (this)
  .           		clish_view_init(this, name, prompt);
  .           	return this;
 25 ( 0.00%)  }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC METHODS
  .            *--------------------------------------------------------- */
  .           void clish_view_delete(clish_view_t * this)
 25 ( 0.00%)  {
  .           	clish_view_fini(this);
 15 ( 0.00%)  	free(this);
440 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (5x)
 15 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_view_new_command(clish_view_t * this,
  .           	const char *name, const char *help)
162 ( 0.00%)  {
  .           	/* allocate the memory for a new parameter definition */
 85 ( 0.00%)  	clish_command_t *cmd = clish_command_new(name, help);
35,189 ( 0.65%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_new (26x)
3,605 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 54 ( 0.00%)  	assert(cmd);
  .           
  .           	/* if this is a command other than the startup command... */
 81 ( 0.00%)  	if (NULL != help) {
  .           		/* ...insert it into the binary tree for this view */
156 ( 0.00%)  		if (-1 == lub_bintree_insert(&this->tree, cmd)) {
7,250 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (26x)
  .           			/* inserting a duplicate command is bad */
  .           			clish_command_delete(cmd);
  .           			cmd = NULL;
  .           		}
  .           	}
  .           	return cmd;
135 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* This method identifies the command (if any) which provides
  .            * the longest match with the specified line of text.
  .            *
  .            * NB this comparison is case insensitive.
  .            *
  .            * this - the view instance upon which to operate
  .            * line - the command line to analyse 
  .            */
  .           clish_command_t *clish_view_resolve_prefix(clish_view_t * this,
  .           	const char *line, bool_t inherit)
 40 ( 0.00%)  {
  4 ( 0.00%)  	clish_command_t *result = NULL, *cmd;
  4 ( 0.00%)  	char *buffer = NULL;
  .           	lub_argv_t *argv;
  .           	unsigned i;
  .           
  .           	/* create a vector of arguments */
 16 ( 0.00%)  	argv = lub_argv_new(line, 0);
3,267 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (4x)
  .           
 42 ( 0.00%)  	for (i = 0; i < lub_argv__get_count(argv); i++) {
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (6x)
  .           		/* set our buffer to be that of the first "i" arguments  */
 36 ( 0.00%)  		lub_string_cat(&buffer, lub_argv__get_arg(argv, i));
973 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (4x)
 40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (4x)
  .           
  .           		/* set the result to the longest match */
 24 ( 0.00%)  		cmd = clish_view_find_command(this, buffer, inherit);
3,209 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (4x)
  .           
  .           		/* job done */
  8 ( 0.00%)  		if (!cmd)
  .           			break;
  .           		result = cmd;
  .           
  .           		/* ready for the next word */
  8 ( 0.00%)  		lub_string_cat(&buffer, " ");
488 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (2x)
  .           	}
  .           
  .           	/* free up our dynamic storage */
 12 ( 0.00%)  	lub_string_free(buffer);
360 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (4x)
 16 ( 0.00%)  	lub_argv_delete(argv);
1,062 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
876 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (3x)
  .           
  .           	return result;
 36 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_view_resolve_command(clish_view_t *this,
  .           	const char *line, bool_t inherit)
 12 ( 0.00%)  {
 12 ( 0.00%)  	clish_command_t *result = clish_view_resolve_prefix(this, line, inherit);
6,467 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_prefix (3x)
4,775 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
 10 ( 0.00%)  	if (result) {
  8 ( 0.00%)  		clish_action_t *action = clish_command__get_action(result);
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (2x)
 12 ( 0.00%)  		clish_config_t *config = clish_command__get_config(result);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_config (1x)
 14 ( 0.00%)  		if (!clish_action__get_script(action) &&
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_script (2x)
  6 ( 0.00%)  			(!clish_action__get_builtin(action)) &&
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_builtin (2x)
  .           			(CLISH_CONFIG_NONE == clish_config__get_op(config)) &&
  .           			(!clish_command__get_param_count(result)) &&
  .           			(!clish_command__get_viewname(result))) {
  .           			/* if this doesn't do anything we've
  .           			 * not resolved a command
  .           			 */
  2 ( 0.00%)  			result = NULL;
  .           		}
  .           	}
  .           
  .           	return result;
 20 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_view_find_command(clish_view_t * this,
  .           	const char *name, bool_t inherit)
240 ( 0.00%)  {
  .           	clish_command_t *result = NULL;
  .           
  .           	/* Search the current view */
 90 ( 0.00%)  	result = lub_bintree_find(&this->tree, name);
8,917 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (30x)
  .           
 60 ( 0.00%)  	if (inherit) {
  .           		lub_list_node_t *iter;
  .           		clish_command_t *cmd;
  .           		clish_nspace_t *nspace;
  .           
  .           		/* Iterate elements. It's important to iterate
  .           		 * items starting from tail bacause the next
  .           		 * NAMESPACE has higher priority than previous one
  .           		 * in a case then the both NAMESPACEs have the
  .           		 * commands with the same name.
  .           		 */
 28 ( 0.00%)  		for(iter = lub_list__get_tail(this->nspaces);
914 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_tail (3x)
  .           			iter; iter = lub_list_node__get_prev(iter)) {
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
  .           			cmd = clish_nspace_find_command(nspace, name);
  .           			/* Choose the longest match */
  .           			result = clish_command_choose_longest(result, cmd);
  .           		}
  .           	}
  .           
  .           	return result;
210 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const clish_command_t *find_next_completion(clish_view_t * this,
  .           		const char *iter_cmd, const char *line)
  .           {
  .           	clish_command_t *cmd;
  .           	const char *name = "";
  .           	lub_argv_t *largv;
-- line 257 ----------------------------------------
-- line 331 ----------------------------------------
  .           		clish_nspace_clean_proxy((clish_nspace_t *)lub_list_node__get_data(iter));
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC ATTRIBUTES
  .            *--------------------------------------------------------- */
  .           lub_bintree_t * clish_view__get_command_tree(clish_view_t *this)
  5 ( 0.00%)  {
  .           	return &this->tree;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_t * clish_view__get_nspace_tree(clish_view_t *this)
  .           {
  5 ( 0.00%)  	return this->nspaces;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_view__get_name(const clish_view_t * this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_view__set_prompt(clish_view_t * this, const char *prompt)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->prompt);
 20 ( 0.00%)  	this->prompt = lub_string_dup(prompt);
946 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_view__get_prompt(const clish_view_t *this)
  .           {
  1 ( 0.00%)  	return this->prompt;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_view__set_depth(clish_view_t * this, unsigned depth)
  .           {
  .           	this->depth = depth;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned clish_view__get_depth(const clish_view_t * this)
  .           {
  1 ( 0.00%)  	return this->depth;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_view__set_restore(clish_view_t * this,
  .           	clish_view_restore_e restore)
  .           {
  .           	this->restore = restore;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_view_restore_e clish_view__get_restore(const clish_view_t * this)
  .           {
  1 ( 0.00%)  	return this->restore;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_view_insert_hotkey(const clish_view_t *this, const char *key, const char *cmd)
  .           {
  .           	return clish_hotkeyv_insert(this->hotkeys, key, cmd);
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 399 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c
--------------------------------------------------------------------------------
Ir             

-- line 73 ----------------------------------------
    .            */
    .           const char *default_path = "/etc/clish;~/.clish";
    .           
    .           static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent);
    .           
    .           /*-------------------------------------------------------- */
    .           int clish_shell_load_scheme(clish_shell_t *this, const char *xml_path, const char *xslt_path)
    8 ( 0.00%)  {
    .           	const char *path = xml_path;
    .           	char *buffer;
    .           	char *dirname;
    .           	char *saveptr = NULL;
    .           	int res = -1;
    .           	clish_xmldoc_t *doc = NULL;
    .           	DIR *dir;
    .           
-- line 89 ----------------------------------------
-- line 99 ----------------------------------------
    .           			return -1;
    .           		}
    .           	}
    .           #else
    .           	xslt_path = xslt_path; /* Happy compiler */
    .           #endif
    .           
    .           	/* Use the default path */
    2 ( 0.00%)  	if (!path)
    .           		path = default_path;
    9 ( 0.00%)  	buffer = lub_system_tilde_expand(path);
5,312 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Loop though each directory */
    .           	for (dirname = strtok_r(buffer, ";", &saveptr);
    .           		dirname; dirname = strtok_r(NULL, ";", &saveptr)) {
    .           		struct dirent *entry;
    .           
    .           		/* Search this directory for any XML files */
    8 ( 0.00%)  		dir = opendir(dirname);
2,024 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    3 ( 0.00%)  		if (NULL == dir) {
    .           #ifdef DEBUG
    .           			tinyrl_printf(this->tinyrl,
    .           				"*** Failed to open '%s' directory\n",
    .           				dirname);
    .           #endif
    .           			continue;
    .           		}
   79 ( 0.00%)  		for (entry = readdir(dir); entry; entry = readdir(dir)) {
2,157 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  573 ( 0.01%)  => /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c:readdir (14x)
   88 ( 0.00%)  			const char *extension = strrchr(entry->d_name, '.');
1,506 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  401 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strrchr.S:rindex (13x)
   14 ( 0.00%)  			char *filename = NULL;
    .           			clish_xmlnode_t *root;
    .           			int r;
    .           
    .           			/* Check the filename */
  134 ( 0.00%)  			if (!extension || strcmp(".xml", extension))
    .           				continue;
    .           
    .           			/* Build the filename */
   41 ( 0.00%)  			lub_string_cat(&filename, dirname);
3,779 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, "/");
2,620 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, entry->d_name);
4,032 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
    .           
    .           #ifdef DEBUG
    .           			fprintf(stderr, "Parse XML-file: %s\n", filename);
    .           #endif
    .           			/* Load current XML file */
   44 ( 0.00%)  			doc = clish_xmldoc_read(filename);
1,456,349 (26.97%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read (9x)
134,640 ( 2.49%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  			if (!clish_xmldoc_is_valid(doc)) {
  659 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (9x)
   10 ( 0.00%)  				int errcaps = clish_xmldoc_error_caps(doc);
    .           				printf("Unable to open file '%s'", filename);
    .           				if ((errcaps & CLISH_XMLERR_LINE) == CLISH_XMLERR_LINE)
    .           					printf(", at line %d", clish_xmldoc_get_err_line(doc));
    .           				if ((errcaps & CLISH_XMLERR_COL) == CLISH_XMLERR_COL)
    .           					printf(", at column %d", clish_xmldoc_get_err_col(doc));
    .           				if ((errcaps & CLISH_XMLERR_DESC) == CLISH_XMLERR_DESC)
    .           					printf(", message is %s", clish_xmldoc_get_err_msg(doc));
    .           				printf("\n");
-- line 155 ----------------------------------------
-- line 171 ----------------------------------------
    .           				}
    .           				clish_xmldoc_release(doc);
    .           				doc = tmp;
    .           			}
    .           
    .           			if (!xslt_path && clish_xslt_is_valid(xslt))
    .           				clish_xslt_release(xslt);
    .           #endif
   24 ( 0.00%)  			root = clish_xmldoc_get_root(doc);
  673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_get_root (9x)
    .           			r = process_node(this, root, NULL);
   44 ( 0.00%)  			clish_xmldoc_release(doc);
179,070 ( 3.32%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release (9x)
14,628 ( 0.27%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           			/* Error message */
   30 ( 0.00%)  			if (r) {
    .           				fprintf(stderr, CLISH_XML_ERROR_STR"File %s\n",
    .           					filename);
    .           				lub_string_free(filename);
    .           				goto error;
    .           			}
   34 ( 0.00%)  			lub_string_free(filename);
2,402 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  810 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
    .           		}
    7 ( 0.00%)  		closedir(dir);
1,641 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           /* To don't free memory twice on cleanup */
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (!xslt_path)
    .           		xslt = NULL;
    .           #endif
    1 ( 0.00%)  	doc = NULL;
    .           	dir = NULL;
    1 ( 0.00%)  	res = 0; /* Success */
    .           error:
    3 ( 0.00%)  	lub_string_free(buffer);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    .           	if (dir)
    .           		closedir(dir);
    5 ( 0.00%)  	if (clish_xmldoc_is_valid(doc))
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (1x)
    .           		clish_xmldoc_release(doc);
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (clish_xslt_is_valid(xslt))
    .           		clish_xslt_release(xslt);
    .           #endif
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /*
    .            * ------------------------------------------------------
    .            * This function reads an element from the XML stream and processes it.
    .            * ------------------------------------------------------
    .            */
  980 ( 0.02%)  static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent)
    .           {
   98 ( 0.00%)  	int res = 0;
    .           
2,511 ( 0.05%)  	switch (clish_xmlnode_get_type(node)) {
2,342,797 (43.39%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 (30x)
  870 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type (174x)
    .           	case CLISH_XMLNODE_ELM: {
    .           			clish_xml_cb_t * cb;
    .           			char name[128];
   98 ( 0.00%)  			unsigned int namelen = sizeof(name);
  788 ( 0.01%)  			if (clish_xmlnode_get_name(node, name, &namelen) == 0) {
5,400 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (9x)
2,754 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,990 ( 0.04%)  				for (cb = &xml_elements[0]; cb->element; cb++) {
2,369 ( 0.04%)  					if (0 == strcmp(name, cb->element)) {
1,476 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  189 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (9x)
    .           #ifdef DEBUG
    .           						fprintf(stderr, "NODE:");
    .           						clish_xmlnode_print(node, stderr);
    .           						fprintf(stderr, "\n");
    .           #endif
    .           						/* process the elements at this level */
  490 ( 0.01%)  						res = cb->handler(shell, node, parent);
2,353,098 (43.58%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module (10x)
    .           
    .           						/* Error message */
  294 ( 0.01%)  						if (res) {
    .           							char *ename = clish_xmlnode_fetch_attr(node, "name");
    .           							char *eref = clish_xmlnode_fetch_attr(node, "ref");
    .           							char *ekey = clish_xmlnode_fetch_attr(node, "key");
    .           							char *efile = clish_xmlnode_fetch_attr(node, "file");
    .           							fprintf(stderr, CLISH_XML_ERROR_STR"Node %s", name);
    .           							if (ename)
    .           								fprintf(stderr, ", name=\"%s\"", ename);
    .           							if (eref)
-- line 252 ----------------------------------------
-- line 274 ----------------------------------------
    .           	case CLISH_XMLNODE_COMMENT:
    .           	case CLISH_XMLNODE_DECL:
    .           	case CLISH_XMLNODE_UNKNOWN:
    .           	default:
    .           		break;
    .           	}
    .           
    .           	return res;
  882 ( 0.02%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_children(clish_shell_t *shell,
    .           	clish_xmlnode_t *element, void *parent)
  549 ( 0.01%)  {
   61 ( 0.00%)  	clish_xmlnode_t *node = NULL;
    .           	int res;
    .           
3,350 ( 0.06%)  	while ((node = clish_xmlnode_next_child(element, node)) != NULL) {
  799 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  750 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child (183x)
    .           		/* Now deal with all the contained elements */
    .           		res = process_node(shell, node, parent);
  176 ( 0.00%)  		if (res)
    .           			return res;
    .           	}
    .           
   61 ( 0.00%)  	return 0;
  366 ( 0.01%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_clish_module(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   50 ( 0.00%)  {
    .           	/* Create the global view */
   30 ( 0.00%)  	if (!shell->global)
   11 ( 0.00%)  		shell->global = clish_shell_find_create_view(shell,
5,219 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			"__view_global", "");
    .           
    .           	parent = parent; /* Happy compiler */
    .           
   30 ( 0.00%)  	return process_children(shell, element, shell->global);
2,347,728 (43.48%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children (10x)
   30 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_view(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   45 ( 0.00%)  {
    .           	clish_view_t *view;
    .           	int res = -1;
    .           
   29 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  164 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (4x)
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  	char *prompt = clish_xmlnode_fetch_attr(element, "prompt");
  328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *depth = clish_xmlnode_fetch_attr(element, "depth");
  322 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *restore = clish_xmlnode_fetch_attr(element, "restore");
  340 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
  334 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
    .           
    .           	/* Check syntax */
   10 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
    .           
    .           	/* re-use a view if it already exists */
   30 ( 0.00%)  	view = clish_shell_find_create_view(shell, name, prompt);
6,372 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell_find_create_view (5x)
    .           
   10 ( 0.00%)  	if (depth && (lub_ctype_isdigit(*depth))) {
    .           		unsigned int res = 0;
    .           		lub_conv_atoui(depth, &res, 0);
    .           		clish_view__set_depth(view, res);
    .           	}
    .           
   10 ( 0.00%)  	if (restore) {
    .           		if (!lub_string_nocasecmp(restore, "depth"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_DEPTH);
    .           		else if (!lub_string_nocasecmp(restore, "view"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_VIEW);
    .           		else
    .           			clish_view__set_restore(view, CLISH_RESTORE_NONE);
    .           	}
    .           
   10 ( 0.00%)  	if (access)
    .           		clish_view__set_access(view, access);
    .           
    .           //process_view_end:
   25 ( 0.00%)  	res = process_children(shell, element, view);
294,166 ( 5.45%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (5x)
    .           error:
   15 ( 0.00%)  	clish_xml_release(name);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(prompt);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(depth);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(restore);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(access);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   45 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_ptype(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   99 ( 0.00%)  {
    .           	clish_ptype_method_e method;
    .           	clish_ptype_preprocess_e preprocess;
    .           	int res = -1;
    .           
   55 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  509 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,291 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *pattern = clish_xmlnode_fetch_attr(element, "pattern");
1,017 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *method_name = clish_xmlnode_fetch_attr(element, "method");
1,022 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *preprocess_name =	clish_xmlnode_fetch_attr(element, "preprocess");
1,321 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
    .           
    .           	/* Check syntax */
   22 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   22 ( 0.00%)  	if (!pattern) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("pattern"));
    .           		goto error;
    .           	}
    .           
   48 ( 0.00%)  	method = clish_ptype_method_resolve(method_name);
  705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  651 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_method_resolve (10x)
    .           
   48 ( 0.00%)  	preprocess = clish_ptype_preprocess_resolve(preprocess_name);
  737 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_preprocess_resolve (10x)
   77 ( 0.00%)  	clish_shell_find_create_ptype(shell,
1,797,666 (33.29%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (11x)
    .           		name, help, pattern, method, preprocess);
    .           
   11 ( 0.00%)  	res = 0;
    .           error:
   33 ( 0.00%)  	clish_xml_release(name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(help);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(pattern);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(method_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(preprocess_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   99 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_overview(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    8 ( 0.00%)  {
    1 ( 0.00%)  	char *content = NULL;
    2 ( 0.00%)  	unsigned int content_len = 2048;
    .           	int result;
    .           
    .           	/*
    .           	 * the code below faithfully assume that we'll be able fully store
    .           	 * the content of the node. If it's really, really big, we may have
    .           	 * an issue (but then, if it's that big, how the hell does it
    .           	 * already fits in allocated memory?)
    .           	 * Ergo, it -should- be safe.
    .           	 */
    .           	do {
    4 ( 0.00%)  		char *new = (char*)realloc(content, content_len);
1,810 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (1x)
    2 ( 0.00%)  		if (!new) {
    .           			if (content)
    .           				free(content);
    .           			return -1;
    .           		}
    .           		content = new;
    7 ( 0.00%)  		result = clish_xmlnode_get_content(element, content,
19,472 ( 0.36%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (1x)
    .           			&content_len);
    2 ( 0.00%)  	} while (result == -E2BIG);
    .           
    2 ( 0.00%)  	if (result == 0 && content) {
    .           		/* set the overview text for this view */
    2 ( 0.00%)  		assert(NULL == shell->overview);
    .           		/* store the overview */
    4 ( 0.00%)  		shell->overview = lub_string_dup(content);
  912 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    .           	}
    .           
    .           	if (content)
    3 ( 0.00%)  		free(content);
  133 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    1 ( 0.00%)  	return 0;
    7 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_command(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  260 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	clish_command_t *old;
    .           	int res = -1;
    .           
  130 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,173 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
1,095 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,876 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
2,185 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
2,290 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *escape_chars = clish_xmlnode_fetch_attr(element, "escape_chars");
2,244 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_name = clish_xmlnode_fetch_attr(element, "args");
1,989 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_help = clish_xmlnode_fetch_attr(element, "args_help");
2,371 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
2,314 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
2,374 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *ref = clish_xmlnode_fetch_attr(element, "ref");
2,290 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
    .           
    .           	/* Check syntax */
   52 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   52 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
    .           
    .           	/* check this command doesn't already exist */
  134 ( 0.00%)  	old = clish_view_find_command(v, name, BOOL_FALSE);
  723 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,202 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (25x)
   52 ( 0.00%)  	if (old) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"Duplicate COMMAND name=\"%s\".\n", name);
    .           		goto error;
    .           	}
    .           
    .           	/* create a command */
  160 ( 0.00%)  	cmd = clish_view_new_command(v, name, help);
41,908 ( 0.78%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (25x)
4,334 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  108 ( 0.00%)  	clish_command__set_pview(cmd, v);
  679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_pview (25x)
    .           
    .           	/* Reference 'ref' field */
   78 ( 0.00%)  	if (ref) {
    .           		char *saveptr = NULL;
    .           		const char *delim = "@";
    .           		char *view_name = NULL;
    .           		char *cmdn = NULL;
    .           		char *str = lub_string_dup(ref);
    .           
    .           		cmdn = strtok_r(str, delim, &saveptr);
    .           		if (!cmdn) {
-- line 505 ----------------------------------------
-- line 509 ----------------------------------------
    .           		}
    .           		clish_command__set_alias(cmd, cmdn); /* alias name */
    .           		view_name = strtok_r(NULL, delim, &saveptr);
    .           		clish_command__set_alias_view(cmd, view_name);
    .           		lub_string_free(str);
    .           	}
    .           
    .           	/* define some specialist escape characters */
   78 ( 0.00%)  	if (escape_chars)
    8 ( 0.00%)  		clish_command__set_escape_chars(cmd, escape_chars);
  923 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   52 ( 0.00%)  	if (args_name) {
    .           		/* define a "rest of line" argument */
    .           		clish_param_t *param;
    .           
    .           		/* Check syntax */
    2 ( 0.00%)  		if (!args_help) {
    .           			fprintf(stderr, CLISH_XML_ERROR_ATTR("args_help"));
    .           			goto error;
    .           		}
    5 ( 0.00%)  		param = clish_param_new(args_name, args_help, "__ptype_ARGS");
  751 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (1x)
    8 ( 0.00%)  		clish_command__set_args(cmd, param);
  689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* define the view which this command changes to */
   78 ( 0.00%)  	if (view) {
    .           		/* reference the next view */
   36 ( 0.00%)  		clish_command__set_viewname(cmd, view);
1,802 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,747 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (7x)
    .           	}
    .           
    .           	/* define the view id which this command changes to */
   78 ( 0.00%)  	if (viewid)
   16 ( 0.00%)  		clish_command__set_viewid(cmd, viewid);
1,747 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  471 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewid (2x)
    .           
    .           	/* lock field */
   78 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
  108 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
  725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (25x)
    .           
    .           	/* interrupt field */
   78 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
  108 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
  719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (25x)
    .           
   78 ( 0.00%)  	if (access)
    8 ( 0.00%)  		clish_command__set_access(cmd, access);
  872 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           //process_command_end:
  130 ( 0.00%)  	res = process_children(shell, element, cmd);
368,358 ( 6.82%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (26x)
    .           error:
   78 ( 0.00%)  	clish_xml_release(access);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(view);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(viewid);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(escape_chars);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(lock);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(interrupt);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(ref);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
    .           
    .           	return res;
  234 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_startup(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   10 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	int res = -1;
    .           
    5 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
   70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
   73 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_shebang =
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		clish_xmlnode_fetch_attr(element, "default_shebang");
    5 ( 0.00%)  	char *timeout = clish_xmlnode_fetch_attr(element, "timeout");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_plugin = clish_xmlnode_fetch_attr(element,
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		"default_plugin");
    .           
    .           	/* Check syntax */
    2 ( 0.00%)  	if (!view) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("view"));
    .           		goto error;
    .           	}
    2 ( 0.00%)  	if (shell->startup) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP tag duplication.\n");
    .           		goto error;
    .           	}
    .           
    .           	/* create a command with NULL help */
    6 ( 0.00%)  	cmd = clish_view_new_command(v, "startup", NULL);
1,152 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (1x)
    4 ( 0.00%)  	clish_command__set_lock(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* reference the next view */
    4 ( 0.00%)  	clish_command__set_viewname(cmd, view);
  246 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (1x)
    .           
    .           	/* define the view id which this command changes to */
    3 ( 0.00%)  	if (viewid)
    .           		clish_command__set_viewid(cmd, viewid);
    .           
    3 ( 0.00%)  	if (default_shebang)
    .           		clish_shell__set_default_shebang(shell, default_shebang);
    .           
    3 ( 0.00%)  	if (timeout) {
    .           		unsigned int to = 0;
    .           		lub_conv_atoui(timeout, &to, 0);
    .           		clish_shell__set_timeout(shell, to);
    .           	}
    .           
    .           	/* lock field */
    2 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
    4 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* interrupt field */
    2 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
    4 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (1x)
    .           
    .           	/* If we need the default plugin */
    3 ( 0.00%)  	if (default_plugin && (0 == strcmp(default_plugin, "false")))
    .           		shell->default_plugin = BOOL_FALSE;
    .           
    .           	/* remember this command */
    1 ( 0.00%)  	shell->startup = cmd;
    .           
    5 ( 0.00%)  	res = process_children(shell, element, cmd);
6,108 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (1x)
    .           error:
    3 ( 0.00%)  	clish_xml_release(view);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(viewid);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(default_shebang);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(timeout);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(lock);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(interrupt);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_param(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  190 ( 0.00%)  {
    .           	clish_command_t *cmd = NULL;
   38 ( 0.00%)  	clish_param_t *p_param = NULL;
    .           	clish_xmlnode_t *pelement;
    .           	clish_param_t *param;
    .           	char *pname;
    .           	int res = -1;
    .           
  114 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  808 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,378 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *ptype = clish_xmlnode_fetch_attr(element, "ptype");
2,127 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *prefix = clish_xmlnode_fetch_attr(element, "prefix");
2,179 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *defval = clish_xmlnode_fetch_attr(element, "default");
2,199 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *mode = clish_xmlnode_fetch_attr(element, "mode");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *optional = clish_xmlnode_fetch_attr(element, "optional");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *order = clish_xmlnode_fetch_attr(element, "order");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *value = clish_xmlnode_fetch_attr(element, "value");
2,246 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *hidden = clish_xmlnode_fetch_attr(element, "hidden");
2,045 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *test = clish_xmlnode_fetch_attr(element, "test");
2,246 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *completion = clish_xmlnode_fetch_attr(element, "completion");
2,270 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,180 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
    .           
    .           	/* The PARAM can be child of COMMAND or another PARAM */
   76 ( 0.00%)  	pelement = clish_xmlnode_parent(element);
   76 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (19x)
    .           	pname = clish_xmlnode_get_all_name(pelement);
  190 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "PARAM") == 0)
  969 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (19x)
    .           		p_param = (clish_param_t *)parent;
    .           	else
    .           		cmd = (clish_command_t *)parent;
    .           	if (pname)
   95 ( 0.00%)  		free(pname);
2,439 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (19x)
   38 ( 0.00%)  	if (!cmd && !p_param)
    .           		goto error;
    .           
    .           	/* Check syntax */
   95 ( 0.00%)  	if (cmd && (cmd == shell->startup)) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP can't contain PARAMs.\n");
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!ptype) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("ptype"));
    .           		goto error;
    .           	}
    .           
  118 ( 0.00%)  	param = clish_param_new(name, help, ptype);
22,318 ( 0.41%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (18x)
2,175 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* If prefix is set clish will emulate old optional
    .           	 * command syntax over newer optional command mechanism.
    .           	 * It will create nested PARAM.
    .           	 */
   38 ( 0.00%)  	if (prefix) {
    .           		const char *ptype_name = "__ptype_SUBCOMMAND";
    .           		clish_param_t *opt_param = NULL;
    5 ( 0.00%)  		char *str = NULL;
    .           		clish_ptype_t *tmp;
    .           
    .           		/* Create a ptype for prefix-named subcommand that
    .           		 * will contain the nested optional parameter. The
    .           		 * name of ptype is hardcoded. It's not good but
    .           		 * it's only the service ptype.
    .           		 */
   25 ( 0.00%)  		tmp = (clish_ptype_t *)lub_bintree_find(
2,321 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (5x)
    .           			&shell->ptype_tree, ptype_name);
   10 ( 0.00%)  		if (!tmp)
    8 ( 0.00%)  			tmp = clish_shell_find_create_ptype(shell,
137,591 ( 2.55%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (1x)
    .           				ptype_name, "Option", "[^\\\\]+",
    .           				CLISH_PTYPE_REGEXP, CLISH_PTYPE_NONE);
    2 ( 0.00%)  		assert(tmp);
   20 ( 0.00%)  		lub_string_cat(&str, "_prefix_");
1,896 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   20 ( 0.00%)  		lub_string_cat(&str, name);
1,336 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   30 ( 0.00%)  		opt_param = clish_param_new(str, help, ptype_name);
5,820 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (5x)
   15 ( 0.00%)  		lub_string_free(str);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   24 ( 0.00%)  		clish_param__set_mode(opt_param,
  657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_mode (4x)
    .           			CLISH_PARAM_SUBCOMMAND);
   24 ( 0.00%)  		clish_param__set_value(opt_param, prefix);
  826 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  820 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_value (4x)
   20 ( 0.00%)  		clish_param__set_optional(opt_param, BOOL_TRUE);
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (5x)
    .           
   15 ( 0.00%)  		if (test)
    .           			clish_param__set_test(opt_param, test);
    .           
    .           		/* Add the parameter to the command */
   10 ( 0.00%)  		if (cmd)
   20 ( 0.00%)  			clish_command_insert_param(cmd, opt_param);
  934 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (5x)
    .           		/* Add the parameter to the param */
   15 ( 0.00%)  		if (p_param)
    .           			clish_param_insert_param(p_param, opt_param);
    .           		/* Unset cmd and set parent param to opt_param */
    5 ( 0.00%)  		cmd = NULL;
    .           		p_param = opt_param;
    .           	}
    .           
   57 ( 0.00%)  	if (defval)
   24 ( 0.00%)  		clish_param__set_default(param, defval);
  918 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,009 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_default (4x)
    .           
   57 ( 0.00%)  	if (hidden && lub_string_nocasecmp(hidden, "true") == 0)
    .           		clish_param__set_hidden(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_hidden(param, BOOL_FALSE);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_hidden (18x)
    .           
   57 ( 0.00%)  	if (mode) {
    .           		if (lub_string_nocasecmp(mode, "switch") == 0) {
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_SWITCH);
    .           			/* Force hidden attribute */
    .           			clish_param__set_hidden(param, BOOL_TRUE);
    .           		} else if (lub_string_nocasecmp(mode, "subcommand") == 0)
   28 ( 0.00%)  			clish_param__set_mode(param,
    .           				CLISH_PARAM_SUBCOMMAND);
    .           		else
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_COMMON);
    .           	}
    .           
   57 ( 0.00%)  	if (optional && lub_string_nocasecmp(optional, "true") == 0)
    .           		clish_param__set_optional(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_optional(param, BOOL_FALSE);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (18x)
    .           
   57 ( 0.00%)  	if (order && lub_string_nocasecmp(order, "true") == 0)
    .           		clish_param__set_order(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_order(param, BOOL_FALSE);
  663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_order (18x)
    .           
   57 ( 0.00%)  	if (value) {
    .           		clish_param__set_value(param, value);
    .           		/* Force mode to subcommand */
    .           		clish_param__set_mode(param,
    .           			CLISH_PARAM_SUBCOMMAND);
    .           	}
    .           
   57 ( 0.00%)  	if (test && !prefix)
    .           		clish_param__set_test(param, test);
    .           
   57 ( 0.00%)  	if (completion)
    .           		clish_param__set_completion(param, completion);
    .           
   57 ( 0.00%)  	if (access)
    .           		clish_param__set_access(param, access);
    .           
    .           	/* Add the parameter to the command */
   38 ( 0.00%)  	if (cmd)
   60 ( 0.00%)  		clish_command_insert_param(cmd, param);
1,565 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,769 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (13x)
    .           
    .           	/* Add the parameter to the param */
   38 ( 0.00%)  	if (p_param)
   24 ( 0.00%)  		clish_param_insert_param(p_param, param);
  914 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,002 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_insert_param (4x)
    .           
   95 ( 0.00%)  	res = process_children(shell, element, param);
  570 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (19x)
    .           
    .           error:
   57 ( 0.00%)  	clish_xml_release(name);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(help);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(ptype);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(prefix);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(defval);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(mode);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(optional);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(order);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(value);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(hidden);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(test);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(completion);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(access);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
    .           
    .           	return res;
  171 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_action(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  210 ( 0.00%)  {
    .           	clish_action_t *action = NULL;
  126 ( 0.00%)  	char *builtin = clish_xmlnode_fetch_attr(element, "builtin");
  531 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
  105 ( 0.00%)  	char *shebang = clish_xmlnode_fetch_attr(element, "shebang");
  431 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
   88 ( 0.00%)  	clish_xmlnode_t *pelement = clish_xmlnode_parent(element);
  649 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   80 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (20x)
    .           	char *pname = clish_xmlnode_get_all_name(pelement);
    .           	char *text;
    .           	clish_sym_t *sym = NULL;
    .           
  172 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "VAR") == 0)
3,294 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,020 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (20x)
   21 ( 0.00%)  		action = clish_var__get_action((clish_var_t *)parent);
    .           	else
   67 ( 0.00%)  		action = clish_command__get_action((clish_command_t *)parent);
  703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (20x)
    .           
    .           	if (pname)
   63 ( 0.00%)  		free(pname);
2,733 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
    .           	text = clish_xmlnode_get_all_content(element);
    .           
   84 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   94 ( 0.00%)  		clish_action__set_script(action, text);
  984 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,915 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_script (17x)
    .           	}
    .           	if (text)
   63 ( 0.00%)  		free(text);
2,817 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
   42 ( 0.00%)  	if (builtin)
   28 ( 0.00%)  		sym = clish_shell_add_unresolved_sym(shell, builtin,
5,051 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,908 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_unresolved_sym (3x)
    .           			CLISH_SYM_TYPE_ACTION);
    .           	else
   51 ( 0.00%)  		sym = shell->hooks[CLISH_SYM_TYPE_ACTION];
    .           
   67 ( 0.00%)  	clish_action__set_builtin(action, sym);
  695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_builtin (20x)
   42 ( 0.00%)  	if (shebang)
    .           		clish_action__set_shebang(action, shebang);
    .           
   67 ( 0.00%)  	clish_xml_release(builtin);
  622 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (20x)
   63 ( 0.00%)  	clish_xml_release(shebang);
   21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (21x)
    .           
    .           	return 0;
  189 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_detail(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   28 ( 0.00%)  {
    .           	clish_command_t *cmd = (clish_command_t *) parent;
    .           
    .           	/* read the following text element */
    .           	char *text = clish_xmlnode_get_all_content(element);
    .           
   16 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   24 ( 0.00%)  		clish_command__set_detail(cmd, text);
1,555 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_detail (3x)
1,223 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	if (text)
   12 ( 0.00%)  		free(text);
  534 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (4x)
    .           
    .           	shell = shell; /* Happy compiler */
    .           
    .           	return 0;
   28 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_namespace(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    .           {
    .           	clish_view_t *v = (clish_view_t *)parent;
    .           	clish_nspace_t *nspace = NULL;
    .           	int res = -1;
-- line 906 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c
--------------------------------------------------------------------------------
Ir              

-- line 78 ----------------------------------------
     .            * @param node element to add
     .            * @return new first element of the list
     .            */
     .           static clish_xmlnode_t *clish_expat_list_push_back(clish_xmlnode_t *first, clish_xmlnode_t *node)
     .           {
     .           	clish_xmlnode_t *cur = first;
     .           	clish_xmlnode_t *prev = NULL;
     .           
25,493 ( 0.47%)  	while (cur) {
     .           		prev = cur;
 7,754 ( 0.14%)  		cur = cur->next;
     .           	}
     .           	if (prev) {
   906 ( 0.02%)  		prev->next = node;
     .           		return first;
     .           	}
     .           	return node;
     .           }
     .           
     .           /** Generic add_attr() function
     .            *
     .            * @param first first attribute in the attribute list
-- line 99 ----------------------------------------
-- line 100 ----------------------------------------
     .            * @param n attribute name
     .            * @param v attribute value
     .            * @return the new first attribute in the attribute list
     .            */
     .           static clish_xmlnode_t *clish_expat_add_attr(clish_xmlnode_t *first, const char *n, const char *v)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   868 ( 0.02%)  	node = malloc(sizeof(clish_xmlnode_t));
43,906 ( 0.81%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (217x)
   434 ( 0.01%)  	if (!node)
     .           		return first;
     .           
   868 ( 0.02%)  	node->name = strdup(n);
50,081 ( 0.93%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   868 ( 0.02%)  	node->content = strdup(v);
54,052 ( 1.00%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   217 ( 0.00%)  	node->children = NULL;
   217 ( 0.00%)  	node->attributes = NULL;
   217 ( 0.00%)  	node->next = NULL;
   217 ( 0.00%)  	node->type = CLISH_XMLNODE_ATTR;
   217 ( 0.00%)  	node->depth = 0;
     .           
     .           	return clish_expat_list_push_back(first, node);
     .           }
     .           
     .           /** Run through an expat attribute list, and create a DOM-like attribute list
     .            *
     .            * @param node parent node
     .            * @param attr NULL-terminated attribute liste
-- line 126 ----------------------------------------
-- line 127 ----------------------------------------
     .            *
     .            * Each attribute uses two slots in the expat attribute list. The first one is
     .            * used to store the name, the second one is used to store the value.
     .            */
     .           static void clish_expat_add_attrlist(clish_xmlnode_t *node, const char **attr)
     .           {
     .           	int i;
     .           
 1,173 ( 0.02%)  	for (i = 0; attr[i]; i += 2) {
   434 ( 0.01%)  		node->attributes = clish_expat_add_attr(node->attributes,
     .           			attr[i], attr[i+1]);
     .           	}
     .           }
     .           
     .           /** Generic make_node() function
     .            *
     .            * @param parent XML parent node
     .            * @param type XML node type
-- line 144 ----------------------------------------
-- line 147 ----------------------------------------
     .            * @param attr attribute list
     .            * @return a new node or NULL on error
     .            */
     .           static clish_xmlnode_t *clish_expat_make_node(clish_xmlnode_t *parent,
     .           					      clish_xmlnodetype_e type,
     .           					      const char *n,
     .           					      const char *v,
     .           					      const char **attr)
 7,428 ( 0.14%)  {
     .           	clish_xmlnode_t *node;
     .           
 2,476 ( 0.05%)  	node = malloc(sizeof(clish_xmlnode_t));
122,625 ( 2.27%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (619x)
 1,238 ( 0.02%)  	if (!node)
     .           		return NULL;
 2,770 ( 0.05%)  	node->name = n ? strdup(n) : NULL;
18,520 ( 0.34%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (98x)
 4,039 ( 0.07%)  	node->content = v ? strdup(v) : NULL;
127,644 ( 2.36%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (521x)
   619 ( 0.01%)  	node->children = NULL;
   619 ( 0.01%)  	node->attributes = NULL;
   619 ( 0.01%)  	node->next = NULL;
 1,238 ( 0.02%)  	node->parent = parent;
 3,085 ( 0.06%)  	node->doc = parent ? parent->doc : NULL;
 2,446 ( 0.05%)  	node->depth = parent ? parent->depth + 1 : 0;
   619 ( 0.01%)  	node->type = type;
     .           
 1,238 ( 0.02%)  	if (attr)
     .           		clish_expat_add_attrlist(node, attr);
     .           
   152 ( 0.00%)  	if (parent)
 2,436 ( 0.05%)  		parent->children = clish_expat_list_push_back(parent->children, node);
     .           
     .           	return node;
 5,571 ( 0.10%)  }
     .           
     .           /** Add a new XML root
     .            *
     .            * @param doc XML document
     .            * @param el root node name
     .            * @param attr expat attribute list
     .            * @return a new root element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_root(clish_xmldoc_t *doc, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   314 ( 0.01%)  	node = clish_expat_make_node(NULL, CLISH_XMLNODE_ELM, el, NULL, attr);
25,689 ( 0.48%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (10x)
    20 ( 0.00%)  	if (!node)
     .           		return doc->root;
     .           
    30 ( 0.00%)  	doc->root = clish_expat_list_push_back(doc->root, node);
     .           
     .           	return node;
     .           }
     .           
     .           /** Add a new XML element as a child
     .            *
     .            * @param cur parent XML element
     .            * @param el element name
     .            * @param attr expat attribute list
     .            * @return a new XMl element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_child(clish_xmlnode_t *cur, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   176 ( 0.00%)  	node = clish_expat_make_node(cur, CLISH_XMLNODE_ELM, el, NULL, attr);
176,525 ( 3.27%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (88x)
   176 ( 0.00%)  	if (!node)
     .           		return cur;
     .           
     .           	return node;
     .           }
     .           
     .           /** Expat handler: element content
     .            *
     .            * @param data user data
     .            * @param s content (not nul-termainated)
     .            * @param len content length
     .            */
     .           static void clish_expat_chardata_handler(void *data, const char *s, int len)
 2,605 ( 0.05%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
 2,605 ( 0.05%)  	if (doc->current) {
 2,605 ( 0.05%)  		char *content = malloc(len + 1);
67,724 ( 1.25%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (521x)
 2,609 ( 0.05%)  		strncpy(content, s, len);
18,137 ( 0.34%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (520x)
 1,541 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   521 ( 0.01%)  		content[len] = '\0';
     .           
 3,126 ( 0.06%)  		clish_expat_make_node(doc->current, CLISH_XMLNODE_TEXT, NULL, content, NULL);
291,048 ( 5.39%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (521x)
     .           		/*
     .           		 * the previous call is a bit too generic, and strdup() content
     .           		 * so we need to free out own version of content.
     .           		 */
 1,567 ( 0.03%)  		free(content);
45,760 ( 0.85%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (520x)
 1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           	}
 2,605 ( 0.05%)  }
     .           
     .           /** Expat handler: start XML element
     .            *
     .            * @param data user data
     .            * @param el element name (nul-terminated)
     .            * @param attr expat attribute list
     .            */
     .           static void clish_expat_element_start(void *data, const char *el, const char **attr)
   490 ( 0.01%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (!doc->current) {
     .           		doc->current = clish_expat_add_root(doc, el, attr);
     .           	} else {
    98 ( 0.00%)  		doc->current = clish_expat_add_child(doc->current, el, attr);
     .           	}
   392 ( 0.01%)  }
     .           
     .           /** Expat handler: end XML element
     .            *
     .            * @param data user data
     .            * @param el element name
     .            */
     .           static void clish_expat_element_end(void *data, const char *el)
     .           {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (doc->current) {
   294 ( 0.01%)  		doc->current = doc->current->parent;
     .           	}
     .           
     .           	el = el; /* Happy compiler */
     .           }
     .           
     .           /** Free a node, its children and its attributes
     .            *
     .            * @param node node to free
     .            */
     .           static void clish_expat_free_node(clish_xmlnode_t *cur)
 3,344 ( 0.06%)  {
     .           	clish_xmlnode_t *node;
     .           	clish_xmlnode_t *first;
     .           
 2,584 ( 0.05%)  	if (cur->attributes) {
     .           		first = cur->attributes;
   651 ( 0.01%)  		while (first) {
     .           			node = first;
   217 ( 0.00%)  			first = first->next;
   217 ( 0.00%)  			clish_expat_free_node(node);
 8,729 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (30x)
     .           		}
     .           	}
 2,569 ( 0.05%)  	if (cur->children) {
     .           		first = cur->children;
 1,827 ( 0.03%)  		while (first) {
     .           			node = first;
   609 ( 0.01%)  			first = first->next;
   609 ( 0.01%)  			clish_expat_free_node(node);
179,286 ( 3.32%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (174x)
     .           		}
     .           	}
 2,508 ( 0.05%)  	if (cur->name)
   630 ( 0.01%)  		free(cur->name);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.05%)  	if (cur->content)
 1,476 ( 0.03%)  		free(cur->content);
65,002 ( 1.20%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (738x)
 2,508 ( 0.05%)  	free(cur);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.05%)  }
     .           
     .           /*
     .            * Public interface
     .            */
     .           
     .           int clish_xmldoc_start(void)
     .           {
     .           	return 0;
     .           }
     .           
     .           int clish_xmldoc_stop(void)
     .           {
     .           	return 0;
     2 ( 0.00%)  }
     .           
     .           clish_xmldoc_t *clish_xmldoc_read(const char *filename)
    70 ( 0.00%)  {
     .           	clish_xmldoc_t *doc;
     .           	struct stat sb;
     .           	int fd;
     .           	char *buffer;
     .           	XML_Parser parser;
     .           	int rb;
     .           
    54 ( 0.00%)  	doc = malloc(sizeof(clish_xmldoc_t));
 1,728 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,269 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc (9x)
    20 ( 0.00%)  	if (!doc)
     .           		return NULL;
     .           	memset(doc, 0, sizeof(clish_xmldoc_t));
    44 ( 0.00%)  	doc->filename = strdup(filename);
 1,751 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,935 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (9x)
    44 ( 0.00%)  	parser = XML_ParserCreate(NULL);
 2,156 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
95,702 ( 1.77%)  => ???:XML_ParserCreate (9x)
    20 ( 0.00%)  	if (!parser)
     .           		goto error_parser_create;
    44 ( 0.00%)  	XML_SetUserData(parser, doc);
   949 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    54 ( 0.00%)  => ???:XML_SetUserData (9x)
    44 ( 0.00%)  	XML_SetCharacterDataHandler(parser, clish_expat_chardata_handler);
 1,060 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    18 ( 0.00%)  => ???:XML_SetCharacterDataHandler (9x)
    54 ( 0.00%)  	XML_SetElementHandler(parser,
 1,011 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    27 ( 0.00%)  => ???:XML_SetElementHandler (9x)
     .           		clish_expat_element_start,
     .           		clish_expat_element_end);
     .           
    64 ( 0.00%)  	fd = open(filename, O_RDONLY);
 1,430 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:open (9x)
    20 ( 0.00%)  	if (fd < 0)
     .           		goto error_open;
     .           	fstat(fd, &sb);
    50 ( 0.00%)  	buffer = malloc(sb.st_size+1);
 2,926 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (10x)
    54 ( 0.00%)  	rb = read(fd, buffer, sb.st_size);
 1,446 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (9x)
    20 ( 0.00%)  	if (rb < 0) {
     .           		close(fd);
     .           		goto error_parse;
     .           	}
    20 ( 0.00%)  	buffer[sb.st_size] = 0;
    34 ( 0.00%)  	close(fd);
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:close (9x)
     .           
    84 ( 0.00%)  	if (!XML_Parse(parser, buffer, sb.st_size, 1))
1,305,655 (24.18%)  => ???:XML_Parse (9x)
112,859 ( 2.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           		goto error_parse;
     .           
    34 ( 0.00%)  	XML_ParserFree(parser);
 6,192 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
46,686 ( 0.86%)  => ???:XML_ParserFree (9x)
    30 ( 0.00%)  	free(buffer);
 1,344 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           
     .           	return doc;
     .           
     .           error_parse:
     .           	free(buffer);
     .           
     .           error_open:
     .           	XML_ParserFree(parser);
     .           
     .           error_parser_create:
     .           	clish_xmldoc_release(doc);
     .           
     .           	return NULL;
    80 ( 0.00%)  }
     .           
     .           void clish_xmldoc_release(clish_xmldoc_t *doc)
    20 ( 0.00%)  {
    20 ( 0.00%)  	if (doc) {
     .           		clish_xmlnode_t *node;
    70 ( 0.00%)  		while (doc->root) {
     .           			node = doc->root;
    20 ( 0.00%)  			doc->root = node->next;
    10 ( 0.00%)  			clish_expat_free_node(node);
191,055 ( 3.54%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node (10x)
     .           		}
    30 ( 0.00%)  		if (doc->filename)
    20 ( 0.00%)  			free(doc->filename);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
    30 ( 0.00%)  		free(doc);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           	}
    10 ( 0.00%)  }
     .           
     .           int clish_xmldoc_is_valid(clish_xmldoc_t *doc)
     .           {
    53 ( 0.00%)  	return doc && doc->root;
    12 ( 0.00%)  }
     .           
     .           int clish_xmldoc_error_caps(clish_xmldoc_t *doc)
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return CLISH_XMLERR_NOCAPS;
     .           }
     .           
-- line 403 ----------------------------------------
-- line 419 ----------------------------------------
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return "";
     .           }
     .           
     .           int clish_xmlnode_get_type(clish_xmlnode_t *node)
     .           {
 1,281 ( 0.02%)  	if (node)
   427 ( 0.01%)  		return node->type;
     .           	return CLISH_XMLNODE_UNKNOWN;
   427 ( 0.01%)  }
     .           
     .           clish_xmlnode_t *clish_xmldoc_get_root(clish_xmldoc_t *doc)
     .           {
    20 ( 0.00%)  	if (doc)
    20 ( 0.00%)  		return doc->root;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_parent(clish_xmlnode_t *node)
     .           {
    80 ( 0.00%)  	if (node)
    80 ( 0.00%)  		return node->parent;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_next_child(clish_xmlnode_t *parent,
     .           					  clish_xmlnode_t *curchild)
     .           {
   956 ( 0.02%)  	if (curchild)
   834 ( 0.02%)  		return curchild->next;
   122 ( 0.00%)  	if (parent)
   122 ( 0.00%)  		return parent->children;
     .           	return NULL;
     .           }
     .           
     .           char *clish_xmlnode_fetch_attr(clish_xmlnode_t *node,
     .           			       const char *attrname)
 2,648 ( 0.05%)  {
 1,324 ( 0.02%)  	if (node) {
   662 ( 0.01%)  		clish_xmlnode_t *n = node->attributes;
 4,292 ( 0.08%)  		while (n) {
 9,924 ( 0.18%)  			if (strcmp(n->name, attrname) == 0)
32,888 ( 0.61%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (1,654x)
   187 ( 0.00%)  				return n->content;
 1,467 ( 0.03%)  			n = n->next;
     .           		}
     .           	}
   475 ( 0.01%)  	return NULL;
 2,648 ( 0.05%)  }
     .           
     .           int clish_xmlnode_get_content(clish_xmlnode_t *node, char *content,
     .           			      unsigned int *contentlen)
   182 ( 0.00%)  {
     .           	unsigned int minlen = 1;
     .           
   208 ( 0.00%)  	if (node && content && contentlen) {
    26 ( 0.00%)  		clish_xmlnode_t *children = node->children;
   505 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   576 ( 0.01%)  				minlen += strlen(children->content);
 5,114 ( 0.09%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (192x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    52 ( 0.00%)  		if (minlen >= *contentlen) {
     .           			*contentlen = minlen + 1;
     .           			return -E2BIG;
     .           		}
     .           		children = node->children;
    52 ( 0.00%)  		*content = 0;
   407 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   580 ( 0.01%)  				strcat(content, children->content);
29,395 ( 0.54%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned (191x)
 1,492 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    26 ( 0.00%)  		return 0;
     .           	}
     .           
     .           	return -EINVAL;
   156 ( 0.00%)  }
     .           
     .           int clish_xmlnode_get_name(clish_xmlnode_t *node, char *name,
     .           	unsigned int *namelen)
   552 ( 0.01%)  {
 1,104 ( 0.02%)  	if (node && name && namelen) {
 1,108 ( 0.02%)  		if (strlen(node->name) >= *namelen) {
 2,192 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (137x)
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			*namelen = strlen(node->name) + 1;
     .           			return -E2BIG;
     .           		}
   828 ( 0.02%)  		snprintf(name, *namelen, "%s", node->name);
72,205 ( 1.34%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (138x)
   414 ( 0.01%)  		name[*namelen - 1] = '\0';
   138 ( 0.00%)  		return 0;
     .           	}
     .           	return -EINVAL;
   552 ( 0.01%)  }
     .           
     .           void clish_xmlnode_print(clish_xmlnode_t *node, FILE *out)
     .           {
     .           	if (node) {
     .           		int i;
     .           		clish_xmlnode_t *a;
     .           		for (i=0; i<node->depth; ++i) {
     .           			fprintf(out, "  ");
-- line 520 ----------------------------------------
-- line 525 ----------------------------------------
     .           			fprintf(out, " %s='%s'", a->name, a->content);
     .           			a = a->next;
     .           		}
     .           		fprintf(out, ">...");
     .           	}
     .           }
     .           
     .           void clish_xml_release(void *p)
   661 ( 0.01%)  {
     .           	p = p; /* Happy compiler */
     .           	/* nothing to release */
     .           }
     .           
     .           #endif /* HAVE_LIB_EXPAT */
     .           

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c
--------------------------------------------------------------------------------
Ir           

-- line 23 ----------------------------------------
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_compare(const void *first, const void *second)
  .           {
  .           	const clish_sym_t *f = (const clish_sym_t *)first;
  .           	const clish_sym_t *s = (const clish_sym_t *)second;
  .           
180 ( 0.00%)  	return strcmp(f->name, s->name);
1,281 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (45x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_sym_new(const char *name, void *func, int type)
168 ( 0.00%)  {
  .           	clish_sym_t *this;
  .           
 84 ( 0.00%)  	this = malloc(sizeof(*this));
4,345 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (21x)
 88 ( 0.00%)  	this->name = lub_string_dup(name);
3,827 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (20x)
782 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 21 ( 0.00%)  	this->func = func;
 21 ( 0.00%)  	this->type = type;
 21 ( 0.00%)  	this->api = CLISH_SYM_API_SIMPLE;
 21 ( 0.00%)  	this->permanent = BOOL_FALSE;
  .           
  .           	return this;
147 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym_free(clish_sym_t *this)
 42 ( 0.00%)  {
 42 ( 0.00%)  	if (!this)
  .           		return;
 63 ( 0.00%)  	lub_string_free(this->name);
1,728 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (21x)
 63 ( 0.00%)  	free(this);
1,848 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
 21 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_func(clish_sym_t *this, void *func)
  .           {
  .           	this->func = func;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void *clish_sym__get_func(clish_sym_t *this)
  .           {
 11 ( 0.00%)  	return this->func;
 11 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_permanent(clish_sym_t *this, bool_t permanent)
  .           {
 26 ( 0.00%)  	this->permanent = permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_sym__get_permanent(clish_sym_t *this)
  .           {
  .           	return this->permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_name(clish_sym_t *this, const char *name)
 15 ( 0.00%)  {
  9 ( 0.00%)  	lub_string_free(this->name);
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 12 ( 0.00%)  	this->name = lub_string_dup(name);
885 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 12 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_sym__get_name(clish_sym_t *this)
  .           {
 51 ( 0.00%)  	return this->name;
 51 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_plugin(clish_sym_t *this, clish_plugin_t *plugin)
  .           {
 26 ( 0.00%)  	this->plugin = plugin;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_sym__get_plugin(clish_sym_t *this)
  .           {
  .           	return this->plugin;
  .           }
  .           
-- line 106 ----------------------------------------
-- line 108 ----------------------------------------
  .           void clish_sym__set_type(clish_sym_t *this, int type)
  .           {
  .           	this->type = type;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym__get_type(const clish_sym_t *this)
  .           {
 13 ( 0.00%)  	return this->type;
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_api(clish_sym_t *this, clish_sym_api_e api)
  .           {
  2 ( 0.00%)  	this->api = api;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_api_e clish_sym__get_api(const clish_sym_t *this)
  .           {
  3 ( 0.00%)  	return this->api;
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_clone(clish_sym_t *dst, clish_sym_t *src)
  .           {
  .           	char *name;
  .           
 24 ( 0.00%)  	if (!dst || !src)
  .           		return -1;
  6 ( 0.00%)  	name = dst->name;
 60 ( 0.00%)  	*dst = *src;
  6 ( 0.00%)  	dst->name = name;
  .           
 12 ( 0.00%)  	return 0;
  .           }
  .           
  .           /**********************************************************
  .            * PLUGIN functions                                       *
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_plugin_new(const char *name)
  4 ( 0.00%)  {
  .           	clish_plugin_t *this;
  .           
  4 ( 0.00%)  	this = malloc(sizeof(*this));
114 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           
  4 ( 0.00%)  	this->name = lub_string_dup(name);
383 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  1 ( 0.00%)  	this->conf = NULL;
  1 ( 0.00%)  	this->alias = NULL;
  1 ( 0.00%)  	this->file = NULL;
  1 ( 0.00%)  	this->builtin_flag = BOOL_FALSE; /* The plugin is shared object by default */
  1 ( 0.00%)  	this->dlhan = NULL;
  .           	/* Initialise the list of symbols */
  4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
175 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
  .           	/* Constructor and destructor */
  1 ( 0.00%)  	this->init = NULL;
  1 ( 0.00%)  	this->fini = NULL;
  .           	/* Flags */
  1 ( 0.00%)  	this->rtld_global = BOOL_FALSE; /* The dlopen() use RTLD_LOCAL by default */
  .           
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_free(clish_plugin_t *this, void *userdata)
  5 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return;
  .           
  .           	/* Execute destructor */
  3 ( 0.00%)  	if (this->fini)
  .           		this->fini(userdata, this);
  .           
  3 ( 0.00%)  	lub_string_free(this->name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->alias);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->file);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->conf);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  .           
  .           	/* Free symbol list */
 85 ( 0.00%)  	while ((iter = lub_list__get_head(this->syms))) {
 28 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (14x)
  .           		/* Remove the symbol from the list */
 53 ( 0.00%)  		lub_list_del(this->syms, iter);
143 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_del (13x)
  .           		/* Free the instance */
 82 ( 0.00%)  		clish_sym_free((clish_sym_t *)lub_list_node__get_data(iter));
786 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,268 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_free (12x)
 26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (13x)
 43 ( 0.00%)  		lub_list_node_free(iter);
946 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,080 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_free (12x)
  .           	}
  6 ( 0.00%)  	lub_list_free(this->syms);
844 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           #ifdef HAVE_DLFCN_H
  3 ( 0.00%)  	if (this->dlhan)
  6 ( 0.00%)  		dlclose(this->dlhan);
3,766 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           #endif
  3 ( 0.00%)  	free(this);
 88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_generic(clish_plugin_t *this,
  .           	void *func, const char *name, int type, bool_t permanent)
 39 ( 0.00%)  {
  .           	clish_sym_t *sym;
  .           
 91 ( 0.00%)  	if (!name || !func)
  .           		return NULL;
  .           
 91 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
6,439 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (13x)
  .           		return NULL;
 56 ( 0.00%)  	clish_sym__set_plugin(sym, this);
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_plugin (12x)
 56 ( 0.00%)  	clish_sym__set_permanent(sym, permanent);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_permanent (12x)
 52 ( 0.00%)  	lub_list_add(this->syms, sym);
4,289 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (13x)
  .           
  .           	return sym;
 65 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_sym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
  .           	return clish_plugin_add_generic(this, func,
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_psym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
 36 ( 0.00%)  	return clish_plugin_add_generic(this, func,
8,152 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (9x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_osym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  1 ( 0.00%)  {
  .           	clish_sym_t *s;
  .           
  7 ( 0.00%)  	if (!(s = clish_plugin_add_generic(this, func,
951 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (1x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE)))
  .           		return s;
  8 ( 0.00%)  	clish_sym__set_api(s, CLISH_SYM_API_STDOUT);
631 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return s;
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_posym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  .           {
  .           	clish_sym_t *s;
  .           
-- line 261 ----------------------------------------
-- line 274 ----------------------------------------
  .           	return clish_plugin_add_generic(this, func,
  .           		name, type, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_phook(clish_plugin_t *this,
  .           	void *func, const char *name, int type)
  .           {
 13 ( 0.00%)  	return clish_plugin_add_generic(this, func,
2,509 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,633 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (2x)
  .           		name, type, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_add_fini(clish_plugin_t *this,
  .           	clish_plugin_fini_t *fini)
  .           {
  .           	this->fini = fini;
-- line 290 ----------------------------------------
-- line 306 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           clish_plugin_init_t * clish_plugin_get_init(clish_plugin_t *this)
  .           {
  .           	return this->init;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_get_sym(clish_plugin_t *this, const char *name, int type)
 42 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           	clish_sym_t *sym;
  .           
  .           	/* Iterate elements */
 86 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (6x)
100 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (25x)
  .           		int res;
124 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (31x)
217 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
676 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (31x)
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (31x)
104 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
  .           			return sym;
 25 ( 0.00%)  		if (res > 0) /* No chances to find name */
  .           			break;
  .           	}
  .           
  .           	return NULL;
 42 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static int clish_plugin_load_shared(clish_plugin_t *this)
  .           {
  .           #ifdef HAVE_DLFCN_H
  1 ( 0.00%)  	char *file = NULL; /* Plugin so file name */
  1 ( 0.00%)  	char *init_name = NULL; /* Init function name */
  .           	int flag = RTLD_NOW;
  .           
  3 ( 0.00%)  	if (this->file) {
  .           		file = lub_string_dup(this->file);
  .           	} else {
  4 ( 0.00%)  		lub_string_cat(&file, "clish_plugin_");
410 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  		lub_string_cat(&file, this->name);
264 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  5 ( 0.00%)  		lub_string_cat(&file, ".so");
272 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  .           	}
  .           
  .           	/* Open dynamic library */
  7 ( 0.00%)  	if (clish_plugin__get_rtld_global(this))
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  		flag |= RTLD_GLOBAL;
  .           	else
  .           		flag |= RTLD_LOCAL;
  8 ( 0.00%)  	this->dlhan = dlopen(file, flag);
133,888 ( 2.48%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(file);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  2 ( 0.00%)  	if (!this->dlhan) {
  .           		fprintf(stderr, "Error: Can't open plugin \"%s\": %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	/* Get plugin init function */
  5 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_PREFIX);
295 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, this->name);
264 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_SUFFIX);
282 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  9 ( 0.00%)  	this->init = (clish_plugin_init_t *)dlsym(this->dlhan, init_name);
4,005 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(init_name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	if (!this->init) {
  .           		fprintf(stderr, "Error: Can't get plugin \"%s\" init function: %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	return 0;
  .           #else /* HAVE_DLFCN_H */
  .           	/* We have no any dl functions. */
-- line 376 ----------------------------------------
-- line 377 ----------------------------------------
  .           	fprintf(stderr, "Error: Can't get plugin \"%s\" init function.\n",
  .           		this->name);
  .           	return -1;
  .           #endif /* HAVE_DLFCN_H */
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_plugin_load(clish_plugin_t *this, void *userdata)
  4 ( 0.00%)  {
  .           	int res;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return -1;
  5 ( 0.00%)  	assert(this->name);
  .           
  .           	/* Builtin plugins already have init function. */
  3 ( 0.00%)  	if (!this->builtin_flag) {
  .           		if (clish_plugin_load_shared(this) < 0)
  .           			return -1;
  .           	}
  .           	if (!this->init) {
  .           		fprintf(stderr, "Error: PLUGIN %s has no init function\n",
  .           			this->name);
  .           		return -1;
  .           	}
  .           	/* Execute init function */
  6 ( 0.00%)  	if ((res = this->init(userdata, this)))
14,017 ( 0.26%)  => /home/ykuznetsov/klish-2.1.3/plugins/clish/builtin_init.c:clish_plugin_clish_init (1x)
  .           		fprintf(stderr, "Error: Plugin %s init retcode: %d\n",
  .           			this->name, res);
  .           
  .           	return res;
  6 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_name(const clish_plugin_t *this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 416 ----------------------------------------
-- line 424 ----------------------------------------
  .           char *clish_plugin__get_alias(const clish_plugin_t *this)
  .           {
  .           	return this->alias;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_pubname(const clish_plugin_t *this)
  .           {
 12 ( 0.00%)  	return (this->alias ? this->alias : this->name);
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin__set_file(clish_plugin_t *this, const char *file)
  .           {
  .           	lub_string_free(this->file);
  .           	this->file = lub_string_dup(file);
  .           }
  .           
-- line 441 ----------------------------------------
-- line 474 ----------------------------------------
  .           void clish_plugin__set_rtld_global(clish_plugin_t *this, bool_t rtld_global)
  .           {
  .           	this->rtld_global = rtld_global;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_plugin__get_rtld_global(const clish_plugin_t *this)
  .           {
  1 ( 0.00%)  	return this->rtld_global;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 11 ----------------------------------------
  .           #include <string.h>
  .           #include <assert.h>
  .           #include <limits.h>
  .           #include <stdio.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
 51 ( 0.00%)  static char *clish_ptype_select__get_name(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 38 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
829 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
160 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (16x)
 51 ( 0.00%)  	if (arg) {
 68 ( 0.00%)  		size_t name_len = strlen(arg);
326 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (17x)
 72 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
1,504 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
368 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (16x)
  .           		if (lbrk)
 68 ( 0.00%)  			name_len = (size_t) (lbrk - arg);
 72 ( 0.00%)  		result = lub_string_dupn(arg, name_len);
2,561 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,621 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (16x)
  .           	}
  .           	return result;
 51 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_select__get_value(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
  .           	const char *arg = lub_argv__get_arg(this->u.select.items, index);
  .           	if (arg) {
-- line 40 ----------------------------------------
-- line 53 ----------------------------------------
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype__set_range(clish_ptype_t * this)
  .           {
  .           	char tmp[80];
  .           
  .           	/* Now set up the range values */
 75 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* Nothing more to do */
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* Setup the integer range */
 12 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%d..%d",
  .           			this->u.integer.min, this->u.integer.max);
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		this->range = lub_string_dup(tmp);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* Setup the unsigned integer range */
 15 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%u..%u",
2,947 ( 0.05%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (3x)
  .           			(unsigned int)this->u.integer.min,
  .           			(unsigned int)this->u.integer.max);
  3 ( 0.00%)  		tmp[sizeof(tmp) - 1] = '\0';
 12 ( 0.00%)  		this->range = lub_string_dup(tmp);
933 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		/* Setup the selection values to the help text */
  .           		unsigned int i;
  .           
121 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items); i++) {
870 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 38 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (19x)
 68 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
8,840 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (17x)
  .           
 34 ( 0.00%)  			if (i > 0)
 73 ( 0.00%)  				lub_string_cat(&this->range, "/");
3,648 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (14x)
128 ( 0.00%)  			snprintf(tmp, sizeof(tmp), "%s", name);
8,790 ( 0.16%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (17x)
 17 ( 0.00%)  			tmp[sizeof(tmp) - 1] = '\0';
 68 ( 0.00%)  			lub_string_cat(&this->range, tmp);
5,400 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (17x)
 51 ( 0.00%)  			lub_string_free(name);
1,530 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (17x)
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_ptype_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_ptype_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
846 ( 0.02%)  	return strcmp(this->name, key);
8,093 ( 0.15%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (282x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_ptype_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 25 ( 0.00%)  {
  .           	const clish_ptype_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
100 ( 0.00%)  	strcpy((char *)key, this->name);
555 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           size_t clish_ptype_bt_offset(void)
  .           {
  .           	return offsetof(clish_ptype_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *method_names[] = {
  .           	"regexp",
  .           	"integer",
  .           	"unsignedInteger",
  .           	"select"
  .           };
-- line 137 ----------------------------------------
-- line 143 ----------------------------------------
  .           
  .           	if (method >= max_method)
  .           		return NULL;
  .           	return method_names[method];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_method_e clish_ptype_method_resolve(const char *name)
 36 ( 0.00%)  {
 10 ( 0.00%)  	clish_ptype_method_e result = CLISH_PTYPE_REGEXP;
 22 ( 0.00%)  	if (NULL != name) {
  .           		unsigned i;
 36 ( 0.00%)  		for (i = 0; i < CLISH_PTYPE_SELECT + 1; i++) {
114 ( 0.00%)  			if (0 == strcmp(name, method_names[i])) {
413 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (18x)
  .           				result = (clish_ptype_method_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
  .           		assert(i <= CLISH_PTYPE_SELECT);
  .           	}
  .           	return result;
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *preprocess_names[] = {
  .           	"none",
  .           	"toupper",
  .           	"tolower"
  .           };
  .           
-- line 173 ----------------------------------------
-- line 176 ----------------------------------------
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	return preprocess_names[preprocess];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_preprocess_e clish_ptype_preprocess_resolve(const char *name)
  .           {
 22 ( 0.00%)  	clish_ptype_preprocess_e result = CLISH_PTYPE_NONE;
 22 ( 0.00%)  	if (name) {
  .           		unsigned i;
  .           		for (i = 0; i < CLISH_PTYPE_TOLOWER + 1; i++) {
  .           			if (0 == strcmp(name, preprocess_names[i])) {
  .           				result = (clish_ptype_preprocess_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
-- line 193 ----------------------------------------
-- line 372 ----------------------------------------
  .           	return (char *)result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_init(clish_ptype_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
  .           {
 26 ( 0.00%)  	assert(name);
 52 ( 0.00%)  	this->name = lub_string_dup(name);
2,932 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
 13 ( 0.00%)  	this->text = NULL;
 13 ( 0.00%)  	this->pattern = NULL;
 13 ( 0.00%)  	this->preprocess = preprocess;
 13 ( 0.00%)  	this->range = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 43 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
947 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (12x)
  .           
 26 ( 0.00%)  	if (pattern) {
  .           		/* set the pattern for this type */
 69 ( 0.00%)  		clish_ptype__set_pattern(this, pattern, method);
1,918,667 (35.53%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern (12x)
148,076 ( 2.74%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	} else {
  .           		/* The method is regexp by default */
  .           		this->method = CLISH_PTYPE_REGEXP;
  .           	}
  .           	
  .           	/* set the help text for this type */
 26 ( 0.00%)  	if (text)
 56 ( 0.00%)  		clish_ptype__set_text(this, text);
832 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,699 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_text (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_validate(const clish_ptype_t * this, const char *text)
  .           {
  .           	return clish_ptype_validate_or_translate(this, text, BOOL_FALSE);
  .           }
  .           
-- line 408 ----------------------------------------
-- line 411 ----------------------------------------
  .           {
  .           	return clish_ptype_validate_or_translate(this, text, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_ptype_new(const char *name,
  .           	const char *help, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
156 ( 0.00%)  {
 52 ( 0.00%)  	clish_ptype_t *this = malloc(sizeof(clish_ptype_t));
4,162 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (13x)
  .           
 26 ( 0.00%)  	if (this)
  .           		clish_ptype_init(this, name, help, pattern, method, preprocess);
  .           	return this;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_fini(clish_ptype_t * this)
  .           {
 26 ( 0.00%)  	if (this->pattern) {
 51 ( 0.00%)  		switch (this->method) {
  .           		case CLISH_PTYPE_REGEXP:
 32 ( 0.00%)  			regfree(&this->u.regexp);
59,600 ( 1.10%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regfree (6x)
29,264 ( 0.54%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			break;
  .           		case CLISH_PTYPE_INTEGER:
  .           		case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           			break;
  .           		case CLISH_PTYPE_SELECT:
  9 ( 0.00%)  			lub_argv_delete(this->u.select.items);
2,277 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (3x)
  .           			break;
  .           		}
  .           	}
  .           
 39 ( 0.00%)  	lub_string_free(this->name);
1,170 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
 13 ( 0.00%)  	this->name = NULL;
 39 ( 0.00%)  	lub_string_free(this->text);
1,170 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
 13 ( 0.00%)  	this->text = NULL;
 39 ( 0.00%)  	lub_string_free(this->pattern);
1,199 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
 13 ( 0.00%)  	this->pattern = NULL;
 39 ( 0.00%)  	lub_string_free(this->range);
603 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
  .           	this->range = NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype_delete(clish_ptype_t * this)
 26 ( 0.00%)  {
  .           	clish_ptype_fini(this);
 39 ( 0.00%)  	free(this);
1,557 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (13x)
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_ptype__get_name(const clish_ptype_t * this)
  .           {
  .           	return (const char *)this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 467 ----------------------------------------
-- line 469 ----------------------------------------
  .           {
  .           	return (const char *)this->text;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_pattern(clish_ptype_t * this,
  .           			 const char *pattern, clish_ptype_method_e method)
 91 ( 0.00%)  {
 26 ( 0.00%)  	assert(NULL == this->pattern);
 13 ( 0.00%)  	this->method = method;
  .           
 74 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           	{
  .           		int result;
  .           
  .           		/* only the expression is allowed */
 39 ( 0.00%)  		lub_string_cat(&this->pattern, "^");
5,043 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,648 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (6x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, pattern);
3,484 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, "$");
1,814 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
  .           
  .           		/* compile the regular expression for later use */
 39 ( 0.00%)  		result = regcomp(&this->u.regexp, this->pattern,
1,847,778 (34.22%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp (6x)
141,777 ( 2.63%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			REG_NOSUB | REG_EXTENDED);
 14 ( 0.00%)  		assert(0 == result);
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* default the range to that of an integer */
  3 ( 0.00%)  		this->u.integer.min = INT_MIN;
  3 ( 0.00%)  		this->u.integer.max = INT_MAX;
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
726 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* now try and read the specified range */
 28 ( 0.00%)  		sscanf(this->pattern, "%d..%d",
2,835 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,758 ( 0.05%)  => /opt/build/glibc/glibc-2.24/stdio-common/isoc99_sscanf.c:__isoc99_sscanf (2x)
  .           			&this->u.integer.min, &this->u.integer.max);
  3 ( 0.00%)  		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* default the range to that of an unsigned integer */
  .           		this->u.integer.min = 0;
  .           		this->u.integer.max = (int)UINT_MAX;
  .           		this->pattern = lub_string_dup(pattern);
  .           		/* now try and read the specified range */
  .           		sscanf(this->pattern, "%u..%u",
  .           			(unsigned int *)&this->u.integer.min,
  .           			(unsigned int *)&this->u.integer.max);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
816 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* store a vector of item descriptors */
 29 ( 0.00%)  		this->u.select.items = lub_argv_new(this->pattern, 0);
15,931 ( 0.30%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,229 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (2x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	}
  .           	/* now set up the range details */
  .           	clish_ptype__set_range(this);
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype__set_text(clish_ptype_t * this, const char *text)
 13 ( 0.00%)  {
 39 ( 0.00%)  	assert(!this->text);
 52 ( 0.00%)  	this->text = lub_string_dup(text);
3,732 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
  .           
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_preprocess(clish_ptype_t * this,
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	assert(!this->preprocess);
  .           	this->preprocess = preprocess;
-- line 545 ----------------------------------------

--------------------------------------------------------------------------------
The following files chosen for auto-annotation could not be found:
--------------------------------------------------------------------------------
  /opt/build/glibc/glibc-2.24/csu/../csu/libc-start.c
  /opt/build/glibc/glibc-2.24/dlfcn/dlerror.c
  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-sysdep.c
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h
  /opt/build/glibc/glibc-2.24/elf/dl-addr.c
  /opt/build/glibc/glibc-2.24/elf/dl-deps.c
  /opt/build/glibc/glibc-2.24/elf/dl-error.c
  /opt/build/glibc/glibc-2.24/elf/dl-load.c
  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c
  /opt/build/glibc/glibc-2.24/elf/dl-misc.c
  /opt/build/glibc/glibc-2.24/elf/dl-open.c
  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c
  /opt/build/glibc/glibc-2.24/elf/rtld.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c
  /opt/build/glibc/glibc-2.24/intl/../intl/l10nflist.c
  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c
  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c
  /opt/build/glibc/glibc-2.24/locale/findlocale.c
  /opt/build/glibc/glibc-2.24/locale/loadarchive.c
  /opt/build/glibc/glibc-2.24/locale/setlocale.c
  /opt/build/glibc/glibc-2.24/malloc/arena.c
  /opt/build/glibc/glibc-2.24/malloc/hooks.c
  /opt/build/glibc/glibc-2.24/malloc/malloc.c
  /opt/build/glibc/glibc-2.24/posix/regcomp.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.c
  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/strdup.c
  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c
  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c
  /usr/include/x86_64-linux-gnu/bits/string2.h

--------------------------------------------------------------------------------
Ir               
--------------------------------------------------------------------------------
260,276 ( 4.82%)  events annotated

--------------------------------------------------------------------------------
Profile data file '../easy/callgrind.out.1993' (creator: callgrind-3.13.0)
--------------------------------------------------------------------------------
I1 cache: 
D1 cache: 
LL cache: 
Timerange: Basic block 0 - 1139404
Trigger: Program termination
Profiled target:  ./clish -x ../../xml-examples/clish (PID 1993, part 1)
Events recorded:  Ir
Events shown:     Ir
Event sort order: Ir
Thresholds:       99
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir                 
--------------------------------------------------------------------------------
5,091,929 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir                  file:function
--------------------------------------------------------------------------------
5,091,929 (100.0%)  ???:0x0000000000000c20 [/lib/x86_64-linux-gnu/ld-2.24.so]
4,816,211 (94.59%)  ???:_start [/home/ykuznetsov/klish-2.1.3/bin/.libs/clish]
4,816,200 (94.58%)  /opt/build/glibc/glibc-2.24/csu/../csu/libc-start.c:(below main) [/lib/x86_64-linux-gnu/libc-2.24.so]
4,815,998 (94.58%)  /home/ykuznetsov/klish-2.1.3/bin/clish.c:main [/home/ykuznetsov/klish-2.1.3/bin/.libs/clish]
4,814,759 (94.56%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave [/lib/x86_64-linux-gnu/ld-2.24.so]
4,178,557 (82.06%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:clish_shell_load_scheme [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
3,005,018 (59.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,363,579 (46.42%)  /usr/include/x86_64-linux-gnu/bits/string2.h:clish_shell_load_scheme
2,363,395 (46.41%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,353,098 (46.21%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,347,728 (46.11%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,089,455 (41.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,080,076 (40.85%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,066,058 (40.58%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,988,022 (39.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp [/lib/x86_64-linux-gnu/libc-2.24.so]
1,863,258 (36.59%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
1,805,880 (35.47%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,590,368 (31.23%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,417,657 (27.84%)  ???:XML_Parse [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,405,042 (27.59%)  ???:XML_ParseBuffer [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,404,612 (27.59%)  ???:0x000000000000b4f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,398,342 (27.46%)  ???:0x00000000000094a0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,355,102 (26.61%)  ???:0x0000000000009440 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,354,812 (26.61%)  ???:0x0000000000008190 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,100,831 (21.62%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap [/lib/x86_64-linux-gnu/libc-2.24.so]
1,100,236 (21.61%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap_iter.isra.24 [/lib/x86_64-linux-gnu/libc-2.24.so]
1,013,962 (19.91%)  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c:mbrtowc [/lib/x86_64-linux-gnu/libc-2.24.so]
  928,627 (18.24%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  884,949 (17.38%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  801,819 (15.75%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  800,055 (15.71%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  796,662 (15.65%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  709,637 (13.94%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  669,202 (13.14%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  590,799 (11.60%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c:__gconv_transform_utf8_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  511,308 (10.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp [/lib/x86_64-linux-gnu/libc-2.24.so]
  511,021 (10.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch [/lib/x86_64-linux-gnu/libc-2.24.so]
  509,733 (10.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression [/lib/x86_64-linux-gnu/libc-2.24.so]
  493,262 ( 9.69%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  461,654 ( 9.07%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  457,238 ( 8.98%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:_dl_lookup_symbol_x [/lib/x86_64-linux-gnu/ld-2.24.so]
  444,022 ( 8.72%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_chardata_handler [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  435,305 ( 8.55%)  ???:0x0000000005686930 [???]
  416,159 ( 8.17%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  382,924 ( 7.52%)  ???:0x0000000000007580 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  337,145 ( 6.62%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:do_lookup_x [/lib/x86_64-linux-gnu/ld-2.24.so]
  317,611 ( 6.24%)  /opt/build/glibc/glibc-2.24/string/strdup.c:strdup [/lib/x86_64-linux-gnu/ld-2.24.so]
  303,158 ( 5.95%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_view [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  288,347 ( 5.66%)  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c:_dl_relocate_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  272,748 ( 5.36%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:free [/lib/x86_64-linux-gnu/libc-2.24.so]
  272,383 ( 5.35%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:_dl_start [/lib/x86_64-linux-gnu/ld-2.24.so]
  271,740 ( 5.34%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-sysdep.c:_dl_sysdep_start [/lib/x86_64-linux-gnu/ld-2.24.so]
  271,064 ( 5.32%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:dl_main [/lib/x86_64-linux-gnu/ld-2.24.so]
  265,724 ( 5.22%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h:_dl_relocate_object
  251,594 ( 4.94%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c:_dl_fixup [/lib/x86_64-linux-gnu/ld-2.24.so]
  248,633 ( 4.88%)  ???:0x0000000000013e60 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  241,303 ( 4.74%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_param [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  226,529 ( 4.45%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:clish_shell_prepare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  226,264 ( 4.44%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_free [/lib/x86_64-linux-gnu/libc-2.24.so]
  204,244 ( 4.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_element_start [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  197,624 ( 3.88%)  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c:btowc [/lib/x86_64-linux-gnu/libc-2.24.so]
  193,045 ( 3.79%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  192,211 ( 3.77%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  191,055 ( 3.75%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  190,544 ( 3.74%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_init [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  186,415 ( 3.66%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error [/lib/x86_64-linux-gnu/ld-2.24.so]
  172,879 ( 3.40%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c:__gconv_transform_utf8_internal
  156,736 ( 3.08%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
  155,355 ( 3.05%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_load_plugins [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  154,692 ( 3.04%)  /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_load [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  145,295 ( 2.85%)  ???:0x000000000000f290 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  135,127 ( 2.65%)  /opt/build/glibc/glibc-2.24/dlfcn/dlerror.c:_dlerror_run [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,470 ( 2.60%)  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c:dlopen@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,349 ( 2.60%)  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c:dlopen_doit [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,320 ( 2.60%)  /opt/build/glibc/glibc-2.24/elf/dl-open.c:_dl_open [/lib/x86_64-linux-gnu/ld-2.24.so]
  132,178 ( 2.60%)  /opt/build/glibc/glibc-2.24/elf/dl-open.c:dl_open_worker [/lib/x86_64-linux-gnu/ld-2.24.so]
  127,757 ( 2.51%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter [/lib/x86_64-linux-gnu/libc-2.24.so]
  111,010 ( 2.18%)  /opt/build/glibc/glibc-2.24/elf/dl-misc.c:_dl_name_match_p [/lib/x86_64-linux-gnu/ld-2.24.so]
  108,808 ( 2.14%)  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c:__collseq_table_lookup [/lib/x86_64-linux-gnu/libc-2.24.so]
  103,456 ( 2.03%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  102,528 ( 2.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:strcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  101,318 ( 1.99%)  ???:0x000000000001a2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   96,912 ( 1.90%)  ???:XML_ParserCreate [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   96,882 ( 1.90%)  ???:XML_ParserCreate_MM [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   92,591 ( 1.82%)  /opt/build/glibc/glibc-2.24/locale/setlocale.c:setlocale [/lib/x86_64-linux-gnu/libc-2.24.so]
   90,892 ( 1.79%)  ???:0x0000000000004c30 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   90,885 ( 1.78%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_consolidate [/lib/x86_64-linux-gnu/libc-2.24.so]
   86,906 ( 1.71%)  /opt/build/glibc/glibc-2.24/locale/findlocale.c:_nl_find_locale [/lib/x86_64-linux-gnu/libc-2.24.so]
   86,805 ( 1.70%)  ???:0x0000000000004cb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   84,985 ( 1.67%)  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
   84,841 ( 1.67%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:_dl_map_object_deps [/lib/x86_64-linux-gnu/ld-2.24.so]
   82,441 ( 1.62%)  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c:vsnprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
   80,590 ( 1.58%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   78,620 ( 1.54%)  ???:0x0000000000005570 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   76,713 ( 1.51%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object [/lib/x86_64-linux-gnu/ld-2.24.so]
   75,917 ( 1.49%)  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
   73,168 ( 1.44%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_compile_internal
   72,620 ( 1.43%)  /opt/build/glibc/glibc-2.24/locale/loadarchive.c:_nl_load_locale_from_archive [/lib/x86_64-linux-gnu/libc-2.24.so]
   70,912 ( 1.39%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_action [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   70,726 ( 1.39%)  ???:0x0000000000005130 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   70,629 ( 1.39%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:openaux [/lib/x86_64-linux-gnu/ld-2.24.so]
   66,700 ( 1.31%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
   63,809 ( 1.25%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
   60,174 ( 1.18%)  /opt/build/glibc/glibc-2.24/intl/../intl/l10nflist.c:_nl_normalize_codeset [/lib/x86_64-linux-gnu/libc-2.24.so]
   60,022 ( 1.18%)  /opt/build/glibc/glibc-2.24/malloc/hooks.c:malloc_hook_ini [/lib/x86_64-linux-gnu/libc-2.24.so]
   59,273 ( 1.16%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_acquire_state_context [/lib/x86_64-linux-gnu/libc-2.24.so]
   58,930 ( 1.16%)  /opt/build/glibc/glibc-2.24/malloc/arena.c:ptmalloc_init.part.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
   58,553 ( 1.15%)  /opt/build/glibc/glibc-2.24/elf/dl-addr.c:_dl_addr [/lib/x86_64-linux-gnu/libc-2.24.so]
   56,755 ( 1.11%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
   56,515 ( 1.11%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   52,175 ( 1.02%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:build_wcs_buffer [/lib/x86_64-linux-gnu/libc-2.24.so]
   51,933 ( 1.02%)  ???:XML_ParserFree [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   50,782 ( 1.00%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:postorder [/lib/x86_64-linux-gnu/libc-2.24.so]

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 5 ----------------------------------------
  .           #include <assert.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_shell_find_ptype(clish_shell_t *this,
  .           	const char *name)
  .           {
 75 ( 0.00%)  	return lub_bintree_find(&this->ptype_tree, name);
6,443 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_shell_find_create_ptype(clish_shell_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
169 ( 0.00%)  {
 43 ( 0.00%)  	clish_ptype_t *ptype = lub_bintree_find(&this->ptype_tree, name);
1,629 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,441 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (12x)
  .           
 39 ( 0.00%)  	if (!ptype) {
  .           		/* create a ptype */
108 ( 0.00%)  		ptype = clish_ptype_new(name, text, pattern,
1,929,722 (37.90%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new (12x)
150,975 ( 2.96%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			method, preprocess);
 26 ( 0.00%)  		assert(ptype);
 69 ( 0.00%)  		clish_shell_insert_ptype(this, ptype);
1,539 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,578 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_insert_ptype (12x)
  .           	} else {
  .           		if (pattern) {
  .           			/* set the pattern */
  .           			clish_ptype__set_pattern(ptype, pattern, method);
  .           			/* set the preprocess */
  .           			clish_ptype__set_preprocess(ptype, preprocess);
  .           		}
  .           		/* set the help text */
  .           		if (text)
  .           			clish_ptype__set_text(ptype, text);
  .           	}
  .           
  .           	return ptype;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_shell_insert_ptype(clish_shell_t * this, clish_ptype_t * ptype)
  .           {
 43 ( 0.00%)  	(void)lub_bintree_insert(&this->ptype_tree, ptype);
2,542 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (12x)
855 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c
--------------------------------------------------------------------------------
Ir           

-- line 12 ----------------------------------------
  .           	"clish_script@clish",
  .           	NULL,
  .           	"clish_hook_config@clish",
  .           	"clish_hook_log@clish"
  .           };
  .           
  .           /*----------------------------------------------------------- */
  .           int clish_shell_startup(clish_shell_t *this)
  3 ( 0.00%)  {
  .           	const char *banner;
  .           	clish_context_t context;
  .           
  3 ( 0.00%)  	if (!this->startup) {
  .           		fprintf(stderr, "Error: Can't get valid STARTUP tag.\n");
  .           		return -1;
  .           	}
  .           
  .           	/* Prepare context */
  9 ( 0.00%)  	clish_context_init(&context, this);
645 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_cmd(&context, this->startup);
681 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_action(&context,
689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		clish_command__get_action(this->startup));
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (1x)
  .           
  7 ( 0.00%)  	banner = clish_command__get_detail(this->startup);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	if (banner)
 10 ( 0.00%)  		tinyrl_printf(this->tinyrl, "%s\n", banner);
18,898 ( 0.37%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Call log initialize */
  9 ( 0.00%)  	if (clish_shell__get_log(this))
657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		clish_shell_exec_log(&context, NULL, 0);
  .           	/* Call startup script */
  8 ( 0.00%)  	return clish_shell_execute(&context, NULL);
26,189 ( 0.51%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           void clish_shell__set_startup_view(clish_shell_t *this, const char *viewname)
  .           {
  .           	clish_view_t *view;
  .           
  .           	assert(this);
-- line 51 ----------------------------------------
-- line 70 ----------------------------------------
  .           	assert(this);
  .           	lub_string_free(this->default_shebang);
  .           	this->default_shebang = lub_string_dup(shebang);
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           const char * clish_shell__get_default_shebang(const clish_shell_t *this)
  .           {
  2 ( 0.00%)  	assert(this);
  1 ( 0.00%)  	return this->default_shebang;
  1 ( 0.00%)  }
  .           
  .           
  .           
  .           /*-------------------------------------------------------- */
  .           /* Resolve PTYPE for given PARAM.
  .            */
  .           static clish_ptype_t * resolve_ptype(clish_shell_t *this, clish_param_t *param)
 75 ( 0.00%)  {
  .           	clish_ptype_t *ptype = NULL;
  .           
125 ( 0.00%)  	if (!this || !param)
  .           		return NULL;
  .           
  .           	/* Resolve PARAM's PTYPE */
233 ( 0.00%)  	ptype = clish_shell_find_ptype(this, clish_param__get_ptype_name(param));
6,192 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_ptype (24x)
1,698 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype_name (24x)
 50 ( 0.00%)  	if (!ptype) {
  .           		fprintf(stderr, "Error: Unresolved PTYPE \"%s\" in PARAM \"%s\"\n",
  .           			clish_param__get_ptype_name(param),
  .           			clish_param__get_name(param));
  .           		return NULL;
  .           	}
104 ( 0.00%)  	clish_param__set_ptype(param, ptype);
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype (24x)
104 ( 0.00%)  	clish_param__set_ptype_name(param, NULL); /* Free some memory */
813 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,688 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype_name (24x)
  .           
  .           	return ptype;
125 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* Static recursive function to iterate parameters. Logically it's the
  .            * part of clish_shell_prepare() function.
  .            */
  .           static int iterate_paramv(clish_shell_t *this, clish_paramv_t *paramv,
  .           	clish_hook_access_fn_t *access_fn)
400 ( 0.01%)  {
100 ( 0.00%)  	int i = 0;
  .           	clish_param_t *param;
  .           
522 ( 0.01%)  	while((param = clish_paramv__get_param(paramv, i))) {
673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
214 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (44x)
  .           		clish_paramv_t *nested_paramv;
  .           
  .           		/* Resolve PARAM's PTYPE */
120 ( 0.00%)  		if (!resolve_ptype(this, param))
10,533 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (19x)
  .           			return -1;
  .           
  .           		/* Check access for PARAM */
 48 ( 0.00%)  		if (access_fn && clish_param__get_access(param) &&
  .           			access_fn(this, clish_param__get_access(param))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove PARAM \"%s\"\n",
  .           				clish_param__get_name(param));
  .           #endif
  .           			if (clish_paramv_remove(paramv, i) < 0) {
  .           				fprintf(stderr, "Error: Some system problem\n");
  .           				return -1;
  .           			}
  .           			clish_param_delete(param);
  .           			continue; /* Don't increment index */
  .           		}
  .           		/* Recursive iterate nested PARAMs */
 76 ( 0.00%)  		nested_paramv = clish_param__get_paramv(param);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_paramv (18x)
144 ( 0.00%)  		if (iterate_paramv(this, nested_paramv, access_fn) < 0)
2,728 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 (19x)
  .           			return -1;
 48 ( 0.00%)  		i++;
  .           	}
  .           
 50 ( 0.00%)  	return 0;
300 ( 0.01%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This function prepares schema for execution. It loads
  .            * plugins, link unresolved symbols, then iterates all the
  .            * objects and link them to each other, check access
  .            * permissions. Don't execute clish_shell_startup() without this
  .            * function.
  .            */
  .           int clish_shell_prepare(clish_shell_t *this)
  8 ( 0.00%)  {
  .           	clish_command_t *cmd;
  .           	clish_view_t *view;
  .           	clish_nspace_t *nspace;
  .           	lub_bintree_t *view_tree, *cmd_tree;
  .           	lub_list_t *nspace_tree;
  .           	lub_bintree_iterator_t cmd_iter, view_iter;
  .           	lub_list_node_t *nspace_iter;
  .           	clish_hook_access_fn_t *access_fn = NULL;
  .           	clish_paramv_t *paramv;
  .           	int i = 0;
  .           
  .           	/* Add statically linked plugins */
  4 ( 0.00%)  	while (clish_plugin_builtin_list[i].name) {
  .           		clish_plugin_t *plugin;
  .           		plugin = clish_shell_find_create_plugin(this,
  .           			clish_plugin_builtin_list[i].name);
  .           		clish_plugin_add_init(plugin,
  .           			clish_plugin_builtin_list[i].init);
  .           		clish_plugin__set_builtin_flag(plugin, BOOL_TRUE);
  .           		i++;
  .           	}
  .           
  .           	/* Add default plugin to the list of plugins */
  5 ( 0.00%)  	if (this->default_plugin) {
  9 ( 0.00%)  		clish_shell_find_create_plugin(this, "clish");
3,061 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* Default hooks */
 11 ( 0.00%)  		for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 15 ( 0.00%)  			if (this->hooks_use[i])
  .           				continue;
 20 ( 0.00%)  			if (!clish_plugin_default_hook[i])
  .           				continue;
 18 ( 0.00%)  			clish_sym__set_name(this->hooks[i],
957 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
640 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_name (2x)
  .           				clish_plugin_default_hook[i]);
  .           		}
  .           	}
  .           	/* Add default syms to unresolved table */
 10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 25 ( 0.00%)  		if (clish_sym__get_name(this->hooks[i]))
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (5x)
 17 ( 0.00%)  			lub_list_add(this->syms, this->hooks[i]);
1,234 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (3x)
  .           	}
  .           
  .           	/* Load plugins and link symbols */
  9 ( 0.00%)  	if (clish_shell_load_plugins(this) < 0)
156,032 ( 3.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  9 ( 0.00%)  	if (clish_shell_link_plugins(this) < 0)
9,951 ( 0.20%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  .           
 12 ( 0.00%)  	access_fn = clish_sym__get_func(clish_shell_get_hook(this, CLISH_SYM_TYPE_ACCESS));
648 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (1x)
  .           
  .           	/* Iterate the VIEWs */
  .           	view_tree = &this->view_tree;
  9 ( 0.00%)  	view = lub_bintree_findfirst(view_tree);
1,054 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 23 ( 0.00%)  	for (lub_bintree_iterator_init(&view_iter, view_tree, view);
948 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 20 ( 0.00%)  		view; view = lub_bintree_iterator_next(&view_iter)) {
2,213 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (5x)
  .           		/* Check access rights for the VIEW */
 10 ( 0.00%)  		if (access_fn && clish_view__get_access(view) &&
  .           			access_fn(this, clish_view__get_access(view))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove VIEW \"%s\"\n",
  .           				clish_view__get_name(view));
  .           #endif
  .           			lub_bintree_remove(view_tree, view);
  .           			clish_view_delete(view);
  .           			continue;
  .           		}
  .           
  .           		/* Iterate the NAMESPACEs */
 24 ( 0.00%)  		nspace_tree = clish_view__get_nspace_tree(view);
703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_nspace_tree (4x)
 20 ( 0.00%)  		nspace_iter = lub_list__get_head(nspace_tree);
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
 10 ( 0.00%)  		while(nspace_iter) {
  .           			clish_view_t *ref_view;
  .           			lub_list_node_t *old_nspace_iter;
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(nspace_iter);
  .           			old_nspace_iter = nspace_iter;
  .           			nspace_iter = lub_list_node__get_next(nspace_iter);
  .           			/* Resolve NAMESPACEs and remove unresolved ones */
  .           			ref_view = clish_shell_find_view(this, clish_nspace__get_view_name(nspace));
  .           			if (!ref_view) {
-- line 235 ----------------------------------------
-- line 259 ----------------------------------------
  .           				lub_list_del(nspace_tree, old_nspace_iter);
  .           				lub_list_node_free(old_nspace_iter);
  .           				clish_nspace_delete(nspace);
  .           				continue;
  .           			}
  .           		}
  .           
  .           		/* Iterate the COMMANDs */
 24 ( 0.00%)  		cmd_tree = clish_view__get_command_tree(view);
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_command_tree (4x)
 20 ( 0.00%)  		cmd = lub_bintree_findfirst(cmd_tree);
441 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (5x)
 88 ( 0.00%)  		for (lub_bintree_iterator_init(&cmd_iter, cmd_tree, cmd);
204 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_init.c:lub_bintree_iterator_init (5x)
108 ( 0.00%)  			cmd; cmd = lub_bintree_iterator_next(&cmd_iter)) {
3,573 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
24,271 ( 0.48%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (25x)
108 ( 0.00%)  			int cmd_is_alias = clish_command__get_alias(cmd)?1:0;
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_alias (25x)
  .           			clish_param_t *args = NULL;
  .           
  .           			/* Check access rights for the COMMAND */
 52 ( 0.00%)  			if (access_fn && clish_command__get_access(cmd) &&
  .           				access_fn(this, clish_command__get_access(cmd))) {
  .           #ifdef DEBUG
  .           				fprintf(stderr, "Warning: Access denied. Remove COMMAND \"%s\" from VIEW \"%s\"\n",
  .           					clish_command__get_name(cmd), clish_view__get_name(view));
  .           #endif
  .           				lub_bintree_remove(cmd_tree, cmd);
  .           				clish_command_delete(cmd);
  .           				continue;
  .           			}
  .           
  .           			/* Resolve command aliases */
 52 ( 0.00%)  			if (cmd_is_alias) {
  .           				clish_view_t *aview;
  .           				clish_command_t *cmdref;
 26 ( 0.00%)  				const char *alias_view = clish_command__get_alias_view(cmd);
  .           				if (!alias_view)
  .           					aview = clish_command__get_pview(cmd);
  .           				else
  .           					aview = clish_shell_find_view(this, alias_view);
  .           				if (!aview /* Removed or broken VIEW */
  .           					||
  .           					/* Removed or broken referenced COMMAND */
  .           					!(cmdref = clish_view_find_command(aview, clish_command__get_alias(cmd), BOOL_FALSE))
-- line 298 ----------------------------------------
-- line 328 ----------------------------------------
  .           					lub_bintree_remove(cmd_tree, cmd);
  .           					clish_command_delete(cmd);
  .           					continue;
  .           				}
  .           			}
  .           			if (cmd_is_alias) /* Don't duplicate paramv processing for aliases */
  .           				continue;
  .           			/* Iterate PARAMeters */
 56 ( 0.00%)  			paramv = clish_command__get_paramv(cmd);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (25x)
156 ( 0.00%)  			if (iterate_paramv(this, paramv, access_fn) < 0)
15,978 ( 0.31%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv (26x)
  .           				return -1;
  .           			/* Resolve PTYPE for args */
134 ( 0.00%)  			if ((args = clish_command__get_args(cmd))) {
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (25x)
  5 ( 0.00%)  				if (!resolve_ptype(this, args))
542 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (1x)
  .           					return -1;
  .           			}
  .           		}
  .           	}
  .           
  2 ( 0.00%)  	return 0;
  8 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c
--------------------------------------------------------------------------------
Ir          

-- line 9 ----------------------------------------
 .           #include "lub/string.h"
 .           #include "lub/list.h"
 .           #include "lub/bintree.h"
 .           #include "clish/plugin.h"
 .           #include "clish/view.h"
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_plugin_t * clish_shell_find_plugin(clish_shell_t *this, const char *name)
 3 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           
 2 ( 0.00%)  	assert(this);
 .           
 5 ( 0.00%)  	if (!name || !name[0])
 1 ( 0.00%)  		return NULL;
 .           	/* Iterate elements */
 7 ( 0.00%)  	for(iter = lub_list__get_head(this->plugins);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 .           		iter; iter = lub_list_node__get_next(iter)) {
 .           		plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 .           		if (!strcmp(name, clish_plugin__get_name(plugin)))
 .           			return plugin;
 .           	}
 .           
 .           	return NULL;
 5 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_plugin_t * clish_shell_find_create_plugin(clish_shell_t *this,
 .           	const char *name)
 3 ( 0.00%)  {
 .           	clish_plugin_t *plugin;
 2 ( 0.00%)  	assert(this);
 .           
 6 ( 0.00%)  	if (!name || !name[0])
 1 ( 0.00%)  		return NULL;
 .           
 7 ( 0.00%)  	plugin = clish_shell_find_plugin(this, name);
710 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 2 ( 0.00%)  	if (plugin)
 .           		return plugin;
 8 ( 0.00%)  	plugin = clish_plugin_new(name);
1,322 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 4 ( 0.00%)  	lub_list_add(this->plugins, plugin);
249 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (1x)
 .           
 1 ( 0.00%)  	return plugin;
 5 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* For all plugins:
 .            *  * dlopen(plugin)
 .            *  * dlsym(initialize function)
 .            *  * exec init functions to get all plugin syms
 .            */
 .           int clish_shell_load_plugins(clish_shell_t *this)
 3 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           
 3 ( 0.00%)  	assert(this);
 .           
 .           	/* Iterate elements */
 8 ( 0.00%)  	for(iter = lub_list__get_head(this->plugins);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 4 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (1x)
 3 ( 0.00%)  		plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (1x)
10 ( 0.00%)  		if (clish_plugin_load(plugin, (void *)this))
155,313 ( 3.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           			return -1;
 .           #ifdef DEBUG
 .           		clish_plugin_dump(plugin);
 .           #endif
 .           	}
 .           
 1 ( 0.00%)  	return 0;
 4 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Iterate plugins to find symbol by name.
 .            * The symbol name can be simple or with namespace:
 .            * mysym@plugin1
 .            * The symbols with suffix will be resolved using specified plugin only.
 .            */
 .           static clish_sym_t *plugins_find_sym(clish_shell_t *this, const char *name, int type)
 .           {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           	clish_sym_t *sym = NULL;
 .           	/* To parse command name */
 6 ( 0.00%)  	char *saveptr = NULL;
 .           	const char *delim = "@";
 .           	char *plugin_name = NULL;
 .           	char *cmdn = NULL;
24 ( 0.00%)  	char *str = lub_string_dup(name);
1,045 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (6x)
 .           
 .           	assert(this);
 .           
 .           	/* Parse name to get sym name and optional plugin name */
42 ( 0.00%)  	cmdn = strtok_r(str, delim, &saveptr);
1,583 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
597 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r (5x)
12 ( 0.00%)  	if (!cmdn) {
 .           		lub_string_free(str);
 .           		return NULL;
 .           	}
36 ( 0.00%)  	plugin_name = strtok_r(NULL, delim, &saveptr);
483 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r (6x)
 .           
12 ( 0.00%)  	if (plugin_name) {
 .           		/* Search for symbol in specified namespace */
 .           		/* Iterate elements */
27 ( 0.00%)  		for(iter = lub_list__get_head(this->plugins);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 .           			iter; iter = lub_list_node__get_next(iter)) {
12 ( 0.00%)  			plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
31 ( 0.00%)  			if (strcmp(clish_plugin__get_pubname(plugin), plugin_name))
730 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (3x)
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin__get_pubname (2x)
 .           				continue;
21 ( 0.00%)  			if ((sym = clish_plugin_get_sym(plugin, cmdn, type)))
984 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym (3x)
 .           				break;
 .           		}
 .           	} else {
 .           		/* Iterate all plugins */
15 ( 0.00%)  		for(iter = lub_list__get_head(this->plugins);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 .           			iter; iter = lub_list_node__get_next(iter)) {
 9 ( 0.00%)  			plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
28 ( 0.00%)  			if ((sym = clish_plugin_get_sym(plugin, cmdn, type)))
722 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
561 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym (2x)
 .           				break;
 .           		}
 .           	}
24 ( 0.00%)  	lub_string_free(str);
540 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (6x)
 .           
 .           	return sym;
 .           }
 .           
 .           /*--------------------------------------------------------- */
 .           /* Find symbol by name in the list of unresolved symbols */
 .           clish_sym_t *clish_shell_find_sym(clish_shell_t *this, const char *name, int type)
28 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_sym_t *sym;
 .           
 .           	/* Iterate elements */
31 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
853 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 8 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
900 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		int res;
20 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
877 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
32 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
639 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
84 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (4x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (3x)
19 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           			return sym;
 3 ( 0.00%)  		if (res > 0) /* No chance to find name */
 .           			break;
 .           	}
 .           
 3 ( 0.00%)  	return NULL;
28 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Add symbol to the table of unresolved symbols */
 .           clish_sym_t *clish_shell_add_sym(clish_shell_t *this,
 .           	void *func, const char *name, int type)
20 ( 0.00%)  {
 .           	clish_sym_t *sym = NULL;
 .           
16 ( 0.00%)  	if (!name)
 .           		return NULL;
40 ( 0.00%)  	if ((sym = clish_shell_find_sym(this, name, type)))
3,327 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_find_sym (3x)
1,564 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		return sym;
24 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
1,164 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (3x)
 .           		return NULL;
19 ( 0.00%)  	lub_list_add(this->syms, sym);
1,697 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
604 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (2x)
 .           
 .           	return sym;
28 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_sym_t *clish_shell_add_unresolved_sym(clish_shell_t *this,
 .           	const char *name, int type)
 .           {
24 ( 0.00%)  	return clish_shell_add_sym(this, NULL, name, type);
4,893 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_sym (3x)
4,301 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Link one unresolved symbol.
 .            * sym - unresolved symbol
 .            * Returns 0 if the symbol was succesfully resolved
 .            */
 .           static int link_unresolved_sym(clish_shell_t *this, clish_sym_t *sym)
 .           {
 .           	clish_sym_t *plugin_sym;
 .           	char *sym_name = NULL;
 .           	int sym_type;
 .           
34 ( 0.00%)  	if (clish_sym__get_func(sym)) /* Don't relink non-null fn */
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (5x)
 .           		return 0;
30 ( 0.00%)  	sym_name = clish_sym__get_name(sym);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (6x)
24 ( 0.00%)  	sym_type = clish_sym__get_type(sym);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
 .           	plugin_sym = plugins_find_sym(this, sym_name, sym_type);
 .           	if (!plugin_sym) {
 .           		fprintf(stderr, "Error: Can't resolve symbol %s.\n",
 .           			sym_name);
 .           		return -1;
 .           	}
 .           	/* Copy symbol attributes */
34 ( 0.00%)  	clish_sym_clone(sym, plugin_sym);
623 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_clone (5x)
 .           
 .           	return 0;
 .           }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Link unresolved symbols */
 .           int clish_shell_link_plugins(clish_shell_t *this)
 8 ( 0.00%)  {
 .           	clish_sym_t *sym;
 .           	lub_list_node_t *iter;
 .           
 .           	/* Iterate elements */
18 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
24 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (6x)
24 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (6x)
 .           		if (link_unresolved_sym(this, sym) < 0)
 .           			return -1;
 .           	}
 .           
 1 ( 0.00%)  	return 0;
 8 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Get hook sym */
 .           clish_sym_t *clish_shell_get_hook(const clish_shell_t *this, int type)
 .           {
 2 ( 0.00%)  	return this->hooks[type];
 1 ( 0.00%)  }

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c
--------------------------------------------------------------------------------
Ir              

-- line 78 ----------------------------------------
     .            * @param node element to add
     .            * @return new first element of the list
     .            */
     .           static clish_xmlnode_t *clish_expat_list_push_back(clish_xmlnode_t *first, clish_xmlnode_t *node)
     .           {
     .           	clish_xmlnode_t *cur = first;
     .           	clish_xmlnode_t *prev = NULL;
     .           
25,493 ( 0.50%)  	while (cur) {
     .           		prev = cur;
 7,754 ( 0.15%)  		cur = cur->next;
     .           	}
     .           	if (prev) {
   906 ( 0.02%)  		prev->next = node;
     .           		return first;
     .           	}
     .           	return node;
     .           }
     .           
     .           /** Generic add_attr() function
     .            *
     .            * @param first first attribute in the attribute list
-- line 99 ----------------------------------------
-- line 100 ----------------------------------------
     .            * @param n attribute name
     .            * @param v attribute value
     .            * @return the new first attribute in the attribute list
     .            */
     .           static clish_xmlnode_t *clish_expat_add_attr(clish_xmlnode_t *first, const char *n, const char *v)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   868 ( 0.02%)  	node = malloc(sizeof(clish_xmlnode_t));
43,906 ( 0.86%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (217x)
   434 ( 0.01%)  	if (!node)
     .           		return first;
     .           
   868 ( 0.02%)  	node->name = strdup(n);
50,081 ( 0.98%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   868 ( 0.02%)  	node->content = strdup(v);
54,052 ( 1.06%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   217 ( 0.00%)  	node->children = NULL;
   217 ( 0.00%)  	node->attributes = NULL;
   217 ( 0.00%)  	node->next = NULL;
   217 ( 0.00%)  	node->type = CLISH_XMLNODE_ATTR;
   217 ( 0.00%)  	node->depth = 0;
     .           
     .           	return clish_expat_list_push_back(first, node);
     .           }
     .           
     .           /** Run through an expat attribute list, and create a DOM-like attribute list
     .            *
     .            * @param node parent node
     .            * @param attr NULL-terminated attribute liste
-- line 126 ----------------------------------------
-- line 127 ----------------------------------------
     .            *
     .            * Each attribute uses two slots in the expat attribute list. The first one is
     .            * used to store the name, the second one is used to store the value.
     .            */
     .           static void clish_expat_add_attrlist(clish_xmlnode_t *node, const char **attr)
     .           {
     .           	int i;
     .           
 1,173 ( 0.02%)  	for (i = 0; attr[i]; i += 2) {
   434 ( 0.01%)  		node->attributes = clish_expat_add_attr(node->attributes,
     .           			attr[i], attr[i+1]);
     .           	}
     .           }
     .           
     .           /** Generic make_node() function
     .            *
     .            * @param parent XML parent node
     .            * @param type XML node type
-- line 144 ----------------------------------------
-- line 147 ----------------------------------------
     .            * @param attr attribute list
     .            * @return a new node or NULL on error
     .            */
     .           static clish_xmlnode_t *clish_expat_make_node(clish_xmlnode_t *parent,
     .           					      clish_xmlnodetype_e type,
     .           					      const char *n,
     .           					      const char *v,
     .           					      const char **attr)
 7,428 ( 0.15%)  {
     .           	clish_xmlnode_t *node;
     .           
 2,476 ( 0.05%)  	node = malloc(sizeof(clish_xmlnode_t));
122,625 ( 2.41%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (619x)
 1,238 ( 0.02%)  	if (!node)
     .           		return NULL;
 2,770 ( 0.05%)  	node->name = n ? strdup(n) : NULL;
18,520 ( 0.36%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (98x)
 4,039 ( 0.08%)  	node->content = v ? strdup(v) : NULL;
127,644 ( 2.51%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (521x)
   619 ( 0.01%)  	node->children = NULL;
   619 ( 0.01%)  	node->attributes = NULL;
   619 ( 0.01%)  	node->next = NULL;
 1,238 ( 0.02%)  	node->parent = parent;
 3,085 ( 0.06%)  	node->doc = parent ? parent->doc : NULL;
 2,446 ( 0.05%)  	node->depth = parent ? parent->depth + 1 : 0;
   619 ( 0.01%)  	node->type = type;
     .           
 1,238 ( 0.02%)  	if (attr)
     .           		clish_expat_add_attrlist(node, attr);
     .           
   152 ( 0.00%)  	if (parent)
 2,436 ( 0.05%)  		parent->children = clish_expat_list_push_back(parent->children, node);
     .           
     .           	return node;
 5,571 ( 0.11%)  }
     .           
     .           /** Add a new XML root
     .            *
     .            * @param doc XML document
     .            * @param el root node name
     .            * @param attr expat attribute list
     .            * @return a new root element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_root(clish_xmldoc_t *doc, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   314 ( 0.01%)  	node = clish_expat_make_node(NULL, CLISH_XMLNODE_ELM, el, NULL, attr);
25,689 ( 0.50%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (10x)
    20 ( 0.00%)  	if (!node)
     .           		return doc->root;
     .           
    30 ( 0.00%)  	doc->root = clish_expat_list_push_back(doc->root, node);
     .           
     .           	return node;
     .           }
     .           
     .           /** Add a new XML element as a child
     .            *
     .            * @param cur parent XML element
     .            * @param el element name
     .            * @param attr expat attribute list
     .            * @return a new XMl element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_child(clish_xmlnode_t *cur, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   176 ( 0.00%)  	node = clish_expat_make_node(cur, CLISH_XMLNODE_ELM, el, NULL, attr);
176,525 ( 3.47%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (88x)
   176 ( 0.00%)  	if (!node)
     .           		return cur;
     .           
     .           	return node;
     .           }
     .           
     .           /** Expat handler: element content
     .            *
     .            * @param data user data
     .            * @param s content (not nul-termainated)
     .            * @param len content length
     .            */
     .           static void clish_expat_chardata_handler(void *data, const char *s, int len)
 2,605 ( 0.05%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
 2,605 ( 0.05%)  	if (doc->current) {
 2,605 ( 0.05%)  		char *content = malloc(len + 1);
67,724 ( 1.33%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (521x)
 2,609 ( 0.05%)  		strncpy(content, s, len);
18,137 ( 0.36%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (520x)
 1,541 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   521 ( 0.01%)  		content[len] = '\0';
     .           
 3,126 ( 0.06%)  		clish_expat_make_node(doc->current, CLISH_XMLNODE_TEXT, NULL, content, NULL);
291,048 ( 5.72%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (521x)
     .           		/*
     .           		 * the previous call is a bit too generic, and strdup() content
     .           		 * so we need to free out own version of content.
     .           		 */
 1,567 ( 0.03%)  		free(content);
45,760 ( 0.90%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (520x)
 1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           	}
 2,605 ( 0.05%)  }
     .           
     .           /** Expat handler: start XML element
     .            *
     .            * @param data user data
     .            * @param el element name (nul-terminated)
     .            * @param attr expat attribute list
     .            */
     .           static void clish_expat_element_start(void *data, const char *el, const char **attr)
   490 ( 0.01%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (!doc->current) {
     .           		doc->current = clish_expat_add_root(doc, el, attr);
     .           	} else {
    98 ( 0.00%)  		doc->current = clish_expat_add_child(doc->current, el, attr);
     .           	}
   392 ( 0.01%)  }
     .           
     .           /** Expat handler: end XML element
     .            *
     .            * @param data user data
     .            * @param el element name
     .            */
     .           static void clish_expat_element_end(void *data, const char *el)
     .           {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (doc->current) {
   294 ( 0.01%)  		doc->current = doc->current->parent;
     .           	}
     .           
     .           	el = el; /* Happy compiler */
     .           }
     .           
     .           /** Free a node, its children and its attributes
     .            *
     .            * @param node node to free
     .            */
     .           static void clish_expat_free_node(clish_xmlnode_t *cur)
 3,344 ( 0.07%)  {
     .           	clish_xmlnode_t *node;
     .           	clish_xmlnode_t *first;
     .           
 2,584 ( 0.05%)  	if (cur->attributes) {
     .           		first = cur->attributes;
   651 ( 0.01%)  		while (first) {
     .           			node = first;
   217 ( 0.00%)  			first = first->next;
   217 ( 0.00%)  			clish_expat_free_node(node);
 8,729 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (30x)
     .           		}
     .           	}
 2,569 ( 0.05%)  	if (cur->children) {
     .           		first = cur->children;
 1,827 ( 0.04%)  		while (first) {
     .           			node = first;
   609 ( 0.01%)  			first = first->next;
   609 ( 0.01%)  			clish_expat_free_node(node);
179,286 ( 3.52%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (174x)
     .           		}
     .           	}
 2,508 ( 0.05%)  	if (cur->name)
   630 ( 0.01%)  		free(cur->name);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.05%)  	if (cur->content)
 1,476 ( 0.03%)  		free(cur->content);
65,002 ( 1.28%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (738x)
 2,508 ( 0.05%)  	free(cur);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.05%)  }
     .           
     .           /*
     .            * Public interface
     .            */
     .           
     .           int clish_xmldoc_start(void)
     .           {
     .           	return 0;
-- line 313 ----------------------------------------
-- line 314 ----------------------------------------
     .           }
     .           
     .           int clish_xmldoc_stop(void)
     .           {
     .           	return 0;
     .           }
     .           
     .           clish_xmldoc_t *clish_xmldoc_read(const char *filename)
    70 ( 0.00%)  {
     .           	clish_xmldoc_t *doc;
     .           	struct stat sb;
     .           	int fd;
     .           	char *buffer;
     .           	XML_Parser parser;
     .           	int rb;
     .           
    54 ( 0.00%)  	doc = malloc(sizeof(clish_xmldoc_t));
 1,728 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,269 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc (9x)
    20 ( 0.00%)  	if (!doc)
     .           		return NULL;
     .           	memset(doc, 0, sizeof(clish_xmldoc_t));
    44 ( 0.00%)  	doc->filename = strdup(filename);
 1,751 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,935 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (9x)
    44 ( 0.00%)  	parser = XML_ParserCreate(NULL);
 2,156 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
95,702 ( 1.88%)  => ???:XML_ParserCreate (9x)
    20 ( 0.00%)  	if (!parser)
     .           		goto error_parser_create;
    44 ( 0.00%)  	XML_SetUserData(parser, doc);
   949 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    54 ( 0.00%)  => ???:XML_SetUserData (9x)
    44 ( 0.00%)  	XML_SetCharacterDataHandler(parser, clish_expat_chardata_handler);
 1,060 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    18 ( 0.00%)  => ???:XML_SetCharacterDataHandler (9x)
    54 ( 0.00%)  	XML_SetElementHandler(parser,
 1,011 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    27 ( 0.00%)  => ???:XML_SetElementHandler (9x)
     .           		clish_expat_element_start,
     .           		clish_expat_element_end);
     .           
    64 ( 0.00%)  	fd = open(filename, O_RDONLY);
 1,430 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:open (9x)
    20 ( 0.00%)  	if (fd < 0)
     .           		goto error_open;
     .           	fstat(fd, &sb);
    50 ( 0.00%)  	buffer = malloc(sb.st_size+1);
 2,926 ( 0.06%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (10x)
    54 ( 0.00%)  	rb = read(fd, buffer, sb.st_size);
 1,446 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (9x)
    20 ( 0.00%)  	if (rb < 0) {
     .           		close(fd);
     .           		goto error_parse;
     .           	}
    20 ( 0.00%)  	buffer[sb.st_size] = 0;
    34 ( 0.00%)  	close(fd);
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:close (9x)
     .           
    84 ( 0.00%)  	if (!XML_Parse(parser, buffer, sb.st_size, 1))
1,305,655 (25.64%)  => ???:XML_Parse (9x)
112,859 ( 2.22%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           		goto error_parse;
     .           
    34 ( 0.00%)  	XML_ParserFree(parser);
 6,192 ( 0.12%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
46,686 ( 0.92%)  => ???:XML_ParserFree (9x)
    30 ( 0.00%)  	free(buffer);
 1,344 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           
     .           	return doc;
     .           
     .           error_parse:
     .           	free(buffer);
     .           
     .           error_open:
     .           	XML_ParserFree(parser);
     .           
     .           error_parser_create:
     .           	clish_xmldoc_release(doc);
     .           
     .           	return NULL;
    80 ( 0.00%)  }
     .           
     .           void clish_xmldoc_release(clish_xmldoc_t *doc)
    20 ( 0.00%)  {
    20 ( 0.00%)  	if (doc) {
     .           		clish_xmlnode_t *node;
    70 ( 0.00%)  		while (doc->root) {
     .           			node = doc->root;
    20 ( 0.00%)  			doc->root = node->next;
    10 ( 0.00%)  			clish_expat_free_node(node);
191,055 ( 3.75%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node (10x)
     .           		}
    30 ( 0.00%)  		if (doc->filename)
    20 ( 0.00%)  			free(doc->filename);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
    30 ( 0.00%)  		free(doc);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           	}
    10 ( 0.00%)  }
     .           
     .           int clish_xmldoc_is_valid(clish_xmldoc_t *doc)
     .           {
    53 ( 0.00%)  	return doc && doc->root;
    12 ( 0.00%)  }
     .           
     .           int clish_xmldoc_error_caps(clish_xmldoc_t *doc)
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return CLISH_XMLERR_NOCAPS;
     .           }
     .           
-- line 403 ----------------------------------------
-- line 419 ----------------------------------------
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return "";
     .           }
     .           
     .           int clish_xmlnode_get_type(clish_xmlnode_t *node)
     .           {
 1,281 ( 0.03%)  	if (node)
   427 ( 0.01%)  		return node->type;
     .           	return CLISH_XMLNODE_UNKNOWN;
   427 ( 0.01%)  }
     .           
     .           clish_xmlnode_t *clish_xmldoc_get_root(clish_xmldoc_t *doc)
     .           {
    20 ( 0.00%)  	if (doc)
    20 ( 0.00%)  		return doc->root;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_parent(clish_xmlnode_t *node)
     .           {
    80 ( 0.00%)  	if (node)
    80 ( 0.00%)  		return node->parent;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_next_child(clish_xmlnode_t *parent,
     .           					  clish_xmlnode_t *curchild)
     .           {
   956 ( 0.02%)  	if (curchild)
   834 ( 0.02%)  		return curchild->next;
   122 ( 0.00%)  	if (parent)
   122 ( 0.00%)  		return parent->children;
     .           	return NULL;
     .           }
     .           
     .           char *clish_xmlnode_fetch_attr(clish_xmlnode_t *node,
     .           			       const char *attrname)
 2,648 ( 0.05%)  {
 1,324 ( 0.03%)  	if (node) {
   662 ( 0.01%)  		clish_xmlnode_t *n = node->attributes;
 4,292 ( 0.08%)  		while (n) {
 9,924 ( 0.19%)  			if (strcmp(n->name, attrname) == 0)
32,888 ( 0.65%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (1,654x)
   187 ( 0.00%)  				return n->content;
 1,467 ( 0.03%)  			n = n->next;
     .           		}
     .           	}
   475 ( 0.01%)  	return NULL;
 2,648 ( 0.05%)  }
     .           
     .           int clish_xmlnode_get_content(clish_xmlnode_t *node, char *content,
     .           			      unsigned int *contentlen)
   182 ( 0.00%)  {
     .           	unsigned int minlen = 1;
     .           
   208 ( 0.00%)  	if (node && content && contentlen) {
    26 ( 0.00%)  		clish_xmlnode_t *children = node->children;
   505 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   576 ( 0.01%)  				minlen += strlen(children->content);
 5,114 ( 0.10%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (192x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    52 ( 0.00%)  		if (minlen >= *contentlen) {
     .           			*contentlen = minlen + 1;
     .           			return -E2BIG;
     .           		}
     .           		children = node->children;
    52 ( 0.00%)  		*content = 0;
   407 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   580 ( 0.01%)  				strcat(content, children->content);
29,395 ( 0.58%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned (191x)
 1,492 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    26 ( 0.00%)  		return 0;
     .           	}
     .           
     .           	return -EINVAL;
   156 ( 0.00%)  }
     .           
     .           int clish_xmlnode_get_name(clish_xmlnode_t *node, char *name,
     .           	unsigned int *namelen)
   552 ( 0.01%)  {
 1,104 ( 0.02%)  	if (node && name && namelen) {
 1,108 ( 0.02%)  		if (strlen(node->name) >= *namelen) {
 2,192 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (137x)
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			*namelen = strlen(node->name) + 1;
     .           			return -E2BIG;
     .           		}
   828 ( 0.02%)  		snprintf(name, *namelen, "%s", node->name);
72,205 ( 1.42%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (138x)
   414 ( 0.01%)  		name[*namelen - 1] = '\0';
   138 ( 0.00%)  		return 0;
     .           	}
     .           	return -EINVAL;
   552 ( 0.01%)  }
     .           
     .           void clish_xmlnode_print(clish_xmlnode_t *node, FILE *out)
     .           {
     .           	if (node) {
     .           		int i;
     .           		clish_xmlnode_t *a;
     .           		for (i=0; i<node->depth; ++i) {
     .           			fprintf(out, "  ");
-- line 520 ----------------------------------------
-- line 525 ----------------------------------------
     .           			fprintf(out, " %s='%s'", a->name, a->content);
     .           			a = a->next;
     .           		}
     .           		fprintf(out, ">...");
     .           	}
     .           }
     .           
     .           void clish_xml_release(void *p)
   661 ( 0.01%)  {
     .           	p = p; /* Happy compiler */
     .           	/* nothing to release */
     .           }
     .           
     .           #endif /* HAVE_LIB_EXPAT */
     .           

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 11 ----------------------------------------
  .           #include <string.h>
  .           #include <assert.h>
  .           #include <limits.h>
  .           #include <stdio.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
 51 ( 0.00%)  static char *clish_ptype_select__get_name(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 38 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
829 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
160 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (16x)
 51 ( 0.00%)  	if (arg) {
 68 ( 0.00%)  		size_t name_len = strlen(arg);
326 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (17x)
 72 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
1,504 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
368 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (16x)
  .           		if (lbrk)
 68 ( 0.00%)  			name_len = (size_t) (lbrk - arg);
 72 ( 0.00%)  		result = lub_string_dupn(arg, name_len);
2,561 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,621 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (16x)
  .           	}
  .           	return result;
 51 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_select__get_value(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
  .           	const char *arg = lub_argv__get_arg(this->u.select.items, index);
  .           	if (arg) {
-- line 40 ----------------------------------------
-- line 53 ----------------------------------------
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype__set_range(clish_ptype_t * this)
  .           {
  .           	char tmp[80];
  .           
  .           	/* Now set up the range values */
 75 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* Nothing more to do */
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* Setup the integer range */
 12 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%d..%d",
  .           			this->u.integer.min, this->u.integer.max);
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		this->range = lub_string_dup(tmp);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* Setup the unsigned integer range */
 15 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%u..%u",
2,947 ( 0.06%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (3x)
  .           			(unsigned int)this->u.integer.min,
  .           			(unsigned int)this->u.integer.max);
  3 ( 0.00%)  		tmp[sizeof(tmp) - 1] = '\0';
 12 ( 0.00%)  		this->range = lub_string_dup(tmp);
933 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		/* Setup the selection values to the help text */
  .           		unsigned int i;
  .           
121 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items); i++) {
870 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 38 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (19x)
 68 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
8,840 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (17x)
  .           
 34 ( 0.00%)  			if (i > 0)
 73 ( 0.00%)  				lub_string_cat(&this->range, "/");
3,648 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (14x)
128 ( 0.00%)  			snprintf(tmp, sizeof(tmp), "%s", name);
8,790 ( 0.17%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (17x)
 17 ( 0.00%)  			tmp[sizeof(tmp) - 1] = '\0';
 68 ( 0.00%)  			lub_string_cat(&this->range, tmp);
5,400 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (17x)
 51 ( 0.00%)  			lub_string_free(name);
1,530 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (17x)
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_ptype_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_ptype_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
768 ( 0.02%)  	return strcmp(this->name, key);
7,237 ( 0.14%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (256x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_ptype_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 12 ( 0.00%)  {
  .           	const clish_ptype_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
 48 ( 0.00%)  	strcpy((char *)key, this->name);
265 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           size_t clish_ptype_bt_offset(void)
  .           {
  .           	return offsetof(clish_ptype_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *method_names[] = {
  .           	"regexp",
  .           	"integer",
  .           	"unsignedInteger",
  .           	"select"
  .           };
-- line 137 ----------------------------------------
-- line 143 ----------------------------------------
  .           
  .           	if (method >= max_method)
  .           		return NULL;
  .           	return method_names[method];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_method_e clish_ptype_method_resolve(const char *name)
 36 ( 0.00%)  {
 10 ( 0.00%)  	clish_ptype_method_e result = CLISH_PTYPE_REGEXP;
 22 ( 0.00%)  	if (NULL != name) {
  .           		unsigned i;
 36 ( 0.00%)  		for (i = 0; i < CLISH_PTYPE_SELECT + 1; i++) {
114 ( 0.00%)  			if (0 == strcmp(name, method_names[i])) {
413 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (18x)
  .           				result = (clish_ptype_method_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
  .           		assert(i <= CLISH_PTYPE_SELECT);
  .           	}
  .           	return result;
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *preprocess_names[] = {
  .           	"none",
  .           	"toupper",
  .           	"tolower"
  .           };
  .           
-- line 173 ----------------------------------------
-- line 176 ----------------------------------------
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	return preprocess_names[preprocess];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_preprocess_e clish_ptype_preprocess_resolve(const char *name)
  .           {
 22 ( 0.00%)  	clish_ptype_preprocess_e result = CLISH_PTYPE_NONE;
 22 ( 0.00%)  	if (name) {
  .           		unsigned i;
  .           		for (i = 0; i < CLISH_PTYPE_TOLOWER + 1; i++) {
  .           			if (0 == strcmp(name, preprocess_names[i])) {
  .           				result = (clish_ptype_preprocess_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
-- line 193 ----------------------------------------
-- line 372 ----------------------------------------
  .           	return (char *)result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_init(clish_ptype_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
  .           {
 26 ( 0.00%)  	assert(name);
 52 ( 0.00%)  	this->name = lub_string_dup(name);
2,932 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
 13 ( 0.00%)  	this->text = NULL;
 13 ( 0.00%)  	this->pattern = NULL;
 13 ( 0.00%)  	this->preprocess = preprocess;
 13 ( 0.00%)  	this->range = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 43 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
947 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (12x)
  .           
 26 ( 0.00%)  	if (pattern) {
  .           		/* set the pattern for this type */
 69 ( 0.00%)  		clish_ptype__set_pattern(this, pattern, method);
1,918,667 (37.68%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern (12x)
148,076 ( 2.91%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	} else {
  .           		/* The method is regexp by default */
  .           		this->method = CLISH_PTYPE_REGEXP;
  .           	}
  .           	
  .           	/* set the help text for this type */
 26 ( 0.00%)  	if (text)
 56 ( 0.00%)  		clish_ptype__set_text(this, text);
832 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,699 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_text (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_validate(const clish_ptype_t * this, const char *text)
  .           {
  .           	return clish_ptype_validate_or_translate(this, text, BOOL_FALSE);
  .           }
  .           
-- line 408 ----------------------------------------
-- line 411 ----------------------------------------
  .           {
  .           	return clish_ptype_validate_or_translate(this, text, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_ptype_new(const char *name,
  .           	const char *help, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
156 ( 0.00%)  {
 52 ( 0.00%)  	clish_ptype_t *this = malloc(sizeof(clish_ptype_t));
4,162 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (13x)
  .           
 26 ( 0.00%)  	if (this)
  .           		clish_ptype_init(this, name, help, pattern, method, preprocess);
  .           	return this;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_fini(clish_ptype_t * this)
  .           {
  .           	if (this->pattern) {
  .           		switch (this->method) {
  .           		case CLISH_PTYPE_REGEXP:
  .           			regfree(&this->u.regexp);
-- line 433 ----------------------------------------
-- line 469 ----------------------------------------
  .           {
  .           	return (const char *)this->text;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_pattern(clish_ptype_t * this,
  .           			 const char *pattern, clish_ptype_method_e method)
 91 ( 0.00%)  {
 26 ( 0.00%)  	assert(NULL == this->pattern);
 13 ( 0.00%)  	this->method = method;
  .           
 74 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           	{
  .           		int result;
  .           
  .           		/* only the expression is allowed */
 39 ( 0.00%)  		lub_string_cat(&this->pattern, "^");
5,043 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,648 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (6x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, pattern);
3,484 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, "$");
1,814 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
  .           
  .           		/* compile the regular expression for later use */
 39 ( 0.00%)  		result = regcomp(&this->u.regexp, this->pattern,
1,847,778 (36.29%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp (6x)
141,777 ( 2.78%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			REG_NOSUB | REG_EXTENDED);
 14 ( 0.00%)  		assert(0 == result);
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* default the range to that of an integer */
  3 ( 0.00%)  		this->u.integer.min = INT_MIN;
  3 ( 0.00%)  		this->u.integer.max = INT_MAX;
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
726 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* now try and read the specified range */
 28 ( 0.00%)  		sscanf(this->pattern, "%d..%d",
2,835 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,758 ( 0.05%)  => /opt/build/glibc/glibc-2.24/stdio-common/isoc99_sscanf.c:__isoc99_sscanf (2x)
  .           			&this->u.integer.min, &this->u.integer.max);
  3 ( 0.00%)  		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* default the range to that of an unsigned integer */
  .           		this->u.integer.min = 0;
  .           		this->u.integer.max = (int)UINT_MAX;
  .           		this->pattern = lub_string_dup(pattern);
  .           		/* now try and read the specified range */
  .           		sscanf(this->pattern, "%u..%u",
  .           			(unsigned int *)&this->u.integer.min,
  .           			(unsigned int *)&this->u.integer.max);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
816 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* store a vector of item descriptors */
 29 ( 0.00%)  		this->u.select.items = lub_argv_new(this->pattern, 0);
15,931 ( 0.31%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,229 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (2x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	}
  .           	/* now set up the range details */
  .           	clish_ptype__set_range(this);
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype__set_text(clish_ptype_t * this, const char *text)
 13 ( 0.00%)  {
 39 ( 0.00%)  	assert(!this->text);
 52 ( 0.00%)  	this->text = lub_string_dup(text);
3,732 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
  .           
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_preprocess(clish_ptype_t * this,
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	assert(!this->preprocess);
  .           	this->preprocess = preprocess;
-- line 545 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/string/string.c
--------------------------------------------------------------------------------
Ir             

-- line 10 ----------------------------------------
    .           
    .           const char *lub_string_esc_default = "`|$<>&()#;\\\"!";
    .           const char *lub_string_esc_regex = "^$.*+[](){}";
    .           const char *lub_string_esc_quoted = "\\\"";
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_free(char *ptr)
    .           {
  144 ( 0.00%)  	free(ptr);
5,829 ( 0.11%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (69x)
1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_ndecode(const char *string, unsigned int len)
   68 ( 0.00%)  {
    .           	const char *s = string;
    .           	char *res, *p;
    .           	int esc = 0;
    .           
   34 ( 0.00%)  	if (!string)
    .           		return NULL;
    .           
    .           	/* Allocate enough memory for result */
   68 ( 0.00%)  	p = res = malloc(len + 1);
3,343 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (17x)
    .           
1,154 ( 0.02%)  	while (*s && (s < (string +len))) {
  396 ( 0.01%)  		if (!esc) {
  396 ( 0.01%)  			if ('\\' == *s)
  198 ( 0.00%)  				esc = 1;
    .           			else
    .           				*p = *s;
    .           		} else {
    .           /*			switch (*s) {
    .           			case 'r':
    .           			case 'n':
    .           				*p = '\n';
    .           				break;
    .           			case 't':
    .           				*p = '\t';
    .           				break;
    .           			default:
    .           				*p = *s;
    .           				break;
    .           			}
  198 ( 0.00%)  */			*p = *s;
    .           			esc = 0;
    .           		}
    .           		if (!esc)
  396 ( 0.01%)  			p++;
  198 ( 0.00%)  		s++;
    .           	}
   17 ( 0.00%)  	*p = '\0';
    .           
    .           	return res;
   68 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           inline char *lub_string_decode(const char *string)
    .           {
    .           	return lub_string_ndecode(string, strlen(string));
    .           }
    .           
    .           /*----------------------------------------------------------- */
-- line 71 ----------------------------------------
-- line 95 ----------------------------------------
    .           			break;
    .           		}
    .           	}
    .           	return result;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_catn(char **string, const char *text, size_t len)
  618 ( 0.01%)  {
  206 ( 0.00%)  	if (text) {
    .           		char *q;
  515 ( 0.01%)  		size_t length, initlen, textlen = strlen(text);
2,042 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (103x)
    .           
    .           		/* make sure the client cannot give us duff details */
  206 ( 0.00%)  		len = (len < textlen) ? len : textlen;
    .           
    .           		/* remember the size of the original string */
  661 ( 0.01%)  		initlen = *string ? strlen(*string) : 0;
2,150 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (73x)
    .           
    .           		/* account for '\0' */
  103 ( 0.00%)  		length = initlen + len + 1;
    .           
    .           		/* allocate the memory for the result */
  313 ( 0.01%)  		q = realloc(*string, length);
16,505 ( 0.32%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (102x)
1,846 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  206 ( 0.00%)  		if (NULL != q) {
  103 ( 0.00%)  			*string = q;
    .           			/* move to the end of the initial string */
  103 ( 0.00%)  			q += initlen;
    .           
2,372 ( 0.05%)  			while (len--) {
2,790 ( 0.05%)  				*q++ = *text++;
    .           			}
  103 ( 0.00%)  			*q = '\0';
    .           		}
    .           	}
  618 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_cat(char **string, const char *text)
  510 ( 0.01%)  {
  616 ( 0.01%)  	size_t len = text ? strlen(text) : 0;
1,456 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,992 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (101x)
  412 ( 0.01%)  	lub_string_catn(string, text, len);
29,347 ( 0.58%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn (101x)
2,759 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  306 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_dup(const char *string)
    .           {
  578 ( 0.01%)  	if (!string)
    .           		return NULL;
  520 ( 0.01%)  	return strdup(string);
60,895 ( 1.20%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (257x)
1,754 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   62 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_dupn(const char *string, unsigned int len)
   54 ( 0.00%)  {
    .           	char *res = NULL;
    .           
   72 ( 0.00%)  	if (!string)
    .           		return res;
   72 ( 0.00%)  	res = malloc(len + 1);
2,118 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (18x)
   94 ( 0.00%)  	strncpy(res, string, len);
1,579 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  496 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (17x)
   18 ( 0.00%)  	res[len] = '\0';
    .           
    .           	return res;
   90 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int lub_string_nocasecmp(const char *cs, const char *ct)
1,812 ( 0.04%)  {
    .           	int result = 0;
5,822 ( 0.11%)  	while ((0 == result) && *cs && *ct) {
    .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
    .           		 * MACRO implementation uses braces to prevent multiple increments
    .           		 * when called.
    .           		 */
3,444 ( 0.07%)  		int s = lub_ctype_tolower(*cs++);
7,557 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (687x)
2,407 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,440 ( 0.07%)  		int t = lub_ctype_tolower(*ct++);
7,568 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (688x)
    .           
    .           		result = s - t;
    .           	}
    .           	/*lint -e774 Boolean within 'if' always evealuates to True 
    .           	 * not the case because of tolower() evaluating to 0 under lint
    .           	 * (see above)
    .           	 */
    .           	if (0 == result) {
    .           		/* account for different string lengths */
   79 ( 0.00%)  		result = *cs - *ct;
    .           	}
    .           	return result;
1,510 ( 0.03%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_tolower(const char *str)
    .           {
    .           	char *tmp = strdup(str);
    .           	char *p = tmp;
    .           
    .           	while (*p) {
-- line 192 ----------------------------------------
-- line 269 ----------------------------------------
    .           		p1++;
    .           	}
    .           	return p2;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *lub_string_nextword(const char *string,
    .           	size_t *len, size_t *offset, size_t *quoted)
  320 ( 0.01%)  {
    .           	const char *word;
    .           
   40 ( 0.00%)  	*quoted = 0;
    .           
    .           	/* Find the start of a word (not including an opening quote) */
  564 ( 0.01%)  	while (*string && isspace(*string)) {
1,542 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   99 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (33x)
   34 ( 0.00%)  		string++;
   28 ( 0.00%)  		(*offset)++;
    .           	}
    .           	/* Is this the start of a quoted string ? */
  102 ( 0.00%)  	if (*string == '"') {
    .           		*quoted = 1;
    .           		string++;
    .           	}
    .           	word = string;
   80 ( 0.00%)  	*len = 0;
    .           
    .           	/* Find the end of the word */
  912 ( 0.02%)  	while (*string) {
  848 ( 0.02%)  		if (*string == '\\') {
    .           			string++;
    .           			(*len)++;
    .           			if (*string) {
    .           				(*len)++;
    .           				string++;
    .           			}
    .           			continue;
    .           		}
    .           		/* End of word */
3,392 ( 0.07%)  		if (!*quoted && isspace(*string))
1,272 ( 0.02%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (424x)
    .           			break;
  792 ( 0.02%)  		if (*string == '"') {
    .           			/* End of a quoted string */
    .           			*quoted = 2;
    .           			break;
    .           		}
  396 ( 0.01%)  		(*len)++;
  792 ( 0.02%)  		string++;
    .           	}
    .           
    .           	return word;
  280 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned int lub_string_wordcount(const char *line)
   15 ( 0.00%)  {
    .           	const char *word;
    3 ( 0.00%)  	unsigned int result = 0;
    6 ( 0.00%)  	size_t len = 0, offset = 0;
    .           	size_t quoted;
    .           
   71 ( 0.00%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
  682 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (2x)
2,674 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  		*word || quoted;
  102 ( 0.00%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
4,042 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (17x)
    .           		/* account for the terminating quotation mark */
   88 ( 0.00%)  		len += quoted ? quoted - 1 : 0;
   17 ( 0.00%)  		result++;
    .           	}
    .           
    .           	return result;
   21 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c
--------------------------------------------------------------------------------
Ir             

-- line 73 ----------------------------------------
    .            */
    .           const char *default_path = "/etc/clish;~/.clish";
    .           
    .           static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent);
    .           
    .           /*-------------------------------------------------------- */
    .           int clish_shell_load_scheme(clish_shell_t *this, const char *xml_path, const char *xslt_path)
    8 ( 0.00%)  {
    .           	const char *path = xml_path;
    .           	char *buffer;
    .           	char *dirname;
    .           	char *saveptr = NULL;
    .           	int res = -1;
    .           	clish_xmldoc_t *doc = NULL;
    .           	DIR *dir;
    .           
-- line 89 ----------------------------------------
-- line 99 ----------------------------------------
    .           			return -1;
    .           		}
    .           	}
    .           #else
    .           	xslt_path = xslt_path; /* Happy compiler */
    .           #endif
    .           
    .           	/* Use the default path */
    2 ( 0.00%)  	if (!path)
    .           		path = default_path;
    9 ( 0.00%)  	buffer = lub_system_tilde_expand(path);
5,312 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Loop though each directory */
    .           	for (dirname = strtok_r(buffer, ";", &saveptr);
    .           		dirname; dirname = strtok_r(NULL, ";", &saveptr)) {
    .           		struct dirent *entry;
    .           
    .           		/* Search this directory for any XML files */
    8 ( 0.00%)  		dir = opendir(dirname);
2,024 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    3 ( 0.00%)  		if (NULL == dir) {
    .           #ifdef DEBUG
    .           			tinyrl_printf(this->tinyrl,
    .           				"*** Failed to open '%s' directory\n",
    .           				dirname);
    .           #endif
    .           			continue;
    .           		}
   79 ( 0.00%)  		for (entry = readdir(dir); entry; entry = readdir(dir)) {
2,157 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  573 ( 0.01%)  => /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c:readdir (14x)
   88 ( 0.00%)  			const char *extension = strrchr(entry->d_name, '.');
1,506 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  401 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strrchr.S:rindex (13x)
   14 ( 0.00%)  			char *filename = NULL;
    .           			clish_xmlnode_t *root;
    .           			int r;
    .           
    .           			/* Check the filename */
  134 ( 0.00%)  			if (!extension || strcmp(".xml", extension))
    .           				continue;
    .           
    .           			/* Build the filename */
   41 ( 0.00%)  			lub_string_cat(&filename, dirname);
3,779 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, "/");
2,620 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, entry->d_name);
4,032 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
    .           
    .           #ifdef DEBUG
    .           			fprintf(stderr, "Parse XML-file: %s\n", filename);
    .           #endif
    .           			/* Load current XML file */
   44 ( 0.00%)  			doc = clish_xmldoc_read(filename);
1,456,349 (28.60%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read (9x)
134,640 ( 2.64%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  			if (!clish_xmldoc_is_valid(doc)) {
  659 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (9x)
   10 ( 0.00%)  				int errcaps = clish_xmldoc_error_caps(doc);
    .           				printf("Unable to open file '%s'", filename);
    .           				if ((errcaps & CLISH_XMLERR_LINE) == CLISH_XMLERR_LINE)
    .           					printf(", at line %d", clish_xmldoc_get_err_line(doc));
    .           				if ((errcaps & CLISH_XMLERR_COL) == CLISH_XMLERR_COL)
    .           					printf(", at column %d", clish_xmldoc_get_err_col(doc));
    .           				if ((errcaps & CLISH_XMLERR_DESC) == CLISH_XMLERR_DESC)
    .           					printf(", message is %s", clish_xmldoc_get_err_msg(doc));
    .           				printf("\n");
-- line 155 ----------------------------------------
-- line 171 ----------------------------------------
    .           				}
    .           				clish_xmldoc_release(doc);
    .           				doc = tmp;
    .           			}
    .           
    .           			if (!xslt_path && clish_xslt_is_valid(xslt))
    .           				clish_xslt_release(xslt);
    .           #endif
   24 ( 0.00%)  			root = clish_xmldoc_get_root(doc);
  673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_get_root (9x)
    .           			r = process_node(this, root, NULL);
   44 ( 0.00%)  			clish_xmldoc_release(doc);
179,070 ( 3.52%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release (9x)
14,628 ( 0.29%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           			/* Error message */
   30 ( 0.00%)  			if (r) {
    .           				fprintf(stderr, CLISH_XML_ERROR_STR"File %s\n",
    .           					filename);
    .           				lub_string_free(filename);
    .           				goto error;
    .           			}
   34 ( 0.00%)  			lub_string_free(filename);
2,402 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  810 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
    .           		}
    7 ( 0.00%)  		closedir(dir);
1,641 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           /* To don't free memory twice on cleanup */
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (!xslt_path)
    .           		xslt = NULL;
    .           #endif
    1 ( 0.00%)  	doc = NULL;
    .           	dir = NULL;
    1 ( 0.00%)  	res = 0; /* Success */
    .           error:
    3 ( 0.00%)  	lub_string_free(buffer);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    .           	if (dir)
    .           		closedir(dir);
    5 ( 0.00%)  	if (clish_xmldoc_is_valid(doc))
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (1x)
    .           		clish_xmldoc_release(doc);
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (clish_xslt_is_valid(xslt))
    .           		clish_xslt_release(xslt);
    .           #endif
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /*
    .            * ------------------------------------------------------
    .            * This function reads an element from the XML stream and processes it.
    .            * ------------------------------------------------------
    .            */
  980 ( 0.02%)  static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent)
    .           {
   98 ( 0.00%)  	int res = 0;
    .           
2,511 ( 0.05%)  	switch (clish_xmlnode_get_type(node)) {
2,342,797 (46.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 (30x)
  870 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type (174x)
    .           	case CLISH_XMLNODE_ELM: {
    .           			clish_xml_cb_t * cb;
    .           			char name[128];
   98 ( 0.00%)  			unsigned int namelen = sizeof(name);
  788 ( 0.02%)  			if (clish_xmlnode_get_name(node, name, &namelen) == 0) {
5,400 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (9x)
2,754 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,990 ( 0.04%)  				for (cb = &xml_elements[0]; cb->element; cb++) {
2,369 ( 0.05%)  					if (0 == strcmp(name, cb->element)) {
1,476 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  189 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (9x)
    .           #ifdef DEBUG
    .           						fprintf(stderr, "NODE:");
    .           						clish_xmlnode_print(node, stderr);
    .           						fprintf(stderr, "\n");
    .           #endif
    .           						/* process the elements at this level */
  490 ( 0.01%)  						res = cb->handler(shell, node, parent);
2,353,098 (46.21%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module (10x)
    .           
    .           						/* Error message */
  294 ( 0.01%)  						if (res) {
    .           							char *ename = clish_xmlnode_fetch_attr(node, "name");
    .           							char *eref = clish_xmlnode_fetch_attr(node, "ref");
    .           							char *ekey = clish_xmlnode_fetch_attr(node, "key");
    .           							char *efile = clish_xmlnode_fetch_attr(node, "file");
    .           							fprintf(stderr, CLISH_XML_ERROR_STR"Node %s", name);
    .           							if (ename)
    .           								fprintf(stderr, ", name=\"%s\"", ename);
    .           							if (eref)
-- line 252 ----------------------------------------
-- line 274 ----------------------------------------
    .           	case CLISH_XMLNODE_COMMENT:
    .           	case CLISH_XMLNODE_DECL:
    .           	case CLISH_XMLNODE_UNKNOWN:
    .           	default:
    .           		break;
    .           	}
    .           
    .           	return res;
  882 ( 0.02%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_children(clish_shell_t *shell,
    .           	clish_xmlnode_t *element, void *parent)
  549 ( 0.01%)  {
   61 ( 0.00%)  	clish_xmlnode_t *node = NULL;
    .           	int res;
    .           
3,350 ( 0.07%)  	while ((node = clish_xmlnode_next_child(element, node)) != NULL) {
  799 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  750 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child (183x)
    .           		/* Now deal with all the contained elements */
    .           		res = process_node(shell, node, parent);
  176 ( 0.00%)  		if (res)
    .           			return res;
    .           	}
    .           
   61 ( 0.00%)  	return 0;
  366 ( 0.01%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_clish_module(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   50 ( 0.00%)  {
    .           	/* Create the global view */
   30 ( 0.00%)  	if (!shell->global)
   11 ( 0.00%)  		shell->global = clish_shell_find_create_view(shell,
5,219 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			"__view_global", "");
    .           
    .           	parent = parent; /* Happy compiler */
    .           
   30 ( 0.00%)  	return process_children(shell, element, shell->global);
2,347,728 (46.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children (10x)
   30 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_view(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   45 ( 0.00%)  {
    .           	clish_view_t *view;
    .           	int res = -1;
    .           
   29 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  164 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (4x)
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  	char *prompt = clish_xmlnode_fetch_attr(element, "prompt");
  328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *depth = clish_xmlnode_fetch_attr(element, "depth");
  322 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *restore = clish_xmlnode_fetch_attr(element, "restore");
  340 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
  334 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
    .           
    .           	/* Check syntax */
   10 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
    .           
    .           	/* re-use a view if it already exists */
   30 ( 0.00%)  	view = clish_shell_find_create_view(shell, name, prompt);
6,372 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell_find_create_view (5x)
    .           
   10 ( 0.00%)  	if (depth && (lub_ctype_isdigit(*depth))) {
    .           		unsigned int res = 0;
    .           		lub_conv_atoui(depth, &res, 0);
    .           		clish_view__set_depth(view, res);
    .           	}
    .           
   10 ( 0.00%)  	if (restore) {
    .           		if (!lub_string_nocasecmp(restore, "depth"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_DEPTH);
    .           		else if (!lub_string_nocasecmp(restore, "view"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_VIEW);
    .           		else
    .           			clish_view__set_restore(view, CLISH_RESTORE_NONE);
    .           	}
    .           
   10 ( 0.00%)  	if (access)
    .           		clish_view__set_access(view, access);
    .           
    .           //process_view_end:
   25 ( 0.00%)  	res = process_children(shell, element, view);
294,166 ( 5.78%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (5x)
    .           error:
   15 ( 0.00%)  	clish_xml_release(name);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(prompt);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(depth);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(restore);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(access);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   45 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_ptype(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   99 ( 0.00%)  {
    .           	clish_ptype_method_e method;
    .           	clish_ptype_preprocess_e preprocess;
    .           	int res = -1;
    .           
   55 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  509 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,291 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *pattern = clish_xmlnode_fetch_attr(element, "pattern");
1,017 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *method_name = clish_xmlnode_fetch_attr(element, "method");
1,022 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *preprocess_name =	clish_xmlnode_fetch_attr(element, "preprocess");
1,321 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
    .           
    .           	/* Check syntax */
   22 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   22 ( 0.00%)  	if (!pattern) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("pattern"));
    .           		goto error;
    .           	}
    .           
   48 ( 0.00%)  	method = clish_ptype_method_resolve(method_name);
  705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  651 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_method_resolve (10x)
    .           
   48 ( 0.00%)  	preprocess = clish_ptype_preprocess_resolve(preprocess_name);
  737 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_preprocess_resolve (10x)
   77 ( 0.00%)  	clish_shell_find_create_ptype(shell,
1,797,666 (35.30%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (11x)
    .           		name, help, pattern, method, preprocess);
    .           
   11 ( 0.00%)  	res = 0;
    .           error:
   33 ( 0.00%)  	clish_xml_release(name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(help);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(pattern);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(method_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(preprocess_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   99 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_overview(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    8 ( 0.00%)  {
    1 ( 0.00%)  	char *content = NULL;
    2 ( 0.00%)  	unsigned int content_len = 2048;
    .           	int result;
    .           
    .           	/*
    .           	 * the code below faithfully assume that we'll be able fully store
    .           	 * the content of the node. If it's really, really big, we may have
    .           	 * an issue (but then, if it's that big, how the hell does it
    .           	 * already fits in allocated memory?)
    .           	 * Ergo, it -should- be safe.
    .           	 */
    .           	do {
    4 ( 0.00%)  		char *new = (char*)realloc(content, content_len);
1,810 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (1x)
    2 ( 0.00%)  		if (!new) {
    .           			if (content)
    .           				free(content);
    .           			return -1;
    .           		}
    .           		content = new;
    7 ( 0.00%)  		result = clish_xmlnode_get_content(element, content,
19,472 ( 0.38%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (1x)
    .           			&content_len);
    2 ( 0.00%)  	} while (result == -E2BIG);
    .           
    2 ( 0.00%)  	if (result == 0 && content) {
    .           		/* set the overview text for this view */
    2 ( 0.00%)  		assert(NULL == shell->overview);
    .           		/* store the overview */
    4 ( 0.00%)  		shell->overview = lub_string_dup(content);
  912 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    .           	}
    .           
    .           	if (content)
    3 ( 0.00%)  		free(content);
  133 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    1 ( 0.00%)  	return 0;
    7 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_command(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  260 ( 0.01%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	clish_command_t *old;
    .           	int res = -1;
    .           
  130 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,173 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
1,095 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,876 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
2,185 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
2,290 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *escape_chars = clish_xmlnode_fetch_attr(element, "escape_chars");
2,244 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_name = clish_xmlnode_fetch_attr(element, "args");
1,989 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_help = clish_xmlnode_fetch_attr(element, "args_help");
2,371 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
2,314 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
2,374 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *ref = clish_xmlnode_fetch_attr(element, "ref");
2,290 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
    .           
    .           	/* Check syntax */
   52 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   52 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
    .           
    .           	/* check this command doesn't already exist */
  134 ( 0.00%)  	old = clish_view_find_command(v, name, BOOL_FALSE);
  723 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,202 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (25x)
   52 ( 0.00%)  	if (old) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"Duplicate COMMAND name=\"%s\".\n", name);
    .           		goto error;
    .           	}
    .           
    .           	/* create a command */
  160 ( 0.00%)  	cmd = clish_view_new_command(v, name, help);
41,908 ( 0.82%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (25x)
4,334 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  108 ( 0.00%)  	clish_command__set_pview(cmd, v);
  679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_pview (25x)
    .           
    .           	/* Reference 'ref' field */
   78 ( 0.00%)  	if (ref) {
    .           		char *saveptr = NULL;
    .           		const char *delim = "@";
    .           		char *view_name = NULL;
    .           		char *cmdn = NULL;
    .           		char *str = lub_string_dup(ref);
    .           
    .           		cmdn = strtok_r(str, delim, &saveptr);
    .           		if (!cmdn) {
-- line 505 ----------------------------------------
-- line 509 ----------------------------------------
    .           		}
    .           		clish_command__set_alias(cmd, cmdn); /* alias name */
    .           		view_name = strtok_r(NULL, delim, &saveptr);
    .           		clish_command__set_alias_view(cmd, view_name);
    .           		lub_string_free(str);
    .           	}
    .           
    .           	/* define some specialist escape characters */
   78 ( 0.00%)  	if (escape_chars)
    8 ( 0.00%)  		clish_command__set_escape_chars(cmd, escape_chars);
  923 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   52 ( 0.00%)  	if (args_name) {
    .           		/* define a "rest of line" argument */
    .           		clish_param_t *param;
    .           
    .           		/* Check syntax */
    2 ( 0.00%)  		if (!args_help) {
    .           			fprintf(stderr, CLISH_XML_ERROR_ATTR("args_help"));
    .           			goto error;
    .           		}
    5 ( 0.00%)  		param = clish_param_new(args_name, args_help, "__ptype_ARGS");
  751 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (1x)
    8 ( 0.00%)  		clish_command__set_args(cmd, param);
  689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* define the view which this command changes to */
   78 ( 0.00%)  	if (view) {
    .           		/* reference the next view */
   36 ( 0.00%)  		clish_command__set_viewname(cmd, view);
1,802 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,747 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (7x)
    .           	}
    .           
    .           	/* define the view id which this command changes to */
   78 ( 0.00%)  	if (viewid)
   16 ( 0.00%)  		clish_command__set_viewid(cmd, viewid);
1,747 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  471 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewid (2x)
    .           
    .           	/* lock field */
   78 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
  108 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
  725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (25x)
    .           
    .           	/* interrupt field */
   78 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
  108 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
  719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (25x)
    .           
   78 ( 0.00%)  	if (access)
    8 ( 0.00%)  		clish_command__set_access(cmd, access);
  872 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           //process_command_end:
  130 ( 0.00%)  	res = process_children(shell, element, cmd);
368,358 ( 7.23%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (26x)
    .           error:
   78 ( 0.00%)  	clish_xml_release(access);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(view);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(viewid);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(escape_chars);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(lock);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(interrupt);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(ref);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
    .           
    .           	return res;
  234 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_startup(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   10 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	int res = -1;
    .           
    5 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
   70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
   73 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_shebang =
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		clish_xmlnode_fetch_attr(element, "default_shebang");
    5 ( 0.00%)  	char *timeout = clish_xmlnode_fetch_attr(element, "timeout");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_plugin = clish_xmlnode_fetch_attr(element,
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		"default_plugin");
    .           
    .           	/* Check syntax */
    2 ( 0.00%)  	if (!view) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("view"));
    .           		goto error;
    .           	}
    2 ( 0.00%)  	if (shell->startup) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP tag duplication.\n");
    .           		goto error;
    .           	}
    .           
    .           	/* create a command with NULL help */
    6 ( 0.00%)  	cmd = clish_view_new_command(v, "startup", NULL);
1,152 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (1x)
    4 ( 0.00%)  	clish_command__set_lock(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* reference the next view */
    4 ( 0.00%)  	clish_command__set_viewname(cmd, view);
  246 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (1x)
    .           
    .           	/* define the view id which this command changes to */
    3 ( 0.00%)  	if (viewid)
    .           		clish_command__set_viewid(cmd, viewid);
    .           
    3 ( 0.00%)  	if (default_shebang)
    .           		clish_shell__set_default_shebang(shell, default_shebang);
    .           
    3 ( 0.00%)  	if (timeout) {
    .           		unsigned int to = 0;
    .           		lub_conv_atoui(timeout, &to, 0);
    .           		clish_shell__set_timeout(shell, to);
    .           	}
    .           
    .           	/* lock field */
    2 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
    4 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* interrupt field */
    2 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
    4 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (1x)
    .           
    .           	/* If we need the default plugin */
    3 ( 0.00%)  	if (default_plugin && (0 == strcmp(default_plugin, "false")))
    .           		shell->default_plugin = BOOL_FALSE;
    .           
    .           	/* remember this command */
    1 ( 0.00%)  	shell->startup = cmd;
    .           
    5 ( 0.00%)  	res = process_children(shell, element, cmd);
6,108 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (1x)
    .           error:
    3 ( 0.00%)  	clish_xml_release(view);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(viewid);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(default_shebang);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(timeout);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(lock);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(interrupt);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_param(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  190 ( 0.00%)  {
    .           	clish_command_t *cmd = NULL;
   38 ( 0.00%)  	clish_param_t *p_param = NULL;
    .           	clish_xmlnode_t *pelement;
    .           	clish_param_t *param;
    .           	char *pname;
    .           	int res = -1;
    .           
  114 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  808 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,378 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *ptype = clish_xmlnode_fetch_attr(element, "ptype");
2,127 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *prefix = clish_xmlnode_fetch_attr(element, "prefix");
2,179 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *defval = clish_xmlnode_fetch_attr(element, "default");
2,199 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *mode = clish_xmlnode_fetch_attr(element, "mode");
1,874 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *optional = clish_xmlnode_fetch_attr(element, "optional");
1,874 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *order = clish_xmlnode_fetch_attr(element, "order");
1,874 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *value = clish_xmlnode_fetch_attr(element, "value");
2,246 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *hidden = clish_xmlnode_fetch_attr(element, "hidden");
2,045 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *test = clish_xmlnode_fetch_attr(element, "test");
2,246 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *completion = clish_xmlnode_fetch_attr(element, "completion");
2,270 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,180 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
    .           
    .           	/* The PARAM can be child of COMMAND or another PARAM */
   76 ( 0.00%)  	pelement = clish_xmlnode_parent(element);
   76 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (19x)
    .           	pname = clish_xmlnode_get_all_name(pelement);
  190 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "PARAM") == 0)
  969 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (19x)
    .           		p_param = (clish_param_t *)parent;
    .           	else
    .           		cmd = (clish_command_t *)parent;
    .           	if (pname)
   95 ( 0.00%)  		free(pname);
2,439 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (19x)
   38 ( 0.00%)  	if (!cmd && !p_param)
    .           		goto error;
    .           
    .           	/* Check syntax */
   95 ( 0.00%)  	if (cmd && (cmd == shell->startup)) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP can't contain PARAMs.\n");
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!ptype) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("ptype"));
    .           		goto error;
    .           	}
    .           
  118 ( 0.00%)  	param = clish_param_new(name, help, ptype);
22,318 ( 0.44%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (18x)
2,175 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* If prefix is set clish will emulate old optional
    .           	 * command syntax over newer optional command mechanism.
    .           	 * It will create nested PARAM.
    .           	 */
   38 ( 0.00%)  	if (prefix) {
    .           		const char *ptype_name = "__ptype_SUBCOMMAND";
    .           		clish_param_t *opt_param = NULL;
    5 ( 0.00%)  		char *str = NULL;
    .           		clish_ptype_t *tmp;
    .           
    .           		/* Create a ptype for prefix-named subcommand that
    .           		 * will contain the nested optional parameter. The
    .           		 * name of ptype is hardcoded. It's not good but
    .           		 * it's only the service ptype.
    .           		 */
   25 ( 0.00%)  		tmp = (clish_ptype_t *)lub_bintree_find(
2,321 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (5x)
    .           			&shell->ptype_tree, ptype_name);
   10 ( 0.00%)  		if (!tmp)
    8 ( 0.00%)  			tmp = clish_shell_find_create_ptype(shell,
137,591 ( 2.70%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (1x)
    .           				ptype_name, "Option", "[^\\\\]+",
    .           				CLISH_PTYPE_REGEXP, CLISH_PTYPE_NONE);
    2 ( 0.00%)  		assert(tmp);
   20 ( 0.00%)  		lub_string_cat(&str, "_prefix_");
1,896 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   20 ( 0.00%)  		lub_string_cat(&str, name);
1,336 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   30 ( 0.00%)  		opt_param = clish_param_new(str, help, ptype_name);
5,820 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (5x)
   15 ( 0.00%)  		lub_string_free(str);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   24 ( 0.00%)  		clish_param__set_mode(opt_param,
  657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_mode (4x)
    .           			CLISH_PARAM_SUBCOMMAND);
   24 ( 0.00%)  		clish_param__set_value(opt_param, prefix);
  826 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  820 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_value (4x)
   20 ( 0.00%)  		clish_param__set_optional(opt_param, BOOL_TRUE);
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (5x)
    .           
   15 ( 0.00%)  		if (test)
    .           			clish_param__set_test(opt_param, test);
    .           
    .           		/* Add the parameter to the command */
   10 ( 0.00%)  		if (cmd)
   20 ( 0.00%)  			clish_command_insert_param(cmd, opt_param);
  934 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (5x)
    .           		/* Add the parameter to the param */
   15 ( 0.00%)  		if (p_param)
    .           			clish_param_insert_param(p_param, opt_param);
    .           		/* Unset cmd and set parent param to opt_param */
    5 ( 0.00%)  		cmd = NULL;
    .           		p_param = opt_param;
    .           	}
    .           
   57 ( 0.00%)  	if (defval)
   24 ( 0.00%)  		clish_param__set_default(param, defval);
  918 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,009 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_default (4x)
    .           
   57 ( 0.00%)  	if (hidden && lub_string_nocasecmp(hidden, "true") == 0)
    .           		clish_param__set_hidden(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_hidden(param, BOOL_FALSE);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_hidden (18x)
    .           
   57 ( 0.00%)  	if (mode) {
    .           		if (lub_string_nocasecmp(mode, "switch") == 0) {
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_SWITCH);
    .           			/* Force hidden attribute */
    .           			clish_param__set_hidden(param, BOOL_TRUE);
    .           		} else if (lub_string_nocasecmp(mode, "subcommand") == 0)
   28 ( 0.00%)  			clish_param__set_mode(param,
    .           				CLISH_PARAM_SUBCOMMAND);
    .           		else
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_COMMON);
    .           	}
    .           
   57 ( 0.00%)  	if (optional && lub_string_nocasecmp(optional, "true") == 0)
    .           		clish_param__set_optional(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_optional(param, BOOL_FALSE);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (18x)
    .           
   57 ( 0.00%)  	if (order && lub_string_nocasecmp(order, "true") == 0)
    .           		clish_param__set_order(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_order(param, BOOL_FALSE);
  663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_order (18x)
    .           
   57 ( 0.00%)  	if (value) {
    .           		clish_param__set_value(param, value);
    .           		/* Force mode to subcommand */
    .           		clish_param__set_mode(param,
    .           			CLISH_PARAM_SUBCOMMAND);
    .           	}
    .           
   57 ( 0.00%)  	if (test && !prefix)
    .           		clish_param__set_test(param, test);
    .           
   57 ( 0.00%)  	if (completion)
    .           		clish_param__set_completion(param, completion);
    .           
   57 ( 0.00%)  	if (access)
    .           		clish_param__set_access(param, access);
    .           
    .           	/* Add the parameter to the command */
   38 ( 0.00%)  	if (cmd)
   60 ( 0.00%)  		clish_command_insert_param(cmd, param);
1,565 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,769 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (13x)
    .           
    .           	/* Add the parameter to the param */
   38 ( 0.00%)  	if (p_param)
   24 ( 0.00%)  		clish_param_insert_param(p_param, param);
  914 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,002 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_insert_param (4x)
    .           
   95 ( 0.00%)  	res = process_children(shell, element, param);
  570 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (19x)
    .           
    .           error:
   57 ( 0.00%)  	clish_xml_release(name);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(help);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(ptype);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(prefix);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(defval);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(mode);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(optional);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(order);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(value);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(hidden);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(test);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(completion);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(access);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
    .           
    .           	return res;
  171 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_action(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  210 ( 0.00%)  {
    .           	clish_action_t *action = NULL;
  126 ( 0.00%)  	char *builtin = clish_xmlnode_fetch_attr(element, "builtin");
  531 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
  105 ( 0.00%)  	char *shebang = clish_xmlnode_fetch_attr(element, "shebang");
  431 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
   88 ( 0.00%)  	clish_xmlnode_t *pelement = clish_xmlnode_parent(element);
  649 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   80 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (20x)
    .           	char *pname = clish_xmlnode_get_all_name(pelement);
    .           	char *text;
    .           	clish_sym_t *sym = NULL;
    .           
  172 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "VAR") == 0)
3,294 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,020 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (20x)
   21 ( 0.00%)  		action = clish_var__get_action((clish_var_t *)parent);
    .           	else
   67 ( 0.00%)  		action = clish_command__get_action((clish_command_t *)parent);
  703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (20x)
    .           
    .           	if (pname)
   63 ( 0.00%)  		free(pname);
2,733 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
    .           	text = clish_xmlnode_get_all_content(element);
    .           
   84 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   94 ( 0.00%)  		clish_action__set_script(action, text);
  984 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,915 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_script (17x)
    .           	}
    .           	if (text)
   63 ( 0.00%)  		free(text);
2,817 ( 0.06%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
   42 ( 0.00%)  	if (builtin)
   28 ( 0.00%)  		sym = clish_shell_add_unresolved_sym(shell, builtin,
5,051 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,908 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_unresolved_sym (3x)
    .           			CLISH_SYM_TYPE_ACTION);
    .           	else
   51 ( 0.00%)  		sym = shell->hooks[CLISH_SYM_TYPE_ACTION];
    .           
   67 ( 0.00%)  	clish_action__set_builtin(action, sym);
  695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_builtin (20x)
   42 ( 0.00%)  	if (shebang)
    .           		clish_action__set_shebang(action, shebang);
    .           
   67 ( 0.00%)  	clish_xml_release(builtin);
  622 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (20x)
   63 ( 0.00%)  	clish_xml_release(shebang);
   21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (21x)
    .           
    .           	return 0;
  189 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_detail(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   28 ( 0.00%)  {
    .           	clish_command_t *cmd = (clish_command_t *) parent;
    .           
    .           	/* read the following text element */
    .           	char *text = clish_xmlnode_get_all_content(element);
    .           
   16 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   24 ( 0.00%)  		clish_command__set_detail(cmd, text);
1,555 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_detail (3x)
1,223 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	if (text)
   12 ( 0.00%)  		free(text);
  534 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (4x)
    .           
    .           	shell = shell; /* Happy compiler */
    .           
    .           	return 0;
   28 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_namespace(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    .           {
    .           	clish_view_t *v = (clish_view_t *)parent;
    .           	clish_nspace_t *nspace = NULL;
    .           	int res = -1;
-- line 906 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/bin/clish.c
--------------------------------------------------------------------------------
Ir          

-- line 43 ----------------------------------------
 .           /* #define version(v) printf("%s\n", QUOTE(v)) */
 .           #define version(v) printf("%s\n", v)
 .           
 .           static void sighandler(int signo);
 .           static void help(int status, const char *argv0);
 .           
 .           /*--------------------------------------------------------- */
 .           int main(int argc, char **argv)
 9 ( 0.00%)  {
 .           	int running;
 .           	int result = -1;
 .           	clish_shell_t *shell = NULL;
 .           
 .           	/* Command line options */
 2 ( 0.00%)  	const char *socket_path = KONFD_SOCKET_PATH;
 1 ( 0.00%)  	bool_t lockless = BOOL_FALSE;
 1 ( 0.00%)  	bool_t stop_on_error = BOOL_FALSE;
 1 ( 0.00%)  	bool_t interactive = BOOL_TRUE;
 1 ( 0.00%)  	bool_t quiet = BOOL_FALSE;
 1 ( 0.00%)  	bool_t utf8 = BOOL_FALSE;
 1 ( 0.00%)  	bool_t bit8 = BOOL_FALSE;
 1 ( 0.00%)  	bool_t log = BOOL_FALSE;
 1 ( 0.00%)  	int log_facility = LOG_LOCAL0;
 1 ( 0.00%)  	bool_t dryrun = BOOL_FALSE;
 1 ( 0.00%)  	bool_t dryrun_config = BOOL_FALSE;
 8 ( 0.00%)  	const char *xml_path = getenv("CLISH_PATH");
1,913 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 4 ( 0.00%)  	const char *view = getenv("CLISH_VIEW");
380 ( 0.01%)  => /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv (1x)
 4 ( 0.00%)  	const char *viewid = getenv("CLISH_VIEWID");
380 ( 0.01%)  => /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv (1x)
 .           	const char *xslt_file = NULL;
 .           
 2 ( 0.00%)  	FILE *outfd = stdout;
 1 ( 0.00%)  	bool_t istimeout = BOOL_FALSE;
 1 ( 0.00%)  	unsigned int timeout = 0;
 1 ( 0.00%)  	bool_t cmd = BOOL_FALSE; /* -c option */
 .           	lub_list_t *cmds; /* Commands defined by -c */
 .           	lub_list_node_t *iter;
 2 ( 0.00%)  	const char *histfile = "~/.clish_history";
 .           	char *histfile_expanded = NULL;
 1 ( 0.00%)  	unsigned int histsize = 50;
 .           	clish_sym_t *sym = NULL;
 .           
 .           	/* Signal vars */
 .           	struct sigaction sigpipe_act;
 .           	sigset_t sigpipe_set;
 .           
 .           	static const char *shortopts = "hvs:ledx:w:i:bqu8oO:kt:c:f:z:p:";
 .           #ifdef HAVE_GETOPT_LONG
-- line 89 ----------------------------------------
-- line 109 ----------------------------------------
 .           		{"histfile",	1, NULL, 'f'},
 .           		{"histsize",	1, NULL, 'z'},
 .           		{"xslt",	1, NULL, 'p'},
 .           		{NULL,		0, NULL, 0}
 .           	};
 .           #endif
 .           
 .           	/* Ignore SIGPIPE */
 8 ( 0.00%)  	sigemptyset(&sigpipe_set);
1,626 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 8 ( 0.00%)  	sigaddset(&sigpipe_set, SIGPIPE);
1,589 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 1 ( 0.00%)  	sigpipe_act.sa_flags = 0;
32 ( 0.00%)  	sigpipe_act.sa_mask = sigpipe_set;
 2 ( 0.00%)  	sigpipe_act.sa_handler = &sighandler;
 9 ( 0.00%)  	sigaction(SIGPIPE, &sigpipe_act, NULL);
1,622 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           #if HAVE_LOCALE_H
 .           	/* Set current locale */
 8 ( 0.00%)  	setlocale(LC_ALL, "");
94,116 ( 1.85%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           #endif
 .           
 .           	/* Var initialization */
 8 ( 0.00%)  	cmds = lub_list_new(NULL);
2,408 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           	/* Parse command line options */
 .           	while(1) {
 .           		int opt;
 .           #ifdef HAVE_GETOPT_LONG
18 ( 0.00%)  		opt = getopt_long(argc, argv, shortopts, longopts, NULL);
2,245 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
109 ( 0.00%)  => /opt/build/glibc/glibc-2.24/posix/getopt1.c:getopt_long (1x)
 .           #else
 .           		opt = getopt(argc, argv, shortopts);
 .           #endif
 4 ( 0.00%)  		if (-1 == opt)
 .           			break;
 7 ( 0.00%)  		switch (opt) {
 .           		case 's':
 .           			socket_path = optarg;
 .           			break;
 .           		case 'l':
 .           			lockless = BOOL_TRUE;
 .           			break;
 .           		case 'e':
 .           			stop_on_error = BOOL_TRUE;
-- line 150 ----------------------------------------
-- line 160 ----------------------------------------
 .           			break;
 .           		case '8':
 .           			bit8 = BOOL_TRUE;
 .           			break;
 .           		case 'o':
 .           			log = BOOL_TRUE;
 .           			break;
 .           		case 'O':
 3 ( 0.00%)  			if (lub_log_facility(optarg, &log_facility)) {
 .           				fprintf(stderr, "Error: Illegal syslog facility %s.\n", optarg);
 .           				help(-1, argv[0]);
 .           				goto end;
 .           			}
 .           			break;
 .           		case 'd':
 .           			dryrun = BOOL_TRUE;
 .           			break;
 .           		case 'x':
 2 ( 0.00%)  			xml_path = optarg;
 1 ( 0.00%)  			break;
 .           		case 'w':
 .           			view = optarg;
 .           			break;
 .           		case 'i':
 .           			viewid = optarg;
 .           			break;
 .           		case 'k':
 .           			lockless = BOOL_TRUE;
 .           			dryrun = BOOL_TRUE;
 .           			dryrun_config = BOOL_TRUE;
 .           			break;
 .           		case 't':
 .           			istimeout = BOOL_TRUE;
 .           			timeout = 0;
 2 ( 0.00%)  			lub_conv_atoui(optarg, &timeout, 0);
 .           			break;
 .           		case 'c': {
 .           			char *str;
 .           			cmd = BOOL_TRUE;
 .           			quiet = BOOL_TRUE;
 .           			str = strdup(optarg);
 .           			lub_list_add(cmds, str);
 .           			}
-- line 202 ----------------------------------------
-- line 204 ----------------------------------------
 .           		case 'f':
 .           			if (!strcmp(optarg, "/dev/null"))
 .           				histfile = NULL;
 .           			else
 .           				histfile = optarg;
 .           			break;
 .           		case 'z': {
 .           			histsize = 0;
 2 ( 0.00%)  			lub_conv_atoui(optarg, &histsize, 0);
 .           			}
 .           			break;
 .           		case 'p':
 .           #ifdef HAVE_LIB_LIBXSLT
 .           			xslt_file = optarg;
 .           #else
 .           			fprintf(stderr, "Error: The klish was built without XSLT support.\n");
 .           			goto end;
-- line 220 ----------------------------------------
-- line 231 ----------------------------------------
 .           		default:
 .           			help(-1, argv[0]);
 .           			goto end;
 .           			break;
 .           		}
 .           	}
 .           
 .           	/* Validate command line options */
 4 ( 0.00%)  	if (utf8 && bit8) {
 .           		fprintf(stderr, "Error: The -u and -8 options can't be used together.\n");
 .           		goto end;
 .           	}
 .           
 .           	/* Create shell instance */
 2 ( 0.00%)  	if (quiet) {
 .           		FILE *tmpfd = NULL;
 .           		if ((tmpfd = fopen("/dev/null", "w")))
 .           			outfd = tmpfd;
 .           	}
10 ( 0.00%)  	shell = clish_shell_new(NULL, outfd, stop_on_error);
192,854 ( 3.79%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 2 ( 0.00%)  	if (!shell) {
 .           		fprintf(stderr, "Error: Can't run clish.\n");
 .           		goto end;
 .           	}
 .           	/* Load the XML files */
 6 ( 0.00%)  	clish_xmldoc_start();
702 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
11 ( 0.00%)  	if (clish_shell_load_scheme(shell, xml_path, xslt_file))
4,179,319 (82.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		goto end;
 .           	/* Set communication to the konfd */
 8 ( 0.00%)  	clish_shell__set_socket(shell, socket_path);
5,538 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	/* Set lockless mode */
 2 ( 0.00%)  	if (lockless)
 .           		clish_shell__set_lockfile(shell, NULL);
 .           	/* Set interactive mode */
 2 ( 0.00%)  	if (!interactive)
 .           		clish_shell__set_interactive(shell, interactive);
 .           	/* Set startup view */
 3 ( 0.00%)  	if (view)
 .           		clish_shell__set_startup_view(shell, view);
 .           	/* Set startup viewid */
 3 ( 0.00%)  	if (viewid)
 .           		clish_shell__set_startup_viewid(shell, viewid);
 .           	/* Set UTF-8 or 8-bit mode */
 4 ( 0.00%)  	if (utf8 || bit8)
 .           		clish_shell__set_utf8(shell, utf8);
 .           	else {
 .           #if HAVE_LANGINFO_CODESET
 .           		/* Autodetect encoding */
17 ( 0.00%)  		if (!strcmp(nl_langinfo(CODESET), "UTF-8"))
3,103 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 9 ( 0.00%)  			clish_shell__set_utf8(shell, BOOL_TRUE);
1,501 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           #else
 .           		/* The default is 8-bit if locale is not supported */
 .           		clish_shell__set_utf8(shell, BOOL_FALSE);
 .           #endif
 .           	}
 .           	/* Set logging */
 2 ( 0.00%)  	if (log) {
 .           		clish_shell__set_log(shell, log);
 .           		clish_shell__set_facility(shell, log_facility);
 .           	}
 .           	/* Set dry-run */
 2 ( 0.00%)  	if (dryrun)
 .           		clish_shell__set_dryrun(shell, dryrun);
 .           	/* Set idle timeout */
 2 ( 0.00%)  	if (istimeout)
 .           		clish_shell__set_timeout(shell, timeout);
 .           	/* Set history settings */
 8 ( 0.00%)  	clish_shell__stifle_history(shell, histsize);
2,399 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 3 ( 0.00%)  	if (histfile)
 8 ( 0.00%)  		histfile_expanded = lub_system_tilde_expand(histfile);
2,160 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 2 ( 0.00%)  	if (histfile_expanded)
 8 ( 0.00%)  		clish_shell__restore_history(shell, histfile_expanded);
33,763 ( 0.66%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	/* Load plugins, link aliases and check access rights */
 9 ( 0.00%)  	if (clish_shell_prepare(shell) < 0)
227,259 ( 4.46%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		goto end;
 .           	/* Dryrun config and log hooks */
 2 ( 0.00%)  	if (dryrun_config) {
 .           		if ((sym = clish_shell_get_hook(shell, CLISH_SYM_TYPE_CONFIG)))
 .           			clish_sym__set_permanent(sym, BOOL_FALSE);
 .           		if ((sym = clish_shell_get_hook(shell, CLISH_SYM_TYPE_LOG)))
 .           			clish_sym__set_permanent(sym, BOOL_FALSE);
 .           	}
 .           #ifdef DEBUG
 .           	clish_shell_dump(shell);
 .           #endif
 .           
 .           	/* Set source of command stream: files or interactive tty */
 3 ( 0.00%)  	if(optind < argc) {
 .           		int i;
 .           		/* Run the commands from the files */
 .           		for (i = argc - 1; i >= optind; i--)
 .           			clish_shell_push_file(shell, argv[i], stop_on_error);
 .           	} else {
 .           		/* The interactive shell */
15 ( 0.00%)  		int tmpfd = dup(fileno(stdin));
2,979 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 .           #ifdef FD_CLOEXEC
16 ( 0.00%)  		fcntl(tmpfd, F_SETFD, fcntl(tmpfd, F_GETFD) | FD_CLOEXEC);
1,522 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
22 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/sysv/linux/fcntl.c:fcntl (1x)
 .           #endif
18 ( 0.00%)  		clish_shell_push_fd(shell, fdopen(tmpfd, "r"), stop_on_error);
6,901 ( 0.14%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 .           	}
 .           
 .           	/* Execute startup */
 7 ( 0.00%)  	running = clish_shell_startup(shell);
49,240 ( 0.97%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	if (running) {
 .           		fprintf(stderr, "Error: Can't startup clish.\n");
 .           		goto end;
 .           	}
 .           
 .           	if (cmd) {
 .           		/* Iterate cmds */
 .           		for(iter = lub_list__get_head(cmds);
-- line 341 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c
--------------------------------------------------------------------------------
Ir           

-- line 23 ----------------------------------------
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_compare(const void *first, const void *second)
  .           {
  .           	const clish_sym_t *f = (const clish_sym_t *)first;
  .           	const clish_sym_t *s = (const clish_sym_t *)second;
  .           
180 ( 0.00%)  	return strcmp(f->name, s->name);
1,281 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (45x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_sym_new(const char *name, void *func, int type)
168 ( 0.00%)  {
  .           	clish_sym_t *this;
  .           
 84 ( 0.00%)  	this = malloc(sizeof(*this));
4,345 ( 0.09%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (21x)
 88 ( 0.00%)  	this->name = lub_string_dup(name);
3,827 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (20x)
782 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 21 ( 0.00%)  	this->func = func;
 21 ( 0.00%)  	this->type = type;
 21 ( 0.00%)  	this->api = CLISH_SYM_API_SIMPLE;
 21 ( 0.00%)  	this->permanent = BOOL_FALSE;
  .           
  .           	return this;
147 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym_free(clish_sym_t *this)
  .           {
  .           	if (!this)
  .           		return;
  .           	lub_string_free(this->name);
  .           	free(this);
-- line 55 ----------------------------------------
-- line 59 ----------------------------------------
  .           void clish_sym__set_func(clish_sym_t *this, void *func)
  .           {
  .           	this->func = func;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void *clish_sym__get_func(clish_sym_t *this)
  .           {
  8 ( 0.00%)  	return this->func;
  8 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_permanent(clish_sym_t *this, bool_t permanent)
  .           {
 26 ( 0.00%)  	this->permanent = permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_sym__get_permanent(clish_sym_t *this)
  .           {
  .           	return this->permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_name(clish_sym_t *this, const char *name)
 15 ( 0.00%)  {
  9 ( 0.00%)  	lub_string_free(this->name);
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 12 ( 0.00%)  	this->name = lub_string_dup(name);
885 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 12 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_sym__get_name(clish_sym_t *this)
  .           {
 46 ( 0.00%)  	return this->name;
 46 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_plugin(clish_sym_t *this, clish_plugin_t *plugin)
  .           {
 26 ( 0.00%)  	this->plugin = plugin;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_sym__get_plugin(clish_sym_t *this)
  .           {
  .           	return this->plugin;
  .           }
  .           
-- line 106 ----------------------------------------
-- line 108 ----------------------------------------
  .           void clish_sym__set_type(clish_sym_t *this, int type)
  .           {
  .           	this->type = type;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym__get_type(const clish_sym_t *this)
  .           {
 13 ( 0.00%)  	return this->type;
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_api(clish_sym_t *this, clish_sym_api_e api)
  .           {
  2 ( 0.00%)  	this->api = api;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_api_e clish_sym__get_api(const clish_sym_t *this)
  .           {
  2 ( 0.00%)  	return this->api;
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_clone(clish_sym_t *dst, clish_sym_t *src)
  .           {
  .           	char *name;
  .           
 24 ( 0.00%)  	if (!dst || !src)
  .           		return -1;
  6 ( 0.00%)  	name = dst->name;
 60 ( 0.00%)  	*dst = *src;
  6 ( 0.00%)  	dst->name = name;
  .           
 12 ( 0.00%)  	return 0;
  .           }
  .           
  .           /**********************************************************
  .            * PLUGIN functions                                       *
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_plugin_new(const char *name)
  4 ( 0.00%)  {
  .           	clish_plugin_t *this;
  .           
  4 ( 0.00%)  	this = malloc(sizeof(*this));
114 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           
  4 ( 0.00%)  	this->name = lub_string_dup(name);
383 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  1 ( 0.00%)  	this->conf = NULL;
  1 ( 0.00%)  	this->alias = NULL;
  1 ( 0.00%)  	this->file = NULL;
  1 ( 0.00%)  	this->builtin_flag = BOOL_FALSE; /* The plugin is shared object by default */
  1 ( 0.00%)  	this->dlhan = NULL;
  .           	/* Initialise the list of symbols */
  4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
175 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
  .           	/* Constructor and destructor */
  1 ( 0.00%)  	this->init = NULL;
  1 ( 0.00%)  	this->fini = NULL;
  .           	/* Flags */
  1 ( 0.00%)  	this->rtld_global = BOOL_FALSE; /* The dlopen() use RTLD_LOCAL by default */
  .           
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_free(clish_plugin_t *this, void *userdata)
  .           {
  .           	lub_list_node_t *iter;
  .           
  .           	if (!this)
  .           		return;
-- line 179 ----------------------------------------
-- line 201 ----------------------------------------
  .           		dlclose(this->dlhan);
  .           #endif
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_generic(clish_plugin_t *this,
  .           	void *func, const char *name, int type, bool_t permanent)
 39 ( 0.00%)  {
  .           	clish_sym_t *sym;
  .           
 91 ( 0.00%)  	if (!name || !func)
  .           		return NULL;
  .           
 91 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
6,439 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (13x)
  .           		return NULL;
 56 ( 0.00%)  	clish_sym__set_plugin(sym, this);
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_plugin (12x)
 56 ( 0.00%)  	clish_sym__set_permanent(sym, permanent);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_permanent (12x)
 52 ( 0.00%)  	lub_list_add(this->syms, sym);
4,289 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (13x)
  .           
  .           	return sym;
 65 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_sym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
  .           	return clish_plugin_add_generic(this, func,
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_psym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
 36 ( 0.00%)  	return clish_plugin_add_generic(this, func,
8,152 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (9x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_osym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  1 ( 0.00%)  {
  .           	clish_sym_t *s;
  .           
  7 ( 0.00%)  	if (!(s = clish_plugin_add_generic(this, func,
951 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (1x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE)))
  .           		return s;
  8 ( 0.00%)  	clish_sym__set_api(s, CLISH_SYM_API_STDOUT);
631 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return s;
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_posym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  .           {
  .           	clish_sym_t *s;
  .           
-- line 261 ----------------------------------------
-- line 274 ----------------------------------------
  .           	return clish_plugin_add_generic(this, func,
  .           		name, type, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_phook(clish_plugin_t *this,
  .           	void *func, const char *name, int type)
  .           {
 13 ( 0.00%)  	return clish_plugin_add_generic(this, func,
2,509 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,633 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (2x)
  .           		name, type, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_add_fini(clish_plugin_t *this,
  .           	clish_plugin_fini_t *fini)
  .           {
  .           	this->fini = fini;
-- line 290 ----------------------------------------
-- line 306 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           clish_plugin_init_t * clish_plugin_get_init(clish_plugin_t *this)
  .           {
  .           	return this->init;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_get_sym(clish_plugin_t *this, const char *name, int type)
 42 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           	clish_sym_t *sym;
  .           
  .           	/* Iterate elements */
 86 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (6x)
100 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (25x)
  .           		int res;
124 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (31x)
217 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
676 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (31x)
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (31x)
104 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
  .           			return sym;
 25 ( 0.00%)  		if (res > 0) /* No chances to find name */
  .           			break;
  .           	}
  .           
  .           	return NULL;
 42 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static int clish_plugin_load_shared(clish_plugin_t *this)
  .           {
  .           #ifdef HAVE_DLFCN_H
  1 ( 0.00%)  	char *file = NULL; /* Plugin so file name */
  1 ( 0.00%)  	char *init_name = NULL; /* Init function name */
  .           	int flag = RTLD_NOW;
  .           
  3 ( 0.00%)  	if (this->file) {
  .           		file = lub_string_dup(this->file);
  .           	} else {
  4 ( 0.00%)  		lub_string_cat(&file, "clish_plugin_");
410 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  		lub_string_cat(&file, this->name);
264 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  5 ( 0.00%)  		lub_string_cat(&file, ".so");
272 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  .           	}
  .           
  .           	/* Open dynamic library */
  7 ( 0.00%)  	if (clish_plugin__get_rtld_global(this))
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  		flag |= RTLD_GLOBAL;
  .           	else
  .           		flag |= RTLD_LOCAL;
  8 ( 0.00%)  	this->dlhan = dlopen(file, flag);
133,888 ( 2.63%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(file);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  2 ( 0.00%)  	if (!this->dlhan) {
  .           		fprintf(stderr, "Error: Can't open plugin \"%s\": %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	/* Get plugin init function */
  5 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_PREFIX);
295 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, this->name);
264 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_SUFFIX);
282 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  9 ( 0.00%)  	this->init = (clish_plugin_init_t *)dlsym(this->dlhan, init_name);
4,005 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(init_name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	if (!this->init) {
  .           		fprintf(stderr, "Error: Can't get plugin \"%s\" init function: %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	return 0;
  .           #else /* HAVE_DLFCN_H */
  .           	/* We have no any dl functions. */
-- line 376 ----------------------------------------
-- line 377 ----------------------------------------
  .           	fprintf(stderr, "Error: Can't get plugin \"%s\" init function.\n",
  .           		this->name);
  .           	return -1;
  .           #endif /* HAVE_DLFCN_H */
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_plugin_load(clish_plugin_t *this, void *userdata)
  4 ( 0.00%)  {
  .           	int res;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return -1;
  5 ( 0.00%)  	assert(this->name);
  .           
  .           	/* Builtin plugins already have init function. */
  3 ( 0.00%)  	if (!this->builtin_flag) {
  .           		if (clish_plugin_load_shared(this) < 0)
  .           			return -1;
  .           	}
  .           	if (!this->init) {
  .           		fprintf(stderr, "Error: PLUGIN %s has no init function\n",
  .           			this->name);
  .           		return -1;
  .           	}
  .           	/* Execute init function */
  6 ( 0.00%)  	if ((res = this->init(userdata, this)))
14,017 ( 0.28%)  => /home/ykuznetsov/klish-2.1.3/plugins/clish/builtin_init.c:clish_plugin_clish_init (1x)
  .           		fprintf(stderr, "Error: Plugin %s init retcode: %d\n",
  .           			this->name, res);
  .           
  .           	return res;
  6 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_name(const clish_plugin_t *this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 416 ----------------------------------------
-- line 424 ----------------------------------------
  .           char *clish_plugin__get_alias(const clish_plugin_t *this)
  .           {
  .           	return this->alias;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_pubname(const clish_plugin_t *this)
  .           {
 12 ( 0.00%)  	return (this->alias ? this->alias : this->name);
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin__set_file(clish_plugin_t *this, const char *file)
  .           {
  .           	lub_string_free(this->file);
  .           	this->file = lub_string_dup(file);
  .           }
  .           
-- line 441 ----------------------------------------
-- line 474 ----------------------------------------
  .           void clish_plugin__set_rtld_global(clish_plugin_t *this, bool_t rtld_global)
  .           {
  .           	this->rtld_global = rtld_global;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_plugin__get_rtld_global(const clish_plugin_t *this)
  .           {
  1 ( 0.00%)  	return this->rtld_global;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c
--------------------------------------------------------------------------------
Ir          

-- line 13 ----------------------------------------
 .           #include "lub/string.h"
 .           #include "lub/db.h"
 .           #include "lub/list.h"
 .           #include "clish/plugin.h"
 .           
 .           /*-------------------------------------------------------- */
 .           static void clish_shell_init(clish_shell_t * this,
 .           	FILE * istream, FILE * ostream, bool_t stop_on_error)
10 ( 0.00%)  {
 .           	clish_ptype_t *tmp_ptype = NULL;
 .           	int i;
 .           	char template[PATH_MAX];
 .           
 .           	/* initialise the tree of views */
16 ( 0.00%)  	lub_bintree_init(&this->view_tree,
1,603 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 .           		clish_view_bt_offset(),
 .           		clish_view_bt_compare, clish_view_bt_getkey);
 .           
 .           	/* initialise the tree of ptypes */
12 ( 0.00%)  	lub_bintree_init(&this->ptype_tree,
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (1x)
 .           		clish_ptype_bt_offset(),
 .           		clish_ptype_bt_compare, clish_ptype_bt_getkey);
 .           
 .           	/* initialise the tree of vars */
12 ( 0.00%)  	lub_bintree_init(&this->var_tree,
639 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (1x)
 .           		clish_var_bt_offset(),
 .           		clish_var_bt_compare, clish_var_bt_getkey);
 .           
 .           	/* Initialize plugin list */
 8 ( 0.00%)  	this->plugins = lub_list_new(NULL);
956 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 .           	/* Initialise the list of unresolved (yet) symbols */
 4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
210 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
 .           
 .           	/* Create userdata storage */
 4 ( 0.00%)  	this->udata = lub_list_new(clish_udata_compare);
210 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
 3 ( 0.00%)  	assert(this->udata);
 .           
 .           	/* Hooks */
10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
34 ( 0.00%)  		this->hooks[i] = clish_sym_new(NULL, NULL, i);
1,607 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
912 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (4x)
10 ( 0.00%)  		this->hooks_use[i] = BOOL_FALSE;
 .           	}
 .           
 .           	/* Set up defaults */
 1 ( 0.00%)  	this->global = NULL;
 1 ( 0.00%)  	this->startup = NULL;
 1 ( 0.00%)  	this->idle_timeout = 0; /* No idle timeout by default */
 1 ( 0.00%)  	this->wdog = NULL;
 1 ( 0.00%)  	this->wdog_timeout = 0; /* No watchdog timeout by default */
 1 ( 0.00%)  	this->wdog_active = BOOL_FALSE;
 1 ( 0.00%)  	this->state = SHELL_STATE_INITIALISING;
 1 ( 0.00%)  	this->overview = NULL;
10 ( 0.00%)  	this->tinyrl = clish_shell_tinyrl_new(istream, ostream, 0);
15,691 ( 0.31%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1 ( 0.00%)  	this->current_file = NULL;
 1 ( 0.00%)  	this->pwdv = NULL;
 1 ( 0.00%)  	this->pwdc = 0;
 1 ( 0.00%)  	this->depth = -1; /* Current depth is undefined */
 1 ( 0.00%)  	this->client = NULL;
 4 ( 0.00%)  	this->lockfile = lub_string_dup(CLISH_LOCK_PATH);
1,762 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 4 ( 0.00%)  	this->default_shebang = lub_string_dup("/bin/sh");
245 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 1 ( 0.00%)  	this->interactive = BOOL_TRUE; /* The interactive shell by default. */
 1 ( 0.00%)  	this->log = BOOL_FALSE; /* Disable logging by default */
 1 ( 0.00%)  	this->log_facility = LOG_LOCAL0; /* LOCAL0 for compatibility */
 1 ( 0.00%)  	this->dryrun = BOOL_FALSE; /* Disable dry-run by default */
14 ( 0.00%)  	this->user = lub_db_getpwuid(getuid()); /* Get user information */
6,629 ( 0.13%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 1 ( 0.00%)  	this->default_plugin = BOOL_TRUE; /* Load default plugin by default */
 .           
 .           	/* Create template (string) for FIFO name generation */
18 ( 0.00%)  	snprintf(template, sizeof(template),
4,010 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 .           		"%s/klish.fifo.%u.XXXXXX", "/tmp", getpid());
 1 ( 0.00%)  	template[sizeof(template) - 1] = '\0';
 4 ( 0.00%)  	this->fifo_temp = lub_string_dup(template);
263 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 .           
 .           	/* Create internal ptypes and params */
 .           	/* Args */
12 ( 0.00%)  	tmp_ptype = clish_shell_find_create_ptype(this,
154,923 ( 3.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		"__ptype_ARGS",
 .           		"Arguments", "[^\\\\]+",
 .           		CLISH_PTYPE_REGEXP,
 .           		CLISH_PTYPE_NONE);
 2 ( 0.00%)  	assert(tmp_ptype);
 .           
 .           	/* Push non-NULL istream */
 2 ( 0.00%)  	if (istream)
 .           		clish_shell_push_fd(this, istream, stop_on_error);
 7 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           static void clish_shell_fini(clish_shell_t *this)
 .           {
 .           	clish_view_t *view;
 .           	clish_ptype_t *ptype;
 .           	clish_var_t *var;
 .           	unsigned i;
-- line 107 ----------------------------------------
-- line 193 ----------------------------------------
 .           		lub_string_free(this->fifo_temp);
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           clish_shell_t *clish_shell_new(
 .           	FILE * istream,
 .           	FILE * ostream,
 .           	bool_t stop_on_error)
 8 ( 0.00%)  {
 8 ( 0.00%)  	clish_shell_t *this = malloc(sizeof(clish_shell_t));
1,637 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 2 ( 0.00%)  	if (this)
 5 ( 0.00%)  		clish_shell_init(this, istream, ostream, stop_on_error);
190,544 ( 3.74%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_init (1x)
 .           
 .           	return this;
 7 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           void clish_shell_delete(clish_shell_t *this)
 .           {
 .           	clish_shell_fini(this);
 .           	free(this);
 .           }
 .           
-- line 216 ----------------------------------------

--------------------------------------------------------------------------------
The following files chosen for auto-annotation could not be found:
--------------------------------------------------------------------------------
  /opt/build/glibc/glibc-2.24/csu/../csu/libc-start.c
  /opt/build/glibc/glibc-2.24/dlfcn/dlerror.c
  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-sysdep.c
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h
  /opt/build/glibc/glibc-2.24/elf/dl-addr.c
  /opt/build/glibc/glibc-2.24/elf/dl-deps.c
  /opt/build/glibc/glibc-2.24/elf/dl-error.c
  /opt/build/glibc/glibc-2.24/elf/dl-load.c
  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c
  /opt/build/glibc/glibc-2.24/elf/dl-misc.c
  /opt/build/glibc/glibc-2.24/elf/dl-open.c
  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c
  /opt/build/glibc/glibc-2.24/elf/rtld.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c
  /opt/build/glibc/glibc-2.24/intl/../intl/l10nflist.c
  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c
  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c
  /opt/build/glibc/glibc-2.24/locale/findlocale.c
  /opt/build/glibc/glibc-2.24/locale/loadarchive.c
  /opt/build/glibc/glibc-2.24/locale/setlocale.c
  /opt/build/glibc/glibc-2.24/malloc/arena.c
  /opt/build/glibc/glibc-2.24/malloc/hooks.c
  /opt/build/glibc/glibc-2.24/malloc/malloc.c
  /opt/build/glibc/glibc-2.24/posix/regcomp.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.c
  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/strdup.c
  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c
  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c
  /usr/include/x86_64-linux-gnu/bits/string2.h

--------------------------------------------------------------------------------
Ir               
--------------------------------------------------------------------------------
242,508 ( 4.76%)  events annotated

../easy/inc.sh [1|2]
