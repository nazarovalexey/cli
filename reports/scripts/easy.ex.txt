--------------------------------------------------------------------------------
Profile data file '../klish-2.1.3/reports/easy/callgrind.out.1992' (creator: callgrind-3.13.0)
--------------------------------------------------------------------------------
I1 cache: 
D1 cache: 
LL cache: 
Timerange: Basic block 0 - 1215845
Trigger: Program termination
Profiled target:  ./clish -x ../../xml-examples/clish (PID 1992, part 1)
Events recorded:  Ir
Events shown:     Ir
Event sort order: Ir
Thresholds:       99
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir                 
--------------------------------------------------------------------------------
5,399,537 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir                file:function
--------------------------------------------------------------------------------
621,806 (11.52%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
417,920 ( 7.74%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c:__gconv_transform_utf8_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
382,308 ( 7.08%)  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c:mbrtowc [/lib/x86_64-linux-gnu/libc-2.24.so]
324,792 ( 6.02%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_free [/lib/x86_64-linux-gnu/libc-2.24.so]
255,809 ( 4.74%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:do_lookup_x [/lib/x86_64-linux-gnu/ld-2.24.so]
220,753 ( 4.09%)  ???:0x0000000000013e60 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
189,670 ( 3.51%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
172,879 ( 3.20%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c:__gconv_transform_utf8_internal
154,616 ( 2.86%)  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c:btowc [/lib/x86_64-linux-gnu/libc-2.24.so]
146,017 ( 2.70%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:_dl_lookup_symbol_x [/lib/x86_64-linux-gnu/ld-2.24.so]
145,295 ( 2.69%)  ???:0x000000000000f290 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
134,017 ( 2.48%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
130,916 ( 2.42%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap_iter.isra.24 [/lib/x86_64-linux-gnu/libc-2.24.so]
111,156 ( 2.06%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:strcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
108,808 ( 2.02%)  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c:__collseq_table_lookup [/lib/x86_64-linux-gnu/libc-2.24.so]
 94,058 ( 1.74%)  ???:0x000000000001a2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 90,480 ( 1.68%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_consolidate [/lib/x86_64-linux-gnu/libc-2.24.so]
 81,152 ( 1.50%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:free [/lib/x86_64-linux-gnu/libc-2.24.so]
 76,434 ( 1.42%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 58,880 ( 1.09%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 56,567 ( 1.05%)  /opt/build/glibc/glibc-2.24/elf/dl-addr.c:_dl_addr [/lib/x86_64-linux-gnu/libc-2.24.so]
 49,302 ( 0.91%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen [/lib/x86_64-linux-gnu/ld-2.24.so]
 40,675 ( 0.75%)  ???:0x0000000000005130 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 40,047 ( 0.74%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h:_dl_relocate_object
 38,748 ( 0.72%)  /opt/build/glibc/glibc-2.24/elf/dl-misc.c:_dl_name_match_p [/lib/x86_64-linux-gnu/ld-2.24.so]
 35,760 ( 0.66%)  /opt/build/glibc/glibc-2.24/elf/dl-profstub.c:_dl_mcount_wrapper_check [/lib/x86_64-linux-gnu/libc-2.24.so]
 35,519 ( 0.66%)  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
 32,428 ( 0.60%)  ???:0x0000000000008190 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 31,032 ( 0.57%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:check_match [/lib/x86_64-linux-gnu/ld-2.24.so]
 29,924 ( 0.55%)  ???:0x000000000000f970 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 27,898 ( 0.52%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c:_dl_fixup [/lib/x86_64-linux-gnu/ld-2.24.so]
 27,384 ( 0.51%)  ???:0x000000000000e2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 26,939 ( 0.50%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
 24,027 ( 0.44%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 23,627 ( 0.44%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 23,485 ( 0.43%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 23,095 ( 0.43%)  /opt/build/glibc/glibc-2.24/string/strdup.c:strdup [/lib/x86_64-linux-gnu/ld-2.24.so]
 23,035 ( 0.43%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 21,352 ( 0.40%)  ???:0x0000000000007580 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 20,406 ( 0.38%)  /opt/build/glibc/glibc-2.24/elf/do-rel.h:_dl_relocate_object
 20,197 ( 0.37%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
 19,472 ( 0.36%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 18,243 ( 0.34%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_chardata_handler [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 17,920 ( 0.33%)  /opt/build/glibc/glibc-2.24/iconv/gconv_simple.c:__gconv_btwoc_ascii [/lib/x86_64-linux-gnu/libc-2.24.so]
 17,608 ( 0.33%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
 16,934 ( 0.31%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_default_xsputn [/lib/x86_64-linux-gnu/libc-2.24.so]
 16,100 ( 0.30%)  /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 16,077 ( 0.30%)  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h:mbrtowc
 15,768 ( 0.29%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter [/lib/x86_64-linux-gnu/libc-2.24.so]
 15,170 ( 0.28%)  ???:0x0000000000004c30 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 15,162 ( 0.28%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_dfa_add_node [/lib/x86_64-linux-gnu/libc-2.24.so]
 14,870 ( 0.28%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_acquire_state_context [/lib/x86_64-linux-gnu/libc-2.24.so]
 14,791 ( 0.27%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 13,971 ( 0.26%)  ???:0x000000000000edb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 13,120 ( 0.24%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:postorder [/lib/x86_64-linux-gnu/libc-2.24.so]
 13,034 ( 0.24%)  /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv [/lib/x86_64-linux-gnu/libc-2.24.so]
 12,672 ( 0.23%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:free_dfa_content [/lib/x86_64-linux-gnu/libc-2.24.so]
 12,600 ( 0.23%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:preorder [/lib/x86_64-linux-gnu/libc-2.24.so]
 12,581 ( 0.23%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_merge [/lib/x86_64-linux-gnu/libc-2.24.so]
 11,469 ( 0.21%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
 11,167 ( 0.21%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:create_token_tree.isra.13 [/lib/x86_64-linux-gnu/libc-2.24.so]
 10,752 ( 0.20%)  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h:btowc
 10,566 ( 0.20%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 10,439 ( 0.19%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object [/lib/x86_64-linux-gnu/ld-2.24.so]
 10,039 ( 0.19%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  9,988 ( 0.18%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  9,688 ( 0.18%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
  9,680 ( 0.18%)  ???:0x00000000000045c0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  9,491 ( 0.18%)  ???:0x0000000000005570 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  9,095 ( 0.17%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:_dl_map_object_deps [/lib/x86_64-linux-gnu/ld-2.24.so]
  8,419 ( 0.16%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_insert [/lib/x86_64-linux-gnu/libc-2.24.so]
  8,380 ( 0.16%)  ???:0x00000000000196e0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  7,672 ( 0.14%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_file_overflow@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,533 ( 0.14%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:build_wcs_buffer [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,511 ( 0.14%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  7,260 ( 0.13%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,260 ( 0.13%)  ???:align_limit_to_full_utf8_characters [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  7,120 ( 0.13%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strchr.S:strchrnul [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,099 ( 0.13%)  /opt/build/glibc/glibc-2.24/locale/loadlocale.c:_nl_intern_locale_data [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,996 ( 0.13%)  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c:vsnprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,966 ( 0.13%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:peek_token [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,548 ( 0.12%)  ???:0x0000000000005810 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  6,398 ( 0.12%)  ???:0x0000000000004cb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  6,036 ( 0.11%)  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,016 ( 0.11%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,844 ( 0.11%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:lower_subexps [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,670 ( 0.11%)  /opt/build/glibc/glibc-2.24/libio/strops.c:_IO_str_init_static_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,611 ( 0.10%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_first [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,405 ( 0.10%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcat_sse2_unaligned
  5,299 ( 0.10%)  ???:XML_ParserFree [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  5,074 ( 0.09%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,910 ( 0.09%)  ???:0x0000000000019f90 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  4,696 ( 0.09%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,488 ( 0.08%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,486 ( 0.08%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_param [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,367 ( 0.08%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,189 ( 0.08%)  ???:0x00000000000050d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  4,049 ( 0.07%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_next [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,870 ( 0.07%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_remove_at.part.4 [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,812 ( 0.07%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object_from_fd [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,749 ( 0.07%)  /opt/build/glibc/glibc-2.24/elf/dl-version.c:_dl_check_map_versions [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,722 ( 0.07%)  /opt/build/glibc/glibc-2.24/stdio-common/../libio/libioP.h:vfprintf
  3,663 ( 0.07%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_no_init [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,639 ( 0.07%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_old_init [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,586 ( 0.07%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_ndecode [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  3,519 ( 0.07%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:__GI_strcmp [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,483 ( 0.06%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S:__GI_memset [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,415 ( 0.06%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:peek_token_bracket [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,111 ( 0.06%)  /opt/build/glibc/glibc-2.24/elf/dl-cache.c:_dl_cache_libcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,046 ( 0.06%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_setb [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,962 ( 0.05%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:register_state [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,747 ( 0.05%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_tree [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,717 ( 0.05%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:open_path [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,686 ( 0.05%)  /opt/build/glibc/glibc-2.24/elf/get-dynamic-info.h:_dl_map_object_from_fd
  2,656 ( 0.05%)  ???:0x0000000000004a50 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  2,548 ( 0.05%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,544 ( 0.05%)  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,512 ( 0.05%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,462 ( 0.05%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,362 ( 0.04%)  /opt/build/glibc/glibc-2.24/stdio-common/vfscanf.c:_IO_vfscanf [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,233 ( 0.04%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:open_verify.constprop.8 [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,222 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  2,194 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node_closure [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,183 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:optimize_subexps [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,176 ( 0.04%)  /opt/build/glibc/glibc-2.24/elf/dl-version.c:match_symbol [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,135 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,126 ( 0.04%)  /opt/build/glibc/glibc-2.24/libio/libioP.h:_IO_default_xsputn
  2,077 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_bracket_element.isra.11.constprop.32 [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,034 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,030 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_element_start [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,028 ( 0.04%)  /opt/build/glibc/glibc-2.24/elf/dl-object.c:_dl_new_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,941 ( 0.04%)  ???:0x0000000005686930 [???]
  1,937 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,893 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:free_token [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,862 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node_closure'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,810 ( 0.03%)  ???:0x000000000000f930 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,799 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,782 ( 0.03%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h:do_lookup_x
  1,772 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,760 ( 0.03%)  ???:0x0000000000013740 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,705 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_compile_internal
  1,693 ( 0.03%)  /opt/build/glibc/glibc-2.24/elf/dl-fini.c:_dl_sort_fini [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,692 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,676 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c:lub_bintree_remove [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,665 ( 0.03%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:index [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,642 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_action [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,638 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_init_copy [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,584 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:calc_eclosure_iter
  1,580 ( 0.03%)  ???:0x00000000000094a0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,556 ( 0.03%)  ???:0x0000000005686938 [???]
  1,551 ( 0.03%)  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,550 ( 0.03%)  ???:0x0000000000019b10 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,420 ( 0.03%)  /opt/build/glibc/glibc-2.24/stdio-common/printf-parse.h:vfprintf
  1,390 ( 0.03%)  ???:XML_ParserCreate_MM [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,386 ( 0.03%)  ???:0x0000000000014cd0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,366 ( 0.03%)  /opt/build/glibc/glibc-2.24/signal/../sysdeps/unix/sysv/linux/x86_64/sigaction.c:__libc_sigaction [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,362 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,309 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_fini [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,301 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/memcmp-sse4.S:__memcmp_sse4_1 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,287 ( 0.02%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_file_xsputn@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,280 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,268 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c:strsep [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,253 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,228 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,223 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,210 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,209 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-close.c:_dl_close_worker [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,202 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c:__libc_memalign [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,191 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,159 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c:_dl_relocate_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,150 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,136 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_new [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,129 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:dl_main [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,127 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:clish_shell_prepare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,120 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,117 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../memcmp.S:bcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,107 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,100 ( 0.02%)  ???:0x00000000000137d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,092 ( 0.02%)  /opt/build/glibc/glibc-2.24/locale/findlocale.c:_nl_find_locale [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,084 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:mempcpy [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,082 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,067 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,044 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/memchr.S:memchr [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,041 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-cache.c:_dl_load_cache_lookup [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,039 ( 0.02%)  /opt/build/glibc/glibc-2.24/locale/loadarchive.c:_nl_load_locale_from_archive [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,025 ( 0.02%)  /opt/build/glibc/glibc-2.24/setjmp/../sysdeps/x86_64/setjmp.S:__sigsetjmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,011 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,008 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86/cacheinfo.c:intel_check_word [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,000 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
    987 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/./dl-map-segments.h:_dl_map_object_from_fd
    964 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S:memset [/lib/x86_64-linux-gnu/ld-2.24.so]
    928 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../bits/stdlib-bsearch.h:intel_check_word
    927 ( 0.02%)  /opt/build/glibc/glibc-2.24/wctype/wcfuncs.c:iswalnum [/lib/x86_64-linux-gnu/libc-2.24.so]
    925 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    884 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    884 ( 0.02%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_insert_last [/lib/x86_64-linux-gnu/libc-2.24.so]
    868 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave [/lib/x86_64-linux-gnu/ld-2.24.so]
    866 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    856 ( 0.02%)  /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/sysv/linux/wordsize-64/mmap.c:mmap [/lib/x86_64-linux-gnu/ld-2.24.so]
    846 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    835 ( 0.02%)  /opt/build/glibc/glibc-2.24/locale/setlocale.c:setlocale [/lib/x86_64-linux-gnu/libc-2.24.so]
    820 ( 0.02%)  ???:0x0000000000006340 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    816 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    810 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy [/lib/x86_64-linux-gnu/ld-2.24.so]
    806 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:clish_shell_load_scheme [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    805 ( 0.01%)  /opt/build/glibc/glibc-2.24/stdlib/../stdlib/strtol_l.c:____strtol_l_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
    786 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:remove_duplicate [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
    783 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h:_dl_relocate_object
    780 ( 0.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:__GI_strncmp [/lib/x86_64-linux-gnu/libc-2.24.so]
    770 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch [/lib/x86_64-linux-gnu/libc-2.24.so]
    768 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:openaux [/lib/x86_64-linux-gnu/ld-2.24.so]
    760 ( 0.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr [/lib/x86_64-linux-gnu/libc-2.24.so]
    750 ( 0.01%)  ???:0x0000000000004d00 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    740 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    737 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.h:parse_bracket_element.isra.11.constprop.32
    722 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/xmlapi.h:process_action
    718 ( 0.01%)  ???:XML_GetBuffer [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    716 ( 0.01%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:new_do_write [/lib/x86_64-linux-gnu/libc-2.24.so]
    701 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    701 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    700 ( 0.01%)  ???:0x0000000000004610 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    686 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:decompose_rpath [/lib/x86_64-linux-gnu/ld-2.24.so]
    673 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    661 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    660 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_delete [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    650 ( 0.01%)  ???:0x000000000000b4f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    648 ( 0.01%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_init_state [/lib/x86_64-linux-gnu/libc-2.24.so]
    645 ( 0.01%)  ???:0x00000000000071d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    644 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:free_state [/lib/x86_64-linux-gnu/libc-2.24.so]
    640 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_delete [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    628 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    627 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
    619 ( 0.01%)  /opt/build/glibc/glibc-2.24/libio/iogetline.c:_IO_getline_info [/lib/x86_64-linux-gnu/libc-2.24.so]
    600 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.h:parse_expression'2
    597 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    596 ( 0.01%)  /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c:readdir [/lib/x86_64-linux-gnu/libc-2.24.so]
    595 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap [/lib/x86_64-linux-gnu/libc-2.24.so]
    588 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_element_end [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    587 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    578 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:free_charset [/lib/x86_64-linux-gnu/libc-2.24.so]
    576 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/dl-fini.c:_dl_fini [/lib/x86_64-linux-gnu/ld-2.24.so]
    576 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:calc_eclosure_iter'2
    571 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    571 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    560 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_delete [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    544 ( 0.01%)  /opt/build/glibc/glibc-2.24/libio/iofgets.c:fgets [/lib/x86_64-linux-gnu/libc-2.24.so]
    541 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_delete [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    528 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_insert [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    522 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/dl-init.c:call_init.part.0 [/lib/x86_64-linux-gnu/ld-2.24.so]
    520 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    518 ( 0.01%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_file_write@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
    510 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    504 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_link_plugins [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/view/view.c
--------------------------------------------------------------------------------
Ir           

-- line 17 ----------------------------------------
  .           /*---------------------------------------------------------
  .            * PRIVATE META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_view_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_view_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
183 ( 0.00%)  	return strcmp(this->name, key);
2,764 ( 0.05%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (61x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_view_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 14 ( 0.00%)  {
  .           	const clish_view_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
 60 ( 0.00%)  	strcpy((char *)key, this->name);
1,495 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
295 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (13x)
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
  .           static void clish_view_init(clish_view_t * this, const char *name, const char *prompt)
  .           {
  .           	/* set up defaults */
 20 ( 0.00%)  	this->name = lub_string_dup(name);
838 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
  5 ( 0.00%)  	this->prompt = NULL;
  5 ( 0.00%)  	this->depth = 0;
  5 ( 0.00%)  	this->restore = CLISH_RESTORE_NONE;
  5 ( 0.00%)  	this->access = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 15 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
 25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (5x)
  .           
  .           	/* initialise the tree of commands for this view */
 44 ( 0.00%)  	lub_bintree_init(&this->tree,
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (5x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_offset (4x)
  .           		clish_command_bt_offset(),
  .           		clish_command_bt_compare, clish_command_bt_getkey);
  .           
  .           	/* Initialise the list of namespaces.
  .           	 * It's important to add new items to the
  .           	 * tail of list.
  .           	 */
 20 ( 0.00%)  	this->nspaces = lub_list_new(NULL);
599 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (5x)
  .           
  .           	/* set up the defaults */
 24 ( 0.00%)  	clish_view__set_prompt(this, prompt);
827 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
830 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__set_prompt (4x)
  .           
  .           	/* Initialize hotkey structures */
 19 ( 0.00%)  	this->hotkeys = clish_hotkeyv_new();
734 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
533 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/hotkey/hotkey.c:clish_hotkeyv_new (4x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_view_fini(clish_view_t * this)
  .           {
  .           	clish_command_t *cmd;
  .           	lub_list_node_t *iter;
  .           	clish_nspace_t *nspace;
  .           
  .           	/* delete each command held by this view */
191 ( 0.00%)  	while ((cmd = lub_bintree_findfirst(&this->tree))) {
2,096 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (31x)
  .           		/* remove the command from the tree */
104 ( 0.00%)  		lub_bintree_remove(&this->tree, cmd);
14,562 ( 0.27%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c:lub_bintree_remove (26x)
  .           		/* release the instance */
 82 ( 0.00%)  		clish_command_delete(cmd);
37,151 ( 0.69%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_delete (25x)
3,380 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           
  .           	/* Free namespaces list */
 30 ( 0.00%)  	while ((iter = lub_list__get_head(this->nspaces))) {
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
  .           		/* Remove the nspace from the list */
  5 ( 0.00%)  		lub_list_del(this->nspaces, iter);
  .           		nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
  .           		lub_list_node_free(iter);
  .           		/* Free the instance */
  .           		clish_nspace_delete(nspace);
  .           	}
 10 ( 0.00%)  	lub_list_free(this->nspaces);
450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_free (5x)
  .           
  .           	/* Free hotkey structures */
 19 ( 0.00%)  	clish_hotkeyv_delete(this->hotkeys);
767 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
456 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/hotkey/hotkey.c:clish_hotkeyv_delete (4x)
  .           
  .           	/* free our memory */
 15 ( 0.00%)  	lub_string_free(this->name);
450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
 15 ( 0.00%)  	lub_string_free(this->prompt);
450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
 15 ( 0.00%)  	lub_string_free(this->access);
 45 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           size_t clish_view_bt_offset(void)
  .           {
  .           	return offsetof(clish_view_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_view_t *clish_view_new(const char *name, const char *prompt)
 25 ( 0.00%)  {
 20 ( 0.00%)  	clish_view_t *this = malloc(sizeof(clish_view_t));
1,175 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (5x)
  .           
 10 ( 0.00%)  	if (this)
  .           		clish_view_init(this, name, prompt);
  .           	return this;
 25 ( 0.00%)  }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC METHODS
  .            *--------------------------------------------------------- */
  .           void clish_view_delete(clish_view_t * this)
 25 ( 0.00%)  {
  .           	clish_view_fini(this);
 15 ( 0.00%)  	free(this);
440 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (5x)
 15 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_view_new_command(clish_view_t * this,
  .           	const char *name, const char *help)
162 ( 0.00%)  {
  .           	/* allocate the memory for a new parameter definition */
 85 ( 0.00%)  	clish_command_t *cmd = clish_command_new(name, help);
35,189 ( 0.65%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_new (26x)
3,605 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 54 ( 0.00%)  	assert(cmd);
  .           
  .           	/* if this is a command other than the startup command... */
 81 ( 0.00%)  	if (NULL != help) {
  .           		/* ...insert it into the binary tree for this view */
156 ( 0.00%)  		if (-1 == lub_bintree_insert(&this->tree, cmd)) {
7,250 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (26x)
  .           			/* inserting a duplicate command is bad */
  .           			clish_command_delete(cmd);
  .           			cmd = NULL;
  .           		}
  .           	}
  .           	return cmd;
135 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* This method identifies the command (if any) which provides
  .            * the longest match with the specified line of text.
  .            *
  .            * NB this comparison is case insensitive.
  .            *
  .            * this - the view instance upon which to operate
  .            * line - the command line to analyse 
  .            */
  .           clish_command_t *clish_view_resolve_prefix(clish_view_t * this,
  .           	const char *line, bool_t inherit)
 40 ( 0.00%)  {
  4 ( 0.00%)  	clish_command_t *result = NULL, *cmd;
  4 ( 0.00%)  	char *buffer = NULL;
  .           	lub_argv_t *argv;
  .           	unsigned i;
  .           
  .           	/* create a vector of arguments */
 16 ( 0.00%)  	argv = lub_argv_new(line, 0);
3,267 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (4x)
  .           
 42 ( 0.00%)  	for (i = 0; i < lub_argv__get_count(argv); i++) {
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (6x)
  .           		/* set our buffer to be that of the first "i" arguments  */
 36 ( 0.00%)  		lub_string_cat(&buffer, lub_argv__get_arg(argv, i));
973 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (4x)
 40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (4x)
  .           
  .           		/* set the result to the longest match */
 24 ( 0.00%)  		cmd = clish_view_find_command(this, buffer, inherit);
3,209 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (4x)
  .           
  .           		/* job done */
  8 ( 0.00%)  		if (!cmd)
  .           			break;
  .           		result = cmd;
  .           
  .           		/* ready for the next word */
  8 ( 0.00%)  		lub_string_cat(&buffer, " ");
488 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (2x)
  .           	}
  .           
  .           	/* free up our dynamic storage */
 12 ( 0.00%)  	lub_string_free(buffer);
360 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (4x)
 16 ( 0.00%)  	lub_argv_delete(argv);
1,062 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
876 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (3x)
  .           
  .           	return result;
 36 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_view_resolve_command(clish_view_t *this,
  .           	const char *line, bool_t inherit)
 12 ( 0.00%)  {
 12 ( 0.00%)  	clish_command_t *result = clish_view_resolve_prefix(this, line, inherit);
6,467 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_prefix (3x)
4,775 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
 10 ( 0.00%)  	if (result) {
  8 ( 0.00%)  		clish_action_t *action = clish_command__get_action(result);
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (2x)
 12 ( 0.00%)  		clish_config_t *config = clish_command__get_config(result);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_config (1x)
 14 ( 0.00%)  		if (!clish_action__get_script(action) &&
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_script (2x)
  6 ( 0.00%)  			(!clish_action__get_builtin(action)) &&
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_builtin (2x)
  .           			(CLISH_CONFIG_NONE == clish_config__get_op(config)) &&
  .           			(!clish_command__get_param_count(result)) &&
  .           			(!clish_command__get_viewname(result))) {
  .           			/* if this doesn't do anything we've
  .           			 * not resolved a command
  .           			 */
  2 ( 0.00%)  			result = NULL;
  .           		}
  .           	}
  .           
  .           	return result;
 20 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_view_find_command(clish_view_t * this,
  .           	const char *name, bool_t inherit)
240 ( 0.00%)  {
  .           	clish_command_t *result = NULL;
  .           
  .           	/* Search the current view */
 90 ( 0.00%)  	result = lub_bintree_find(&this->tree, name);
8,917 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (30x)
  .           
 60 ( 0.00%)  	if (inherit) {
  .           		lub_list_node_t *iter;
  .           		clish_command_t *cmd;
  .           		clish_nspace_t *nspace;
  .           
  .           		/* Iterate elements. It's important to iterate
  .           		 * items starting from tail bacause the next
  .           		 * NAMESPACE has higher priority than previous one
  .           		 * in a case then the both NAMESPACEs have the
  .           		 * commands with the same name.
  .           		 */
 28 ( 0.00%)  		for(iter = lub_list__get_tail(this->nspaces);
914 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_tail (3x)
  .           			iter; iter = lub_list_node__get_prev(iter)) {
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
  .           			cmd = clish_nspace_find_command(nspace, name);
  .           			/* Choose the longest match */
  .           			result = clish_command_choose_longest(result, cmd);
  .           		}
  .           	}
  .           
  .           	return result;
210 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const clish_command_t *find_next_completion(clish_view_t * this,
  .           		const char *iter_cmd, const char *line)
  .           {
  .           	clish_command_t *cmd;
  .           	const char *name = "";
  .           	lub_argv_t *largv;
-- line 257 ----------------------------------------
-- line 331 ----------------------------------------
  .           		clish_nspace_clean_proxy((clish_nspace_t *)lub_list_node__get_data(iter));
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC ATTRIBUTES
  .            *--------------------------------------------------------- */
  .           lub_bintree_t * clish_view__get_command_tree(clish_view_t *this)
  5 ( 0.00%)  {
  .           	return &this->tree;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_t * clish_view__get_nspace_tree(clish_view_t *this)
  .           {
  5 ( 0.00%)  	return this->nspaces;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_view__get_name(const clish_view_t * this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_view__set_prompt(clish_view_t * this, const char *prompt)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->prompt);
 20 ( 0.00%)  	this->prompt = lub_string_dup(prompt);
946 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_view__get_prompt(const clish_view_t *this)
  .           {
  1 ( 0.00%)  	return this->prompt;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_view__set_depth(clish_view_t * this, unsigned depth)
  .           {
  .           	this->depth = depth;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned clish_view__get_depth(const clish_view_t * this)
  .           {
  1 ( 0.00%)  	return this->depth;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_view__set_restore(clish_view_t * this,
  .           	clish_view_restore_e restore)
  .           {
  .           	this->restore = restore;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_view_restore_e clish_view__get_restore(const clish_view_t * this)
  .           {
  1 ( 0.00%)  	return this->restore;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_view_insert_hotkey(const clish_view_t *this, const char *key, const char *cmd)
  .           {
  .           	return clish_hotkeyv_insert(this->hotkeys, key, cmd);
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 399 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c
--------------------------------------------------------------------------------
Ir             

-- line 73 ----------------------------------------
    .            */
    .           const char *default_path = "/etc/clish;~/.clish";
    .           
    .           static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent);
    .           
    .           /*-------------------------------------------------------- */
    .           int clish_shell_load_scheme(clish_shell_t *this, const char *xml_path, const char *xslt_path)
    8 ( 0.00%)  {
    .           	const char *path = xml_path;
    .           	char *buffer;
    .           	char *dirname;
    .           	char *saveptr = NULL;
    .           	int res = -1;
    .           	clish_xmldoc_t *doc = NULL;
    .           	DIR *dir;
    .           
-- line 89 ----------------------------------------
-- line 99 ----------------------------------------
    .           			return -1;
    .           		}
    .           	}
    .           #else
    .           	xslt_path = xslt_path; /* Happy compiler */
    .           #endif
    .           
    .           	/* Use the default path */
    2 ( 0.00%)  	if (!path)
    .           		path = default_path;
    9 ( 0.00%)  	buffer = lub_system_tilde_expand(path);
5,312 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Loop though each directory */
    .           	for (dirname = strtok_r(buffer, ";", &saveptr);
    .           		dirname; dirname = strtok_r(NULL, ";", &saveptr)) {
    .           		struct dirent *entry;
    .           
    .           		/* Search this directory for any XML files */
    8 ( 0.00%)  		dir = opendir(dirname);
2,024 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    3 ( 0.00%)  		if (NULL == dir) {
    .           #ifdef DEBUG
    .           			tinyrl_printf(this->tinyrl,
    .           				"*** Failed to open '%s' directory\n",
    .           				dirname);
    .           #endif
    .           			continue;
    .           		}
   79 ( 0.00%)  		for (entry = readdir(dir); entry; entry = readdir(dir)) {
2,157 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  573 ( 0.01%)  => /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c:readdir (14x)
   88 ( 0.00%)  			const char *extension = strrchr(entry->d_name, '.');
1,506 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  401 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strrchr.S:rindex (13x)
   14 ( 0.00%)  			char *filename = NULL;
    .           			clish_xmlnode_t *root;
    .           			int r;
    .           
    .           			/* Check the filename */
  134 ( 0.00%)  			if (!extension || strcmp(".xml", extension))
    .           				continue;
    .           
    .           			/* Build the filename */
   41 ( 0.00%)  			lub_string_cat(&filename, dirname);
3,779 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, "/");
2,620 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, entry->d_name);
4,032 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
    .           
    .           #ifdef DEBUG
    .           			fprintf(stderr, "Parse XML-file: %s\n", filename);
    .           #endif
    .           			/* Load current XML file */
   44 ( 0.00%)  			doc = clish_xmldoc_read(filename);
1,456,349 (26.97%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read (9x)
134,640 ( 2.49%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  			if (!clish_xmldoc_is_valid(doc)) {
  659 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (9x)
   10 ( 0.00%)  				int errcaps = clish_xmldoc_error_caps(doc);
    .           				printf("Unable to open file '%s'", filename);
    .           				if ((errcaps & CLISH_XMLERR_LINE) == CLISH_XMLERR_LINE)
    .           					printf(", at line %d", clish_xmldoc_get_err_line(doc));
    .           				if ((errcaps & CLISH_XMLERR_COL) == CLISH_XMLERR_COL)
    .           					printf(", at column %d", clish_xmldoc_get_err_col(doc));
    .           				if ((errcaps & CLISH_XMLERR_DESC) == CLISH_XMLERR_DESC)
    .           					printf(", message is %s", clish_xmldoc_get_err_msg(doc));
    .           				printf("\n");
-- line 155 ----------------------------------------
-- line 171 ----------------------------------------
    .           				}
    .           				clish_xmldoc_release(doc);
    .           				doc = tmp;
    .           			}
    .           
    .           			if (!xslt_path && clish_xslt_is_valid(xslt))
    .           				clish_xslt_release(xslt);
    .           #endif
   24 ( 0.00%)  			root = clish_xmldoc_get_root(doc);
  673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_get_root (9x)
    .           			r = process_node(this, root, NULL);
   44 ( 0.00%)  			clish_xmldoc_release(doc);
179,070 ( 3.32%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release (9x)
14,628 ( 0.27%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           			/* Error message */
   30 ( 0.00%)  			if (r) {
    .           				fprintf(stderr, CLISH_XML_ERROR_STR"File %s\n",
    .           					filename);
    .           				lub_string_free(filename);
    .           				goto error;
    .           			}
   34 ( 0.00%)  			lub_string_free(filename);
2,402 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  810 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
    .           		}
    7 ( 0.00%)  		closedir(dir);
1,641 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           /* To don't free memory twice on cleanup */
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (!xslt_path)
    .           		xslt = NULL;
    .           #endif
    1 ( 0.00%)  	doc = NULL;
    .           	dir = NULL;
    1 ( 0.00%)  	res = 0; /* Success */
    .           error:
    3 ( 0.00%)  	lub_string_free(buffer);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    .           	if (dir)
    .           		closedir(dir);
    5 ( 0.00%)  	if (clish_xmldoc_is_valid(doc))
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (1x)
    .           		clish_xmldoc_release(doc);
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (clish_xslt_is_valid(xslt))
    .           		clish_xslt_release(xslt);
    .           #endif
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /*
    .            * ------------------------------------------------------
    .            * This function reads an element from the XML stream and processes it.
    .            * ------------------------------------------------------
    .            */
  980 ( 0.02%)  static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent)
    .           {
   98 ( 0.00%)  	int res = 0;
    .           
2,511 ( 0.05%)  	switch (clish_xmlnode_get_type(node)) {
2,342,797 (43.39%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 (30x)
  870 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type (174x)
    .           	case CLISH_XMLNODE_ELM: {
    .           			clish_xml_cb_t * cb;
    .           			char name[128];
   98 ( 0.00%)  			unsigned int namelen = sizeof(name);
  788 ( 0.01%)  			if (clish_xmlnode_get_name(node, name, &namelen) == 0) {
5,400 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (9x)
2,754 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,990 ( 0.04%)  				for (cb = &xml_elements[0]; cb->element; cb++) {
2,369 ( 0.04%)  					if (0 == strcmp(name, cb->element)) {
1,476 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  189 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (9x)
    .           #ifdef DEBUG
    .           						fprintf(stderr, "NODE:");
    .           						clish_xmlnode_print(node, stderr);
    .           						fprintf(stderr, "\n");
    .           #endif
    .           						/* process the elements at this level */
  490 ( 0.01%)  						res = cb->handler(shell, node, parent);
2,353,098 (43.58%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module (10x)
    .           
    .           						/* Error message */
  294 ( 0.01%)  						if (res) {
    .           							char *ename = clish_xmlnode_fetch_attr(node, "name");
    .           							char *eref = clish_xmlnode_fetch_attr(node, "ref");
    .           							char *ekey = clish_xmlnode_fetch_attr(node, "key");
    .           							char *efile = clish_xmlnode_fetch_attr(node, "file");
    .           							fprintf(stderr, CLISH_XML_ERROR_STR"Node %s", name);
    .           							if (ename)
    .           								fprintf(stderr, ", name=\"%s\"", ename);
    .           							if (eref)
-- line 252 ----------------------------------------
-- line 274 ----------------------------------------
    .           	case CLISH_XMLNODE_COMMENT:
    .           	case CLISH_XMLNODE_DECL:
    .           	case CLISH_XMLNODE_UNKNOWN:
    .           	default:
    .           		break;
    .           	}
    .           
    .           	return res;
  882 ( 0.02%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_children(clish_shell_t *shell,
    .           	clish_xmlnode_t *element, void *parent)
  549 ( 0.01%)  {
   61 ( 0.00%)  	clish_xmlnode_t *node = NULL;
    .           	int res;
    .           
3,350 ( 0.06%)  	while ((node = clish_xmlnode_next_child(element, node)) != NULL) {
  799 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  750 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child (183x)
    .           		/* Now deal with all the contained elements */
    .           		res = process_node(shell, node, parent);
  176 ( 0.00%)  		if (res)
    .           			return res;
    .           	}
    .           
   61 ( 0.00%)  	return 0;
  366 ( 0.01%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_clish_module(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   50 ( 0.00%)  {
    .           	/* Create the global view */
   30 ( 0.00%)  	if (!shell->global)
   11 ( 0.00%)  		shell->global = clish_shell_find_create_view(shell,
5,219 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			"__view_global", "");
    .           
    .           	parent = parent; /* Happy compiler */
    .           
   30 ( 0.00%)  	return process_children(shell, element, shell->global);
2,347,728 (43.48%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children (10x)
   30 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_view(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   45 ( 0.00%)  {
    .           	clish_view_t *view;
    .           	int res = -1;
    .           
   29 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  164 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (4x)
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  	char *prompt = clish_xmlnode_fetch_attr(element, "prompt");
  328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *depth = clish_xmlnode_fetch_attr(element, "depth");
  322 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *restore = clish_xmlnode_fetch_attr(element, "restore");
  340 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
  334 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
    .           
    .           	/* Check syntax */
   10 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
    .           
    .           	/* re-use a view if it already exists */
   30 ( 0.00%)  	view = clish_shell_find_create_view(shell, name, prompt);
6,372 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell_find_create_view (5x)
    .           
   10 ( 0.00%)  	if (depth && (lub_ctype_isdigit(*depth))) {
    .           		unsigned int res = 0;
    .           		lub_conv_atoui(depth, &res, 0);
    .           		clish_view__set_depth(view, res);
    .           	}
    .           
   10 ( 0.00%)  	if (restore) {
    .           		if (!lub_string_nocasecmp(restore, "depth"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_DEPTH);
    .           		else if (!lub_string_nocasecmp(restore, "view"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_VIEW);
    .           		else
    .           			clish_view__set_restore(view, CLISH_RESTORE_NONE);
    .           	}
    .           
   10 ( 0.00%)  	if (access)
    .           		clish_view__set_access(view, access);
    .           
    .           //process_view_end:
   25 ( 0.00%)  	res = process_children(shell, element, view);
294,166 ( 5.45%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (5x)
    .           error:
   15 ( 0.00%)  	clish_xml_release(name);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(prompt);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(depth);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(restore);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(access);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   45 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_ptype(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   99 ( 0.00%)  {
    .           	clish_ptype_method_e method;
    .           	clish_ptype_preprocess_e preprocess;
    .           	int res = -1;
    .           
   55 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  509 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,291 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *pattern = clish_xmlnode_fetch_attr(element, "pattern");
1,017 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *method_name = clish_xmlnode_fetch_attr(element, "method");
1,022 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *preprocess_name =	clish_xmlnode_fetch_attr(element, "preprocess");
1,321 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
    .           
    .           	/* Check syntax */
   22 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   22 ( 0.00%)  	if (!pattern) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("pattern"));
    .           		goto error;
    .           	}
    .           
   48 ( 0.00%)  	method = clish_ptype_method_resolve(method_name);
  705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  651 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_method_resolve (10x)
    .           
   48 ( 0.00%)  	preprocess = clish_ptype_preprocess_resolve(preprocess_name);
  737 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_preprocess_resolve (10x)
   77 ( 0.00%)  	clish_shell_find_create_ptype(shell,
1,797,666 (33.29%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (11x)
    .           		name, help, pattern, method, preprocess);
    .           
   11 ( 0.00%)  	res = 0;
    .           error:
   33 ( 0.00%)  	clish_xml_release(name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(help);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(pattern);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(method_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(preprocess_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   99 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_overview(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    8 ( 0.00%)  {
    1 ( 0.00%)  	char *content = NULL;
    2 ( 0.00%)  	unsigned int content_len = 2048;
    .           	int result;
    .           
    .           	/*
    .           	 * the code below faithfully assume that we'll be able fully store
    .           	 * the content of the node. If it's really, really big, we may have
    .           	 * an issue (but then, if it's that big, how the hell does it
    .           	 * already fits in allocated memory?)
    .           	 * Ergo, it -should- be safe.
    .           	 */
    .           	do {
    4 ( 0.00%)  		char *new = (char*)realloc(content, content_len);
1,810 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (1x)
    2 ( 0.00%)  		if (!new) {
    .           			if (content)
    .           				free(content);
    .           			return -1;
    .           		}
    .           		content = new;
    7 ( 0.00%)  		result = clish_xmlnode_get_content(element, content,
19,472 ( 0.36%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (1x)
    .           			&content_len);
    2 ( 0.00%)  	} while (result == -E2BIG);
    .           
    2 ( 0.00%)  	if (result == 0 && content) {
    .           		/* set the overview text for this view */
    2 ( 0.00%)  		assert(NULL == shell->overview);
    .           		/* store the overview */
    4 ( 0.00%)  		shell->overview = lub_string_dup(content);
  912 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    .           	}
    .           
    .           	if (content)
    3 ( 0.00%)  		free(content);
  133 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    1 ( 0.00%)  	return 0;
    7 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_command(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  260 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	clish_command_t *old;
    .           	int res = -1;
    .           
  130 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,173 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
1,095 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,876 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
2,185 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
2,290 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *escape_chars = clish_xmlnode_fetch_attr(element, "escape_chars");
2,244 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_name = clish_xmlnode_fetch_attr(element, "args");
1,989 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_help = clish_xmlnode_fetch_attr(element, "args_help");
2,371 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
2,314 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
2,374 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *ref = clish_xmlnode_fetch_attr(element, "ref");
2,290 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
    .           
    .           	/* Check syntax */
   52 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   52 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
    .           
    .           	/* check this command doesn't already exist */
  134 ( 0.00%)  	old = clish_view_find_command(v, name, BOOL_FALSE);
  723 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,202 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (25x)
   52 ( 0.00%)  	if (old) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"Duplicate COMMAND name=\"%s\".\n", name);
    .           		goto error;
    .           	}
    .           
    .           	/* create a command */
  160 ( 0.00%)  	cmd = clish_view_new_command(v, name, help);
41,908 ( 0.78%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (25x)
4,334 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  108 ( 0.00%)  	clish_command__set_pview(cmd, v);
  679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_pview (25x)
    .           
    .           	/* Reference 'ref' field */
   78 ( 0.00%)  	if (ref) {
    .           		char *saveptr = NULL;
    .           		const char *delim = "@";
    .           		char *view_name = NULL;
    .           		char *cmdn = NULL;
    .           		char *str = lub_string_dup(ref);
    .           
    .           		cmdn = strtok_r(str, delim, &saveptr);
    .           		if (!cmdn) {
-- line 505 ----------------------------------------
-- line 509 ----------------------------------------
    .           		}
    .           		clish_command__set_alias(cmd, cmdn); /* alias name */
    .           		view_name = strtok_r(NULL, delim, &saveptr);
    .           		clish_command__set_alias_view(cmd, view_name);
    .           		lub_string_free(str);
    .           	}
    .           
    .           	/* define some specialist escape characters */
   78 ( 0.00%)  	if (escape_chars)
    8 ( 0.00%)  		clish_command__set_escape_chars(cmd, escape_chars);
  923 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   52 ( 0.00%)  	if (args_name) {
    .           		/* define a "rest of line" argument */
    .           		clish_param_t *param;
    .           
    .           		/* Check syntax */
    2 ( 0.00%)  		if (!args_help) {
    .           			fprintf(stderr, CLISH_XML_ERROR_ATTR("args_help"));
    .           			goto error;
    .           		}
    5 ( 0.00%)  		param = clish_param_new(args_name, args_help, "__ptype_ARGS");
  751 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (1x)
    8 ( 0.00%)  		clish_command__set_args(cmd, param);
  689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* define the view which this command changes to */
   78 ( 0.00%)  	if (view) {
    .           		/* reference the next view */
   36 ( 0.00%)  		clish_command__set_viewname(cmd, view);
1,802 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,747 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (7x)
    .           	}
    .           
    .           	/* define the view id which this command changes to */
   78 ( 0.00%)  	if (viewid)
   16 ( 0.00%)  		clish_command__set_viewid(cmd, viewid);
1,747 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  471 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewid (2x)
    .           
    .           	/* lock field */
   78 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
  108 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
  725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (25x)
    .           
    .           	/* interrupt field */
   78 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
  108 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
  719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (25x)
    .           
   78 ( 0.00%)  	if (access)
    8 ( 0.00%)  		clish_command__set_access(cmd, access);
  872 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           //process_command_end:
  130 ( 0.00%)  	res = process_children(shell, element, cmd);
368,358 ( 6.82%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (26x)
    .           error:
   78 ( 0.00%)  	clish_xml_release(access);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(view);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(viewid);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(escape_chars);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(lock);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(interrupt);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(ref);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
    .           
    .           	return res;
  234 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_startup(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   10 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	int res = -1;
    .           
    5 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
   70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
   73 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_shebang =
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		clish_xmlnode_fetch_attr(element, "default_shebang");
    5 ( 0.00%)  	char *timeout = clish_xmlnode_fetch_attr(element, "timeout");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_plugin = clish_xmlnode_fetch_attr(element,
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		"default_plugin");
    .           
    .           	/* Check syntax */
    2 ( 0.00%)  	if (!view) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("view"));
    .           		goto error;
    .           	}
    2 ( 0.00%)  	if (shell->startup) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP tag duplication.\n");
    .           		goto error;
    .           	}
    .           
    .           	/* create a command with NULL help */
    6 ( 0.00%)  	cmd = clish_view_new_command(v, "startup", NULL);
1,152 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (1x)
    4 ( 0.00%)  	clish_command__set_lock(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* reference the next view */
    4 ( 0.00%)  	clish_command__set_viewname(cmd, view);
  246 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (1x)
    .           
    .           	/* define the view id which this command changes to */
    3 ( 0.00%)  	if (viewid)
    .           		clish_command__set_viewid(cmd, viewid);
    .           
    3 ( 0.00%)  	if (default_shebang)
    .           		clish_shell__set_default_shebang(shell, default_shebang);
    .           
    3 ( 0.00%)  	if (timeout) {
    .           		unsigned int to = 0;
    .           		lub_conv_atoui(timeout, &to, 0);
    .           		clish_shell__set_timeout(shell, to);
    .           	}
    .           
    .           	/* lock field */
    2 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
    4 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* interrupt field */
    2 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
    4 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (1x)
    .           
    .           	/* If we need the default plugin */
    3 ( 0.00%)  	if (default_plugin && (0 == strcmp(default_plugin, "false")))
    .           		shell->default_plugin = BOOL_FALSE;
    .           
    .           	/* remember this command */
    1 ( 0.00%)  	shell->startup = cmd;
    .           
    5 ( 0.00%)  	res = process_children(shell, element, cmd);
6,108 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (1x)
    .           error:
    3 ( 0.00%)  	clish_xml_release(view);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(viewid);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(default_shebang);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(timeout);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(lock);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(interrupt);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_param(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  190 ( 0.00%)  {
    .           	clish_command_t *cmd = NULL;
   38 ( 0.00%)  	clish_param_t *p_param = NULL;
    .           	clish_xmlnode_t *pelement;
    .           	clish_param_t *param;
    .           	char *pname;
    .           	int res = -1;
    .           
  114 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  808 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,378 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *ptype = clish_xmlnode_fetch_attr(element, "ptype");
2,127 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *prefix = clish_xmlnode_fetch_attr(element, "prefix");
2,179 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *defval = clish_xmlnode_fetch_attr(element, "default");
2,199 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *mode = clish_xmlnode_fetch_attr(element, "mode");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *optional = clish_xmlnode_fetch_attr(element, "optional");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *order = clish_xmlnode_fetch_attr(element, "order");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *value = clish_xmlnode_fetch_attr(element, "value");
2,246 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *hidden = clish_xmlnode_fetch_attr(element, "hidden");
2,045 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *test = clish_xmlnode_fetch_attr(element, "test");
2,246 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *completion = clish_xmlnode_fetch_attr(element, "completion");
2,270 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,180 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
    .           
    .           	/* The PARAM can be child of COMMAND or another PARAM */
   76 ( 0.00%)  	pelement = clish_xmlnode_parent(element);
   76 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (19x)
    .           	pname = clish_xmlnode_get_all_name(pelement);
  190 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "PARAM") == 0)
  969 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (19x)
    .           		p_param = (clish_param_t *)parent;
    .           	else
    .           		cmd = (clish_command_t *)parent;
    .           	if (pname)
   95 ( 0.00%)  		free(pname);
2,439 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (19x)
   38 ( 0.00%)  	if (!cmd && !p_param)
    .           		goto error;
    .           
    .           	/* Check syntax */
   95 ( 0.00%)  	if (cmd && (cmd == shell->startup)) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP can't contain PARAMs.\n");
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!ptype) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("ptype"));
    .           		goto error;
    .           	}
    .           
  118 ( 0.00%)  	param = clish_param_new(name, help, ptype);
22,318 ( 0.41%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (18x)
2,175 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* If prefix is set clish will emulate old optional
    .           	 * command syntax over newer optional command mechanism.
    .           	 * It will create nested PARAM.
    .           	 */
   38 ( 0.00%)  	if (prefix) {
    .           		const char *ptype_name = "__ptype_SUBCOMMAND";
    .           		clish_param_t *opt_param = NULL;
    5 ( 0.00%)  		char *str = NULL;
    .           		clish_ptype_t *tmp;
    .           
    .           		/* Create a ptype for prefix-named subcommand that
    .           		 * will contain the nested optional parameter. The
    .           		 * name of ptype is hardcoded. It's not good but
    .           		 * it's only the service ptype.
    .           		 */
   25 ( 0.00%)  		tmp = (clish_ptype_t *)lub_bintree_find(
2,321 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (5x)
    .           			&shell->ptype_tree, ptype_name);
   10 ( 0.00%)  		if (!tmp)
    8 ( 0.00%)  			tmp = clish_shell_find_create_ptype(shell,
137,591 ( 2.55%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (1x)
    .           				ptype_name, "Option", "[^\\\\]+",
    .           				CLISH_PTYPE_REGEXP, CLISH_PTYPE_NONE);
    2 ( 0.00%)  		assert(tmp);
   20 ( 0.00%)  		lub_string_cat(&str, "_prefix_");
1,896 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   20 ( 0.00%)  		lub_string_cat(&str, name);
1,336 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   30 ( 0.00%)  		opt_param = clish_param_new(str, help, ptype_name);
5,820 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (5x)
   15 ( 0.00%)  		lub_string_free(str);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   24 ( 0.00%)  		clish_param__set_mode(opt_param,
  657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_mode (4x)
    .           			CLISH_PARAM_SUBCOMMAND);
   24 ( 0.00%)  		clish_param__set_value(opt_param, prefix);
  826 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  820 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_value (4x)
   20 ( 0.00%)  		clish_param__set_optional(opt_param, BOOL_TRUE);
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (5x)
    .           
   15 ( 0.00%)  		if (test)
    .           			clish_param__set_test(opt_param, test);
    .           
    .           		/* Add the parameter to the command */
   10 ( 0.00%)  		if (cmd)
   20 ( 0.00%)  			clish_command_insert_param(cmd, opt_param);
  934 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (5x)
    .           		/* Add the parameter to the param */
   15 ( 0.00%)  		if (p_param)
    .           			clish_param_insert_param(p_param, opt_param);
    .           		/* Unset cmd and set parent param to opt_param */
    5 ( 0.00%)  		cmd = NULL;
    .           		p_param = opt_param;
    .           	}
    .           
   57 ( 0.00%)  	if (defval)
   24 ( 0.00%)  		clish_param__set_default(param, defval);
  918 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,009 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_default (4x)
    .           
   57 ( 0.00%)  	if (hidden && lub_string_nocasecmp(hidden, "true") == 0)
    .           		clish_param__set_hidden(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_hidden(param, BOOL_FALSE);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_hidden (18x)
    .           
   57 ( 0.00%)  	if (mode) {
    .           		if (lub_string_nocasecmp(mode, "switch") == 0) {
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_SWITCH);
    .           			/* Force hidden attribute */
    .           			clish_param__set_hidden(param, BOOL_TRUE);
    .           		} else if (lub_string_nocasecmp(mode, "subcommand") == 0)
   28 ( 0.00%)  			clish_param__set_mode(param,
    .           				CLISH_PARAM_SUBCOMMAND);
    .           		else
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_COMMON);
    .           	}
    .           
   57 ( 0.00%)  	if (optional && lub_string_nocasecmp(optional, "true") == 0)
    .           		clish_param__set_optional(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_optional(param, BOOL_FALSE);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (18x)
    .           
   57 ( 0.00%)  	if (order && lub_string_nocasecmp(order, "true") == 0)
    .           		clish_param__set_order(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_order(param, BOOL_FALSE);
  663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_order (18x)
    .           
   57 ( 0.00%)  	if (value) {
    .           		clish_param__set_value(param, value);
    .           		/* Force mode to subcommand */
    .           		clish_param__set_mode(param,
    .           			CLISH_PARAM_SUBCOMMAND);
    .           	}
    .           
   57 ( 0.00%)  	if (test && !prefix)
    .           		clish_param__set_test(param, test);
    .           
   57 ( 0.00%)  	if (completion)
    .           		clish_param__set_completion(param, completion);
    .           
   57 ( 0.00%)  	if (access)
    .           		clish_param__set_access(param, access);
    .           
    .           	/* Add the parameter to the command */
   38 ( 0.00%)  	if (cmd)
   60 ( 0.00%)  		clish_command_insert_param(cmd, param);
1,565 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,769 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (13x)
    .           
    .           	/* Add the parameter to the param */
   38 ( 0.00%)  	if (p_param)
   24 ( 0.00%)  		clish_param_insert_param(p_param, param);
  914 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,002 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_insert_param (4x)
    .           
   95 ( 0.00%)  	res = process_children(shell, element, param);
  570 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (19x)
    .           
    .           error:
   57 ( 0.00%)  	clish_xml_release(name);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(help);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(ptype);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(prefix);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(defval);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(mode);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(optional);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(order);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(value);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(hidden);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(test);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(completion);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(access);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
    .           
    .           	return res;
  171 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_action(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  210 ( 0.00%)  {
    .           	clish_action_t *action = NULL;
  126 ( 0.00%)  	char *builtin = clish_xmlnode_fetch_attr(element, "builtin");
  531 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
  105 ( 0.00%)  	char *shebang = clish_xmlnode_fetch_attr(element, "shebang");
  431 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
   88 ( 0.00%)  	clish_xmlnode_t *pelement = clish_xmlnode_parent(element);
  649 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   80 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (20x)
    .           	char *pname = clish_xmlnode_get_all_name(pelement);
    .           	char *text;
    .           	clish_sym_t *sym = NULL;
    .           
  172 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "VAR") == 0)
3,294 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,020 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (20x)
   21 ( 0.00%)  		action = clish_var__get_action((clish_var_t *)parent);
    .           	else
   67 ( 0.00%)  		action = clish_command__get_action((clish_command_t *)parent);
  703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (20x)
    .           
    .           	if (pname)
   63 ( 0.00%)  		free(pname);
2,733 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
    .           	text = clish_xmlnode_get_all_content(element);
    .           
   84 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   94 ( 0.00%)  		clish_action__set_script(action, text);
  984 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,915 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_script (17x)
    .           	}
    .           	if (text)
   63 ( 0.00%)  		free(text);
2,817 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
   42 ( 0.00%)  	if (builtin)
   28 ( 0.00%)  		sym = clish_shell_add_unresolved_sym(shell, builtin,
5,051 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,908 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_unresolved_sym (3x)
    .           			CLISH_SYM_TYPE_ACTION);
    .           	else
   51 ( 0.00%)  		sym = shell->hooks[CLISH_SYM_TYPE_ACTION];
    .           
   67 ( 0.00%)  	clish_action__set_builtin(action, sym);
  695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_builtin (20x)
   42 ( 0.00%)  	if (shebang)
    .           		clish_action__set_shebang(action, shebang);
    .           
   67 ( 0.00%)  	clish_xml_release(builtin);
  622 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (20x)
   63 ( 0.00%)  	clish_xml_release(shebang);
   21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (21x)
    .           
    .           	return 0;
  189 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_detail(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   28 ( 0.00%)  {
    .           	clish_command_t *cmd = (clish_command_t *) parent;
    .           
    .           	/* read the following text element */
    .           	char *text = clish_xmlnode_get_all_content(element);
    .           
   16 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   24 ( 0.00%)  		clish_command__set_detail(cmd, text);
1,555 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_detail (3x)
1,223 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	if (text)
   12 ( 0.00%)  		free(text);
  534 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (4x)
    .           
    .           	shell = shell; /* Happy compiler */
    .           
    .           	return 0;
   28 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_namespace(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    .           {
    .           	clish_view_t *v = (clish_view_t *)parent;
    .           	clish_nspace_t *nspace = NULL;
    .           	int res = -1;
-- line 906 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c
--------------------------------------------------------------------------------
Ir           

-- line 19 ----------------------------------------
  .           	unsigned size;		/* Number of slots allocated in this array */
  .           	unsigned current_index;
  .           	unsigned stifle;
  .           };
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_init(tinyrl_history_t * this, unsigned stifle)
  .           {
  1 ( 0.00%)  	this->entries = NULL;
  1 ( 0.00%)  	this->stifle = stifle;
  1 ( 0.00%)  	this->current_index = 1;
  1 ( 0.00%)  	this->length = 0;
  2 ( 0.00%)  	this->size = 0;
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_fini(tinyrl_history_t * this)
  4 ( 0.00%)  {
  .           	tinyrl_history_entry_t *entry;
  .           	tinyrl_history_iterator_t iter;
  .           
  .           	/* release the resource associated with each entry */
 25 ( 0.00%)  	for (entry = tinyrl_history_getfirst(this, &iter);
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:tinyrl_history_getfirst (1x)
 27 ( 0.00%)  	     entry; entry = tinyrl_history_getnext(&iter)) {
 96 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:tinyrl_history_getnext (9x)
 27 ( 0.00%)  		tinyrl_history_entry_delete(entry);
1,683 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry_delete (9x)
  .           	}
  .           	/* release the list */
  3 ( 0.00%)  	free(this->entries);
 88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
  1 ( 0.00%)  	this->entries = NULL;
  4 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           tinyrl_history_t *tinyrl_history_new(unsigned stifle)
  4 ( 0.00%)  {
  4 ( 0.00%)  	tinyrl_history_t *this = malloc(sizeof(tinyrl_history_t));
197 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  2 ( 0.00%)  	if (NULL != this) {
  8 ( 0.00%)  		tinyrl_history_init(this, stifle);
787 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_delete(tinyrl_history_t * this)
  2 ( 0.00%)  {
  6 ( 0.00%)  	tinyrl_history_fini(this);
2,693 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	free(this);
 88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
  1 ( 0.00%)  }
  .           
  .           /*
  .           HISTORY LIST MANAGEMENT 
  .           */
  .           /*------------------------------------- */
  .           /* insert a new entry at the current offset */
  .           static void insert_entry(tinyrl_history_t * this, const char *line)
 30 ( 0.00%)  {
 24 ( 0.00%)  	tinyrl_history_entry_t *new_entry =
4,192 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry_new (9x)
2,012 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 30 ( 0.00%)  	    tinyrl_history_entry_new(line, this->current_index++);
 30 ( 0.00%)  	assert(this->length);
 30 ( 0.00%)  	assert(this->entries);
 20 ( 0.00%)  	if (new_entry) {
 20 ( 0.00%)  		this->entries[this->length - 1] = new_entry;
  .           	}
 20 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /*
  .            * This frees the specified entries from the 
  .            * entries vector. NB it doesn't perform any shuffling.
  .            * This function is inclusive of start and end
  .            */
  .           static void
  3 ( 0.00%)  free_entries(const tinyrl_history_t * this, unsigned start, unsigned end)
  .           {
  .           	unsigned i;
  2 ( 0.00%)  	assert(start <= end);
  6 ( 0.00%)  	assert(end < this->length);
  .           
  3 ( 0.00%)  	for (i = start; i <= end; i++) {
  2 ( 0.00%)  		tinyrl_history_entry_t *entry = this->entries[i];
  7 ( 0.00%)  		tinyrl_history_entry_delete(entry);
978 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		entry = NULL;
  .           	}
  4 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /*
  .            * This removes the specified entries from the 
  .            * entries vector. Shuffling up the array as necessary 
  .            * This function is inclusive of start and end
  .            */
  .           static void
  4 ( 0.00%)  remove_entries(tinyrl_history_t * this, unsigned start, unsigned end)
  .           {
  .           	unsigned delta = (end - start) + 1;	/* number of entries being deleted */
  .           	/* number of entries to shuffle */
  3 ( 0.00%)  	unsigned num_entries = (this->length - end) - 1;
  2 ( 0.00%)  	assert(start <= end);
  3 ( 0.00%)  	assert(end < this->length);
  .           
  3 ( 0.00%)  	if (num_entries) {
  .           		/* move the remaining entries down to close the array */
  .           		memmove(&this->entries[start],
  .           			&this->entries[end + 1],
  .           			sizeof(tinyrl_history_entry_t *) * num_entries);
  .           	}
  .           	/* now fix up the length variables */
  2 ( 0.00%)  	this->length -= delta;
  4 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /* 
  .           Search the current history buffer for the specified 
  .           line and if found remove it.
  .           */
  .           static bool_t remove_duplicate(tinyrl_history_t * this, const char *line)
 63 ( 0.00%)  {
  9 ( 0.00%)  	bool_t result = BOOL_FALSE;
  .           	unsigned i;
  .           
162 ( 0.00%)  	for (i = 0; i < this->length; i++) {
 90 ( 0.00%)  		tinyrl_history_entry_t *entry = this->entries[i];
414 ( 0.01%)  		if (0 == strcmp(line, tinyrl_history_entry__get_line(entry))) {
2,492 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
924 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (44x)
 88 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry__get_line (44x)
  5 ( 0.00%)  			free_entries(this, i, i);
1,005 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:free_entries.isra.0 (1x)
  5 ( 0.00%)  			remove_entries(this, i, i);
 21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:remove_entries.isra.2 (1x)
  1 ( 0.00%)  			result = BOOL_TRUE;
  .           			break;
  .           		}
  .           	}
  .           	return result;
 37 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /* 
  .           add an entry to the end of the current array 
  .           if there is no space returns -1 else 0
  .           */
  .           static void append_entry(tinyrl_history_t * this, const char *line)
  .           {
 30 ( 0.00%)  	if (this->length < this->size) {
 20 ( 0.00%)  		this->length++;
  .           
 30 ( 0.00%)  		insert_entry(this, line);
6,408 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:insert_entry (10x)
  .           	}
  .           }
  .           
  .           /*------------------------------------- */
  .           /*
  .            add a new history entry replacing the oldest one 
  .            */
  .           static void add_n_replace(tinyrl_history_t * this, const char *line)
-- line 168 ----------------------------------------
-- line 176 ----------------------------------------
  .           	/* add the new entry */
  .           	append_entry(this, line);
  .           }
  .           
  .           /*------------------------------------- */
  .           /* add a new history entry growing the array if necessary */
  .           static void add_n_grow(tinyrl_history_t * this, const char *line)
  .           {
 20 ( 0.00%)  	if (this->size == this->length) {
  .           		/* increment the history memory by 10 entries each time we grow */
  2 ( 0.00%)  		unsigned new_size = this->size + 10;
  .           		size_t nbytes;
  .           		tinyrl_history_entry_t **new_entries;
  .           
  1 ( 0.00%)  		nbytes = sizeof(tinyrl_history_entry_t *) * new_size;
  7 ( 0.00%)  		new_entries = realloc(this->entries, nbytes);
1,694 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  		if (NULL != new_entries) {
  1 ( 0.00%)  			this->size = new_size;
  2 ( 0.00%)  			this->entries = new_entries;
  .           		}
  .           	}
 30 ( 0.00%)  	(void)remove_duplicate(this, line);
5,316 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:remove_duplicate (10x)
  .           	append_entry(this, line);
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_add(tinyrl_history_t * this, const char *line)
 50 ( 0.00%)  {
 48 ( 0.00%)  	if (this->length && (this->length == this->stifle)) {
  .           		add_n_replace(this, line);
  .           	} else {
  .           		add_n_grow(this, line);
  .           	}
 30 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           tinyrl_history_entry_t *tinyrl_history_remove(tinyrl_history_t * this,
  .           					      unsigned offset)
  .           {
  .           	tinyrl_history_entry_t *result = NULL;
  .           
  .           	if (offset < this->length) {
-- line 217 ----------------------------------------
-- line 228 ----------------------------------------
  .           	/* free all the entries */
  .           	free_entries(this, 0, this->length - 1);
  .           	/* and shuffle the array */
  .           	remove_entries(this, 0, this->length - 1);
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_stifle(tinyrl_history_t * this, unsigned stifle)
  7 ( 0.00%)  {
  .           	/* 
  .           	 * if we are stifling (i.e. non zero value) then 
  .           	 * delete the obsolete entries
  .           	 */
  2 ( 0.00%)  	if (stifle) {
  3 ( 0.00%)  		if (stifle < this->length) {
  .           			unsigned num_deletes = this->length - stifle;
  .           			/* free the entries */
  .           			free_entries(this, 0, num_deletes - 1);
  .           			/* shuffle the array shut */
  .           			remove_entries(this, 0, num_deletes - 1);
  .           		}
  1 ( 0.00%)  		this->stifle = stifle;
  .           	}
  6 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           unsigned tinyrl_history_unstifle(tinyrl_history_t * this)
  .           {
  .           	unsigned result = this->stifle;
  .           
  .           	this->stifle = 0;
  .           
-- line 259 ----------------------------------------
-- line 358 ----------------------------------------
  .           
  .           /*-------------------------------------*/
  .           tinyrl_history_entry_t *tinyrl_history_getfirst(const tinyrl_history_t * this,
  .           						tinyrl_history_iterator_t *
  .           						iter)
  .           {
  .           	tinyrl_history_entry_t *result = NULL;
  .           
  2 ( 0.00%)  	iter->history = this;
  2 ( 0.00%)  	iter->offset = 0;
  .           
  6 ( 0.00%)  	if (this->length) {
  6 ( 0.00%)  		result = this->entries[iter->offset];
  .           	}
  .           	return result;
  .           }
  .           
  .           /*-------------------------------------*/
  .           tinyrl_history_entry_t *tinyrl_history_getnext(tinyrl_history_iterator_t * iter)
  .           {
  2 ( 0.00%)  	tinyrl_history_entry_t *result = NULL;
  .           
108 ( 0.00%)  	if (iter->offset < iter->history->length - 1) {
 32 ( 0.00%)  		iter->offset++;
 48 ( 0.00%)  		result = iter->history->entries[iter->offset];
  .           	}
  .           
  .           	return result;
  2 ( 0.00%)  }
  .           
  .           /*-------------------------------------*/
  .           tinyrl_history_entry_t *tinyrl_history_getlast(const tinyrl_history_t * this,
  .           					       tinyrl_history_iterator_t * iter)
  .           {
  .           	iter->history = this;
  .           	iter->offset = this->length;
  .           
-- line 394 ----------------------------------------
-- line 407 ----------------------------------------
  .           	}
  .           
  .           	return result;
  .           }
  .           
  .           /*-------------------------------------*/
  .           /* Save command history to specified file */
  .           int tinyrl_history_save(const tinyrl_history_t *this, const char *fname)
  4 ( 0.00%)  {
  .           	tinyrl_history_entry_t *entry;
  .           	tinyrl_history_iterator_t iter;
  .           	FILE *f;
  .           
  4 ( 0.00%)  	if (!fname) {
  .           		errno = EINVAL;
  .           		return -1;
  .           	}
  6 ( 0.00%)  	if (!(f = fopen(fname, "w")))
511 ( 0.01%)  => /opt/build/glibc/glibc-2.24/libio/iofopen.c:fopen@@GLIBC_2.2.5 (1x)
  .           		return -1;
 29 ( 0.00%)  	for (entry = tinyrl_history_getfirst(this, &iter);
767 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 31 ( 0.00%)  		entry; entry = tinyrl_history_getnext(&iter)) {
824 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 85 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:tinyrl_history_getnext (8x)
104 ( 0.00%)  		if (fprintf(f, "%s\n", tinyrl_history_entry__get_line(entry)) < 0)
3,184 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,513 ( 0.07%)  => /opt/build/glibc/glibc-2.24/stdio-common/fprintf.c:fprintf (8x)
 18 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry__get_line (9x)
  .           			return -1;
  .           	}
  3 ( 0.00%)  	fclose(f);
679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/libio/iofclose.c:fclose@@GLIBC_2.2.5 (1x)
  .           
  1 ( 0.00%)  	return 0;
  5 ( 0.00%)  }
  .           
  .           /*-------------------------------------*/
  .           /* Restore command history from specified file */
  .           int tinyrl_history_restore(tinyrl_history_t *this, const char *fname)
  5 ( 0.00%)  {
  .           	FILE *f;
  .           	char *p;
  .           	int part_len = 300;
  .           	char *buf;
  1 ( 0.00%)  	int buf_len = part_len;
  1 ( 0.00%)  	int res = 0;
  .           
  4 ( 0.00%)  	if (!fname) {
  .           		errno = EINVAL;
  .           		return -1;
  .           	}
 10 ( 0.00%)  	if (!(f = fopen(fname, "r")))
2,370 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  1 ( 0.00%)  		return 0; /* Can't find history file */
  .           
  5 ( 0.00%)  	buf = malloc(buf_len);
172 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           	p = buf;
 95 ( 0.00%)  	while (fgets(p, buf_len - (p - buf), f)) {
8,840 ( 0.16%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,534 ( 0.03%)  => /opt/build/glibc/glibc-2.24/libio/iofgets.c:fgets (9x)
  .           		char *ptmp = NULL;
 40 ( 0.00%)  		char *el = strchr(buf, '\n');
1,527 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
184 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (8x)
 18 ( 0.00%)  		if (el) { /* The whole line was readed */
  9 ( 0.00%)  			*el = '\0';
 40 ( 0.00%)  			tinyrl_history_add(this, buf);
4,509 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
8,208 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:tinyrl_history_add (8x)
  .           			p = buf;
  9 ( 0.00%)  			continue;
  .           		}
  .           		buf_len += part_len;
  .           		ptmp = realloc(buf, buf_len);
  .           		if (!ptmp) {
  .           			res = -1;
  .           			goto end;
  .           		}
  .           		buf = ptmp;
  .           		p = buf + buf_len - part_len - 1;
  .           	}
  .           end:
  7 ( 0.00%)  	free(buf);
1,633 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  7 ( 0.00%)  	fclose(f);
2,109 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return res;
  7 ( 0.00%)  }
  .           
  .           
  .           /*-------------------------------------*/

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c
--------------------------------------------------------------------------------
Ir           

-- line 14 ----------------------------------------
  .           #include "private.h"
  .           
  .           /*----------------------------------------------------------- */
  .           /*
  .            * search the current viewid string for a variable
  .            */
  .           void clish_shell__expand_viewid(const char *viewid, lub_bintree_t *tree,
  .           	clish_context_t *context)
  6 ( 0.00%)  {
  .           	char *expanded;
  .           	char *q;
  .           	char *saveptr = NULL;
  .           
  3 ( 0.00%)  	expanded = clish_shell_expand(viewid, SHELL_VAR_NONE, context);
 33 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand (1x)
  2 ( 0.00%)  	if (!expanded)
  .           		return;
  .           
  .           	for (q = strtok_r(expanded, ";", &saveptr);
  .           		q; q = strtok_r(NULL, ";", &saveptr)) {
  .           		char *value;
  .           		clish_var_t *var;
  .           
  .           		value = strchr(q, '=');
-- line 36 ----------------------------------------
-- line 39 ----------------------------------------
  .           		*value = '\0';
  .           		value++;
  .           		/* Create var instance */
  .           		var = clish_var_new(q);
  .           		lub_bintree_insert(tree, var);
  .           		clish_var__set_value(var, value);
  .           	}
  .           	lub_string_free(expanded);
  6 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */
  .           /*
  .            * expand context dependent fixed-name variables
  .            */
  .           static char *find_context_var(const char *name, clish_context_t *this)
  .           {
  6 ( 0.00%)  	char *result = NULL;
  3 ( 0.00%)  	clish_shell_t *shell = this->shell;
  .           
 18 ( 0.00%)  	if (!lub_string_nocasecmp(name, "_width")) {
233 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (3x)
  .           		char tmp[5];
  .           		snprintf(tmp, sizeof(tmp), "%u",
  .           			tinyrl__get_width(shell->tinyrl));
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		result = strdup(tmp);
  .           
 18 ( 0.00%)  	} else if (!lub_string_nocasecmp(name, "_height")) {
233 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (3x)
  .           		char tmp[5];
  .           		snprintf(tmp, sizeof(tmp), "%u",
  .           			tinyrl__get_height(shell->tinyrl));
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		result = strdup(tmp);
  .           
 18 ( 0.00%)  	} else if (!lub_string_nocasecmp(name, "_watchdog_timeout")) {
233 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (3x)
  .           		char tmp[5];
  .           		snprintf(tmp, sizeof(tmp), "%u", shell->wdog_timeout);
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		result = strdup(tmp);
  .           
  6 ( 0.00%)  	} else if (!this->cmd) { /* The vars dependent on command */
  .           		return NULL;
  .           
  .           	} else if (!lub_string_nocasecmp(name, "_full_cmd")) {
  .           		result = lub_string_dup(clish_command__get_name(this->cmd));
  .           
  .           	} else if (!lub_string_nocasecmp(name, "_cmd")) {
  .           		result = lub_string_dup(clish_command__get_name(
  .           			clish_command__get_cmd(this->cmd)));
-- line 86 ----------------------------------------
-- line 143 ----------------------------------------
  .           		result = clish_shell__get_pwd_full(shell, depth);
  .           	}
  .           
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *find_var(const char *name, lub_bintree_t *tree, clish_context_t *context)
 48 ( 0.00%)  {
 18 ( 0.00%)  	clish_var_t *var = lub_bintree_find(tree, name);
204 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (6x)
  .           	char *value;
  .           	bool_t dynamic;
  .           	char *res = NULL;
  .           
 12 ( 0.00%)  	if (!var)
 12 ( 0.00%)  		return NULL;
  .           
  .           	/* Try to get saved value for static var */
  .           	dynamic = clish_var__get_dynamic(var);
  .           	if (!dynamic) {
  .           		char *saved = clish_var__get_saved(var);
  .           		if (saved)
  .           			return lub_string_dup(saved);
  .           	}
-- line 166 ----------------------------------------
-- line 183 ----------------------------------------
  .           		res = out;
  .           	}
  .           
  .           	/* Save value for static var */
  .           	if (!dynamic && res)
  .           		clish_var__set_saved(var, res);
  .           
  .           	return res;
 36 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *find_global_var(const char *name, clish_context_t *context)
  .           {
  9 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (3x)
 12 ( 0.00%)  	return find_var(name, &shell->var_tree, context);
165 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:find_var (3x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *find_viewid_var(const char *name, clish_context_t *context)
  .           {
 12 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (3x)
 13 ( 0.00%)  	int depth = clish_shell__get_depth(shell);
665 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_depth (2x)
  6 ( 0.00%)  	if (depth < 0)
  .           		return NULL;
 24 ( 0.00%)  	return find_var(name, &shell->pwdv[depth]->viewid, context);
165 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:find_var (3x)
  .           }
  .           
  .           static char * chardiff(const char *syms, const char *minus)
  .           {
  .           	char *dst = malloc(strlen(syms) + 1);
  .           	char *p = dst;
  .           	const char *src;
  .           
-- line 215 ----------------------------------------
-- line 225 ----------------------------------------
  .           /*
  .            * return the next segment of text from the provided string
  .            * segments are delimited by variables within the string.
  .            */
  .           static char *expand_nextsegment(const char **string, const char *escape_chars,
  .           	clish_context_t *this)
  .           {
  .           	const char *p = *string;
 12 ( 0.00%)  	char *result = NULL;
  .           	size_t len = 0;
  .           
 24 ( 0.00%)  	if (!p)
  .           		return NULL;
  .           
 36 ( 0.00%)  	if (*p && (p[0] == '$') && (p[1] == '{')) {
  .           		/* start of a variable */
  .           		const char *tmp;
  3 ( 0.00%)  		p += 2;
  .           		tmp = p;
  .           
  .           		/*
  .           		 * find the end of the variable 
  .           		 */
255 ( 0.00%)  		while (*p && p++[0] != '}')
 39 ( 0.00%)  			len++;
  .           
  .           		/* ignore non-terminated variables */
  6 ( 0.00%)  		if (p[-1] == '}') {
  .           			bool_t valid = BOOL_FALSE;
  .           			char *text, *q;
  .           			char *saveptr = NULL;
  .           
  .           			/* get the variable text */
 12 ( 0.00%)  			text = lub_string_dupn(tmp, len);
467 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (3x)
  .           			/*
  .           			 * tokenise this INTO ':' separated words
  .           			 * and either expand or duplicate into the result string.
  .           			 * Only return a result if at least 
  .           			 * of the words is an expandable variable
  .           			 */
  .           			for (q = strtok_r(text, ":", &saveptr);
  .           				q; q = strtok_r(NULL, ":", &saveptr)) {
  .           				char *var;
  .           				int mod_quote = 0; /* quote modifier */
  .           				int mod_esc = 0; /* internal escape modifier */
  .           				int mod_esc_chars = 1; /* escaping */
  4 ( 0.00%)  				int mod_esc_dec = 0; /* remove internal chars from escaping */
  .           				char *space;
  3 ( 0.00%)  				char *all_esc = NULL;
  .           
  .           				/* Search for modifiers */
 43 ( 0.00%)  				while (*q && !isalpha(*q)) {
1,587 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (2x)
  4 ( 0.00%)  					if ('#' == *q) {
  .           						mod_quote = 1;
  .           						mod_esc = 1;
  4 ( 0.00%)  					} else if ('\\' == *q) {
  .           						mod_esc = 1;
  4 ( 0.00%)  					} else if ('!' == *q) {
  .           						mod_quote = 1;
  .           						mod_esc = 1;
  .           						mod_esc_chars = 0;
  4 ( 0.00%)  					} else if ('~' == *q) {
  .           						mod_esc = 1;
  .           						mod_esc_chars = 0;
  .           					/* Internal automatic variable like ${__line} */
  8 ( 0.00%)  					} else if (('_' == *q) && ('_' == *(q+1))) {
  .           						mod_esc_dec = 1;
  .           						q++;
  .           						break;
  .           					/* No escaping at all. Usefull for macros VAR */
  .           					} else if ('^' == *q) {
  .           						mod_quote = 0;
  .           						mod_esc = 0;
  .           						mod_esc_chars = 0;
  .           					} else
  .           						break;
  .           					q++;
  .           				}
  .           
  .           				/* Get clean variable value */
 19 ( 0.00%)  				var = clish_shell_expand_var(q, this);
4,400 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,682 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand_var (2x)
  6 ( 0.00%)  				if (!var) {
 15 ( 0.00%)  					lub_string_cat(&result, q);
876 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (3x)
  .           					continue;
  .           				}
  9 ( 0.00%)  				valid = BOOL_TRUE;
  .           
  .           				/* Quoting */
  .           				if (mod_quote)
  .           					space = strchr(var, ' ');
  .           				if (mod_quote && space)
  .           					lub_string_cat(&result, "\"");
  .           
  .           				/* Escape special chars */
-- line 318 ----------------------------------------
-- line 322 ----------------------------------------
  .           						all_esc = chardiff(escape_chars,
  .           							lub_string_esc_quoted);
  .           					else
  .           						all_esc = lub_string_dup(escape_chars);
  .           				}
  .           
  .           				/* Internal escaping */
  .           				if (mod_esc)
  9 ( 0.00%)  					lub_string_cat(&all_esc,
  .           						lub_string_esc_quoted);
  .           
  .           				/* Real escaping */
  .           				if (all_esc) {
  .           					char *tstr = lub_string_encode(var,
  .           						all_esc);
  .           					lub_string_free(var);
  .           					var = tstr;
-- line 338 ----------------------------------------
-- line 344 ----------------------------------------
  .           
  .           				/* Quoting */
  .           				if (mod_quote && space)
  .           					lub_string_cat(&result, "\"");
  .           
  .           				lub_string_free(var);
  .           			}
  .           
 12 ( 0.00%)  			if (!valid) {
  .           				/* not a valid variable expansion */
  9 ( 0.00%)  				lub_string_free(result);
270 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 15 ( 0.00%)  				result = lub_string_dup("");
468 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           			}
  .           
  .           			/* finished with the variable text */
 12 ( 0.00%)  			lub_string_free(text);
270 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
  .           		}
  .           	} else {
  .           		/* find the start of a variable */
199 ( 0.00%)  		while (*p) {
 98 ( 0.00%)  			if ((p[0] == '$') && (p[1] == '{'))
  .           				break;
 47 ( 0.00%)  			len++;
 47 ( 0.00%)  			p++;
  .           		}
  6 ( 0.00%)  		if (len > 0)
 21 ( 0.00%)  			result = lub_string_dupn(*string, len);
496 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (3x)
  .           	}
  .           	/* move the string pointer on for next time... */
  .           	*string = p;
  .           
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           /*
  .            * This function builds a dynamic string based on that provided
  .            * subtituting each occurance of a "${FRED}" type variable sub-string
  .            * with the appropriate value.
  .            */
  .           char *clish_shell_expand(const char *str, clish_shell_var_e vtype, clish_context_t *context)
 66 ( 0.00%)  {
  6 ( 0.00%)  	char *seg, *result = NULL;
  6 ( 0.00%)  	const char *escape_chars = NULL;
 12 ( 0.00%)  	const clish_command_t *cmd = clish_context__get_cmd(context);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_cmd (6x)
  .           
  .           	/* Escape special characters */
 12 ( 0.00%)  	if (SHELL_VAR_REGEX == vtype) {
  .           		if (cmd)
  .           			escape_chars = clish_command__get_regex_chars(cmd);
  .           		if (!escape_chars)
  .           			escape_chars = lub_string_esc_regex;
 12 ( 0.00%)  	} else if (SHELL_VAR_ACTION == vtype) {
  4 ( 0.00%)  		if (cmd)
 12 ( 0.00%)  			escape_chars = clish_command__get_escape_chars(cmd);
743 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_escape_chars (1x)
  4 ( 0.00%)  		if (!escape_chars)
  8 ( 0.00%)  			escape_chars = lub_string_esc_default;
  .           	}
  .           
  .           	/* read each segment and extend the result */
 18 ( 0.00%)  	while ((seg = expand_nextsegment(&str, escape_chars, context))) {
 36 ( 0.00%)  		lub_string_cat(&result, seg);
1,800 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (6x)
 18 ( 0.00%)  		lub_string_free(seg);
540 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (6x)
  .           	}
  .           
  6 ( 0.00%)  	return result;
 48 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_shell__get_params(clish_context_t *context)
  .           {
  .           	clish_pargv_t *pargv = clish_context__get_pargv(context);
  .           	char *line = NULL;
  .           	unsigned i, cnt;
  .           	const clish_param_t *param;
-- line 418 ----------------------------------------
-- line 438 ----------------------------------------
  .           	line = clish_shell_expand(request, SHELL_VAR_NONE, context);
  .           	lub_string_free(request);
  .           
  .           	return line;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *internal_get_line(clish_context_t *context, int cmd_type)
  7 ( 0.00%)  {
  3 ( 0.00%)  	const clish_command_t *cmd = clish_context__get_cmd(context);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_cmd (1x)
  8 ( 0.00%)  	clish_pargv_t *pargv = clish_context__get_pargv(context);
679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  1 ( 0.00%)  	char *line = NULL;
  .           	char *params = NULL;
  .           
  2 ( 0.00%)  	if (0 == cmd_type) /* __cmd */
  8 ( 0.00%)  		lub_string_cat(&line, clish_command__get_name(
667 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			clish_command__get_cmd(cmd)));
  .           	else /* __full_cmd */
 11 ( 0.00%)  		lub_string_cat(&line, clish_command__get_name(cmd));
673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
256 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  .           
  2 ( 0.00%)  	if (!pargv)
  .           		return line;
  .           
  .           	params = clish_shell__get_params(context);
  .           	if (params) {
  .           		lub_string_cat(&line, " ");
  .           		lub_string_cat(&line, params);
  .           	}
  .           	lub_string_free(params);
  .           
  1 ( 0.00%)  	return line;
  6 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_shell__get_line(clish_context_t *context)
  .           {
  2 ( 0.00%)  	return internal_get_line(context, 0); /* __cmd */
2,326 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:internal_get_line (1x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_shell__get_full_line(clish_context_t *context)
  .           {
  .           	return internal_get_line(context, 1); /* __full_cmd */
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_shell_expand_var(const char *name, clish_context_t *context)
  .           {
 13 ( 0.00%)  	return clish_shell_expand_var_ex(name, context, SHELL_EXPAND_ALL);
3,732 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,676 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand_var_ex (2x)
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           char *clish_shell_expand_var_ex(const char *name, clish_context_t *context, clish_shell_expand_e flags)
 21 ( 0.00%)  {
  .           	clish_shell_t *this;
  .           	const clish_command_t *cmd;
  .           	clish_pargv_t *pargv;
  .           	const char *tmp = NULL;
  .           	char *string = NULL;
  .           
  6 ( 0.00%)  	assert(name);
 12 ( 0.00%)  	if (!context)
  .           		return NULL;
 15 ( 0.00%)  	this = clish_context__get_shell(context);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (3x)
 12 ( 0.00%)  	cmd = clish_context__get_cmd(context);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_cmd (3x)
  9 ( 0.00%)  	pargv = clish_context__get_pargv(context);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_pargv (3x)
  .           
  .           	/* try and substitute a parameter value */
  6 ( 0.00%)  	if (pargv && (flags & SHELL_EXPAND_PARAM)) {
  .           		const clish_parg_t *parg = clish_pargv_find_arg(pargv, name);
  .           		if (parg)
  .           			tmp = clish_parg__get_value(parg);
  .           	}
  .           
  .           	/* try and substitute the param's default */
  6 ( 0.00%)  	if (!tmp && cmd && (flags & SHELL_EXPAND_PARAM))
  .           		tmp = clish_paramv_find_default(
  .           			clish_command__get_paramv(cmd), name);
  .           
  .           	/* try and substitute a viewId variable */
 21 ( 0.00%)  	if (!tmp && this && (flags & SHELL_EXPAND_VIEW))
  .           		tmp = string = find_viewid_var(name, context);
  .           
  .           	/* try and substitute context fixed variable */
 12 ( 0.00%)  	if (!tmp && (flags & SHELL_EXPAND_CONTEXT))
  .           		tmp = string = find_context_var(name, context);
  .           
  .           	/* try and substitute a global var value */
 12 ( 0.00%)  	if (!tmp && this && (flags & SHELL_EXPAND_VAR))
  .           		tmp = string = find_global_var(name, context);
  .           
  .           	/* get the contents of an environment variable */
 18 ( 0.00%)  	if (!tmp && (flags & SHELL_EXPAND_ENV))
 16 ( 0.00%)  		tmp = getenv(name);
1,860 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
760 ( 0.01%)  => /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv (2x)
  .           
  9 ( 0.00%)  	if (string)
  .           		return string;
 12 ( 0.00%)  	return lub_string_dup(tmp);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 27 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c
--------------------------------------------------------------------------------
Ir           

-- line 38 ----------------------------------------
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include <assert.h>
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           int lub_bintree_insert(lub_bintree_t * this, void *clientnode)
176 ( 0.00%)  {
 19 ( 0.00%)  	int result = -1;
  .           	lub_bintree_node_t *new;
  .           	lub_bintree_key_t key;
  .           
132 ( 0.00%)  	assert(clientnode);
  .           	if (NULL != clientnode) {
  .           		/* obtain the control block from the clientnode */
132 ( 0.00%)  		new = lub_bintree_getnode(this, clientnode);
  .           
  .           		/* check this node is not currently in another tree */
 88 ( 0.00%)  		assert(new->left == NULL);
 88 ( 0.00%)  		assert(new->right == NULL);
  .           
  .           		/* add this node to the splay tree */
  .           
  .           		/* Insert "node" into the tree , unless it's already there. */
 88 ( 0.00%)  		if (NULL == this->root) {
  .           			this->root = new;
  .           			this->root->left = this->root->right = NULL;
  .           			result = 0;
  .           		} else {
  .           			int comp;
  .           			/* get a key from the node */
 74 ( 0.00%)  			this->getkeyFn(clientnode, &key);
1,588 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_getkey (4x)
563 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_getkey (21x)
325 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_getkey (12x)
  .           
  .           			/* do the biz */
222 ( 0.00%)  			this->root = lub_bintree_splay(this, this->root, &key);
5,826 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (37x)
  .           
  .           			/*
  .           			 * compare the new key with the detail found
  .           			 * in the tree
  .           			 */
148 ( 0.00%)  			comp = lub_bintree_compare(this, this->root, &key);
1,579 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (21x)
276 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (12x)
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (4x)
 74 ( 0.00%)  			if (comp > 0) {
 54 ( 0.00%)  				new->left = this->root->left;
 18 ( 0.00%)  				new->right = this->root;
 18 ( 0.00%)  				this->root->left = NULL;
  .           				result = 0;
 19 ( 0.00%)  			} else if (comp < 0) {
 57 ( 0.00%)  				new->right = this->root->right;
 19 ( 0.00%)  				new->left = this->root;
 38 ( 0.00%)  				this->root->right = NULL;
  .           				result = 0;
  .           			} else {
  .           				/* We get here if it's already in the tree */
  .           			}
  .           		}
  .           		if (0 == result) {
  .           			/* update the tree root */
 88 ( 0.00%)  			this->root = new;
  .           		}
  .           	}
  .           	/* added OK */
  .           	return result;
220 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c
--------------------------------------------------------------------------------
Ir           

-- line 23 ----------------------------------------
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_compare(const void *first, const void *second)
  .           {
  .           	const clish_sym_t *f = (const clish_sym_t *)first;
  .           	const clish_sym_t *s = (const clish_sym_t *)second;
  .           
180 ( 0.00%)  	return strcmp(f->name, s->name);
1,281 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (45x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_sym_new(const char *name, void *func, int type)
168 ( 0.00%)  {
  .           	clish_sym_t *this;
  .           
 84 ( 0.00%)  	this = malloc(sizeof(*this));
4,345 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (21x)
 88 ( 0.00%)  	this->name = lub_string_dup(name);
3,827 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (20x)
782 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 21 ( 0.00%)  	this->func = func;
 21 ( 0.00%)  	this->type = type;
 21 ( 0.00%)  	this->api = CLISH_SYM_API_SIMPLE;
 21 ( 0.00%)  	this->permanent = BOOL_FALSE;
  .           
  .           	return this;
147 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym_free(clish_sym_t *this)
 42 ( 0.00%)  {
 42 ( 0.00%)  	if (!this)
  .           		return;
 63 ( 0.00%)  	lub_string_free(this->name);
1,728 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (21x)
 63 ( 0.00%)  	free(this);
1,848 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
 21 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_func(clish_sym_t *this, void *func)
  .           {
  .           	this->func = func;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void *clish_sym__get_func(clish_sym_t *this)
  .           {
 11 ( 0.00%)  	return this->func;
 11 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_permanent(clish_sym_t *this, bool_t permanent)
  .           {
 26 ( 0.00%)  	this->permanent = permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_sym__get_permanent(clish_sym_t *this)
  .           {
  .           	return this->permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_name(clish_sym_t *this, const char *name)
 15 ( 0.00%)  {
  9 ( 0.00%)  	lub_string_free(this->name);
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 12 ( 0.00%)  	this->name = lub_string_dup(name);
885 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 12 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_sym__get_name(clish_sym_t *this)
  .           {
 51 ( 0.00%)  	return this->name;
 51 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_plugin(clish_sym_t *this, clish_plugin_t *plugin)
  .           {
 26 ( 0.00%)  	this->plugin = plugin;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_sym__get_plugin(clish_sym_t *this)
  .           {
  .           	return this->plugin;
  .           }
  .           
-- line 106 ----------------------------------------
-- line 108 ----------------------------------------
  .           void clish_sym__set_type(clish_sym_t *this, int type)
  .           {
  .           	this->type = type;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym__get_type(const clish_sym_t *this)
  .           {
 13 ( 0.00%)  	return this->type;
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_api(clish_sym_t *this, clish_sym_api_e api)
  .           {
  2 ( 0.00%)  	this->api = api;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_api_e clish_sym__get_api(const clish_sym_t *this)
  .           {
  3 ( 0.00%)  	return this->api;
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_clone(clish_sym_t *dst, clish_sym_t *src)
  .           {
  .           	char *name;
  .           
 24 ( 0.00%)  	if (!dst || !src)
  .           		return -1;
  6 ( 0.00%)  	name = dst->name;
 60 ( 0.00%)  	*dst = *src;
  6 ( 0.00%)  	dst->name = name;
  .           
 12 ( 0.00%)  	return 0;
  .           }
  .           
  .           /**********************************************************
  .            * PLUGIN functions                                       *
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_plugin_new(const char *name)
  4 ( 0.00%)  {
  .           	clish_plugin_t *this;
  .           
  4 ( 0.00%)  	this = malloc(sizeof(*this));
114 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           
  4 ( 0.00%)  	this->name = lub_string_dup(name);
383 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  1 ( 0.00%)  	this->conf = NULL;
  1 ( 0.00%)  	this->alias = NULL;
  1 ( 0.00%)  	this->file = NULL;
  1 ( 0.00%)  	this->builtin_flag = BOOL_FALSE; /* The plugin is shared object by default */
  1 ( 0.00%)  	this->dlhan = NULL;
  .           	/* Initialise the list of symbols */
  4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
175 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
  .           	/* Constructor and destructor */
  1 ( 0.00%)  	this->init = NULL;
  1 ( 0.00%)  	this->fini = NULL;
  .           	/* Flags */
  1 ( 0.00%)  	this->rtld_global = BOOL_FALSE; /* The dlopen() use RTLD_LOCAL by default */
  .           
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_free(clish_plugin_t *this, void *userdata)
  5 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return;
  .           
  .           	/* Execute destructor */
  3 ( 0.00%)  	if (this->fini)
  .           		this->fini(userdata, this);
  .           
  3 ( 0.00%)  	lub_string_free(this->name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->alias);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->file);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->conf);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  .           
  .           	/* Free symbol list */
 85 ( 0.00%)  	while ((iter = lub_list__get_head(this->syms))) {
 28 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (14x)
  .           		/* Remove the symbol from the list */
 53 ( 0.00%)  		lub_list_del(this->syms, iter);
143 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_del (13x)
  .           		/* Free the instance */
 82 ( 0.00%)  		clish_sym_free((clish_sym_t *)lub_list_node__get_data(iter));
786 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,268 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_free (12x)
 26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (13x)
 43 ( 0.00%)  		lub_list_node_free(iter);
946 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,080 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_free (12x)
  .           	}
  6 ( 0.00%)  	lub_list_free(this->syms);
844 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           #ifdef HAVE_DLFCN_H
  3 ( 0.00%)  	if (this->dlhan)
  6 ( 0.00%)  		dlclose(this->dlhan);
3,766 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           #endif
  3 ( 0.00%)  	free(this);
 88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_generic(clish_plugin_t *this,
  .           	void *func, const char *name, int type, bool_t permanent)
 39 ( 0.00%)  {
  .           	clish_sym_t *sym;
  .           
 91 ( 0.00%)  	if (!name || !func)
  .           		return NULL;
  .           
 91 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
6,439 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (13x)
  .           		return NULL;
 56 ( 0.00%)  	clish_sym__set_plugin(sym, this);
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_plugin (12x)
 56 ( 0.00%)  	clish_sym__set_permanent(sym, permanent);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_permanent (12x)
 52 ( 0.00%)  	lub_list_add(this->syms, sym);
4,289 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (13x)
  .           
  .           	return sym;
 65 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_sym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
  .           	return clish_plugin_add_generic(this, func,
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_psym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
 36 ( 0.00%)  	return clish_plugin_add_generic(this, func,
8,152 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (9x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_osym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  1 ( 0.00%)  {
  .           	clish_sym_t *s;
  .           
  7 ( 0.00%)  	if (!(s = clish_plugin_add_generic(this, func,
951 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (1x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE)))
  .           		return s;
  8 ( 0.00%)  	clish_sym__set_api(s, CLISH_SYM_API_STDOUT);
631 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return s;
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_posym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  .           {
  .           	clish_sym_t *s;
  .           
-- line 261 ----------------------------------------
-- line 274 ----------------------------------------
  .           	return clish_plugin_add_generic(this, func,
  .           		name, type, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_phook(clish_plugin_t *this,
  .           	void *func, const char *name, int type)
  .           {
 13 ( 0.00%)  	return clish_plugin_add_generic(this, func,
2,509 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,633 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (2x)
  .           		name, type, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_add_fini(clish_plugin_t *this,
  .           	clish_plugin_fini_t *fini)
  .           {
  .           	this->fini = fini;
-- line 290 ----------------------------------------
-- line 306 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           clish_plugin_init_t * clish_plugin_get_init(clish_plugin_t *this)
  .           {
  .           	return this->init;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_get_sym(clish_plugin_t *this, const char *name, int type)
 42 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           	clish_sym_t *sym;
  .           
  .           	/* Iterate elements */
 86 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (6x)
100 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (25x)
  .           		int res;
124 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (31x)
217 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
676 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (31x)
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (31x)
104 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
  .           			return sym;
 25 ( 0.00%)  		if (res > 0) /* No chances to find name */
  .           			break;
  .           	}
  .           
  .           	return NULL;
 42 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static int clish_plugin_load_shared(clish_plugin_t *this)
  .           {
  .           #ifdef HAVE_DLFCN_H
  1 ( 0.00%)  	char *file = NULL; /* Plugin so file name */
  1 ( 0.00%)  	char *init_name = NULL; /* Init function name */
  .           	int flag = RTLD_NOW;
  .           
  3 ( 0.00%)  	if (this->file) {
  .           		file = lub_string_dup(this->file);
  .           	} else {
  4 ( 0.00%)  		lub_string_cat(&file, "clish_plugin_");
410 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  		lub_string_cat(&file, this->name);
264 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  5 ( 0.00%)  		lub_string_cat(&file, ".so");
272 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  .           	}
  .           
  .           	/* Open dynamic library */
  7 ( 0.00%)  	if (clish_plugin__get_rtld_global(this))
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  		flag |= RTLD_GLOBAL;
  .           	else
  .           		flag |= RTLD_LOCAL;
  8 ( 0.00%)  	this->dlhan = dlopen(file, flag);
133,888 ( 2.48%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(file);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  2 ( 0.00%)  	if (!this->dlhan) {
  .           		fprintf(stderr, "Error: Can't open plugin \"%s\": %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	/* Get plugin init function */
  5 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_PREFIX);
295 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, this->name);
264 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_SUFFIX);
282 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  9 ( 0.00%)  	this->init = (clish_plugin_init_t *)dlsym(this->dlhan, init_name);
4,005 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(init_name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	if (!this->init) {
  .           		fprintf(stderr, "Error: Can't get plugin \"%s\" init function: %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	return 0;
  .           #else /* HAVE_DLFCN_H */
  .           	/* We have no any dl functions. */
-- line 376 ----------------------------------------
-- line 377 ----------------------------------------
  .           	fprintf(stderr, "Error: Can't get plugin \"%s\" init function.\n",
  .           		this->name);
  .           	return -1;
  .           #endif /* HAVE_DLFCN_H */
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_plugin_load(clish_plugin_t *this, void *userdata)
  4 ( 0.00%)  {
  .           	int res;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return -1;
  5 ( 0.00%)  	assert(this->name);
  .           
  .           	/* Builtin plugins already have init function. */
  3 ( 0.00%)  	if (!this->builtin_flag) {
  .           		if (clish_plugin_load_shared(this) < 0)
  .           			return -1;
  .           	}
  .           	if (!this->init) {
  .           		fprintf(stderr, "Error: PLUGIN %s has no init function\n",
  .           			this->name);
  .           		return -1;
  .           	}
  .           	/* Execute init function */
  6 ( 0.00%)  	if ((res = this->init(userdata, this)))
14,017 ( 0.26%)  => /home/ykuznetsov/klish-2.1.3/plugins/clish/builtin_init.c:clish_plugin_clish_init (1x)
  .           		fprintf(stderr, "Error: Plugin %s init retcode: %d\n",
  .           			this->name, res);
  .           
  .           	return res;
  6 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_name(const clish_plugin_t *this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 416 ----------------------------------------
-- line 424 ----------------------------------------
  .           char *clish_plugin__get_alias(const clish_plugin_t *this)
  .           {
  .           	return this->alias;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_pubname(const clish_plugin_t *this)
  .           {
 12 ( 0.00%)  	return (this->alias ? this->alias : this->name);
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin__set_file(clish_plugin_t *this, const char *file)
  .           {
  .           	lub_string_free(this->file);
  .           	this->file = lub_string_dup(file);
  .           }
  .           
-- line 441 ----------------------------------------
-- line 474 ----------------------------------------
  .           void clish_plugin__set_rtld_global(clish_plugin_t *this, bool_t rtld_global)
  .           {
  .           	this->rtld_global = rtld_global;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_plugin__get_rtld_global(const clish_plugin_t *this)
  .           {
  1 ( 0.00%)  	return this->rtld_global;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/list/list.c
--------------------------------------------------------------------------------
Ir           

-- line 3 ----------------------------------------
  .           #include <string.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           static inline void lub_list_init(lub_list_t * this,
  .           	lub_list_compare_fn compareFn)
  .           {
 10 ( 0.00%)  	this->head = NULL;
 10 ( 0.00%)  	this->tail = NULL;
 10 ( 0.00%)  	this->compareFn = compareFn;
 10 ( 0.00%)  	this->len = 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_t *lub_list_new(lub_list_compare_fn compareFn)
 20 ( 0.00%)  {
  .           	lub_list_t *this;
  .           
 34 ( 0.00%)  	this = malloc(sizeof(*this));
1,645 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,287 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (9x)
 20 ( 0.00%)  	assert(this);
  .           	lub_list_init(this, compareFn);
  .           
  .           	return this;
 20 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void lub_list_free(lub_list_t *this)
  .           {
128 ( 0.00%)  	free(this);
880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list__get_head(lub_list_t *this)
  .           {
  .           	return this->head;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list__get_tail(lub_list_t *this)
  .           {
  4 ( 0.00%)  	return this->tail;
  4 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static inline void lub_list_node_init(lub_list_node_t *this,
  .           	void *data)
  .           {
 40 ( 0.00%)  	this->prev = this->next = NULL;
 20 ( 0.00%)  	this->data = data;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_node_t *lub_list_node_new(void *data)
 40 ( 0.00%)  {
  .           	lub_list_node_t *this;
  .           
 60 ( 0.00%)  	this = malloc(sizeof(*this));
3,899 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (20x)
 40 ( 0.00%)  	assert(this);
  .           	lub_list_node_init(this, data);
  .           
  .           	return this;
 40 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list_iterator_init(lub_list_t *this)
  .           {
  .           	return this->head;
 66 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list_node__get_prev(lub_list_node_t *this)
  .           {
  .           	return this->prev;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 79 ----------------------------------------
-- line 92 ----------------------------------------
  .           inline lub_list_node_t *lub_list_iterator_prev(lub_list_node_t *this)
  .           {
  .           	return lub_list_node__get_prev(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void lub_list_node_free(lub_list_node_t *this)
  .           {
 40 ( 0.00%)  	free(this);
1,760 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (20x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void *lub_list_node__get_data(lub_list_node_t *this)
  .           {
 68 ( 0.00%)  	return this->data;
 68 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_node_t *lub_list_add(lub_list_t *this, void *data)
 80 ( 0.00%)  {
 84 ( 0.00%)  	lub_list_node_t *node = lub_list_node_new(data);
4,013 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_new (19x)
882 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	lub_list_node_t *iter;
  .           
 20 ( 0.00%)  	this->len++;
  .           
  .           	/* Empty list */
 60 ( 0.00%)  	if (!this->head) {
  3 ( 0.00%)  		this->head = node;
  3 ( 0.00%)  		this->tail = node;
  .           		return node;
  .           	}
  .           
  .           	/* Not sorted list. Add to the tail. */
 51 ( 0.00%)  	if (!this->compareFn) {
  .           		node->prev = this->tail;
  .           		node->next = NULL;
  .           		this->tail->next = node;
  .           		this->tail = node;
  .           		return node;
  .           	}
  .           
  .           	/* Sorted list */
 17 ( 0.00%)  	iter = this->tail;
122 ( 0.00%)  	while (iter) {
225 ( 0.00%)  		if (this->compareFn(node->data, iter->data) >= 0) {
1,461 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_compare (45x)
 30 ( 0.00%)  			node->next = iter->next;
 15 ( 0.00%)  			node->prev = iter;
 15 ( 0.00%)  			iter->next = node;
 45 ( 0.00%)  			if (node->next)
  8 ( 0.00%)  				node->next->prev = node;
  .           			break;
  .           		}
 30 ( 0.00%)  		iter = iter->prev;
  .           	}
  .           	/* Insert node into the list head */
  .           	if (!iter) {
  2 ( 0.00%)  		node->next = this->head;
  2 ( 0.00%)  		node->prev = NULL;
  2 ( 0.00%)  		this->head->prev = node;
  2 ( 0.00%)  		this->head = node;
  .           	}
  .           	if (!node->next)
  7 ( 0.00%)  		this->tail = node;
  .           
  .           	return node;
102 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void lub_list_del(lub_list_t *this, lub_list_node_t *node)
  .           {
 60 ( 0.00%)  	if (node->prev)
 20 ( 0.00%)  		node->prev->next = node->next;
  .           	else
 40 ( 0.00%)  		this->head = node->next;
 40 ( 0.00%)  	if (node->next)
 17 ( 0.00%)  		node->next->prev = node->prev;
  .           	else
  3 ( 0.00%)  		this->tail = node->prev;
  .           
 40 ( 0.00%)  	this->len--;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void lub_list_node_copy(lub_list_node_t *dst, lub_list_node_t *src)
  .           {
  .           	memcpy(dst, src, sizeof(lub_list_node_t));
  .           }
  .           
-- line 179 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c
--------------------------------------------------------------------------------
Ir          

-- line 9 ----------------------------------------
 .           #include "lub/string.h"
 .           #include "lub/list.h"
 .           #include "lub/bintree.h"
 .           #include "clish/plugin.h"
 .           #include "clish/view.h"
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_plugin_t * clish_shell_find_plugin(clish_shell_t *this, const char *name)
 3 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           
 2 ( 0.00%)  	assert(this);
 .           
 5 ( 0.00%)  	if (!name || !name[0])
 1 ( 0.00%)  		return NULL;
 .           	/* Iterate elements */
 7 ( 0.00%)  	for(iter = lub_list__get_head(this->plugins);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 .           		iter; iter = lub_list_node__get_next(iter)) {
 .           		plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 .           		if (!strcmp(name, clish_plugin__get_name(plugin)))
 .           			return plugin;
 .           	}
 .           
 .           	return NULL;
 5 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_plugin_t * clish_shell_find_create_plugin(clish_shell_t *this,
 .           	const char *name)
 3 ( 0.00%)  {
 .           	clish_plugin_t *plugin;
 2 ( 0.00%)  	assert(this);
 .           
 6 ( 0.00%)  	if (!name || !name[0])
 1 ( 0.00%)  		return NULL;
 .           
 7 ( 0.00%)  	plugin = clish_shell_find_plugin(this, name);
710 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 2 ( 0.00%)  	if (plugin)
 .           		return plugin;
 8 ( 0.00%)  	plugin = clish_plugin_new(name);
1,322 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 4 ( 0.00%)  	lub_list_add(this->plugins, plugin);
249 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (1x)
 .           
 1 ( 0.00%)  	return plugin;
 5 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* For all plugins:
 .            *  * dlopen(plugin)
 .            *  * dlsym(initialize function)
 .            *  * exec init functions to get all plugin syms
 .            */
 .           int clish_shell_load_plugins(clish_shell_t *this)
 3 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           
 3 ( 0.00%)  	assert(this);
 .           
 .           	/* Iterate elements */
 8 ( 0.00%)  	for(iter = lub_list__get_head(this->plugins);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 4 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (1x)
 3 ( 0.00%)  		plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (1x)
10 ( 0.00%)  		if (clish_plugin_load(plugin, (void *)this))
155,313 ( 2.88%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           			return -1;
 .           #ifdef DEBUG
 .           		clish_plugin_dump(plugin);
 .           #endif
 .           	}
 .           
 1 ( 0.00%)  	return 0;
 4 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Iterate plugins to find symbol by name.
 .            * The symbol name can be simple or with namespace:
 .            * mysym@plugin1
 .            * The symbols with suffix will be resolved using specified plugin only.
 .            */
 .           static clish_sym_t *plugins_find_sym(clish_shell_t *this, const char *name, int type)
 .           {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           	clish_sym_t *sym = NULL;
 .           	/* To parse command name */
 6 ( 0.00%)  	char *saveptr = NULL;
 .           	const char *delim = "@";
 .           	char *plugin_name = NULL;
 .           	char *cmdn = NULL;
24 ( 0.00%)  	char *str = lub_string_dup(name);
1,045 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (6x)
 .           
 .           	assert(this);
 .           
 .           	/* Parse name to get sym name and optional plugin name */
42 ( 0.00%)  	cmdn = strtok_r(str, delim, &saveptr);
1,583 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
597 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r (5x)
12 ( 0.00%)  	if (!cmdn) {
 .           		lub_string_free(str);
 .           		return NULL;
 .           	}
36 ( 0.00%)  	plugin_name = strtok_r(NULL, delim, &saveptr);
483 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r (6x)
 .           
12 ( 0.00%)  	if (plugin_name) {
 .           		/* Search for symbol in specified namespace */
 .           		/* Iterate elements */
27 ( 0.00%)  		for(iter = lub_list__get_head(this->plugins);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 .           			iter; iter = lub_list_node__get_next(iter)) {
12 ( 0.00%)  			plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
31 ( 0.00%)  			if (strcmp(clish_plugin__get_pubname(plugin), plugin_name))
730 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (3x)
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin__get_pubname (2x)
 .           				continue;
21 ( 0.00%)  			if ((sym = clish_plugin_get_sym(plugin, cmdn, type)))
984 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym (3x)
 .           				break;
 .           		}
 .           	} else {
 .           		/* Iterate all plugins */
15 ( 0.00%)  		for(iter = lub_list__get_head(this->plugins);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 .           			iter; iter = lub_list_node__get_next(iter)) {
 9 ( 0.00%)  			plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
28 ( 0.00%)  			if ((sym = clish_plugin_get_sym(plugin, cmdn, type)))
722 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
561 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym (2x)
 .           				break;
 .           		}
 .           	}
24 ( 0.00%)  	lub_string_free(str);
540 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (6x)
 .           
 .           	return sym;
 .           }
 .           
 .           /*--------------------------------------------------------- */
 .           /* Find symbol by name in the list of unresolved symbols */
 .           clish_sym_t *clish_shell_find_sym(clish_shell_t *this, const char *name, int type)
28 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_sym_t *sym;
 .           
 .           	/* Iterate elements */
31 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
853 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 8 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
900 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		int res;
20 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
877 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
32 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
639 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
84 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (4x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (3x)
19 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           			return sym;
 3 ( 0.00%)  		if (res > 0) /* No chance to find name */
 .           			break;
 .           	}
 .           
 3 ( 0.00%)  	return NULL;
28 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Add symbol to the table of unresolved symbols */
 .           clish_sym_t *clish_shell_add_sym(clish_shell_t *this,
 .           	void *func, const char *name, int type)
20 ( 0.00%)  {
 .           	clish_sym_t *sym = NULL;
 .           
16 ( 0.00%)  	if (!name)
 .           		return NULL;
40 ( 0.00%)  	if ((sym = clish_shell_find_sym(this, name, type)))
3,327 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_find_sym (3x)
1,564 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		return sym;
24 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
1,164 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (3x)
 .           		return NULL;
19 ( 0.00%)  	lub_list_add(this->syms, sym);
1,697 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
604 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (2x)
 .           
 .           	return sym;
28 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_sym_t *clish_shell_add_unresolved_sym(clish_shell_t *this,
 .           	const char *name, int type)
 .           {
24 ( 0.00%)  	return clish_shell_add_sym(this, NULL, name, type);
4,893 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_sym (3x)
4,301 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Link one unresolved symbol.
 .            * sym - unresolved symbol
 .            * Returns 0 if the symbol was succesfully resolved
 .            */
 .           static int link_unresolved_sym(clish_shell_t *this, clish_sym_t *sym)
 .           {
 .           	clish_sym_t *plugin_sym;
 .           	char *sym_name = NULL;
 .           	int sym_type;
 .           
34 ( 0.00%)  	if (clish_sym__get_func(sym)) /* Don't relink non-null fn */
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (5x)
 .           		return 0;
30 ( 0.00%)  	sym_name = clish_sym__get_name(sym);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (6x)
24 ( 0.00%)  	sym_type = clish_sym__get_type(sym);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
 .           	plugin_sym = plugins_find_sym(this, sym_name, sym_type);
 .           	if (!plugin_sym) {
 .           		fprintf(stderr, "Error: Can't resolve symbol %s.\n",
 .           			sym_name);
 .           		return -1;
 .           	}
 .           	/* Copy symbol attributes */
34 ( 0.00%)  	clish_sym_clone(sym, plugin_sym);
623 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_clone (5x)
 .           
 .           	return 0;
 .           }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Link unresolved symbols */
 .           int clish_shell_link_plugins(clish_shell_t *this)
 8 ( 0.00%)  {
 .           	clish_sym_t *sym;
 .           	lub_list_node_t *iter;
 .           
 .           	/* Iterate elements */
18 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
24 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (6x)
24 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (6x)
 .           		if (link_unresolved_sym(this, sym) < 0)
 .           			return -1;
 .           	}
 .           
 1 ( 0.00%)  	return 0;
 8 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Get hook sym */
 .           clish_sym_t *clish_shell_get_hook(const clish_shell_t *this, int type)
 .           {
 2 ( 0.00%)  	return this->hooks[type];
 1 ( 0.00%)  }

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/param/param.c
--------------------------------------------------------------------------------
Ir           

-- line 13 ----------------------------------------
  .           #include <string.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
  .           static void clish_param_init(clish_param_t *this, const char *name,
  .           	const char *text, const char *ptype_name)
  .           {
100 ( 0.00%)  	this->name = lub_string_dup(name);
5,301 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  	this->text = lub_string_dup(text);
6,098 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  	this->ptype_name = lub_string_dup(ptype_name);
5,773 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
  .           
  .           	/* Set up defaults */
 25 ( 0.00%)  	this->ptype = NULL;
 25 ( 0.00%)  	this->defval = NULL;
 25 ( 0.00%)  	this->mode = CLISH_PARAM_COMMON;
 25 ( 0.00%)  	this->optional = BOOL_FALSE;
 25 ( 0.00%)  	this->order = BOOL_FALSE;
 25 ( 0.00%)  	this->value = NULL;
 25 ( 0.00%)  	this->hidden = BOOL_FALSE;
 25 ( 0.00%)  	this->test = NULL;
 25 ( 0.00%)  	this->completion = NULL;
 25 ( 0.00%)  	this->access = NULL;
  .           
 75 ( 0.00%)  	this->paramv = clish_paramv_new();
4,562 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_new (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_param_fini(clish_param_t * this)
  .           {
  .           	/* deallocate the memory for this instance */
 75 ( 0.00%)  	lub_string_free(this->defval);
423 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->name);
1,800 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->text);
1,800 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->ptype_name);
180 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->value);
585 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->test);
180 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->completion);
180 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->access);
180 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
  .           
 75 ( 0.00%)  	clish_paramv_delete(this->paramv);
5,075 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_delete'2 (19x)
112 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_delete (1x)
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           clish_param_t *clish_param_new(const char *name, const char *text,
  .           	const char *ptype_name)
200 ( 0.00%)  {
100 ( 0.00%)  	clish_param_t *this = malloc(sizeof(clish_param_t));
7,567 ( 0.14%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (25x)
  .           
 50 ( 0.00%)  	if (this)
  .           		clish_param_init(this, name, text, ptype_name);
  .           	return this;
175 ( 0.00%)  }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC METHODS
  .            *--------------------------------------------------------- */
  .           void clish_param_delete(clish_param_t * this)
 50 ( 0.00%)  {
  .           	clish_param_fini(this);
 75 ( 0.00%)  	free(this);
1,760 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (20x)
 25 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param_insert_param(clish_param_t * this, clish_param_t * param)
  .           {
 15 ( 0.00%)  	return clish_paramv_insert(this->paramv, param);
1,216 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_insert (5x)
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC ATTRIBUTES
  .            *--------------------------------------------------------- */
  .           void clish_param__set_ptype_name(clish_param_t *this, const char *ptype_name)
125 ( 0.00%)  {
 75 ( 0.00%)  	if (this->ptype_name)
 50 ( 0.00%)  		lub_string_free(this->ptype_name);
2,250 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (25x)
100 ( 0.00%)  	this->ptype_name = lub_string_dup(ptype_name);
100 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char * clish_param__get_ptype_name(const clish_param_t *this)
  .           {
 25 ( 0.00%)  	return this->ptype_name;
 25 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_param__get_name(const clish_param_t * this)
  .           {
  .           	if (!this)
  .           		return NULL;
  .           	return this->name;
  .           }
-- line 106 ----------------------------------------
-- line 121 ----------------------------------------
  .           clish_ptype_t *clish_param__get_ptype(const clish_param_t * this)
  .           {
  .           	return this->ptype;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_ptype(clish_param_t *this, clish_ptype_t *ptype)
  .           {
 50 ( 0.00%)  	this->ptype = ptype;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_default(clish_param_t * this, const char *defval)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->defval);
 20 ( 0.00%)  	this->defval = lub_string_dup(defval);
1,200 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_param__get_default(const clish_param_t * this)
  .           {
  .           	return this->defval;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_mode(clish_param_t * this, clish_param_mode_e mode)
  .           {
 10 ( 0.00%)  	assert(this);
 10 ( 0.00%)  	this->mode = mode;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_mode_e clish_param__get_mode(const clish_param_t * this)
  .           {
  .           	return this->mode;
  .           }
  .           
-- line 157 ----------------------------------------
-- line 217 ----------------------------------------
  .           	unsigned index)
  .           {
  .           	return clish_paramv__get_param(this->paramv, index);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_paramv_t *clish_param__get_paramv(clish_param_t * this)
  .           {
 24 ( 0.00%)  	return this->paramv;
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned int clish_param__get_param_count(const clish_param_t * this)
  .           {
  .           	return clish_paramv__get_count(this->paramv);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_optional(clish_param_t * this, bool_t optional)
  .           {
 48 ( 0.00%)  	this->optional = optional;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_optional(const clish_param_t * this)
  .           {
  .           	return this->optional;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_order(clish_param_t * this, bool_t order)
  .           {
 38 ( 0.00%)  	this->order = order;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_order(const clish_param_t * this)
  .           {
  .           	return this->order;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           
  .           /* paramv methods */
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_paramv_init(clish_paramv_t * this)
  .           {
 52 ( 0.00%)  	this->paramc = 0;
 52 ( 0.00%)  	this->paramv = NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_paramv_fini(clish_paramv_t * this)
  .           {
  .           	unsigned i;
  .           
  .           	/* finalize each of the parameter instances */
241 ( 0.00%)  	for (i = 0; i < this->paramc; i++) {
124 ( 0.00%)  		clish_param_delete(this->paramv[i]);
12,001 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_delete (18x)
1,096 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           	/* free the parameter vector */
156 ( 0.00%)  	free(this->paramv);
844 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (28x)
  .           	this->paramc = 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_paramv_t *clish_paramv_new(void)
 52 ( 0.00%)  {
156 ( 0.00%)  	clish_paramv_t *this = malloc(sizeof(clish_paramv_t));
8,607 ( 0.16%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (52x)
  .           
104 ( 0.00%)  	if (this)
  .           		clish_paramv_init(this);
  .           	return this;
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_paramv_delete(clish_paramv_t * this)
260 ( 0.00%)  {
  .           	clish_paramv_fini(this);
156 ( 0.00%)  	free(this);
2,464 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (28x)
156 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_paramv_insert(clish_paramv_t * this, clish_param_t * param)
120 ( 0.00%)  {
 72 ( 0.00%)  	size_t new_size = ((this->paramc + 1) * sizeof(clish_param_t *));
  .           	clish_param_t **tmp;
  .           
  .           	/* resize the parameter vector */
 72 ( 0.00%)  	tmp = realloc(this->paramv, new_size);
4,565 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (24x)
 48 ( 0.00%)  	if (tmp) {
 24 ( 0.00%)  		this->paramv = tmp;
  .           		/* insert reference to the parameter */
 96 ( 0.00%)  		this->paramv[this->paramc++] = param;
  .           	}
 96 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_paramv_remove(clish_paramv_t *this, unsigned int index)
  .           {
  .           	size_t new_size;
  .           	clish_param_t **tmp;
  .           	clish_param_t **dst, **src;
  .           	size_t n;
-- line 321 ----------------------------------------
-- line 345 ----------------------------------------
  .           
  .           	return 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_t *clish_paramv__get_param(const clish_paramv_t * this,
  .           	unsigned int index)
  .           {
 50 ( 0.00%)  	clish_param_t *result = NULL;
  .           
148 ( 0.00%)  	if (index < this->paramc)
 96 ( 0.00%)  		result = this->paramv[index];
  .           	return result;
 50 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_t *clish_paramv_find_param(const clish_paramv_t * this,
  .           	const char *name)
  .           {
  .           	clish_param_t *res = NULL;
  .           	unsigned int i;
  .           
-- line 366 ----------------------------------------
-- line 385 ----------------------------------------
  .           		return clish_param__get_default(res);
  .           
  .           	return NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned int clish_paramv__get_count(const clish_paramv_t * this)
  .           {
  1 ( 0.00%)  	return this->paramc;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_value(clish_param_t * this, const char * value)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->value);
 20 ( 0.00%)  	this->value = lub_string_dup(value);
935 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_param__get_value(const clish_param_t * this)
  .           {
  .           	if (this->value)
  .           		return this->value;
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_hidden(clish_param_t * this, bool_t hidden)
  .           {
 38 ( 0.00%)  	this->hidden = hidden;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_hidden(const clish_param_t * this)
  .           {
  .           	return this->hidden;
  .           }
  .           
-- line 422 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c
--------------------------------------------------------------------------------
Ir           

-- line 43 ----------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include <assert.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           void lub_bintree_remove(lub_bintree_t * this, void *clientnode)
308 ( 0.01%)  {
  .           	lub_bintree_node_t *x, *t;
  .           	lub_bintree_key_t key;
  .           	int comp;
  .           
  .           	/* get the key from the node */
132 ( 0.00%)  	this->getkeyFn(clientnode, &key);
696 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_getkey (26x)
355 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_getkey (13x)
138 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_getkey (5x)
  .           
  .           	/* bring the node in question to the root of the tree */
264 ( 0.00%)  	t = lub_bintree_splay(this, this->root, &key);
8,486 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (44x)
  .           
  .           	/* check that the node was there to remove */
176 ( 0.00%)  	comp = lub_bintree_compare(this, t, &key);
5,854 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (26x)
467 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (13x)
405 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (5x)
  .           
 88 ( 0.00%)  	assert(0 == comp);
  .           	if (0 == comp) {
132 ( 0.00%)  		if (t->left == NULL) {
 88 ( 0.00%)  			x = t->right;
  .           		} else {
  .           			x = lub_bintree_splay(this, t->left, &key);
  .           			x->right = t->right;
  .           		}
  .           		/* set the new root */
 44 ( 0.00%)  		this->root = x;
  .           
  .           		/* re-initialise the node control block for re-use */
180 ( 0.00%)  		lub_bintree_node_init(lub_bintree_getnode(this, clientnode));
855 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
215 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (43x)
  .           	}
264 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c
--------------------------------------------------------------------------------
Ir          

-- line 13 ----------------------------------------
 .           #include "lub/string.h"
 .           #include "lub/db.h"
 .           #include "lub/list.h"
 .           #include "clish/plugin.h"
 .           
 .           /*-------------------------------------------------------- */
 .           static void clish_shell_init(clish_shell_t * this,
 .           	FILE * istream, FILE * ostream, bool_t stop_on_error)
10 ( 0.00%)  {
 .           	clish_ptype_t *tmp_ptype = NULL;
 .           	int i;
 .           	char template[PATH_MAX];
 .           
 .           	/* initialise the tree of views */
16 ( 0.00%)  	lub_bintree_init(&this->view_tree,
1,603 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 .           		clish_view_bt_offset(),
 .           		clish_view_bt_compare, clish_view_bt_getkey);
 .           
 .           	/* initialise the tree of ptypes */
12 ( 0.00%)  	lub_bintree_init(&this->ptype_tree,
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (1x)
 .           		clish_ptype_bt_offset(),
 .           		clish_ptype_bt_compare, clish_ptype_bt_getkey);
 .           
 .           	/* initialise the tree of vars */
12 ( 0.00%)  	lub_bintree_init(&this->var_tree,
639 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (1x)
 .           		clish_var_bt_offset(),
 .           		clish_var_bt_compare, clish_var_bt_getkey);
 .           
 .           	/* Initialize plugin list */
 8 ( 0.00%)  	this->plugins = lub_list_new(NULL);
956 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 .           	/* Initialise the list of unresolved (yet) symbols */
 4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
210 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
 .           
 .           	/* Create userdata storage */
 4 ( 0.00%)  	this->udata = lub_list_new(clish_udata_compare);
210 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
 3 ( 0.00%)  	assert(this->udata);
 .           
 .           	/* Hooks */
10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
34 ( 0.00%)  		this->hooks[i] = clish_sym_new(NULL, NULL, i);
1,607 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
912 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (4x)
10 ( 0.00%)  		this->hooks_use[i] = BOOL_FALSE;
 .           	}
 .           
 .           	/* Set up defaults */
 1 ( 0.00%)  	this->global = NULL;
 1 ( 0.00%)  	this->startup = NULL;
 1 ( 0.00%)  	this->idle_timeout = 0; /* No idle timeout by default */
 1 ( 0.00%)  	this->wdog = NULL;
 1 ( 0.00%)  	this->wdog_timeout = 0; /* No watchdog timeout by default */
 1 ( 0.00%)  	this->wdog_active = BOOL_FALSE;
 1 ( 0.00%)  	this->state = SHELL_STATE_INITIALISING;
 1 ( 0.00%)  	this->overview = NULL;
10 ( 0.00%)  	this->tinyrl = clish_shell_tinyrl_new(istream, ostream, 0);
15,691 ( 0.29%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1 ( 0.00%)  	this->current_file = NULL;
 1 ( 0.00%)  	this->pwdv = NULL;
 1 ( 0.00%)  	this->pwdc = 0;
 1 ( 0.00%)  	this->depth = -1; /* Current depth is undefined */
 1 ( 0.00%)  	this->client = NULL;
 4 ( 0.00%)  	this->lockfile = lub_string_dup(CLISH_LOCK_PATH);
1,762 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 4 ( 0.00%)  	this->default_shebang = lub_string_dup("/bin/sh");
245 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 1 ( 0.00%)  	this->interactive = BOOL_TRUE; /* The interactive shell by default. */
 1 ( 0.00%)  	this->log = BOOL_FALSE; /* Disable logging by default */
 1 ( 0.00%)  	this->log_facility = LOG_LOCAL0; /* LOCAL0 for compatibility */
 1 ( 0.00%)  	this->dryrun = BOOL_FALSE; /* Disable dry-run by default */
14 ( 0.00%)  	this->user = lub_db_getpwuid(getuid()); /* Get user information */
6,629 ( 0.12%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 1 ( 0.00%)  	this->default_plugin = BOOL_TRUE; /* Load default plugin by default */
 .           
 .           	/* Create template (string) for FIFO name generation */
18 ( 0.00%)  	snprintf(template, sizeof(template),
4,010 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 .           		"%s/klish.fifo.%u.XXXXXX", "/tmp", getpid());
 1 ( 0.00%)  	template[sizeof(template) - 1] = '\0';
 4 ( 0.00%)  	this->fifo_temp = lub_string_dup(template);
263 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 .           
 .           	/* Create internal ptypes and params */
 .           	/* Args */
12 ( 0.00%)  	tmp_ptype = clish_shell_find_create_ptype(this,
154,923 ( 2.87%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		"__ptype_ARGS",
 .           		"Arguments", "[^\\\\]+",
 .           		CLISH_PTYPE_REGEXP,
 .           		CLISH_PTYPE_NONE);
 2 ( 0.00%)  	assert(tmp_ptype);
 .           
 .           	/* Push non-NULL istream */
 2 ( 0.00%)  	if (istream)
 .           		clish_shell_push_fd(this, istream, stop_on_error);
 7 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           static void clish_shell_fini(clish_shell_t *this)
 .           {
 .           	clish_view_t *view;
 .           	clish_ptype_t *ptype;
 .           	clish_var_t *var;
 .           	unsigned i;
 .           	lub_list_node_t *iter;
 .           
 .           	/* Free all loaded plugins */
12 ( 0.00%)  	while ((iter = lub_list__get_head(this->plugins))) {
 4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (2x)
 .           		/* Remove the symbol from the list */
 9 ( 0.00%)  		lub_list_del(this->plugins, iter);
757 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		/* Free the instance */
11 ( 0.00%)  		clish_plugin_free((clish_plugin_t *)lub_list_node__get_data(iter),
11,027 ( 0.20%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (1x)
 .           			(void *)this);
 3 ( 0.00%)  		lub_list_node_free(iter);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_free (1x)
 .           	}
 3 ( 0.00%)  	lub_list_free(this->plugins);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_free (1x)
 .           
 .           	/* delete each VIEW held  */
38 ( 0.00%)  	while ((view = lub_bintree_findfirst(&this->view_tree))) {
407 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (6x)
24 ( 0.00%)  		lub_bintree_remove(&this->view_tree, view);
2,082 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
985 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c:lub_bintree_remove (4x)
19 ( 0.00%)  		clish_view_delete(view);
33,554 ( 0.62%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
27,873 ( 0.52%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_delete (4x)
 .           	}
 .           
 .           	/* delete each PTYPE held  */
86 ( 0.00%)  	while ((ptype = lub_bintree_findfirst(&this->ptype_tree))) {
1,021 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (14x)
52 ( 0.00%)  		lub_bintree_remove(&this->ptype_tree, ptype);
2,368 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c:lub_bintree_remove (13x)
43 ( 0.00%)  		clish_ptype_delete(ptype);
96,333 ( 1.78%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_delete (12x)
1,643 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           	}
 .           
 .           	/* delete each VAR held  */
 7 ( 0.00%)  	while ((var = lub_bintree_findfirst(&this->var_tree))) {
38 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (1x)
 .           		lub_bintree_remove(&this->var_tree, var);
 .           		clish_var_delete(var);
 .           	}
 .           
 .           	/* Free empty hooks */
10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
31 ( 0.00%)  		if (clish_sym__get_name(this->hooks[i]))
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (5x)
 .           			continue;
 8 ( 0.00%)  		clish_sym_free(this->hooks[i]);
216 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_free (2x)
 .           	}
 .           
 .           	/* Free symbol list */
42 ( 0.00%)  	while ((iter = lub_list__get_head(this->syms))) {
14 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (7x)
 .           		/* Remove the symbol from the list */
25 ( 0.00%)  		lub_list_del(this->syms, iter);
66 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_del (6x)
 .           		/* Free the instance */
36 ( 0.00%)  		clish_sym_free((clish_sym_t *)lub_list_node__get_data(iter));
1,134 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_free (6x)
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (6x)
18 ( 0.00%)  		lub_list_node_free(iter);
540 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_free (6x)
 .           	}
 3 ( 0.00%)  	lub_list_free(this->syms);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_free (1x)
 .           
 .           	/* Free user data storage */
 6 ( 0.00%)  	while ((iter = lub_list__get_head(this->udata))) {
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 .           		/* Remove the symbol from the list */
 1 ( 0.00%)  		lub_list_del(this->udata, iter);
 .           		/* Free the instance */
 .           		clish_udata_free((clish_udata_t *)lub_list_node__get_data(iter));
 .           		lub_list_node_free(iter);
 .           	}
 2 ( 0.00%)  	lub_list_free(this->udata);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_free (1x)
 .           
 .           	/* free the textual details */
 3 ( 0.00%)  	lub_string_free(this->overview);
138 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 .           
 .           	/* Remove the startup command */
 3 ( 0.00%)  	if (this->startup)
 2 ( 0.00%)  		clish_command_delete(this->startup);
1,001 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_delete (1x)
 .           	/* Remove the watchdog command */
 3 ( 0.00%)  	if (this->wdog)
 .           		clish_command_delete(this->wdog);
 .           	/* clean up the file stack */
 5 ( 0.00%)  	while (!clish_shell_pop_file(this));
13 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_file.c:clish_shell_pop_file (1x)
 .           	/* delete the tinyrl object */
 7 ( 0.00%)  	clish_shell_tinyrl_delete(this->tinyrl);
6,949 ( 0.13%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 .           	/* finalize each of the pwd strings */
 8 ( 0.00%)  	for (i = 0; i < this->pwdc; i++) {
 5 ( 0.00%)  		clish_shell__fini_pwd(this->pwdv[i]);
250 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_pwd.c:clish_shell__fini_pwd (1x)
 4 ( 0.00%)  		free(this->pwdv[i]);
88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
 .           	}
 .           	/* free the pwd vector */
 3 ( 0.00%)  	free(this->pwdv);
88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
 3 ( 0.00%)  	konf_client_free(this->client);
1,680 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/konf/net/net.c:konf_client_free (1x)
 .           
 3 ( 0.00%)  	lub_string_free(this->lockfile);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 3 ( 0.00%)  	lub_string_free(this->default_shebang);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 3 ( 0.00%)  	free(this->user);
119 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
 3 ( 0.00%)  	if (this->fifo_temp)
 2 ( 0.00%)  		lub_string_free(this->fifo_temp);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           clish_shell_t *clish_shell_new(
 .           	FILE * istream,
 .           	FILE * ostream,
 .           	bool_t stop_on_error)
 8 ( 0.00%)  {
 8 ( 0.00%)  	clish_shell_t *this = malloc(sizeof(clish_shell_t));
1,637 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 2 ( 0.00%)  	if (this)
 5 ( 0.00%)  		clish_shell_init(this, istream, ostream, stop_on_error);
190,544 ( 3.53%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_init (1x)
 .           
 .           	return this;
 7 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           void clish_shell_delete(clish_shell_t *this)
 5 ( 0.00%)  {
 .           	clish_shell_fini(this);
 3 ( 0.00%)  	free(this);
117 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
 3 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           struct passwd *clish_shell__get_user(clish_shell_t * this)
 .           {
 .           	return this->user;
 .           }
 .           
 .           /*-------------------------------------------------------- */
-- line 223 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c
--------------------------------------------------------------------------------
Ir           

-- line 12 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           static void lub_argv_init(lub_argv_t * this, const char *line, size_t offset)
  .           {
  .           	size_t len;
  .           	const char *word;
  .           	lub_arg_t *arg;
  .           	size_t quoted;
  .           
  8 ( 0.00%)  	this->argv = NULL;
  8 ( 0.00%)  	this->argc = 0;
 24 ( 0.00%)  	if (!line)
  .           		return;
  .           	/* first of all count the words in the line */
 36 ( 0.00%)  	this->argc = lub_string_wordcount(line);
6,376 ( 0.12%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,061 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (7x)
 16 ( 0.00%)  	if (0 == this->argc)
  .           		return;
  .           	/* allocate space to hold the vector */
 56 ( 0.00%)  	arg = this->argv = malloc(sizeof(lub_arg_t) * this->argc);
987 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (8x)
 16 ( 0.00%)  	assert(arg);
  .           
  .           	/* then fill out the array with the words */
148 ( 0.00%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
1,523 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (8x)
 24 ( 0.00%)  		*word || quoted;
154 ( 0.00%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
4,167 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (22x)
114 ( 0.00%)  		(*arg).arg = lub_string_ndecode(word, len);
1,107 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,120 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_ndecode (21x)
 44 ( 0.00%)  		(*arg).offset = offset;
110 ( 0.00%)  		(*arg).quoted = quoted ? BOOL_TRUE : BOOL_FALSE;
  .           
 66 ( 0.00%)  		offset += len;
  .           
 44 ( 0.00%)  		if (quoted) {
  .           			len += quoted - 1; /* account for terminating quotation mark */
  .           			offset += quoted; /* account for quotation marks */
  .           		}
 22 ( 0.00%)  		arg++;
  .           	}
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_argv_t *lub_argv_new(const char *line, size_t offset)
 72 ( 0.00%)  {
  .           	lub_argv_t *this;
  .           
 32 ( 0.00%)  	this = malloc(sizeof(lub_argv_t));
1,068 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (8x)
 16 ( 0.00%)  	if (this)
  .           		lub_argv_init(this, line, offset);
  .           
  .           	return this;
 72 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void lub_argv_add(lub_argv_t * this, const char *text)
  .           {
  .           	lub_arg_t * arg;
  .           
  .           	if (!text)
  .           		return;
-- line 68 ----------------------------------------
-- line 74 ----------------------------------------
  .           	(this->argv[this->argc++]).arg = strdup(text);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void lub_argv_fini(lub_argv_t * this)
  .           {
  .           	unsigned i;
  .           
 98 ( 0.00%)  	for (i = 0; i < this->argc; i++)
154 ( 0.00%)  		free(this->argv[i].arg);
1,936 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (22x)
 24 ( 0.00%)  	free(this->argv);
733 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (8x)
  .           	this->argv = NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void lub_argv_delete(lub_argv_t * this)
 40 ( 0.00%)  {
  .           	lub_argv_fini(this);
 24 ( 0.00%)  	free(this);
704 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (8x)
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *lub_argv__get_line(const lub_argv_t * this)
  .           {
  .           	int space = 0;
  .           	const char *p;
  .           	unsigned i;
  .           	char *line = NULL;
-- line 101 ----------------------------------------
-- line 155 ----------------------------------------
  .           	free(argv);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *lub_argv__get_arg(const lub_argv_t *this, unsigned int index)
  .           {
  .           	const char *result = NULL;
  .           
 42 ( 0.00%)  	if (!this)
  .           		return NULL;
 42 ( 0.00%)  	if (this->argc > index)
126 ( 0.00%)  		result = this->argv[index].arg;
  .           
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned lub_argv__get_count(const lub_argv_t * this)
  .           {
 27 ( 0.00%)  	return this->argc;
 27 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           size_t lub_argv__get_offset(const lub_argv_t * this, unsigned index)
  .           {
  .           	size_t result = 0;
  .           
  .           	if (this->argc > index)
  .           		result = this->argv[index].offset;
-- line 183 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c
--------------------------------------------------------------------------------
Ir           

-- line 173 ----------------------------------------
  .           	if (!this->utf8)
  .           		return;
  .           	while ((this->point < this->end) &&
  .           		(UTF8_10 == (this->line[this->point] & UTF8_MASK)))
  .           		this->point++;
  .           }
  .           
  .           /*-------------------------------------------------------- */
 16 ( 0.00%)  static unsigned int utf8_nsyms(const tinyrl_t *this, const char *str,
  .           	unsigned int num)
  .           {
  .           	unsigned int nsym = 0;
  .           	unsigned long sym = 0;
  .           	unsigned int i = 0;
  .           
 32 ( 0.00%)  	if (!this->utf8)
  .           		return num;
  .           
 96 ( 0.00%)  	while (i < num) {
186 ( 0.00%)  		if ('\0' == str[i])
  .           			break;
  .           		/* ASCII char */
 64 ( 0.00%)  		if (!(UTF8_7BIT_MASK & str[i])) {
 32 ( 0.00%)  			i++;
 32 ( 0.00%)  			nsym++;
  .           			continue;
  .           		}
  .           		/* Multibyte */
  .           		i += utf8_wchar(&str[i], &sym);
  .           		if (utf8_is_cjk(sym)) /* CJK chars have double-width */
  .           			nsym += 2;
  .           		else
  .           			nsym += 1;
  .           	}
  .           
  .           	return nsym;
 16 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------------------- */
  .           static void tty_set_raw_mode(tinyrl_t * this)
  .           {
  .           	struct termios new_termios;
  .           	int fd;
  .           
  6 ( 0.00%)  	if (!tinyrl_vt100__get_istream(this->term))
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
  .           		return;
  7 ( 0.00%)  	fd = fileno(tinyrl_vt100__get_istream(this->term));
  6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
  7 ( 0.00%)  	if (tcgetattr(fd, &new_termios) < 0)
 50 ( 0.00%)  => /opt/build/glibc/glibc-2.24/termios/../sysdeps/unix/sysv/linux/tcgetattr.c:tcgetattr (1x)
  .           		return;
  1 ( 0.00%)  	new_termios.c_iflag = 0;
  1 ( 0.00%)  	new_termios.c_oflag = OPOST | ONLCR;
  1 ( 0.00%)  	new_termios.c_lflag = 0;
  1 ( 0.00%)  	new_termios.c_cc[VMIN] = 1;
  1 ( 0.00%)  	new_termios.c_cc[VTIME] = 0;
  .           	/* Do the mode switch */
  9 ( 0.00%)  	(void)tcsetattr(fd, TCSADRAIN, &new_termios);
1,586 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           static void tty_restore_mode(const tinyrl_t * this)
  .           {
  .           	int fd;
  .           
  5 ( 0.00%)  	if (!tinyrl_vt100__get_istream(this->term))
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
  .           		return;
  6 ( 0.00%)  	fd = fileno(tinyrl_vt100__get_istream(this->term));
  6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
  .           	/* Do the mode switch */
  6 ( 0.00%)  	(void)tcsetattr(fd, TCSADRAIN, &this->default_termios);
 70 ( 0.00%)  => /opt/build/glibc/glibc-2.24/termios/../sysdeps/unix/sysv/linux/tcsetattr.c:tcsetattr (1x)
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           /*
  .           This is called whenever a line is edited in any way.
  .           It signals that if we are currently viewing a history line we should transfer it
  .           to the current buffer
  .           */
  .           static void changed_line(tinyrl_t * this)
  8 ( 0.00%)  {
  .           	/* if the current line is not our buffer then make it so */
 12 ( 0.00%)  	if (this->line != this->buffer) {
  .           		/* replace the current buffer with the new details */
  .           		free(this->buffer);
  .           		this->line = this->buffer = lub_string_dup(this->line);
  .           		this->buffer_size = strlen(this->buffer);
  .           		assert(this->line);
  .           	}
  8 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------------------- */
  .           static int tinyrl_timeout_default(tinyrl_t *this)
  .           {
  .           	this = this; /* Happy compiler */
  .           
  .           	/* Return -1 to close session on timeout */
  .           	return -1;
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           static bool_t tinyrl_key_default(tinyrl_t * this, int key)
  8 ( 0.00%)  {
  .           	bool_t result = BOOL_FALSE;
  8 ( 0.00%)  	if (key > 31) {
  .           		char tmp[2];
  8 ( 0.00%)  		tmp[0] = (key & 0xFF), tmp[1] = '\0';
  .           		/* inject this text into the buffer */
 20 ( 0.00%)  		result = tinyrl_insert_text(this, tmp);
3,274 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
267 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text (3x)
  .           	} else {
  .           		/* Call the external hotkey analyzer */
  .           		if (this->hotkey_fn)
  .           			this->hotkey_fn(this, key);
  .           	}
  .           	return result;
 16 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static bool_t tinyrl_key_interrupt(tinyrl_t * this, int key)
  .           {
  .           	tinyrl_crlf(this);
  .           	tinyrl_delete_text(this, 0, this->end);
  .           	this->done = BOOL_TRUE;
  .           	/* keep the compiler happy */
-- line 293 ----------------------------------------
-- line 383 ----------------------------------------
  .           /*-------------------------------------------------------- */
  .           static bool_t tinyrl_key_down(tinyrl_t * this, int key)
  .           {
  .           	bool_t result = BOOL_FALSE;
  .           	if (this->line != this->buffer) {
  .           		/* we are not already at the bottom */
  .           		/* the iterator will have been set up by the key_up() function */
  .           		tinyrl_history_entry_t *entry =
  2 ( 0.00%)  		    tinyrl_history_getnext(&this->hist_iter);
  .           		if (!entry) {
  .           			/* nothing more in the history list */
  .           			this->line = this->buffer;
  .           		} else {
  .           			this->line = tinyrl_history_entry__get_line(entry);
  .           		}
  .           		/* display the entry moving the insertion point
  .           		 * to the end of the line 
-- line 399 ----------------------------------------
-- line 588 ----------------------------------------
  .           	key = key;
  .           	return result;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           static void tinyrl_fini(tinyrl_t * this)
  .           {
  .           	/* delete the history session */
  7 ( 0.00%)  	tinyrl_history_delete(this->history);
3,644 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* delete the terminal session */
  7 ( 0.00%)  	tinyrl_vt100_delete(this->term);
817 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* free up any dynamic strings */
  3 ( 0.00%)  	lub_string_free(this->buffer);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->kill_string);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->last_buffer);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->prompt);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           static void tinyrl_init(tinyrl_t * this, FILE * istream, FILE * ostream,
  .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
  .           {
  .           	int i;
  .           
512 ( 0.01%)  	for (i = 0; i < NUM_HANDLERS; i++) {
512 ( 0.01%)  		this->handlers[i] = tinyrl_key_default;
  .           	}
  .           	/* Default handlers */
  2 ( 0.00%)  	this->handlers[KEY_CR] = tinyrl_key_crlf;
  1 ( 0.00%)  	this->handlers[KEY_LF] = tinyrl_key_crlf;
  2 ( 0.00%)  	this->handlers[KEY_ETX] = tinyrl_key_interrupt;
  2 ( 0.00%)  	this->handlers[KEY_DEL] = tinyrl_key_backspace;
  1 ( 0.00%)  	this->handlers[KEY_BS] = tinyrl_key_backspace;
  2 ( 0.00%)  	this->handlers[KEY_EOT] = tinyrl_key_delete;
  2 ( 0.00%)  	this->handlers[KEY_FF] = tinyrl_key_clear_screen;
  2 ( 0.00%)  	this->handlers[KEY_NAK] = tinyrl_key_erase_line;
  2 ( 0.00%)  	this->handlers[KEY_SOH] = tinyrl_key_start_of_line;
  2 ( 0.00%)  	this->handlers[KEY_ENQ] = tinyrl_key_end_of_line;
  2 ( 0.00%)  	this->handlers[KEY_VT] = tinyrl_key_kill;
  2 ( 0.00%)  	this->handlers[KEY_EM] = tinyrl_key_yank;
  2 ( 0.00%)  	this->handlers[KEY_HT] = tinyrl_key_tab;
  2 ( 0.00%)  	this->handlers[KEY_ETB] = tinyrl_key_backword;
  .           
  1 ( 0.00%)  	this->line = NULL;
  1 ( 0.00%)  	this->max_line_length = 0;
  1 ( 0.00%)  	this->prompt = NULL;
  1 ( 0.00%)  	this->prompt_size = 0;
  1 ( 0.00%)  	this->buffer = NULL;
  1 ( 0.00%)  	this->buffer_size = 0;
  1 ( 0.00%)  	this->done = BOOL_FALSE;
  1 ( 0.00%)  	this->completion_over = BOOL_FALSE;
  1 ( 0.00%)  	this->point = 0;
  1 ( 0.00%)  	this->end = 0;
  1 ( 0.00%)  	this->attempted_completion_function = complete_fn;
  2 ( 0.00%)  	this->timeout_fn = tinyrl_timeout_default;
  1 ( 0.00%)  	this->keypress_fn = NULL;
  1 ( 0.00%)  	this->hotkey_fn = NULL;
  1 ( 0.00%)  	this->state = 0;
  1 ( 0.00%)  	this->kill_string = NULL;
  1 ( 0.00%)  	this->echo_char = '\0';
  1 ( 0.00%)  	this->echo_enabled = BOOL_TRUE;
  1 ( 0.00%)  	this->last_buffer = NULL;
  1 ( 0.00%)  	this->last_point = 0;
  1 ( 0.00%)  	this->last_line_size = 0;
  1 ( 0.00%)  	this->utf8 = BOOL_FALSE;
  .           
  .           	/* create the vt100 terminal */
  9 ( 0.00%)  	this->term = tinyrl_vt100_new(NULL, ostream);
917 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	tinyrl__set_istream(this, istream);
1,547 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	this->last_width = tinyrl_vt100__get_width(this->term);
3,714 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* create the history */
  8 ( 0.00%)  	this->history = tinyrl_history_new(stifle);
1,742 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           int tinyrl_printf(const tinyrl_t * this, const char *fmt, ...)
  7 ( 0.00%)  {
  .           	va_list args;
  .           	int len;
  .           
  6 ( 0.00%)  	va_start(args, fmt);
  8 ( 0.00%)  	len = tinyrl_vt100_vprintf(this->term, fmt, args);
18,158 ( 0.34%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	va_end(args);
  .           
  .           	return len;
  2 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl_delete(tinyrl_t * this)
  1 ( 0.00%)  {
  3 ( 0.00%)  	assert(this);
  .           	if (this) {
  .           		/* let the object tidy itself up */
  .           		tinyrl_fini(this);
  .           
  .           		/* release the memory associate with this instance */
  3 ( 0.00%)  		free(this);
119 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
  .           	}
  1 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           
  .           /*#####################################
  .            * EXPORTED INTERFACE
  .            *##################################### */
  .           /*----------------------------------------------------------------------- */
  .           int tinyrl_getchar(const tinyrl_t * this)
  .           {
 19 ( 0.00%)  	return tinyrl_vt100_getchar(this->term);
2,231 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
188 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_getchar (4x)
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           static void tinyrl_internal_print(const tinyrl_t * this, const char *text)
  .           {
 15 ( 0.00%)  	if (this->echo_enabled) {
  .           		/* simply echo the line */
 35 ( 0.00%)  		tinyrl_vt100_printf(this->term, "%s", text);
1,985 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (5x)
  .           	} else {
  .           		/* replace the line with echo char if defined */
  .           		if (this->echo_char) {
  .           			unsigned int i = strlen(text);
  .           			while (i--) {
  .           				tinyrl_vt100_printf(this->term, "%c",
  .           					this->echo_char);
  .           			}
  .           		}
  .           	}
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
 20 ( 0.00%)  static void tinyrl_internal_position(const tinyrl_t *this, int prompt_len,
  .           	int line_len, unsigned int width)
  .           {
  .           	int rows, cols;
  .           
 45 ( 0.00%)  	rows = ((line_len + prompt_len) / width) - (prompt_len / width);
  5 ( 0.00%)  	cols = ((line_len + prompt_len) % width) - (prompt_len % width);
 10 ( 0.00%)  	if (cols > 0)
  .           		tinyrl_vt100_cursor_back(this->term, cols);
  5 ( 0.00%)  	else if (cols < 0)
  .           		tinyrl_vt100_cursor_forward(this->term, -cols);
 10 ( 0.00%)  	if (rows > 0)
  .           		tinyrl_vt100_cursor_up(this->term, rows);
  5 ( 0.00%)  	else if (rows < 0)
  .           		tinyrl_vt100_cursor_down(this->term, -rows);
 20 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* Jump to first free line after current multiline input   */
  .           void tinyrl_multi_crlf(const tinyrl_t * this)
  6 ( 0.00%)  {
  5 ( 0.00%)  	unsigned int line_size = strlen(this->last_buffer);
 16 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (1x)
  5 ( 0.00%)  	unsigned int line_len = utf8_nsyms(this, this->last_buffer, line_size);
 52 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (1x)
  4 ( 0.00%)  	unsigned int count = utf8_nsyms(this, this->last_buffer, this->last_point);
 52 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (1x)
  .           
  5 ( 0.00%)  	tinyrl_internal_position(this, this->prompt_len + line_len,
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_internal_position.isra.5 (1x)
  2 ( 0.00%)  		- (line_len - count), this->last_width);
  7 ( 0.00%)  	tinyrl_crlf(this);
1,055 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	tinyrl_vt100_oflush(this->term);
 73 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (1x)
  5 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------------------- */
  .           void tinyrl_redisplay(tinyrl_t * this)
 40 ( 0.00%)  {
 25 ( 0.00%)  	unsigned int line_size = strlen(this->line);
 80 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (5x)
 25 ( 0.00%)  	unsigned int line_len = utf8_nsyms(this, this->line, line_size);
148 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (5x)
 20 ( 0.00%)  	unsigned int width = tinyrl_vt100__get_width(this->term);
165 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_width (5x)
  1 ( 0.00%)  	unsigned int count, eq_chars = 0;
  .           	int cols;
  .           
  .           	/* Prepare print position */
 27 ( 0.00%)  	if (this->last_buffer && (width == this->last_width)) {
  .           		unsigned int eq_len = 0;
  .           		/* If line and last line have the equal chars at begining */
 20 ( 0.00%)  		eq_chars = lub_string_equal_part(this->line, this->last_buffer,
852 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
132 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_equal_part (3x)
  .           			this->utf8);
 36 ( 0.00%)  		eq_len = utf8_nsyms(this, this->last_buffer, eq_chars);
 96 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (4x)
 20 ( 0.00%)  		count = utf8_nsyms(this, this->last_buffer, this->last_point);
 96 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (4x)
 24 ( 0.00%)  		tinyrl_internal_position(this, this->prompt_len + eq_len,
 96 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_internal_position.isra.5 (4x)
  8 ( 0.00%)  			count - eq_len, width);
  .           	} else {
  .           		/* Prepare to resize */
  2 ( 0.00%)  		if (width != this->last_width) {
  .           			tinyrl_vt100_next_line(this->term);
  .           			tinyrl_vt100_erase_down(this->term);
  .           		}
 11 ( 0.00%)  		tinyrl_vt100_printf(this->term, "%s", this->prompt);
1,163 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           
  .           	/* Print current line */
  5 ( 0.00%)  	tinyrl_internal_print(this, this->line + eq_chars);
 25 ( 0.00%)  	cols = (this->prompt_len + line_len) % width;
 10 ( 0.00%)  	if (!cols && (line_size - eq_chars))
  .           		tinyrl_vt100_next_line(this->term);
  .           	/* Erase down if current line is shorter than previous one */
 10 ( 0.00%)  	if (this->last_line_size > line_size)
  .           		tinyrl_vt100_erase_down(this->term);
  .           	/* Move the cursor to the insertion point */
 15 ( 0.00%)  	if (this->point < line_size) {
  .           		unsigned int pre_len = utf8_nsyms(this,
  .           			this->line, this->point);
  .           		count = utf8_nsyms(this, this->line + this->point,
  .           			line_size - this->point);
  .           		tinyrl_internal_position(this, this->prompt_len + pre_len,
  .           			count, width);
  .           	}
  .           
  .           	/* Update the display */
 19 ( 0.00%)  	tinyrl_vt100_oflush(this->term);
2,407 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
772 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (4x)
  .           
  .           	/* Save the last line buffer */
 15 ( 0.00%)  	lub_string_free(this->last_buffer);
369 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
 20 ( 0.00%)  	this->last_buffer = lub_string_dup(this->line);
780 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  	this->last_point = this->point;
  5 ( 0.00%)  	this->last_width = width;
  5 ( 0.00%)  	this->last_line_size = line_size;
 40 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------------------- */
  .           tinyrl_t *tinyrl_new(FILE * istream, FILE * ostream,
  .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
  9 ( 0.00%)  {
  .           	tinyrl_t *this = NULL;
  .           
  8 ( 0.00%)  	this = malloc(sizeof(tinyrl_t));
1,783 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  	if (this)
  .           		tinyrl_init(this, istream, ostream, stifle, complete_fn);
  .           
  .           	return this;
  7 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------------------- */
  .           static char *internal_insertline(tinyrl_t * this, char *buffer)
  .           {
  .           	char *p;
  .           	char *s = buffer;
  .           
  .           	/* strip any spurious '\r' or '\n' */
-- line 828 ----------------------------------------
-- line 843 ----------------------------------------
  .           	tinyrl_redisplay(this);
  .           
  .           	return s;
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           static char *internal_readline(tinyrl_t * this,
  .           	void *context, const char *str)
 10 ( 0.00%)  {
  4 ( 0.00%)  	FILE *istream = tinyrl_vt100__get_istream(this->term);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
  .           	char *result = NULL;
  .           	int lerrno = 0;
  .           
  1 ( 0.00%)  	this->done = BOOL_FALSE;
  1 ( 0.00%)  	this->point = 0;
  1 ( 0.00%)  	this->end = 0;
  5 ( 0.00%)  	this->buffer = lub_string_dup("");
156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  4 ( 0.00%)  	this->buffer_size = strlen(this->buffer);
 16 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (1x)
  1 ( 0.00%)  	this->line = this->buffer;
  1 ( 0.00%)  	this->context = context;
  .           
  .           	/* Interactive session */
  5 ( 0.00%)  	if (this->isatty && !str) {
  1 ( 0.00%)  		unsigned int utf8_cont = 0; /* UTF-8 continue bytes */
  1 ( 0.00%)  		unsigned int esc_cont = 0; /* Escape sequence continues */
  .           		char esc_seq[10]; /* Buffer for ESC sequence */
  1 ( 0.00%)  		char *esc_p = esc_seq;
  .           
  .           		/* Set the terminal into raw mode */
  .           		tty_set_raw_mode(this);
  7 ( 0.00%)  		tinyrl_reset_line_state(this);
6,547 ( 0.12%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
 13 ( 0.00%)  		while (!this->done) {
  .           			int key;
  .           
 24 ( 0.00%)  			key = tinyrl_getchar(this);
2,949 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
200 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_getchar (4x)
  .           
  .           			/* Error || EOF || Timeout */
 10 ( 0.00%)  			if (key < 0) {
  .           				if ((VT100_TIMEOUT == key) &&
  .           					!this->timeout_fn(this))
  .           					continue;
  .           				/* It's time to finish the session */
  .           				this->done = BOOL_TRUE;
  .           				this->line = NULL;
  .           				lerrno = ENOENT;
  .           				continue;
  .           			}
  .           
  .           			/* Real key pressed */
  .           			/* Common callback for any key */
 15 ( 0.00%)  			if (this->keypress_fn)
 15 ( 0.00%)  				this->keypress_fn(this, key);
970 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_wdog.c:clish_shell_keypress_fn (5x)
  .           
  .           			/* Check for ESC sequence. It's a special case. */
 30 ( 0.00%)  			if (!esc_cont && (key == KEY_ESC)) {
  .           				esc_cont = 1; /* Start ESC sequence */
  .           				esc_p = esc_seq;
  .           				continue;
  .           			}
 10 ( 0.00%)  			if (esc_cont) {
  .           				/* Broken sequence */
  3 ( 0.00%)  				if (esc_p >= (esc_seq + sizeof(esc_seq) - 1)) {
  .           					esc_cont = 0;
  .           					continue;
  .           				}
  .           				/* Dump the control sequence into sequence buffer
  .           				   ANSI standard control sequences will end
  .           				   with a character between 64 - 126 */
  .           				*esc_p = key & 0xff;
  .           				esc_p++;
-- line 913 ----------------------------------------
-- line 917 ----------------------------------------
  .           					tinyrl_escape_seq(this, esc_seq);
  .           					esc_cont = 0;
  .           					tinyrl_redisplay(this);
  .           				}
  .           				continue;
  .           			}
  .           
  .           			/* Call the handler for this key */
 30 ( 0.00%)  			if (!this->handlers[key](this, key))
23,702 ( 0.44%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_key_enter (1x)
3,601 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_default (4x)
  .           				tinyrl_ding(this);
 15 ( 0.00%)  			if (this->done) /* Some handler set the done flag */
  .           				continue; /* It will break the loop */
  .           
 12 ( 0.00%)  			if (this->utf8) {
  8 ( 0.00%)  				if (!(UTF8_7BIT_MASK & key)) /* ASCII char */
  .           					utf8_cont = 0;
  .           				else if (utf8_cont && (UTF8_10 == (key & UTF8_MASK))) /* Continue byte */
  .           					utf8_cont--;
  .           				else if (UTF8_11 == (key & UTF8_MASK)) { /* First byte of multibyte char */
  .           					/* Find out number of char's bytes */
  .           					int b = key;
  .           					utf8_cont = 0;
  .           					while ((utf8_cont < 6) && (UTF8_10 != (b & UTF8_MASK))) {
-- line 939 ----------------------------------------
-- line 941 ----------------------------------------
  .           						b = b << 1;
  .           					}
  .           				}
  .           			}
  .           			/* For non UTF-8 encoding the utf8_cont is always 0.
  .           			   For UTF-8 it's 0 when one-byte symbol or we get
  .           			   all bytes for the current multibyte character. */
  .           			if (!utf8_cont)
 24 ( 0.00%)  				tinyrl_redisplay(this);
5,390 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay (4x)
  .           		}
  .           		/* If the last character in the line (other than NULL)
  .           		   is a space remove it. */
 18 ( 0.00%)  		if (this->end && this->line && isspace(this->line[this->end - 1]))
1,546 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			tinyrl_delete_text(this, this->end - 1, this->end);
  .           		/* Restores the terminal mode */
  .           		tty_restore_mode(this);
  .           
  .           	/* Non-interactive session */
  .           	} else {
  .           		char *s = NULL, buffer[80];
  .           		size_t len = sizeof(buffer);
-- line 961 ----------------------------------------
-- line 987 ----------------------------------------
  .           		 * error from fgets.
  .           		 */
  .           		if (this->line && !this->handlers[KEY_LF](this, KEY_LF)) {
  .           			/* an issue has occured */
  .           			this->line = NULL;
  .           			lerrno = ENOEXEC;
  .           		}
  .           		if (str)
  1 ( 0.00%)  			lub_string_free(tmp);
  .           	}
  .           	/*
  .           	 * duplicate the string for return to the client 
  .           	 * we have to duplicate as we may be referencing a
  .           	 * history entry or our internal buffer
  .           	 */
  5 ( 0.00%)  	result = this->line ? lub_string_dup(this->line) : NULL;
155 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  .           
  .           	/* free our internal buffer */
  3 ( 0.00%)  	free(this->buffer);
 88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
  1 ( 0.00%)  	this->buffer = NULL;
  .           
  2 ( 0.00%)  	if (!result)
  .           		errno = lerrno; /* get saved errno */
  .           	return result;
  9 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------------------- */
  .           char *tinyrl_readline(tinyrl_t * this, void *context)
  .           {
  2 ( 0.00%)  	return internal_readline(this, context, NULL);
47,392 ( 0.88%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:internal_readline (1x)
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           char *tinyrl_forceline(tinyrl_t * this, void *context, const char *line)
  .           {
  .           	return internal_readline(this, context, line);
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           /*
  .            * Ensure that buffer has enough space to hold len characters,
  .            * possibly reallocating it if necessary. The function returns BOOL_TRUE
  .            * if the line is successfully extended, BOOL_FALSE if not.
  .            */
  .           bool_t tinyrl_extend_line_buffer(tinyrl_t * this, unsigned int len)
  3 ( 0.00%)  {
  .           	bool_t result = BOOL_TRUE;
  .           	char *new_buffer;
  1 ( 0.00%)  	size_t new_len = len;
  .           
  3 ( 0.00%)  	if (this->buffer_size >= len)
  1 ( 0.00%)  		return result;
  .           
  .           	/*
  .           	 * What we do depends on whether we are limited by
  .           	 * memory or a user imposed limit.
  .           	 */
  4 ( 0.00%)  	if (this->max_line_length == 0) {
  .           		/* make sure we don't realloc too often */
  1 ( 0.00%)  		if (new_len < this->buffer_size + 10)
  .           			new_len = this->buffer_size + 10;
  .           		/* leave space for terminator */
  7 ( 0.00%)  		new_buffer = realloc(this->buffer, new_len + 1);
131 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (1x)
  .           
  2 ( 0.00%)  		if (!new_buffer) {
  .           			tinyrl_ding(this);
  .           			result = BOOL_FALSE;
  .           		} else {
  1 ( 0.00%)  			this->buffer_size = new_len;
  2 ( 0.00%)  			this->line = this->buffer = new_buffer;
  .           		}
  .           	} else {
  .           		if (new_len < this->max_line_length) {
  .           
  .           			/* Just reallocate once to the max size */
  .           			new_buffer = realloc(this->buffer,
  .           				this->max_line_length);
  .           
-- line 1064 ----------------------------------------
-- line 1072 ----------------------------------------
  .           			}
  .           		} else {
  .           			tinyrl_ding(this);
  .           			result = BOOL_FALSE;
  .           		}
  .           	}
  .           
  .           	return result;
  5 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------------------- */
  .           /*
  .            * Insert text into the line at the current cursor position.
  .            */
  .           bool_t tinyrl_insert_text(tinyrl_t * this, const char *text)
 20 ( 0.00%)  {
 16 ( 0.00%)  	unsigned int delta = strlen(text);
 64 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (4x)
  .           
  .           	/*
  .           	 * If the client wants to change the line ensure that the line and buffer
  .           	 * references are in sync
  .           	 */
  8 ( 0.00%)  	changed_line(this);
 28 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:changed_line (4x)
  .           
 16 ( 0.00%)  	if ((delta + this->end) > (this->buffer_size)) {
  .           		/* extend the current buffer */
  3 ( 0.00%)  		if (BOOL_FALSE ==
  7 ( 0.00%)  			tinyrl_extend_line_buffer(this, this->end + delta))
936 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			return BOOL_FALSE;
  .           	}
  .           
 12 ( 0.00%)  	if (this->point < this->end) {
  .           		/* move the current text to the right (including the terminator) */
  .           		memmove(&this->buffer[this->point + delta],
  .           			&this->buffer[this->point],
  .           			(this->end - this->point) + 1);
  .           	} else {
  .           		/* terminate the string */
 12 ( 0.00%)  		this->buffer[this->end + delta] = '\0';
  .           	}
  .           
  .           	/* insert the new text */
 28 ( 0.00%)  	strncpy(&this->buffer[this->point], text, delta);
1,547 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 96 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (3x)
  .           
  .           	/* now update the indexes */
  4 ( 0.00%)  	this->point += delta;
  4 ( 0.00%)  	this->end += delta;
  .           
  4 ( 0.00%)  	return BOOL_TRUE;
 17 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------------------- */
  .           /* 
  .            * A convenience function for displaying a list of strings in columnar
  .            * format on Readline's output stream. matches is the list of strings,
  .            * in argv format, such as a list of completion matches. len is the number
  .            * of strings in matches, and max is the length of the longest string in matches.
  .            * This function uses the setting of print-completions-horizontally to select
-- line 1129 ----------------------------------------
-- line 1209 ----------------------------------------
  .           		this->end = start;
  .           	/* put a terminator at the end of the buffer */
  .           	this->buffer[this->end] = '\0';
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           bool_t tinyrl_bind_key(tinyrl_t * this, int key, tinyrl_key_func_t * fn)
  .           {
  4 ( 0.00%)  	bool_t result = BOOL_FALSE;
  .           
  8 ( 0.00%)  	if ((key >= 0) && (key < 256)) {
  .           		/* set the key handling function */
  8 ( 0.00%)  		this->handlers[key] = fn;
  4 ( 0.00%)  		result = BOOL_TRUE;
  .           	}
  .           
  .           	return result;
  4 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /*
  .            * Returns an array of strings which is a list of completions for text.
  .            * If there are no completions, returns NULL. The first entry in the
  .            * returned array is the substitution for text. The remaining entries
  .            * are the possible completions. The array is terminated with a NULL pointer.
  .            *
-- line 1234 ----------------------------------------
-- line 1299 ----------------------------------------
  .           	}
  .           	/* release the memory for the array */
  .           	free(this);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl_crlf(const tinyrl_t * this)
  .           {
  5 ( 0.00%)  	tinyrl_vt100_printf(this->term, "\n");
379 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           /*
  .            * Ring the terminal bell, obeying the setting of bell-style.
  .            */
  .           void tinyrl_ding(const tinyrl_t * this)
  .           {
  .           	tinyrl_vt100_ding(this->term);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl_reset_line_state(tinyrl_t * this)
  2 ( 0.00%)  {
  7 ( 0.00%)  	lub_string_free(this->last_buffer);
795 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  1 ( 0.00%)  	this->last_buffer = NULL;
  1 ( 0.00%)  	this->last_line_size = 0;
  .           
  7 ( 0.00%)  	tinyrl_redisplay(this);
4,974 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  1 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl_replace_line(tinyrl_t * this, const char *text, int clear_undo)
  .           {
  .           	size_t new_len = strlen(text);
  .           
  .           	/* ignored for now */
  .           	clear_undo = clear_undo;
-- line 1335 ----------------------------------------
-- line 1442 ----------------------------------------
  .           tinyrl_match_e tinyrl_complete(tinyrl_t * this)
  .           {
  .           	return tinyrl_do_complete(this, BOOL_FALSE);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void *tinyrl__get_context(const tinyrl_t * this)
  .           {
  6 ( 0.00%)  	return this->context;
  6 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *tinyrl__get_line(const tinyrl_t * this)
  .           {
  1 ( 0.00%)  	return this->line;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           tinyrl_history_t *tinyrl__get_history(const tinyrl_t * this)
  .           {
  1 ( 0.00%)  	return this->history;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void tinyrl_completion_over(tinyrl_t * this)
  .           {
  .           	this->completion_over = BOOL_TRUE;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 1471 ----------------------------------------
-- line 1478 ----------------------------------------
  .           bool_t tinyrl_is_completion_error_over(const tinyrl_t * this)
  .           {
  .           	return this->completion_error_over;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void tinyrl_done(tinyrl_t * this)
  .           {
  2 ( 0.00%)  	this->done = BOOL_TRUE;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void tinyrl_enable_echo(tinyrl_t * this)
  .           {
  .           	this->echo_enabled = BOOL_TRUE;
  .           }
  .           
-- line 1494 ----------------------------------------
-- line 1496 ----------------------------------------
  .           void tinyrl_disable_echo(tinyrl_t * this, char echo_char)
  .           {
  .           	this->echo_enabled = BOOL_FALSE;
  .           	this->echo_char = echo_char;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void tinyrl__set_istream(tinyrl_t * this, FILE * istream)
 10 ( 0.00%)  {
 10 ( 0.00%)  	tinyrl_vt100__set_istream(this->term, istream);
785 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__set_istream (1x)
  4 ( 0.00%)  	if (istream) {
  .           		int fd;
 14 ( 0.00%)  		this->isatty = isatty(fileno(istream)) ? BOOL_TRUE : BOOL_FALSE;
1,511 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
  .           		/* Save terminal settings to restore on exit */
  3 ( 0.00%)  		fd = fileno(istream);
  6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
  8 ( 0.00%)  		tcgetattr(fd, &this->default_termios);
1,590 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	} else
  1 ( 0.00%)  		this->isatty = BOOL_FALSE;
  7 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           bool_t tinyrl__get_isatty(const tinyrl_t * this)
  .           {
  1 ( 0.00%)  	return this->isatty;
  1 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           FILE *tinyrl__get_istream(const tinyrl_t * this)
  .           {
 10 ( 0.00%)  	return tinyrl_vt100__get_istream(this->term);
815 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           FILE *tinyrl__get_ostream(const tinyrl_t * this)
  .           {
  .           	return tinyrl_vt100__get_ostream(this->term);
  .           }
  .           
-- line 1533 ----------------------------------------
-- line 1534 ----------------------------------------
  .           /*-------------------------------------------------------- */
  .           const char *tinyrl__get_prompt(const tinyrl_t * this)
  .           {
  .           	return this->prompt;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_prompt(tinyrl_t *this, const char *prompt)
  5 ( 0.00%)  {
  3 ( 0.00%)  	if (this->prompt) {
  .           		lub_string_free(this->prompt);
  .           		this->prompt_size = 0;
  .           		this->prompt_len = 0;
  .           	}
  5 ( 0.00%)  	this->prompt = lub_string_dup(prompt);
157 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  2 ( 0.00%)  	if (this->prompt) {
  8 ( 0.00%)  		this->prompt_size = strlen(this->prompt);
1,462 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  		this->prompt_len = utf8_nsyms(this, this->prompt,
 30 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (1x)
  .           			this->prompt_size);
  .           	}
  4 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           bool_t tinyrl__get_utf8(const tinyrl_t * this)
  .           {
  .           	return this->utf8;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_utf8(tinyrl_t * this, bool_t utf8)
  .           {
  2 ( 0.00%)  	this->utf8 = utf8;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_timeout(tinyrl_t *this, int timeout)
  .           {
 10 ( 0.00%)  	tinyrl_vt100__set_timeout(this->term, timeout);
777 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__set_timeout (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_timeout_fn(tinyrl_t *this,
  .           	tinyrl_timeout_fn_t *fn)
  .           {
  2 ( 0.00%)  	this->timeout_fn = fn;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_keypress_fn(tinyrl_t *this,
  .           	tinyrl_keypress_fn_t *fn)
  .           {
  2 ( 0.00%)  	this->keypress_fn = fn;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_hotkey_fn(tinyrl_t *this,
  .           	tinyrl_key_func_t *fn)
  .           {
  2 ( 0.00%)  	this->hotkey_fn = fn;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           bool_t tinyrl_is_quoting(const tinyrl_t * this)
  .           {
  .           	bool_t result = BOOL_FALSE;
  .           	/* count the quotes upto the current insertion point */
  .           	unsigned int i = 0;
-- line 1600 ----------------------------------------
-- line 1635 ----------------------------------------
  .           extern unsigned int tinyrl__get_height(const tinyrl_t *this)
  .           {
  .           	return tinyrl_vt100__get_height(this->term);
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           int tinyrl__save_history(const tinyrl_t *this, const char *fname)
  .           {
  7 ( 0.00%)  	return tinyrl_history_save(this->history, fname);
10,503 ( 0.19%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           int tinyrl__restore_history(tinyrl_t *this, const char *fname)
  .           {
  7 ( 0.00%)  	return tinyrl_history_restore(this->history, fname);
32,096 ( 0.59%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           void tinyrl__stifle_history(tinyrl_t *this, unsigned int stifle)
  .           {
  7 ( 0.00%)  	tinyrl_history_stifle(this->history, stifle);
770 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c
--------------------------------------------------------------------------------
Ir             

-- line 68 ----------------------------------------
    .            *---------------------------------------------------------------
    .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
    .            **************************************************************** */
    .           #include "private.h"
    .           
    .           /*--------------------------------------------------------- */
    .           lub_bintree_node_t *lub_bintree_splay(const lub_bintree_t * this,
    .           				      lub_bintree_node_t * t, const void *key)
1,734 ( 0.03%)  {
    .           	/* Simple top down splay, not requiring "key" to be in the tree t.  */
    .           	/* What it does is described above.                                 */
    .           	lub_bintree_node_t N, *leftTreeMax, *rightTreeMin, *y;
    .           	int comp;
    .           
1,098 ( 0.02%)  	if (t == NULL)
    .           		return t;
  780 ( 0.01%)  	N.left = N.right = NULL;
  780 ( 0.01%)  	leftTreeMax = rightTreeMin = &N;
    .           
    .           	for (;;) {
1,636 ( 0.03%)  		comp = lub_bintree_compare(this, t, key);
20,387 ( 0.38%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (173x)
4,348 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (139x)
1,352 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (31x)
  132 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (66x)
  818 ( 0.02%)  		if (comp > 0) {
  570 ( 0.01%)  			if (t->left == NULL)
    .           				break;
  515 ( 0.01%)  			if (lub_bintree_compare(this, t->left, key) > 0) {
2,124 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (28x)
  864 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
  164 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (4x)
   66 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (33x)
   77 ( 0.00%)  				y = t->left;	/* rotate right */
  154 ( 0.00%)  				t->left = y->right;
   77 ( 0.00%)  				y->right = t;
    .           				t = y;
  231 ( 0.00%)  				if (t->left == NULL)
    .           					break;
    .           			}
  146 ( 0.00%)  			rightTreeMin->left = t;	/* link right */
    .           			rightTreeMin = t;
  146 ( 0.00%)  			t = t->left;
  219 ( 0.00%)  		} else if (comp < 0) {
  333 ( 0.01%)  			if (t->right == NULL)
    .           				break;
  410 ( 0.01%)  			if (lub_bintree_compare(this, t->right, key) < 0) {
5,917 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (38x)
1,011 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
  319 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (6x)
   66 ( 0.00%)  				y = t->right;	/* rotate left */
   60 ( 0.00%)  				t->right = y->left;
   30 ( 0.00%)  				y->left = t;
    .           				t = y;
  120 ( 0.00%)  				if (t->right == NULL)
    .           					break;
    .           			}
   76 ( 0.00%)  			leftTreeMax->right = t;	/* link left */
    .           			leftTreeMax = t;
  280 ( 0.01%)  			t = t->right;
    .           		} else {
    .           			break;
    .           		}
    .           	}
  260 ( 0.00%)  	leftTreeMax->right = t->left;	/* assemble */
  520 ( 0.01%)  	rightTreeMin->left = t->right;
  520 ( 0.01%)  	t->left = N.right;
  520 ( 0.01%)  	t->right = N.left;
    .           
    .           	/* return the new root */
    .           	return t;
2,615 ( 0.05%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c
--------------------------------------------------------------------------------
Ir           

-- line 31 ----------------------------------------
  .            *    Initial version
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           void *lub_bintree_findnext(lub_bintree_t * this, const void *clientkey)
155 ( 0.00%)  {
  .           	lub_bintree_node_t *t = this->root;
  .           	int comp;
  .           
  .           	/*
  .           	 * have a look for a direct match
  .           	 */
155 ( 0.00%)  	t = this->root = lub_bintree_splay(this, t, clientkey);
14,907 ( 0.28%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (31x)
  .           
 62 ( 0.00%)  	if (NULL != t) {
  .           		/* now look at what we have got */
155 ( 0.00%)  		comp = lub_bintree_compare(this, t, clientkey);
5,854 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (26x)
405 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (5x)
 62 ( 0.00%)  		if (comp <= 0) {
  .           			/*
  .           			 * time to fiddle with the right hand side of the tree
  .           			 * we need the closest node from the right hand side
  .           			 */
 31 ( 0.00%)  			t = t->right =
155 ( 0.00%)  			    lub_bintree_splay(this, t->right, clientkey);
3,655 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (31x)
  .           		}
  .           	}
112 ( 0.00%)  	if (NULL == t) {
  6 ( 0.00%)  		return NULL;
  .           	} else {
 50 ( 0.00%)  		return lub_bintree_getclientnode(this, t);
  .           	}
124 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/command/command.c
--------------------------------------------------------------------------------
Ir             

-- line 15 ----------------------------------------
    .           
    .           /*---------------------------------------------------------
    .            * PRIVATE METHODS
    .            *--------------------------------------------------------- */
    .           static void
    .           clish_command_init(clish_command_t *this, const char *name, const char *text)
    .           {
    .           	/* initialise the node part */
  108 ( 0.00%)  	this->name = lub_string_dup(name);
5,264 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
  108 ( 0.00%)  	this->text = lub_string_dup(text);
5,592 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
    .           
    .           	/* Be a good binary tree citizen */
   81 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
  135 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (27x)
    .           
    .           	/* set up defaults */
   27 ( 0.00%)  	this->link = NULL;
   27 ( 0.00%)  	this->alias = NULL;
   27 ( 0.00%)  	this->alias_view = NULL;
   85 ( 0.00%)  	this->paramv = clish_paramv_new();
4,377 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_new (26x)
  801 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   27 ( 0.00%)  	this->viewid = NULL;
   27 ( 0.00%)  	this->viewname = NULL;
   85 ( 0.00%)  	this->action = clish_action_new();
4,338 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action_new (26x)
  802 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   85 ( 0.00%)  	this->config = clish_config_new();
4,757 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config_new (26x)
  808 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   27 ( 0.00%)  	this->detail = NULL;
   27 ( 0.00%)  	this->escape_chars = NULL;
   27 ( 0.00%)  	this->regex_chars = NULL;
   27 ( 0.00%)  	this->args = NULL;
   27 ( 0.00%)  	this->pview = NULL;
   27 ( 0.00%)  	this->lock = BOOL_TRUE;
   27 ( 0.00%)  	this->interrupt = BOOL_FALSE;
   27 ( 0.00%)  	this->dynamic = BOOL_FALSE;
   27 ( 0.00%)  	this->access = NULL;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           static void clish_command_fini(clish_command_t * this)
   54 ( 0.00%)  {
   81 ( 0.00%)  	lub_string_free(this->name);
2,430 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->text);
2,349 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
    .           
    .           	/* Link need not full cleanup */
   54 ( 0.00%)  	if (this->link)
    .           		return;
    .           
    .           	/* finalize each of the parameter instances */
   85 ( 0.00%)  	clish_paramv_delete(this->paramv);
16,821 ( 0.31%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_delete (26x)
  749 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   85 ( 0.00%)  	clish_action_delete(this->action);
4,555 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action_delete (26x)
  755 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   85 ( 0.00%)  	clish_config_delete(this->config);
3,692 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config_delete (26x)
  787 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   81 ( 0.00%)  	lub_string_free(this->alias);
  243 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->alias_view);
  243 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->viewname);
  972 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->viewid);
  486 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->detail);
  697 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->escape_chars);
  324 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->regex_chars);
  243 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->access);
  324 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	if (this->args)
    2 ( 0.00%)  		clish_param_delete(this->args);
  467 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_delete (1x)
   53 ( 0.00%)  }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC META FUNCTIONS
    .            *--------------------------------------------------------- */
    .           size_t clish_command_bt_offset(void)
    .           {
    .           	return offsetof(clish_command_t, bt_node);
   10 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_bt_compare(const void *clientnode, const void *clientkey)
    .           {
    .           	const clish_command_t *this = clientnode;
    .           	const char *key = clientkey;
    .           
1,011 ( 0.02%)  	return lub_string_nocasecmp(this->name, key);
42,424 ( 0.79%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (337x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
   73 ( 0.00%)  {
    .           	const clish_command_t *this = clientnode;
    .           
    .           	/* fill out the opaque key */
  292 ( 0.01%)  	strcpy((char *)key, this->name);
1,590 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (73x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_new(const char *name, const char *help)
  135 ( 0.00%)  {
  108 ( 0.00%)  	clish_command_t *this = malloc(sizeof(clish_command_t));
9,929 ( 0.18%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (27x)
    .           
   54 ( 0.00%)  	if (this)
    .           		clish_command_init(this, name, help);
    .           
    .           	return this;
  135 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_new_link(const char *name,
    .           	const char *help, const clish_command_t * ref)
    .           {
    .           	if (!ref)
    .           		return NULL;
    .           
-- line 119 ----------------------------------------
-- line 154 ----------------------------------------
    .           
    .           	return this;
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC METHODS
    .            *--------------------------------------------------------- */
    .           void clish_command_delete(clish_command_t * this)
   54 ( 0.00%)  {
   27 ( 0.00%)  	clish_command_fini(this);
37,446 ( 0.69%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_fini (27x)
   81 ( 0.00%)  	free(this);
3,244 ( 0.06%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (27x)
   27 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command_insert_param(clish_command_t * this, clish_param_t * param)
    .           {
   61 ( 0.00%)  	clish_paramv_insert(this->paramv, param);
3,649 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_insert (18x)
  865 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_help(const clish_command_t *this)
    .           {
    .           	this = this; /* Happy compiler */
    .           
    .           	return 0;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_choose_longest(clish_command_t * cmd1,
    .           	clish_command_t * cmd2)
   12 ( 0.00%)  {
   16 ( 0.00%)  	unsigned len1 = (cmd1 ? strlen(clish_command__get_name(cmd1)) : 0);
   32 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (2x)
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (2x)
    4 ( 0.00%)  	unsigned len2 = (cmd2 ? strlen(clish_command__get_name(cmd2)) : 0);
    .           
    .           	if (len2 < len1) {
    .           		return cmd1;
    .           	} else if (len1 < len2) {
    .           		return cmd2;
    .           	} else {
    .           		/* let local view override */
    2 ( 0.00%)  		return cmd1;
    .           	}
   10 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_diff(const clish_command_t * cmd1,
    .           	const clish_command_t * cmd2)
    .           {
    .           	if (NULL == cmd1) {
    .           		if (NULL != cmd2)
    .           			return 1;
-- line 204 ----------------------------------------
-- line 212 ----------------------------------------
    .           		clish_command__get_name(cmd2));
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC ATTRIBUTES
    .            *--------------------------------------------------------- */
    .           const char *clish_command__get_name(const clish_command_t * this)
    .           {
   10 ( 0.00%)  	if (!this)
    .           		return NULL;
   10 ( 0.00%)  	return this->name;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_text(const clish_command_t * this)
    .           {
    .           	return this->text;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_detail(const clish_command_t * this)
    .           {
    1 ( 0.00%)  	return this->detail;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_detail(clish_command_t * this, const char *detail)
    4 ( 0.00%)  {
   12 ( 0.00%)  	assert(NULL == this->detail);
   16 ( 0.00%)  	this->detail = lub_string_dup(detail);
2,053 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (4x)
    8 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_action_t *clish_command__get_action(const clish_command_t *this)
    .           {
   26 ( 0.00%)  	return this->action;
   26 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_config_t *clish_command__get_config(const clish_command_t *this)
    .           {
    4 ( 0.00%)  	return this->config;
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_viewname(clish_command_t * this, const char *viewname)
    .           {
   18 ( 0.00%)  	assert(NULL == this->viewname);
   22 ( 0.00%)  	clish_command__force_viewname(this, viewname);
1,961 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewname (8x)
  985 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__force_viewname(clish_command_t * this, const char *viewname)
   45 ( 0.00%)  {
   27 ( 0.00%)  	if (this->viewname)
    .           		lub_string_free(this->viewname);
   36 ( 0.00%)  	this->viewname = lub_string_dup(viewname);
2,061 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (9x)
   36 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_viewname(const clish_command_t * this)
    .           {
    2 ( 0.00%)  	return this->viewname;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_viewid(clish_command_t * this, const char *viewid)
    .           {
    6 ( 0.00%)  	assert(NULL == this->viewid);
   10 ( 0.00%)  	clish_command__force_viewid(this, viewid);
1,054 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  463 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewid (2x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__force_viewid(clish_command_t * this, const char *viewid)
   15 ( 0.00%)  {
    9 ( 0.00%)  	if (this->viewid)
    .           		lub_string_free(this->viewid);
   12 ( 0.00%)  	this->viewid = lub_string_dup(viewid);
  660 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
   12 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_viewid(const clish_command_t * this)
    .           {
    1 ( 0.00%)  	return this->viewid;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_param_t *clish_command__get_param(const clish_command_t * this,
    .           	unsigned index)
    .           {
    .           	return clish_paramv__get_param(this->paramv, index);
    .           }
    .           
-- line 304 ----------------------------------------
-- line 307 ----------------------------------------
    .           {
    .           	return lub_string_suffix(this->name);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void
    .           clish_command__set_escape_chars(clish_command_t * this,
    .           	const char *escape_chars)
    1 ( 0.00%)  {
    3 ( 0.00%)  	assert(!this->escape_chars);
    4 ( 0.00%)  	this->escape_chars = lub_string_dup(escape_chars);
  156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_escape_chars(const clish_command_t * this)
    .           {
    2 ( 0.00%)  	return this->escape_chars;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_regex_chars(clish_command_t *this,
    .           	const char *escape_chars)
    .           {
    .           	assert(!this->regex_chars);
    .           	this->regex_chars = lub_string_dup(escape_chars);
    .           }
-- line 332 ----------------------------------------
-- line 335 ----------------------------------------
    .           const char *clish_command__get_regex_chars(const clish_command_t *this)
    .           {
    .           	return this->regex_chars;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_args(clish_command_t * this, clish_param_t * args)
    .           {
    2 ( 0.00%)  	assert(NULL == this->args);
    2 ( 0.00%)  	this->args = args;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_param_t *clish_command__get_args(const clish_command_t * this)
    .           {
   26 ( 0.00%)  	return this->args;
   26 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned int clish_command__get_param_count(const clish_command_t * this)
    .           {
    .           	return clish_paramv__get_count(this->paramv);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_paramv_t *clish_command__get_paramv(const clish_command_t * this)
    .           {
   28 ( 0.00%)  	return this->paramv;
   28 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_pview(clish_command_t * this, clish_view_t * view)
    .           {
   52 ( 0.00%)  	this->pview = view;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_t *clish_command__get_pview(const clish_command_t * this)
    .           {
    .           	return this->pview;
    .           }
    .           
-- line 376 ----------------------------------------
-- line 380 ----------------------------------------
    .           	if (!this->pview)
    .           		return 0;
    .           	return clish_view__get_depth(this->pview);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_restore_e clish_command__get_restore(const clish_command_t * this)
    .           {
    6 ( 0.00%)  	if (!this->pview)
    .           		return CLISH_RESTORE_NONE;
    6 ( 0.00%)  	return clish_view__get_restore(this->pview);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t * clish_command__get_orig(const clish_command_t * this)
    .           {
    .           	if (this->link)
    .           		return clish_command__get_orig(this->link);
    .           	return this;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_lock(const clish_command_t * this)
    .           {
    2 ( 0.00%)  	return this->lock;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_lock(clish_command_t * this, bool_t lock)
    .           {
   56 ( 0.00%)  	this->lock = lock;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_alias(clish_command_t * this, const char * alias)
    .           {
    .           	if (this->alias)
    .           		lub_string_free(this->alias);
    .           	this->alias = lub_string_dup(alias);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char * clish_command__get_alias(const clish_command_t * this)
    .           {
   26 ( 0.00%)  	return this->alias;
   26 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_alias_view(clish_command_t *this,
    .           	const char *alias_view)
    .           {
    .           	if (this->alias_view)
    .           		lub_string_free(this->alias_view);
    .           	this->alias_view = lub_string_dup(alias_view);
-- line 433 ----------------------------------------
-- line 448 ----------------------------------------
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_dynamic(const clish_command_t * this)
    .           {
    .           	return this->dynamic;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t * clish_command__get_cmd(const clish_command_t * this)
    4 ( 0.00%)  {
    6 ( 0.00%)  	if (!this->dynamic)
    .           		return this;
    .           	if (this->link)
    .           		return clish_command__get_cmd(this->link);
    .           	return NULL;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_interrupt(const clish_command_t * this)
    .           {
    2 ( 0.00%)  	return this->interrupt;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_interrupt(clish_command_t * this, bool_t interrupt)
    .           {
   54 ( 0.00%)  	this->interrupt = interrupt;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_access(clish_command_t *this, const char *access)
    5 ( 0.00%)  {
    3 ( 0.00%)  	if (this->access)
    .           		lub_string_free(this->access);
    4 ( 0.00%)  	this->access = lub_string_dup(access);
  155 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_access(const clish_command_t *this)
    .           {
    .           	return this->access;
    .           }

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c
--------------------------------------------------------------------------------
Ir           

-- line 29 ----------------------------------------
  .            *   Initial version 
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           void *lub_bintree_find(lub_bintree_t * this, const void *clientkey)
430 ( 0.01%)  {
434 ( 0.01%)  	this->root = lub_bintree_splay(this, this->root, clientkey);
15,595 ( 0.29%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (85x)
773 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
172 ( 0.00%)  	if (NULL != this->root) {
438 ( 0.01%)  		if (lub_bintree_compare(this, this->root, clientkey) == 0)
1,973 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (42x)
1,720 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (25x)
212 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (6x)
 66 ( 0.00%)  			return lub_bintree_getclientnode(this, this->root);
  .           	}
 53 ( 0.00%)  	return NULL;
344 ( 0.01%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c
--------------------------------------------------------------------------------
Ir              

-- line 78 ----------------------------------------
     .            * @param node element to add
     .            * @return new first element of the list
     .            */
     .           static clish_xmlnode_t *clish_expat_list_push_back(clish_xmlnode_t *first, clish_xmlnode_t *node)
     .           {
     .           	clish_xmlnode_t *cur = first;
     .           	clish_xmlnode_t *prev = NULL;
     .           
25,493 ( 0.47%)  	while (cur) {
     .           		prev = cur;
 7,754 ( 0.14%)  		cur = cur->next;
     .           	}
     .           	if (prev) {
   906 ( 0.02%)  		prev->next = node;
     .           		return first;
     .           	}
     .           	return node;
     .           }
     .           
     .           /** Generic add_attr() function
     .            *
     .            * @param first first attribute in the attribute list
-- line 99 ----------------------------------------
-- line 100 ----------------------------------------
     .            * @param n attribute name
     .            * @param v attribute value
     .            * @return the new first attribute in the attribute list
     .            */
     .           static clish_xmlnode_t *clish_expat_add_attr(clish_xmlnode_t *first, const char *n, const char *v)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   868 ( 0.02%)  	node = malloc(sizeof(clish_xmlnode_t));
43,906 ( 0.81%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (217x)
   434 ( 0.01%)  	if (!node)
     .           		return first;
     .           
   868 ( 0.02%)  	node->name = strdup(n);
50,081 ( 0.93%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   868 ( 0.02%)  	node->content = strdup(v);
54,052 ( 1.00%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   217 ( 0.00%)  	node->children = NULL;
   217 ( 0.00%)  	node->attributes = NULL;
   217 ( 0.00%)  	node->next = NULL;
   217 ( 0.00%)  	node->type = CLISH_XMLNODE_ATTR;
   217 ( 0.00%)  	node->depth = 0;
     .           
     .           	return clish_expat_list_push_back(first, node);
     .           }
     .           
     .           /** Run through an expat attribute list, and create a DOM-like attribute list
     .            *
     .            * @param node parent node
     .            * @param attr NULL-terminated attribute liste
-- line 126 ----------------------------------------
-- line 127 ----------------------------------------
     .            *
     .            * Each attribute uses two slots in the expat attribute list. The first one is
     .            * used to store the name, the second one is used to store the value.
     .            */
     .           static void clish_expat_add_attrlist(clish_xmlnode_t *node, const char **attr)
     .           {
     .           	int i;
     .           
 1,173 ( 0.02%)  	for (i = 0; attr[i]; i += 2) {
   434 ( 0.01%)  		node->attributes = clish_expat_add_attr(node->attributes,
     .           			attr[i], attr[i+1]);
     .           	}
     .           }
     .           
     .           /** Generic make_node() function
     .            *
     .            * @param parent XML parent node
     .            * @param type XML node type
-- line 144 ----------------------------------------
-- line 147 ----------------------------------------
     .            * @param attr attribute list
     .            * @return a new node or NULL on error
     .            */
     .           static clish_xmlnode_t *clish_expat_make_node(clish_xmlnode_t *parent,
     .           					      clish_xmlnodetype_e type,
     .           					      const char *n,
     .           					      const char *v,
     .           					      const char **attr)
 7,428 ( 0.14%)  {
     .           	clish_xmlnode_t *node;
     .           
 2,476 ( 0.05%)  	node = malloc(sizeof(clish_xmlnode_t));
122,625 ( 2.27%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (619x)
 1,238 ( 0.02%)  	if (!node)
     .           		return NULL;
 2,770 ( 0.05%)  	node->name = n ? strdup(n) : NULL;
18,520 ( 0.34%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (98x)
 4,039 ( 0.07%)  	node->content = v ? strdup(v) : NULL;
127,644 ( 2.36%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (521x)
   619 ( 0.01%)  	node->children = NULL;
   619 ( 0.01%)  	node->attributes = NULL;
   619 ( 0.01%)  	node->next = NULL;
 1,238 ( 0.02%)  	node->parent = parent;
 3,085 ( 0.06%)  	node->doc = parent ? parent->doc : NULL;
 2,446 ( 0.05%)  	node->depth = parent ? parent->depth + 1 : 0;
   619 ( 0.01%)  	node->type = type;
     .           
 1,238 ( 0.02%)  	if (attr)
     .           		clish_expat_add_attrlist(node, attr);
     .           
   152 ( 0.00%)  	if (parent)
 2,436 ( 0.05%)  		parent->children = clish_expat_list_push_back(parent->children, node);
     .           
     .           	return node;
 5,571 ( 0.10%)  }
     .           
     .           /** Add a new XML root
     .            *
     .            * @param doc XML document
     .            * @param el root node name
     .            * @param attr expat attribute list
     .            * @return a new root element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_root(clish_xmldoc_t *doc, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   314 ( 0.01%)  	node = clish_expat_make_node(NULL, CLISH_XMLNODE_ELM, el, NULL, attr);
25,689 ( 0.48%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (10x)
    20 ( 0.00%)  	if (!node)
     .           		return doc->root;
     .           
    30 ( 0.00%)  	doc->root = clish_expat_list_push_back(doc->root, node);
     .           
     .           	return node;
     .           }
     .           
     .           /** Add a new XML element as a child
     .            *
     .            * @param cur parent XML element
     .            * @param el element name
     .            * @param attr expat attribute list
     .            * @return a new XMl element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_child(clish_xmlnode_t *cur, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   176 ( 0.00%)  	node = clish_expat_make_node(cur, CLISH_XMLNODE_ELM, el, NULL, attr);
176,525 ( 3.27%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (88x)
   176 ( 0.00%)  	if (!node)
     .           		return cur;
     .           
     .           	return node;
     .           }
     .           
     .           /** Expat handler: element content
     .            *
     .            * @param data user data
     .            * @param s content (not nul-termainated)
     .            * @param len content length
     .            */
     .           static void clish_expat_chardata_handler(void *data, const char *s, int len)
 2,605 ( 0.05%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
 2,605 ( 0.05%)  	if (doc->current) {
 2,605 ( 0.05%)  		char *content = malloc(len + 1);
67,724 ( 1.25%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (521x)
 2,609 ( 0.05%)  		strncpy(content, s, len);
18,137 ( 0.34%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (520x)
 1,541 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   521 ( 0.01%)  		content[len] = '\0';
     .           
 3,126 ( 0.06%)  		clish_expat_make_node(doc->current, CLISH_XMLNODE_TEXT, NULL, content, NULL);
291,048 ( 5.39%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (521x)
     .           		/*
     .           		 * the previous call is a bit too generic, and strdup() content
     .           		 * so we need to free out own version of content.
     .           		 */
 1,567 ( 0.03%)  		free(content);
45,760 ( 0.85%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (520x)
 1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           	}
 2,605 ( 0.05%)  }
     .           
     .           /** Expat handler: start XML element
     .            *
     .            * @param data user data
     .            * @param el element name (nul-terminated)
     .            * @param attr expat attribute list
     .            */
     .           static void clish_expat_element_start(void *data, const char *el, const char **attr)
   490 ( 0.01%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (!doc->current) {
     .           		doc->current = clish_expat_add_root(doc, el, attr);
     .           	} else {
    98 ( 0.00%)  		doc->current = clish_expat_add_child(doc->current, el, attr);
     .           	}
   392 ( 0.01%)  }
     .           
     .           /** Expat handler: end XML element
     .            *
     .            * @param data user data
     .            * @param el element name
     .            */
     .           static void clish_expat_element_end(void *data, const char *el)
     .           {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (doc->current) {
   294 ( 0.01%)  		doc->current = doc->current->parent;
     .           	}
     .           
     .           	el = el; /* Happy compiler */
     .           }
     .           
     .           /** Free a node, its children and its attributes
     .            *
     .            * @param node node to free
     .            */
     .           static void clish_expat_free_node(clish_xmlnode_t *cur)
 3,344 ( 0.06%)  {
     .           	clish_xmlnode_t *node;
     .           	clish_xmlnode_t *first;
     .           
 2,584 ( 0.05%)  	if (cur->attributes) {
     .           		first = cur->attributes;
   651 ( 0.01%)  		while (first) {
     .           			node = first;
   217 ( 0.00%)  			first = first->next;
   217 ( 0.00%)  			clish_expat_free_node(node);
 8,729 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (30x)
     .           		}
     .           	}
 2,569 ( 0.05%)  	if (cur->children) {
     .           		first = cur->children;
 1,827 ( 0.03%)  		while (first) {
     .           			node = first;
   609 ( 0.01%)  			first = first->next;
   609 ( 0.01%)  			clish_expat_free_node(node);
179,286 ( 3.32%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (174x)
     .           		}
     .           	}
 2,508 ( 0.05%)  	if (cur->name)
   630 ( 0.01%)  		free(cur->name);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.05%)  	if (cur->content)
 1,476 ( 0.03%)  		free(cur->content);
65,002 ( 1.20%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (738x)
 2,508 ( 0.05%)  	free(cur);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.05%)  }
     .           
     .           /*
     .            * Public interface
     .            */
     .           
     .           int clish_xmldoc_start(void)
     .           {
     .           	return 0;
     .           }
     .           
     .           int clish_xmldoc_stop(void)
     .           {
     .           	return 0;
     2 ( 0.00%)  }
     .           
     .           clish_xmldoc_t *clish_xmldoc_read(const char *filename)
    70 ( 0.00%)  {
     .           	clish_xmldoc_t *doc;
     .           	struct stat sb;
     .           	int fd;
     .           	char *buffer;
     .           	XML_Parser parser;
     .           	int rb;
     .           
    54 ( 0.00%)  	doc = malloc(sizeof(clish_xmldoc_t));
 1,728 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,269 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc (9x)
    20 ( 0.00%)  	if (!doc)
     .           		return NULL;
     .           	memset(doc, 0, sizeof(clish_xmldoc_t));
    44 ( 0.00%)  	doc->filename = strdup(filename);
 1,751 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,935 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (9x)
    44 ( 0.00%)  	parser = XML_ParserCreate(NULL);
 2,156 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
95,702 ( 1.77%)  => ???:XML_ParserCreate (9x)
    20 ( 0.00%)  	if (!parser)
     .           		goto error_parser_create;
    44 ( 0.00%)  	XML_SetUserData(parser, doc);
   949 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    54 ( 0.00%)  => ???:XML_SetUserData (9x)
    44 ( 0.00%)  	XML_SetCharacterDataHandler(parser, clish_expat_chardata_handler);
 1,060 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    18 ( 0.00%)  => ???:XML_SetCharacterDataHandler (9x)
    54 ( 0.00%)  	XML_SetElementHandler(parser,
 1,011 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    27 ( 0.00%)  => ???:XML_SetElementHandler (9x)
     .           		clish_expat_element_start,
     .           		clish_expat_element_end);
     .           
    64 ( 0.00%)  	fd = open(filename, O_RDONLY);
 1,430 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:open (9x)
    20 ( 0.00%)  	if (fd < 0)
     .           		goto error_open;
     .           	fstat(fd, &sb);
    50 ( 0.00%)  	buffer = malloc(sb.st_size+1);
 2,926 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (10x)
    54 ( 0.00%)  	rb = read(fd, buffer, sb.st_size);
 1,446 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (9x)
    20 ( 0.00%)  	if (rb < 0) {
     .           		close(fd);
     .           		goto error_parse;
     .           	}
    20 ( 0.00%)  	buffer[sb.st_size] = 0;
    34 ( 0.00%)  	close(fd);
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:close (9x)
     .           
    84 ( 0.00%)  	if (!XML_Parse(parser, buffer, sb.st_size, 1))
1,305,655 (24.18%)  => ???:XML_Parse (9x)
112,859 ( 2.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           		goto error_parse;
     .           
    34 ( 0.00%)  	XML_ParserFree(parser);
 6,192 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
46,686 ( 0.86%)  => ???:XML_ParserFree (9x)
    30 ( 0.00%)  	free(buffer);
 1,344 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           
     .           	return doc;
     .           
     .           error_parse:
     .           	free(buffer);
     .           
     .           error_open:
     .           	XML_ParserFree(parser);
     .           
     .           error_parser_create:
     .           	clish_xmldoc_release(doc);
     .           
     .           	return NULL;
    80 ( 0.00%)  }
     .           
     .           void clish_xmldoc_release(clish_xmldoc_t *doc)
    20 ( 0.00%)  {
    20 ( 0.00%)  	if (doc) {
     .           		clish_xmlnode_t *node;
    70 ( 0.00%)  		while (doc->root) {
     .           			node = doc->root;
    20 ( 0.00%)  			doc->root = node->next;
    10 ( 0.00%)  			clish_expat_free_node(node);
191,055 ( 3.54%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node (10x)
     .           		}
    30 ( 0.00%)  		if (doc->filename)
    20 ( 0.00%)  			free(doc->filename);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
    30 ( 0.00%)  		free(doc);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           	}
    10 ( 0.00%)  }
     .           
     .           int clish_xmldoc_is_valid(clish_xmldoc_t *doc)
     .           {
    53 ( 0.00%)  	return doc && doc->root;
    12 ( 0.00%)  }
     .           
     .           int clish_xmldoc_error_caps(clish_xmldoc_t *doc)
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return CLISH_XMLERR_NOCAPS;
     .           }
     .           
-- line 403 ----------------------------------------
-- line 419 ----------------------------------------
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return "";
     .           }
     .           
     .           int clish_xmlnode_get_type(clish_xmlnode_t *node)
     .           {
 1,281 ( 0.02%)  	if (node)
   427 ( 0.01%)  		return node->type;
     .           	return CLISH_XMLNODE_UNKNOWN;
   427 ( 0.01%)  }
     .           
     .           clish_xmlnode_t *clish_xmldoc_get_root(clish_xmldoc_t *doc)
     .           {
    20 ( 0.00%)  	if (doc)
    20 ( 0.00%)  		return doc->root;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_parent(clish_xmlnode_t *node)
     .           {
    80 ( 0.00%)  	if (node)
    80 ( 0.00%)  		return node->parent;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_next_child(clish_xmlnode_t *parent,
     .           					  clish_xmlnode_t *curchild)
     .           {
   956 ( 0.02%)  	if (curchild)
   834 ( 0.02%)  		return curchild->next;
   122 ( 0.00%)  	if (parent)
   122 ( 0.00%)  		return parent->children;
     .           	return NULL;
     .           }
     .           
     .           char *clish_xmlnode_fetch_attr(clish_xmlnode_t *node,
     .           			       const char *attrname)
 2,648 ( 0.05%)  {
 1,324 ( 0.02%)  	if (node) {
   662 ( 0.01%)  		clish_xmlnode_t *n = node->attributes;
 4,292 ( 0.08%)  		while (n) {
 9,924 ( 0.18%)  			if (strcmp(n->name, attrname) == 0)
32,888 ( 0.61%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (1,654x)
   187 ( 0.00%)  				return n->content;
 1,467 ( 0.03%)  			n = n->next;
     .           		}
     .           	}
   475 ( 0.01%)  	return NULL;
 2,648 ( 0.05%)  }
     .           
     .           int clish_xmlnode_get_content(clish_xmlnode_t *node, char *content,
     .           			      unsigned int *contentlen)
   182 ( 0.00%)  {
     .           	unsigned int minlen = 1;
     .           
   208 ( 0.00%)  	if (node && content && contentlen) {
    26 ( 0.00%)  		clish_xmlnode_t *children = node->children;
   505 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   576 ( 0.01%)  				minlen += strlen(children->content);
 5,114 ( 0.09%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (192x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    52 ( 0.00%)  		if (minlen >= *contentlen) {
     .           			*contentlen = minlen + 1;
     .           			return -E2BIG;
     .           		}
     .           		children = node->children;
    52 ( 0.00%)  		*content = 0;
   407 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   580 ( 0.01%)  				strcat(content, children->content);
29,395 ( 0.54%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned (191x)
 1,492 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    26 ( 0.00%)  		return 0;
     .           	}
     .           
     .           	return -EINVAL;
   156 ( 0.00%)  }
     .           
     .           int clish_xmlnode_get_name(clish_xmlnode_t *node, char *name,
     .           	unsigned int *namelen)
   552 ( 0.01%)  {
 1,104 ( 0.02%)  	if (node && name && namelen) {
 1,108 ( 0.02%)  		if (strlen(node->name) >= *namelen) {
 2,192 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (137x)
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			*namelen = strlen(node->name) + 1;
     .           			return -E2BIG;
     .           		}
   828 ( 0.02%)  		snprintf(name, *namelen, "%s", node->name);
72,205 ( 1.34%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (138x)
   414 ( 0.01%)  		name[*namelen - 1] = '\0';
   138 ( 0.00%)  		return 0;
     .           	}
     .           	return -EINVAL;
   552 ( 0.01%)  }
     .           
     .           void clish_xmlnode_print(clish_xmlnode_t *node, FILE *out)
     .           {
     .           	if (node) {
     .           		int i;
     .           		clish_xmlnode_t *a;
     .           		for (i=0; i<node->depth; ++i) {
     .           			fprintf(out, "  ");
-- line 520 ----------------------------------------
-- line 525 ----------------------------------------
     .           			fprintf(out, " %s='%s'", a->name, a->content);
     .           			a = a->next;
     .           		}
     .           		fprintf(out, ">...");
     .           	}
     .           }
     .           
     .           void clish_xml_release(void *p)
   661 ( 0.01%)  {
     .           	p = p; /* Happy compiler */
     .           	/* nothing to release */
     .           }
     .           
     .           #endif /* HAVE_LIB_EXPAT */
     .           

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/xmlapi.h
--------------------------------------------------------------------------------
Ir           

-- line 124 ----------------------------------------
  .           /*
  .            * get the node name
  .            * dynamically allocate the buffer (it must be freed once you don't need it
  .            * anymore) that will contain all the content of the node.
  .            * return NULL on error.
  .            */
  .           static inline char* clish_xmlnode_get_all_name(clish_xmlnode_t *node)
  .           {
 40 ( 0.00%)  	char *name = NULL; 
120 ( 0.00%)  	unsigned int nlen = 2048; 
  .           	int result;
  .           
  .           	do { 
164 ( 0.00%)  		name = (char*)realloc(name, nlen);
10,096 ( 0.19%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (20x)
2,745 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
200 ( 0.00%)  		result = clish_xmlnode_get_name(node, name, &nlen);
12,075 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (21x)
 80 ( 0.00%)  	} while (result == -E2BIG);
  .           
 80 ( 0.00%)  	if (result < 0) {
  .           		free(name);
  .           		return NULL;
  .           	}
  .           
  .           	return name;
  .           }
  .           
  .           /*
-- line 149 ----------------------------------------
-- line 163 ----------------------------------------
  .           /*
  .            * get the node content
  .            * dynamically allocate the buffer (it must be freed once you don't need it
  .            * anymore) that will contain all the content of the node.
  .            * return NULL on error.
  .            */
  .           static inline char* clish_xmlnode_get_all_content(clish_xmlnode_t *node)
  .           {
 46 ( 0.00%)  	char *content = NULL; 
 58 ( 0.00%)  	unsigned int clen = 2048; 
  .           	int result;
  .           
  .           	do { 
100 ( 0.00%)  		content = (char*)realloc(content, clen);
6,724 ( 0.12%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (21x)
129 ( 0.00%)  		result = clish_xmlnode_get_content(node, content, &clen);
2,260 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,094 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (20x)
 50 ( 0.00%)  	} while (result == -E2BIG);
  .           
 50 ( 0.00%)  	if (result < 0) {
  .           		free(content);
  .           		return NULL;
  .           	}
  .           
  .           	return content;
  .           }
  .           
  .           /*
-- line 188 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 5 ----------------------------------------
  .           #include <assert.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_shell_find_ptype(clish_shell_t *this,
  .           	const char *name)
  .           {
 75 ( 0.00%)  	return lub_bintree_find(&this->ptype_tree, name);
6,443 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_shell_find_create_ptype(clish_shell_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
169 ( 0.00%)  {
 43 ( 0.00%)  	clish_ptype_t *ptype = lub_bintree_find(&this->ptype_tree, name);
1,629 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,441 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (12x)
  .           
 39 ( 0.00%)  	if (!ptype) {
  .           		/* create a ptype */
108 ( 0.00%)  		ptype = clish_ptype_new(name, text, pattern,
1,929,722 (35.74%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new (12x)
150,975 ( 2.80%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			method, preprocess);
 26 ( 0.00%)  		assert(ptype);
 69 ( 0.00%)  		clish_shell_insert_ptype(this, ptype);
1,539 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,578 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_insert_ptype (12x)
  .           	} else {
  .           		if (pattern) {
  .           			/* set the pattern */
  .           			clish_ptype__set_pattern(ptype, pattern, method);
  .           			/* set the preprocess */
  .           			clish_ptype__set_preprocess(ptype, preprocess);
  .           		}
  .           		/* set the help text */
  .           		if (text)
  .           			clish_ptype__set_text(ptype, text);
  .           	}
  .           
  .           	return ptype;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_shell_insert_ptype(clish_shell_t * this, clish_ptype_t * ptype)
  .           {
 43 ( 0.00%)  	(void)lub_bintree_insert(&this->ptype_tree, ptype);
2,542 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (12x)
855 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 11 ----------------------------------------
  .           #include <string.h>
  .           #include <assert.h>
  .           #include <limits.h>
  .           #include <stdio.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
 51 ( 0.00%)  static char *clish_ptype_select__get_name(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 38 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
829 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
160 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (16x)
 51 ( 0.00%)  	if (arg) {
 68 ( 0.00%)  		size_t name_len = strlen(arg);
326 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (17x)
 72 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
1,504 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
368 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (16x)
  .           		if (lbrk)
 68 ( 0.00%)  			name_len = (size_t) (lbrk - arg);
 72 ( 0.00%)  		result = lub_string_dupn(arg, name_len);
2,561 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,621 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (16x)
  .           	}
  .           	return result;
 51 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_select__get_value(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
  .           	const char *arg = lub_argv__get_arg(this->u.select.items, index);
  .           	if (arg) {
-- line 40 ----------------------------------------
-- line 53 ----------------------------------------
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype__set_range(clish_ptype_t * this)
  .           {
  .           	char tmp[80];
  .           
  .           	/* Now set up the range values */
 75 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* Nothing more to do */
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* Setup the integer range */
 12 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%d..%d",
  .           			this->u.integer.min, this->u.integer.max);
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		this->range = lub_string_dup(tmp);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* Setup the unsigned integer range */
 15 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%u..%u",
2,947 ( 0.05%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (3x)
  .           			(unsigned int)this->u.integer.min,
  .           			(unsigned int)this->u.integer.max);
  3 ( 0.00%)  		tmp[sizeof(tmp) - 1] = '\0';
 12 ( 0.00%)  		this->range = lub_string_dup(tmp);
933 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		/* Setup the selection values to the help text */
  .           		unsigned int i;
  .           
121 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items); i++) {
870 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 38 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (19x)
 68 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
8,840 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (17x)
  .           
 34 ( 0.00%)  			if (i > 0)
 73 ( 0.00%)  				lub_string_cat(&this->range, "/");
3,648 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (14x)
128 ( 0.00%)  			snprintf(tmp, sizeof(tmp), "%s", name);
8,790 ( 0.16%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (17x)
 17 ( 0.00%)  			tmp[sizeof(tmp) - 1] = '\0';
 68 ( 0.00%)  			lub_string_cat(&this->range, tmp);
5,400 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (17x)
 51 ( 0.00%)  			lub_string_free(name);
1,530 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (17x)
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_ptype_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_ptype_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
846 ( 0.02%)  	return strcmp(this->name, key);
8,093 ( 0.15%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (282x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_ptype_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 25 ( 0.00%)  {
  .           	const clish_ptype_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
100 ( 0.00%)  	strcpy((char *)key, this->name);
555 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           size_t clish_ptype_bt_offset(void)
  .           {
  .           	return offsetof(clish_ptype_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *method_names[] = {
  .           	"regexp",
  .           	"integer",
  .           	"unsignedInteger",
  .           	"select"
  .           };
-- line 137 ----------------------------------------
-- line 143 ----------------------------------------
  .           
  .           	if (method >= max_method)
  .           		return NULL;
  .           	return method_names[method];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_method_e clish_ptype_method_resolve(const char *name)
 36 ( 0.00%)  {
 10 ( 0.00%)  	clish_ptype_method_e result = CLISH_PTYPE_REGEXP;
 22 ( 0.00%)  	if (NULL != name) {
  .           		unsigned i;
 36 ( 0.00%)  		for (i = 0; i < CLISH_PTYPE_SELECT + 1; i++) {
114 ( 0.00%)  			if (0 == strcmp(name, method_names[i])) {
413 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (18x)
  .           				result = (clish_ptype_method_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
  .           		assert(i <= CLISH_PTYPE_SELECT);
  .           	}
  .           	return result;
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *preprocess_names[] = {
  .           	"none",
  .           	"toupper",
  .           	"tolower"
  .           };
  .           
-- line 173 ----------------------------------------
-- line 176 ----------------------------------------
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	return preprocess_names[preprocess];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_preprocess_e clish_ptype_preprocess_resolve(const char *name)
  .           {
 22 ( 0.00%)  	clish_ptype_preprocess_e result = CLISH_PTYPE_NONE;
 22 ( 0.00%)  	if (name) {
  .           		unsigned i;
  .           		for (i = 0; i < CLISH_PTYPE_TOLOWER + 1; i++) {
  .           			if (0 == strcmp(name, preprocess_names[i])) {
  .           				result = (clish_ptype_preprocess_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
-- line 193 ----------------------------------------
-- line 372 ----------------------------------------
  .           	return (char *)result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_init(clish_ptype_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
  .           {
 26 ( 0.00%)  	assert(name);
 52 ( 0.00%)  	this->name = lub_string_dup(name);
2,932 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
 13 ( 0.00%)  	this->text = NULL;
 13 ( 0.00%)  	this->pattern = NULL;
 13 ( 0.00%)  	this->preprocess = preprocess;
 13 ( 0.00%)  	this->range = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 43 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
947 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (12x)
  .           
 26 ( 0.00%)  	if (pattern) {
  .           		/* set the pattern for this type */
 69 ( 0.00%)  		clish_ptype__set_pattern(this, pattern, method);
1,918,667 (35.53%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern (12x)
148,076 ( 2.74%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	} else {
  .           		/* The method is regexp by default */
  .           		this->method = CLISH_PTYPE_REGEXP;
  .           	}
  .           	
  .           	/* set the help text for this type */
 26 ( 0.00%)  	if (text)
 56 ( 0.00%)  		clish_ptype__set_text(this, text);
832 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,699 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_text (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_validate(const clish_ptype_t * this, const char *text)
  .           {
  .           	return clish_ptype_validate_or_translate(this, text, BOOL_FALSE);
  .           }
  .           
-- line 408 ----------------------------------------
-- line 411 ----------------------------------------
  .           {
  .           	return clish_ptype_validate_or_translate(this, text, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_ptype_new(const char *name,
  .           	const char *help, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
156 ( 0.00%)  {
 52 ( 0.00%)  	clish_ptype_t *this = malloc(sizeof(clish_ptype_t));
4,162 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (13x)
  .           
 26 ( 0.00%)  	if (this)
  .           		clish_ptype_init(this, name, help, pattern, method, preprocess);
  .           	return this;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_fini(clish_ptype_t * this)
  .           {
 26 ( 0.00%)  	if (this->pattern) {
 51 ( 0.00%)  		switch (this->method) {
  .           		case CLISH_PTYPE_REGEXP:
 32 ( 0.00%)  			regfree(&this->u.regexp);
59,600 ( 1.10%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regfree (6x)
29,264 ( 0.54%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			break;
  .           		case CLISH_PTYPE_INTEGER:
  .           		case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           			break;
  .           		case CLISH_PTYPE_SELECT:
  9 ( 0.00%)  			lub_argv_delete(this->u.select.items);
2,277 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (3x)
  .           			break;
  .           		}
  .           	}
  .           
 39 ( 0.00%)  	lub_string_free(this->name);
1,170 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
 13 ( 0.00%)  	this->name = NULL;
 39 ( 0.00%)  	lub_string_free(this->text);
1,170 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
 13 ( 0.00%)  	this->text = NULL;
 39 ( 0.00%)  	lub_string_free(this->pattern);
1,199 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
 13 ( 0.00%)  	this->pattern = NULL;
 39 ( 0.00%)  	lub_string_free(this->range);
603 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
  .           	this->range = NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype_delete(clish_ptype_t * this)
 26 ( 0.00%)  {
  .           	clish_ptype_fini(this);
 39 ( 0.00%)  	free(this);
1,557 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (13x)
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_ptype__get_name(const clish_ptype_t * this)
  .           {
  .           	return (const char *)this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 467 ----------------------------------------
-- line 469 ----------------------------------------
  .           {
  .           	return (const char *)this->text;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_pattern(clish_ptype_t * this,
  .           			 const char *pattern, clish_ptype_method_e method)
 91 ( 0.00%)  {
 26 ( 0.00%)  	assert(NULL == this->pattern);
 13 ( 0.00%)  	this->method = method;
  .           
 74 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           	{
  .           		int result;
  .           
  .           		/* only the expression is allowed */
 39 ( 0.00%)  		lub_string_cat(&this->pattern, "^");
5,043 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,648 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (6x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, pattern);
3,484 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, "$");
1,814 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
  .           
  .           		/* compile the regular expression for later use */
 39 ( 0.00%)  		result = regcomp(&this->u.regexp, this->pattern,
1,847,778 (34.22%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp (6x)
141,777 ( 2.63%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			REG_NOSUB | REG_EXTENDED);
 14 ( 0.00%)  		assert(0 == result);
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* default the range to that of an integer */
  3 ( 0.00%)  		this->u.integer.min = INT_MIN;
  3 ( 0.00%)  		this->u.integer.max = INT_MAX;
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
726 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* now try and read the specified range */
 28 ( 0.00%)  		sscanf(this->pattern, "%d..%d",
2,835 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,758 ( 0.05%)  => /opt/build/glibc/glibc-2.24/stdio-common/isoc99_sscanf.c:__isoc99_sscanf (2x)
  .           			&this->u.integer.min, &this->u.integer.max);
  3 ( 0.00%)  		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* default the range to that of an unsigned integer */
  .           		this->u.integer.min = 0;
  .           		this->u.integer.max = (int)UINT_MAX;
  .           		this->pattern = lub_string_dup(pattern);
  .           		/* now try and read the specified range */
  .           		sscanf(this->pattern, "%u..%u",
  .           			(unsigned int *)&this->u.integer.min,
  .           			(unsigned int *)&this->u.integer.max);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
816 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* store a vector of item descriptors */
 29 ( 0.00%)  		this->u.select.items = lub_argv_new(this->pattern, 0);
15,931 ( 0.30%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,229 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (2x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	}
  .           	/* now set up the range details */
  .           	clish_ptype__set_range(this);
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype__set_text(clish_ptype_t * this, const char *text)
 13 ( 0.00%)  {
 39 ( 0.00%)  	assert(!this->text);
 52 ( 0.00%)  	this->text = lub_string_dup(text);
3,732 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
  .           
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_preprocess(clish_ptype_t * this,
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	assert(!this->preprocess);
  .           	this->preprocess = preprocess;
-- line 545 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c
--------------------------------------------------------------------------------
Ir           

-- line 26 ----------------------------------------
  .            *    Initial version
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           void *lub_bintree_iterator_next(lub_bintree_iterator_t * this)
124 ( 0.00%)  {
159 ( 0.00%)  	void *clientnode = lub_bintree_findnext(this->tree, &this->key);
24,914 ( 0.46%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext (30x)
1,778 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* make sure that next time we've move onward */
159 ( 0.00%)  	lub_bintree_iterator_init(this, this->tree, clientnode);
861 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,000 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_init.c:lub_bintree_iterator_init (30x)
  .           
  .           	return clientnode;
155 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c
--------------------------------------------------------------------------------
Ir             

-- line 15 ----------------------------------------
    .           bool_t lub_ctype_isspace(char c)
    .           {
    .           	unsigned char tmp = (unsigned char)c;
    .           	return isspace(tmp) ? BOOL_TRUE : BOOL_FALSE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           char lub_ctype_tolower(char c)
4,024 ( 0.07%)  {
    .           	unsigned char tmp = (unsigned char)c;
8,052 ( 0.15%)  	return tolower(tmp);
6,033 ( 0.11%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc (2,011x)
1,639 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,024 ( 0.07%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char lub_ctype_toupper(char c)
    .           {
    .           	unsigned char tmp = (unsigned char)c;
    .           	return toupper(tmp);
    .           }
    .           
-- line 34 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/string/string.c
--------------------------------------------------------------------------------
Ir             

-- line 10 ----------------------------------------
    .           
    .           const char *lub_string_esc_default = "`|$<>&()#;\\\"!";
    .           const char *lub_string_esc_regex = "^$.*+[](){}";
    .           const char *lub_string_esc_quoted = "\\\"";
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_free(char *ptr)
    .           {
1,692 ( 0.03%)  	free(ptr);
33,110 ( 0.61%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (843x)
1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_ndecode(const char *string, unsigned int len)
   88 ( 0.00%)  {
    .           	const char *s = string;
    .           	char *res, *p;
    .           	int esc = 0;
    .           
   44 ( 0.00%)  	if (!string)
    .           		return NULL;
    .           
    .           	/* Allocate enough memory for result */
   88 ( 0.00%)  	p = res = malloc(len + 1);
3,877 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (22x)
    .           
1,294 ( 0.02%)  	while (*s && (s < (string +len))) {
  436 ( 0.01%)  		if (!esc) {
  436 ( 0.01%)  			if ('\\' == *s)
  218 ( 0.00%)  				esc = 1;
    .           			else
    .           				*p = *s;
    .           		} else {
    .           /*			switch (*s) {
    .           			case 'r':
    .           			case 'n':
    .           				*p = '\n';
    .           				break;
    .           			case 't':
    .           				*p = '\t';
    .           				break;
    .           			default:
    .           				*p = *s;
    .           				break;
    .           			}
  218 ( 0.00%)  */			*p = *s;
    .           			esc = 0;
    .           		}
    .           		if (!esc)
  436 ( 0.01%)  			p++;
  218 ( 0.00%)  		s++;
    .           	}
   22 ( 0.00%)  	*p = '\0';
    .           
    .           	return res;
   88 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           inline char *lub_string_decode(const char *string)
    .           {
    .           	return lub_string_ndecode(string, strlen(string));
    .           }
    .           
    .           /*----------------------------------------------------------- */
-- line 71 ----------------------------------------
-- line 95 ----------------------------------------
    .           			break;
    .           		}
    .           	}
    .           	return result;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_catn(char **string, const char *text, size_t len)
  744 ( 0.01%)  {
  248 ( 0.00%)  	if (text) {
    .           		char *q;
  620 ( 0.01%)  		size_t length, initlen, textlen = strlen(text);
2,450 ( 0.05%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (124x)
    .           
    .           		/* make sure the client cannot give us duff details */
  248 ( 0.00%)  		len = (len < textlen) ? len : textlen;
    .           
    .           		/* remember the size of the original string */
  784 ( 0.01%)  		initlen = *string ? strlen(*string) : 0;
2,330 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (82x)
    .           
    .           		/* account for '\0' */
  124 ( 0.00%)  		length = initlen + len + 1;
    .           
    .           		/* allocate the memory for the result */
  376 ( 0.01%)  		q = realloc(*string, length);
19,633 ( 0.36%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (123x)
1,846 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  248 ( 0.00%)  		if (NULL != q) {
  124 ( 0.00%)  			*string = q;
    .           			/* move to the end of the initial string */
  124 ( 0.00%)  			q += initlen;
    .           
2,788 ( 0.05%)  			while (len--) {
3,270 ( 0.06%)  				*q++ = *text++;
    .           			}
  124 ( 0.00%)  			*q = '\0';
    .           		}
    .           	}
  744 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_cat(char **string, const char *text)
  615 ( 0.01%)  {
  742 ( 0.01%)  	size_t len = text ? strlen(text) : 0;
1,456 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,400 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (122x)
  496 ( 0.01%)  	lub_string_catn(string, text, len);
34,712 ( 0.64%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn (122x)
2,759 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  369 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_dup(const char *string)
    .           {
  612 ( 0.01%)  	if (!string)
    .           		return NULL;
  548 ( 0.01%)  	return strdup(string);
63,034 ( 1.17%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (271x)
1,754 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   68 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_dupn(const char *string, unsigned int len)
   69 ( 0.00%)  {
    .           	char *res = NULL;
    .           
   92 ( 0.00%)  	if (!string)
    .           		return res;
   92 ( 0.00%)  	res = malloc(len + 1);
2,643 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (23x)
  119 ( 0.00%)  	strncpy(res, string, len);
1,579 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  635 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (22x)
   23 ( 0.00%)  	res[len] = '\0';
    .           
    .           	return res;
  115 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int lub_string_nocasecmp(const char *cs, const char *ct)
2,316 ( 0.04%)  {
    .           	int result = 0;
8,590 ( 0.16%)  	while ((0 == result) && *cs && *ct) {
    .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
    .           		 * MACRO implementation uses braces to prevent multiple increments
    .           		 * when called.
    .           		 */
5,034 ( 0.09%)  		int s = lub_ctype_tolower(*cs++);
11,055 ( 0.20%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (1,005x)
2,407 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,030 ( 0.09%)  		int t = lub_ctype_tolower(*ct++);
11,066 ( 0.20%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (1,006x)
    .           
    .           		result = s - t;
    .           	}
    .           	/*lint -e774 Boolean within 'if' always evealuates to True 
    .           	 * not the case because of tolower() evaluating to 0 under lint
    .           	 * (see above)
    .           	 */
    .           	if (0 == result) {
    .           		/* account for different string lengths */
  135 ( 0.00%)  		result = *cs - *ct;
    .           	}
    .           	return result;
1,930 ( 0.04%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_tolower(const char *str)
    .           {
    .           	char *tmp = strdup(str);
    .           	char *p = tmp;
    .           
    .           	while (*p) {
-- line 192 ----------------------------------------
-- line 232 ----------------------------------------
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned int lub_string_equal_part(const char *str1, const char *str2,
    .           	bool_t utf8)
    .           {
    .           	unsigned int cnt = 0;
    .           
   16 ( 0.00%)  	if (!str1 || !str2)
    .           		return cnt;
   40 ( 0.00%)  	while (*str1 && *str2) {
   39 ( 0.00%)  		if (*str1 != *str2)
    .           			break;
    9 ( 0.00%)  		cnt++;
    6 ( 0.00%)  		str1++;
    6 ( 0.00%)  		str2++;
    .           	}
    6 ( 0.00%)  	if (!utf8)
    .           		return cnt;
    .           
    .           	/* UTF8 features */
   12 ( 0.00%)  	if (cnt && (UTF8_11 == (*(str1 - 1) & UTF8_MASK)))
    9 ( 0.00%)  		cnt--;
    .           
    .           	return cnt;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *lub_string_suffix(const char *string)
    .           {
    .           	const char *p1, *p2;
    .           	p1 = p2 = string;
    .           	while (*p1) {
    .           		if (lub_ctype_isspace(*p1)) {
-- line 265 ----------------------------------------
-- line 269 ----------------------------------------
    .           		p1++;
    .           	}
    .           	return p2;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *lub_string_nextword(const char *string,
    .           	size_t *len, size_t *offset, size_t *quoted)
  496 ( 0.01%)  {
    .           	const char *word;
    .           
   62 ( 0.00%)  	*quoted = 0;
    .           
    .           	/* Find the start of a word (not including an opening quote) */
  718 ( 0.01%)  	while (*string && isspace(*string)) {
1,542 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  132 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (44x)
   45 ( 0.00%)  		string++;
   28 ( 0.00%)  		(*offset)++;
    .           	}
    .           	/* Is this the start of a quoted string ? */
  135 ( 0.00%)  	if (*string == '"') {
    .           		*quoted = 1;
    .           		string++;
    .           	}
    .           	word = string;
  124 ( 0.00%)  	*len = 0;
    .           
    .           	/* Find the end of the word */
1,066 ( 0.02%)  	while (*string) {
  936 ( 0.02%)  		if (*string == '\\') {
    .           			string++;
    .           			(*len)++;
    .           			if (*string) {
    .           				(*len)++;
    .           				string++;
    .           			}
    .           			continue;
    .           		}
    .           		/* End of word */
3,744 ( 0.07%)  		if (!*quoted && isspace(*string))
1,404 ( 0.03%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (468x)
    .           			break;
  880 ( 0.02%)  		if (*string == '"') {
    .           			/* End of a quoted string */
    .           			*quoted = 2;
    .           			break;
    .           		}
  440 ( 0.01%)  		(*len)++;
  880 ( 0.02%)  		string++;
    .           	}
    .           
    .           	return word;
  434 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned int lub_string_wordcount(const char *line)
   45 ( 0.00%)  {
    .           	const char *word;
    9 ( 0.00%)  	unsigned int result = 0;
   18 ( 0.00%)  	size_t len = 0, offset = 0;
    .           	size_t quoted;
    .           
  149 ( 0.00%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
1,390 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (8x)
2,674 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   18 ( 0.00%)  		*word || quoted;
  138 ( 0.00%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
4,192 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (23x)
    .           		/* account for the terminating quotation mark */
  124 ( 0.00%)  		len += quoted ? quoted - 1 : 0;
   23 ( 0.00%)  		result++;
    .           	}
    .           
    .           	return result;
   63 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c
--------------------------------------------------------------------------------
Ir           

-- line 32 ----------------------------------------
  .            **************************************************************** */
  .           #include "private.h"
  .           
  .           /* forward declare these functions */
  .           static lub_bintree_compare_fn compareleft;
  .           
  .           /*--------------------------------------------------------- */
  .           void *lub_bintree_findfirst(lub_bintree_t * this)
240 ( 0.00%)  {
 60 ( 0.00%)  	lub_bintree_compare_fn *client_compare = this->compareFn;
  .           
  .           	/*
  .           	 * put dummy functions in place
  .           	 * This will make the search faster and direct it to the left most
  .           	 * node
  .           	 */
120 ( 0.00%)  	this->compareFn = compareleft;
  .           
  .           	/*
  .           	 * the key doesn't matter here cos we've cobbled the compare function
  .           	 */
300 ( 0.01%)  	this->root = lub_bintree_splay(this, this->root, NULL);
2,989 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (60x)
  .           
  .           	/* restore the client functions */
 60 ( 0.00%)  	this->compareFn = client_compare;
  .           
120 ( 0.00%)  	if (NULL == this->root)
 20 ( 0.00%)  		return NULL;
  .           	else
 50 ( 0.00%)  		return lub_bintree_getclientnode(this, this->root);
240 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /*
  .            * This comparison operation always returns 1 hence will force a
  .            * search to the left most node.
  .            *
  .            * clientnode - node to compare (not used)
  .            * clientkey  - key to compare (not used)
  .            */
  .           static int compareleft(const void *clientnode, const void *clientkey)
  .           {
  .           	clientnode = clientnode;
  .           	clientkey = clientkey;
  .           	return 1;
198 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c
--------------------------------------------------------------------------------
Ir           

-- line 12 ----------------------------------------
  .           	"clish_script@clish",
  .           	NULL,
  .           	"clish_hook_config@clish",
  .           	"clish_hook_log@clish"
  .           };
  .           
  .           /*----------------------------------------------------------- */
  .           int clish_shell_startup(clish_shell_t *this)
  3 ( 0.00%)  {
  .           	const char *banner;
  .           	clish_context_t context;
  .           
  3 ( 0.00%)  	if (!this->startup) {
  .           		fprintf(stderr, "Error: Can't get valid STARTUP tag.\n");
  .           		return -1;
  .           	}
  .           
  .           	/* Prepare context */
  9 ( 0.00%)  	clish_context_init(&context, this);
645 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_cmd(&context, this->startup);
681 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_action(&context,
689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		clish_command__get_action(this->startup));
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (1x)
  .           
  7 ( 0.00%)  	banner = clish_command__get_detail(this->startup);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	if (banner)
 10 ( 0.00%)  		tinyrl_printf(this->tinyrl, "%s\n", banner);
18,898 ( 0.35%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Call log initialize */
  9 ( 0.00%)  	if (clish_shell__get_log(this))
657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		clish_shell_exec_log(&context, NULL, 0);
  .           	/* Call startup script */
  8 ( 0.00%)  	return clish_shell_execute(&context, NULL);
42,927 ( 0.80%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */
  .           void clish_shell__set_startup_view(clish_shell_t *this, const char *viewname)
  .           {
  .           	clish_view_t *view;
  .           
  .           	assert(this);
  .           	assert(this->startup);
-- line 52 ----------------------------------------
-- line 70 ----------------------------------------
  .           	assert(this);
  .           	lub_string_free(this->default_shebang);
  .           	this->default_shebang = lub_string_dup(shebang);
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           const char * clish_shell__get_default_shebang(const clish_shell_t *this)
  .           {
  2 ( 0.00%)  	assert(this);
  1 ( 0.00%)  	return this->default_shebang;
  1 ( 0.00%)  }
  .           
  .           
  .           
  .           /*-------------------------------------------------------- */
  .           /* Resolve PTYPE for given PARAM.
  .            */
  .           static clish_ptype_t * resolve_ptype(clish_shell_t *this, clish_param_t *param)
 75 ( 0.00%)  {
  .           	clish_ptype_t *ptype = NULL;
  .           
125 ( 0.00%)  	if (!this || !param)
  .           		return NULL;
  .           
  .           	/* Resolve PARAM's PTYPE */
233 ( 0.00%)  	ptype = clish_shell_find_ptype(this, clish_param__get_ptype_name(param));
6,192 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_ptype (24x)
1,698 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype_name (24x)
 50 ( 0.00%)  	if (!ptype) {
  .           		fprintf(stderr, "Error: Unresolved PTYPE \"%s\" in PARAM \"%s\"\n",
  .           			clish_param__get_ptype_name(param),
  .           			clish_param__get_name(param));
  .           		return NULL;
  .           	}
104 ( 0.00%)  	clish_param__set_ptype(param, ptype);
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype (24x)
104 ( 0.00%)  	clish_param__set_ptype_name(param, NULL); /* Free some memory */
813 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,688 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype_name (24x)
  .           
  .           	return ptype;
125 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* Static recursive function to iterate parameters. Logically it's the
  .            * part of clish_shell_prepare() function.
  .            */
  .           static int iterate_paramv(clish_shell_t *this, clish_paramv_t *paramv,
  .           	clish_hook_access_fn_t *access_fn)
400 ( 0.01%)  {
100 ( 0.00%)  	int i = 0;
  .           	clish_param_t *param;
  .           
522 ( 0.01%)  	while((param = clish_paramv__get_param(paramv, i))) {
673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
214 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (44x)
  .           		clish_paramv_t *nested_paramv;
  .           
  .           		/* Resolve PARAM's PTYPE */
120 ( 0.00%)  		if (!resolve_ptype(this, param))
10,533 ( 0.20%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (19x)
  .           			return -1;
  .           
  .           		/* Check access for PARAM */
 48 ( 0.00%)  		if (access_fn && clish_param__get_access(param) &&
  .           			access_fn(this, clish_param__get_access(param))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove PARAM \"%s\"\n",
  .           				clish_param__get_name(param));
  .           #endif
  .           			if (clish_paramv_remove(paramv, i) < 0) {
  .           				fprintf(stderr, "Error: Some system problem\n");
  .           				return -1;
  .           			}
  .           			clish_param_delete(param);
  .           			continue; /* Don't increment index */
  .           		}
  .           		/* Recursive iterate nested PARAMs */
 76 ( 0.00%)  		nested_paramv = clish_param__get_paramv(param);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_paramv (18x)
144 ( 0.00%)  		if (iterate_paramv(this, nested_paramv, access_fn) < 0)
2,728 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 (19x)
  .           			return -1;
 48 ( 0.00%)  		i++;
  .           	}
  .           
 50 ( 0.00%)  	return 0;
300 ( 0.01%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This function prepares schema for execution. It loads
  .            * plugins, link unresolved symbols, then iterates all the
  .            * objects and link them to each other, check access
  .            * permissions. Don't execute clish_shell_startup() without this
  .            * function.
  .            */
  .           int clish_shell_prepare(clish_shell_t *this)
  8 ( 0.00%)  {
  .           	clish_command_t *cmd;
  .           	clish_view_t *view;
  .           	clish_nspace_t *nspace;
  .           	lub_bintree_t *view_tree, *cmd_tree;
  .           	lub_list_t *nspace_tree;
  .           	lub_bintree_iterator_t cmd_iter, view_iter;
  .           	lub_list_node_t *nspace_iter;
  .           	clish_hook_access_fn_t *access_fn = NULL;
  .           	clish_paramv_t *paramv;
  .           	int i = 0;
  .           
  .           	/* Add statically linked plugins */
  4 ( 0.00%)  	while (clish_plugin_builtin_list[i].name) {
  .           		clish_plugin_t *plugin;
  .           		plugin = clish_shell_find_create_plugin(this,
  .           			clish_plugin_builtin_list[i].name);
  .           		clish_plugin_add_init(plugin,
  .           			clish_plugin_builtin_list[i].init);
  .           		clish_plugin__set_builtin_flag(plugin, BOOL_TRUE);
  .           		i++;
  .           	}
  .           
  .           	/* Add default plugin to the list of plugins */
  5 ( 0.00%)  	if (this->default_plugin) {
  9 ( 0.00%)  		clish_shell_find_create_plugin(this, "clish");
3,061 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* Default hooks */
 11 ( 0.00%)  		for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 15 ( 0.00%)  			if (this->hooks_use[i])
  .           				continue;
 20 ( 0.00%)  			if (!clish_plugin_default_hook[i])
  .           				continue;
 18 ( 0.00%)  			clish_sym__set_name(this->hooks[i],
957 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
640 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_name (2x)
  .           				clish_plugin_default_hook[i]);
  .           		}
  .           	}
  .           	/* Add default syms to unresolved table */
 10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 25 ( 0.00%)  		if (clish_sym__get_name(this->hooks[i]))
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (5x)
 17 ( 0.00%)  			lub_list_add(this->syms, this->hooks[i]);
1,234 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (3x)
  .           	}
  .           
  .           	/* Load plugins and link symbols */
  9 ( 0.00%)  	if (clish_shell_load_plugins(this) < 0)
156,032 ( 2.89%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  9 ( 0.00%)  	if (clish_shell_link_plugins(this) < 0)
9,951 ( 0.18%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  .           
 12 ( 0.00%)  	access_fn = clish_sym__get_func(clish_shell_get_hook(this, CLISH_SYM_TYPE_ACCESS));
648 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (1x)
  .           
  .           	/* Iterate the VIEWs */
  .           	view_tree = &this->view_tree;
  9 ( 0.00%)  	view = lub_bintree_findfirst(view_tree);
1,054 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 23 ( 0.00%)  	for (lub_bintree_iterator_init(&view_iter, view_tree, view);
948 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 20 ( 0.00%)  		view; view = lub_bintree_iterator_next(&view_iter)) {
2,213 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (5x)
  .           		/* Check access rights for the VIEW */
 10 ( 0.00%)  		if (access_fn && clish_view__get_access(view) &&
  .           			access_fn(this, clish_view__get_access(view))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove VIEW \"%s\"\n",
  .           				clish_view__get_name(view));
  .           #endif
  .           			lub_bintree_remove(view_tree, view);
  .           			clish_view_delete(view);
  .           			continue;
  .           		}
  .           
  .           		/* Iterate the NAMESPACEs */
 24 ( 0.00%)  		nspace_tree = clish_view__get_nspace_tree(view);
703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_nspace_tree (4x)
 20 ( 0.00%)  		nspace_iter = lub_list__get_head(nspace_tree);
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
 10 ( 0.00%)  		while(nspace_iter) {
  .           			clish_view_t *ref_view;
  .           			lub_list_node_t *old_nspace_iter;
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(nspace_iter);
  .           			old_nspace_iter = nspace_iter;
  .           			nspace_iter = lub_list_node__get_next(nspace_iter);
  .           			/* Resolve NAMESPACEs and remove unresolved ones */
  .           			ref_view = clish_shell_find_view(this, clish_nspace__get_view_name(nspace));
  .           			if (!ref_view) {
-- line 235 ----------------------------------------
-- line 259 ----------------------------------------
  .           				lub_list_del(nspace_tree, old_nspace_iter);
  .           				lub_list_node_free(old_nspace_iter);
  .           				clish_nspace_delete(nspace);
  .           				continue;
  .           			}
  .           		}
  .           
  .           		/* Iterate the COMMANDs */
 24 ( 0.00%)  		cmd_tree = clish_view__get_command_tree(view);
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_command_tree (4x)
 20 ( 0.00%)  		cmd = lub_bintree_findfirst(cmd_tree);
441 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (5x)
 88 ( 0.00%)  		for (lub_bintree_iterator_init(&cmd_iter, cmd_tree, cmd);
204 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_init.c:lub_bintree_iterator_init (5x)
108 ( 0.00%)  			cmd; cmd = lub_bintree_iterator_next(&cmd_iter)) {
3,573 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
24,271 ( 0.45%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (25x)
108 ( 0.00%)  			int cmd_is_alias = clish_command__get_alias(cmd)?1:0;
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_alias (25x)
  .           			clish_param_t *args = NULL;
  .           
  .           			/* Check access rights for the COMMAND */
 52 ( 0.00%)  			if (access_fn && clish_command__get_access(cmd) &&
  .           				access_fn(this, clish_command__get_access(cmd))) {
  .           #ifdef DEBUG
  .           				fprintf(stderr, "Warning: Access denied. Remove COMMAND \"%s\" from VIEW \"%s\"\n",
  .           					clish_command__get_name(cmd), clish_view__get_name(view));
  .           #endif
  .           				lub_bintree_remove(cmd_tree, cmd);
  .           				clish_command_delete(cmd);
  .           				continue;
  .           			}
  .           
  .           			/* Resolve command aliases */
 52 ( 0.00%)  			if (cmd_is_alias) {
  .           				clish_view_t *aview;
  .           				clish_command_t *cmdref;
 26 ( 0.00%)  				const char *alias_view = clish_command__get_alias_view(cmd);
  .           				if (!alias_view)
  .           					aview = clish_command__get_pview(cmd);
  .           				else
  .           					aview = clish_shell_find_view(this, alias_view);
  .           				if (!aview /* Removed or broken VIEW */
  .           					||
  .           					/* Removed or broken referenced COMMAND */
  .           					!(cmdref = clish_view_find_command(aview, clish_command__get_alias(cmd), BOOL_FALSE))
-- line 298 ----------------------------------------
-- line 328 ----------------------------------------
  .           					lub_bintree_remove(cmd_tree, cmd);
  .           					clish_command_delete(cmd);
  .           					continue;
  .           				}
  .           			}
  .           			if (cmd_is_alias) /* Don't duplicate paramv processing for aliases */
  .           				continue;
  .           			/* Iterate PARAMeters */
 56 ( 0.00%)  			paramv = clish_command__get_paramv(cmd);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (25x)
156 ( 0.00%)  			if (iterate_paramv(this, paramv, access_fn) < 0)
15,978 ( 0.30%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv (26x)
  .           				return -1;
  .           			/* Resolve PTYPE for args */
134 ( 0.00%)  			if ((args = clish_command__get_args(cmd))) {
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (25x)
  5 ( 0.00%)  				if (!resolve_ptype(this, args))
542 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (1x)
  .           					return -1;
  .           			}
  .           		}
  .           	}
  .           
  2 ( 0.00%)  	return 0;
  8 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
The following files chosen for auto-annotation could not be found:
--------------------------------------------------------------------------------
  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h
  /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h
  /opt/build/glibc/glibc-2.24/elf/./dl-map-segments.h
  /opt/build/glibc/glibc-2.24/elf/dl-addr.c
  /opt/build/glibc/glibc-2.24/elf/dl-cache.c
  /opt/build/glibc/glibc-2.24/elf/dl-close.c
  /opt/build/glibc/glibc-2.24/elf/dl-deps.c
  /opt/build/glibc/glibc-2.24/elf/dl-error.c
  /opt/build/glibc/glibc-2.24/elf/dl-fini.c
  /opt/build/glibc/glibc-2.24/elf/dl-init.c
  /opt/build/glibc/glibc-2.24/elf/dl-load.c
  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c
  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c
  /opt/build/glibc/glibc-2.24/elf/dl-misc.c
  /opt/build/glibc/glibc-2.24/elf/dl-object.c
  /opt/build/glibc/glibc-2.24/elf/dl-profstub.c
  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c
  /opt/build/glibc/glibc-2.24/elf/dl-version.c
  /opt/build/glibc/glibc-2.24/elf/do-rel.h
  /opt/build/glibc/glibc-2.24/elf/get-dynamic-info.h
  /opt/build/glibc/glibc-2.24/elf/rtld.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c
  /opt/build/glibc/glibc-2.24/iconv/gconv_simple.c
  /opt/build/glibc/glibc-2.24/libio/fileops.c
  /opt/build/glibc/glibc-2.24/libio/genops.c
  /opt/build/glibc/glibc-2.24/libio/iofgets.c
  /opt/build/glibc/glibc-2.24/libio/iogetline.c
  /opt/build/glibc/glibc-2.24/libio/libioP.h
  /opt/build/glibc/glibc-2.24/libio/strops.c
  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c
  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c
  /opt/build/glibc/glibc-2.24/locale/findlocale.c
  /opt/build/glibc/glibc-2.24/locale/loadarchive.c
  /opt/build/glibc/glibc-2.24/locale/loadlocale.c
  /opt/build/glibc/glibc-2.24/locale/setlocale.c
  /opt/build/glibc/glibc-2.24/malloc/malloc.c
  /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/sysv/linux/wordsize-64/mmap.c
  /opt/build/glibc/glibc-2.24/posix/regcomp.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.h
  /opt/build/glibc/glibc-2.24/setjmp/../sysdeps/x86_64/setjmp.S
  /opt/build/glibc/glibc-2.24/signal/../sysdeps/unix/sysv/linux/x86_64/sigaction.c
  /opt/build/glibc/glibc-2.24/stdio-common/../libio/libioP.h
  /opt/build/glibc/glibc-2.24/stdio-common/printf-parse.h
  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfscanf.c
  /opt/build/glibc/glibc-2.24/stdlib/../stdlib/strtol_l.c
  /opt/build/glibc/glibc-2.24/stdlib/getenv.c
  /opt/build/glibc/glibc-2.24/string/../bits/stdlib-bsearch.h
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86/cacheinfo.c
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/memchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../memcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/memcmp-sse4.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S
  /opt/build/glibc/glibc-2.24/string/strdup.c
  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h
  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c
  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c
  /opt/build/glibc/glibc-2.24/wctype/wcfuncs.c

--------------------------------------------------------------------------------
Ir               
--------------------------------------------------------------------------------
321,067 ( 5.95%)  events annotated

--------------------------------------------------------------------------------
Profile data file '../klish-2.1.3/reports/easy/callgrind.out.1993' (creator: callgrind-3.13.0)
--------------------------------------------------------------------------------
I1 cache: 
D1 cache: 
LL cache: 
Timerange: Basic block 0 - 1139404
Trigger: Program termination
Profiled target:  ./clish -x ../../xml-examples/clish (PID 1993, part 1)
Events recorded:  Ir
Events shown:     Ir
Event sort order: Ir
Thresholds:       99
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir                 
--------------------------------------------------------------------------------
5,091,929 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir                file:function
--------------------------------------------------------------------------------
618,338 (12.14%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
417,920 ( 8.21%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c:__gconv_transform_utf8_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
382,308 ( 7.51%)  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c:mbrtowc [/lib/x86_64-linux-gnu/libc-2.24.so]
226,264 ( 4.44%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_free [/lib/x86_64-linux-gnu/libc-2.24.so]
220,753 ( 4.34%)  ???:0x0000000000013e60 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
219,417 ( 4.31%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:do_lookup_x [/lib/x86_64-linux-gnu/ld-2.24.so]
187,324 ( 3.68%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
172,879 ( 3.40%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c:__gconv_transform_utf8_internal
154,616 ( 3.04%)  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c:btowc [/lib/x86_64-linux-gnu/libc-2.24.so]
145,295 ( 2.85%)  ???:0x000000000000f290 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
134,017 ( 2.63%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
130,916 ( 2.57%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap_iter.isra.24 [/lib/x86_64-linux-gnu/libc-2.24.so]
120,093 ( 2.36%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:_dl_lookup_symbol_x [/lib/x86_64-linux-gnu/ld-2.24.so]
108,808 ( 2.14%)  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c:__collseq_table_lookup [/lib/x86_64-linux-gnu/libc-2.24.so]
102,528 ( 2.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:strcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
 94,058 ( 1.85%)  ???:0x000000000001a2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 90,237 ( 1.77%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_consolidate [/lib/x86_64-linux-gnu/libc-2.24.so]
 76,434 ( 1.50%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 56,755 ( 1.11%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 56,567 ( 1.11%)  /opt/build/glibc/glibc-2.24/elf/dl-addr.c:_dl_addr [/lib/x86_64-linux-gnu/libc-2.24.so]
 52,519 ( 1.03%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:free [/lib/x86_64-linux-gnu/libc-2.24.so]
 47,604 ( 0.93%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen [/lib/x86_64-linux-gnu/ld-2.24.so]
 40,675 ( 0.80%)  ???:0x0000000000005130 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 40,047 ( 0.79%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h:_dl_relocate_object
 35,760 ( 0.70%)  /opt/build/glibc/glibc-2.24/elf/dl-profstub.c:_dl_mcount_wrapper_check [/lib/x86_64-linux-gnu/libc-2.24.so]
 35,751 ( 0.70%)  /opt/build/glibc/glibc-2.24/elf/dl-misc.c:_dl_name_match_p [/lib/x86_64-linux-gnu/ld-2.24.so]
 32,428 ( 0.64%)  ???:0x0000000000008190 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 32,064 ( 0.63%)  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
 29,924 ( 0.59%)  ???:0x000000000000f970 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 27,384 ( 0.54%)  ???:0x000000000000e2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 26,764 ( 0.53%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
 25,596 ( 0.50%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:check_match [/lib/x86_64-linux-gnu/ld-2.24.so]
 24,027 ( 0.47%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 23,627 ( 0.46%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 23,485 ( 0.46%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 22,857 ( 0.45%)  /opt/build/glibc/glibc-2.24/string/strdup.c:strdup [/lib/x86_64-linux-gnu/ld-2.24.so]
 21,352 ( 0.42%)  ???:0x0000000000007580 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 20,406 ( 0.40%)  /opt/build/glibc/glibc-2.24/elf/do-rel.h:_dl_relocate_object
 19,906 ( 0.39%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c:_dl_fixup [/lib/x86_64-linux-gnu/ld-2.24.so]
 19,205 ( 0.38%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 19,069 ( 0.37%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
 18,243 ( 0.36%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_chardata_handler [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 17,920 ( 0.35%)  /opt/build/glibc/glibc-2.24/iconv/gconv_simple.c:__gconv_btwoc_ascii [/lib/x86_64-linux-gnu/libc-2.24.so]
 17,608 ( 0.35%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
 16,913 ( 0.33%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_default_xsputn [/lib/x86_64-linux-gnu/libc-2.24.so]
 16,107 ( 0.32%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 16,077 ( 0.32%)  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h:mbrtowc
 15,768 ( 0.31%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter [/lib/x86_64-linux-gnu/libc-2.24.so]
 15,170 ( 0.30%)  ???:0x0000000000004c30 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 15,162 ( 0.30%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_dfa_add_node [/lib/x86_64-linux-gnu/libc-2.24.so]
 14,870 ( 0.29%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_acquire_state_context [/lib/x86_64-linux-gnu/libc-2.24.so]
 13,971 ( 0.27%)  ???:0x000000000000edb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 13,120 ( 0.26%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:postorder [/lib/x86_64-linux-gnu/libc-2.24.so]
 12,600 ( 0.25%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:preorder [/lib/x86_64-linux-gnu/libc-2.24.so]
 12,581 ( 0.25%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_merge [/lib/x86_64-linux-gnu/libc-2.24.so]
 11,942 ( 0.23%)  /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv [/lib/x86_64-linux-gnu/libc-2.24.so]
 11,167 ( 0.22%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:create_token_tree.isra.13 [/lib/x86_64-linux-gnu/libc-2.24.so]
 11,012 ( 0.22%)  /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 10,881 ( 0.21%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
 10,752 ( 0.21%)  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h:btowc
 10,439 ( 0.21%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object [/lib/x86_64-linux-gnu/ld-2.24.so]
 10,136 ( 0.20%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 10,039 ( 0.20%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  9,680 ( 0.19%)  ???:0x00000000000045c0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  9,491 ( 0.19%)  ???:0x0000000000005570 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  9,095 ( 0.18%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:_dl_map_object_deps [/lib/x86_64-linux-gnu/ld-2.24.so]
  8,917 ( 0.18%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  8,580 ( 0.17%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  8,419 ( 0.17%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_insert [/lib/x86_64-linux-gnu/libc-2.24.so]
  8,380 ( 0.16%)  ???:0x00000000000196e0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  7,650 ( 0.15%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_file_overflow@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,533 ( 0.15%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:build_wcs_buffer [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,511 ( 0.15%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  7,260 ( 0.14%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,260 ( 0.14%)  ???:align_limit_to_full_utf8_characters [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  7,099 ( 0.14%)  /opt/build/glibc/glibc-2.24/locale/loadlocale.c:_nl_intern_locale_data [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,996 ( 0.14%)  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c:vsnprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,966 ( 0.14%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:peek_token [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,860 ( 0.13%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
  6,548 ( 0.13%)  ???:0x0000000000005810 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  6,500 ( 0.13%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strchr.S:strchrnul [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,398 ( 0.13%)  ???:0x0000000000004cb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  6,016 ( 0.12%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,844 ( 0.11%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:lower_subexps [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,670 ( 0.11%)  /opt/build/glibc/glibc-2.24/libio/strops.c:_IO_str_init_static_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,611 ( 0.11%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_first [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,405 ( 0.11%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcat_sse2_unaligned
  5,299 ( 0.10%)  ???:XML_ParserFree [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  5,074 ( 0.10%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,910 ( 0.10%)  ???:0x0000000000019f90 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  4,696 ( 0.09%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,488 ( 0.09%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,486 ( 0.09%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_param [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,367 ( 0.09%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,189 ( 0.08%)  ???:0x00000000000050d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  4,128 ( 0.08%)  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc [/lib/x86_64-linux-gnu/libc-2.24.so]
  4,049 ( 0.08%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_next [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,870 ( 0.08%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_remove_at.part.4 [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,812 ( 0.07%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object_from_fd [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,749 ( 0.07%)  /opt/build/glibc/glibc-2.24/elf/dl-version.c:_dl_check_map_versions [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,663 ( 0.07%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_no_init [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,639 ( 0.07%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_old_init [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,519 ( 0.07%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:__GI_strcmp [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,483 ( 0.07%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S:__GI_memset [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,415 ( 0.07%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:peek_token_bracket [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,397 ( 0.07%)  /opt/build/glibc/glibc-2.24/stdio-common/../libio/libioP.h:vfprintf
  3,191 ( 0.06%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_ndecode [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  3,111 ( 0.06%)  /opt/build/glibc/glibc-2.24/elf/dl-cache.c:_dl_cache_libcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,028 ( 0.06%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_setb [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,962 ( 0.06%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:register_state [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,747 ( 0.05%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_tree [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,717 ( 0.05%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:open_path [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,686 ( 0.05%)  /opt/build/glibc/glibc-2.24/elf/get-dynamic-info.h:_dl_map_object_from_fd
  2,656 ( 0.05%)  ???:0x0000000000004a50 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  2,548 ( 0.05%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,544 ( 0.05%)  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,512 ( 0.05%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,362 ( 0.05%)  /opt/build/glibc/glibc-2.24/stdio-common/vfscanf.c:_IO_vfscanf [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,233 ( 0.04%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:open_verify.constprop.8 [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,194 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node_closure [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,183 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:optimize_subexps [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,176 ( 0.04%)  /opt/build/glibc/glibc-2.24/elf/dl-version.c:match_symbol [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,135 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,126 ( 0.04%)  /opt/build/glibc/glibc-2.24/libio/libioP.h:_IO_default_xsputn
  2,077 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_bracket_element.isra.11.constprop.32 [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,034 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,030 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_element_start [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,028 ( 0.04%)  /opt/build/glibc/glibc-2.24/elf/dl-object.c:_dl_new_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,927 ( 0.04%)  ???:0x0000000005686930 [???]
  1,862 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node_closure'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,844 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,810 ( 0.04%)  ???:0x000000000000f930 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,799 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,772 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,760 ( 0.03%)  ???:0x0000000000013740 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,717 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,705 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_compile_internal
  1,665 ( 0.03%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:index [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,642 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_action [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,638 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_init_copy [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,584 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:calc_eclosure_iter
  1,580 ( 0.03%)  ???:0x00000000000094a0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,550 ( 0.03%)  ???:0x0000000000019b10 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,493 ( 0.03%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,458 ( 0.03%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h:do_lookup_x
  1,390 ( 0.03%)  ???:XML_ParserCreate_MM [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,386 ( 0.03%)  ???:0x0000000000014cd0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,374 ( 0.03%)  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,362 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,301 ( 0.03%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/memcmp-sse4.S:__memcmp_sse4_1 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,296 ( 0.03%)  /opt/build/glibc/glibc-2.24/stdio-common/printf-parse.h:vfprintf
  1,280 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,268 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c:strsep [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,223 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,202 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c:__libc_memalign [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,191 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,160 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,159 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c:_dl_relocate_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,150 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,136 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_new [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,129 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:dl_main [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,127 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:clish_shell_prepare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,117 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../memcmp.S:bcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,107 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,100 ( 0.02%)  ???:0x00000000000137d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,092 ( 0.02%)  /opt/build/glibc/glibc-2.24/locale/findlocale.c:_nl_find_locale [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,084 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:mempcpy [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,080 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,067 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,044 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/memchr.S:memchr [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,041 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-cache.c:_dl_load_cache_lookup [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,039 ( 0.02%)  /opt/build/glibc/glibc-2.24/locale/loadarchive.c:_nl_load_locale_from_archive [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,008 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86/cacheinfo.c:intel_check_word [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,006 ( 0.02%)  /opt/build/glibc/glibc-2.24/setjmp/../sysdeps/x86_64/setjmp.S:__sigsetjmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,000 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
    987 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/./dl-map-segments.h:_dl_map_object_from_fd
    928 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../bits/stdlib-bsearch.h:intel_check_word
    927 ( 0.02%)  /opt/build/glibc/glibc-2.24/wctype/wcfuncs.c:iswalnum [/lib/x86_64-linux-gnu/libc-2.24.so]
    925 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    884 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    884 ( 0.02%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_insert_last [/lib/x86_64-linux-gnu/libc-2.24.so]
    866 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    856 ( 0.02%)  /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/sysv/linux/wordsize-64/mmap.c:mmap [/lib/x86_64-linux-gnu/ld-2.24.so]
    835 ( 0.02%)  /opt/build/glibc/glibc-2.24/locale/setlocale.c:setlocale [/lib/x86_64-linux-gnu/libc-2.24.so]
    820 ( 0.02%)  ???:0x0000000000006340 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    816 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    806 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:clish_shell_load_scheme [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    805 ( 0.02%)  /opt/build/glibc/glibc-2.24/stdlib/../stdlib/strtol_l.c:____strtol_l_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
    786 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    786 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy [/lib/x86_64-linux-gnu/ld-2.24.so]
    783 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h:_dl_relocate_object
    780 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:__GI_strncmp [/lib/x86_64-linux-gnu/libc-2.24.so]
    770 ( 0.02%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch [/lib/x86_64-linux-gnu/libc-2.24.so]
    768 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    768 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:openaux [/lib/x86_64-linux-gnu/ld-2.24.so]
    760 ( 0.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr [/lib/x86_64-linux-gnu/libc-2.24.so]
    750 ( 0.01%)  ???:0x0000000000004d00 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    740 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    737 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.h:parse_bracket_element.isra.11.constprop.32
    722 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/xmlapi.h:process_action
    718 ( 0.01%)  ???:XML_GetBuffer [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    701 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    701 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    700 ( 0.01%)  ???:0x0000000000004610 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    686 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:decompose_rpath [/lib/x86_64-linux-gnu/ld-2.24.so]
    680 ( 0.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S:memset [/lib/x86_64-linux-gnu/ld-2.24.so]
    673 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    672 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave [/lib/x86_64-linux-gnu/ld-2.24.so]
    661 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    650 ( 0.01%)  ???:0x000000000000b4f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    648 ( 0.01%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_init_state [/lib/x86_64-linux-gnu/libc-2.24.so]
    647 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    645 ( 0.01%)  ???:0x00000000000071d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    637 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:remove_duplicate [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
    627 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
    619 ( 0.01%)  /opt/build/glibc/glibc-2.24/libio/iogetline.c:_IO_getline_info [/lib/x86_64-linux-gnu/libc-2.24.so]

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c
--------------------------------------------------------------------------------
Ir             

-- line 15 ----------------------------------------
    .           bool_t lub_ctype_isspace(char c)
    .           {
    .           	unsigned char tmp = (unsigned char)c;
    .           	return isspace(tmp) ? BOOL_TRUE : BOOL_FALSE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           char lub_ctype_tolower(char c)
2,752 ( 0.05%)  {
    .           	unsigned char tmp = (unsigned char)c;
5,508 ( 0.11%)  	return tolower(tmp);
4,125 ( 0.08%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc (1,375x)
1,639 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,752 ( 0.05%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char lub_ctype_toupper(char c)
    .           {
    .           	unsigned char tmp = (unsigned char)c;
    .           	return toupper(tmp);
    .           }
    .           
-- line 34 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/list/list.c
--------------------------------------------------------------------------------
Ir           

-- line 3 ----------------------------------------
  .           #include <string.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           static inline void lub_list_init(lub_list_t * this,
  .           	lub_list_compare_fn compareFn)
  .           {
 10 ( 0.00%)  	this->head = NULL;
 10 ( 0.00%)  	this->tail = NULL;
 10 ( 0.00%)  	this->compareFn = compareFn;
 10 ( 0.00%)  	this->len = 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_t *lub_list_new(lub_list_compare_fn compareFn)
 20 ( 0.00%)  {
  .           	lub_list_t *this;
  .           
 34 ( 0.00%)  	this = malloc(sizeof(*this));
1,645 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,287 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (9x)
 20 ( 0.00%)  	assert(this);
  .           	lub_list_init(this, compareFn);
  .           
  .           	return this;
 20 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void lub_list_free(lub_list_t *this)
  .           {
 48 ( 0.00%)  	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list__get_head(lub_list_t *this)
  .           {
  .           	return this->head;
  .           }
  .           
-- line 40 ----------------------------------------
-- line 43 ----------------------------------------
  .           {
  .           	return this->tail;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static inline void lub_list_node_init(lub_list_node_t *this,
  .           	void *data)
  .           {
 40 ( 0.00%)  	this->prev = this->next = NULL;
 20 ( 0.00%)  	this->data = data;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_node_t *lub_list_node_new(void *data)
 40 ( 0.00%)  {
  .           	lub_list_node_t *this;
  .           
 60 ( 0.00%)  	this = malloc(sizeof(*this));
3,899 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (20x)
 40 ( 0.00%)  	assert(this);
  .           	lub_list_node_init(this, data);
  .           
  .           	return this;
 40 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list_iterator_init(lub_list_t *this)
  .           {
  .           	return this->head;
 66 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list_node__get_prev(lub_list_node_t *this)
  .           {
  .           	return this->prev;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 79 ----------------------------------------
-- line 98 ----------------------------------------
  .           inline void lub_list_node_free(lub_list_node_t *this)
  .           {
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void *lub_list_node__get_data(lub_list_node_t *this)
  .           {
 48 ( 0.00%)  	return this->data;
 48 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_node_t *lub_list_add(lub_list_t *this, void *data)
 80 ( 0.00%)  {
 84 ( 0.00%)  	lub_list_node_t *node = lub_list_node_new(data);
4,013 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_new (19x)
882 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	lub_list_node_t *iter;
  .           
 20 ( 0.00%)  	this->len++;
  .           
  .           	/* Empty list */
 60 ( 0.00%)  	if (!this->head) {
  3 ( 0.00%)  		this->head = node;
  3 ( 0.00%)  		this->tail = node;
  .           		return node;
  .           	}
  .           
  .           	/* Not sorted list. Add to the tail. */
 51 ( 0.00%)  	if (!this->compareFn) {
  .           		node->prev = this->tail;
  .           		node->next = NULL;
  .           		this->tail->next = node;
  .           		this->tail = node;
  .           		return node;
  .           	}
  .           
  .           	/* Sorted list */
 17 ( 0.00%)  	iter = this->tail;
122 ( 0.00%)  	while (iter) {
225 ( 0.00%)  		if (this->compareFn(node->data, iter->data) >= 0) {
1,461 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_compare (45x)
 30 ( 0.00%)  			node->next = iter->next;
 15 ( 0.00%)  			node->prev = iter;
 15 ( 0.00%)  			iter->next = node;
 45 ( 0.00%)  			if (node->next)
  8 ( 0.00%)  				node->next->prev = node;
  .           			break;
  .           		}
 30 ( 0.00%)  		iter = iter->prev;
  .           	}
  .           	/* Insert node into the list head */
  .           	if (!iter) {
  2 ( 0.00%)  		node->next = this->head;
  2 ( 0.00%)  		node->prev = NULL;
  2 ( 0.00%)  		this->head->prev = node;
  2 ( 0.00%)  		this->head = node;
  .           	}
  .           	if (!node->next)
  7 ( 0.00%)  		this->tail = node;
  .           
  .           	return node;
102 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void lub_list_del(lub_list_t *this, lub_list_node_t *node)
  .           {
  .           	if (node->prev)
  .           		node->prev->next = node->next;
  .           	else
  .           		this->head = node->next;
-- line 165 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c
--------------------------------------------------------------------------------
Ir             

-- line 68 ----------------------------------------
    .            *---------------------------------------------------------------
    .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
    .            **************************************************************** */
    .           #include "private.h"
    .           
    .           /*--------------------------------------------------------- */
    .           lub_bintree_node_t *lub_bintree_splay(const lub_bintree_t * this,
    .           				      lub_bintree_node_t * t, const void *key)
1,080 ( 0.02%)  {
    .           	/* Simple top down splay, not requiring "key" to be in the tree t.  */
    .           	/* What it does is described above.                                 */
    .           	lub_bintree_node_t N, *leftTreeMax, *rightTreeMin, *y;
    .           	int comp;
    .           
  694 ( 0.01%)  	if (t == NULL)
    .           		return t;
  501 ( 0.01%)  	N.left = N.right = NULL;
  501 ( 0.01%)  	leftTreeMax = rightTreeMin = &N;
    .           
    .           	for (;;) {
1,192 ( 0.02%)  		comp = lub_bintree_compare(this, t, key);
13,689 ( 0.27%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (136x)
3,881 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (126x)
  831 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (24x)
   24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (12x)
  596 ( 0.01%)  		if (comp > 0) {
  384 ( 0.01%)  			if (t->left == NULL)
    .           				break;
  345 ( 0.01%)  			if (lub_bintree_compare(this, t->left, key) > 0) {
1,746 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (21x)
  864 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
   66 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (3x)
   14 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (7x)
   44 ( 0.00%)  				y = t->left;	/* rotate right */
   88 ( 0.00%)  				t->left = y->right;
   44 ( 0.00%)  				y->right = t;
    .           				t = y;
  132 ( 0.00%)  				if (t->left == NULL)
    .           					break;
    .           			}
  112 ( 0.00%)  			rightTreeMin->left = t;	/* link right */
    .           			rightTreeMin = t;
  112 ( 0.00%)  			t = t->left;
  170 ( 0.00%)  		} else if (comp < 0) {
  327 ( 0.01%)  			if (t->right == NULL)
    .           				break;
  405 ( 0.01%)  			if (lub_bintree_compare(this, t->right, key) < 0) {
5,863 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (37x)
1,011 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
  319 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (6x)
   49 ( 0.00%)  				y = t->right;	/* rotate left */
   60 ( 0.00%)  				t->right = y->left;
   30 ( 0.00%)  				y->left = t;
    .           				t = y;
  120 ( 0.00%)  				if (t->right == NULL)
    .           					break;
    .           			}
   75 ( 0.00%)  			leftTreeMax->right = t;	/* link left */
    .           			leftTreeMax = t;
  275 ( 0.01%)  			t = t->right;
    .           		} else {
    .           			break;
    .           		}
    .           	}
  167 ( 0.00%)  	leftTreeMax->right = t->left;	/* assemble */
  334 ( 0.01%)  	rightTreeMin->left = t->right;
  334 ( 0.01%)  	t->left = N.right;
  334 ( 0.01%)  	t->right = N.left;
    .           
    .           	/* return the new root */
    .           	return t;
1,631 ( 0.03%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c
--------------------------------------------------------------------------------
Ir           

-- line 29 ----------------------------------------
  .            *   Initial version 
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           void *lub_bintree_find(lub_bintree_t * this, const void *clientkey)
375 ( 0.01%)  {
379 ( 0.01%)  	this->root = lub_bintree_splay(this, this->root, clientkey);
13,598 ( 0.27%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (74x)
773 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
150 ( 0.00%)  	if (NULL != this->root) {
408 ( 0.01%)  		if (lub_bintree_compare(this, this->root, clientkey) == 0)
1,973 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (42x)
1,254 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (21x)
114 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (5x)
 60 ( 0.00%)  			return lub_bintree_getclientnode(this, this->root);
  .           	}
 45 ( 0.00%)  	return NULL;
300 ( 0.01%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 11 ----------------------------------------
  .           #include <string.h>
  .           #include <assert.h>
  .           #include <limits.h>
  .           #include <stdio.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
 51 ( 0.00%)  static char *clish_ptype_select__get_name(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 38 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
829 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
160 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (16x)
 51 ( 0.00%)  	if (arg) {
 68 ( 0.00%)  		size_t name_len = strlen(arg);
326 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (17x)
 72 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
1,504 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
368 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (16x)
  .           		if (lbrk)
 68 ( 0.00%)  			name_len = (size_t) (lbrk - arg);
 72 ( 0.00%)  		result = lub_string_dupn(arg, name_len);
2,561 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,621 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (16x)
  .           	}
  .           	return result;
 51 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_select__get_value(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
  .           	const char *arg = lub_argv__get_arg(this->u.select.items, index);
  .           	if (arg) {
-- line 40 ----------------------------------------
-- line 53 ----------------------------------------
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype__set_range(clish_ptype_t * this)
  .           {
  .           	char tmp[80];
  .           
  .           	/* Now set up the range values */
 75 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* Nothing more to do */
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* Setup the integer range */
 12 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%d..%d",
  .           			this->u.integer.min, this->u.integer.max);
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		this->range = lub_string_dup(tmp);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* Setup the unsigned integer range */
 15 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%u..%u",
2,947 ( 0.06%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (3x)
  .           			(unsigned int)this->u.integer.min,
  .           			(unsigned int)this->u.integer.max);
  3 ( 0.00%)  		tmp[sizeof(tmp) - 1] = '\0';
 12 ( 0.00%)  		this->range = lub_string_dup(tmp);
933 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		/* Setup the selection values to the help text */
  .           		unsigned int i;
  .           
121 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items); i++) {
870 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 38 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (19x)
 68 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
8,840 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (17x)
  .           
 34 ( 0.00%)  			if (i > 0)
 73 ( 0.00%)  				lub_string_cat(&this->range, "/");
3,648 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (14x)
128 ( 0.00%)  			snprintf(tmp, sizeof(tmp), "%s", name);
8,790 ( 0.17%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (17x)
 17 ( 0.00%)  			tmp[sizeof(tmp) - 1] = '\0';
 68 ( 0.00%)  			lub_string_cat(&this->range, tmp);
5,400 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (17x)
 51 ( 0.00%)  			lub_string_free(name);
1,530 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (17x)
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_ptype_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_ptype_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
768 ( 0.02%)  	return strcmp(this->name, key);
7,237 ( 0.14%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (256x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_ptype_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 12 ( 0.00%)  {
  .           	const clish_ptype_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
 48 ( 0.00%)  	strcpy((char *)key, this->name);
265 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           size_t clish_ptype_bt_offset(void)
  .           {
  .           	return offsetof(clish_ptype_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *method_names[] = {
  .           	"regexp",
  .           	"integer",
  .           	"unsignedInteger",
  .           	"select"
  .           };
-- line 137 ----------------------------------------
-- line 143 ----------------------------------------
  .           
  .           	if (method >= max_method)
  .           		return NULL;
  .           	return method_names[method];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_method_e clish_ptype_method_resolve(const char *name)
 36 ( 0.00%)  {
 10 ( 0.00%)  	clish_ptype_method_e result = CLISH_PTYPE_REGEXP;
 22 ( 0.00%)  	if (NULL != name) {
  .           		unsigned i;
 36 ( 0.00%)  		for (i = 0; i < CLISH_PTYPE_SELECT + 1; i++) {
114 ( 0.00%)  			if (0 == strcmp(name, method_names[i])) {
413 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (18x)
  .           				result = (clish_ptype_method_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
  .           		assert(i <= CLISH_PTYPE_SELECT);
  .           	}
  .           	return result;
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *preprocess_names[] = {
  .           	"none",
  .           	"toupper",
  .           	"tolower"
  .           };
  .           
-- line 173 ----------------------------------------
-- line 176 ----------------------------------------
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	return preprocess_names[preprocess];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_preprocess_e clish_ptype_preprocess_resolve(const char *name)
  .           {
 22 ( 0.00%)  	clish_ptype_preprocess_e result = CLISH_PTYPE_NONE;
 22 ( 0.00%)  	if (name) {
  .           		unsigned i;
  .           		for (i = 0; i < CLISH_PTYPE_TOLOWER + 1; i++) {
  .           			if (0 == strcmp(name, preprocess_names[i])) {
  .           				result = (clish_ptype_preprocess_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
-- line 193 ----------------------------------------
-- line 372 ----------------------------------------
  .           	return (char *)result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_init(clish_ptype_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
  .           {
 26 ( 0.00%)  	assert(name);
 52 ( 0.00%)  	this->name = lub_string_dup(name);
2,932 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
 13 ( 0.00%)  	this->text = NULL;
 13 ( 0.00%)  	this->pattern = NULL;
 13 ( 0.00%)  	this->preprocess = preprocess;
 13 ( 0.00%)  	this->range = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 43 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
947 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (12x)
  .           
 26 ( 0.00%)  	if (pattern) {
  .           		/* set the pattern for this type */
 69 ( 0.00%)  		clish_ptype__set_pattern(this, pattern, method);
1,918,667 (37.68%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern (12x)
148,076 ( 2.91%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	} else {
  .           		/* The method is regexp by default */
  .           		this->method = CLISH_PTYPE_REGEXP;
  .           	}
  .           	
  .           	/* set the help text for this type */
 26 ( 0.00%)  	if (text)
 56 ( 0.00%)  		clish_ptype__set_text(this, text);
832 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,699 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_text (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_validate(const clish_ptype_t * this, const char *text)
  .           {
  .           	return clish_ptype_validate_or_translate(this, text, BOOL_FALSE);
  .           }
  .           
-- line 408 ----------------------------------------
-- line 411 ----------------------------------------
  .           {
  .           	return clish_ptype_validate_or_translate(this, text, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_ptype_new(const char *name,
  .           	const char *help, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
156 ( 0.00%)  {
 52 ( 0.00%)  	clish_ptype_t *this = malloc(sizeof(clish_ptype_t));
4,162 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (13x)
  .           
 26 ( 0.00%)  	if (this)
  .           		clish_ptype_init(this, name, help, pattern, method, preprocess);
  .           	return this;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_fini(clish_ptype_t * this)
  .           {
  .           	if (this->pattern) {
  .           		switch (this->method) {
  .           		case CLISH_PTYPE_REGEXP:
  .           			regfree(&this->u.regexp);
-- line 433 ----------------------------------------
-- line 469 ----------------------------------------
  .           {
  .           	return (const char *)this->text;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_pattern(clish_ptype_t * this,
  .           			 const char *pattern, clish_ptype_method_e method)
 91 ( 0.00%)  {
 26 ( 0.00%)  	assert(NULL == this->pattern);
 13 ( 0.00%)  	this->method = method;
  .           
 74 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           	{
  .           		int result;
  .           
  .           		/* only the expression is allowed */
 39 ( 0.00%)  		lub_string_cat(&this->pattern, "^");
5,043 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,648 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (6x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, pattern);
3,484 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, "$");
1,814 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
  .           
  .           		/* compile the regular expression for later use */
 39 ( 0.00%)  		result = regcomp(&this->u.regexp, this->pattern,
1,847,778 (36.29%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp (6x)
141,777 ( 2.78%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			REG_NOSUB | REG_EXTENDED);
 14 ( 0.00%)  		assert(0 == result);
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* default the range to that of an integer */
  3 ( 0.00%)  		this->u.integer.min = INT_MIN;
  3 ( 0.00%)  		this->u.integer.max = INT_MAX;
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
726 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* now try and read the specified range */
 28 ( 0.00%)  		sscanf(this->pattern, "%d..%d",
2,835 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,758 ( 0.05%)  => /opt/build/glibc/glibc-2.24/stdio-common/isoc99_sscanf.c:__isoc99_sscanf (2x)
  .           			&this->u.integer.min, &this->u.integer.max);
  3 ( 0.00%)  		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* default the range to that of an unsigned integer */
  .           		this->u.integer.min = 0;
  .           		this->u.integer.max = (int)UINT_MAX;
  .           		this->pattern = lub_string_dup(pattern);
  .           		/* now try and read the specified range */
  .           		sscanf(this->pattern, "%u..%u",
  .           			(unsigned int *)&this->u.integer.min,
  .           			(unsigned int *)&this->u.integer.max);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
816 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* store a vector of item descriptors */
 29 ( 0.00%)  		this->u.select.items = lub_argv_new(this->pattern, 0);
15,931 ( 0.31%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,229 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (2x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	}
  .           	/* now set up the range details */
  .           	clish_ptype__set_range(this);
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype__set_text(clish_ptype_t * this, const char *text)
 13 ( 0.00%)  {
 39 ( 0.00%)  	assert(!this->text);
 52 ( 0.00%)  	this->text = lub_string_dup(text);
3,732 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
  .           
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_preprocess(clish_ptype_t * this,
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	assert(!this->preprocess);
  .           	this->preprocess = preprocess;
-- line 545 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c
--------------------------------------------------------------------------------
Ir           

-- line 19 ----------------------------------------
  .           	unsigned size;		/* Number of slots allocated in this array */
  .           	unsigned current_index;
  .           	unsigned stifle;
  .           };
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_init(tinyrl_history_t * this, unsigned stifle)
  .           {
  1 ( 0.00%)  	this->entries = NULL;
  1 ( 0.00%)  	this->stifle = stifle;
  1 ( 0.00%)  	this->current_index = 1;
  1 ( 0.00%)  	this->length = 0;
  2 ( 0.00%)  	this->size = 0;
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_fini(tinyrl_history_t * this)
  .           {
  .           	tinyrl_history_entry_t *entry;
  .           	tinyrl_history_iterator_t iter;
  .           
-- line 39 ----------------------------------------
-- line 44 ----------------------------------------
  .           	}
  .           	/* release the list */
  .           	free(this->entries);
  .           	this->entries = NULL;
  .           }
  .           
  .           /*------------------------------------- */
  .           tinyrl_history_t *tinyrl_history_new(unsigned stifle)
  4 ( 0.00%)  {
  4 ( 0.00%)  	tinyrl_history_t *this = malloc(sizeof(tinyrl_history_t));
197 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  2 ( 0.00%)  	if (NULL != this) {
  8 ( 0.00%)  		tinyrl_history_init(this, stifle);
787 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_delete(tinyrl_history_t * this)
  .           {
  .           	tinyrl_history_fini(this);
  .           	free(this);
  .           }
  .           
  .           /*
  .           HISTORY LIST MANAGEMENT 
  .           */
  .           /*------------------------------------- */
  .           /* insert a new entry at the current offset */
  .           static void insert_entry(tinyrl_history_t * this, const char *line)
 27 ( 0.00%)  {
 22 ( 0.00%)  	tinyrl_history_entry_t *new_entry =
3,911 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry_new (8x)
2,012 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 27 ( 0.00%)  	    tinyrl_history_entry_new(line, this->current_index++);
 27 ( 0.00%)  	assert(this->length);
 27 ( 0.00%)  	assert(this->entries);
 18 ( 0.00%)  	if (new_entry) {
 18 ( 0.00%)  		this->entries[this->length - 1] = new_entry;
  .           	}
 18 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /*
  .            * This frees the specified entries from the 
  .            * entries vector. NB it doesn't perform any shuffling.
  .            * This function is inclusive of start and end
  .            */
  .           static void
-- line 89 ----------------------------------------
-- line 126 ----------------------------------------
  .           }
  .           
  .           /*------------------------------------- */
  .           /* 
  .           Search the current history buffer for the specified 
  .           line and if found remove it.
  .           */
  .           static bool_t remove_duplicate(tinyrl_history_t * this, const char *line)
 56 ( 0.00%)  {
  9 ( 0.00%)  	bool_t result = BOOL_FALSE;
  .           	unsigned i;
  .           
135 ( 0.00%)  	for (i = 0; i < this->length; i++) {
 72 ( 0.00%)  		tinyrl_history_entry_t *entry = this->entries[i];
332 ( 0.01%)  		if (0 == strcmp(line, tinyrl_history_entry__get_line(entry))) {
2,492 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
735 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (35x)
 70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry__get_line (35x)
  .           			free_entries(this, i, i);
  .           			remove_entries(this, i, i);
  .           			result = BOOL_TRUE;
  .           			break;
  .           		}
  .           	}
  .           	return result;
 33 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /* 
  .           add an entry to the end of the current array 
  .           if there is no space returns -1 else 0
  .           */
  .           static void append_entry(tinyrl_history_t * this, const char *line)
  .           {
 27 ( 0.00%)  	if (this->length < this->size) {
 18 ( 0.00%)  		this->length++;
  .           
 27 ( 0.00%)  		insert_entry(this, line);
6,107 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:insert_entry (9x)
  .           	}
  .           }
  .           
  .           /*------------------------------------- */
  .           /*
  .            add a new history entry replacing the oldest one 
  .            */
  .           static void add_n_replace(tinyrl_history_t * this, const char *line)
-- line 168 ----------------------------------------
-- line 176 ----------------------------------------
  .           	/* add the new entry */
  .           	append_entry(this, line);
  .           }
  .           
  .           /*------------------------------------- */
  .           /* add a new history entry growing the array if necessary */
  .           static void add_n_grow(tinyrl_history_t * this, const char *line)
  .           {
 18 ( 0.00%)  	if (this->size == this->length) {
  .           		/* increment the history memory by 10 entries each time we grow */
  2 ( 0.00%)  		unsigned new_size = this->size + 10;
  .           		size_t nbytes;
  .           		tinyrl_history_entry_t **new_entries;
  .           
  1 ( 0.00%)  		nbytes = sizeof(tinyrl_history_entry_t *) * new_size;
  7 ( 0.00%)  		new_entries = realloc(this->entries, nbytes);
1,694 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  		if (NULL != new_entries) {
  1 ( 0.00%)  			this->size = new_size;
  2 ( 0.00%)  			this->entries = new_entries;
  .           		}
  .           	}
 27 ( 0.00%)  	(void)remove_duplicate(this, line);
3,934 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:remove_duplicate (9x)
  .           	append_entry(this, line);
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_add(tinyrl_history_t * this, const char *line)
 45 ( 0.00%)  {
 43 ( 0.00%)  	if (this->length && (this->length == this->stifle)) {
  .           		add_n_replace(this, line);
  .           	} else {
  .           		add_n_grow(this, line);
  .           	}
 27 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           tinyrl_history_entry_t *tinyrl_history_remove(tinyrl_history_t * this,
  .           					      unsigned offset)
  .           {
  .           	tinyrl_history_entry_t *result = NULL;
  .           
  .           	if (offset < this->length) {
-- line 217 ----------------------------------------
-- line 228 ----------------------------------------
  .           	/* free all the entries */
  .           	free_entries(this, 0, this->length - 1);
  .           	/* and shuffle the array */
  .           	remove_entries(this, 0, this->length - 1);
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_stifle(tinyrl_history_t * this, unsigned stifle)
  7 ( 0.00%)  {
  .           	/* 
  .           	 * if we are stifling (i.e. non zero value) then 
  .           	 * delete the obsolete entries
  .           	 */
  2 ( 0.00%)  	if (stifle) {
  3 ( 0.00%)  		if (stifle < this->length) {
  .           			unsigned num_deletes = this->length - stifle;
  .           			/* free the entries */
  .           			free_entries(this, 0, num_deletes - 1);
  .           			/* shuffle the array shut */
  .           			remove_entries(this, 0, num_deletes - 1);
  .           		}
  1 ( 0.00%)  		this->stifle = stifle;
  .           	}
  6 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           unsigned tinyrl_history_unstifle(tinyrl_history_t * this)
  .           {
  .           	unsigned result = this->stifle;
  .           
  .           	this->stifle = 0;
  .           
-- line 259 ----------------------------------------
-- line 431 ----------------------------------------
  .           	fclose(f);
  .           
  .           	return 0;
  .           }
  .           
  .           /*-------------------------------------*/
  .           /* Restore command history from specified file */
  .           int tinyrl_history_restore(tinyrl_history_t *this, const char *fname)
  5 ( 0.00%)  {
  .           	FILE *f;
  .           	char *p;
  .           	int part_len = 300;
  .           	char *buf;
  1 ( 0.00%)  	int buf_len = part_len;
  1 ( 0.00%)  	int res = 0;
  .           
  4 ( 0.00%)  	if (!fname) {
  .           		errno = EINVAL;
  .           		return -1;
  .           	}
 10 ( 0.00%)  	if (!(f = fopen(fname, "r")))
2,370 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  1 ( 0.00%)  		return 0; /* Can't find history file */
  .           
  5 ( 0.00%)  	buf = malloc(buf_len);
172 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           	p = buf;
 95 ( 0.00%)  	while (fgets(p, buf_len - (p - buf), f)) {
8,840 ( 0.17%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,534 ( 0.03%)  => /opt/build/glibc/glibc-2.24/libio/iofgets.c:fgets (9x)
  .           		char *ptmp = NULL;
 40 ( 0.00%)  		char *el = strchr(buf, '\n');
1,527 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
184 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (8x)
 18 ( 0.00%)  		if (el) { /* The whole line was readed */
  9 ( 0.00%)  			*el = '\0';
 40 ( 0.00%)  			tinyrl_history_add(this, buf);
4,509 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
8,208 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:tinyrl_history_add (8x)
  .           			p = buf;
  9 ( 0.00%)  			continue;
  .           		}
  .           		buf_len += part_len;
  .           		ptmp = realloc(buf, buf_len);
  .           		if (!ptmp) {
  .           			res = -1;
  .           			goto end;
  .           		}
  .           		buf = ptmp;
  .           		p = buf + buf_len - part_len - 1;
  .           	}
  .           end:
  7 ( 0.00%)  	free(buf);
1,633 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  7 ( 0.00%)  	fclose(f);
2,109 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return res;
  7 ( 0.00%)  }
  .           
  .           
  .           /*-------------------------------------*/

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c
--------------------------------------------------------------------------------
Ir           

-- line 31 ----------------------------------------
  .            *    Initial version
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           void *lub_bintree_findnext(lub_bintree_t * this, const void *clientkey)
155 ( 0.00%)  {
  .           	lub_bintree_node_t *t = this->root;
  .           	int comp;
  .           
  .           	/*
  .           	 * have a look for a direct match
  .           	 */
155 ( 0.00%)  	t = this->root = lub_bintree_splay(this, t, clientkey);
14,907 ( 0.29%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (31x)
  .           
 62 ( 0.00%)  	if (NULL != t) {
  .           		/* now look at what we have got */
155 ( 0.00%)  		comp = lub_bintree_compare(this, t, clientkey);
5,854 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (26x)
405 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (5x)
 62 ( 0.00%)  		if (comp <= 0) {
  .           			/*
  .           			 * time to fiddle with the right hand side of the tree
  .           			 * we need the closest node from the right hand side
  .           			 */
 31 ( 0.00%)  			t = t->right =
155 ( 0.00%)  			    lub_bintree_splay(this, t->right, clientkey);
3,655 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (31x)
  .           		}
  .           	}
112 ( 0.00%)  	if (NULL == t) {
  6 ( 0.00%)  		return NULL;
  .           	} else {
 50 ( 0.00%)  		return lub_bintree_getclientnode(this, t);
  .           	}
124 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c
--------------------------------------------------------------------------------
Ir             

-- line 73 ----------------------------------------
    .            */
    .           const char *default_path = "/etc/clish;~/.clish";
    .           
    .           static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent);
    .           
    .           /*-------------------------------------------------------- */
    .           int clish_shell_load_scheme(clish_shell_t *this, const char *xml_path, const char *xslt_path)
    8 ( 0.00%)  {
    .           	const char *path = xml_path;
    .           	char *buffer;
    .           	char *dirname;
    .           	char *saveptr = NULL;
    .           	int res = -1;
    .           	clish_xmldoc_t *doc = NULL;
    .           	DIR *dir;
    .           
-- line 89 ----------------------------------------
-- line 99 ----------------------------------------
    .           			return -1;
    .           		}
    .           	}
    .           #else
    .           	xslt_path = xslt_path; /* Happy compiler */
    .           #endif
    .           
    .           	/* Use the default path */
    2 ( 0.00%)  	if (!path)
    .           		path = default_path;
    9 ( 0.00%)  	buffer = lub_system_tilde_expand(path);
5,312 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Loop though each directory */
    .           	for (dirname = strtok_r(buffer, ";", &saveptr);
    .           		dirname; dirname = strtok_r(NULL, ";", &saveptr)) {
    .           		struct dirent *entry;
    .           
    .           		/* Search this directory for any XML files */
    8 ( 0.00%)  		dir = opendir(dirname);
2,024 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    3 ( 0.00%)  		if (NULL == dir) {
    .           #ifdef DEBUG
    .           			tinyrl_printf(this->tinyrl,
    .           				"*** Failed to open '%s' directory\n",
    .           				dirname);
    .           #endif
    .           			continue;
    .           		}
   79 ( 0.00%)  		for (entry = readdir(dir); entry; entry = readdir(dir)) {
2,157 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  573 ( 0.01%)  => /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c:readdir (14x)
   88 ( 0.00%)  			const char *extension = strrchr(entry->d_name, '.');
1,506 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  401 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strrchr.S:rindex (13x)
   14 ( 0.00%)  			char *filename = NULL;
    .           			clish_xmlnode_t *root;
    .           			int r;
    .           
    .           			/* Check the filename */
  134 ( 0.00%)  			if (!extension || strcmp(".xml", extension))
    .           				continue;
    .           
    .           			/* Build the filename */
   41 ( 0.00%)  			lub_string_cat(&filename, dirname);
3,779 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, "/");
2,620 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, entry->d_name);
4,032 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
    .           
    .           #ifdef DEBUG
    .           			fprintf(stderr, "Parse XML-file: %s\n", filename);
    .           #endif
    .           			/* Load current XML file */
   44 ( 0.00%)  			doc = clish_xmldoc_read(filename);
1,456,349 (28.60%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read (9x)
134,640 ( 2.64%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  			if (!clish_xmldoc_is_valid(doc)) {
  659 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (9x)
   10 ( 0.00%)  				int errcaps = clish_xmldoc_error_caps(doc);
    .           				printf("Unable to open file '%s'", filename);
    .           				if ((errcaps & CLISH_XMLERR_LINE) == CLISH_XMLERR_LINE)
    .           					printf(", at line %d", clish_xmldoc_get_err_line(doc));
    .           				if ((errcaps & CLISH_XMLERR_COL) == CLISH_XMLERR_COL)
    .           					printf(", at column %d", clish_xmldoc_get_err_col(doc));
    .           				if ((errcaps & CLISH_XMLERR_DESC) == CLISH_XMLERR_DESC)
    .           					printf(", message is %s", clish_xmldoc_get_err_msg(doc));
    .           				printf("\n");
-- line 155 ----------------------------------------
-- line 171 ----------------------------------------
    .           				}
    .           				clish_xmldoc_release(doc);
    .           				doc = tmp;
    .           			}
    .           
    .           			if (!xslt_path && clish_xslt_is_valid(xslt))
    .           				clish_xslt_release(xslt);
    .           #endif
   24 ( 0.00%)  			root = clish_xmldoc_get_root(doc);
  673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_get_root (9x)
    .           			r = process_node(this, root, NULL);
   44 ( 0.00%)  			clish_xmldoc_release(doc);
179,070 ( 3.52%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release (9x)
14,628 ( 0.29%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           			/* Error message */
   30 ( 0.00%)  			if (r) {
    .           				fprintf(stderr, CLISH_XML_ERROR_STR"File %s\n",
    .           					filename);
    .           				lub_string_free(filename);
    .           				goto error;
    .           			}
   34 ( 0.00%)  			lub_string_free(filename);
2,402 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  810 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
    .           		}
    7 ( 0.00%)  		closedir(dir);
1,641 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           /* To don't free memory twice on cleanup */
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (!xslt_path)
    .           		xslt = NULL;
    .           #endif
    1 ( 0.00%)  	doc = NULL;
    .           	dir = NULL;
    1 ( 0.00%)  	res = 0; /* Success */
    .           error:
    3 ( 0.00%)  	lub_string_free(buffer);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    .           	if (dir)
    .           		closedir(dir);
    5 ( 0.00%)  	if (clish_xmldoc_is_valid(doc))
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (1x)
    .           		clish_xmldoc_release(doc);
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (clish_xslt_is_valid(xslt))
    .           		clish_xslt_release(xslt);
    .           #endif
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /*
    .            * ------------------------------------------------------
    .            * This function reads an element from the XML stream and processes it.
    .            * ------------------------------------------------------
    .            */
  980 ( 0.02%)  static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent)
    .           {
   98 ( 0.00%)  	int res = 0;
    .           
2,511 ( 0.05%)  	switch (clish_xmlnode_get_type(node)) {
2,342,797 (46.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 (30x)
  870 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type (174x)
    .           	case CLISH_XMLNODE_ELM: {
    .           			clish_xml_cb_t * cb;
    .           			char name[128];
   98 ( 0.00%)  			unsigned int namelen = sizeof(name);
  788 ( 0.02%)  			if (clish_xmlnode_get_name(node, name, &namelen) == 0) {
5,400 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (9x)
2,754 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,990 ( 0.04%)  				for (cb = &xml_elements[0]; cb->element; cb++) {
2,369 ( 0.05%)  					if (0 == strcmp(name, cb->element)) {
1,476 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  189 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (9x)
    .           #ifdef DEBUG
    .           						fprintf(stderr, "NODE:");
    .           						clish_xmlnode_print(node, stderr);
    .           						fprintf(stderr, "\n");
    .           #endif
    .           						/* process the elements at this level */
  490 ( 0.01%)  						res = cb->handler(shell, node, parent);
2,353,098 (46.21%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module (10x)
    .           
    .           						/* Error message */
  294 ( 0.01%)  						if (res) {
    .           							char *ename = clish_xmlnode_fetch_attr(node, "name");
    .           							char *eref = clish_xmlnode_fetch_attr(node, "ref");
    .           							char *ekey = clish_xmlnode_fetch_attr(node, "key");
    .           							char *efile = clish_xmlnode_fetch_attr(node, "file");
    .           							fprintf(stderr, CLISH_XML_ERROR_STR"Node %s", name);
    .           							if (ename)
    .           								fprintf(stderr, ", name=\"%s\"", ename);
    .           							if (eref)
-- line 252 ----------------------------------------
-- line 274 ----------------------------------------
    .           	case CLISH_XMLNODE_COMMENT:
    .           	case CLISH_XMLNODE_DECL:
    .           	case CLISH_XMLNODE_UNKNOWN:
    .           	default:
    .           		break;
    .           	}
    .           
    .           	return res;
  882 ( 0.02%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_children(clish_shell_t *shell,
    .           	clish_xmlnode_t *element, void *parent)
  549 ( 0.01%)  {
   61 ( 0.00%)  	clish_xmlnode_t *node = NULL;
    .           	int res;
    .           
3,350 ( 0.07%)  	while ((node = clish_xmlnode_next_child(element, node)) != NULL) {
  799 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  750 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child (183x)
    .           		/* Now deal with all the contained elements */
    .           		res = process_node(shell, node, parent);
  176 ( 0.00%)  		if (res)
    .           			return res;
    .           	}
    .           
   61 ( 0.00%)  	return 0;
  366 ( 0.01%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_clish_module(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   50 ( 0.00%)  {
    .           	/* Create the global view */
   30 ( 0.00%)  	if (!shell->global)
   11 ( 0.00%)  		shell->global = clish_shell_find_create_view(shell,
5,219 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			"__view_global", "");
    .           
    .           	parent = parent; /* Happy compiler */
    .           
   30 ( 0.00%)  	return process_children(shell, element, shell->global);
2,347,728 (46.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children (10x)
   30 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_view(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   45 ( 0.00%)  {
    .           	clish_view_t *view;
    .           	int res = -1;
    .           
   29 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  164 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (4x)
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  	char *prompt = clish_xmlnode_fetch_attr(element, "prompt");
  328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *depth = clish_xmlnode_fetch_attr(element, "depth");
  322 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *restore = clish_xmlnode_fetch_attr(element, "restore");
  340 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
  334 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
    .           
    .           	/* Check syntax */
   10 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
    .           
    .           	/* re-use a view if it already exists */
   30 ( 0.00%)  	view = clish_shell_find_create_view(shell, name, prompt);
6,372 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell_find_create_view (5x)
    .           
   10 ( 0.00%)  	if (depth && (lub_ctype_isdigit(*depth))) {
    .           		unsigned int res = 0;
    .           		lub_conv_atoui(depth, &res, 0);
    .           		clish_view__set_depth(view, res);
    .           	}
    .           
   10 ( 0.00%)  	if (restore) {
    .           		if (!lub_string_nocasecmp(restore, "depth"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_DEPTH);
    .           		else if (!lub_string_nocasecmp(restore, "view"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_VIEW);
    .           		else
    .           			clish_view__set_restore(view, CLISH_RESTORE_NONE);
    .           	}
    .           
   10 ( 0.00%)  	if (access)
    .           		clish_view__set_access(view, access);
    .           
    .           //process_view_end:
   25 ( 0.00%)  	res = process_children(shell, element, view);
294,166 ( 5.78%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (5x)
    .           error:
   15 ( 0.00%)  	clish_xml_release(name);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(prompt);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(depth);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(restore);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(access);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   45 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_ptype(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   99 ( 0.00%)  {
    .           	clish_ptype_method_e method;
    .           	clish_ptype_preprocess_e preprocess;
    .           	int res = -1;
    .           
   55 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  509 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,291 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *pattern = clish_xmlnode_fetch_attr(element, "pattern");
1,017 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *method_name = clish_xmlnode_fetch_attr(element, "method");
1,022 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *preprocess_name =	clish_xmlnode_fetch_attr(element, "preprocess");
1,321 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
    .           
    .           	/* Check syntax */
   22 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   22 ( 0.00%)  	if (!pattern) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("pattern"));
    .           		goto error;
    .           	}
    .           
   48 ( 0.00%)  	method = clish_ptype_method_resolve(method_name);
  705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  651 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_method_resolve (10x)
    .           
   48 ( 0.00%)  	preprocess = clish_ptype_preprocess_resolve(preprocess_name);
  737 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_preprocess_resolve (10x)
   77 ( 0.00%)  	clish_shell_find_create_ptype(shell,
1,797,666 (35.30%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (11x)
    .           		name, help, pattern, method, preprocess);
    .           
   11 ( 0.00%)  	res = 0;
    .           error:
   33 ( 0.00%)  	clish_xml_release(name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(help);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(pattern);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(method_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(preprocess_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   99 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_overview(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    8 ( 0.00%)  {
    1 ( 0.00%)  	char *content = NULL;
    2 ( 0.00%)  	unsigned int content_len = 2048;
    .           	int result;
    .           
    .           	/*
    .           	 * the code below faithfully assume that we'll be able fully store
    .           	 * the content of the node. If it's really, really big, we may have
    .           	 * an issue (but then, if it's that big, how the hell does it
    .           	 * already fits in allocated memory?)
    .           	 * Ergo, it -should- be safe.
    .           	 */
    .           	do {
    4 ( 0.00%)  		char *new = (char*)realloc(content, content_len);
1,810 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (1x)
    2 ( 0.00%)  		if (!new) {
    .           			if (content)
    .           				free(content);
    .           			return -1;
    .           		}
    .           		content = new;
    7 ( 0.00%)  		result = clish_xmlnode_get_content(element, content,
19,472 ( 0.38%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (1x)
    .           			&content_len);
    2 ( 0.00%)  	} while (result == -E2BIG);
    .           
    2 ( 0.00%)  	if (result == 0 && content) {
    .           		/* set the overview text for this view */
    2 ( 0.00%)  		assert(NULL == shell->overview);
    .           		/* store the overview */
    4 ( 0.00%)  		shell->overview = lub_string_dup(content);
  912 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    .           	}
    .           
    .           	if (content)
    3 ( 0.00%)  		free(content);
  133 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    1 ( 0.00%)  	return 0;
    7 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_command(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  260 ( 0.01%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	clish_command_t *old;
    .           	int res = -1;
    .           
  130 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,173 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
1,095 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,876 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
2,185 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
2,290 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *escape_chars = clish_xmlnode_fetch_attr(element, "escape_chars");
2,244 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_name = clish_xmlnode_fetch_attr(element, "args");
1,989 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_help = clish_xmlnode_fetch_attr(element, "args_help");
2,371 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
2,314 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
2,374 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *ref = clish_xmlnode_fetch_attr(element, "ref");
2,290 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
    .           
    .           	/* Check syntax */
   52 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   52 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
    .           
    .           	/* check this command doesn't already exist */
  134 ( 0.00%)  	old = clish_view_find_command(v, name, BOOL_FALSE);
  723 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,202 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (25x)
   52 ( 0.00%)  	if (old) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"Duplicate COMMAND name=\"%s\".\n", name);
    .           		goto error;
    .           	}
    .           
    .           	/* create a command */
  160 ( 0.00%)  	cmd = clish_view_new_command(v, name, help);
41,908 ( 0.82%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (25x)
4,334 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  108 ( 0.00%)  	clish_command__set_pview(cmd, v);
  679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_pview (25x)
    .           
    .           	/* Reference 'ref' field */
   78 ( 0.00%)  	if (ref) {
    .           		char *saveptr = NULL;
    .           		const char *delim = "@";
    .           		char *view_name = NULL;
    .           		char *cmdn = NULL;
    .           		char *str = lub_string_dup(ref);
    .           
    .           		cmdn = strtok_r(str, delim, &saveptr);
    .           		if (!cmdn) {
-- line 505 ----------------------------------------
-- line 509 ----------------------------------------
    .           		}
    .           		clish_command__set_alias(cmd, cmdn); /* alias name */
    .           		view_name = strtok_r(NULL, delim, &saveptr);
    .           		clish_command__set_alias_view(cmd, view_name);
    .           		lub_string_free(str);
    .           	}
    .           
    .           	/* define some specialist escape characters */
   78 ( 0.00%)  	if (escape_chars)
    8 ( 0.00%)  		clish_command__set_escape_chars(cmd, escape_chars);
  923 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   52 ( 0.00%)  	if (args_name) {
    .           		/* define a "rest of line" argument */
    .           		clish_param_t *param;
    .           
    .           		/* Check syntax */
    2 ( 0.00%)  		if (!args_help) {
    .           			fprintf(stderr, CLISH_XML_ERROR_ATTR("args_help"));
    .           			goto error;
    .           		}
    5 ( 0.00%)  		param = clish_param_new(args_name, args_help, "__ptype_ARGS");
  751 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (1x)
    8 ( 0.00%)  		clish_command__set_args(cmd, param);
  689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* define the view which this command changes to */
   78 ( 0.00%)  	if (view) {
    .           		/* reference the next view */
   36 ( 0.00%)  		clish_command__set_viewname(cmd, view);
1,802 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,747 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (7x)
    .           	}
    .           
    .           	/* define the view id which this command changes to */
   78 ( 0.00%)  	if (viewid)
   16 ( 0.00%)  		clish_command__set_viewid(cmd, viewid);
1,747 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  471 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewid (2x)
    .           
    .           	/* lock field */
   78 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
  108 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
  725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (25x)
    .           
    .           	/* interrupt field */
   78 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
  108 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
  719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (25x)
    .           
   78 ( 0.00%)  	if (access)
    8 ( 0.00%)  		clish_command__set_access(cmd, access);
  872 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           //process_command_end:
  130 ( 0.00%)  	res = process_children(shell, element, cmd);
368,358 ( 7.23%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (26x)
    .           error:
   78 ( 0.00%)  	clish_xml_release(access);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(view);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(viewid);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(escape_chars);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(lock);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(interrupt);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(ref);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
    .           
    .           	return res;
  234 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_startup(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   10 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	int res = -1;
    .           
    5 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
   70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
   73 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_shebang =
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		clish_xmlnode_fetch_attr(element, "default_shebang");
    5 ( 0.00%)  	char *timeout = clish_xmlnode_fetch_attr(element, "timeout");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_plugin = clish_xmlnode_fetch_attr(element,
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		"default_plugin");
    .           
    .           	/* Check syntax */
    2 ( 0.00%)  	if (!view) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("view"));
    .           		goto error;
    .           	}
    2 ( 0.00%)  	if (shell->startup) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP tag duplication.\n");
    .           		goto error;
    .           	}
    .           
    .           	/* create a command with NULL help */
    6 ( 0.00%)  	cmd = clish_view_new_command(v, "startup", NULL);
1,152 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (1x)
    4 ( 0.00%)  	clish_command__set_lock(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* reference the next view */
    4 ( 0.00%)  	clish_command__set_viewname(cmd, view);
  246 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (1x)
    .           
    .           	/* define the view id which this command changes to */
    3 ( 0.00%)  	if (viewid)
    .           		clish_command__set_viewid(cmd, viewid);
    .           
    3 ( 0.00%)  	if (default_shebang)
    .           		clish_shell__set_default_shebang(shell, default_shebang);
    .           
    3 ( 0.00%)  	if (timeout) {
    .           		unsigned int to = 0;
    .           		lub_conv_atoui(timeout, &to, 0);
    .           		clish_shell__set_timeout(shell, to);
    .           	}
    .           
    .           	/* lock field */
    2 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
    4 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* interrupt field */
    2 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
    4 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (1x)
    .           
    .           	/* If we need the default plugin */
    3 ( 0.00%)  	if (default_plugin && (0 == strcmp(default_plugin, "false")))
    .           		shell->default_plugin = BOOL_FALSE;
    .           
    .           	/* remember this command */
    1 ( 0.00%)  	shell->startup = cmd;
    .           
    5 ( 0.00%)  	res = process_children(shell, element, cmd);
6,108 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (1x)
    .           error:
    3 ( 0.00%)  	clish_xml_release(view);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(viewid);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(default_shebang);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(timeout);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(lock);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(interrupt);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_param(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  190 ( 0.00%)  {
    .           	clish_command_t *cmd = NULL;
   38 ( 0.00%)  	clish_param_t *p_param = NULL;
    .           	clish_xmlnode_t *pelement;
    .           	clish_param_t *param;
    .           	char *pname;
    .           	int res = -1;
    .           
  114 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  808 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,378 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *ptype = clish_xmlnode_fetch_attr(element, "ptype");
2,127 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *prefix = clish_xmlnode_fetch_attr(element, "prefix");
2,179 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *defval = clish_xmlnode_fetch_attr(element, "default");
2,199 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *mode = clish_xmlnode_fetch_attr(element, "mode");
1,874 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *optional = clish_xmlnode_fetch_attr(element, "optional");
1,874 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *order = clish_xmlnode_fetch_attr(element, "order");
1,874 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *value = clish_xmlnode_fetch_attr(element, "value");
2,246 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *hidden = clish_xmlnode_fetch_attr(element, "hidden");
2,045 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *test = clish_xmlnode_fetch_attr(element, "test");
2,246 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *completion = clish_xmlnode_fetch_attr(element, "completion");
2,270 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,180 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
    .           
    .           	/* The PARAM can be child of COMMAND or another PARAM */
   76 ( 0.00%)  	pelement = clish_xmlnode_parent(element);
   76 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (19x)
    .           	pname = clish_xmlnode_get_all_name(pelement);
  190 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "PARAM") == 0)
  969 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (19x)
    .           		p_param = (clish_param_t *)parent;
    .           	else
    .           		cmd = (clish_command_t *)parent;
    .           	if (pname)
   95 ( 0.00%)  		free(pname);
2,439 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (19x)
   38 ( 0.00%)  	if (!cmd && !p_param)
    .           		goto error;
    .           
    .           	/* Check syntax */
   95 ( 0.00%)  	if (cmd && (cmd == shell->startup)) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP can't contain PARAMs.\n");
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!ptype) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("ptype"));
    .           		goto error;
    .           	}
    .           
  118 ( 0.00%)  	param = clish_param_new(name, help, ptype);
22,318 ( 0.44%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (18x)
2,175 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* If prefix is set clish will emulate old optional
    .           	 * command syntax over newer optional command mechanism.
    .           	 * It will create nested PARAM.
    .           	 */
   38 ( 0.00%)  	if (prefix) {
    .           		const char *ptype_name = "__ptype_SUBCOMMAND";
    .           		clish_param_t *opt_param = NULL;
    5 ( 0.00%)  		char *str = NULL;
    .           		clish_ptype_t *tmp;
    .           
    .           		/* Create a ptype for prefix-named subcommand that
    .           		 * will contain the nested optional parameter. The
    .           		 * name of ptype is hardcoded. It's not good but
    .           		 * it's only the service ptype.
    .           		 */
   25 ( 0.00%)  		tmp = (clish_ptype_t *)lub_bintree_find(
2,321 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (5x)
    .           			&shell->ptype_tree, ptype_name);
   10 ( 0.00%)  		if (!tmp)
    8 ( 0.00%)  			tmp = clish_shell_find_create_ptype(shell,
137,591 ( 2.70%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (1x)
    .           				ptype_name, "Option", "[^\\\\]+",
    .           				CLISH_PTYPE_REGEXP, CLISH_PTYPE_NONE);
    2 ( 0.00%)  		assert(tmp);
   20 ( 0.00%)  		lub_string_cat(&str, "_prefix_");
1,896 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   20 ( 0.00%)  		lub_string_cat(&str, name);
1,336 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   30 ( 0.00%)  		opt_param = clish_param_new(str, help, ptype_name);
5,820 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (5x)
   15 ( 0.00%)  		lub_string_free(str);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   24 ( 0.00%)  		clish_param__set_mode(opt_param,
  657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_mode (4x)
    .           			CLISH_PARAM_SUBCOMMAND);
   24 ( 0.00%)  		clish_param__set_value(opt_param, prefix);
  826 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  820 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_value (4x)
   20 ( 0.00%)  		clish_param__set_optional(opt_param, BOOL_TRUE);
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (5x)
    .           
   15 ( 0.00%)  		if (test)
    .           			clish_param__set_test(opt_param, test);
    .           
    .           		/* Add the parameter to the command */
   10 ( 0.00%)  		if (cmd)
   20 ( 0.00%)  			clish_command_insert_param(cmd, opt_param);
  934 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (5x)
    .           		/* Add the parameter to the param */
   15 ( 0.00%)  		if (p_param)
    .           			clish_param_insert_param(p_param, opt_param);
    .           		/* Unset cmd and set parent param to opt_param */
    5 ( 0.00%)  		cmd = NULL;
    .           		p_param = opt_param;
    .           	}
    .           
   57 ( 0.00%)  	if (defval)
   24 ( 0.00%)  		clish_param__set_default(param, defval);
  918 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,009 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_default (4x)
    .           
   57 ( 0.00%)  	if (hidden && lub_string_nocasecmp(hidden, "true") == 0)
    .           		clish_param__set_hidden(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_hidden(param, BOOL_FALSE);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_hidden (18x)
    .           
   57 ( 0.00%)  	if (mode) {
    .           		if (lub_string_nocasecmp(mode, "switch") == 0) {
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_SWITCH);
    .           			/* Force hidden attribute */
    .           			clish_param__set_hidden(param, BOOL_TRUE);
    .           		} else if (lub_string_nocasecmp(mode, "subcommand") == 0)
   28 ( 0.00%)  			clish_param__set_mode(param,
    .           				CLISH_PARAM_SUBCOMMAND);
    .           		else
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_COMMON);
    .           	}
    .           
   57 ( 0.00%)  	if (optional && lub_string_nocasecmp(optional, "true") == 0)
    .           		clish_param__set_optional(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_optional(param, BOOL_FALSE);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (18x)
    .           
   57 ( 0.00%)  	if (order && lub_string_nocasecmp(order, "true") == 0)
    .           		clish_param__set_order(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_order(param, BOOL_FALSE);
  663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_order (18x)
    .           
   57 ( 0.00%)  	if (value) {
    .           		clish_param__set_value(param, value);
    .           		/* Force mode to subcommand */
    .           		clish_param__set_mode(param,
    .           			CLISH_PARAM_SUBCOMMAND);
    .           	}
    .           
   57 ( 0.00%)  	if (test && !prefix)
    .           		clish_param__set_test(param, test);
    .           
   57 ( 0.00%)  	if (completion)
    .           		clish_param__set_completion(param, completion);
    .           
   57 ( 0.00%)  	if (access)
    .           		clish_param__set_access(param, access);
    .           
    .           	/* Add the parameter to the command */
   38 ( 0.00%)  	if (cmd)
   60 ( 0.00%)  		clish_command_insert_param(cmd, param);
1,565 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,769 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (13x)
    .           
    .           	/* Add the parameter to the param */
   38 ( 0.00%)  	if (p_param)
   24 ( 0.00%)  		clish_param_insert_param(p_param, param);
  914 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,002 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_insert_param (4x)
    .           
   95 ( 0.00%)  	res = process_children(shell, element, param);
  570 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (19x)
    .           
    .           error:
   57 ( 0.00%)  	clish_xml_release(name);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(help);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(ptype);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(prefix);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(defval);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(mode);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(optional);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(order);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(value);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(hidden);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(test);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(completion);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(access);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
    .           
    .           	return res;
  171 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_action(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  210 ( 0.00%)  {
    .           	clish_action_t *action = NULL;
  126 ( 0.00%)  	char *builtin = clish_xmlnode_fetch_attr(element, "builtin");
  531 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
  105 ( 0.00%)  	char *shebang = clish_xmlnode_fetch_attr(element, "shebang");
  431 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
   88 ( 0.00%)  	clish_xmlnode_t *pelement = clish_xmlnode_parent(element);
  649 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   80 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (20x)
    .           	char *pname = clish_xmlnode_get_all_name(pelement);
    .           	char *text;
    .           	clish_sym_t *sym = NULL;
    .           
  172 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "VAR") == 0)
3,294 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,020 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (20x)
   21 ( 0.00%)  		action = clish_var__get_action((clish_var_t *)parent);
    .           	else
   67 ( 0.00%)  		action = clish_command__get_action((clish_command_t *)parent);
  703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (20x)
    .           
    .           	if (pname)
   63 ( 0.00%)  		free(pname);
2,733 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
    .           	text = clish_xmlnode_get_all_content(element);
    .           
   84 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   94 ( 0.00%)  		clish_action__set_script(action, text);
  984 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,915 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_script (17x)
    .           	}
    .           	if (text)
   63 ( 0.00%)  		free(text);
2,817 ( 0.06%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
   42 ( 0.00%)  	if (builtin)
   28 ( 0.00%)  		sym = clish_shell_add_unresolved_sym(shell, builtin,
5,051 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,908 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_unresolved_sym (3x)
    .           			CLISH_SYM_TYPE_ACTION);
    .           	else
   51 ( 0.00%)  		sym = shell->hooks[CLISH_SYM_TYPE_ACTION];
    .           
   67 ( 0.00%)  	clish_action__set_builtin(action, sym);
  695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_builtin (20x)
   42 ( 0.00%)  	if (shebang)
    .           		clish_action__set_shebang(action, shebang);
    .           
   67 ( 0.00%)  	clish_xml_release(builtin);
  622 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (20x)
   63 ( 0.00%)  	clish_xml_release(shebang);
   21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (21x)
    .           
    .           	return 0;
  189 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_detail(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   28 ( 0.00%)  {
    .           	clish_command_t *cmd = (clish_command_t *) parent;
    .           
    .           	/* read the following text element */
    .           	char *text = clish_xmlnode_get_all_content(element);
    .           
   16 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   24 ( 0.00%)  		clish_command__set_detail(cmd, text);
1,555 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_detail (3x)
1,223 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	if (text)
   12 ( 0.00%)  		free(text);
  534 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (4x)
    .           
    .           	shell = shell; /* Happy compiler */
    .           
    .           	return 0;
   28 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_namespace(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    .           {
    .           	clish_view_t *v = (clish_view_t *)parent;
    .           	clish_nspace_t *nspace = NULL;
    .           	int res = -1;
-- line 906 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c
--------------------------------------------------------------------------------
Ir           

-- line 23 ----------------------------------------
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_compare(const void *first, const void *second)
  .           {
  .           	const clish_sym_t *f = (const clish_sym_t *)first;
  .           	const clish_sym_t *s = (const clish_sym_t *)second;
  .           
180 ( 0.00%)  	return strcmp(f->name, s->name);
1,281 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (45x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_sym_new(const char *name, void *func, int type)
168 ( 0.00%)  {
  .           	clish_sym_t *this;
  .           
 84 ( 0.00%)  	this = malloc(sizeof(*this));
4,345 ( 0.09%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (21x)
 88 ( 0.00%)  	this->name = lub_string_dup(name);
3,827 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (20x)
782 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 21 ( 0.00%)  	this->func = func;
 21 ( 0.00%)  	this->type = type;
 21 ( 0.00%)  	this->api = CLISH_SYM_API_SIMPLE;
 21 ( 0.00%)  	this->permanent = BOOL_FALSE;
  .           
  .           	return this;
147 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym_free(clish_sym_t *this)
  .           {
  .           	if (!this)
  .           		return;
  .           	lub_string_free(this->name);
  .           	free(this);
-- line 55 ----------------------------------------
-- line 59 ----------------------------------------
  .           void clish_sym__set_func(clish_sym_t *this, void *func)
  .           {
  .           	this->func = func;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void *clish_sym__get_func(clish_sym_t *this)
  .           {
  8 ( 0.00%)  	return this->func;
  8 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_permanent(clish_sym_t *this, bool_t permanent)
  .           {
 26 ( 0.00%)  	this->permanent = permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_sym__get_permanent(clish_sym_t *this)
  .           {
  .           	return this->permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_name(clish_sym_t *this, const char *name)
 15 ( 0.00%)  {
  9 ( 0.00%)  	lub_string_free(this->name);
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 12 ( 0.00%)  	this->name = lub_string_dup(name);
885 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 12 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_sym__get_name(clish_sym_t *this)
  .           {
 46 ( 0.00%)  	return this->name;
 46 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_plugin(clish_sym_t *this, clish_plugin_t *plugin)
  .           {
 26 ( 0.00%)  	this->plugin = plugin;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_sym__get_plugin(clish_sym_t *this)
  .           {
  .           	return this->plugin;
  .           }
  .           
-- line 106 ----------------------------------------
-- line 108 ----------------------------------------
  .           void clish_sym__set_type(clish_sym_t *this, int type)
  .           {
  .           	this->type = type;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym__get_type(const clish_sym_t *this)
  .           {
 13 ( 0.00%)  	return this->type;
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_api(clish_sym_t *this, clish_sym_api_e api)
  .           {
  2 ( 0.00%)  	this->api = api;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_api_e clish_sym__get_api(const clish_sym_t *this)
  .           {
  2 ( 0.00%)  	return this->api;
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_clone(clish_sym_t *dst, clish_sym_t *src)
  .           {
  .           	char *name;
  .           
 24 ( 0.00%)  	if (!dst || !src)
  .           		return -1;
  6 ( 0.00%)  	name = dst->name;
 60 ( 0.00%)  	*dst = *src;
  6 ( 0.00%)  	dst->name = name;
  .           
 12 ( 0.00%)  	return 0;
  .           }
  .           
  .           /**********************************************************
  .            * PLUGIN functions                                       *
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_plugin_new(const char *name)
  4 ( 0.00%)  {
  .           	clish_plugin_t *this;
  .           
  4 ( 0.00%)  	this = malloc(sizeof(*this));
114 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           
  4 ( 0.00%)  	this->name = lub_string_dup(name);
383 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  1 ( 0.00%)  	this->conf = NULL;
  1 ( 0.00%)  	this->alias = NULL;
  1 ( 0.00%)  	this->file = NULL;
  1 ( 0.00%)  	this->builtin_flag = BOOL_FALSE; /* The plugin is shared object by default */
  1 ( 0.00%)  	this->dlhan = NULL;
  .           	/* Initialise the list of symbols */
  4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
175 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
  .           	/* Constructor and destructor */
  1 ( 0.00%)  	this->init = NULL;
  1 ( 0.00%)  	this->fini = NULL;
  .           	/* Flags */
  1 ( 0.00%)  	this->rtld_global = BOOL_FALSE; /* The dlopen() use RTLD_LOCAL by default */
  .           
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_free(clish_plugin_t *this, void *userdata)
  .           {
  .           	lub_list_node_t *iter;
  .           
  .           	if (!this)
  .           		return;
-- line 179 ----------------------------------------
-- line 201 ----------------------------------------
  .           		dlclose(this->dlhan);
  .           #endif
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_generic(clish_plugin_t *this,
  .           	void *func, const char *name, int type, bool_t permanent)
 39 ( 0.00%)  {
  .           	clish_sym_t *sym;
  .           
 91 ( 0.00%)  	if (!name || !func)
  .           		return NULL;
  .           
 91 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
6,439 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (13x)
  .           		return NULL;
 56 ( 0.00%)  	clish_sym__set_plugin(sym, this);
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_plugin (12x)
 56 ( 0.00%)  	clish_sym__set_permanent(sym, permanent);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_permanent (12x)
 52 ( 0.00%)  	lub_list_add(this->syms, sym);
4,289 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (13x)
  .           
  .           	return sym;
 65 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_sym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
  .           	return clish_plugin_add_generic(this, func,
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_psym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
 36 ( 0.00%)  	return clish_plugin_add_generic(this, func,
8,152 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (9x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_osym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  1 ( 0.00%)  {
  .           	clish_sym_t *s;
  .           
  7 ( 0.00%)  	if (!(s = clish_plugin_add_generic(this, func,
951 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (1x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE)))
  .           		return s;
  8 ( 0.00%)  	clish_sym__set_api(s, CLISH_SYM_API_STDOUT);
631 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return s;
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_posym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  .           {
  .           	clish_sym_t *s;
  .           
-- line 261 ----------------------------------------
-- line 274 ----------------------------------------
  .           	return clish_plugin_add_generic(this, func,
  .           		name, type, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_phook(clish_plugin_t *this,
  .           	void *func, const char *name, int type)
  .           {
 13 ( 0.00%)  	return clish_plugin_add_generic(this, func,
2,509 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,633 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (2x)
  .           		name, type, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_add_fini(clish_plugin_t *this,
  .           	clish_plugin_fini_t *fini)
  .           {
  .           	this->fini = fini;
-- line 290 ----------------------------------------
-- line 306 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           clish_plugin_init_t * clish_plugin_get_init(clish_plugin_t *this)
  .           {
  .           	return this->init;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_get_sym(clish_plugin_t *this, const char *name, int type)
 42 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           	clish_sym_t *sym;
  .           
  .           	/* Iterate elements */
 86 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (6x)
100 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (25x)
  .           		int res;
124 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (31x)
217 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
676 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (31x)
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (31x)
104 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
  .           			return sym;
 25 ( 0.00%)  		if (res > 0) /* No chances to find name */
  .           			break;
  .           	}
  .           
  .           	return NULL;
 42 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static int clish_plugin_load_shared(clish_plugin_t *this)
  .           {
  .           #ifdef HAVE_DLFCN_H
  1 ( 0.00%)  	char *file = NULL; /* Plugin so file name */
  1 ( 0.00%)  	char *init_name = NULL; /* Init function name */
  .           	int flag = RTLD_NOW;
  .           
  3 ( 0.00%)  	if (this->file) {
  .           		file = lub_string_dup(this->file);
  .           	} else {
  4 ( 0.00%)  		lub_string_cat(&file, "clish_plugin_");
410 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  		lub_string_cat(&file, this->name);
264 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  5 ( 0.00%)  		lub_string_cat(&file, ".so");
272 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  .           	}
  .           
  .           	/* Open dynamic library */
  7 ( 0.00%)  	if (clish_plugin__get_rtld_global(this))
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  		flag |= RTLD_GLOBAL;
  .           	else
  .           		flag |= RTLD_LOCAL;
  8 ( 0.00%)  	this->dlhan = dlopen(file, flag);
133,888 ( 2.63%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(file);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  2 ( 0.00%)  	if (!this->dlhan) {
  .           		fprintf(stderr, "Error: Can't open plugin \"%s\": %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	/* Get plugin init function */
  5 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_PREFIX);
295 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, this->name);
264 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_SUFFIX);
282 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  9 ( 0.00%)  	this->init = (clish_plugin_init_t *)dlsym(this->dlhan, init_name);
4,005 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(init_name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	if (!this->init) {
  .           		fprintf(stderr, "Error: Can't get plugin \"%s\" init function: %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	return 0;
  .           #else /* HAVE_DLFCN_H */
  .           	/* We have no any dl functions. */
-- line 376 ----------------------------------------
-- line 377 ----------------------------------------
  .           	fprintf(stderr, "Error: Can't get plugin \"%s\" init function.\n",
  .           		this->name);
  .           	return -1;
  .           #endif /* HAVE_DLFCN_H */
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_plugin_load(clish_plugin_t *this, void *userdata)
  4 ( 0.00%)  {
  .           	int res;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return -1;
  5 ( 0.00%)  	assert(this->name);
  .           
  .           	/* Builtin plugins already have init function. */
  3 ( 0.00%)  	if (!this->builtin_flag) {
  .           		if (clish_plugin_load_shared(this) < 0)
  .           			return -1;
  .           	}
  .           	if (!this->init) {
  .           		fprintf(stderr, "Error: PLUGIN %s has no init function\n",
  .           			this->name);
  .           		return -1;
  .           	}
  .           	/* Execute init function */
  6 ( 0.00%)  	if ((res = this->init(userdata, this)))
14,017 ( 0.28%)  => /home/ykuznetsov/klish-2.1.3/plugins/clish/builtin_init.c:clish_plugin_clish_init (1x)
  .           		fprintf(stderr, "Error: Plugin %s init retcode: %d\n",
  .           			this->name, res);
  .           
  .           	return res;
  6 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_name(const clish_plugin_t *this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 416 ----------------------------------------
-- line 424 ----------------------------------------
  .           char *clish_plugin__get_alias(const clish_plugin_t *this)
  .           {
  .           	return this->alias;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_pubname(const clish_plugin_t *this)
  .           {
 12 ( 0.00%)  	return (this->alias ? this->alias : this->name);
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin__set_file(clish_plugin_t *this, const char *file)
  .           {
  .           	lub_string_free(this->file);
  .           	this->file = lub_string_dup(file);
  .           }
  .           
-- line 441 ----------------------------------------
-- line 474 ----------------------------------------
  .           void clish_plugin__set_rtld_global(clish_plugin_t *this, bool_t rtld_global)
  .           {
  .           	this->rtld_global = rtld_global;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_plugin__get_rtld_global(const clish_plugin_t *this)
  .           {
  1 ( 0.00%)  	return this->rtld_global;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/xmlapi.h
--------------------------------------------------------------------------------
Ir           

-- line 124 ----------------------------------------
  .           /*
  .            * get the node name
  .            * dynamically allocate the buffer (it must be freed once you don't need it
  .            * anymore) that will contain all the content of the node.
  .            * return NULL on error.
  .            */
  .           static inline char* clish_xmlnode_get_all_name(clish_xmlnode_t *node)
  .           {
 40 ( 0.00%)  	char *name = NULL; 
120 ( 0.00%)  	unsigned int nlen = 2048; 
  .           	int result;
  .           
  .           	do { 
164 ( 0.00%)  		name = (char*)realloc(name, nlen);
10,096 ( 0.20%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (20x)
2,745 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
200 ( 0.00%)  		result = clish_xmlnode_get_name(node, name, &nlen);
12,075 ( 0.24%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (21x)
 80 ( 0.00%)  	} while (result == -E2BIG);
  .           
 80 ( 0.00%)  	if (result < 0) {
  .           		free(name);
  .           		return NULL;
  .           	}
  .           
  .           	return name;
  .           }
  .           
  .           /*
-- line 149 ----------------------------------------
-- line 163 ----------------------------------------
  .           /*
  .            * get the node content
  .            * dynamically allocate the buffer (it must be freed once you don't need it
  .            * anymore) that will contain all the content of the node.
  .            * return NULL on error.
  .            */
  .           static inline char* clish_xmlnode_get_all_content(clish_xmlnode_t *node)
  .           {
 46 ( 0.00%)  	char *content = NULL; 
 58 ( 0.00%)  	unsigned int clen = 2048; 
  .           	int result;
  .           
  .           	do { 
100 ( 0.00%)  		content = (char*)realloc(content, clen);
6,724 ( 0.13%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (21x)
129 ( 0.00%)  		result = clish_xmlnode_get_content(node, content, &clen);
2,260 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,094 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (20x)
 50 ( 0.00%)  	} while (result == -E2BIG);
  .           
 50 ( 0.00%)  	if (result < 0) {
  .           		free(content);
  .           		return NULL;
  .           	}
  .           
  .           	return content;
  .           }
  .           
  .           /*
-- line 188 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/string/string.c
--------------------------------------------------------------------------------
Ir             

-- line 10 ----------------------------------------
    .           
    .           const char *lub_string_esc_default = "`|$<>&()#;\\\"!";
    .           const char *lub_string_esc_regex = "^$.*+[](){}";
    .           const char *lub_string_esc_quoted = "\\\"";
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_free(char *ptr)
    .           {
  144 ( 0.00%)  	free(ptr);
5,829 ( 0.11%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (69x)
1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_ndecode(const char *string, unsigned int len)
   68 ( 0.00%)  {
    .           	const char *s = string;
    .           	char *res, *p;
    .           	int esc = 0;
    .           
   34 ( 0.00%)  	if (!string)
    .           		return NULL;
    .           
    .           	/* Allocate enough memory for result */
   68 ( 0.00%)  	p = res = malloc(len + 1);
3,343 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (17x)
    .           
1,154 ( 0.02%)  	while (*s && (s < (string +len))) {
  396 ( 0.01%)  		if (!esc) {
  396 ( 0.01%)  			if ('\\' == *s)
  198 ( 0.00%)  				esc = 1;
    .           			else
    .           				*p = *s;
    .           		} else {
    .           /*			switch (*s) {
    .           			case 'r':
    .           			case 'n':
    .           				*p = '\n';
    .           				break;
    .           			case 't':
    .           				*p = '\t';
    .           				break;
    .           			default:
    .           				*p = *s;
    .           				break;
    .           			}
  198 ( 0.00%)  */			*p = *s;
    .           			esc = 0;
    .           		}
    .           		if (!esc)
  396 ( 0.01%)  			p++;
  198 ( 0.00%)  		s++;
    .           	}
   17 ( 0.00%)  	*p = '\0';
    .           
    .           	return res;
   68 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           inline char *lub_string_decode(const char *string)
    .           {
    .           	return lub_string_ndecode(string, strlen(string));
    .           }
    .           
    .           /*----------------------------------------------------------- */
-- line 71 ----------------------------------------
-- line 95 ----------------------------------------
    .           			break;
    .           		}
    .           	}
    .           	return result;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_catn(char **string, const char *text, size_t len)
  618 ( 0.01%)  {
  206 ( 0.00%)  	if (text) {
    .           		char *q;
  515 ( 0.01%)  		size_t length, initlen, textlen = strlen(text);
2,042 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (103x)
    .           
    .           		/* make sure the client cannot give us duff details */
  206 ( 0.00%)  		len = (len < textlen) ? len : textlen;
    .           
    .           		/* remember the size of the original string */
  661 ( 0.01%)  		initlen = *string ? strlen(*string) : 0;
2,150 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (73x)
    .           
    .           		/* account for '\0' */
  103 ( 0.00%)  		length = initlen + len + 1;
    .           
    .           		/* allocate the memory for the result */
  313 ( 0.01%)  		q = realloc(*string, length);
16,505 ( 0.32%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (102x)
1,846 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  206 ( 0.00%)  		if (NULL != q) {
  103 ( 0.00%)  			*string = q;
    .           			/* move to the end of the initial string */
  103 ( 0.00%)  			q += initlen;
    .           
2,372 ( 0.05%)  			while (len--) {
2,790 ( 0.05%)  				*q++ = *text++;
    .           			}
  103 ( 0.00%)  			*q = '\0';
    .           		}
    .           	}
  618 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_cat(char **string, const char *text)
  510 ( 0.01%)  {
  616 ( 0.01%)  	size_t len = text ? strlen(text) : 0;
1,456 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,992 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (101x)
  412 ( 0.01%)  	lub_string_catn(string, text, len);
29,347 ( 0.58%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn (101x)
2,759 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  306 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_dup(const char *string)
    .           {
  578 ( 0.01%)  	if (!string)
    .           		return NULL;
  520 ( 0.01%)  	return strdup(string);
60,895 ( 1.20%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (257x)
1,754 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   62 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_dupn(const char *string, unsigned int len)
   54 ( 0.00%)  {
    .           	char *res = NULL;
    .           
   72 ( 0.00%)  	if (!string)
    .           		return res;
   72 ( 0.00%)  	res = malloc(len + 1);
2,118 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (18x)
   94 ( 0.00%)  	strncpy(res, string, len);
1,579 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  496 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (17x)
   18 ( 0.00%)  	res[len] = '\0';
    .           
    .           	return res;
   90 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int lub_string_nocasecmp(const char *cs, const char *ct)
1,812 ( 0.04%)  {
    .           	int result = 0;
5,822 ( 0.11%)  	while ((0 == result) && *cs && *ct) {
    .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
    .           		 * MACRO implementation uses braces to prevent multiple increments
    .           		 * when called.
    .           		 */
3,444 ( 0.07%)  		int s = lub_ctype_tolower(*cs++);
7,557 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (687x)
2,407 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,440 ( 0.07%)  		int t = lub_ctype_tolower(*ct++);
7,568 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (688x)
    .           
    .           		result = s - t;
    .           	}
    .           	/*lint -e774 Boolean within 'if' always evealuates to True 
    .           	 * not the case because of tolower() evaluating to 0 under lint
    .           	 * (see above)
    .           	 */
    .           	if (0 == result) {
    .           		/* account for different string lengths */
   79 ( 0.00%)  		result = *cs - *ct;
    .           	}
    .           	return result;
1,510 ( 0.03%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_tolower(const char *str)
    .           {
    .           	char *tmp = strdup(str);
    .           	char *p = tmp;
    .           
    .           	while (*p) {
-- line 192 ----------------------------------------
-- line 269 ----------------------------------------
    .           		p1++;
    .           	}
    .           	return p2;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *lub_string_nextword(const char *string,
    .           	size_t *len, size_t *offset, size_t *quoted)
  320 ( 0.01%)  {
    .           	const char *word;
    .           
   40 ( 0.00%)  	*quoted = 0;
    .           
    .           	/* Find the start of a word (not including an opening quote) */
  564 ( 0.01%)  	while (*string && isspace(*string)) {
1,542 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   99 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (33x)
   34 ( 0.00%)  		string++;
   28 ( 0.00%)  		(*offset)++;
    .           	}
    .           	/* Is this the start of a quoted string ? */
  102 ( 0.00%)  	if (*string == '"') {
    .           		*quoted = 1;
    .           		string++;
    .           	}
    .           	word = string;
   80 ( 0.00%)  	*len = 0;
    .           
    .           	/* Find the end of the word */
  912 ( 0.02%)  	while (*string) {
  848 ( 0.02%)  		if (*string == '\\') {
    .           			string++;
    .           			(*len)++;
    .           			if (*string) {
    .           				(*len)++;
    .           				string++;
    .           			}
    .           			continue;
    .           		}
    .           		/* End of word */
3,392 ( 0.07%)  		if (!*quoted && isspace(*string))
1,272 ( 0.02%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (424x)
    .           			break;
  792 ( 0.02%)  		if (*string == '"') {
    .           			/* End of a quoted string */
    .           			*quoted = 2;
    .           			break;
    .           		}
  396 ( 0.01%)  		(*len)++;
  792 ( 0.02%)  		string++;
    .           	}
    .           
    .           	return word;
  280 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned int lub_string_wordcount(const char *line)
   15 ( 0.00%)  {
    .           	const char *word;
    3 ( 0.00%)  	unsigned int result = 0;
    6 ( 0.00%)  	size_t len = 0, offset = 0;
    .           	size_t quoted;
    .           
   71 ( 0.00%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
  682 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (2x)
2,674 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  		*word || quoted;
  102 ( 0.00%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
4,042 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (17x)
    .           		/* account for the terminating quotation mark */
   88 ( 0.00%)  		len += quoted ? quoted - 1 : 0;
   17 ( 0.00%)  		result++;
    .           	}
    .           
    .           	return result;
   21 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c
--------------------------------------------------------------------------------
Ir           

-- line 606 ----------------------------------------
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           static void tinyrl_init(tinyrl_t * this, FILE * istream, FILE * ostream,
  .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
  .           {
  .           	int i;
  .           
512 ( 0.01%)  	for (i = 0; i < NUM_HANDLERS; i++) {
512 ( 0.01%)  		this->handlers[i] = tinyrl_key_default;
  .           	}
  .           	/* Default handlers */
  2 ( 0.00%)  	this->handlers[KEY_CR] = tinyrl_key_crlf;
  1 ( 0.00%)  	this->handlers[KEY_LF] = tinyrl_key_crlf;
  2 ( 0.00%)  	this->handlers[KEY_ETX] = tinyrl_key_interrupt;
  2 ( 0.00%)  	this->handlers[KEY_DEL] = tinyrl_key_backspace;
  1 ( 0.00%)  	this->handlers[KEY_BS] = tinyrl_key_backspace;
  2 ( 0.00%)  	this->handlers[KEY_EOT] = tinyrl_key_delete;
  2 ( 0.00%)  	this->handlers[KEY_FF] = tinyrl_key_clear_screen;
  2 ( 0.00%)  	this->handlers[KEY_NAK] = tinyrl_key_erase_line;
  2 ( 0.00%)  	this->handlers[KEY_SOH] = tinyrl_key_start_of_line;
  2 ( 0.00%)  	this->handlers[KEY_ENQ] = tinyrl_key_end_of_line;
  2 ( 0.00%)  	this->handlers[KEY_VT] = tinyrl_key_kill;
  2 ( 0.00%)  	this->handlers[KEY_EM] = tinyrl_key_yank;
  2 ( 0.00%)  	this->handlers[KEY_HT] = tinyrl_key_tab;
  2 ( 0.00%)  	this->handlers[KEY_ETB] = tinyrl_key_backword;
  .           
  1 ( 0.00%)  	this->line = NULL;
  1 ( 0.00%)  	this->max_line_length = 0;
  1 ( 0.00%)  	this->prompt = NULL;
  1 ( 0.00%)  	this->prompt_size = 0;
  1 ( 0.00%)  	this->buffer = NULL;
  1 ( 0.00%)  	this->buffer_size = 0;
  1 ( 0.00%)  	this->done = BOOL_FALSE;
  1 ( 0.00%)  	this->completion_over = BOOL_FALSE;
  1 ( 0.00%)  	this->point = 0;
  1 ( 0.00%)  	this->end = 0;
  1 ( 0.00%)  	this->attempted_completion_function = complete_fn;
  2 ( 0.00%)  	this->timeout_fn = tinyrl_timeout_default;
  1 ( 0.00%)  	this->keypress_fn = NULL;
  1 ( 0.00%)  	this->hotkey_fn = NULL;
  1 ( 0.00%)  	this->state = 0;
  1 ( 0.00%)  	this->kill_string = NULL;
  1 ( 0.00%)  	this->echo_char = '\0';
  1 ( 0.00%)  	this->echo_enabled = BOOL_TRUE;
  1 ( 0.00%)  	this->last_buffer = NULL;
  1 ( 0.00%)  	this->last_point = 0;
  1 ( 0.00%)  	this->last_line_size = 0;
  1 ( 0.00%)  	this->utf8 = BOOL_FALSE;
  .           
  .           	/* create the vt100 terminal */
  9 ( 0.00%)  	this->term = tinyrl_vt100_new(NULL, ostream);
917 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	tinyrl__set_istream(this, istream);
1,547 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	this->last_width = tinyrl_vt100__get_width(this->term);
3,714 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* create the history */
  8 ( 0.00%)  	this->history = tinyrl_history_new(stifle);
1,742 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           int tinyrl_printf(const tinyrl_t * this, const char *fmt, ...)
  7 ( 0.00%)  {
  .           	va_list args;
  .           	int len;
  .           
  6 ( 0.00%)  	va_start(args, fmt);
  8 ( 0.00%)  	len = tinyrl_vt100_vprintf(this->term, fmt, args);
18,158 ( 0.36%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	va_end(args);
  .           
  .           	return len;
  2 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl_delete(tinyrl_t * this)
  .           {
  .           	assert(this);
  .           	if (this) {
  .           		/* let the object tidy itself up */
  .           		tinyrl_fini(this);
-- line 684 ----------------------------------------
-- line 804 ----------------------------------------
  .           	this->last_point = this->point;
  .           	this->last_width = width;
  .           	this->last_line_size = line_size;
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           tinyrl_t *tinyrl_new(FILE * istream, FILE * ostream,
  .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
  9 ( 0.00%)  {
  .           	tinyrl_t *this = NULL;
  .           
  8 ( 0.00%)  	this = malloc(sizeof(tinyrl_t));
1,783 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  	if (this)
  .           		tinyrl_init(this, istream, ostream, stifle, complete_fn);
  .           
  .           	return this;
  7 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------------------- */
  .           static char *internal_insertline(tinyrl_t * this, char *buffer)
  .           {
  .           	char *p;
  .           	char *s = buffer;
  .           
  .           	/* strip any spurious '\r' or '\n' */
-- line 828 ----------------------------------------
-- line 1209 ----------------------------------------
  .           		this->end = start;
  .           	/* put a terminator at the end of the buffer */
  .           	this->buffer[this->end] = '\0';
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           bool_t tinyrl_bind_key(tinyrl_t * this, int key, tinyrl_key_func_t * fn)
  .           {
  4 ( 0.00%)  	bool_t result = BOOL_FALSE;
  .           
  8 ( 0.00%)  	if ((key >= 0) && (key < 256)) {
  .           		/* set the key handling function */
  8 ( 0.00%)  		this->handlers[key] = fn;
  4 ( 0.00%)  		result = BOOL_TRUE;
  .           	}
  .           
  .           	return result;
  4 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /*
  .            * Returns an array of strings which is a list of completions for text.
  .            * If there are no completions, returns NULL. The first entry in the
  .            * returned array is the substitution for text. The remaining entries
  .            * are the possible completions. The array is terminated with a NULL pointer.
  .            *
-- line 1234 ----------------------------------------
-- line 1496 ----------------------------------------
  .           void tinyrl_disable_echo(tinyrl_t * this, char echo_char)
  .           {
  .           	this->echo_enabled = BOOL_FALSE;
  .           	this->echo_char = echo_char;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void tinyrl__set_istream(tinyrl_t * this, FILE * istream)
 10 ( 0.00%)  {
 10 ( 0.00%)  	tinyrl_vt100__set_istream(this->term, istream);
785 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__set_istream (1x)
  4 ( 0.00%)  	if (istream) {
  .           		int fd;
 14 ( 0.00%)  		this->isatty = isatty(fileno(istream)) ? BOOL_TRUE : BOOL_FALSE;
1,511 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
  .           		/* Save terminal settings to restore on exit */
  3 ( 0.00%)  		fd = fileno(istream);
  6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
  8 ( 0.00%)  		tcgetattr(fd, &this->default_termios);
1,590 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	} else
  1 ( 0.00%)  		this->isatty = BOOL_FALSE;
  7 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           bool_t tinyrl__get_isatty(const tinyrl_t * this)
  .           {
  .           	return this->isatty;
  .           }
  .           
  .           /*-------------------------------------------------------- */
-- line 1522 ----------------------------------------
-- line 1557 ----------------------------------------
  .           bool_t tinyrl__get_utf8(const tinyrl_t * this)
  .           {
  .           	return this->utf8;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_utf8(tinyrl_t * this, bool_t utf8)
  .           {
  2 ( 0.00%)  	this->utf8 = utf8;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_timeout(tinyrl_t *this, int timeout)
  .           {
  .           	tinyrl_vt100__set_timeout(this->term, timeout);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_timeout_fn(tinyrl_t *this,
  .           	tinyrl_timeout_fn_t *fn)
  .           {
  2 ( 0.00%)  	this->timeout_fn = fn;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_keypress_fn(tinyrl_t *this,
  .           	tinyrl_keypress_fn_t *fn)
  .           {
  2 ( 0.00%)  	this->keypress_fn = fn;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_hotkey_fn(tinyrl_t *this,
  .           	tinyrl_key_func_t *fn)
  .           {
  2 ( 0.00%)  	this->hotkey_fn = fn;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           bool_t tinyrl_is_quoting(const tinyrl_t * this)
  .           {
  .           	bool_t result = BOOL_FALSE;
  .           	/* count the quotes upto the current insertion point */
  .           	unsigned int i = 0;
-- line 1600 ----------------------------------------
-- line 1641 ----------------------------------------
  .           int tinyrl__save_history(const tinyrl_t *this, const char *fname)
  .           {
  .           	return tinyrl_history_save(this->history, fname);
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           int tinyrl__restore_history(tinyrl_t *this, const char *fname)
  .           {
  7 ( 0.00%)  	return tinyrl_history_restore(this->history, fname);
32,096 ( 0.63%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           void tinyrl__stifle_history(tinyrl_t *this, unsigned int stifle)
  .           {
  7 ( 0.00%)  	tinyrl_history_stifle(this->history, stifle);
770 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/param/param.c
--------------------------------------------------------------------------------
Ir           

-- line 13 ----------------------------------------
  .           #include <string.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
  .           static void clish_param_init(clish_param_t *this, const char *name,
  .           	const char *text, const char *ptype_name)
  .           {
100 ( 0.00%)  	this->name = lub_string_dup(name);
5,301 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  	this->text = lub_string_dup(text);
6,098 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  	this->ptype_name = lub_string_dup(ptype_name);
5,773 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
  .           
  .           	/* Set up defaults */
 25 ( 0.00%)  	this->ptype = NULL;
 25 ( 0.00%)  	this->defval = NULL;
 25 ( 0.00%)  	this->mode = CLISH_PARAM_COMMON;
 25 ( 0.00%)  	this->optional = BOOL_FALSE;
 25 ( 0.00%)  	this->order = BOOL_FALSE;
 25 ( 0.00%)  	this->value = NULL;
 25 ( 0.00%)  	this->hidden = BOOL_FALSE;
 25 ( 0.00%)  	this->test = NULL;
 25 ( 0.00%)  	this->completion = NULL;
 25 ( 0.00%)  	this->access = NULL;
  .           
 75 ( 0.00%)  	this->paramv = clish_paramv_new();
4,562 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_new (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_param_fini(clish_param_t * this)
  .           {
  .           	/* deallocate the memory for this instance */
  .           	lub_string_free(this->defval);
  .           	lub_string_free(this->name);
-- line 45 ----------------------------------------
-- line 53 ----------------------------------------
  .           	clish_paramv_delete(this->paramv);
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           clish_param_t *clish_param_new(const char *name, const char *text,
  .           	const char *ptype_name)
200 ( 0.00%)  {
100 ( 0.00%)  	clish_param_t *this = malloc(sizeof(clish_param_t));
7,567 ( 0.15%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (25x)
  .           
 50 ( 0.00%)  	if (this)
  .           		clish_param_init(this, name, text, ptype_name);
  .           	return this;
175 ( 0.00%)  }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC METHODS
  .            *--------------------------------------------------------- */
  .           void clish_param_delete(clish_param_t * this)
  .           {
  .           	clish_param_fini(this);
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param_insert_param(clish_param_t * this, clish_param_t * param)
  .           {
 15 ( 0.00%)  	return clish_paramv_insert(this->paramv, param);
1,216 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_insert (5x)
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC ATTRIBUTES
  .            *--------------------------------------------------------- */
  .           void clish_param__set_ptype_name(clish_param_t *this, const char *ptype_name)
125 ( 0.00%)  {
 75 ( 0.00%)  	if (this->ptype_name)
 50 ( 0.00%)  		lub_string_free(this->ptype_name);
2,250 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (25x)
100 ( 0.00%)  	this->ptype_name = lub_string_dup(ptype_name);
100 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char * clish_param__get_ptype_name(const clish_param_t *this)
  .           {
 25 ( 0.00%)  	return this->ptype_name;
 25 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_param__get_name(const clish_param_t * this)
  .           {
  .           	if (!this)
  .           		return NULL;
  .           	return this->name;
  .           }
-- line 106 ----------------------------------------
-- line 121 ----------------------------------------
  .           clish_ptype_t *clish_param__get_ptype(const clish_param_t * this)
  .           {
  .           	return this->ptype;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_ptype(clish_param_t *this, clish_ptype_t *ptype)
  .           {
 50 ( 0.00%)  	this->ptype = ptype;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_default(clish_param_t * this, const char *defval)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->defval);
 20 ( 0.00%)  	this->defval = lub_string_dup(defval);
1,200 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_param__get_default(const clish_param_t * this)
  .           {
  .           	return this->defval;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_mode(clish_param_t * this, clish_param_mode_e mode)
  .           {
 10 ( 0.00%)  	assert(this);
 10 ( 0.00%)  	this->mode = mode;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_mode_e clish_param__get_mode(const clish_param_t * this)
  .           {
  .           	return this->mode;
  .           }
  .           
-- line 157 ----------------------------------------
-- line 217 ----------------------------------------
  .           	unsigned index)
  .           {
  .           	return clish_paramv__get_param(this->paramv, index);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_paramv_t *clish_param__get_paramv(clish_param_t * this)
  .           {
 24 ( 0.00%)  	return this->paramv;
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned int clish_param__get_param_count(const clish_param_t * this)
  .           {
  .           	return clish_paramv__get_count(this->paramv);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_optional(clish_param_t * this, bool_t optional)
  .           {
 48 ( 0.00%)  	this->optional = optional;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_optional(const clish_param_t * this)
  .           {
  .           	return this->optional;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_order(clish_param_t * this, bool_t order)
  .           {
 38 ( 0.00%)  	this->order = order;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_order(const clish_param_t * this)
  .           {
  .           	return this->order;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           
  .           /* paramv methods */
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_paramv_init(clish_paramv_t * this)
  .           {
 52 ( 0.00%)  	this->paramc = 0;
 52 ( 0.00%)  	this->paramv = NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_paramv_fini(clish_paramv_t * this)
  .           {
  .           	unsigned i;
  .           
  .           	/* finalize each of the parameter instances */
-- line 274 ----------------------------------------
-- line 277 ----------------------------------------
  .           	}
  .           	/* free the parameter vector */
  .           	free(this->paramv);
  .           	this->paramc = 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_paramv_t *clish_paramv_new(void)
 52 ( 0.00%)  {
156 ( 0.00%)  	clish_paramv_t *this = malloc(sizeof(clish_paramv_t));
8,607 ( 0.17%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (52x)
  .           
104 ( 0.00%)  	if (this)
  .           		clish_paramv_init(this);
  .           	return this;
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_paramv_delete(clish_paramv_t * this)
  .           {
  .           	clish_paramv_fini(this);
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_paramv_insert(clish_paramv_t * this, clish_param_t * param)
120 ( 0.00%)  {
 72 ( 0.00%)  	size_t new_size = ((this->paramc + 1) * sizeof(clish_param_t *));
  .           	clish_param_t **tmp;
  .           
  .           	/* resize the parameter vector */
 72 ( 0.00%)  	tmp = realloc(this->paramv, new_size);
4,565 ( 0.09%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (24x)
 48 ( 0.00%)  	if (tmp) {
 24 ( 0.00%)  		this->paramv = tmp;
  .           		/* insert reference to the parameter */
 96 ( 0.00%)  		this->paramv[this->paramc++] = param;
  .           	}
 96 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_paramv_remove(clish_paramv_t *this, unsigned int index)
  .           {
  .           	size_t new_size;
  .           	clish_param_t **tmp;
  .           	clish_param_t **dst, **src;
  .           	size_t n;
-- line 321 ----------------------------------------
-- line 345 ----------------------------------------
  .           
  .           	return 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_t *clish_paramv__get_param(const clish_paramv_t * this,
  .           	unsigned int index)
  .           {
 50 ( 0.00%)  	clish_param_t *result = NULL;
  .           
148 ( 0.00%)  	if (index < this->paramc)
 96 ( 0.00%)  		result = this->paramv[index];
  .           	return result;
 50 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_t *clish_paramv_find_param(const clish_paramv_t * this,
  .           	const char *name)
  .           {
  .           	clish_param_t *res = NULL;
  .           	unsigned int i;
  .           
-- line 366 ----------------------------------------
-- line 390 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           unsigned int clish_paramv__get_count(const clish_paramv_t * this)
  .           {
  .           	return this->paramc;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_value(clish_param_t * this, const char * value)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->value);
 20 ( 0.00%)  	this->value = lub_string_dup(value);
935 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_param__get_value(const clish_param_t * this)
  .           {
  .           	if (this->value)
  .           		return this->value;
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_hidden(clish_param_t * this, bool_t hidden)
  .           {
 38 ( 0.00%)  	this->hidden = hidden;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_hidden(const clish_param_t * this)
  .           {
  .           	return this->hidden;
  .           }
  .           
-- line 422 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c
--------------------------------------------------------------------------------
Ir           

-- line 12 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           static void lub_argv_init(lub_argv_t * this, const char *line, size_t offset)
  .           {
  .           	size_t len;
  .           	const char *word;
  .           	lub_arg_t *arg;
  .           	size_t quoted;
  .           
  3 ( 0.00%)  	this->argv = NULL;
  3 ( 0.00%)  	this->argc = 0;
  9 ( 0.00%)  	if (!line)
  .           		return;
  .           	/* first of all count the words in the line */
 16 ( 0.00%)  	this->argc = lub_string_wordcount(line);
6,376 ( 0.13%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,131 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (2x)
  6 ( 0.00%)  	if (0 == this->argc)
  .           		return;
  .           	/* allocate space to hold the vector */
 21 ( 0.00%)  	arg = this->argv = malloc(sizeof(lub_arg_t) * this->argc);
453 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (3x)
  6 ( 0.00%)  	assert(arg);
  .           
  .           	/* then fill out the array with the words */
 73 ( 0.00%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
933 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (3x)
  9 ( 0.00%)  		*word || quoted;
119 ( 0.00%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
4,042 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (17x)
 89 ( 0.00%)  		(*arg).arg = lub_string_ndecode(word, len);
1,107 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
6,191 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_ndecode (16x)
 34 ( 0.00%)  		(*arg).offset = offset;
 85 ( 0.00%)  		(*arg).quoted = quoted ? BOOL_TRUE : BOOL_FALSE;
  .           
 51 ( 0.00%)  		offset += len;
  .           
 34 ( 0.00%)  		if (quoted) {
  .           			len += quoted - 1; /* account for terminating quotation mark */
  .           			offset += quoted; /* account for quotation marks */
  .           		}
 17 ( 0.00%)  		arg++;
  .           	}
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_argv_t *lub_argv_new(const char *line, size_t offset)
 27 ( 0.00%)  {
  .           	lub_argv_t *this;
  .           
 12 ( 0.00%)  	this = malloc(sizeof(lub_argv_t));
534 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (3x)
  6 ( 0.00%)  	if (this)
  .           		lub_argv_init(this, line, offset);
  .           
  .           	return this;
 27 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void lub_argv_add(lub_argv_t * this, const char *text)
  .           {
  .           	lub_arg_t * arg;
  .           
  .           	if (!text)
  .           		return;
-- line 68 ----------------------------------------
-- line 155 ----------------------------------------
  .           	free(argv);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *lub_argv__get_arg(const lub_argv_t *this, unsigned int index)
  .           {
  .           	const char *result = NULL;
  .           
 34 ( 0.00%)  	if (!this)
  .           		return NULL;
 34 ( 0.00%)  	if (this->argc > index)
102 ( 0.00%)  		result = this->argv[index].arg;
  .           
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned lub_argv__get_count(const lub_argv_t * this)
  .           {
 20 ( 0.00%)  	return this->argc;
 20 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           size_t lub_argv__get_offset(const lub_argv_t * this, unsigned index)
  .           {
  .           	size_t result = 0;
  .           
  .           	if (this->argc > index)
  .           		result = this->argv[index].offset;
-- line 183 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c
--------------------------------------------------------------------------------
Ir           

-- line 38 ----------------------------------------
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include <assert.h>
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           int lub_bintree_insert(lub_bintree_t * this, void *clientnode)
176 ( 0.00%)  {
 19 ( 0.00%)  	int result = -1;
  .           	lub_bintree_node_t *new;
  .           	lub_bintree_key_t key;
  .           
132 ( 0.00%)  	assert(clientnode);
  .           	if (NULL != clientnode) {
  .           		/* obtain the control block from the clientnode */
132 ( 0.00%)  		new = lub_bintree_getnode(this, clientnode);
  .           
  .           		/* check this node is not currently in another tree */
 88 ( 0.00%)  		assert(new->left == NULL);
 88 ( 0.00%)  		assert(new->right == NULL);
  .           
  .           		/* add this node to the splay tree */
  .           
  .           		/* Insert "node" into the tree , unless it's already there. */
 88 ( 0.00%)  		if (NULL == this->root) {
  .           			this->root = new;
  .           			this->root->left = this->root->right = NULL;
  .           			result = 0;
  .           		} else {
  .           			int comp;
  .           			/* get a key from the node */
 74 ( 0.00%)  			this->getkeyFn(clientnode, &key);
1,588 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_getkey (4x)
563 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_getkey (21x)
325 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_getkey (12x)
  .           
  .           			/* do the biz */
222 ( 0.00%)  			this->root = lub_bintree_splay(this, this->root, &key);
5,826 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (37x)
  .           
  .           			/*
  .           			 * compare the new key with the detail found
  .           			 * in the tree
  .           			 */
148 ( 0.00%)  			comp = lub_bintree_compare(this, this->root, &key);
1,579 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (21x)
276 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (12x)
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (4x)
 74 ( 0.00%)  			if (comp > 0) {
 54 ( 0.00%)  				new->left = this->root->left;
 18 ( 0.00%)  				new->right = this->root;
 18 ( 0.00%)  				this->root->left = NULL;
  .           				result = 0;
 19 ( 0.00%)  			} else if (comp < 0) {
 57 ( 0.00%)  				new->right = this->root->right;
 19 ( 0.00%)  				new->left = this->root;
 38 ( 0.00%)  				this->root->right = NULL;
  .           				result = 0;
  .           			} else {
  .           				/* We get here if it's already in the tree */
  .           			}
  .           		}
  .           		if (0 == result) {
  .           			/* update the tree root */
 88 ( 0.00%)  			this->root = new;
  .           		}
  .           	}
  .           	/* added OK */
  .           	return result;
220 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c
--------------------------------------------------------------------------------
Ir           

-- line 12 ----------------------------------------
  .           	"clish_script@clish",
  .           	NULL,
  .           	"clish_hook_config@clish",
  .           	"clish_hook_log@clish"
  .           };
  .           
  .           /*----------------------------------------------------------- */
  .           int clish_shell_startup(clish_shell_t *this)
  3 ( 0.00%)  {
  .           	const char *banner;
  .           	clish_context_t context;
  .           
  3 ( 0.00%)  	if (!this->startup) {
  .           		fprintf(stderr, "Error: Can't get valid STARTUP tag.\n");
  .           		return -1;
  .           	}
  .           
  .           	/* Prepare context */
  9 ( 0.00%)  	clish_context_init(&context, this);
645 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_cmd(&context, this->startup);
681 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_action(&context,
689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		clish_command__get_action(this->startup));
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (1x)
  .           
  7 ( 0.00%)  	banner = clish_command__get_detail(this->startup);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	if (banner)
 10 ( 0.00%)  		tinyrl_printf(this->tinyrl, "%s\n", banner);
18,898 ( 0.37%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Call log initialize */
  9 ( 0.00%)  	if (clish_shell__get_log(this))
657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		clish_shell_exec_log(&context, NULL, 0);
  .           	/* Call startup script */
  8 ( 0.00%)  	return clish_shell_execute(&context, NULL);
26,189 ( 0.51%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           void clish_shell__set_startup_view(clish_shell_t *this, const char *viewname)
  .           {
  .           	clish_view_t *view;
  .           
  .           	assert(this);
-- line 51 ----------------------------------------
-- line 70 ----------------------------------------
  .           	assert(this);
  .           	lub_string_free(this->default_shebang);
  .           	this->default_shebang = lub_string_dup(shebang);
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           const char * clish_shell__get_default_shebang(const clish_shell_t *this)
  .           {
  2 ( 0.00%)  	assert(this);
  1 ( 0.00%)  	return this->default_shebang;
  1 ( 0.00%)  }
  .           
  .           
  .           
  .           /*-------------------------------------------------------- */
  .           /* Resolve PTYPE for given PARAM.
  .            */
  .           static clish_ptype_t * resolve_ptype(clish_shell_t *this, clish_param_t *param)
 75 ( 0.00%)  {
  .           	clish_ptype_t *ptype = NULL;
  .           
125 ( 0.00%)  	if (!this || !param)
  .           		return NULL;
  .           
  .           	/* Resolve PARAM's PTYPE */
233 ( 0.00%)  	ptype = clish_shell_find_ptype(this, clish_param__get_ptype_name(param));
6,192 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_ptype (24x)
1,698 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype_name (24x)
 50 ( 0.00%)  	if (!ptype) {
  .           		fprintf(stderr, "Error: Unresolved PTYPE \"%s\" in PARAM \"%s\"\n",
  .           			clish_param__get_ptype_name(param),
  .           			clish_param__get_name(param));
  .           		return NULL;
  .           	}
104 ( 0.00%)  	clish_param__set_ptype(param, ptype);
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype (24x)
104 ( 0.00%)  	clish_param__set_ptype_name(param, NULL); /* Free some memory */
813 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,688 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype_name (24x)
  .           
  .           	return ptype;
125 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* Static recursive function to iterate parameters. Logically it's the
  .            * part of clish_shell_prepare() function.
  .            */
  .           static int iterate_paramv(clish_shell_t *this, clish_paramv_t *paramv,
  .           	clish_hook_access_fn_t *access_fn)
400 ( 0.01%)  {
100 ( 0.00%)  	int i = 0;
  .           	clish_param_t *param;
  .           
522 ( 0.01%)  	while((param = clish_paramv__get_param(paramv, i))) {
673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
214 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (44x)
  .           		clish_paramv_t *nested_paramv;
  .           
  .           		/* Resolve PARAM's PTYPE */
120 ( 0.00%)  		if (!resolve_ptype(this, param))
10,533 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (19x)
  .           			return -1;
  .           
  .           		/* Check access for PARAM */
 48 ( 0.00%)  		if (access_fn && clish_param__get_access(param) &&
  .           			access_fn(this, clish_param__get_access(param))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove PARAM \"%s\"\n",
  .           				clish_param__get_name(param));
  .           #endif
  .           			if (clish_paramv_remove(paramv, i) < 0) {
  .           				fprintf(stderr, "Error: Some system problem\n");
  .           				return -1;
  .           			}
  .           			clish_param_delete(param);
  .           			continue; /* Don't increment index */
  .           		}
  .           		/* Recursive iterate nested PARAMs */
 76 ( 0.00%)  		nested_paramv = clish_param__get_paramv(param);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_paramv (18x)
144 ( 0.00%)  		if (iterate_paramv(this, nested_paramv, access_fn) < 0)
2,728 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 (19x)
  .           			return -1;
 48 ( 0.00%)  		i++;
  .           	}
  .           
 50 ( 0.00%)  	return 0;
300 ( 0.01%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This function prepares schema for execution. It loads
  .            * plugins, link unresolved symbols, then iterates all the
  .            * objects and link them to each other, check access
  .            * permissions. Don't execute clish_shell_startup() without this
  .            * function.
  .            */
  .           int clish_shell_prepare(clish_shell_t *this)
  8 ( 0.00%)  {
  .           	clish_command_t *cmd;
  .           	clish_view_t *view;
  .           	clish_nspace_t *nspace;
  .           	lub_bintree_t *view_tree, *cmd_tree;
  .           	lub_list_t *nspace_tree;
  .           	lub_bintree_iterator_t cmd_iter, view_iter;
  .           	lub_list_node_t *nspace_iter;
  .           	clish_hook_access_fn_t *access_fn = NULL;
  .           	clish_paramv_t *paramv;
  .           	int i = 0;
  .           
  .           	/* Add statically linked plugins */
  4 ( 0.00%)  	while (clish_plugin_builtin_list[i].name) {
  .           		clish_plugin_t *plugin;
  .           		plugin = clish_shell_find_create_plugin(this,
  .           			clish_plugin_builtin_list[i].name);
  .           		clish_plugin_add_init(plugin,
  .           			clish_plugin_builtin_list[i].init);
  .           		clish_plugin__set_builtin_flag(plugin, BOOL_TRUE);
  .           		i++;
  .           	}
  .           
  .           	/* Add default plugin to the list of plugins */
  5 ( 0.00%)  	if (this->default_plugin) {
  9 ( 0.00%)  		clish_shell_find_create_plugin(this, "clish");
3,061 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* Default hooks */
 11 ( 0.00%)  		for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 15 ( 0.00%)  			if (this->hooks_use[i])
  .           				continue;
 20 ( 0.00%)  			if (!clish_plugin_default_hook[i])
  .           				continue;
 18 ( 0.00%)  			clish_sym__set_name(this->hooks[i],
957 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
640 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_name (2x)
  .           				clish_plugin_default_hook[i]);
  .           		}
  .           	}
  .           	/* Add default syms to unresolved table */
 10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 25 ( 0.00%)  		if (clish_sym__get_name(this->hooks[i]))
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (5x)
 17 ( 0.00%)  			lub_list_add(this->syms, this->hooks[i]);
1,234 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (3x)
  .           	}
  .           
  .           	/* Load plugins and link symbols */
  9 ( 0.00%)  	if (clish_shell_load_plugins(this) < 0)
156,032 ( 3.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  9 ( 0.00%)  	if (clish_shell_link_plugins(this) < 0)
9,951 ( 0.20%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  .           
 12 ( 0.00%)  	access_fn = clish_sym__get_func(clish_shell_get_hook(this, CLISH_SYM_TYPE_ACCESS));
648 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (1x)
  .           
  .           	/* Iterate the VIEWs */
  .           	view_tree = &this->view_tree;
  9 ( 0.00%)  	view = lub_bintree_findfirst(view_tree);
1,054 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 23 ( 0.00%)  	for (lub_bintree_iterator_init(&view_iter, view_tree, view);
948 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 20 ( 0.00%)  		view; view = lub_bintree_iterator_next(&view_iter)) {
2,213 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (5x)
  .           		/* Check access rights for the VIEW */
 10 ( 0.00%)  		if (access_fn && clish_view__get_access(view) &&
  .           			access_fn(this, clish_view__get_access(view))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove VIEW \"%s\"\n",
  .           				clish_view__get_name(view));
  .           #endif
  .           			lub_bintree_remove(view_tree, view);
  .           			clish_view_delete(view);
  .           			continue;
  .           		}
  .           
  .           		/* Iterate the NAMESPACEs */
 24 ( 0.00%)  		nspace_tree = clish_view__get_nspace_tree(view);
703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_nspace_tree (4x)
 20 ( 0.00%)  		nspace_iter = lub_list__get_head(nspace_tree);
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
 10 ( 0.00%)  		while(nspace_iter) {
  .           			clish_view_t *ref_view;
  .           			lub_list_node_t *old_nspace_iter;
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(nspace_iter);
  .           			old_nspace_iter = nspace_iter;
  .           			nspace_iter = lub_list_node__get_next(nspace_iter);
  .           			/* Resolve NAMESPACEs and remove unresolved ones */
  .           			ref_view = clish_shell_find_view(this, clish_nspace__get_view_name(nspace));
  .           			if (!ref_view) {
-- line 235 ----------------------------------------
-- line 259 ----------------------------------------
  .           				lub_list_del(nspace_tree, old_nspace_iter);
  .           				lub_list_node_free(old_nspace_iter);
  .           				clish_nspace_delete(nspace);
  .           				continue;
  .           			}
  .           		}
  .           
  .           		/* Iterate the COMMANDs */
 24 ( 0.00%)  		cmd_tree = clish_view__get_command_tree(view);
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_command_tree (4x)
 20 ( 0.00%)  		cmd = lub_bintree_findfirst(cmd_tree);
441 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (5x)
 88 ( 0.00%)  		for (lub_bintree_iterator_init(&cmd_iter, cmd_tree, cmd);
204 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_init.c:lub_bintree_iterator_init (5x)
108 ( 0.00%)  			cmd; cmd = lub_bintree_iterator_next(&cmd_iter)) {
3,573 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
24,271 ( 0.48%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (25x)
108 ( 0.00%)  			int cmd_is_alias = clish_command__get_alias(cmd)?1:0;
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_alias (25x)
  .           			clish_param_t *args = NULL;
  .           
  .           			/* Check access rights for the COMMAND */
 52 ( 0.00%)  			if (access_fn && clish_command__get_access(cmd) &&
  .           				access_fn(this, clish_command__get_access(cmd))) {
  .           #ifdef DEBUG
  .           				fprintf(stderr, "Warning: Access denied. Remove COMMAND \"%s\" from VIEW \"%s\"\n",
  .           					clish_command__get_name(cmd), clish_view__get_name(view));
  .           #endif
  .           				lub_bintree_remove(cmd_tree, cmd);
  .           				clish_command_delete(cmd);
  .           				continue;
  .           			}
  .           
  .           			/* Resolve command aliases */
 52 ( 0.00%)  			if (cmd_is_alias) {
  .           				clish_view_t *aview;
  .           				clish_command_t *cmdref;
 26 ( 0.00%)  				const char *alias_view = clish_command__get_alias_view(cmd);
  .           				if (!alias_view)
  .           					aview = clish_command__get_pview(cmd);
  .           				else
  .           					aview = clish_shell_find_view(this, alias_view);
  .           				if (!aview /* Removed or broken VIEW */
  .           					||
  .           					/* Removed or broken referenced COMMAND */
  .           					!(cmdref = clish_view_find_command(aview, clish_command__get_alias(cmd), BOOL_FALSE))
-- line 298 ----------------------------------------
-- line 328 ----------------------------------------
  .           					lub_bintree_remove(cmd_tree, cmd);
  .           					clish_command_delete(cmd);
  .           					continue;
  .           				}
  .           			}
  .           			if (cmd_is_alias) /* Don't duplicate paramv processing for aliases */
  .           				continue;
  .           			/* Iterate PARAMeters */
 56 ( 0.00%)  			paramv = clish_command__get_paramv(cmd);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (25x)
156 ( 0.00%)  			if (iterate_paramv(this, paramv, access_fn) < 0)
15,978 ( 0.31%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv (26x)
  .           				return -1;
  .           			/* Resolve PTYPE for args */
134 ( 0.00%)  			if ((args = clish_command__get_args(cmd))) {
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (25x)
  5 ( 0.00%)  				if (!resolve_ptype(this, args))
542 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (1x)
  .           					return -1;
  .           			}
  .           		}
  .           	}
  .           
  2 ( 0.00%)  	return 0;
  8 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/view/view.c
--------------------------------------------------------------------------------
Ir           

-- line 17 ----------------------------------------
  .           /*---------------------------------------------------------
  .            * PRIVATE META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_view_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_view_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
141 ( 0.00%)  	return strcmp(this->name, key);
1,684 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (47x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_view_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
  9 ( 0.00%)  {
  .           	const clish_view_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
 40 ( 0.00%)  	strcpy((char *)key, this->name);
1,495 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
182 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (8x)
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
  .           static void clish_view_init(clish_view_t * this, const char *name, const char *prompt)
  .           {
  .           	/* set up defaults */
 20 ( 0.00%)  	this->name = lub_string_dup(name);
838 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
  5 ( 0.00%)  	this->prompt = NULL;
  5 ( 0.00%)  	this->depth = 0;
  5 ( 0.00%)  	this->restore = CLISH_RESTORE_NONE;
  5 ( 0.00%)  	this->access = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 15 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
 25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (5x)
  .           
  .           	/* initialise the tree of commands for this view */
 44 ( 0.00%)  	lub_bintree_init(&this->tree,
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (5x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_offset (4x)
  .           		clish_command_bt_offset(),
  .           		clish_command_bt_compare, clish_command_bt_getkey);
  .           
  .           	/* Initialise the list of namespaces.
  .           	 * It's important to add new items to the
  .           	 * tail of list.
  .           	 */
 20 ( 0.00%)  	this->nspaces = lub_list_new(NULL);
599 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (5x)
  .           
  .           	/* set up the defaults */
 24 ( 0.00%)  	clish_view__set_prompt(this, prompt);
827 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
830 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__set_prompt (4x)
  .           
  .           	/* Initialize hotkey structures */
 19 ( 0.00%)  	this->hotkeys = clish_hotkeyv_new();
734 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
533 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/hotkey/hotkey.c:clish_hotkeyv_new (4x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_view_fini(clish_view_t * this)
  .           {
  .           	clish_command_t *cmd;
  .           	lub_list_node_t *iter;
  .           	clish_nspace_t *nspace;
-- line 75 ----------------------------------------
-- line 103 ----------------------------------------
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           size_t clish_view_bt_offset(void)
  .           {
  .           	return offsetof(clish_view_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_view_t *clish_view_new(const char *name, const char *prompt)
 25 ( 0.00%)  {
 20 ( 0.00%)  	clish_view_t *this = malloc(sizeof(clish_view_t));
1,175 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (5x)
  .           
 10 ( 0.00%)  	if (this)
  .           		clish_view_init(this, name, prompt);
  .           	return this;
 25 ( 0.00%)  }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC METHODS
  .            *--------------------------------------------------------- */
  .           void clish_view_delete(clish_view_t * this)
  .           {
  .           	clish_view_fini(this);
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_view_new_command(clish_view_t * this,
  .           	const char *name, const char *help)
162 ( 0.00%)  {
  .           	/* allocate the memory for a new parameter definition */
 85 ( 0.00%)  	clish_command_t *cmd = clish_command_new(name, help);
35,189 ( 0.69%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_new (26x)
3,605 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 54 ( 0.00%)  	assert(cmd);
  .           
  .           	/* if this is a command other than the startup command... */
 81 ( 0.00%)  	if (NULL != help) {
  .           		/* ...insert it into the binary tree for this view */
156 ( 0.00%)  		if (-1 == lub_bintree_insert(&this->tree, cmd)) {
7,250 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (26x)
  .           			/* inserting a duplicate command is bad */
  .           			clish_command_delete(cmd);
  .           			cmd = NULL;
  .           		}
  .           	}
  .           	return cmd;
135 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* This method identifies the command (if any) which provides
  .            * the longest match with the specified line of text.
  .            *
  .            * NB this comparison is case insensitive.
  .            *
  .            * this - the view instance upon which to operate
-- line 158 ----------------------------------------
-- line 214 ----------------------------------------
  .           	}
  .           
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_view_find_command(clish_view_t * this,
  .           	const char *name, bool_t inherit)
208 ( 0.00%)  {
  .           	clish_command_t *result = NULL;
  .           
  .           	/* Search the current view */
 78 ( 0.00%)  	result = lub_bintree_find(&this->tree, name);
6,736 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (26x)
  .           
 52 ( 0.00%)  	if (inherit) {
  .           		lub_list_node_t *iter;
  .           		clish_command_t *cmd;
  .           		clish_nspace_t *nspace;
  .           
  .           		/* Iterate elements. It's important to iterate
  .           		 * items starting from tail bacause the next
  .           		 * NAMESPACE has higher priority than previous one
  .           		 * in a case then the both NAMESPACEs have the
-- line 236 ----------------------------------------
-- line 241 ----------------------------------------
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
  .           			cmd = clish_nspace_find_command(nspace, name);
  .           			/* Choose the longest match */
  .           			result = clish_command_choose_longest(result, cmd);
  .           		}
  .           	}
  .           
  .           	return result;
182 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const clish_command_t *find_next_completion(clish_view_t * this,
  .           		const char *iter_cmd, const char *line)
  .           {
  .           	clish_command_t *cmd;
  .           	const char *name = "";
  .           	lub_argv_t *largv;
-- line 257 ----------------------------------------
-- line 331 ----------------------------------------
  .           		clish_nspace_clean_proxy((clish_nspace_t *)lub_list_node__get_data(iter));
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC ATTRIBUTES
  .            *--------------------------------------------------------- */
  .           lub_bintree_t * clish_view__get_command_tree(clish_view_t *this)
  5 ( 0.00%)  {
  .           	return &this->tree;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_t * clish_view__get_nspace_tree(clish_view_t *this)
  .           {
  5 ( 0.00%)  	return this->nspaces;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_view__get_name(const clish_view_t * this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_view__set_prompt(clish_view_t * this, const char *prompt)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->prompt);
 20 ( 0.00%)  	this->prompt = lub_string_dup(prompt);
946 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_view__get_prompt(const clish_view_t *this)
  .           {
  .           	return this->prompt;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 368 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/command/command.c
--------------------------------------------------------------------------------
Ir           

-- line 15 ----------------------------------------
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
  .           static void
  .           clish_command_init(clish_command_t *this, const char *name, const char *text)
  .           {
  .           	/* initialise the node part */
108 ( 0.00%)  	this->name = lub_string_dup(name);
5,264 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
108 ( 0.00%)  	this->text = lub_string_dup(text);
5,592 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
  .           
  .           	/* Be a good binary tree citizen */
 81 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
135 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (27x)
  .           
  .           	/* set up defaults */
 27 ( 0.00%)  	this->link = NULL;
 27 ( 0.00%)  	this->alias = NULL;
 27 ( 0.00%)  	this->alias_view = NULL;
 85 ( 0.00%)  	this->paramv = clish_paramv_new();
4,377 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_new (26x)
801 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 27 ( 0.00%)  	this->viewid = NULL;
 27 ( 0.00%)  	this->viewname = NULL;
 85 ( 0.00%)  	this->action = clish_action_new();
4,338 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action_new (26x)
802 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 85 ( 0.00%)  	this->config = clish_config_new();
4,757 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config_new (26x)
808 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 27 ( 0.00%)  	this->detail = NULL;
 27 ( 0.00%)  	this->escape_chars = NULL;
 27 ( 0.00%)  	this->regex_chars = NULL;
 27 ( 0.00%)  	this->args = NULL;
 27 ( 0.00%)  	this->pview = NULL;
 27 ( 0.00%)  	this->lock = BOOL_TRUE;
 27 ( 0.00%)  	this->interrupt = BOOL_FALSE;
 27 ( 0.00%)  	this->dynamic = BOOL_FALSE;
 27 ( 0.00%)  	this->access = NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_command_fini(clish_command_t * this)
  .           {
  .           	lub_string_free(this->name);
  .           	lub_string_free(this->text);
  .           
-- line 54 ----------------------------------------
-- line 74 ----------------------------------------
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           size_t clish_command_bt_offset(void)
  .           {
  .           	return offsetof(clish_command_t, bt_node);
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_command_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_command_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
786 ( 0.02%)  	return lub_string_nocasecmp(this->name, key);
29,199 ( 0.57%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (262x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 47 ( 0.00%)  {
  .           	const clish_command_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
188 ( 0.00%)  	strcpy((char *)key, this->name);
1,024 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (47x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_command_new(const char *name, const char *help)
135 ( 0.00%)  {
108 ( 0.00%)  	clish_command_t *this = malloc(sizeof(clish_command_t));
9,929 ( 0.19%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (27x)
  .           
 54 ( 0.00%)  	if (this)
  .           		clish_command_init(this, name, help);
  .           
  .           	return this;
135 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_command_new_link(const char *name,
  .           	const char *help, const clish_command_t * ref)
  .           {
  .           	if (!ref)
  .           		return NULL;
  .           
-- line 119 ----------------------------------------
-- line 162 ----------------------------------------
  .           {
  .           	clish_command_fini(this);
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command_insert_param(clish_command_t * this, clish_param_t * param)
  .           {
 61 ( 0.00%)  	clish_paramv_insert(this->paramv, param);
3,649 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_insert (18x)
865 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_command_help(const clish_command_t *this)
  .           {
  .           	this = this; /* Happy compiler */
  .           
  .           	return 0;
-- line 178 ----------------------------------------
-- line 226 ----------------------------------------
  .           const char *clish_command__get_text(const clish_command_t * this)
  .           {
  .           	return this->text;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_command__get_detail(const clish_command_t * this)
  .           {
  1 ( 0.00%)  	return this->detail;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_detail(clish_command_t * this, const char *detail)
  4 ( 0.00%)  {
 12 ( 0.00%)  	assert(NULL == this->detail);
 16 ( 0.00%)  	this->detail = lub_string_dup(detail);
2,053 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (4x)
  8 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_action_t *clish_command__get_action(const clish_command_t *this)
  .           {
 23 ( 0.00%)  	return this->action;
 23 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_config_t *clish_command__get_config(const clish_command_t *this)
  .           {
  .           	return this->config;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_viewname(clish_command_t * this, const char *viewname)
  .           {
 18 ( 0.00%)  	assert(NULL == this->viewname);
 22 ( 0.00%)  	clish_command__force_viewname(this, viewname);
1,961 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewname (8x)
985 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__force_viewname(clish_command_t * this, const char *viewname)
 45 ( 0.00%)  {
 27 ( 0.00%)  	if (this->viewname)
  .           		lub_string_free(this->viewname);
 36 ( 0.00%)  	this->viewname = lub_string_dup(viewname);
2,061 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (9x)
 36 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_command__get_viewname(const clish_command_t * this)
  .           {
  .           	return this->viewname;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_viewid(clish_command_t * this, const char *viewid)
  .           {
  6 ( 0.00%)  	assert(NULL == this->viewid);
 10 ( 0.00%)  	clish_command__force_viewid(this, viewid);
1,054 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
463 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewid (2x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__force_viewid(clish_command_t * this, const char *viewid)
 15 ( 0.00%)  {
  9 ( 0.00%)  	if (this->viewid)
  .           		lub_string_free(this->viewid);
 12 ( 0.00%)  	this->viewid = lub_string_dup(viewid);
660 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 12 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_command__get_viewid(const clish_command_t * this)
  .           {
  .           	return this->viewid;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 298 ----------------------------------------
-- line 307 ----------------------------------------
  .           {
  .           	return lub_string_suffix(this->name);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_command__set_escape_chars(clish_command_t * this,
  .           	const char *escape_chars)
  1 ( 0.00%)  {
  3 ( 0.00%)  	assert(!this->escape_chars);
  4 ( 0.00%)  	this->escape_chars = lub_string_dup(escape_chars);
156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_command__get_escape_chars(const clish_command_t * this)
  .           {
  1 ( 0.00%)  	return this->escape_chars;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_regex_chars(clish_command_t *this,
  .           	const char *escape_chars)
  .           {
  .           	assert(!this->regex_chars);
  .           	this->regex_chars = lub_string_dup(escape_chars);
  .           }
-- line 332 ----------------------------------------
-- line 335 ----------------------------------------
  .           const char *clish_command__get_regex_chars(const clish_command_t *this)
  .           {
  .           	return this->regex_chars;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_args(clish_command_t * this, clish_param_t * args)
  .           {
  2 ( 0.00%)  	assert(NULL == this->args);
  2 ( 0.00%)  	this->args = args;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_t *clish_command__get_args(const clish_command_t * this)
  .           {
 26 ( 0.00%)  	return this->args;
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned int clish_command__get_param_count(const clish_command_t * this)
  .           {
  .           	return clish_paramv__get_count(this->paramv);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_paramv_t *clish_command__get_paramv(const clish_command_t * this)
  .           {
 26 ( 0.00%)  	return this->paramv;
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_pview(clish_command_t * this, clish_view_t * view)
  .           {
 52 ( 0.00%)  	this->pview = view;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_view_t *clish_command__get_pview(const clish_command_t * this)
  .           {
  .           	return this->pview;
  .           }
  .           
-- line 376 ----------------------------------------
-- line 380 ----------------------------------------
  .           	if (!this->pview)
  .           		return 0;
  .           	return clish_view__get_depth(this->pview);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_view_restore_e clish_command__get_restore(const clish_command_t * this)
  .           {
  3 ( 0.00%)  	if (!this->pview)
  .           		return CLISH_RESTORE_NONE;
  .           	return clish_view__get_restore(this->pview);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const clish_command_t * clish_command__get_orig(const clish_command_t * this)
  .           {
  .           	if (this->link)
  .           		return clish_command__get_orig(this->link);
  .           	return this;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_command__get_lock(const clish_command_t * this)
  .           {
  1 ( 0.00%)  	return this->lock;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_lock(clish_command_t * this, bool_t lock)
  .           {
 56 ( 0.00%)  	this->lock = lock;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_alias(clish_command_t * this, const char * alias)
  .           {
  .           	if (this->alias)
  .           		lub_string_free(this->alias);
  .           	this->alias = lub_string_dup(alias);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           const char * clish_command__get_alias(const clish_command_t * this)
  .           {
 26 ( 0.00%)  	return this->alias;
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_alias_view(clish_command_t *this,
  .           	const char *alias_view)
  .           {
  .           	if (this->alias_view)
  .           		lub_string_free(this->alias_view);
  .           	this->alias_view = lub_string_dup(alias_view);
-- line 433 ----------------------------------------
-- line 459 ----------------------------------------
  .           	if (this->link)
  .           		return clish_command__get_cmd(this->link);
  .           	return NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_command__get_interrupt(const clish_command_t * this)
  .           {
  1 ( 0.00%)  	return this->interrupt;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_interrupt(clish_command_t * this, bool_t interrupt)
  .           {
 54 ( 0.00%)  	this->interrupt = interrupt;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_access(clish_command_t *this, const char *access)
  5 ( 0.00%)  {
  3 ( 0.00%)  	if (this->access)
  .           		lub_string_free(this->access);
  4 ( 0.00%)  	this->access = lub_string_dup(access);
155 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  4 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_command__get_access(const clish_command_t *this)
  .           {
  .           	return this->access;
  .           }

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c
--------------------------------------------------------------------------------
Ir              

-- line 78 ----------------------------------------
     .            * @param node element to add
     .            * @return new first element of the list
     .            */
     .           static clish_xmlnode_t *clish_expat_list_push_back(clish_xmlnode_t *first, clish_xmlnode_t *node)
     .           {
     .           	clish_xmlnode_t *cur = first;
     .           	clish_xmlnode_t *prev = NULL;
     .           
25,493 ( 0.50%)  	while (cur) {
     .           		prev = cur;
 7,754 ( 0.15%)  		cur = cur->next;
     .           	}
     .           	if (prev) {
   906 ( 0.02%)  		prev->next = node;
     .           		return first;
     .           	}
     .           	return node;
     .           }
     .           
     .           /** Generic add_attr() function
     .            *
     .            * @param first first attribute in the attribute list
-- line 99 ----------------------------------------
-- line 100 ----------------------------------------
     .            * @param n attribute name
     .            * @param v attribute value
     .            * @return the new first attribute in the attribute list
     .            */
     .           static clish_xmlnode_t *clish_expat_add_attr(clish_xmlnode_t *first, const char *n, const char *v)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   868 ( 0.02%)  	node = malloc(sizeof(clish_xmlnode_t));
43,906 ( 0.86%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (217x)
   434 ( 0.01%)  	if (!node)
     .           		return first;
     .           
   868 ( 0.02%)  	node->name = strdup(n);
50,081 ( 0.98%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   868 ( 0.02%)  	node->content = strdup(v);
54,052 ( 1.06%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   217 ( 0.00%)  	node->children = NULL;
   217 ( 0.00%)  	node->attributes = NULL;
   217 ( 0.00%)  	node->next = NULL;
   217 ( 0.00%)  	node->type = CLISH_XMLNODE_ATTR;
   217 ( 0.00%)  	node->depth = 0;
     .           
     .           	return clish_expat_list_push_back(first, node);
     .           }
     .           
     .           /** Run through an expat attribute list, and create a DOM-like attribute list
     .            *
     .            * @param node parent node
     .            * @param attr NULL-terminated attribute liste
-- line 126 ----------------------------------------
-- line 127 ----------------------------------------
     .            *
     .            * Each attribute uses two slots in the expat attribute list. The first one is
     .            * used to store the name, the second one is used to store the value.
     .            */
     .           static void clish_expat_add_attrlist(clish_xmlnode_t *node, const char **attr)
     .           {
     .           	int i;
     .           
 1,173 ( 0.02%)  	for (i = 0; attr[i]; i += 2) {
   434 ( 0.01%)  		node->attributes = clish_expat_add_attr(node->attributes,
     .           			attr[i], attr[i+1]);
     .           	}
     .           }
     .           
     .           /** Generic make_node() function
     .            *
     .            * @param parent XML parent node
     .            * @param type XML node type
-- line 144 ----------------------------------------
-- line 147 ----------------------------------------
     .            * @param attr attribute list
     .            * @return a new node or NULL on error
     .            */
     .           static clish_xmlnode_t *clish_expat_make_node(clish_xmlnode_t *parent,
     .           					      clish_xmlnodetype_e type,
     .           					      const char *n,
     .           					      const char *v,
     .           					      const char **attr)
 7,428 ( 0.15%)  {
     .           	clish_xmlnode_t *node;
     .           
 2,476 ( 0.05%)  	node = malloc(sizeof(clish_xmlnode_t));
122,625 ( 2.41%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (619x)
 1,238 ( 0.02%)  	if (!node)
     .           		return NULL;
 2,770 ( 0.05%)  	node->name = n ? strdup(n) : NULL;
18,520 ( 0.36%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (98x)
 4,039 ( 0.08%)  	node->content = v ? strdup(v) : NULL;
127,644 ( 2.51%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (521x)
   619 ( 0.01%)  	node->children = NULL;
   619 ( 0.01%)  	node->attributes = NULL;
   619 ( 0.01%)  	node->next = NULL;
 1,238 ( 0.02%)  	node->parent = parent;
 3,085 ( 0.06%)  	node->doc = parent ? parent->doc : NULL;
 2,446 ( 0.05%)  	node->depth = parent ? parent->depth + 1 : 0;
   619 ( 0.01%)  	node->type = type;
     .           
 1,238 ( 0.02%)  	if (attr)
     .           		clish_expat_add_attrlist(node, attr);
     .           
   152 ( 0.00%)  	if (parent)
 2,436 ( 0.05%)  		parent->children = clish_expat_list_push_back(parent->children, node);
     .           
     .           	return node;
 5,571 ( 0.11%)  }
     .           
     .           /** Add a new XML root
     .            *
     .            * @param doc XML document
     .            * @param el root node name
     .            * @param attr expat attribute list
     .            * @return a new root element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_root(clish_xmldoc_t *doc, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   314 ( 0.01%)  	node = clish_expat_make_node(NULL, CLISH_XMLNODE_ELM, el, NULL, attr);
25,689 ( 0.50%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (10x)
    20 ( 0.00%)  	if (!node)
     .           		return doc->root;
     .           
    30 ( 0.00%)  	doc->root = clish_expat_list_push_back(doc->root, node);
     .           
     .           	return node;
     .           }
     .           
     .           /** Add a new XML element as a child
     .            *
     .            * @param cur parent XML element
     .            * @param el element name
     .            * @param attr expat attribute list
     .            * @return a new XMl element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_child(clish_xmlnode_t *cur, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   176 ( 0.00%)  	node = clish_expat_make_node(cur, CLISH_XMLNODE_ELM, el, NULL, attr);
176,525 ( 3.47%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (88x)
   176 ( 0.00%)  	if (!node)
     .           		return cur;
     .           
     .           	return node;
     .           }
     .           
     .           /** Expat handler: element content
     .            *
     .            * @param data user data
     .            * @param s content (not nul-termainated)
     .            * @param len content length
     .            */
     .           static void clish_expat_chardata_handler(void *data, const char *s, int len)
 2,605 ( 0.05%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
 2,605 ( 0.05%)  	if (doc->current) {
 2,605 ( 0.05%)  		char *content = malloc(len + 1);
67,724 ( 1.33%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (521x)
 2,609 ( 0.05%)  		strncpy(content, s, len);
18,137 ( 0.36%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (520x)
 1,541 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   521 ( 0.01%)  		content[len] = '\0';
     .           
 3,126 ( 0.06%)  		clish_expat_make_node(doc->current, CLISH_XMLNODE_TEXT, NULL, content, NULL);
291,048 ( 5.72%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (521x)
     .           		/*
     .           		 * the previous call is a bit too generic, and strdup() content
     .           		 * so we need to free out own version of content.
     .           		 */
 1,567 ( 0.03%)  		free(content);
45,760 ( 0.90%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (520x)
 1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           	}
 2,605 ( 0.05%)  }
     .           
     .           /** Expat handler: start XML element
     .            *
     .            * @param data user data
     .            * @param el element name (nul-terminated)
     .            * @param attr expat attribute list
     .            */
     .           static void clish_expat_element_start(void *data, const char *el, const char **attr)
   490 ( 0.01%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (!doc->current) {
     .           		doc->current = clish_expat_add_root(doc, el, attr);
     .           	} else {
    98 ( 0.00%)  		doc->current = clish_expat_add_child(doc->current, el, attr);
     .           	}
   392 ( 0.01%)  }
     .           
     .           /** Expat handler: end XML element
     .            *
     .            * @param data user data
     .            * @param el element name
     .            */
     .           static void clish_expat_element_end(void *data, const char *el)
     .           {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (doc->current) {
   294 ( 0.01%)  		doc->current = doc->current->parent;
     .           	}
     .           
     .           	el = el; /* Happy compiler */
     .           }
     .           
     .           /** Free a node, its children and its attributes
     .            *
     .            * @param node node to free
     .            */
     .           static void clish_expat_free_node(clish_xmlnode_t *cur)
 3,344 ( 0.07%)  {
     .           	clish_xmlnode_t *node;
     .           	clish_xmlnode_t *first;
     .           
 2,584 ( 0.05%)  	if (cur->attributes) {
     .           		first = cur->attributes;
   651 ( 0.01%)  		while (first) {
     .           			node = first;
   217 ( 0.00%)  			first = first->next;
   217 ( 0.00%)  			clish_expat_free_node(node);
 8,729 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (30x)
     .           		}
     .           	}
 2,569 ( 0.05%)  	if (cur->children) {
     .           		first = cur->children;
 1,827 ( 0.04%)  		while (first) {
     .           			node = first;
   609 ( 0.01%)  			first = first->next;
   609 ( 0.01%)  			clish_expat_free_node(node);
179,286 ( 3.52%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (174x)
     .           		}
     .           	}
 2,508 ( 0.05%)  	if (cur->name)
   630 ( 0.01%)  		free(cur->name);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.05%)  	if (cur->content)
 1,476 ( 0.03%)  		free(cur->content);
65,002 ( 1.28%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (738x)
 2,508 ( 0.05%)  	free(cur);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.05%)  }
     .           
     .           /*
     .            * Public interface
     .            */
     .           
     .           int clish_xmldoc_start(void)
     .           {
     .           	return 0;
-- line 313 ----------------------------------------
-- line 314 ----------------------------------------
     .           }
     .           
     .           int clish_xmldoc_stop(void)
     .           {
     .           	return 0;
     .           }
     .           
     .           clish_xmldoc_t *clish_xmldoc_read(const char *filename)
    70 ( 0.00%)  {
     .           	clish_xmldoc_t *doc;
     .           	struct stat sb;
     .           	int fd;
     .           	char *buffer;
     .           	XML_Parser parser;
     .           	int rb;
     .           
    54 ( 0.00%)  	doc = malloc(sizeof(clish_xmldoc_t));
 1,728 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,269 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc (9x)
    20 ( 0.00%)  	if (!doc)
     .           		return NULL;
     .           	memset(doc, 0, sizeof(clish_xmldoc_t));
    44 ( 0.00%)  	doc->filename = strdup(filename);
 1,751 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,935 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (9x)
    44 ( 0.00%)  	parser = XML_ParserCreate(NULL);
 2,156 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
95,702 ( 1.88%)  => ???:XML_ParserCreate (9x)
    20 ( 0.00%)  	if (!parser)
     .           		goto error_parser_create;
    44 ( 0.00%)  	XML_SetUserData(parser, doc);
   949 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    54 ( 0.00%)  => ???:XML_SetUserData (9x)
    44 ( 0.00%)  	XML_SetCharacterDataHandler(parser, clish_expat_chardata_handler);
 1,060 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    18 ( 0.00%)  => ???:XML_SetCharacterDataHandler (9x)
    54 ( 0.00%)  	XML_SetElementHandler(parser,
 1,011 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    27 ( 0.00%)  => ???:XML_SetElementHandler (9x)
     .           		clish_expat_element_start,
     .           		clish_expat_element_end);
     .           
    64 ( 0.00%)  	fd = open(filename, O_RDONLY);
 1,430 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:open (9x)
    20 ( 0.00%)  	if (fd < 0)
     .           		goto error_open;
     .           	fstat(fd, &sb);
    50 ( 0.00%)  	buffer = malloc(sb.st_size+1);
 2,926 ( 0.06%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (10x)
    54 ( 0.00%)  	rb = read(fd, buffer, sb.st_size);
 1,446 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (9x)
    20 ( 0.00%)  	if (rb < 0) {
     .           		close(fd);
     .           		goto error_parse;
     .           	}
    20 ( 0.00%)  	buffer[sb.st_size] = 0;
    34 ( 0.00%)  	close(fd);
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:close (9x)
     .           
    84 ( 0.00%)  	if (!XML_Parse(parser, buffer, sb.st_size, 1))
1,305,655 (25.64%)  => ???:XML_Parse (9x)
112,859 ( 2.22%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           		goto error_parse;
     .           
    34 ( 0.00%)  	XML_ParserFree(parser);
 6,192 ( 0.12%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
46,686 ( 0.92%)  => ???:XML_ParserFree (9x)
    30 ( 0.00%)  	free(buffer);
 1,344 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           
     .           	return doc;
     .           
     .           error_parse:
     .           	free(buffer);
     .           
     .           error_open:
     .           	XML_ParserFree(parser);
     .           
     .           error_parser_create:
     .           	clish_xmldoc_release(doc);
     .           
     .           	return NULL;
    80 ( 0.00%)  }
     .           
     .           void clish_xmldoc_release(clish_xmldoc_t *doc)
    20 ( 0.00%)  {
    20 ( 0.00%)  	if (doc) {
     .           		clish_xmlnode_t *node;
    70 ( 0.00%)  		while (doc->root) {
     .           			node = doc->root;
    20 ( 0.00%)  			doc->root = node->next;
    10 ( 0.00%)  			clish_expat_free_node(node);
191,055 ( 3.75%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node (10x)
     .           		}
    30 ( 0.00%)  		if (doc->filename)
    20 ( 0.00%)  			free(doc->filename);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
    30 ( 0.00%)  		free(doc);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           	}
    10 ( 0.00%)  }
     .           
     .           int clish_xmldoc_is_valid(clish_xmldoc_t *doc)
     .           {
    53 ( 0.00%)  	return doc && doc->root;
    12 ( 0.00%)  }
     .           
     .           int clish_xmldoc_error_caps(clish_xmldoc_t *doc)
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return CLISH_XMLERR_NOCAPS;
     .           }
     .           
-- line 403 ----------------------------------------
-- line 419 ----------------------------------------
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return "";
     .           }
     .           
     .           int clish_xmlnode_get_type(clish_xmlnode_t *node)
     .           {
 1,281 ( 0.03%)  	if (node)
   427 ( 0.01%)  		return node->type;
     .           	return CLISH_XMLNODE_UNKNOWN;
   427 ( 0.01%)  }
     .           
     .           clish_xmlnode_t *clish_xmldoc_get_root(clish_xmldoc_t *doc)
     .           {
    20 ( 0.00%)  	if (doc)
    20 ( 0.00%)  		return doc->root;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_parent(clish_xmlnode_t *node)
     .           {
    80 ( 0.00%)  	if (node)
    80 ( 0.00%)  		return node->parent;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_next_child(clish_xmlnode_t *parent,
     .           					  clish_xmlnode_t *curchild)
     .           {
   956 ( 0.02%)  	if (curchild)
   834 ( 0.02%)  		return curchild->next;
   122 ( 0.00%)  	if (parent)
   122 ( 0.00%)  		return parent->children;
     .           	return NULL;
     .           }
     .           
     .           char *clish_xmlnode_fetch_attr(clish_xmlnode_t *node,
     .           			       const char *attrname)
 2,648 ( 0.05%)  {
 1,324 ( 0.03%)  	if (node) {
   662 ( 0.01%)  		clish_xmlnode_t *n = node->attributes;
 4,292 ( 0.08%)  		while (n) {
 9,924 ( 0.19%)  			if (strcmp(n->name, attrname) == 0)
32,888 ( 0.65%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (1,654x)
   187 ( 0.00%)  				return n->content;
 1,467 ( 0.03%)  			n = n->next;
     .           		}
     .           	}
   475 ( 0.01%)  	return NULL;
 2,648 ( 0.05%)  }
     .           
     .           int clish_xmlnode_get_content(clish_xmlnode_t *node, char *content,
     .           			      unsigned int *contentlen)
   182 ( 0.00%)  {
     .           	unsigned int minlen = 1;
     .           
   208 ( 0.00%)  	if (node && content && contentlen) {
    26 ( 0.00%)  		clish_xmlnode_t *children = node->children;
   505 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   576 ( 0.01%)  				minlen += strlen(children->content);
 5,114 ( 0.10%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (192x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    52 ( 0.00%)  		if (minlen >= *contentlen) {
     .           			*contentlen = minlen + 1;
     .           			return -E2BIG;
     .           		}
     .           		children = node->children;
    52 ( 0.00%)  		*content = 0;
   407 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   580 ( 0.01%)  				strcat(content, children->content);
29,395 ( 0.58%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned (191x)
 1,492 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    26 ( 0.00%)  		return 0;
     .           	}
     .           
     .           	return -EINVAL;
   156 ( 0.00%)  }
     .           
     .           int clish_xmlnode_get_name(clish_xmlnode_t *node, char *name,
     .           	unsigned int *namelen)
   552 ( 0.01%)  {
 1,104 ( 0.02%)  	if (node && name && namelen) {
 1,108 ( 0.02%)  		if (strlen(node->name) >= *namelen) {
 2,192 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (137x)
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			*namelen = strlen(node->name) + 1;
     .           			return -E2BIG;
     .           		}
   828 ( 0.02%)  		snprintf(name, *namelen, "%s", node->name);
72,205 ( 1.42%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (138x)
   414 ( 0.01%)  		name[*namelen - 1] = '\0';
   138 ( 0.00%)  		return 0;
     .           	}
     .           	return -EINVAL;
   552 ( 0.01%)  }
     .           
     .           void clish_xmlnode_print(clish_xmlnode_t *node, FILE *out)
     .           {
     .           	if (node) {
     .           		int i;
     .           		clish_xmlnode_t *a;
     .           		for (i=0; i<node->depth; ++i) {
     .           			fprintf(out, "  ");
-- line 520 ----------------------------------------
-- line 525 ----------------------------------------
     .           			fprintf(out, " %s='%s'", a->name, a->content);
     .           			a = a->next;
     .           		}
     .           		fprintf(out, ">...");
     .           	}
     .           }
     .           
     .           void clish_xml_release(void *p)
   661 ( 0.01%)  {
     .           	p = p; /* Happy compiler */
     .           	/* nothing to release */
     .           }
     .           
     .           #endif /* HAVE_LIB_EXPAT */
     .           

--------------------------------------------------------------------------------
The following files chosen for auto-annotation could not be found:
--------------------------------------------------------------------------------
  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h
  /opt/build/glibc/glibc-2.24/elf/./dl-map-segments.h
  /opt/build/glibc/glibc-2.24/elf/dl-addr.c
  /opt/build/glibc/glibc-2.24/elf/dl-cache.c
  /opt/build/glibc/glibc-2.24/elf/dl-deps.c
  /opt/build/glibc/glibc-2.24/elf/dl-error.c
  /opt/build/glibc/glibc-2.24/elf/dl-load.c
  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c
  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c
  /opt/build/glibc/glibc-2.24/elf/dl-misc.c
  /opt/build/glibc/glibc-2.24/elf/dl-object.c
  /opt/build/glibc/glibc-2.24/elf/dl-profstub.c
  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c
  /opt/build/glibc/glibc-2.24/elf/dl-version.c
  /opt/build/glibc/glibc-2.24/elf/do-rel.h
  /opt/build/glibc/glibc-2.24/elf/get-dynamic-info.h
  /opt/build/glibc/glibc-2.24/elf/rtld.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c
  /opt/build/glibc/glibc-2.24/iconv/gconv_simple.c
  /opt/build/glibc/glibc-2.24/libio/fileops.c
  /opt/build/glibc/glibc-2.24/libio/genops.c
  /opt/build/glibc/glibc-2.24/libio/iogetline.c
  /opt/build/glibc/glibc-2.24/libio/libioP.h
  /opt/build/glibc/glibc-2.24/libio/strops.c
  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c
  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c
  /opt/build/glibc/glibc-2.24/locale/findlocale.c
  /opt/build/glibc/glibc-2.24/locale/loadarchive.c
  /opt/build/glibc/glibc-2.24/locale/loadlocale.c
  /opt/build/glibc/glibc-2.24/locale/setlocale.c
  /opt/build/glibc/glibc-2.24/malloc/malloc.c
  /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/sysv/linux/wordsize-64/mmap.c
  /opt/build/glibc/glibc-2.24/posix/regcomp.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.h
  /opt/build/glibc/glibc-2.24/setjmp/../sysdeps/x86_64/setjmp.S
  /opt/build/glibc/glibc-2.24/stdio-common/../libio/libioP.h
  /opt/build/glibc/glibc-2.24/stdio-common/printf-parse.h
  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfscanf.c
  /opt/build/glibc/glibc-2.24/stdlib/../stdlib/strtol_l.c
  /opt/build/glibc/glibc-2.24/stdlib/getenv.c
  /opt/build/glibc/glibc-2.24/string/../bits/stdlib-bsearch.h
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86/cacheinfo.c
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/memchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../memcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/memcmp-sse4.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S
  /opt/build/glibc/glibc-2.24/string/strdup.c
  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h
  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c
  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c
  /opt/build/glibc/glibc-2.24/wctype/wcfuncs.c

--------------------------------------------------------------------------------
Ir               
--------------------------------------------------------------------------------
280,347 ( 5.51%)  events annotated

