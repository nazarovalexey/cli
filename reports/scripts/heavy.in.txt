--------------------------------------------------------------------------------
Profile data file '../heavy/callgrind.out.2003' (creator: callgrind-3.13.0)
--------------------------------------------------------------------------------
I1 cache: 
D1 cache: 
LL cache: 
Timerange: Basic block 0 - 1547562
Trigger: Program termination
Profiled target:  ./clish -x ../../xml-examples/clish (PID 2003, part 1)
Events recorded:  Ir
Events shown:     Ir
Event sort order: Ir
Thresholds:       99
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir                 
--------------------------------------------------------------------------------
6,562,502 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir                  file:function
--------------------------------------------------------------------------------
6,562,502 (100.0%)  ???:0x0000000000000c20 [/lib/x86_64-linux-gnu/ld-2.24.so]
6,286,784 (95.80%)  ???:_start [/home/ykuznetsov/klish-2.1.3/bin/.libs/clish]
6,286,773 (95.80%)  /opt/build/glibc/glibc-2.24/csu/../csu/libc-start.c:(below main) [/lib/x86_64-linux-gnu/libc-2.24.so]
6,283,436 (95.75%)  /home/ykuznetsov/klish-2.1.3/bin/clish.c:main [/home/ykuznetsov/klish-2.1.3/bin/.libs/clish]
6,282,125 (95.73%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave [/lib/x86_64-linux-gnu/ld-2.24.so]
4,172,561 (63.58%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:clish_shell_load_scheme [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
3,863,990 (58.88%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
2,999,104 (45.70%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,361,179 (35.98%)  /usr/include/x86_64-linux-gnu/bits/string2.h:clish_shell_load_scheme
2,360,995 (35.98%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,350,698 (35.82%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,345,328 (35.74%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,088,343 (31.82%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,078,886 (31.68%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,064,951 (31.47%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,986,989 (30.28%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp [/lib/x86_64-linux-gnu/libc-2.24.so]
1,804,763 (27.50%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,586,801 (24.18%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,414,464 (21.55%)  ???:XML_Parse [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,402,060 (21.36%)  ???:XML_ParseBuffer [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,401,630 (21.36%)  ???:0x000000000000b4f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,395,360 (21.26%)  ???:0x00000000000094a0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,352,120 (20.60%)  ???:0x0000000000009440 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,351,830 (20.60%)  ???:0x0000000000008190 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,245,823 (18.98%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_loop.c:clish_shell_loop [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,240,712 (18.91%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_readline [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,240,703 (18.91%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_execline [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,183,944 (18.04%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_readline [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
1,183,938 (18.04%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:internal_readline [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
1,100,831 (16.77%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap [/lib/x86_64-linux-gnu/libc-2.24.so]
1,100,236 (16.77%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap_iter.isra.24 [/lib/x86_64-linux-gnu/libc-2.24.so]
1,034,154 (15.76%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
1,013,962 (15.45%)  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c:mbrtowc [/lib/x86_64-linux-gnu/libc-2.24.so]
  942,196 (14.36%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_do_complete [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  911,852 (13.89%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_tab [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  910,480 (13.87%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_complete_with_extensions [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  883,716 (13.47%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  836,730 (12.75%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_completion [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  802,023 (12.22%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  800,259 (12.19%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  797,126 (12.15%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  773,185 (11.78%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  665,688 (10.14%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  590,799 ( 9.00%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c:__gconv_transform_utf8_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  569,591 ( 8.68%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_find_next_completion [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  569,571 ( 8.68%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:_dl_lookup_symbol_x [/lib/x86_64-linux-gnu/ld-2.24.so]
  558,218 ( 8.51%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_next_completion [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  511,211 ( 7.79%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp [/lib/x86_64-linux-gnu/libc-2.24.so]
  510,924 ( 7.79%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch [/lib/x86_64-linux-gnu/libc-2.24.so]
  509,636 ( 7.77%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression [/lib/x86_64-linux-gnu/libc-2.24.so]
  493,174 ( 7.52%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  484,989 ( 7.39%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:free [/lib/x86_64-linux-gnu/libc-2.24.so]
  472,837 ( 7.21%)  ???:0x0000000005686930 [???]
  460,448 ( 7.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  442,436 ( 6.74%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_chardata_handler [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  416,130 ( 6.34%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  410,940 ( 6.26%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:do_lookup_x [/lib/x86_64-linux-gnu/ld-2.24.so]
  400,032 ( 6.10%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_free [/lib/x86_64-linux-gnu/libc-2.24.so]
  380,968 ( 5.81%)  ???:0x0000000000007580 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  375,660 ( 5.72%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c:_dl_fixup [/lib/x86_64-linux-gnu/ld-2.24.so]
  369,460 ( 5.63%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  369,045 ( 5.62%)  /opt/build/glibc/glibc-2.24/string/strdup.c:strdup [/lib/x86_64-linux-gnu/libc-2.24.so]
  364,704 ( 5.56%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  362,613 ( 5.53%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  326,615 ( 4.98%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  302,485 ( 4.61%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_view [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  288,347 ( 4.39%)  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c:_dl_relocate_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  272,383 ( 4.15%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:_dl_start [/lib/x86_64-linux-gnu/ld-2.24.so]
  271,740 ( 4.14%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-sysdep.c:_dl_sysdep_start [/lib/x86_64-linux-gnu/ld-2.24.so]
  271,064 ( 4.13%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:dl_main [/lib/x86_64-linux-gnu/ld-2.24.so]
  265,724 ( 4.05%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h:_dl_relocate_object
  248,633 ( 3.79%)  ???:0x0000000000013e60 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  240,090 ( 3.66%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_param [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  226,618 ( 3.45%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:clish_shell_prepare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  220,638 ( 3.36%)  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
  204,780 ( 3.12%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_element_start [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  197,624 ( 3.01%)  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c:btowc [/lib/x86_64-linux-gnu/libc-2.24.so]
  193,016 ( 2.94%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  192,211 ( 2.93%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  191,629 ( 2.92%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_delete [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  191,280 ( 2.91%)  /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  191,026 ( 2.91%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  190,544 ( 2.90%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_init [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  188,622 ( 2.87%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error [/lib/x86_64-linux-gnu/ld-2.24.so]
  173,442 ( 2.64%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  172,879 ( 2.63%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c:__gconv_transform_utf8_internal
  156,580 ( 2.39%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
  156,489 ( 2.38%)  /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_vprintf [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  155,138 ( 2.36%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_load_plugins [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  155,102 ( 2.36%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  154,475 ( 2.35%)  /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_load [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  145,340 ( 2.21%)  /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  145,295 ( 2.21%)  ???:0x000000000000f290 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  140,057 ( 2.13%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  137,369 ( 2.09%)  /opt/build/glibc/glibc-2.24/dlfcn/dlerror.c:_dlerror_run [/lib/x86_64-linux-gnu/libdl-2.24.so]
  134,380 ( 2.05%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_resolve_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  132,314 ( 2.02%)  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c:dlopen@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,193 ( 2.01%)  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c:dlopen_doit [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,164 ( 2.01%)  /opt/build/glibc/glibc-2.24/elf/dl-open.c:_dl_open [/lib/x86_64-linux-gnu/ld-2.24.so]
  132,022 ( 2.01%)  /opt/build/glibc/glibc-2.24/elf/dl-open.c:dl_open_worker [/lib/x86_64-linux-gnu/ld-2.24.so]
  131,317 ( 2.00%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  127,769 ( 1.95%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter [/lib/x86_64-linux-gnu/libc-2.24.so]
  126,609 ( 1.93%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_prefix [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  125,332 ( 1.91%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  125,305 ( 1.91%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  121,318 ( 1.85%)  /opt/build/glibc/glibc-2.24/elf/dl-misc.c:_dl_name_match_p [/lib/x86_64-linux-gnu/ld-2.24.so]
  113,193 ( 1.72%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:strcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  108,808 ( 1.66%)  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c:__collseq_table_lookup [/lib/x86_64-linux-gnu/libc-2.24.so]
  101,318 ( 1.54%)  ???:0x000000000001a2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   97,234 ( 1.48%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_delete [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   97,036 ( 1.48%)  ???:XML_ParserCreate [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   97,006 ( 1.48%)  ???:XML_ParserCreate_MM [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   92,591 ( 1.41%)  /opt/build/glibc/glibc-2.24/locale/setlocale.c:setlocale [/lib/x86_64-linux-gnu/libc-2.24.so]
   92,097 ( 1.40%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_consolidate [/lib/x86_64-linux-gnu/libc-2.24.so]
   90,949 ( 1.39%)  ???:0x0000000000004c30 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   89,755 ( 1.37%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
   87,439 ( 1.33%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:regfree [/lib/x86_64-linux-gnu/libc-2.24.so]
   86,906 ( 1.32%)  /opt/build/glibc/glibc-2.24/locale/findlocale.c:_nl_find_locale [/lib/x86_64-linux-gnu/libc-2.24.so]
   86,862 ( 1.32%)  ???:0x0000000000004cb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   86,334 ( 1.32%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:free_dfa_content [/lib/x86_64-linux-gnu/libc-2.24.so]
   84,985 ( 1.30%)  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
   84,771 ( 1.29%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:_dl_map_object_deps [/lib/x86_64-linux-gnu/ld-2.24.so]
   82,441 ( 1.26%)  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c:vsnprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
   80,590 ( 1.23%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   78,290 ( 1.19%)  ???:0x0000000005686938 [???]
   77,140 ( 1.18%)  ???:0x0000000000005570 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   76,665 ( 1.17%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object [/lib/x86_64-linux-gnu/ld-2.24.so]
   72,941 ( 1.11%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_compile_internal
   72,620 ( 1.11%)  /opt/build/glibc/glibc-2.24/locale/loadarchive.c:_nl_load_locale_from_archive [/lib/x86_64-linux-gnu/libc-2.24.so]
   70,629 ( 1.08%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:openaux [/lib/x86_64-linux-gnu/ld-2.24.so]
   69,447 ( 1.06%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_action [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   69,014 ( 1.05%)  ???:0x0000000000005130 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   68,998 ( 1.05%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen [/lib/x86_64-linux-gnu/libc-2.24.so]
   67,751 ( 1.03%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
   67,663 ( 1.03%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
   64,649 ( 0.99%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:clish_shell_startup [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/bin/clish.c
--------------------------------------------------------------------------------
Ir          

-- line 43 ----------------------------------------
 .           /* #define version(v) printf("%s\n", QUOTE(v)) */
 .           #define version(v) printf("%s\n", v)
 .           
 .           static void sighandler(int signo);
 .           static void help(int status, const char *argv0);
 .           
 .           /*--------------------------------------------------------- */
 .           int main(int argc, char **argv)
 9 ( 0.00%)  {
 .           	int running;
 .           	int result = -1;
 .           	clish_shell_t *shell = NULL;
 .           
 .           	/* Command line options */
 2 ( 0.00%)  	const char *socket_path = KONFD_SOCKET_PATH;
 1 ( 0.00%)  	bool_t lockless = BOOL_FALSE;
 1 ( 0.00%)  	bool_t stop_on_error = BOOL_FALSE;
 1 ( 0.00%)  	bool_t interactive = BOOL_TRUE;
 1 ( 0.00%)  	bool_t quiet = BOOL_FALSE;
 1 ( 0.00%)  	bool_t utf8 = BOOL_FALSE;
 1 ( 0.00%)  	bool_t bit8 = BOOL_FALSE;
 1 ( 0.00%)  	bool_t log = BOOL_FALSE;
 1 ( 0.00%)  	int log_facility = LOG_LOCAL0;
 1 ( 0.00%)  	bool_t dryrun = BOOL_FALSE;
 1 ( 0.00%)  	bool_t dryrun_config = BOOL_FALSE;
 8 ( 0.00%)  	const char *xml_path = getenv("CLISH_PATH");
1,913 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 4 ( 0.00%)  	const char *view = getenv("CLISH_VIEW");
380 ( 0.01%)  => /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv (1x)
 4 ( 0.00%)  	const char *viewid = getenv("CLISH_VIEWID");
380 ( 0.01%)  => /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv (1x)
 .           	const char *xslt_file = NULL;
 .           
 2 ( 0.00%)  	FILE *outfd = stdout;
 1 ( 0.00%)  	bool_t istimeout = BOOL_FALSE;
 1 ( 0.00%)  	unsigned int timeout = 0;
 1 ( 0.00%)  	bool_t cmd = BOOL_FALSE; /* -c option */
 .           	lub_list_t *cmds; /* Commands defined by -c */
 .           	lub_list_node_t *iter;
 2 ( 0.00%)  	const char *histfile = "~/.clish_history";
 .           	char *histfile_expanded = NULL;
 1 ( 0.00%)  	unsigned int histsize = 50;
 .           	clish_sym_t *sym = NULL;
 .           
 .           	/* Signal vars */
 .           	struct sigaction sigpipe_act;
 .           	sigset_t sigpipe_set;
 .           
 .           	static const char *shortopts = "hvs:ledx:w:i:bqu8oO:kt:c:f:z:p:";
 .           #ifdef HAVE_GETOPT_LONG
-- line 89 ----------------------------------------
-- line 109 ----------------------------------------
 .           		{"histfile",	1, NULL, 'f'},
 .           		{"histsize",	1, NULL, 'z'},
 .           		{"xslt",	1, NULL, 'p'},
 .           		{NULL,		0, NULL, 0}
 .           	};
 .           #endif
 .           
 .           	/* Ignore SIGPIPE */
 8 ( 0.00%)  	sigemptyset(&sigpipe_set);
1,626 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 8 ( 0.00%)  	sigaddset(&sigpipe_set, SIGPIPE);
1,589 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 1 ( 0.00%)  	sigpipe_act.sa_flags = 0;
32 ( 0.00%)  	sigpipe_act.sa_mask = sigpipe_set;
 2 ( 0.00%)  	sigpipe_act.sa_handler = &sighandler;
 9 ( 0.00%)  	sigaction(SIGPIPE, &sigpipe_act, NULL);
1,622 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           #if HAVE_LOCALE_H
 .           	/* Set current locale */
 8 ( 0.00%)  	setlocale(LC_ALL, "");
94,116 ( 1.43%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           #endif
 .           
 .           	/* Var initialization */
 8 ( 0.00%)  	cmds = lub_list_new(NULL);
2,408 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           	/* Parse command line options */
 .           	while(1) {
 .           		int opt;
 .           #ifdef HAVE_GETOPT_LONG
18 ( 0.00%)  		opt = getopt_long(argc, argv, shortopts, longopts, NULL);
2,245 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
109 ( 0.00%)  => /opt/build/glibc/glibc-2.24/posix/getopt1.c:getopt_long (1x)
 .           #else
 .           		opt = getopt(argc, argv, shortopts);
 .           #endif
 4 ( 0.00%)  		if (-1 == opt)
 .           			break;
 7 ( 0.00%)  		switch (opt) {
 .           		case 's':
 .           			socket_path = optarg;
 .           			break;
 .           		case 'l':
 .           			lockless = BOOL_TRUE;
 .           			break;
 .           		case 'e':
 .           			stop_on_error = BOOL_TRUE;
-- line 150 ----------------------------------------
-- line 160 ----------------------------------------
 .           			break;
 .           		case '8':
 .           			bit8 = BOOL_TRUE;
 .           			break;
 .           		case 'o':
 .           			log = BOOL_TRUE;
 .           			break;
 .           		case 'O':
 3 ( 0.00%)  			if (lub_log_facility(optarg, &log_facility)) {
 .           				fprintf(stderr, "Error: Illegal syslog facility %s.\n", optarg);
 .           				help(-1, argv[0]);
 .           				goto end;
 .           			}
 .           			break;
 .           		case 'd':
 .           			dryrun = BOOL_TRUE;
 .           			break;
 .           		case 'x':
 2 ( 0.00%)  			xml_path = optarg;
 1 ( 0.00%)  			break;
 .           		case 'w':
 .           			view = optarg;
 .           			break;
 .           		case 'i':
 .           			viewid = optarg;
 .           			break;
 .           		case 'k':
 .           			lockless = BOOL_TRUE;
 .           			dryrun = BOOL_TRUE;
 .           			dryrun_config = BOOL_TRUE;
 .           			break;
 .           		case 't':
 .           			istimeout = BOOL_TRUE;
 .           			timeout = 0;
 2 ( 0.00%)  			lub_conv_atoui(optarg, &timeout, 0);
 .           			break;
 .           		case 'c': {
 .           			char *str;
 .           			cmd = BOOL_TRUE;
 .           			quiet = BOOL_TRUE;
 .           			str = strdup(optarg);
 .           			lub_list_add(cmds, str);
 .           			}
-- line 202 ----------------------------------------
-- line 204 ----------------------------------------
 .           		case 'f':
 .           			if (!strcmp(optarg, "/dev/null"))
 .           				histfile = NULL;
 .           			else
 .           				histfile = optarg;
 .           			break;
 .           		case 'z': {
 .           			histsize = 0;
 2 ( 0.00%)  			lub_conv_atoui(optarg, &histsize, 0);
 .           			}
 .           			break;
 .           		case 'p':
 .           #ifdef HAVE_LIB_LIBXSLT
 .           			xslt_file = optarg;
 .           #else
 .           			fprintf(stderr, "Error: The klish was built without XSLT support.\n");
 .           			goto end;
-- line 220 ----------------------------------------
-- line 231 ----------------------------------------
 .           		default:
 .           			help(-1, argv[0]);
 .           			goto end;
 .           			break;
 .           		}
 .           	}
 .           
 .           	/* Validate command line options */
 4 ( 0.00%)  	if (utf8 && bit8) {
 .           		fprintf(stderr, "Error: The -u and -8 options can't be used together.\n");
 .           		goto end;
 .           	}
 .           
 .           	/* Create shell instance */
 2 ( 0.00%)  	if (quiet) {
 .           		FILE *tmpfd = NULL;
 .           		if ((tmpfd = fopen("/dev/null", "w")))
 .           			outfd = tmpfd;
 .           	}
10 ( 0.00%)  	shell = clish_shell_new(NULL, outfd, stop_on_error);
192,854 ( 2.94%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 2 ( 0.00%)  	if (!shell) {
 .           		fprintf(stderr, "Error: Can't run clish.\n");
 .           		goto end;
 .           	}
 .           	/* Load the XML files */
 6 ( 0.00%)  	clish_xmldoc_start();
702 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
11 ( 0.00%)  	if (clish_shell_load_scheme(shell, xml_path, xslt_file))
4,173,323 (63.59%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		goto end;
 .           	/* Set communication to the konfd */
 8 ( 0.00%)  	clish_shell__set_socket(shell, socket_path);
5,538 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	/* Set lockless mode */
 2 ( 0.00%)  	if (lockless)
 .           		clish_shell__set_lockfile(shell, NULL);
 .           	/* Set interactive mode */
 2 ( 0.00%)  	if (!interactive)
 .           		clish_shell__set_interactive(shell, interactive);
 .           	/* Set startup view */
 3 ( 0.00%)  	if (view)
 .           		clish_shell__set_startup_view(shell, view);
 .           	/* Set startup viewid */
 3 ( 0.00%)  	if (viewid)
 .           		clish_shell__set_startup_viewid(shell, viewid);
 .           	/* Set UTF-8 or 8-bit mode */
 4 ( 0.00%)  	if (utf8 || bit8)
 .           		clish_shell__set_utf8(shell, utf8);
 .           	else {
 .           #if HAVE_LANGINFO_CODESET
 .           		/* Autodetect encoding */
17 ( 0.00%)  		if (!strcmp(nl_langinfo(CODESET), "UTF-8"))
3,103 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 9 ( 0.00%)  			clish_shell__set_utf8(shell, BOOL_TRUE);
1,501 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           #else
 .           		/* The default is 8-bit if locale is not supported */
 .           		clish_shell__set_utf8(shell, BOOL_FALSE);
 .           #endif
 .           	}
 .           	/* Set logging */
 2 ( 0.00%)  	if (log) {
 .           		clish_shell__set_log(shell, log);
 .           		clish_shell__set_facility(shell, log_facility);
 .           	}
 .           	/* Set dry-run */
 2 ( 0.00%)  	if (dryrun)
 .           		clish_shell__set_dryrun(shell, dryrun);
 .           	/* Set idle timeout */
 2 ( 0.00%)  	if (istimeout)
 .           		clish_shell__set_timeout(shell, timeout);
 .           	/* Set history settings */
 8 ( 0.00%)  	clish_shell__stifle_history(shell, histsize);
2,399 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 3 ( 0.00%)  	if (histfile)
 8 ( 0.00%)  		histfile_expanded = lub_system_tilde_expand(histfile);
2,178 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 2 ( 0.00%)  	if (histfile_expanded)
 8 ( 0.00%)  		clish_shell__restore_history(shell, histfile_expanded);
33,758 ( 0.51%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	/* Load plugins, link aliases and check access rights */
 9 ( 0.00%)  	if (clish_shell_prepare(shell) < 0)
227,348 ( 3.46%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		goto end;
 .           	/* Dryrun config and log hooks */
 2 ( 0.00%)  	if (dryrun_config) {
 .           		if ((sym = clish_shell_get_hook(shell, CLISH_SYM_TYPE_CONFIG)))
 .           			clish_sym__set_permanent(sym, BOOL_FALSE);
 .           		if ((sym = clish_shell_get_hook(shell, CLISH_SYM_TYPE_LOG)))
 .           			clish_sym__set_permanent(sym, BOOL_FALSE);
 .           	}
 .           #ifdef DEBUG
 .           	clish_shell_dump(shell);
 .           #endif
 .           
 .           	/* Set source of command stream: files or interactive tty */
 3 ( 0.00%)  	if(optind < argc) {
 .           		int i;
 .           		/* Run the commands from the files */
 .           		for (i = argc - 1; i >= optind; i--)
 .           			clish_shell_push_file(shell, argv[i], stop_on_error);
 .           	} else {
 .           		/* The interactive shell */
15 ( 0.00%)  		int tmpfd = dup(fileno(stdin));
2,979 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 .           #ifdef FD_CLOEXEC
16 ( 0.00%)  		fcntl(tmpfd, F_SETFD, fcntl(tmpfd, F_GETFD) | FD_CLOEXEC);
1,522 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
22 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/sysv/linux/fcntl.c:fcntl (1x)
 .           #endif
18 ( 0.00%)  		clish_shell_push_fd(shell, fdopen(tmpfd, "r"), stop_on_error);
6,901 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 .           	}
 .           
 .           	/* Execute startup */
 7 ( 0.00%)  	running = clish_shell_startup(shell);
65,371 ( 1.00%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 2 ( 0.00%)  	if (running) {
 .           		fprintf(stderr, "Error: Can't startup clish.\n");
 .           		goto end;
 .           	}
 .           
 2 ( 0.00%)  	if (cmd) {
 .           		/* Iterate cmds */
 .           		for(iter = lub_list__get_head(cmds);
 .           			iter; iter = lub_list_node__get_next(iter)) {
 .           			char *str = (char *)lub_list_node__get_data(iter);
 .           			result = clish_shell_forceline(shell, str, NULL);
 .           			if (stop_on_error && result)
 .           				break;
 .           		}
 .           	} else {
 .           		/* Main loop */
 9 ( 0.00%)  		result = clish_shell_loop(shell);
1,246,515 (18.99%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	}
 .           
 .           end:
 .           	/* Cleanup */
 .           	if (shell) {
 2 ( 0.00%)  		if (histfile_expanded) {
 8 ( 0.00%)  			clish_shell__save_history(shell, histfile_expanded);
14,262 ( 0.22%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 7 ( 0.00%)  			free(histfile_expanded);
1,622 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		}
 8 ( 0.00%)  		clish_shell_delete(shell);
192,337 ( 2.93%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	}
 2 ( 0.00%)  	if (quiet && (outfd != stdout))
 .           		fclose(outfd);
 .           
 .           	/* Delete each cmds element */
10 ( 0.00%)  	while ((iter = lub_list__get_head(cmds))) {
847 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		lub_list_del(cmds, iter);
 .           		free(lub_list_node__get_data(iter));
 .           		lub_list_node_free(iter);
 .           	}
 7 ( 0.00%)  	lub_list_free(cmds);
844 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           	/* Stop XML engine */
 6 ( 0.00%)  	clish_xmldoc_stop();
702 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           	return result;
 9 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           /* Print help message */
 .           static void help(int status, const char *argv0)
 .           {
 .           	const char *name = NULL;
 .           
 .           	if (!argv0)
-- line 385 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c
--------------------------------------------------------------------------------
Ir             

-- line 68 ----------------------------------------
    .            *---------------------------------------------------------------
    .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
    .            **************************************************************** */
    .           #include "private.h"
    .           
    .           /*--------------------------------------------------------- */
    .           lub_bintree_node_t *lub_bintree_splay(const lub_bintree_t * this,
    .           				      lub_bintree_node_t * t, const void *key)
6,414 ( 0.10%)  {
    .           	/* Simple top down splay, not requiring "key" to be in the tree t.  */
    .           	/* What it does is described above.                                 */
    .           	lub_bintree_node_t N, *leftTreeMax, *rightTreeMin, *y;
    .           	int comp;
    .           
4,074 ( 0.06%)  	if (t == NULL)
    .           		return t;
2,904 ( 0.04%)  	N.left = N.right = NULL;
2,904 ( 0.04%)  	leftTreeMax = rightTreeMin = &N;
    .           
    .           	for (;;) {
6,372 ( 0.10%)  		comp = lub_bintree_compare(this, t, key);
167,457 ( 2.55%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (1,353x)
4,455 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (139x)
1,178 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (35x)
  132 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (66x)
3,186 ( 0.05%)  		if (comp > 0) {
2,253 ( 0.03%)  			if (t->left == NULL)
    .           				break;
2,015 ( 0.03%)  			if (lub_bintree_compare(this, t->left, key) > 0) {
23,504 ( 0.36%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (326x)
1,010 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
  120 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (5x)
   68 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (34x)
  351 ( 0.01%)  				y = t->left;	/* rotate right */
  702 ( 0.01%)  				t->left = y->right;
  351 ( 0.01%)  				y->right = t;
    .           				t = y;
1,053 ( 0.02%)  				if (t->left == NULL)
    .           					break;
    .           			}
  552 ( 0.01%)  			rightTreeMin->left = t;	/* link right */
    .           			rightTreeMin = t;
  552 ( 0.01%)  			t = t->left;
  842 ( 0.01%)  		} else if (comp < 0) {
1,257 ( 0.02%)  			if (t->right == NULL)
    .           				break;
1,775 ( 0.03%)  			if (lub_bintree_compare(this, t->right, key) < 0) {
71,595 ( 1.09%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (310x)
1,011 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
  236 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (7x)
  165 ( 0.00%)  				y = t->right;	/* rotate left */
   64 ( 0.00%)  				t->right = y->left;
   32 ( 0.00%)  				y->left = t;
    .           				t = y;
  128 ( 0.00%)  				if (t->right == NULL)
    .           					break;
    .           			}
  349 ( 0.01%)  			leftTreeMax->right = t;	/* link left */
    .           			leftTreeMax = t;
1,151 ( 0.02%)  			t = t->right;
    .           		} else {
    .           			break;
    .           		}
    .           	}
  968 ( 0.01%)  	leftTreeMax->right = t->left;	/* assemble */
1,936 ( 0.03%)  	rightTreeMin->left = t->right;
1,936 ( 0.03%)  	t->left = N.right;
1,936 ( 0.03%)  	t->right = N.left;
    .           
    .           	/* return the new root */
    .           	return t;
9,627 ( 0.15%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/string/string.c
--------------------------------------------------------------------------------
Ir              

-- line 10 ----------------------------------------
     .           
     .           const char *lub_string_esc_default = "`|$<>&()#;\\\"!";
     .           const char *lub_string_esc_regex = "^$.*+[](){}";
     .           const char *lub_string_esc_quoted = "\\\"";
     .           
     .           /*--------------------------------------------------------- */
     .           void lub_string_free(char *ptr)
     .           {
 2,266 ( 0.03%)  	free(ptr);
56,262 ( 0.86%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1,130x)
 1,569 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_ndecode(const char *string, unsigned int len)
   580 ( 0.01%)  {
     .           	const char *s = string;
     .           	char *res, *p;
     .           	int esc = 0;
     .           
   290 ( 0.00%)  	if (!string)
     .           		return NULL;
     .           
     .           	/* Allocate enough memory for result */
   580 ( 0.01%)  	p = res = malloc(len + 1);
16,883 ( 0.26%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (145x)
     .           
 5,401 ( 0.08%)  	while (*s && (s < (string +len))) {
 1,618 ( 0.02%)  		if (!esc) {
 1,618 ( 0.02%)  			if ('\\' == *s)
   809 ( 0.01%)  				esc = 1;
     .           			else
     .           				*p = *s;
     .           		} else {
     .           /*			switch (*s) {
     .           			case 'r':
     .           			case 'n':
     .           				*p = '\n';
     .           				break;
     .           			case 't':
     .           				*p = '\t';
     .           				break;
     .           			default:
     .           				*p = *s;
     .           				break;
     .           			}
   809 ( 0.01%)  */			*p = *s;
     .           			esc = 0;
     .           		}
     .           		if (!esc)
 1,618 ( 0.02%)  			p++;
   809 ( 0.01%)  		s++;
     .           	}
   145 ( 0.00%)  	*p = '\0';
     .           
     .           	return res;
   580 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           inline char *lub_string_decode(const char *string)
     .           {
     .           	return lub_string_ndecode(string, strlen(string));
     .           }
     .           
     .           /*----------------------------------------------------------- */
-- line 71 ----------------------------------------
-- line 95 ----------------------------------------
     .           			break;
     .           		}
     .           	}
     .           	return result;
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           void lub_string_catn(char **string, const char *text, size_t len)
 1,284 ( 0.02%)  {
   428 ( 0.01%)  	if (text) {
     .           		char *q;
 1,070 ( 0.02%)  		size_t length, initlen, textlen = strlen(text);
 4,016 ( 0.06%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (214x)
     .           
     .           		/* make sure the client cannot give us duff details */
   428 ( 0.01%)  		len = (len < textlen) ? len : textlen;
     .           
     .           		/* remember the size of the original string */
 1,312 ( 0.02%)  		initlen = *string ? strlen(*string) : 0;
 3,010 ( 0.05%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (121x)
     .           
     .           		/* account for '\0' */
   214 ( 0.00%)  		length = initlen + len + 1;
     .           
     .           		/* allocate the memory for the result */
   646 ( 0.01%)  		q = realloc(*string, length);
32,370 ( 0.49%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (213x)
 1,846 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   428 ( 0.01%)  		if (NULL != q) {
   214 ( 0.00%)  			*string = q;
     .           			/* move to the end of the initial string */
   214 ( 0.00%)  			q += initlen;
     .           
 4,171 ( 0.06%)  			while (len--) {
 4,692 ( 0.07%)  				*q++ = *text++;
     .           			}
   214 ( 0.00%)  			*q = '\0';
     .           		}
     .           	}
 1,284 ( 0.02%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           void lub_string_cat(char **string, const char *text)
 1,065 ( 0.02%)  {
 1,282 ( 0.02%)  	size_t len = text ? strlen(text) : 0;
 1,456 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 3,966 ( 0.06%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (212x)
   856 ( 0.01%)  	lub_string_catn(string, text, len);
55,728 ( 0.85%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn (212x)
 2,759 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   639 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_dup(const char *string)
     .           {
   928 ( 0.01%)  	if (!string)
     .           		return NULL;
   854 ( 0.01%)  	return strdup(string);
86,141 ( 1.31%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (424x)
 1,754 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    78 ( 0.00%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_dupn(const char *string, unsigned int len)
   252 ( 0.00%)  {
     .           	char *res = NULL;
     .           
   336 ( 0.01%)  	if (!string)
     .           		return res;
   336 ( 0.01%)  	res = malloc(len + 1);
 9,057 ( 0.14%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (84x)
   424 ( 0.01%)  	strncpy(res, string, len);
 2,437 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (83x)
 1,584 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    84 ( 0.00%)  	res[len] = '\0';
     .           
     .           	return res;
   420 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           int lub_string_nocasecmp(const char *cs, const char *ct)
16,428 ( 0.25%)  {
     .           	int result = 0;
71,764 ( 1.09%)  	while ((0 == result) && *cs && *ct) {
     .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
     .           		 * MACRO implementation uses braces to prevent multiple increments
     .           		 * when called.
     .           		 */
41,229 ( 0.63%)  		int s = lub_ctype_tolower(*cs++);
90,684 ( 1.38%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (8,244x)
 2,407 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
41,225 ( 0.63%)  		int t = lub_ctype_tolower(*ct++);
90,695 ( 1.38%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (8,245x)
     .           
     .           		result = s - t;
     .           	}
     .           	/*lint -e774 Boolean within 'if' always evealuates to True 
     .           	 * not the case because of tolower() evaluating to 0 under lint
     .           	 * (see above)
     .           	 */
     .           	if (0 == result) {
     .           		/* account for different string lengths */
 1,338 ( 0.02%)  		result = *cs - *ct;
     .           	}
     .           	return result;
13,690 ( 0.21%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_tolower(const char *str)
     .           {
     .           	char *tmp = strdup(str);
     .           	char *p = tmp;
     .           
     .           	while (*p) {
-- line 192 ----------------------------------------
-- line 194 ----------------------------------------
     .           		p++;
     .           	}
     .           
     .           	return tmp;
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           const char *lub_string_nocasestr(const char *cs, const char *ct)
 1,246 ( 0.02%)  {
     .           	const char *p = NULL;
    53 ( 0.00%)  	const char *result = NULL;
     .           
 1,188 ( 0.02%)  	while (*cs) {
     .           		const char *q = cs;
     .           
     .           		p = ct;
     .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
     .           		 * MACRO implementation uses braces to prevent multiple increments
     .           		 * when called.
     .           		 */
     .           		/*lint -e506 Constant value Boolean
     .           		 * not the case because of tolower() evaluating to 0 under lint
     .           		 * (see above)
     .           		 */
 2,929 ( 0.04%)  		while (*p && *q
 3,000 ( 0.05%)  		       && (lub_ctype_tolower(*p) == lub_ctype_tolower(*q))) {
 8,250 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (750x)
   102 ( 0.00%)  			p++, q++;
     .           		}
   648 ( 0.01%)  		if (0 == *p) {
     .           			break;
     .           		}
   327 ( 0.00%)  		cs++;
     .           	}
   106 ( 0.00%)  	if (p && !*p) {
     .           		/* we've found the first match of ct within cs */
     .           		result = cs;
     .           	}
     .           	return result;
 1,246 ( 0.02%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           unsigned int lub_string_equal_part(const char *str1, const char *str2,
     .           	bool_t utf8)
     .           {
     .           	unsigned int cnt = 0;
     .           
   408 ( 0.01%)  	if (!str1 || !str2)
     .           		return cnt;
 2,290 ( 0.03%)  	while (*str1 && *str2) {
 2,189 ( 0.03%)  		if (*str1 != *str2)
     .           			break;
   907 ( 0.01%)  		cnt++;
   487 ( 0.01%)  		str1++;
   487 ( 0.01%)  		str2++;
     .           	}
   134 ( 0.00%)  	if (!utf8)
     .           		return cnt;
     .           
     .           	/* UTF8 features */
   268 ( 0.00%)  	if (cnt && (UTF8_11 == (*(str1 - 1) & UTF8_MASK)))
   201 ( 0.00%)  		cnt--;
     .           
     .           	return cnt;
    35 ( 0.00%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           const char *lub_string_suffix(const char *string)
   292 ( 0.00%)  {
     .           	const char *p1, *p2;
     .           	p1 = p2 = string;
 1,508 ( 0.02%)  	while (*p1) {
 1,147 ( 0.02%)  		if (lub_ctype_isspace(*p1)) {
 4,940 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_isspace (380x)
   777 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			p2 = p1;
 1,143 ( 0.02%)  			p2++;
     .           		}
     .           		p1++;
     .           	}
     .           	return p2;
   365 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           const char *lub_string_nextword(const char *string,
     .           	size_t *len, size_t *offset, size_t *quoted)
11,192 ( 0.17%)  {
     .           	const char *word;
     .           
 1,399 ( 0.02%)  	*quoted = 0;
     .           
     .           	/* Find the start of a word (not including an opening quote) */
11,766 ( 0.18%)  	while (*string && isspace(*string)) {
 2,376 ( 0.04%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (792x)
 1,542 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   949 ( 0.01%)  		string++;
   250 ( 0.00%)  		(*offset)++;
     .           	}
     .           	/* Is this the start of a quoted string ? */
 2,100 ( 0.03%)  	if (*string == '"') {
     .           		*quoted = 1;
     .           		string++;
     .           	}
     .           	word = string;
 2,798 ( 0.04%)  	*len = 0;
     .           
     .           	/* Find the end of the word */
11,569 ( 0.18%)  	while (*string) {
 7,872 ( 0.12%)  		if (*string == '\\') {
     .           			string++;
     .           			(*len)++;
     .           			if (*string) {
     .           				(*len)++;
     .           				string++;
     .           			}
     .           			continue;
     .           		}
     .           		/* End of word */
31,488 ( 0.48%)  		if (!*quoted && isspace(*string))
11,808 ( 0.18%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (3,936x)
     .           			break;
 7,372 ( 0.11%)  		if (*string == '"') {
     .           			/* End of a quoted string */
     .           			*quoted = 2;
     .           			break;
     .           		}
 3,686 ( 0.06%)  		(*len)++;
 7,372 ( 0.11%)  		string++;
     .           	}
     .           
     .           	return word;
 9,793 ( 0.15%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           unsigned int lub_string_wordcount(const char *line)
 3,045 ( 0.05%)  {
     .           	const char *word;
   609 ( 0.01%)  	unsigned int result = 0;
 1,218 ( 0.02%)  	size_t len = 0, offset = 0;
     .           	size_t quoted;
     .           
 7,813 ( 0.12%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
66,468 ( 1.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (608x)
 2,674 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,218 ( 0.02%)  		*word || quoted;
 3,330 ( 0.05%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
30,728 ( 0.47%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (555x)
     .           		/* account for the terminating quotation mark */
 3,384 ( 0.05%)  		len += quoted ? quoted - 1 : 0;
   555 ( 0.01%)  		result++;
     .           	}
     .           
     .           	return result;
 4,263 ( 0.06%)  }
     .           
     .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 11 ----------------------------------------
  .           #include <string.h>
  .           #include <assert.h>
  .           #include <limits.h>
  .           #include <stdio.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
108 ( 0.00%)  static char *clish_ptype_select__get_name(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 76 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
829 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
346 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (35x)
107 ( 0.00%)  	if (arg) {
140 ( 0.00%)  		size_t name_len = strlen(arg);
938 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (35x)
144 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
1,504 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
782 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (34x)
  .           		if (lbrk)
140 ( 0.00%)  			name_len = (size_t) (lbrk - arg);
144 ( 0.00%)  		result = lub_string_dupn(arg, name_len);
5,385 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (34x)
2,566 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           	return result;
110 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_select__get_value(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 75 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
150 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (15x)
 30 ( 0.00%)  	if (arg) {
 75 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
345 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (15x)
 75 ( 0.00%)  		const char *rbrk = strchr(arg, ')');
705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (15x)
  .           		const char *value = arg;
 45 ( 0.00%)  		size_t value_len = strlen(arg);
510 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (15x)
 45 ( 0.00%)  		if (lbrk) {
 15 ( 0.00%)  			value = lbrk + 1;
  .           			if (rbrk)
 60 ( 0.00%)  				value_len = (size_t) (rbrk - value);
  .           		}
 75 ( 0.00%)  		result = lub_string_dupn(value, value_len);
2,445 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (15x)
  .           	}
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype__set_range(clish_ptype_t * this)
  .           {
  .           	char tmp[80];
  .           
  .           	/* Now set up the range values */
 75 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* Nothing more to do */
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* Setup the integer range */
 12 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%d..%d",
  .           			this->u.integer.min, this->u.integer.max);
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		this->range = lub_string_dup(tmp);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* Setup the unsigned integer range */
 15 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%u..%u",
2,947 ( 0.04%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (3x)
  .           			(unsigned int)this->u.integer.min,
  .           			(unsigned int)this->u.integer.max);
  3 ( 0.00%)  		tmp[sizeof(tmp) - 1] = '\0';
 12 ( 0.00%)  		this->range = lub_string_dup(tmp);
680 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		/* Setup the selection values to the help text */
  .           		unsigned int i;
  .           
121 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items); i++) {
870 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 38 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (19x)
 68 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
8,855 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (17x)
  .           
 34 ( 0.00%)  			if (i > 0)
 73 ( 0.00%)  				lub_string_cat(&this->range, "/");
3,648 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (14x)
128 ( 0.00%)  			snprintf(tmp, sizeof(tmp), "%s", name);
8,790 ( 0.13%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (17x)
 17 ( 0.00%)  			tmp[sizeof(tmp) - 1] = '\0';
 68 ( 0.00%)  			lub_string_cat(&this->range, tmp);
5,400 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (17x)
 51 ( 0.00%)  			lub_string_free(name);
1,530 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (17x)
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_ptype_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_ptype_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
846 ( 0.01%)  	return strcmp(this->name, key);
8,330 ( 0.13%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (282x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_ptype_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 25 ( 0.00%)  {
  .           	const clish_ptype_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
100 ( 0.00%)  	strcpy((char *)key, this->name);
561 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           size_t clish_ptype_bt_offset(void)
  .           {
  .           	return offsetof(clish_ptype_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *method_names[] = {
  .           	"regexp",
  .           	"integer",
  .           	"unsignedInteger",
  .           	"select"
  .           };
-- line 137 ----------------------------------------
-- line 143 ----------------------------------------
  .           
  .           	if (method >= max_method)
  .           		return NULL;
  .           	return method_names[method];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_method_e clish_ptype_method_resolve(const char *name)
 36 ( 0.00%)  {
 10 ( 0.00%)  	clish_ptype_method_e result = CLISH_PTYPE_REGEXP;
 22 ( 0.00%)  	if (NULL != name) {
  .           		unsigned i;
 36 ( 0.00%)  		for (i = 0; i < CLISH_PTYPE_SELECT + 1; i++) {
114 ( 0.00%)  			if (0 == strcmp(name, method_names[i])) {
378 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (18x)
  .           				result = (clish_ptype_method_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
  .           		assert(i <= CLISH_PTYPE_SELECT);
  .           	}
  .           	return result;
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *preprocess_names[] = {
  .           	"none",
  .           	"toupper",
  .           	"tolower"
  .           };
  .           
-- line 173 ----------------------------------------
-- line 176 ----------------------------------------
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	return preprocess_names[preprocess];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_preprocess_e clish_ptype_preprocess_resolve(const char *name)
  .           {
 22 ( 0.00%)  	clish_ptype_preprocess_e result = CLISH_PTYPE_NONE;
 22 ( 0.00%)  	if (name) {
  .           		unsigned i;
  .           		for (i = 0; i < CLISH_PTYPE_TOLOWER + 1; i++) {
  .           			if (0 == strcmp(name, preprocess_names[i])) {
  .           				result = (clish_ptype_preprocess_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
-- line 193 ----------------------------------------
-- line 198 ----------------------------------------
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC METHODS
  .            *--------------------------------------------------------- */
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype_word_generator(clish_ptype_t * this,
  .           	lub_argv_t *matches, const char *text)
 16 ( 0.00%)  {
  .           	char *result = NULL;
  .           	unsigned i = 0;
  .           
  .           	/* Another ptypes has no completions */
  8 ( 0.00%)  	if (this->method != CLISH_PTYPE_SELECT)
  .           		return;
  .           
  .           	/* First of all simply try to validate the result */
 14 ( 0.00%)  	result = clish_ptype_validate(this, text);
3,299 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,733 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate (1x)
  4 ( 0.00%)  	if (result) {
  4 ( 0.00%)  		lub_argv_add(matches, result);
312 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add (1x)
  3 ( 0.00%)  		lub_string_free(result);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  .           		return;
  .           	}
  .           
  .           	/* Iterate possible completion */
 27 ( 0.00%)  	while ((result = clish_ptype_select__get_name(this, i++))) {
759 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (4x)
  .           		/* get the next item and check if it is a completion */
 18 ( 0.00%)  		if (result == lub_string_nocasestr(result, text))
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasestr (3x)
 15 ( 0.00%)  			lub_argv_add(matches, result);
1,257 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add (3x)
  9 ( 0.00%)  		lub_string_free(result);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
  .           	}
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_validate_or_translate(const clish_ptype_t * this,
  .           	const char *text, bool_t translate)
 45 ( 0.00%)  {
 15 ( 0.00%)  	char *result = lub_string_dup(text);
776 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 15 ( 0.00%)  	assert(this->pattern);
  .           
 25 ( 0.00%)  	switch (this->preprocess) {
  .           	/*----------------------------------------- */
  .           	case CLISH_PTYPE_NONE:
  .           		break;
  .           	/*----------------------------------------- */
  .           	case CLISH_PTYPE_TOUPPER:
  .           	{
  .           		char *p = result;
  .           		while (*p) {
-- line 246 ----------------------------------------
-- line 263 ----------------------------------------
  .           		}
  .           		break;
  .           	}
  .           	/*----------------------------------------- */
  .           	}
  .           	/*
  .           	 * now validate according the specified method 
  .           	 */
 45 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* test the regular expression against the string */
  .           		/*lint -e64 Type mismatch (arg. no. 4) */
  .           		/*
  .           		 * lint seems to equate regmatch_t[] as being of type regmatch_t !
  .           		 */
  .           		if (0 != regexec(&this->u.regexp, result, 0, NULL, 0)) {
-- line 279 ----------------------------------------
-- line 329 ----------------------------------------
  .           			unsigned int value = 0;
  .           			if ((lub_conv_atoui(result, &value, 0) < 0) ||
  .           				(value < (unsigned)this->u.integer.min) ||
  .           				(value > (unsigned)this->u.integer.max)) {
  .           				lub_string_free(result);
  .           				result = NULL;
  .           			}
  .           		} else {
  4 ( 0.00%)  			lub_string_free(result);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  1 ( 0.00%)  			result = NULL;
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		unsigned i;
 80 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items);
 32 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (16x)
 11 ( 0.00%)  			i++) {
 61 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
3,705 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (15x)
  .           			char *value = clish_ptype_select__get_value(this, i);
 75 ( 0.00%)  			int tmp = lub_string_nocasecmp(result, name);
1,000 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (15x)
 75 ( 0.00%)  			lub_string_free((BOOL_TRUE ==
1,350 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (15x)
  .           				translate) ? name : value);
 42 ( 0.00%)  			if (0 == tmp) {
 16 ( 0.00%)  				lub_string_free(result);
360 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (4x)
  .           				result = ((BOOL_TRUE ==
  .           					translate) ? value : name);
  .           				break;
  .           			} else {
 33 ( 0.00%)  				lub_string_free((BOOL_TRUE ==
990 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (11x)
  .           					translate) ? value : name);
  .           			}
  .           		}
 26 ( 0.00%)  		if (i == lub_argv__get_count(this->u.select.items)) {
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (5x)
  .           			/* failed to find a match */
  .           			lub_string_free(result);
  .           			result = NULL;
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           	return (char *)result;
 45 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_init(clish_ptype_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
  .           {
 26 ( 0.00%)  	assert(name);
 52 ( 0.00%)  	this->name = lub_string_dup(name);
2,760 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
 13 ( 0.00%)  	this->text = NULL;
 13 ( 0.00%)  	this->pattern = NULL;
 13 ( 0.00%)  	this->preprocess = preprocess;
 13 ( 0.00%)  	this->range = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 43 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
947 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (12x)
  .           
 26 ( 0.00%)  	if (pattern) {
  .           		/* set the pattern for this type */
 69 ( 0.00%)  		clish_ptype__set_pattern(this, pattern, method);
1,917,560 (29.22%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern (12x)
148,076 ( 2.26%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	} else {
  .           		/* The method is regexp by default */
  .           		this->method = CLISH_PTYPE_REGEXP;
  .           	}
  .           	
  .           	/* set the help text for this type */
 26 ( 0.00%)  	if (text)
 56 ( 0.00%)  		clish_ptype__set_text(this, text);
832 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,284 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_text (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_validate(const clish_ptype_t * this, const char *text)
  .           {
  4 ( 0.00%)  	return clish_ptype_validate_or_translate(this, text, BOOL_FALSE);
5,375 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate_or_translate (2x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_translate(const clish_ptype_t * this, const char *text)
  .           {
  6 ( 0.00%)  	return clish_ptype_validate_or_translate(this, text, BOOL_TRUE);
8,202 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate_or_translate (3x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_ptype_new(const char *name,
  .           	const char *help, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
156 ( 0.00%)  {
 52 ( 0.00%)  	clish_ptype_t *this = malloc(sizeof(clish_ptype_t));
4,666 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (13x)
  .           
 26 ( 0.00%)  	if (this)
  .           		clish_ptype_init(this, name, help, pattern, method, preprocess);
  .           	return this;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_fini(clish_ptype_t * this)
  .           {
 26 ( 0.00%)  	if (this->pattern) {
 51 ( 0.00%)  		switch (this->method) {
  .           		case CLISH_PTYPE_REGEXP:
 32 ( 0.00%)  			regfree(&this->u.regexp);
59,605 ( 0.91%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regfree (6x)
29,281 ( 0.45%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			break;
  .           		case CLISH_PTYPE_INTEGER:
  .           		case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           			break;
  .           		case CLISH_PTYPE_SELECT:
  9 ( 0.00%)  			lub_argv_delete(this->u.select.items);
2,277 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (3x)
  .           			break;
  .           		}
  .           	}
  .           
 39 ( 0.00%)  	lub_string_free(this->name);
1,170 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
 13 ( 0.00%)  	this->name = NULL;
 39 ( 0.00%)  	lub_string_free(this->text);
1,170 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
 13 ( 0.00%)  	this->text = NULL;
 39 ( 0.00%)  	lub_string_free(this->pattern);
1,199 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
 13 ( 0.00%)  	this->pattern = NULL;
 39 ( 0.00%)  	lub_string_free(this->range);
603 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
  .           	this->range = NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype_delete(clish_ptype_t * this)
 26 ( 0.00%)  {
  .           	clish_ptype_fini(this);
 39 ( 0.00%)  	free(this);
1,538 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (13x)
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_ptype__get_name(const clish_ptype_t * this)
  .           {
  .           	return (const char *)this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 467 ----------------------------------------
-- line 469 ----------------------------------------
  .           {
  .           	return (const char *)this->text;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_pattern(clish_ptype_t * this,
  .           			 const char *pattern, clish_ptype_method_e method)
 91 ( 0.00%)  {
 26 ( 0.00%)  	assert(NULL == this->pattern);
 13 ( 0.00%)  	this->method = method;
  .           
 74 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           	{
  .           		int result;
  .           
  .           		/* only the expression is allowed */
 39 ( 0.00%)  		lub_string_cat(&this->pattern, "^");
5,043 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,648 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (6x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, pattern);
3,484 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, "$");
1,814 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
  .           
  .           		/* compile the regular expression for later use */
 39 ( 0.00%)  		result = regcomp(&this->u.regexp, this->pattern,
1,846,745 (28.14%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp (6x)
141,777 ( 2.16%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			REG_NOSUB | REG_EXTENDED);
 14 ( 0.00%)  		assert(0 == result);
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* default the range to that of an integer */
  3 ( 0.00%)  		this->u.integer.min = INT_MIN;
  3 ( 0.00%)  		this->u.integer.max = INT_MAX;
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
798 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* now try and read the specified range */
 28 ( 0.00%)  		sscanf(this->pattern, "%d..%d",
2,835 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,758 ( 0.04%)  => /opt/build/glibc/glibc-2.24/stdio-common/isoc99_sscanf.c:__isoc99_sscanf (2x)
  .           			&this->u.integer.min, &this->u.integer.max);
  3 ( 0.00%)  		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* default the range to that of an unsigned integer */
  .           		this->u.integer.min = 0;
  .           		this->u.integer.max = (int)UINT_MAX;
  .           		this->pattern = lub_string_dup(pattern);
  .           		/* now try and read the specified range */
  .           		sscanf(this->pattern, "%u..%u",
  .           			(unsigned int *)&this->u.integer.min,
  .           			(unsigned int *)&this->u.integer.max);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
808 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* store a vector of item descriptors */
 29 ( 0.00%)  		this->u.select.items = lub_argv_new(this->pattern, 0);
16,031 ( 0.24%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,229 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (2x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	}
  .           	/* now set up the range details */
  .           	clish_ptype__set_range(this);
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype__set_text(clish_ptype_t * this, const char *text)
 13 ( 0.00%)  {
 39 ( 0.00%)  	assert(!this->text);
 52 ( 0.00%)  	this->text = lub_string_dup(text);
3,317 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
  .           
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_preprocess(clish_ptype_t * this,
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	assert(!this->preprocess);
  .           	this->preprocess = preprocess;
-- line 545 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 5 ----------------------------------------
  .           #include <assert.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_shell_find_ptype(clish_shell_t *this,
  .           	const char *name)
  .           {
 75 ( 0.00%)  	return lub_bintree_find(&this->ptype_tree, name);
6,663 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_shell_find_create_ptype(clish_shell_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
169 ( 0.00%)  {
 43 ( 0.00%)  	clish_ptype_t *ptype = lub_bintree_find(&this->ptype_tree, name);
1,629 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,507 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (12x)
  .           
 39 ( 0.00%)  	if (!ptype) {
  .           		/* create a ptype */
108 ( 0.00%)  		ptype = clish_ptype_new(name, text, pattern,
1,928,532 (29.39%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new (12x)
150,975 ( 2.30%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			method, preprocess);
 26 ( 0.00%)  		assert(ptype);
 69 ( 0.00%)  		clish_shell_insert_ptype(this, ptype);
1,539 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,590 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_insert_ptype (12x)
  .           	} else {
  .           		if (pattern) {
  .           			/* set the pattern */
  .           			clish_ptype__set_pattern(ptype, pattern, method);
  .           			/* set the preprocess */
  .           			clish_ptype__set_preprocess(ptype, preprocess);
  .           		}
  .           		/* set the help text */
  .           		if (text)
  .           			clish_ptype__set_text(ptype, text);
  .           	}
  .           
  .           	return ptype;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_shell_insert_ptype(clish_shell_t * this, clish_ptype_t * ptype)
  .           {
 43 ( 0.00%)  	(void)lub_bintree_insert(&this->ptype_tree, ptype);
2,554 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (12x)
855 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c
--------------------------------------------------------------------------------
Ir           

-- line 19 ----------------------------------------
  .           #include "lub/string.h"
  .           
  .           /*-------------------------------------------------------- */
  .           static void clish_shell_renew_prompt(clish_shell_t *this)
  .           {
  .           	clish_context_t prompt_context;
  .           	char *prompt = NULL;
  .           	const clish_view_t *view;
  3 ( 0.00%)  	char *str = NULL;
  .           
  .           	/* Create appropriate context */
 15 ( 0.00%)  	clish_context_init(&prompt_context, this);
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (3x)
  .           
  .           	/* Obtain the prompt */
 12 ( 0.00%)  	view = clish_shell__get_view(this);
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (3x)
  6 ( 0.00%)  	assert(view);
 15 ( 0.00%)  	lub_string_cat(&str, "${_PROMPT_PREFIX}");
1,026 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (3x)
 25 ( 0.00%)  	lub_string_cat(&str, clish_view__get_prompt(view));
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,502 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (3x)
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_prompt (2x)
 12 ( 0.00%)  	lub_string_cat(&str, "${_PROMPT_SUFFIX}");
1,838 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (3x)
 18 ( 0.00%)  	prompt = clish_shell_expand(str, SHELL_VAR_NONE, &prompt_context);
24,891 ( 0.38%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand (3x)
  6 ( 0.00%)  	assert(prompt);
  9 ( 0.00%)  	lub_string_free(str);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 16 ( 0.00%)  	tinyrl__set_prompt(this->tinyrl, prompt);
2,501 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
703 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__set_prompt (2x)
  9 ( 0.00%)  	lub_string_free(prompt);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_key_help(tinyrl_t *this, int key)
  .           {
  .           	bool_t result = BOOL_TRUE;
  .           
  .           	if (tinyrl_is_quoting(this)) {
-- line 50 ----------------------------------------
-- line 113 ----------------------------------------
  .           /*
  .            * This is a CLISH specific completion function.
  .            * If the current prefix is not a recognised prefix then
  .            * an error is flagged.
  .            * If it is a recognisable prefix then possible completions are displayed
  .            * or a unique completion is inserted.
  .            */
  .           static tinyrl_match_e clish_shell_tinyrl_complete(tinyrl_t *this)
  4 ( 0.00%)  {
  .           	tinyrl_match_e status;
  .           
  .           	/* first of all perform any history expansion */
  .           	(void)clish_shell_tinyrl_expand(this);
  .           	/* perform normal completion */
  7 ( 0.00%)  	status = tinyrl_complete(this);
32,531 ( 0.50%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	switch (status) {
  .           	case TINYRL_NO_MATCH:
  7 ( 0.00%)  		if (BOOL_FALSE == tinyrl_is_completion_error_over(this)) {
935 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			/* The user hasn't even entered a valid prefix! */
  .           /*			tinyrl_crlf(this);
  .           			clish_shell_help(context->shell,
  .           				tinyrl__get_line(this));
  .           			tinyrl_crlf(this);
  .           			tinyrl_reset_line_state(this);
  .           */		}
  .           		break;
  .           	default:
  .           		/* the default completion function will have prompted for completions as
  .           		 * necessary
  .           		 */
  .           		break;
  .           	}
  .           	return status;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_key_space(tinyrl_t *this, int key)
  6 ( 0.00%)  {
  .           	bool_t result = BOOL_FALSE;
  .           	tinyrl_match_e status;
  2 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(this);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (1x)
  4 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (1x)
  8 ( 0.00%)  	const char *line = tinyrl__get_line(this);
789 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	clish_pargv_status_e arg_status;
  1 ( 0.00%)  	const clish_command_t *cmd = NULL;
  1 ( 0.00%)  	clish_pargv_t *pargv = NULL;
  .           
  9 ( 0.00%)  	if(tinyrl_is_empty(this)) {
738 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* ignore space at the begining of the line, don't display commands */
  1 ( 0.00%)  		return BOOL_TRUE;
  6 ( 0.00%)  	} else if (tinyrl_is_quoting(this)) {
 21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_is_quoting (1x)
  .           		/* if we are in the middle of a quote then simply enter a space */
  .           		result = BOOL_TRUE;
  .           	} else {
  .           		/* Find out if current line is legal. It can be
  .           		 * fully completed or partially completed.
  .           		 */
 11 ( 0.00%)  		arg_status = clish_shell_parse(shell, line, &cmd, &pargv);
4,144 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		if (pargv)
  .           			clish_pargv_delete(pargv);
  2 ( 0.00%)  		switch (arg_status) {
  .           		case CLISH_LINE_OK:
  .           		case CLISH_LINE_PARTIAL:
  .           			if (' ' != line[strlen(line) - 1])
  .           				result = BOOL_TRUE;
  .           			break;
  .           		default:
  .           			break;
  .           		}
  .           		/* If current line is illegal try to make auto-comletion. */
  .           		if (!result) {
  .           			/* perform word completion */
  2 ( 0.00%)  			status = clish_shell_tinyrl_complete(this);
33,491 ( 0.51%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_complete (1x)
  5 ( 0.00%)  			switch (status) {
  .           			case TINYRL_NO_MATCH:
  .           			case TINYRL_AMBIGUOUS:
  .           				/* ambiguous result signal an issue */
  .           				break;
  .           			case TINYRL_COMPLETED_AMBIGUOUS:
  .           				/* perform word completion again in case we just did case
  .           				   modification the first time */
  .           				status = clish_shell_tinyrl_complete(this);
-- line 194 ----------------------------------------
-- line 207 ----------------------------------------
  .           		}
  .           	}
  .           	if (result)
  .           		result = tinyrl_insert_text(this, " ");
  .           	/* keep compiler happy */
  .           	key = key;
  .           
  .           	return result;
  7 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_key_enter(tinyrl_t *this, int key)
 18 ( 0.00%)  {
  9 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(this);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (3x)
 12 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (3x)
  .           	const clish_command_t *cmd = NULL;
 12 ( 0.00%)  	const char *line = tinyrl__get_line(this);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_line (3x)
  .           	bool_t result = BOOL_FALSE;
  .           	char *errmsg = NULL;
  .           
  .           	/* Inc line counter */
  9 ( 0.00%)  	if (shell->current_file)
  3 ( 0.00%)  		shell->current_file->line++;
  .           
  .           	/* nothing to pass simply move down the screen */
  6 ( 0.00%)  	if (!*line) {
  .           		tinyrl_multi_crlf(this);
  .           		tinyrl_done(this);
  .           		return BOOL_TRUE;
  .           	}
  .           
  .           	/* try and parse the command */
 12 ( 0.00%)  	cmd = clish_shell_resolve_command(shell, line);
13,292 ( 0.20%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_resolve_command (3x)
  6 ( 0.00%)  	if (!cmd) {
  .           		tinyrl_match_e status = clish_shell_tinyrl_complete(this);
  .           		switch (status) {
  .           		case TINYRL_MATCH:
  .           		case TINYRL_MATCH_WITH_EXTENSIONS:
  .           		case TINYRL_COMPLETED_MATCH:
  .           			/* re-fetch the line as it may have changed
  .           			 * due to auto-completion
  .           			 */
-- line 248 ----------------------------------------
-- line 263 ----------------------------------------
  .           				tinyrl_multi_crlf(this);
  .           				errmsg = "Unknown command";
  .           			}
  .           			break;
  .           		}
  .           	}
  .           	if (cmd) {
  .           		clish_pargv_status_e arg_status;
 13 ( 0.00%)  		tinyrl_multi_crlf(this);
1,465 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,256 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_multi_crlf (2x)
  .           		/* we've got a command so check the syntax */
 18 ( 0.00%)  		arg_status = clish_shell_parse(shell,
16,931 ( 0.26%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:clish_shell_parse (3x)
  .           			line, &context->cmd, &context->pargv);
 21 ( 0.00%)  		switch (arg_status) {
  .           		case CLISH_LINE_OK:
 13 ( 0.00%)  			tinyrl_done(this);
695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_done (2x)
  3 ( 0.00%)  			result = BOOL_TRUE;
  3 ( 0.00%)  			break;
  .           		case CLISH_BAD_HISTORY:
  .           			errmsg = "Bad history entry";
  .           			break;
  .           		case CLISH_BAD_CMD:
  .           			errmsg = "Illegal command line";
  .           			break;
  .           		case CLISH_BAD_PARAM:
  .           			errmsg = "Illegal parameter";
-- line 287 ----------------------------------------
-- line 307 ----------------------------------------
  .           			"%s\n", fname, shell->current_file->line,
  .           			line, errmsg);
  .           		}
  .           	}
  .           	/* keep the compiler happy */
  .           	key = key;
  .           
  .           	return result;
 21 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_hotkey(tinyrl_t *this, int key)
  .           {
  .           	clish_view_t *view;
  .           	const char *cmd = NULL;
  .           	clish_context_t *context = tinyrl__get_context(this);
  .           	clish_shell_t *shell = clish_context__get_shell(context);
-- line 323 ----------------------------------------
-- line 348 ----------------------------------------
  .           	return BOOL_TRUE;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This is the completion function provided for CLISH */
  .           tinyrl_completion_func_t clish_shell_tinyrl_completion;
  .           char **clish_shell_tinyrl_completion(tinyrl_t * tinyrl,
  .           	const char *line, unsigned start, unsigned end)
216 ( 0.00%)  {
  .           	lub_argv_t *matches;
 36 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(tinyrl);
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (18x)
 72 ( 0.00%)  	clish_shell_t *this = clish_context__get_shell(context);
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (18x)
  .           	clish_shell_iterator_t iter;
  .           	const clish_command_t *cmd = NULL;
  .           	char *text;
 18 ( 0.00%)  	char **result = NULL;
  .           
 94 ( 0.00%)  	if (tinyrl_is_quoting(tinyrl))
788 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
855 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_is_quoting (17x)
  .           		return result;
  .           
 90 ( 0.00%)  	matches = lub_argv_new(NULL, 0);
2,421 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (18x)
 90 ( 0.00%)  	text = lub_string_dupn(line, end);
2,760 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (18x)
  .           
  .           	/* Don't bother to resort to filename completion */
 58 ( 0.00%)  	tinyrl_completion_over(tinyrl);
839 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 34 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_completion_over (17x)
  .           
  .           	/* Search for COMMAND completions */
 94 ( 0.00%)  	clish_shell_iterator_init(&iter, CLISH_NSPACE_COMPLETION);
696 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 51 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_iterator_init (17x)
659 ( 0.01%)  	while ((cmd = clish_shell_find_next_completion(this, text, &iter)))
561,873 ( 8.56%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_find_next_completion (90x)
8,467 ( 0.13%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
519 ( 0.01%)  		lub_argv_add(matches, clish_command__get_suffix(cmd));
3,494 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
33,641 ( 0.51%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add (72x)
9,496 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_suffix (72x)
  .           
  .           	/* Try and resolve a command */
 76 ( 0.00%)  	cmd = clish_shell_resolve_command(this, text);
102,435 ( 1.56%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_resolve_command (17x)
3,612 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	/* Search for PARAM completion */
 36 ( 0.00%)  	if (cmd)
 67 ( 0.00%)  		clish_shell_param_generator(this, matches, cmd, text, start);
20,451 ( 0.31%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
42,580 ( 0.65%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_param_generator (8x)
  .           
 54 ( 0.00%)  	lub_string_free(text);
1,620 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (18x)
  .           
  .           	/* Matches were found */
 90 ( 0.00%)  	if (lub_argv__get_count(matches) > 0) {
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (18x)
  .           		unsigned i;
 88 ( 0.00%)  		char *subst = lub_string_dup(lub_argv__get_arg(matches, 0));
1,703 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (11x)
110 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (11x)
  .           		/* Find out substitution */
469 ( 0.01%)  		for (i = 1; i < lub_argv__get_count(matches); i++) {
154 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (77x)
  .           			char *p = subst;
330 ( 0.01%)  			const char *match = lub_argv__get_arg(matches, i);
660 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (66x)
400 ( 0.01%)  			size_t match_len = strlen(p);
1,643 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,056 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (66x)
195 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc (65x)
  .           			/* identify the common prefix */
594 ( 0.01%)  			while ((tolower(*p) == tolower(*match)) && match_len--) {
  .           				p++;
  .           				match++;
  .           			}
  .           			/* Terminate the prefix string */
 66 ( 0.00%)  			*p = '\0';
  .           		}
 59 ( 0.00%)  		result = lub_argv__get_argv(matches, subst);
4,567 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
14,225 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_argv (10x)
 44 ( 0.00%)  		lub_string_free(subst);
990 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (11x)
  .           	}
 54 ( 0.00%)  	lub_argv_delete(matches);
10,671 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (18x)
  .           
  .           	return result;
162 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static void clish_shell_tinyrl_init(tinyrl_t * this)
  .           {
  .           	bool_t status;
  .           	/* bind the '?' key to the help function */
  9 ( 0.00%)  	status = tinyrl_bind_key(this, '?', clish_shell_tinyrl_key_help);
835 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	assert(status);
  .           
  .           	/* bind the <RET> key to the help function */
  5 ( 0.00%)  	status = tinyrl_bind_key(this, '\r', clish_shell_tinyrl_key_enter);
  7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
  2 ( 0.00%)  	assert(status);
  5 ( 0.00%)  	status = tinyrl_bind_key(this, '\n', clish_shell_tinyrl_key_enter);
  7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
  2 ( 0.00%)  	assert(status);
  .           
  .           	/* bind the <SPACE> key to auto-complete if necessary */
  5 ( 0.00%)  	status = tinyrl_bind_key(this, ' ', clish_shell_tinyrl_key_space);
  7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
  2 ( 0.00%)  	assert(status);
  .           
  .           	/* Set external hotkey callback */
  8 ( 0.00%)  	tinyrl__set_hotkey_fn(this, clish_shell_tinyrl_hotkey);
808 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Assign timeout callback */
  8 ( 0.00%)  	tinyrl__set_timeout_fn(this, clish_shell_timeout_fn);
847 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	/* Assign keypress callback */
  8 ( 0.00%)  	tinyrl__set_keypress_fn(this, clish_shell_keypress_fn);
838 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           /*
  .            * Create an instance of the specialised class
  .            */
  .           tinyrl_t *clish_shell_tinyrl_new(FILE * istream,
  .           	FILE * ostream, unsigned stifle)
  1 ( 0.00%)  {
  .           	/* call the parent constructor */
  8 ( 0.00%)  	tinyrl_t *this = tinyrl_new(istream,
11,579 ( 0.18%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		ostream, stifle, clish_shell_tinyrl_completion);
  .           	/* now call our own constructor */
  2 ( 0.00%)  	if (this)
  .           		clish_shell_tinyrl_init(this);
  .           	return this;
  3 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell_tinyrl_fini(tinyrl_t * this)
  1 ( 0.00%)  {
  .           	/* nothing to do... yet */
  .           	this = this;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell_tinyrl_delete(tinyrl_t * this)
  2 ( 0.00%)  {
  .           	/* call our destructor */
  6 ( 0.00%)  	clish_shell_tinyrl_fini(this);
670 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	/* and call the parent destructor */
  7 ( 0.00%)  	tinyrl_delete(this);
5,578 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  1 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static int clish_shell_execline(clish_shell_t *this, const char *line, char **out)
 21 ( 0.00%)  {
  .           	char *str;
  .           	clish_context_t context;
  .           	tinyrl_history_t *history;
  .           	int lerror = 0;
  .           
  6 ( 0.00%)  	assert(this);
  3 ( 0.00%)  	this->state = SHELL_STATE_OK;
 30 ( 0.00%)  	if (!line && !tinyrl__get_istream(this->tinyrl)) {
 15 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_istream (3x)
  .           		this->state = SHELL_STATE_SYSTEM_ERROR;
  .           		return -1;
  .           	}
  .           
  .           	/* Renew prompt */
  .           	clish_shell_renew_prompt(this);
  .           
  .           	/* Set up the context for tinyrl */
 12 ( 0.00%)  	clish_context_init(&context, this);
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (3x)
  .           
  .           	/* Push the specified line or interactive line */
  6 ( 0.00%)  	if (line)
  3 ( 0.00%)  		str = tinyrl_forceline(this->tinyrl, &context, line);
  .           	else
 19 ( 0.00%)  		str = tinyrl_readline(this->tinyrl, &context);
725,679 (11.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
459,031 ( 6.99%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_readline (2x)
 10 ( 0.00%)  	lerror = errno;
1,596 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/csu/errno-loc.c:__errno_location (2x)
  6 ( 0.00%)  	if (!str) {
  .           		switch (lerror) {
  .           		case ENOENT:
  .           			this->state = SHELL_STATE_EOF;
  .           			break;
  .           		case ENOEXEC:
  .           			this->state = SHELL_STATE_SYNTAX_ERROR;
  .           			break;
  .           		default:
  .           			this->state = SHELL_STATE_SYSTEM_ERROR;
  .           			break;
  .           		};
  .           		return -1;
  .           	}
  .           
  .           	/* Deal with the history list */
 19 ( 0.00%)  	if (tinyrl__get_isatty(this->tinyrl)) {
810 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_isatty (2x)
 13 ( 0.00%)  		history = tinyrl__get_history(this->tinyrl);
878 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_history (2x)
 19 ( 0.00%)  		tinyrl_history_add(history, str);
2,447 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,711 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:tinyrl_history_add (2x)
  .           	}
  9 ( 0.00%)  	free(str);
264 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (3x)
  .           
  .           	/* Execute the provided command */
 12 ( 0.00%)  	if (context.cmd && context.pargv) {
  .           		int res;
 18 ( 0.00%)  		if ((res = clish_shell_execute(&context, out))) {
13,779 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_execute.c:clish_shell_execute (3x)
  .           			this->state = SHELL_STATE_SCRIPT_ERROR;
  .           			if (context.pargv)
  .           				clish_pargv_delete(context.pargv);
  .           			return res;
  .           		}
  .           	}
  .           
  9 ( 0.00%)  	if (context.pargv)
  6 ( 0.00%)  		clish_pargv_delete(context.pargv);
342 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_delete (3x)
  .           
  3 ( 0.00%)  	return 0;
 24 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           int clish_shell_forceline(clish_shell_t *this, const char *line, char **out)
  .           {
  .           	return clish_shell_execline(this, line, out);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           int clish_shell_readline(clish_shell_t *this, char **out)
  3 ( 0.00%)  {
  6 ( 0.00%)  	return clish_shell_execline(this, NULL, out);
1,240,703 (18.91%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_execline (3x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           FILE * clish_shell__get_istream(const clish_shell_t * this)
  .           {
  .           	return tinyrl__get_istream(this->tinyrl);
  .           }
  .           
-- line 554 ----------------------------------------
-- line 577 ----------------------------------------
  .           {
  .           	assert(this);
  .           	return tinyrl__get_utf8(this->tinyrl);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell__set_utf8(clish_shell_t * this, bool_t utf8)
  .           {
  2 ( 0.00%)  	assert(this);
  7 ( 0.00%)  	tinyrl__set_utf8(this->tinyrl, utf8);
768 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell__set_timeout(clish_shell_t *this, unsigned int timeout)
  .           {
  .           	assert(this);
  .           	this->idle_timeout = timeout;
  .           }
-- line 594 ----------------------------------------
-- line 597 ----------------------------------------
  .           tinyrl_t *clish_shell__get_tinyrl(const clish_shell_t * this)
  .           {
  .           	return this->tinyrl;
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           int clish_shell__save_history(const clish_shell_t *this, const char *fname)
  .           {
  7 ( 0.00%)  	return tinyrl__save_history(this->tinyrl, fname);
13,478 ( 0.21%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           int clish_shell__restore_history(clish_shell_t *this, const char *fname)
  .           {
  7 ( 0.00%)  	return tinyrl__restore_history(this->tinyrl, fname);
32,950 ( 0.50%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           void clish_shell__stifle_history(clish_shell_t *this, unsigned int stifle)
  .           {
  7 ( 0.00%)  	tinyrl__stifle_history(this->tinyrl, stifle);
1,599 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c
--------------------------------------------------------------------------------
Ir              

-- line 78 ----------------------------------------
     .            * @param node element to add
     .            * @return new first element of the list
     .            */
     .           static clish_xmlnode_t *clish_expat_list_push_back(clish_xmlnode_t *first, clish_xmlnode_t *node)
     .           {
     .           	clish_xmlnode_t *cur = first;
     .           	clish_xmlnode_t *prev = NULL;
     .           
25,493 ( 0.39%)  	while (cur) {
     .           		prev = cur;
 7,754 ( 0.12%)  		cur = cur->next;
     .           	}
     .           	if (prev) {
   906 ( 0.01%)  		prev->next = node;
     .           		return first;
     .           	}
     .           	return node;
     .           }
     .           
     .           /** Generic add_attr() function
     .            *
     .            * @param first first attribute in the attribute list
-- line 99 ----------------------------------------
-- line 100 ----------------------------------------
     .            * @param n attribute name
     .            * @param v attribute value
     .            * @return the new first attribute in the attribute list
     .            */
     .           static clish_xmlnode_t *clish_expat_add_attr(clish_xmlnode_t *first, const char *n, const char *v)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   868 ( 0.01%)  	node = malloc(sizeof(clish_xmlnode_t));
44,425 ( 0.68%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (217x)
   434 ( 0.01%)  	if (!node)
     .           		return first;
     .           
   868 ( 0.01%)  	node->name = strdup(n);
49,586 ( 0.76%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   868 ( 0.01%)  	node->content = strdup(v);
54,365 ( 0.83%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   217 ( 0.00%)  	node->children = NULL;
   217 ( 0.00%)  	node->attributes = NULL;
   217 ( 0.00%)  	node->next = NULL;
   217 ( 0.00%)  	node->type = CLISH_XMLNODE_ATTR;
   217 ( 0.00%)  	node->depth = 0;
     .           
     .           	return clish_expat_list_push_back(first, node);
     .           }
     .           
     .           /** Run through an expat attribute list, and create a DOM-like attribute list
     .            *
     .            * @param node parent node
     .            * @param attr NULL-terminated attribute liste
-- line 126 ----------------------------------------
-- line 127 ----------------------------------------
     .            *
     .            * Each attribute uses two slots in the expat attribute list. The first one is
     .            * used to store the name, the second one is used to store the value.
     .            */
     .           static void clish_expat_add_attrlist(clish_xmlnode_t *node, const char **attr)
     .           {
     .           	int i;
     .           
 1,173 ( 0.02%)  	for (i = 0; attr[i]; i += 2) {
   434 ( 0.01%)  		node->attributes = clish_expat_add_attr(node->attributes,
     .           			attr[i], attr[i+1]);
     .           	}
     .           }
     .           
     .           /** Generic make_node() function
     .            *
     .            * @param parent XML parent node
     .            * @param type XML node type
-- line 144 ----------------------------------------
-- line 147 ----------------------------------------
     .            * @param attr attribute list
     .            * @return a new node or NULL on error
     .            */
     .           static clish_xmlnode_t *clish_expat_make_node(clish_xmlnode_t *parent,
     .           					      clish_xmlnodetype_e type,
     .           					      const char *n,
     .           					      const char *v,
     .           					      const char **attr)
 7,428 ( 0.11%)  {
     .           	clish_xmlnode_t *node;
     .           
 2,476 ( 0.04%)  	node = malloc(sizeof(clish_xmlnode_t));
122,324 ( 1.86%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (619x)
 1,238 ( 0.02%)  	if (!node)
     .           		return NULL;
 2,770 ( 0.04%)  	node->name = n ? strdup(n) : NULL;
18,524 ( 0.28%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (98x)
 4,039 ( 0.06%)  	node->content = v ? strdup(v) : NULL;
127,516 ( 1.94%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (521x)
   619 ( 0.01%)  	node->children = NULL;
   619 ( 0.01%)  	node->attributes = NULL;
   619 ( 0.01%)  	node->next = NULL;
 1,238 ( 0.02%)  	node->parent = parent;
 3,085 ( 0.05%)  	node->doc = parent ? parent->doc : NULL;
 2,446 ( 0.04%)  	node->depth = parent ? parent->depth + 1 : 0;
   619 ( 0.01%)  	node->type = type;
     .           
 1,238 ( 0.02%)  	if (attr)
     .           		clish_expat_add_attrlist(node, attr);
     .           
   152 ( 0.00%)  	if (parent)
 2,436 ( 0.04%)  		parent->children = clish_expat_list_push_back(parent->children, node);
     .           
     .           	return node;
 5,571 ( 0.08%)  }
     .           
     .           /** Add a new XML root
     .            *
     .            * @param doc XML document
     .            * @param el root node name
     .            * @param attr expat attribute list
     .            * @return a new root element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_root(clish_xmldoc_t *doc, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   314 ( 0.00%)  	node = clish_expat_make_node(NULL, CLISH_XMLNODE_ELM, el, NULL, attr);
25,901 ( 0.39%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (10x)
    20 ( 0.00%)  	if (!node)
     .           		return doc->root;
     .           
    30 ( 0.00%)  	doc->root = clish_expat_list_push_back(doc->root, node);
     .           
     .           	return node;
     .           }
     .           
     .           /** Add a new XML element as a child
     .            *
     .            * @param cur parent XML element
     .            * @param el element name
     .            * @param attr expat attribute list
     .            * @return a new XMl element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_child(clish_xmlnode_t *cur, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   176 ( 0.00%)  	node = clish_expat_make_node(cur, CLISH_XMLNODE_ELM, el, NULL, attr);
176,849 ( 2.69%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (88x)
   176 ( 0.00%)  	if (!node)
     .           		return cur;
     .           
     .           	return node;
     .           }
     .           
     .           /** Expat handler: element content
     .            *
     .            * @param data user data
     .            * @param s content (not nul-termainated)
     .            * @param len content length
     .            */
     .           static void clish_expat_chardata_handler(void *data, const char *s, int len)
 2,605 ( 0.04%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
 2,605 ( 0.04%)  	if (doc->current) {
 2,605 ( 0.04%)  		char *content = malloc(len + 1);
66,819 ( 1.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (521x)
 2,609 ( 0.04%)  		strncpy(content, s, len);
18,080 ( 0.28%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (520x)
 1,541 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   521 ( 0.01%)  		content[len] = '\0';
     .           
 3,126 ( 0.05%)  		clish_expat_make_node(doc->current, CLISH_XMLNODE_TEXT, NULL, content, NULL);
290,424 ( 4.43%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (521x)
     .           		/*
     .           		 * the previous call is a bit too generic, and strdup() content
     .           		 * so we need to free out own version of content.
     .           		 */
 1,567 ( 0.02%)  		free(content);
45,760 ( 0.70%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (520x)
 1,569 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           	}
 2,605 ( 0.04%)  }
     .           
     .           /** Expat handler: start XML element
     .            *
     .            * @param data user data
     .            * @param el element name (nul-terminated)
     .            * @param attr expat attribute list
     .            */
     .           static void clish_expat_element_start(void *data, const char *el, const char **attr)
   490 ( 0.01%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.00%)  	if (!doc->current) {
     .           		doc->current = clish_expat_add_root(doc, el, attr);
     .           	} else {
    98 ( 0.00%)  		doc->current = clish_expat_add_child(doc->current, el, attr);
     .           	}
   392 ( 0.01%)  }
     .           
     .           /** Expat handler: end XML element
     .            *
     .            * @param data user data
     .            * @param el element name
     .            */
     .           static void clish_expat_element_end(void *data, const char *el)
     .           {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.00%)  	if (doc->current) {
   294 ( 0.00%)  		doc->current = doc->current->parent;
     .           	}
     .           
     .           	el = el; /* Happy compiler */
     .           }
     .           
     .           /** Free a node, its children and its attributes
     .            *
     .            * @param node node to free
     .            */
     .           static void clish_expat_free_node(clish_xmlnode_t *cur)
 3,344 ( 0.05%)  {
     .           	clish_xmlnode_t *node;
     .           	clish_xmlnode_t *first;
     .           
 2,584 ( 0.04%)  	if (cur->attributes) {
     .           		first = cur->attributes;
   651 ( 0.01%)  		while (first) {
     .           			node = first;
   217 ( 0.00%)  			first = first->next;
   217 ( 0.00%)  			clish_expat_free_node(node);
 8,700 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (30x)
     .           		}
     .           	}
 2,569 ( 0.04%)  	if (cur->children) {
     .           		first = cur->children;
 1,827 ( 0.03%)  		while (first) {
     .           			node = first;
   609 ( 0.01%)  			first = first->next;
   609 ( 0.01%)  			clish_expat_free_node(node);
179,286 ( 2.73%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (174x)
     .           		}
     .           	}
 2,508 ( 0.04%)  	if (cur->name)
   630 ( 0.01%)  		free(cur->name);
   880 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.04%)  	if (cur->content)
 1,476 ( 0.02%)  		free(cur->content);
64,973 ( 0.99%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (738x)
 2,508 ( 0.04%)  	free(cur);
   880 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.04%)  }
     .           
     .           /*
     .            * Public interface
     .            */
     .           
     .           int clish_xmldoc_start(void)
     .           {
     .           	return 0;
     .           }
     .           
     .           int clish_xmldoc_stop(void)
     .           {
     .           	return 0;
     2 ( 0.00%)  }
     .           
     .           clish_xmldoc_t *clish_xmldoc_read(const char *filename)
    70 ( 0.00%)  {
     .           	clish_xmldoc_t *doc;
     .           	struct stat sb;
     .           	int fd;
     .           	char *buffer;
     .           	XML_Parser parser;
     .           	int rb;
     .           
    54 ( 0.00%)  	doc = malloc(sizeof(clish_xmldoc_t));
 1,728 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,269 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc (9x)
    20 ( 0.00%)  	if (!doc)
     .           		return NULL;
     .           	memset(doc, 0, sizeof(clish_xmldoc_t));
    44 ( 0.00%)  	doc->filename = strdup(filename);
 1,751 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,723 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (9x)
    44 ( 0.00%)  	parser = XML_ParserCreate(NULL);
 2,156 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
95,826 ( 1.46%)  => ???:XML_ParserCreate (9x)
    20 ( 0.00%)  	if (!parser)
     .           		goto error_parser_create;
    44 ( 0.00%)  	XML_SetUserData(parser, doc);
   949 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    54 ( 0.00%)  => ???:XML_SetUserData (9x)
    44 ( 0.00%)  	XML_SetCharacterDataHandler(parser, clish_expat_chardata_handler);
 1,060 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    18 ( 0.00%)  => ???:XML_SetCharacterDataHandler (9x)
    54 ( 0.00%)  	XML_SetElementHandler(parser,
 1,011 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    27 ( 0.00%)  => ???:XML_SetElementHandler (9x)
     .           		clish_expat_element_start,
     .           		clish_expat_element_end);
     .           
    64 ( 0.00%)  	fd = open(filename, O_RDONLY);
 1,430 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:open (9x)
    20 ( 0.00%)  	if (fd < 0)
     .           		goto error_open;
     .           	fstat(fd, &sb);
    50 ( 0.00%)  	buffer = malloc(sb.st_size+1);
 2,681 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (10x)
    54 ( 0.00%)  	rb = read(fd, buffer, sb.st_size);
 1,446 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (9x)
    20 ( 0.00%)  	if (rb < 0) {
     .           		close(fd);
     .           		goto error_parse;
     .           	}
    20 ( 0.00%)  	buffer[sb.st_size] = 0;
    34 ( 0.00%)  	close(fd);
 1,497 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:close (9x)
     .           
    84 ( 0.00%)  	if (!XML_Parse(parser, buffer, sb.st_size, 1))
1,302,462 (19.85%)  => ???:XML_Parse (9x)
112,859 ( 1.72%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           		goto error_parse;
     .           
    34 ( 0.00%)  	XML_ParserFree(parser);
 6,192 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
46,609 ( 0.71%)  => ???:XML_ParserFree (9x)
    30 ( 0.00%)  	free(buffer);
 1,380 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           
     .           	return doc;
     .           
     .           error_parse:
     .           	free(buffer);
     .           
     .           error_open:
     .           	XML_ParserFree(parser);
     .           
     .           error_parser_create:
     .           	clish_xmldoc_release(doc);
     .           
     .           	return NULL;
    80 ( 0.00%)  }
     .           
     .           void clish_xmldoc_release(clish_xmldoc_t *doc)
    20 ( 0.00%)  {
    20 ( 0.00%)  	if (doc) {
     .           		clish_xmlnode_t *node;
    70 ( 0.00%)  		while (doc->root) {
     .           			node = doc->root;
    20 ( 0.00%)  			doc->root = node->next;
    10 ( 0.00%)  			clish_expat_free_node(node);
191,026 ( 2.91%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node (10x)
     .           		}
    30 ( 0.00%)  		if (doc->filename)
    20 ( 0.00%)  			free(doc->filename);
   880 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
    30 ( 0.00%)  		free(doc);
   880 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           	}
    10 ( 0.00%)  }
     .           
     .           int clish_xmldoc_is_valid(clish_xmldoc_t *doc)
     .           {
    53 ( 0.00%)  	return doc && doc->root;
    12 ( 0.00%)  }
     .           
     .           int clish_xmldoc_error_caps(clish_xmldoc_t *doc)
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return CLISH_XMLERR_NOCAPS;
     .           }
     .           
-- line 403 ----------------------------------------
-- line 419 ----------------------------------------
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return "";
     .           }
     .           
     .           int clish_xmlnode_get_type(clish_xmlnode_t *node)
     .           {
 1,281 ( 0.02%)  	if (node)
   427 ( 0.01%)  		return node->type;
     .           	return CLISH_XMLNODE_UNKNOWN;
   427 ( 0.01%)  }
     .           
     .           clish_xmlnode_t *clish_xmldoc_get_root(clish_xmldoc_t *doc)
     .           {
    20 ( 0.00%)  	if (doc)
    20 ( 0.00%)  		return doc->root;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_parent(clish_xmlnode_t *node)
     .           {
    80 ( 0.00%)  	if (node)
    80 ( 0.00%)  		return node->parent;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_next_child(clish_xmlnode_t *parent,
     .           					  clish_xmlnode_t *curchild)
     .           {
   956 ( 0.01%)  	if (curchild)
   834 ( 0.01%)  		return curchild->next;
   122 ( 0.00%)  	if (parent)
   122 ( 0.00%)  		return parent->children;
     .           	return NULL;
     .           }
     .           
     .           char *clish_xmlnode_fetch_attr(clish_xmlnode_t *node,
     .           			       const char *attrname)
 2,648 ( 0.04%)  {
 1,324 ( 0.02%)  	if (node) {
   662 ( 0.01%)  		clish_xmlnode_t *n = node->attributes;
 4,292 ( 0.07%)  		while (n) {
 9,924 ( 0.15%)  			if (strcmp(n->name, attrname) == 0)
32,589 ( 0.50%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (1,654x)
   187 ( 0.00%)  				return n->content;
 1,467 ( 0.02%)  			n = n->next;
     .           		}
     .           	}
   475 ( 0.01%)  	return NULL;
 2,648 ( 0.04%)  }
     .           
     .           int clish_xmlnode_get_content(clish_xmlnode_t *node, char *content,
     .           			      unsigned int *contentlen)
   182 ( 0.00%)  {
     .           	unsigned int minlen = 1;
     .           
   208 ( 0.00%)  	if (node && content && contentlen) {
    26 ( 0.00%)  		clish_xmlnode_t *children = node->children;
   505 ( 0.01%)  		while (children) {
   960 ( 0.01%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   576 ( 0.01%)  				minlen += strlen(children->content);
 5,074 ( 0.08%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (192x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    52 ( 0.00%)  		if (minlen >= *contentlen) {
     .           			*contentlen = minlen + 1;
     .           			return -E2BIG;
     .           		}
     .           		children = node->children;
    52 ( 0.00%)  		*content = 0;
   407 ( 0.01%)  		while (children) {
   960 ( 0.01%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   580 ( 0.01%)  				strcat(content, children->content);
29,191 ( 0.44%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned (191x)
 1,492 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    26 ( 0.00%)  		return 0;
     .           	}
     .           
     .           	return -EINVAL;
   156 ( 0.00%)  }
     .           
     .           int clish_xmlnode_get_name(clish_xmlnode_t *node, char *name,
     .           	unsigned int *namelen)
   552 ( 0.01%)  {
 1,104 ( 0.02%)  	if (node && name && namelen) {
 1,108 ( 0.02%)  		if (strlen(node->name) >= *namelen) {
 2,192 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (137x)
 1,497 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			*namelen = strlen(node->name) + 1;
     .           			return -E2BIG;
     .           		}
   828 ( 0.01%)  		snprintf(name, *namelen, "%s", node->name);
72,205 ( 1.10%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (138x)
   414 ( 0.01%)  		name[*namelen - 1] = '\0';
   138 ( 0.00%)  		return 0;
     .           	}
     .           	return -EINVAL;
   552 ( 0.01%)  }
     .           
     .           void clish_xmlnode_print(clish_xmlnode_t *node, FILE *out)
     .           {
     .           	if (node) {
     .           		int i;
     .           		clish_xmlnode_t *a;
     .           		for (i=0; i<node->depth; ++i) {
     .           			fprintf(out, "  ");
-- line 520 ----------------------------------------
-- line 525 ----------------------------------------
     .           			fprintf(out, " %s='%s'", a->name, a->content);
     .           			a = a->next;
     .           		}
     .           		fprintf(out, ">...");
     .           	}
     .           }
     .           
     .           void clish_xml_release(void *p)
   661 ( 0.01%)  {
     .           	p = p; /* Happy compiler */
     .           	/* nothing to release */
     .           }
     .           
     .           #endif /* HAVE_LIB_EXPAT */
     .           

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c
--------------------------------------------------------------------------------
Ir             

-- line 31 ----------------------------------------
    .            *    Initial version
    .            *---------------------------------------------------------------
    .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
    .            **************************************************************** */
    .           #include "private.h"
    .           
    .           /*--------------------------------------------------------- */
    .           void *lub_bintree_findnext(lub_bintree_t * this, const void *clientkey)
2,165 ( 0.03%)  {
    .           	lub_bintree_node_t *t = this->root;
    .           	int comp;
    .           
    .           	/*
    .           	 * have a look for a direct match
    .           	 */
2,165 ( 0.03%)  	t = this->root = lub_bintree_splay(this, t, clientkey);
209,861 ( 3.20%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (433x)
    .           
  866 ( 0.01%)  	if (NULL != t) {
    .           		/* now look at what we have got */
2,165 ( 0.03%)  		comp = lub_bintree_compare(this, t, clientkey);
85,919 ( 1.31%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (428x)
  304 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (5x)
  866 ( 0.01%)  		if (comp <= 0) {
    .           			/*
    .           			 * time to fiddle with the right hand side of the tree
    .           			 * we need the closest node from the right hand side
    .           			 */
  351 ( 0.01%)  			t = t->right =
1,755 ( 0.03%)  			    lub_bintree_splay(this, t->right, clientkey);
52,392 ( 0.80%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (351x)
    .           		}
    .           	}
1,272 ( 0.02%)  	if (NULL == t) {
   66 ( 0.00%)  		return NULL;
    .           	} else {
  734 ( 0.01%)  		return lub_bintree_getclientnode(this, t);
    .           	}
1,732 ( 0.03%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c
--------------------------------------------------------------------------------
Ir             

-- line 155 ----------------------------------------
    .           		return 1;
    .           
    .           	return 0;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void utf8_point_left(tinyrl_t * this)
    .           {
  104 ( 0.00%)  	if (!this->utf8)
    .           		return;
  150 ( 0.00%)  	while (this->point &&
   92 ( 0.00%)  		(UTF8_10 == (this->line[this->point] & UTF8_MASK)))
    .           		this->point--;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void utf8_point_right(tinyrl_t * this)
    .           {
    .           	if (!this->utf8)
    .           		return;
    .           	while ((this->point < this->end) &&
    .           		(UTF8_10 == (this->line[this->point] & UTF8_MASK)))
    .           		this->point++;
    .           }
    .           
    .           /*-------------------------------------------------------- */
  325 ( 0.00%)  static unsigned int utf8_nsyms(const tinyrl_t *this, const char *str,
    .           	unsigned int num)
    .           {
    .           	unsigned int nsym = 0;
    .           	unsigned long sym = 0;
    .           	unsigned int i = 0;
    .           
  650 ( 0.01%)  	if (!this->utf8)
    .           		return num;
    .           
3,812 ( 0.06%)  	while (i < num) {
8,347 ( 0.13%)  		if ('\0' == str[i])
    .           			break;
    .           		/* ASCII char */
3,162 ( 0.05%)  		if (!(UTF8_7BIT_MASK & str[i])) {
1,581 ( 0.02%)  			i++;
1,581 ( 0.02%)  			nsym++;
    .           			continue;
    .           		}
    .           		/* Multibyte */
    .           		i += utf8_wchar(&str[i], &sym);
    .           		if (utf8_is_cjk(sym)) /* CJK chars have double-width */
    .           			nsym += 2;
    .           		else
    .           			nsym += 1;
    .           	}
    .           
    .           	return nsym;
  325 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static void tty_set_raw_mode(tinyrl_t * this)
    .           {
    .           	struct termios new_termios;
    .           	int fd;
    .           
   18 ( 0.00%)  	if (!tinyrl_vt100__get_istream(this->term))
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (3x)
    .           		return;
   21 ( 0.00%)  	fd = fileno(tinyrl_vt100__get_istream(this->term));
   18 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (3x)
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (3x)
   21 ( 0.00%)  	if (tcgetattr(fd, &new_termios) < 0)
  150 ( 0.00%)  => /opt/build/glibc/glibc-2.24/termios/../sysdeps/unix/sysv/linux/tcgetattr.c:tcgetattr (3x)
    .           		return;
    3 ( 0.00%)  	new_termios.c_iflag = 0;
    3 ( 0.00%)  	new_termios.c_oflag = OPOST | ONLCR;
    3 ( 0.00%)  	new_termios.c_lflag = 0;
    3 ( 0.00%)  	new_termios.c_cc[VMIN] = 1;
    3 ( 0.00%)  	new_termios.c_cc[VTIME] = 0;
    .           	/* Do the mode switch */
   19 ( 0.00%)  	(void)tcsetattr(fd, TCSADRAIN, &new_termios);
1,586 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  140 ( 0.00%)  => /opt/build/glibc/glibc-2.24/termios/../sysdeps/unix/sysv/linux/tcsetattr.c:tcsetattr (2x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static void tty_restore_mode(const tinyrl_t * this)
    .           {
    .           	int fd;
    .           
   15 ( 0.00%)  	if (!tinyrl_vt100__get_istream(this->term))
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (3x)
    .           		return;
   18 ( 0.00%)  	fd = fileno(tinyrl_vt100__get_istream(this->term));
   18 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (3x)
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (3x)
    .           	/* Do the mode switch */
   18 ( 0.00%)  	(void)tcsetattr(fd, TCSADRAIN, &this->default_termios);
  210 ( 0.00%)  => /opt/build/glibc/glibc-2.24/termios/../sysdeps/unix/sysv/linux/tcsetattr.c:tcsetattr (3x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .           This is called whenever a line is edited in any way.
    .           It signals that if we are currently viewing a history line we should transfer it
    .           to the current buffer
    .           */
    .           static void changed_line(tinyrl_t * this)
  126 ( 0.00%)  {
    .           	/* if the current line is not our buffer then make it so */
  189 ( 0.00%)  	if (this->line != this->buffer) {
    .           		/* replace the current buffer with the new details */
    .           		free(this->buffer);
    .           		this->line = this->buffer = lub_string_dup(this->line);
    .           		this->buffer_size = strlen(this->buffer);
    .           		assert(this->line);
    .           	}
  126 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static int tinyrl_timeout_default(tinyrl_t *this)
    .           {
    .           	this = this; /* Happy compiler */
    .           
    .           	/* Return -1 to close session on timeout */
    .           	return -1;
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static bool_t tinyrl_key_default(tinyrl_t * this, int key)
   62 ( 0.00%)  {
    .           	bool_t result = BOOL_FALSE;
   62 ( 0.00%)  	if (key > 31) {
    .           		char tmp[2];
   62 ( 0.00%)  		tmp[0] = (key & 0xFF), tmp[1] = '\0';
    .           		/* inject this text into the buffer */
  128 ( 0.00%)  		result = tinyrl_insert_text(this, tmp);
3,274 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,174 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text (30x)
    .           	} else {
    .           		/* Call the external hotkey analyzer */
    .           		if (this->hotkey_fn)
    .           			this->hotkey_fn(this, key);
    .           	}
    .           	return result;
  124 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_interrupt(tinyrl_t * this, int key)
    .           {
    .           	tinyrl_crlf(this);
    .           	tinyrl_delete_text(this, 0, this->end);
    .           	this->done = BOOL_TRUE;
    .           	/* keep the compiler happy */
-- line 293 ----------------------------------------
-- line 383 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_down(tinyrl_t * this, int key)
    .           {
    .           	bool_t result = BOOL_FALSE;
    .           	if (this->line != this->buffer) {
    .           		/* we are not already at the bottom */
    .           		/* the iterator will have been set up by the key_up() function */
    .           		tinyrl_history_entry_t *entry =
    6 ( 0.00%)  		    tinyrl_history_getnext(&this->hist_iter);
    .           		if (!entry) {
    .           			/* nothing more in the history list */
    .           			this->line = this->buffer;
    .           		} else {
    .           			this->line = tinyrl_history_entry__get_line(entry);
    .           		}
    .           		/* display the entry moving the insertion point
    .           		 * to the end of the line 
-- line 399 ----------------------------------------
-- line 431 ----------------------------------------
    .           	}
    .           	/* keep the compiler happy */
    .           	key = key;
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_backspace(tinyrl_t *this, int key)
   26 ( 0.00%)  {
    .           	bool_t result = BOOL_FALSE;
  126 ( 0.00%)  	if (this->point) {
   78 ( 0.00%)  		unsigned int end = --this->point;
    .           		utf8_point_left(this);
   78 ( 0.00%)  		tinyrl_delete_text(this, this->point, end);
1,820 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_delete_text (26x)
   26 ( 0.00%)  		result = BOOL_TRUE;
    .           	}
    .           	/* keep the compiler happy */
    .           	key = key;
    .           	return result;
  214 ( 0.00%)  }
  242 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_point_left.part.0 (26x)
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_backword(tinyrl_t *this, int key)
    .           {
    .           	bool_t result = BOOL_FALSE;
    .           
    .               /* remove current whitespace before cursor */
    .           	while (this->point > 0 && isspace(this->line[this->point - 1]))
-- line 458 ----------------------------------------
-- line 562 ----------------------------------------
    .           		break;
    .           	}
    .           
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_tab(tinyrl_t * this, int key)
   34 ( 0.00%)  {
    .           	bool_t result = BOOL_FALSE;
   38 ( 0.00%)  	tinyrl_match_e status = tinyrl_complete_with_extensions(this);
817,457 (12.46%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_complete_with_extensions (16x)
93,846 ( 1.43%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   62 ( 0.00%)  	switch (status) {
    .           	case TINYRL_COMPLETED_MATCH:
    .           	case TINYRL_MATCH:
    .           		/* everything is OK with the world... */
   16 ( 0.00%)  		result = tinyrl_insert_text(this, " ");
  356 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text (4x)
    .           		break;
    .           	case TINYRL_NO_MATCH:
    .           	case TINYRL_MATCH_WITH_EXTENSIONS:
    .           	case TINYRL_AMBIGUOUS:
    .           	case TINYRL_COMPLETED_AMBIGUOUS:
    .           		/* oops don't change the result and let the bell ring */
    .           		break;
    .           	}
    .           	/* keep the compiler happy */
    .           	key = key;
    .           	return result;
   43 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           static void tinyrl_fini(tinyrl_t * this)
    .           {
    .           	/* delete the history session */
    7 ( 0.00%)  	tinyrl_history_delete(this->history);
3,644 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* delete the terminal session */
    7 ( 0.00%)  	tinyrl_vt100_delete(this->term);
  817 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* free up any dynamic strings */
    3 ( 0.00%)  	lub_string_free(this->buffer);
    9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    3 ( 0.00%)  	lub_string_free(this->kill_string);
    9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    3 ( 0.00%)  	lub_string_free(this->last_buffer);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    3 ( 0.00%)  	lub_string_free(this->prompt);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void tinyrl_init(tinyrl_t * this, FILE * istream, FILE * ostream,
    .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
    .           {
    .           	int i;
    .           
  512 ( 0.01%)  	for (i = 0; i < NUM_HANDLERS; i++) {
  512 ( 0.01%)  		this->handlers[i] = tinyrl_key_default;
    .           	}
    .           	/* Default handlers */
    2 ( 0.00%)  	this->handlers[KEY_CR] = tinyrl_key_crlf;
    1 ( 0.00%)  	this->handlers[KEY_LF] = tinyrl_key_crlf;
    2 ( 0.00%)  	this->handlers[KEY_ETX] = tinyrl_key_interrupt;
    2 ( 0.00%)  	this->handlers[KEY_DEL] = tinyrl_key_backspace;
    1 ( 0.00%)  	this->handlers[KEY_BS] = tinyrl_key_backspace;
    2 ( 0.00%)  	this->handlers[KEY_EOT] = tinyrl_key_delete;
    2 ( 0.00%)  	this->handlers[KEY_FF] = tinyrl_key_clear_screen;
    2 ( 0.00%)  	this->handlers[KEY_NAK] = tinyrl_key_erase_line;
    2 ( 0.00%)  	this->handlers[KEY_SOH] = tinyrl_key_start_of_line;
    2 ( 0.00%)  	this->handlers[KEY_ENQ] = tinyrl_key_end_of_line;
    2 ( 0.00%)  	this->handlers[KEY_VT] = tinyrl_key_kill;
    2 ( 0.00%)  	this->handlers[KEY_EM] = tinyrl_key_yank;
    2 ( 0.00%)  	this->handlers[KEY_HT] = tinyrl_key_tab;
    2 ( 0.00%)  	this->handlers[KEY_ETB] = tinyrl_key_backword;
    .           
    1 ( 0.00%)  	this->line = NULL;
    1 ( 0.00%)  	this->max_line_length = 0;
    1 ( 0.00%)  	this->prompt = NULL;
    1 ( 0.00%)  	this->prompt_size = 0;
    1 ( 0.00%)  	this->buffer = NULL;
    1 ( 0.00%)  	this->buffer_size = 0;
    1 ( 0.00%)  	this->done = BOOL_FALSE;
    1 ( 0.00%)  	this->completion_over = BOOL_FALSE;
    1 ( 0.00%)  	this->point = 0;
    1 ( 0.00%)  	this->end = 0;
    1 ( 0.00%)  	this->attempted_completion_function = complete_fn;
    2 ( 0.00%)  	this->timeout_fn = tinyrl_timeout_default;
    1 ( 0.00%)  	this->keypress_fn = NULL;
    1 ( 0.00%)  	this->hotkey_fn = NULL;
    1 ( 0.00%)  	this->state = 0;
    1 ( 0.00%)  	this->kill_string = NULL;
    1 ( 0.00%)  	this->echo_char = '\0';
    1 ( 0.00%)  	this->echo_enabled = BOOL_TRUE;
    1 ( 0.00%)  	this->last_buffer = NULL;
    1 ( 0.00%)  	this->last_point = 0;
    1 ( 0.00%)  	this->last_line_size = 0;
    1 ( 0.00%)  	this->utf8 = BOOL_FALSE;
    .           
    .           	/* create the vt100 terminal */
    9 ( 0.00%)  	this->term = tinyrl_vt100_new(NULL, ostream);
  917 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    8 ( 0.00%)  	tinyrl__set_istream(this, istream);
1,547 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    8 ( 0.00%)  	this->last_width = tinyrl_vt100__get_width(this->term);
3,714 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* create the history */
    8 ( 0.00%)  	this->history = tinyrl_history_new(stifle);
1,742 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_printf(const tinyrl_t * this, const char *fmt, ...)
    7 ( 0.00%)  {
    .           	va_list args;
    .           	int len;
    .           
    6 ( 0.00%)  	va_start(args, fmt);
    8 ( 0.00%)  	len = tinyrl_vt100_vprintf(this->term, fmt, args);
18,066 ( 0.28%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	va_end(args);
    .           
    .           	return len;
    2 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_delete(tinyrl_t * this)
    1 ( 0.00%)  {
    3 ( 0.00%)  	assert(this);
    .           	if (this) {
    .           		/* let the object tidy itself up */
    .           		tinyrl_fini(this);
    .           
    .           		/* release the memory associate with this instance */
    3 ( 0.00%)  		free(this);
  119 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           	}
    1 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           
    .           /*#####################################
    .            * EXPORTED INTERFACE
    .            *##################################### */
    .           /*----------------------------------------------------------------------- */
    .           int tinyrl_getchar(const tinyrl_t * this)
    .           {
  286 ( 0.00%)  	return tinyrl_vt100_getchar(this->term);
4,371 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_getchar (93x)
2,231 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static void tinyrl_internal_print(const tinyrl_t * this, const char *text)
    .           {
  336 ( 0.01%)  	if (this->echo_enabled) {
    .           		/* simply echo the line */
  784 ( 0.01%)  		tinyrl_vt100_printf(this->term, "%s", text);
42,244 ( 0.64%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (112x)
    .           	} else {
    .           		/* replace the line with echo char if defined */
    .           		if (this->echo_char) {
    .           			unsigned int i = strlen(text);
    .           			while (i--) {
    .           				tinyrl_vt100_printf(this->term, "%c",
    .           					this->echo_char);
    .           			}
    .           		}
    .           	}
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
  420 ( 0.01%)  static void tinyrl_internal_position(const tinyrl_t *this, int prompt_len,
    .           	int line_len, unsigned int width)
    .           {
    .           	int rows, cols;
    .           
  945 ( 0.01%)  	rows = ((line_len + prompt_len) / width) - (prompt_len / width);
  105 ( 0.00%)  	cols = ((line_len + prompt_len) % width) - (prompt_len % width);
  210 ( 0.00%)  	if (cols > 0)
  108 ( 0.00%)  		tinyrl_vt100_cursor_back(this->term, cols);
20,075 ( 0.31%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_cursor_back (25x)
1,578 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   79 ( 0.00%)  	else if (cols < 0)
    .           		tinyrl_vt100_cursor_forward(this->term, -cols);
  210 ( 0.00%)  	if (rows > 0)
    .           		tinyrl_vt100_cursor_up(this->term, rows);
  105 ( 0.00%)  	else if (rows < 0)
    .           		tinyrl_vt100_cursor_down(this->term, -rows);
  420 ( 0.01%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           /* Jump to first free line after current multiline input   */
    .           void tinyrl_multi_crlf(const tinyrl_t * this)
   18 ( 0.00%)  {
   15 ( 0.00%)  	unsigned int line_size = strlen(this->last_buffer);
   48 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (3x)
   15 ( 0.00%)  	unsigned int line_len = utf8_nsyms(this, this->last_buffer, line_size);
  156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (3x)
   12 ( 0.00%)  	unsigned int count = utf8_nsyms(this, this->last_buffer, this->last_point);
  156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (3x)
    .           
   15 ( 0.00%)  	tinyrl_internal_position(this, this->prompt_len + line_len,
   72 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_internal_position.isra.5 (3x)
    6 ( 0.00%)  		- (line_len - count), this->last_width);
    9 ( 0.00%)  	tinyrl_crlf(this);
1,152 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_crlf (3x)
    9 ( 0.00%)  	tinyrl_vt100_oflush(this->term);
  219 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (3x)
   15 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           void tinyrl_redisplay(tinyrl_t * this)
  896 ( 0.01%)  {
  560 ( 0.01%)  	unsigned int line_size = strlen(this->line);
1,972 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (112x)
  560 ( 0.01%)  	unsigned int line_len = utf8_nsyms(this, this->line, line_size);
6,828 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (112x)
  448 ( 0.01%)  	unsigned int width = tinyrl_vt100__get_width(this->term);
3,696 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_width (112x)
   10 ( 0.00%)  	unsigned int count, eq_chars = 0;
    .           	int cols;
    .           
    .           	/* Prepare print position */
  642 ( 0.01%)  	if (this->last_buffer && (width == this->last_width)) {
    .           		unsigned int eq_len = 0;
    .           		/* If line and last line have the equal chars at begining */
  412 ( 0.01%)  		eq_chars = lub_string_equal_part(this->line, this->last_buffer,
7,397 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_equal_part (101x)
  849 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			this->utf8);
  918 ( 0.01%)  		eq_len = utf8_nsyms(this, this->last_buffer, eq_chars);
6,103 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (102x)
  510 ( 0.01%)  		count = utf8_nsyms(this, this->last_buffer, this->last_point);
6,395 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (102x)
  612 ( 0.01%)  		tinyrl_internal_position(this, this->prompt_len + eq_len,
24,183 ( 0.37%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_internal_position.isra.5 (102x)
  204 ( 0.00%)  			count - eq_len, width);
    .           	} else {
    .           		/* Prepare to resize */
   20 ( 0.00%)  		if (width != this->last_width) {
    .           			tinyrl_vt100_next_line(this->term);
    .           			tinyrl_vt100_erase_down(this->term);
    .           		}
   74 ( 0.00%)  		tinyrl_vt100_printf(this->term, "%s", this->prompt);
3,800 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (9x)
1,163 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* Print current line */
  112 ( 0.00%)  	tinyrl_internal_print(this, this->line + eq_chars);
  560 ( 0.01%)  	cols = (this->prompt_len + line_len) % width;
  224 ( 0.00%)  	if (!cols && (line_size - eq_chars))
    .           		tinyrl_vt100_next_line(this->term);
    .           	/* Erase down if current line is shorter than previous one */
  224 ( 0.00%)  	if (this->last_line_size > line_size)
  108 ( 0.00%)  		tinyrl_vt100_erase_down(this->term);
10,750 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_erase_down (25x)
1,189 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	/* Move the cursor to the insertion point */
  336 ( 0.01%)  	if (this->point < line_size) {
    .           		unsigned int pre_len = utf8_nsyms(this,
    .           			this->line, this->point);
    .           		count = utf8_nsyms(this, this->line + this->point,
    .           			line_size - this->point);
    .           		tinyrl_internal_position(this, this->prompt_len + pre_len,
    .           			count, width);
    .           	}
    .           
    .           	/* Update the display */
  340 ( 0.01%)  	tinyrl_vt100_oflush(this->term);
16,623 ( 0.25%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (111x)
2,407 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Save the last line buffer */
  336 ( 0.01%)  	lub_string_free(this->last_buffer);
9,270 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (112x)
  448 ( 0.01%)  	this->last_buffer = lub_string_dup(this->line);
17,555 ( 0.27%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (112x)
  224 ( 0.00%)  	this->last_point = this->point;
  112 ( 0.00%)  	this->last_width = width;
  112 ( 0.00%)  	this->last_line_size = line_size;
  896 ( 0.01%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           tinyrl_t *tinyrl_new(FILE * istream, FILE * ostream,
    .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
    9 ( 0.00%)  {
    .           	tinyrl_t *this = NULL;
    .           
    8 ( 0.00%)  	this = malloc(sizeof(tinyrl_t));
1,783 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  	if (this)
    .           		tinyrl_init(this, istream, ostream, stifle, complete_fn);
    .           
    .           	return this;
    7 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static char *internal_insertline(tinyrl_t * this, char *buffer)
    .           {
    .           	char *p;
    .           	char *s = buffer;
    .           
    .           	/* strip any spurious '\r' or '\n' */
-- line 828 ----------------------------------------
-- line 843 ----------------------------------------
    .           	tinyrl_redisplay(this);
    .           
    .           	return s;
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static char *internal_readline(tinyrl_t * this,
    .           	void *context, const char *str)
   30 ( 0.00%)  {
   12 ( 0.00%)  	FILE *istream = tinyrl_vt100__get_istream(this->term);
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (3x)
    .           	char *result = NULL;
    .           	int lerrno = 0;
    .           
    3 ( 0.00%)  	this->done = BOOL_FALSE;
    3 ( 0.00%)  	this->point = 0;
    3 ( 0.00%)  	this->end = 0;
   15 ( 0.00%)  	this->buffer = lub_string_dup("");
  468 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
   12 ( 0.00%)  	this->buffer_size = strlen(this->buffer);
   48 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (3x)
    3 ( 0.00%)  	this->line = this->buffer;
    3 ( 0.00%)  	this->context = context;
    .           
    .           	/* Interactive session */
   15 ( 0.00%)  	if (this->isatty && !str) {
    3 ( 0.00%)  		unsigned int utf8_cont = 0; /* UTF-8 continue bytes */
    3 ( 0.00%)  		unsigned int esc_cont = 0; /* Escape sequence continues */
    .           		char esc_seq[10]; /* Buffer for ESC sequence */
    3 ( 0.00%)  		char *esc_p = esc_seq;
    .           
    .           		/* Set the terminal into raw mode */
    .           		tty_set_raw_mode(this);
   13 ( 0.00%)  		tinyrl_reset_line_state(this);
6,547 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,757 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_reset_line_state (2x)
    .           
  197 ( 0.00%)  		while (!this->done) {
    .           			int key;
    .           
  380 ( 0.01%)  			key = tinyrl_getchar(this);
2,949 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,650 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_getchar (93x)
    .           
    .           			/* Error || EOF || Timeout */
  188 ( 0.00%)  			if (key < 0) {
    .           				if ((VT100_TIMEOUT == key) &&
    .           					!this->timeout_fn(this))
    .           					continue;
    .           				/* It's time to finish the session */
    .           				this->done = BOOL_TRUE;
    .           				this->line = NULL;
    .           				lerrno = ENOENT;
    .           				continue;
    .           			}
    .           
    .           			/* Real key pressed */
    .           			/* Common callback for any key */
  282 ( 0.00%)  			if (this->keypress_fn)
  282 ( 0.00%)  				this->keypress_fn(this, key);
2,483 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_wdog.c:clish_shell_keypress_fn (94x)
    .           
    .           			/* Check for ESC sequence. It's a special case. */
  564 ( 0.01%)  			if (!esc_cont && (key == KEY_ESC)) {
    .           				esc_cont = 1; /* Start ESC sequence */
    .           				esc_p = esc_seq;
    .           				continue;
    .           			}
  188 ( 0.00%)  			if (esc_cont) {
    .           				/* Broken sequence */
    9 ( 0.00%)  				if (esc_p >= (esc_seq + sizeof(esc_seq) - 1)) {
    .           					esc_cont = 0;
    .           					continue;
    .           				}
    .           				/* Dump the control sequence into sequence buffer
    .           				   ANSI standard control sequences will end
    .           				   with a character between 64 - 126 */
    .           				*esc_p = key & 0xff;
    .           				esc_p++;
-- line 913 ----------------------------------------
-- line 917 ----------------------------------------
    .           					tinyrl_escape_seq(this, esc_seq);
    .           					esc_cont = 0;
    .           					tinyrl_redisplay(this);
    .           				}
    .           				continue;
    .           			}
    .           
    .           			/* Call the handler for this key */
  564 ( 0.01%)  			if (!this->handlers[key](this, key))
911,852 (13.89%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_tab (17x)
39,255 ( 0.60%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_key_space (1x)
33,840 ( 0.52%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_key_enter (3x)
6,886 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_default (31x)
2,714 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_backspace (42x)
  124 ( 0.00%)  				tinyrl_ding(this);
16,385 ( 0.25%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_ding (29x)
1,959 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  282 ( 0.00%)  			if (this->done) /* Some handler set the done flag */
    .           				continue; /* It will break the loop */
    .           
  273 ( 0.00%)  			if (this->utf8) {
  182 ( 0.00%)  				if (!(UTF8_7BIT_MASK & key)) /* ASCII char */
    .           					utf8_cont = 0;
    .           				else if (utf8_cont && (UTF8_10 == (key & UTF8_MASK))) /* Continue byte */
    .           					utf8_cont--;
    .           				else if (UTF8_11 == (key & UTF8_MASK)) { /* First byte of multibyte char */
    .           					/* Find out number of char's bytes */
    .           					int b = key;
    .           					utf8_cont = 0;
    .           					while ((utf8_cont < 6) && (UTF8_10 != (b & UTF8_MASK))) {
-- line 939 ----------------------------------------
-- line 941 ----------------------------------------
    .           						b = b << 1;
    .           					}
    .           				}
    .           			}
    .           			/* For non UTF-8 encoding the utf8_cont is always 0.
    .           			   For UTF-8 it's 0 when one-byte symbol or we get
    .           			   all bytes for the current multibyte character. */
    .           			if (!utf8_cont)
  546 ( 0.01%)  				tinyrl_redisplay(this);
143,817 ( 2.19%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay (91x)
    .           		}
    .           		/* If the last character in the line (other than NULL)
    .           		   is a space remove it. */
   42 ( 0.00%)  		if (this->end && this->line && isspace(this->line[this->end - 1]))
    9 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (3x)
    .           			tinyrl_delete_text(this, this->end - 1, this->end);
    .           		/* Restores the terminal mode */
    .           		tty_restore_mode(this);
    .           
    .           	/* Non-interactive session */
    .           	} else {
    .           		char *s = NULL, buffer[80];
    .           		size_t len = sizeof(buffer);
-- line 961 ----------------------------------------
-- line 987 ----------------------------------------
    .           		 * error from fgets.
    .           		 */
    .           		if (this->line && !this->handlers[KEY_LF](this, KEY_LF)) {
    .           			/* an issue has occured */
    .           			this->line = NULL;
    .           			lerrno = ENOEXEC;
    .           		}
    .           		if (str)
    3 ( 0.00%)  			lub_string_free(tmp);
    .           	}
    .           	/*
    .           	 * duplicate the string for return to the client 
    .           	 * we have to duplicate as we may be referencing a
    .           	 * history entry or our internal buffer
    .           	 */
   15 ( 0.00%)  	result = this->line ? lub_string_dup(this->line) : NULL;
  465 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
    .           
    .           	/* free our internal buffer */
    9 ( 0.00%)  	free(this->buffer);
  264 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (3x)
    3 ( 0.00%)  	this->buffer = NULL;
    .           
    6 ( 0.00%)  	if (!result)
    .           		errno = lerrno; /* get saved errno */
    .           	return result;
   27 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           char *tinyrl_readline(tinyrl_t * this, void *context)
    .           {
    6 ( 0.00%)  	return internal_readline(this, context, NULL);
1,183,938 (18.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:internal_readline (3x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           char *tinyrl_forceline(tinyrl_t * this, void *context, const char *line)
    .           {
    .           	return internal_readline(this, context, line);
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .            * Ensure that buffer has enough space to hold len characters,
    .            * possibly reallocating it if necessary. The function returns BOOL_TRUE
    .            * if the line is successfully extended, BOOL_FALSE if not.
    .            */
    .           bool_t tinyrl_extend_line_buffer(tinyrl_t * this, unsigned int len)
   12 ( 0.00%)  {
    .           	bool_t result = BOOL_TRUE;
    .           	char *new_buffer;
    4 ( 0.00%)  	size_t new_len = len;
    .           
   12 ( 0.00%)  	if (this->buffer_size >= len)
    4 ( 0.00%)  		return result;
    .           
    .           	/*
    .           	 * What we do depends on whether we are limited by
    .           	 * memory or a user imposed limit.
    .           	 */
   16 ( 0.00%)  	if (this->max_line_length == 0) {
    .           		/* make sure we don't realloc too often */
    4 ( 0.00%)  		if (new_len < this->buffer_size + 10)
    .           			new_len = this->buffer_size + 10;
    .           		/* leave space for terminator */
   28 ( 0.00%)  		new_buffer = realloc(this->buffer, new_len + 1);
  524 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (4x)
    .           
    8 ( 0.00%)  		if (!new_buffer) {
    .           			tinyrl_ding(this);
    .           			result = BOOL_FALSE;
    .           		} else {
    4 ( 0.00%)  			this->buffer_size = new_len;
    8 ( 0.00%)  			this->line = this->buffer = new_buffer;
    .           		}
    .           	} else {
    .           		if (new_len < this->max_line_length) {
    .           
    .           			/* Just reallocate once to the max size */
    .           			new_buffer = realloc(this->buffer,
    .           				this->max_line_length);
    .           
-- line 1064 ----------------------------------------
-- line 1072 ----------------------------------------
    .           			}
    .           		} else {
    .           			tinyrl_ding(this);
    .           			result = BOOL_FALSE;
    .           		}
    .           	}
    .           
    .           	return result;
   20 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .            * Insert text into the line at the current cursor position.
    .            */
    .           bool_t tinyrl_insert_text(tinyrl_t * this, const char *text)
  180 ( 0.00%)  {
  144 ( 0.00%)  	unsigned int delta = strlen(text);
  576 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (36x)
    .           
    .           	/*
    .           	 * If the client wants to change the line ensure that the line and buffer
    .           	 * references are in sync
    .           	 */
   72 ( 0.00%)  	changed_line(this);
  252 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:changed_line (36x)
    .           
  144 ( 0.00%)  	if ((delta + this->end) > (this->buffer_size)) {
    .           		/* extend the current buffer */
   12 ( 0.00%)  		if (BOOL_FALSE ==
   16 ( 0.00%)  			tinyrl_extend_line_buffer(this, this->end + delta))
  936 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  483 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_extend_line_buffer (3x)
    .           			return BOOL_FALSE;
    .           	}
    .           
  108 ( 0.00%)  	if (this->point < this->end) {
    .           		/* move the current text to the right (including the terminator) */
    .           		memmove(&this->buffer[this->point + delta],
    .           			&this->buffer[this->point],
    .           			(this->end - this->point) + 1);
    .           	} else {
    .           		/* terminate the string */
  108 ( 0.00%)  		this->buffer[this->end + delta] = '\0';
    .           	}
    .           
    .           	/* insert the new text */
  220 ( 0.00%)  	strncpy(&this->buffer[this->point], text, delta);
1,547 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,115 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (35x)
    .           
    .           	/* now update the indexes */
   36 ( 0.00%)  	this->point += delta;
   36 ( 0.00%)  	this->end += delta;
    .           
   36 ( 0.00%)  	return BOOL_TRUE;
  148 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /* 
    .            * A convenience function for displaying a list of strings in columnar
    .            * format on Readline's output stream. matches is the list of strings,
    .            * in argv format, such as a list of completion matches. len is the number
    .            * of strings in matches, and max is the length of the longest string in matches.
    .            * This function uses the setting of print-completions-horizontally to select
    .            * how the matches are displayed
    .            */
    .           void tinyrl_display_matches(const tinyrl_t *this,
    .           	char *const *matches, unsigned int len, size_t max)
   84 ( 0.00%)  {
   21 ( 0.00%)  	unsigned int width = tinyrl_vt100__get_width(this->term);
  231 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_width (7x)
    .           	unsigned int cols, rows;
    .           
    .           	/* Find out column and rows number */
   21 ( 0.00%)  	if (max < width)
   42 ( 0.00%)  		cols = (width + 1) / (max + 1); /* allow for a space between words */
    .           	else
    .           		cols = 1;
   35 ( 0.00%)  	rows = len / cols + 1;
    .           
   14 ( 0.00%)  	assert(matches);
    .           	if (matches) {
    .           		unsigned int r, c;
    7 ( 0.00%)  		len--, matches++; /* skip the subtitution string */
    .           		/* Print out a table of completions */
   91 ( 0.00%)  		for (r = 0; r < rows && len; r++) {
  480 ( 0.01%)  			for (c = 0; c < cols && len; c++) {
  146 ( 0.00%)  				const char *match = *matches++;
   73 ( 0.00%)  				len--;
  219 ( 0.00%)  				if ((c + 1) == cols) /* Last str in row */
   73 ( 0.00%)  					tinyrl_vt100_printf(this->term, "%s",
    .           						match);
    .           				else
  365 ( 0.01%)  					tinyrl_vt100_printf(this->term, "%-*s ",
49,929 ( 0.76%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (73x)
    .           						max, match);
    .           			}
   28 ( 0.00%)  			tinyrl_crlf(this);
2,688 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_crlf (7x)
    .           		}
    .           	}
   56 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .            * Delete the text between start and end in the current line. (inclusive)
    .            * This adjusts the rl_point and rl_end indexes appropriately.
    .            */
    .           void tinyrl_delete_text(tinyrl_t * this, unsigned int start, unsigned int end)
  216 ( 0.00%)  {
    .           	unsigned int delta;
    .           
    .           	/*
    .           	 * If the client wants to change the line ensure that the line and buffer
    .           	 * references are in sync
    .           	 */
   27 ( 0.00%)  	changed_line(this);
  189 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:changed_line (27x)
    .           
    .           	/* make sure we play it safe */
    .           	if (start > end) {
    .           		unsigned int tmp = end;
    .           		start = end;
    .           		end = tmp;
    .           	}
   54 ( 0.00%)  	if (end > this->end)
    .           		end = this->end;
    .           
   81 ( 0.00%)  	delta = (end - start) + 1;
    .           
    .           	/* move any text which is left */
  220 ( 0.00%)  	memmove(&this->buffer[start],
1,482 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  338 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy@GLIBC_2.2.5 (26x)
  108 ( 0.00%)  		&this->buffer[start + delta], this->end - end);
    .           
    .           	/* now adjust the indexs */
   81 ( 0.00%)  	if (this->point >= start) {
    .           		if (this->point > end) {
    .           			/* move the insertion point back appropriately */
  162 ( 0.00%)  			this->point -= delta;
    .           		} else {
    .           			/* move the insertion point to the start */
    .           			this->point = start;
    .           		}
    .           	}
   81 ( 0.00%)  	if (this->end > end)
  104 ( 0.00%)  		this->end -= delta;
    .           	else
    1 ( 0.00%)  		this->end = start;
    .           	/* put a terminator at the end of the buffer */
   54 ( 0.00%)  	this->buffer[this->end] = '\0';
  162 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           bool_t tinyrl_bind_key(tinyrl_t * this, int key, tinyrl_key_func_t * fn)
    .           {
    4 ( 0.00%)  	bool_t result = BOOL_FALSE;
    .           
    8 ( 0.00%)  	if ((key >= 0) && (key < 256)) {
    .           		/* set the key handling function */
    8 ( 0.00%)  		this->handlers[key] = fn;
    4 ( 0.00%)  		result = BOOL_TRUE;
    .           	}
    .           
    .           	return result;
    4 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           /*
    .            * Returns an array of strings which is a list of completions for text.
    .            * If there are no completions, returns NULL. The first entry in the
    .            * returned array is the substitution for text. The remaining entries
    .            * are the possible completions. The array is terminated with a NULL pointer.
    .            *
-- line 1234 ----------------------------------------
-- line 1286 ----------------------------------------
    .           
    .           	if (matches)
    .           		matches[offset] = NULL;
    .           	return matches;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_delete_matches(char **this)
   55 ( 0.00%)  {
    .           	char **matches = this;
  308 ( 0.00%)  	while (*matches) {
    .           		/* release the memory for each contained string */
  264 ( 0.00%)  		free(*matches++);
7,744 ( 0.12%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (88x)
    .           	}
    .           	/* release the memory for the array */
   33 ( 0.00%)  	free(this);
1,106 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (11x)
   33 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_crlf(const tinyrl_t * this)
    .           {
   85 ( 0.00%)  	tinyrl_vt100_printf(this->term, "\n");
6,443 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (17x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           /*
    .            * Ring the terminal bell, obeying the setting of bell-style.
    .            */
    .           void tinyrl_ding(const tinyrl_t * this)
    .           {
   94 ( 0.00%)  	tinyrl_vt100_ding(this->term);
16,298 ( 0.25%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_ding (29x)
1,281 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_reset_line_state(tinyrl_t * this)
   20 ( 0.00%)  {
   34 ( 0.00%)  	lub_string_free(this->last_buffer);
  795 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  810 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
   10 ( 0.00%)  	this->last_buffer = NULL;
   10 ( 0.00%)  	this->last_line_size = 0;
    .           
   34 ( 0.00%)  	tinyrl_redisplay(this);
11,898 ( 0.18%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay (9x)
4,974 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   10 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_replace_line(tinyrl_t * this, const char *text, int clear_undo)
    .           {
    .           	size_t new_len = strlen(text);
    .           
    .           	/* ignored for now */
    .           	clear_undo = clear_undo;
-- line 1335 ----------------------------------------
-- line 1344 ----------------------------------------
    .           		this->point = this->end = new_len;
    .           	}
    .           	tinyrl_redisplay(this);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static tinyrl_match_e
    .           tinyrl_do_complete(tinyrl_t * this, bool_t with_extensions)
  162 ( 0.00%)  {
    .           	tinyrl_match_e result = TINYRL_NO_MATCH;
    .           	char **matches = NULL;
    .           	unsigned int start, end;
   10 ( 0.00%)  	bool_t completion = BOOL_FALSE;
    .           	bool_t prefix = BOOL_FALSE;
    .           	int i = 0;
    .           
    .           	/* find the start and end of the current word */
   18 ( 0.00%)  	start = end = this->point;
  333 ( 0.01%)  	while (start && !isspace(this->line[start - 1]))
1,546 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (12x)
    .           		start--;
    .           
   54 ( 0.00%)  	if (this->attempted_completion_function) {
   18 ( 0.00%)  		this->completion_over = BOOL_FALSE;
   18 ( 0.00%)  		this->completion_error_over = BOOL_FALSE;
    .           		/* try and complete the current line buffer */
  108 ( 0.00%)  		matches = this->attempted_completion_function(this,
836,730 (12.75%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_completion (18x)
    .           			this->line, start, end);
    .           	}
    .           	if (!matches && (BOOL_FALSE == this->completion_over)) {
    .           		/* insert default completion call here... */
    .           	}
   36 ( 0.00%)  	if (!matches)
   14 ( 0.00%)  		return result;
    .           
    .           	/* identify and insert a common prefix if there is one */
  136 ( 0.00%)  	if (0 != strncmp(matches[0], &this->line[start],
1,491 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  176 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (11x)
  187 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse42.S:__strncmp_sse42 (10x)
    .           		strlen(matches[0]))) {
    .           		/*
    .           		 * delete the original text not including
    .           		 * the current insertion point character
    .           		 */
    1 ( 0.00%)  		if (this->end != end)
    3 ( 0.00%)  			end--;
    8 ( 0.00%)  		tinyrl_delete_text(this, start, end);
2,267 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  		if (BOOL_FALSE == tinyrl_insert_text(this, matches[0]))
   84 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text (1x)
    .           			return TINYRL_NO_MATCH;
    2 ( 0.00%)  		completion = BOOL_TRUE;
    .           	}
  286 ( 0.00%)  	for (i = 1; matches[i]; i++) {
    .           		/* this is just a prefix string */
  235 ( 0.00%)  		if (0 == lub_string_nocasecmp(matches[0], matches[i]))
  867 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,016 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (76x)
  253 ( 0.00%)  			prefix = BOOL_TRUE;
    .           	}
    .           	/* is there more than one completion? */
   43 ( 0.00%)  	if (matches[2]) {
    .           		char **tmp = matches;
    .           		unsigned int max, len;
    .           		max = len = 0;
  348 ( 0.01%)  		while (*tmp) {
  160 ( 0.00%)  			size_t size = strlen(*tmp++);
1,280 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (80x)
    .           			len++;
   80 ( 0.00%)  			if (size > max)
  240 ( 0.00%)  				max = size;
    .           		}
   21 ( 0.00%)  		if (completion)
    .           			result = TINYRL_COMPLETED_AMBIGUOUS;
   14 ( 0.00%)  		else if (prefix)
    7 ( 0.00%)  			result = TINYRL_MATCH_WITH_EXTENSIONS;
    .           		else
    7 ( 0.00%)  			result = TINYRL_AMBIGUOUS;
    .           		if (with_extensions || !prefix) {
    .           			/* Either we always want to show extensions or
    .           			 * we haven't been able to complete the current line
    .           			 * and there is just a prefix, so let the user see the options
    .           			 */
   32 ( 0.00%)  			tinyrl_crlf(this);
1,055 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,304 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_crlf (6x)
   46 ( 0.00%)  			tinyrl_display_matches(this, matches, len, max);
44,982 ( 0.69%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_display_matches (6x)
10,372 ( 0.16%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   28 ( 0.00%)  			tinyrl_reset_line_state(this);
10,050 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_reset_line_state (7x)
    .           		}
    .           	} else {
    .           		result = completion ?
   20 ( 0.00%)  			TINYRL_COMPLETED_MATCH : TINYRL_MATCH;
    .           	}
    .           	/* free the memory */
   37 ( 0.00%)  	tinyrl_delete_matches(matches);
2,162 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
8,124 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_delete_matches (10x)
    .           	/* redisplay the line */
   33 ( 0.00%)  	tinyrl_redisplay(this);
13,488 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay (11x)
    .           
    .           	return result;
  162 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           tinyrl_match_e tinyrl_complete_with_extensions(tinyrl_t * this)
    .           {
   34 ( 0.00%)  	return tinyrl_do_complete(this, BOOL_TRUE);
910,446 (13.87%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_do_complete (17x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           tinyrl_match_e tinyrl_complete(tinyrl_t * this)
    .           {
    2 ( 0.00%)  	return tinyrl_do_complete(this, BOOL_FALSE);
31,750 ( 0.48%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_do_complete (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void *tinyrl__get_context(const tinyrl_t * this)
    .           {
  116 ( 0.00%)  	return this->context;
  116 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *tinyrl__get_line(const tinyrl_t * this)
    .           {
    4 ( 0.00%)  	return this->line;
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           tinyrl_history_t *tinyrl__get_history(const tinyrl_t * this)
    .           {
    3 ( 0.00%)  	return this->history;
    3 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_completion_over(tinyrl_t * this)
    .           {
   36 ( 0.00%)  	this->completion_over = BOOL_TRUE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_completion_error_over(tinyrl_t * this)
    .           {
    .           	this->completion_error_over = BOOL_TRUE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t tinyrl_is_completion_error_over(const tinyrl_t * this)
    .           {
    1 ( 0.00%)  	return this->completion_error_over;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_done(tinyrl_t * this)
    .           {
    6 ( 0.00%)  	this->done = BOOL_TRUE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_enable_echo(tinyrl_t * this)
    .           {
    .           	this->echo_enabled = BOOL_TRUE;
    .           }
    .           
-- line 1494 ----------------------------------------
-- line 1496 ----------------------------------------
    .           void tinyrl_disable_echo(tinyrl_t * this, char echo_char)
    .           {
    .           	this->echo_enabled = BOOL_FALSE;
    .           	this->echo_char = echo_char;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl__set_istream(tinyrl_t * this, FILE * istream)
   10 ( 0.00%)  {
   10 ( 0.00%)  	tinyrl_vt100__set_istream(this->term, istream);
  785 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__set_istream (1x)
    4 ( 0.00%)  	if (istream) {
    .           		int fd;
   14 ( 0.00%)  		this->isatty = isatty(fileno(istream)) ? BOOL_TRUE : BOOL_FALSE;
1,511 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
    .           		/* Save terminal settings to restore on exit */
    3 ( 0.00%)  		fd = fileno(istream);
    6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
    8 ( 0.00%)  		tcgetattr(fd, &this->default_termios);
1,590 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	} else
    1 ( 0.00%)  		this->isatty = BOOL_FALSE;
    7 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl__get_isatty(const tinyrl_t * this)
    .           {
    3 ( 0.00%)  	return this->isatty;
    3 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl__get_istream(const tinyrl_t * this)
    .           {
   16 ( 0.00%)  	return tinyrl_vt100__get_istream(this->term);
  815 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (3x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl__get_ostream(const tinyrl_t * this)
    .           {
    .           	return tinyrl_vt100__get_ostream(this->term);
    .           }
    .           
-- line 1533 ----------------------------------------
-- line 1534 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           const char *tinyrl__get_prompt(const tinyrl_t * this)
    .           {
    .           	return this->prompt;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_prompt(tinyrl_t *this, const char *prompt)
   15 ( 0.00%)  {
    9 ( 0.00%)  	if (this->prompt) {
    4 ( 0.00%)  		lub_string_free(this->prompt);
  180 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (2x)
    2 ( 0.00%)  		this->prompt_size = 0;
    2 ( 0.00%)  		this->prompt_len = 0;
    .           	}
   15 ( 0.00%)  	this->prompt = lub_string_dup(prompt);
  467 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
    6 ( 0.00%)  	if (this->prompt) {
   16 ( 0.00%)  		this->prompt_size = strlen(this->prompt);
1,462 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   32 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (2x)
   18 ( 0.00%)  		this->prompt_len = utf8_nsyms(this, this->prompt,
  145 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (3x)
    .           			this->prompt_size);
    .           	}
   12 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl__get_utf8(const tinyrl_t * this)
    .           {
    .           	return this->utf8;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_utf8(tinyrl_t * this, bool_t utf8)
    .           {
    2 ( 0.00%)  	this->utf8 = utf8;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_timeout(tinyrl_t *this, int timeout)
    .           {
   16 ( 0.00%)  	tinyrl_vt100__set_timeout(this->term, timeout);
  777 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__set_timeout (3x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_timeout_fn(tinyrl_t *this,
    .           	tinyrl_timeout_fn_t *fn)
    .           {
    2 ( 0.00%)  	this->timeout_fn = fn;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_keypress_fn(tinyrl_t *this,
    .           	tinyrl_keypress_fn_t *fn)
    .           {
    2 ( 0.00%)  	this->keypress_fn = fn;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_hotkey_fn(tinyrl_t *this,
    .           	tinyrl_key_func_t *fn)
    .           {
    2 ( 0.00%)  	this->hotkey_fn = fn;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl_is_quoting(const tinyrl_t * this)
   19 ( 0.00%)  {
   19 ( 0.00%)  	bool_t result = BOOL_FALSE;
    .           	/* count the quotes upto the current insertion point */
   19 ( 0.00%)  	unsigned int i = 0;
  415 ( 0.01%)  	while (i < this->point) {
   42 ( 0.00%)  		if (result && (this->line[i] == '\\')) {
    .           			i++;
    .           			if (i >= this->point)
    .           				break;
    .           			i++;
    .           			continue;
    .           		}
  363 ( 0.01%)  		if (this->line[i++] == '"') {
    .           			result = result ? BOOL_FALSE : BOOL_TRUE;
    .           		}
    .           	}
    .           	return result;
    5 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl_is_empty(const tinyrl_t *this)
    .           {
    4 ( 0.00%)  	return (this->point == 0) ? BOOL_TRUE : BOOL_FALSE;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_limit_line_length(tinyrl_t * this, unsigned int length)
    .           {
    .           	this->max_line_length = length;
    .           }
    .           
    .           /*--------------------------------------------------------- */
-- line 1628 ----------------------------------------
-- line 1635 ----------------------------------------
    .           extern unsigned int tinyrl__get_height(const tinyrl_t *this)
    .           {
    .           	return tinyrl_vt100__get_height(this->term);
    .           }
    .           
    .           /*----------------------------------------------------------*/
    .           int tinyrl__save_history(const tinyrl_t *this, const char *fname)
    .           {
    7 ( 0.00%)  	return tinyrl_history_save(this->history, fname);
12,595 ( 0.19%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*----------------------------------------------------------*/
    .           int tinyrl__restore_history(tinyrl_t *this, const char *fname)
    .           {
    7 ( 0.00%)  	return tinyrl_history_restore(this->history, fname);
32,091 ( 0.49%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*----------------------------------------------------------*/
    .           void tinyrl__stifle_history(tinyrl_t *this, unsigned int stifle)
    .           {
    7 ( 0.00%)  	tinyrl_history_stifle(this->history, stifle);
  770 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/view/view.c
--------------------------------------------------------------------------------
Ir             

-- line 17 ----------------------------------------
    .           /*---------------------------------------------------------
    .            * PRIVATE META FUNCTIONS
    .            *--------------------------------------------------------- */
    .           int clish_view_bt_compare(const void *clientnode, const void *clientkey)
    .           {
    .           	const clish_view_t *this = clientnode;
    .           	const char *key = clientkey;
    .           
  207 ( 0.00%)  	return strcmp(this->name, key);
2,223 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (69x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void clish_view_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
   14 ( 0.00%)  {
    .           	const clish_view_t *this = clientnode;
    .           
    .           	/* fill out the opaque key */
   60 ( 0.00%)  	strcpy((char *)key, this->name);
1,495 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  292 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (13x)
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PRIVATE METHODS
    .            *--------------------------------------------------------- */
    .           static void clish_view_init(clish_view_t * this, const char *name, const char *prompt)
    .           {
    .           	/* set up defaults */
   20 ( 0.00%)  	this->name = lub_string_dup(name);
  889 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
    5 ( 0.00%)  	this->prompt = NULL;
    5 ( 0.00%)  	this->depth = 0;
    5 ( 0.00%)  	this->restore = CLISH_RESTORE_NONE;
    5 ( 0.00%)  	this->access = NULL;
    .           
    .           	/* Be a good binary tree citizen */
   15 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
   25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (5x)
    .           
    .           	/* initialise the tree of commands for this view */
   44 ( 0.00%)  	lub_bintree_init(&this->tree,
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (5x)
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_offset (4x)
    .           		clish_command_bt_offset(),
    .           		clish_command_bt_compare, clish_command_bt_getkey);
    .           
    .           	/* Initialise the list of namespaces.
    .           	 * It's important to add new items to the
    .           	 * tail of list.
    .           	 */
   20 ( 0.00%)  	this->nspaces = lub_list_new(NULL);
  671 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (5x)
    .           
    .           	/* set up the defaults */
   24 ( 0.00%)  	clish_view__set_prompt(this, prompt);
  827 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  825 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__set_prompt (4x)
    .           
    .           	/* Initialize hotkey structures */
   19 ( 0.00%)  	this->hotkeys = clish_hotkeyv_new();
  734 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  509 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/hotkey/hotkey.c:clish_hotkeyv_new (4x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           static void clish_view_fini(clish_view_t * this)
    .           {
    .           	clish_command_t *cmd;
    .           	lub_list_node_t *iter;
    .           	clish_nspace_t *nspace;
    .           
    .           	/* delete each command held by this view */
  191 ( 0.00%)  	while ((cmd = lub_bintree_findfirst(&this->tree))) {
2,111 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (31x)
    .           		/* remove the command from the tree */
  104 ( 0.00%)  		lub_bintree_remove(&this->tree, cmd);
14,565 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c:lub_bintree_remove (26x)
    .           		/* release the instance */
   82 ( 0.00%)  		clish_command_delete(cmd);
37,182 ( 0.57%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_delete (25x)
3,380 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* Free namespaces list */
   30 ( 0.00%)  	while ((iter = lub_list__get_head(this->nspaces))) {
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
    .           		/* Remove the nspace from the list */
    5 ( 0.00%)  		lub_list_del(this->nspaces, iter);
    .           		nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
    .           		lub_list_node_free(iter);
    .           		/* Free the instance */
    .           		clish_nspace_delete(nspace);
    .           	}
   10 ( 0.00%)  	lub_list_free(this->nspaces);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_free (5x)
    .           
    .           	/* Free hotkey structures */
   19 ( 0.00%)  	clish_hotkeyv_delete(this->hotkeys);
  767 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  456 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/hotkey/hotkey.c:clish_hotkeyv_delete (4x)
    .           
    .           	/* free our memory */
   15 ( 0.00%)  	lub_string_free(this->name);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   15 ( 0.00%)  	lub_string_free(this->prompt);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   15 ( 0.00%)  	lub_string_free(this->access);
   45 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC META FUNCTIONS
    .            *--------------------------------------------------------- */
    .           size_t clish_view_bt_offset(void)
    .           {
    .           	return offsetof(clish_view_t, bt_node);
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_t *clish_view_new(const char *name, const char *prompt)
   25 ( 0.00%)  {
   20 ( 0.00%)  	clish_view_t *this = malloc(sizeof(clish_view_t));
1,181 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (5x)
    .           
   10 ( 0.00%)  	if (this)
    .           		clish_view_init(this, name, prompt);
    .           	return this;
   25 ( 0.00%)  }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC METHODS
    .            *--------------------------------------------------------- */
    .           void clish_view_delete(clish_view_t * this)
   25 ( 0.00%)  {
    .           	clish_view_fini(this);
   15 ( 0.00%)  	free(this);
  440 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (5x)
   15 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_view_new_command(clish_view_t * this,
    .           	const char *name, const char *help)
  162 ( 0.00%)  {
    .           	/* allocate the memory for a new parameter definition */
   85 ( 0.00%)  	clish_command_t *cmd = clish_command_new(name, help);
36,792 ( 0.56%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_new (26x)
3,605 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  	assert(cmd);
    .           
    .           	/* if this is a command other than the startup command... */
   81 ( 0.00%)  	if (NULL != help) {
    .           		/* ...insert it into the binary tree for this view */
  156 ( 0.00%)  		if (-1 == lub_bintree_insert(&this->tree, cmd)) {
7,256 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (26x)
    .           			/* inserting a duplicate command is bad */
    .           			clish_command_delete(cmd);
    .           			cmd = NULL;
    .           		}
    .           	}
    .           	return cmd;
  135 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           /* This method identifies the command (if any) which provides
    .            * the longest match with the specified line of text.
    .            *
    .            * NB this comparison is case insensitive.
    .            *
    .            * this - the view instance upon which to operate
    .            * line - the command line to analyse 
    .            */
    .           clish_command_t *clish_view_resolve_prefix(clish_view_t * this,
    .           	const char *line, bool_t inherit)
  500 ( 0.01%)  {
   50 ( 0.00%)  	clish_command_t *result = NULL, *cmd;
   50 ( 0.00%)  	char *buffer = NULL;
    .           	lub_argv_t *argv;
    .           	unsigned i;
    .           
    .           	/* create a vector of arguments */
  200 ( 0.00%)  	argv = lub_argv_new(line, 0);
45,216 ( 0.69%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (50x)
    .           
  504 ( 0.01%)  	for (i = 0; i < lub_argv__get_count(argv); i++) {
  144 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (72x)
    .           		/* set our buffer to be that of the first "i" arguments  */
  434 ( 0.01%)  		lub_string_cat(&buffer, lub_argv__get_arg(argv, i));
11,812 ( 0.18%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (48x)
  480 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (48x)
    .           
    .           		/* set the result to the longest match */
  288 ( 0.00%)  		cmd = clish_view_find_command(this, buffer, inherit);
42,571 ( 0.65%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (48x)
    .           
    .           		/* job done */
   96 ( 0.00%)  		if (!cmd)
    .           			break;
    .           		result = cmd;
    .           
    .           		/* ready for the next word */
   88 ( 0.00%)  		lub_string_cat(&buffer, " ");
5,368 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (22x)
    .           	}
    .           
    .           	/* free up our dynamic storage */
  150 ( 0.00%)  	lub_string_free(buffer);
3,690 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (50x)
  150 ( 0.00%)  	lub_argv_delete(argv);
14,368 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (50x)
    .           
    .           	return result;
  450 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_view_resolve_command(clish_view_t *this,
    .           	const char *line, bool_t inherit)
  150 ( 0.00%)  {
  104 ( 0.00%)  	clish_command_t *result = clish_view_resolve_prefix(this, line, inherit);
126,253 ( 1.92%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_prefix (49x)
1,065 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
  118 ( 0.00%)  	if (result) {
   72 ( 0.00%)  		clish_action_t *action = clish_command__get_action(result);
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (18x)
   76 ( 0.00%)  		clish_config_t *config = clish_command__get_config(result);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   34 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_config (17x)
  114 ( 0.00%)  		if (!clish_action__get_script(action) &&
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_script (18x)
   46 ( 0.00%)  			(!clish_action__get_builtin(action)) &&
   24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_builtin (12x)
   29 ( 0.00%)  			(CLISH_CONFIG_NONE == clish_config__get_op(config)) &&
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config__get_op (4x)
   29 ( 0.00%)  			(!clish_command__get_param_count(result)) &&
1,435 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_param_count (4x)
   15 ( 0.00%)  			(!clish_command__get_viewname(result))) {
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_viewname (5x)
    .           			/* if this doesn't do anything we've
    .           			 * not resolved a command
    .           			 */
   35 ( 0.00%)  			result = NULL;
    .           		}
    .           	}
    .           
    .           	return result;
  250 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_view_find_command(clish_view_t * this,
    .           	const char *name, bool_t inherit)
  592 ( 0.01%)  {
    .           	clish_command_t *result = NULL;
    .           
    .           	/* Search the current view */
  222 ( 0.00%)  	result = lub_bintree_find(&this->tree, name);
47,963 ( 0.73%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (74x)
    .           
  148 ( 0.00%)  	if (inherit) {
    .           		lub_list_node_t *iter;
    .           		clish_command_t *cmd;
    .           		clish_nspace_t *nspace;
    .           
    .           		/* Iterate elements. It's important to iterate
    .           		 * items starting from tail bacause the next
    .           		 * NAMESPACE has higher priority than previous one
    .           		 * in a case then the both NAMESPACEs have the
    .           		 * commands with the same name.
    .           		 */
  288 ( 0.00%)  		for(iter = lub_list__get_tail(this->nspaces);
   96 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_tail (48x)
    .           			iter; iter = lub_list_node__get_prev(iter)) {
    .           			nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
    .           			cmd = clish_nspace_find_command(nspace, name);
    .           			/* Choose the longest match */
    .           			result = clish_command_choose_longest(result, cmd);
    .           		}
    .           	}
    .           
    .           	return result;
  518 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           static const clish_command_t *find_next_completion(clish_view_t * this,
    .           		const char *iter_cmd, const char *line)
    .           {
    .           	clish_command_t *cmd;
1,092 ( 0.02%)  	const char *name = "";
    .           	lub_argv_t *largv;
    .           	unsigned words;
    .           
    .           	/* build an argument vector for the line */
  910 ( 0.01%)  	largv = lub_argv_new(line, 0);
71,168 ( 1.08%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (182x)
  728 ( 0.01%)  	words = lub_argv__get_count(largv);
  364 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (182x)
    .           
    .           	/* account for trailing space */
  672 ( 0.01%)  	if (!*line || lub_ctype_isspace(line[strlen(line) - 1]))
  848 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  684 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (36x)
  455 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_isspace (35x)
  166 ( 0.00%)  		words++;
    .           
    .           	if (iter_cmd)
    .           		name = iter_cmd;
2,818 ( 0.04%)  	while ((cmd = lub_bintree_findnext(&this->tree, name))) {
336,860 ( 5.13%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext (401x)
1,047 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,368 ( 0.02%)  		name = clish_command__get_name(cmd);
1,368 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (342x)
1,714 ( 0.03%)  		if (words == lub_string_wordcount(name)) {
76,754 ( 1.17%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (341x)
1,058 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			/* only bother with commands of which this line is a prefix */
    .           			/* this is a completion */
1,176 ( 0.02%)  			if (lub_string_nocasestr(name, line) == name)
19,015 ( 0.29%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasestr (174x)
  901 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           				break;
    .           		}
    .           	}
    .           	/* clean up the dynamic memory */
  732 ( 0.01%)  	lub_argv_delete(largv);
28,516 ( 0.43%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (181x)
  882 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	return cmd;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t *clish_view_find_next_completion(clish_view_t * this,
    .           	const char *iter_cmd, const char *line,
    .           	clish_nspace_visibility_e field, bool_t inherit)
2,184 ( 0.03%)  {
    .           	const clish_command_t *result, *cmd;
    .           	clish_nspace_t *nspace;
    .           	lub_list_node_t *iter;
    .           
    .           	/* ask local view for next command */
    .           	result = find_next_completion(this, iter_cmd, line);
    .           
  546 ( 0.01%)  	if (!inherit)
    .           		return result;
    .           
    .           	/* ask the imported namespaces for next command */
    .           
    .           	/* Iterate elements */
1,278 ( 0.02%)  	for(iter = lub_list__get_tail(this->nspaces);
  914 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  362 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_tail (181x)
    .           		iter; iter = lub_list_node__get_prev(iter)) {
    .           		nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
    .           		if (!clish_nspace__get_visibility(nspace, field))
    .           			continue;
    .           		cmd = clish_nspace_find_next_completion(nspace,
    .           			iter_cmd, line, field);
    .           		if (clish_command_diff(result, cmd) > 0)
    .           			result = cmd;
    .           	}
    .           
    .           	return result;
1,638 ( 0.02%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view_insert_nspace(clish_view_t * this, clish_nspace_t * nspace)
    .           {
    .           	lub_list_add(this->nspaces, nspace);
    .           }
    .           
    .           /*--------------------------------------------------------- */
-- line 323 ----------------------------------------
-- line 331 ----------------------------------------
    .           		clish_nspace_clean_proxy((clish_nspace_t *)lub_list_node__get_data(iter));
    .           	}
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC ATTRIBUTES
    .            *--------------------------------------------------------- */
    .           lub_bintree_t * clish_view__get_command_tree(clish_view_t *this)
    5 ( 0.00%)  {
    .           	return &this->tree;
    5 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           lub_list_t * clish_view__get_nspace_tree(clish_view_t *this)
    .           {
    5 ( 0.00%)  	return this->nspaces;
    5 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_view__get_name(const clish_view_t * this)
    .           {
    .           	return this->name;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view__set_prompt(clish_view_t * this, const char *prompt)
    5 ( 0.00%)  {
   15 ( 0.00%)  	assert(!this->prompt);
   20 ( 0.00%)  	this->prompt = lub_string_dup(prompt);
  941 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
   10 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_view__get_prompt(const clish_view_t *this)
    .           {
    3 ( 0.00%)  	return this->prompt;
    3 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view__set_depth(clish_view_t * this, unsigned depth)
    .           {
    .           	this->depth = depth;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned clish_view__get_depth(const clish_view_t * this)
    .           {
    3 ( 0.00%)  	return this->depth;
    3 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view__set_restore(clish_view_t * this,
    .           	clish_view_restore_e restore)
    .           {
    .           	this->restore = restore;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_restore_e clish_view__get_restore(const clish_view_t * this)
    .           {
    3 ( 0.00%)  	return this->restore;
    3 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_view_insert_hotkey(const clish_view_t *this, const char *key, const char *cmd)
    .           {
    .           	return clish_hotkeyv_insert(this->hotkeys, key, cmd);
    .           }
    .           
    .           /*--------------------------------------------------------- */
-- line 399 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c
--------------------------------------------------------------------------------
Ir           

-- line 23 ----------------------------------------
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_compare(const void *first, const void *second)
  .           {
  .           	const clish_sym_t *f = (const clish_sym_t *)first;
  .           	const clish_sym_t *s = (const clish_sym_t *)second;
  .           
180 ( 0.00%)  	return strcmp(f->name, s->name);
1,194 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (45x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_sym_new(const char *name, void *func, int type)
168 ( 0.00%)  {
  .           	clish_sym_t *this;
  .           
 84 ( 0.00%)  	this = malloc(sizeof(*this));
4,434 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (21x)
 88 ( 0.00%)  	this->name = lub_string_dup(name);
3,642 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (20x)
782 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 21 ( 0.00%)  	this->func = func;
 21 ( 0.00%)  	this->type = type;
 21 ( 0.00%)  	this->api = CLISH_SYM_API_SIMPLE;
 21 ( 0.00%)  	this->permanent = BOOL_FALSE;
  .           
  .           	return this;
147 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym_free(clish_sym_t *this)
 42 ( 0.00%)  {
 42 ( 0.00%)  	if (!this)
  .           		return;
 63 ( 0.00%)  	lub_string_free(this->name);
1,728 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (21x)
 63 ( 0.00%)  	free(this);
1,848 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
 21 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_func(clish_sym_t *this, void *func)
  .           {
  .           	this->func = func;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void *clish_sym__get_func(clish_sym_t *this)
  .           {
 14 ( 0.00%)  	return this->func;
 14 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_permanent(clish_sym_t *this, bool_t permanent)
  .           {
 26 ( 0.00%)  	this->permanent = permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_sym__get_permanent(clish_sym_t *this)
  .           {
  .           	return this->permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_name(clish_sym_t *this, const char *name)
 15 ( 0.00%)  {
  9 ( 0.00%)  	lub_string_free(this->name);
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 12 ( 0.00%)  	this->name = lub_string_dup(name);
885 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 12 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_sym__get_name(clish_sym_t *this)
  .           {
 51 ( 0.00%)  	return this->name;
 51 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_plugin(clish_sym_t *this, clish_plugin_t *plugin)
  .           {
 26 ( 0.00%)  	this->plugin = plugin;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_sym__get_plugin(clish_sym_t *this)
  .           {
  .           	return this->plugin;
  .           }
  .           
-- line 106 ----------------------------------------
-- line 108 ----------------------------------------
  .           void clish_sym__set_type(clish_sym_t *this, int type)
  .           {
  .           	this->type = type;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym__get_type(const clish_sym_t *this)
  .           {
 13 ( 0.00%)  	return this->type;
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_api(clish_sym_t *this, clish_sym_api_e api)
  .           {
  2 ( 0.00%)  	this->api = api;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_api_e clish_sym__get_api(const clish_sym_t *this)
  .           {
  5 ( 0.00%)  	return this->api;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_clone(clish_sym_t *dst, clish_sym_t *src)
  .           {
  .           	char *name;
  .           
 24 ( 0.00%)  	if (!dst || !src)
  .           		return -1;
  6 ( 0.00%)  	name = dst->name;
 60 ( 0.00%)  	*dst = *src;
  6 ( 0.00%)  	dst->name = name;
  .           
 12 ( 0.00%)  	return 0;
  .           }
  .           
  .           /**********************************************************
  .            * PLUGIN functions                                       *
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_plugin_new(const char *name)
  4 ( 0.00%)  {
  .           	clish_plugin_t *this;
  .           
  4 ( 0.00%)  	this = malloc(sizeof(*this));
344 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           
  4 ( 0.00%)  	this->name = lub_string_dup(name);
279 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  1 ( 0.00%)  	this->conf = NULL;
  1 ( 0.00%)  	this->alias = NULL;
  1 ( 0.00%)  	this->file = NULL;
  1 ( 0.00%)  	this->builtin_flag = BOOL_FALSE; /* The plugin is shared object by default */
  1 ( 0.00%)  	this->dlhan = NULL;
  .           	/* Initialise the list of symbols */
  4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
175 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
  .           	/* Constructor and destructor */
  1 ( 0.00%)  	this->init = NULL;
  1 ( 0.00%)  	this->fini = NULL;
  .           	/* Flags */
  1 ( 0.00%)  	this->rtld_global = BOOL_FALSE; /* The dlopen() use RTLD_LOCAL by default */
  .           
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_free(clish_plugin_t *this, void *userdata)
  5 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return;
  .           
  .           	/* Execute destructor */
  3 ( 0.00%)  	if (this->fini)
  .           		this->fini(userdata, this);
  .           
  3 ( 0.00%)  	lub_string_free(this->name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->alias);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->file);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->conf);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  .           
  .           	/* Free symbol list */
 85 ( 0.00%)  	while ((iter = lub_list__get_head(this->syms))) {
 28 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (14x)
  .           		/* Remove the symbol from the list */
 53 ( 0.00%)  		lub_list_del(this->syms, iter);
143 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_del (13x)
  .           		/* Free the instance */
 82 ( 0.00%)  		clish_sym_free((clish_sym_t *)lub_list_node__get_data(iter));
786 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,268 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_free (12x)
 26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (13x)
 43 ( 0.00%)  		lub_list_node_free(iter);
946 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,080 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_free (12x)
  .           	}
  6 ( 0.00%)  	lub_list_free(this->syms);
844 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           #ifdef HAVE_DLFCN_H
  3 ( 0.00%)  	if (this->dlhan)
  6 ( 0.00%)  		dlclose(this->dlhan);
3,766 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           #endif
  3 ( 0.00%)  	free(this);
 88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_generic(clish_plugin_t *this,
  .           	void *func, const char *name, int type, bool_t permanent)
 39 ( 0.00%)  {
  .           	clish_sym_t *sym;
  .           
 91 ( 0.00%)  	if (!name || !func)
  .           		return NULL;
  .           
 91 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
6,299 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (13x)
  .           		return NULL;
 56 ( 0.00%)  	clish_sym__set_plugin(sym, this);
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_plugin (12x)
 56 ( 0.00%)  	clish_sym__set_permanent(sym, permanent);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_permanent (12x)
 52 ( 0.00%)  	lub_list_add(this->syms, sym);
4,444 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (13x)
  .           
  .           	return sym;
 65 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_sym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
  .           	return clish_plugin_add_generic(this, func,
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_psym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
 36 ( 0.00%)  	return clish_plugin_add_generic(this, func,
7,967 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (9x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_osym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  1 ( 0.00%)  {
  .           	clish_sym_t *s;
  .           
  7 ( 0.00%)  	if (!(s = clish_plugin_add_generic(this, func,
989 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (1x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE)))
  .           		return s;
  8 ( 0.00%)  	clish_sym__set_api(s, CLISH_SYM_API_STDOUT);
631 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return s;
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_posym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  .           {
  .           	clish_sym_t *s;
  .           
-- line 261 ----------------------------------------
-- line 274 ----------------------------------------
  .           	return clish_plugin_add_generic(this, func,
  .           		name, type, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_phook(clish_plugin_t *this,
  .           	void *func, const char *name, int type)
  .           {
 13 ( 0.00%)  	return clish_plugin_add_generic(this, func,
2,633 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,671 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (2x)
  .           		name, type, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_add_fini(clish_plugin_t *this,
  .           	clish_plugin_fini_t *fini)
  .           {
  .           	this->fini = fini;
-- line 290 ----------------------------------------
-- line 306 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           clish_plugin_init_t * clish_plugin_get_init(clish_plugin_t *this)
  .           {
  .           	return this->init;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_get_sym(clish_plugin_t *this, const char *name, int type)
 42 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           	clish_sym_t *sym;
  .           
  .           	/* Iterate elements */
 86 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (6x)
100 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (25x)
  .           		int res;
124 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (31x)
217 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
891 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (31x)
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (31x)
104 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
  .           			return sym;
 25 ( 0.00%)  		if (res > 0) /* No chances to find name */
  .           			break;
  .           	}
  .           
  .           	return NULL;
 42 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static int clish_plugin_load_shared(clish_plugin_t *this)
  .           {
  .           #ifdef HAVE_DLFCN_H
  1 ( 0.00%)  	char *file = NULL; /* Plugin so file name */
  1 ( 0.00%)  	char *init_name = NULL; /* Init function name */
  .           	int flag = RTLD_NOW;
  .           
  3 ( 0.00%)  	if (this->file) {
  .           		file = lub_string_dup(this->file);
  .           	} else {
  4 ( 0.00%)  		lub_string_cat(&file, "clish_plugin_");
343 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  		lub_string_cat(&file, this->name);
264 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  5 ( 0.00%)  		lub_string_cat(&file, ".so");
272 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  .           	}
  .           
  .           	/* Open dynamic library */
  7 ( 0.00%)  	if (clish_plugin__get_rtld_global(this))
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  		flag |= RTLD_GLOBAL;
  .           	else
  .           		flag |= RTLD_LOCAL;
  8 ( 0.00%)  	this->dlhan = dlopen(file, flag);
133,732 ( 2.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(file);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  2 ( 0.00%)  	if (!this->dlhan) {
  .           		fprintf(stderr, "Error: Can't open plugin \"%s\": %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	/* Get plugin init function */
  5 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_PREFIX);
286 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, this->name);
264 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_SUFFIX);
282 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  9 ( 0.00%)  	this->init = (clish_plugin_init_t *)dlsym(this->dlhan, init_name);
4,005 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(init_name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	if (!this->init) {
  .           		fprintf(stderr, "Error: Can't get plugin \"%s\" init function: %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	return 0;
  .           #else /* HAVE_DLFCN_H */
  .           	/* We have no any dl functions. */
-- line 376 ----------------------------------------
-- line 377 ----------------------------------------
  .           	fprintf(stderr, "Error: Can't get plugin \"%s\" init function.\n",
  .           		this->name);
  .           	return -1;
  .           #endif /* HAVE_DLFCN_H */
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_plugin_load(clish_plugin_t *this, void *userdata)
  4 ( 0.00%)  {
  .           	int res;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return -1;
  5 ( 0.00%)  	assert(this->name);
  .           
  .           	/* Builtin plugins already have init function. */
  3 ( 0.00%)  	if (!this->builtin_flag) {
  .           		if (clish_plugin_load_shared(this) < 0)
  .           			return -1;
  .           	}
  .           	if (!this->init) {
  .           		fprintf(stderr, "Error: PLUGIN %s has no init function\n",
  .           			this->name);
  .           		return -1;
  .           	}
  .           	/* Execute init function */
  6 ( 0.00%)  	if ((res = this->init(userdata, this)))
14,032 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/plugins/clish/builtin_init.c:clish_plugin_clish_init (1x)
  .           		fprintf(stderr, "Error: Plugin %s init retcode: %d\n",
  .           			this->name, res);
  .           
  .           	return res;
  6 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_name(const clish_plugin_t *this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 416 ----------------------------------------
-- line 424 ----------------------------------------
  .           char *clish_plugin__get_alias(const clish_plugin_t *this)
  .           {
  .           	return this->alias;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_pubname(const clish_plugin_t *this)
  .           {
 12 ( 0.00%)  	return (this->alias ? this->alias : this->name);
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin__set_file(clish_plugin_t *this, const char *file)
  .           {
  .           	lub_string_free(this->file);
  .           	this->file = lub_string_dup(file);
  .           }
  .           
-- line 441 ----------------------------------------
-- line 474 ----------------------------------------
  .           void clish_plugin__set_rtld_global(clish_plugin_t *this, bool_t rtld_global)
  .           {
  .           	this->rtld_global = rtld_global;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_plugin__get_rtld_global(const clish_plugin_t *this)
  .           {
  1 ( 0.00%)  	return this->rtld_global;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c
--------------------------------------------------------------------------------
Ir             

-- line 6 ----------------------------------------
    .           #include "private.h"
    .           #include "lub/string.h"
    .           #include "lub/argv.h"
    .           
    .           /*-------------------------------------------------------- */
    .           void clish_shell_iterator_init(clish_shell_iterator_t * iter,
    .           	clish_nspace_visibility_e field)
    .           {
   18 ( 0.00%)  	iter->last_cmd = NULL;
   36 ( 0.00%)  	iter->field = field;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t *clish_shell_resolve_command(const clish_shell_t * this,
    .           	const char *line)
  125 ( 0.00%)  {
    .           	clish_command_t *cmd, *result;
    .           
    .           	/* Search the current view */
  204 ( 0.00%)  	result = clish_view_resolve_command(clish_shell__get_view(this), line, BOOL_TRUE);
45,546 ( 0.69%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_command (24x)
1,775 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  225 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (25x)
    .           	/* Search the global view */
  125 ( 0.00%)  	cmd = clish_view_resolve_command(this->global, line, BOOL_TRUE);
84,689 ( 1.29%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_command (25x)
    .           
  104 ( 0.00%)  	result = clish_command_choose_longest(result, cmd);
  725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  787 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_choose_longest (24x)
    .           
    .           	return result;
   75 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t *clish_shell_resolve_prefix(const clish_shell_t * this,
    .           	const char *line)
    .           {
    .           	clish_command_t *cmd, *result;
    .           
    .           	/* Search the current view */
-- line 40 ----------------------------------------
-- line 45 ----------------------------------------
    .           	result = clish_command_choose_longest(result, cmd);
    .           
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           const clish_command_t *clish_shell_find_next_completion(const clish_shell_t *
    .           	this, const char *line, clish_shell_iterator_t * iter)
  728 ( 0.01%)  {
    .           	const clish_command_t *result, *cmd;
    .           
    .           	/* ask the local view for next command */
1,278 ( 0.02%)  	result = clish_view_find_next_completion(clish_shell__get_view(this),
160,411 ( 2.44%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_next_completion (90x)
5,840 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  819 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (91x)
    .           		iter->last_cmd, line, iter->field, BOOL_TRUE);
    .           	/* ask the global view for next command */
  728 ( 0.01%)  	cmd = clish_view_find_next_completion(this->global,
392,700 ( 5.98%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_next_completion (91x)
    .           		iter->last_cmd, line, iter->field, BOOL_TRUE);
    .           
  368 ( 0.01%)  	if (clish_command_diff(result, cmd) > 0)
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,580 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_diff (90x)
    .           		result = cmd;
    .           
  182 ( 0.00%)  	if (!result)
   18 ( 0.00%)  		iter->last_cmd = NULL;
    .           	else
  292 ( 0.00%)  		iter->last_cmd = clish_command__get_name(result);
  292 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (73x)
    .           
    .           	return result;
  637 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_shell_param_generator(clish_shell_t *this, lub_argv_t *matches,
    .           	const clish_command_t *cmd, const char *line, unsigned offset)
  116 ( 0.00%)  {
   36 ( 0.00%)  	const char *name = clish_command__get_name(cmd);
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (9x)
   45 ( 0.00%)  	char *text = lub_string_dup(&line[offset]);
1,402 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (9x)
    .           	clish_ptype_t *ptype;
   36 ( 0.00%)  	unsigned idx = lub_string_wordcount(name);
2,686 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (9x)
    .           	/* get the index of the current parameter */
   27 ( 0.00%)  	unsigned index = lub_string_wordcount(line) - idx;
3,288 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (9x)
    .           	clish_context_t context;
    .           
   54 ( 0.00%)  	if ((0 != index) || (offset && line[offset - 1] == ' ')) {
   40 ( 0.00%)  		lub_argv_t *argv = lub_argv_new(line, 0);
11,353 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (8x)
   28 ( 0.00%)  		clish_pargv_t *pargv = clish_pargv_new();
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  791 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_new (7x)
   29 ( 0.00%)  		clish_pargv_t *completion = clish_pargv_new();
  904 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_new (8x)
    8 ( 0.00%)  		unsigned completion_index = 0;
    .           		const clish_param_t *param = NULL;
    .           
    .           		/* if there is some text for the parameter then adjust the index */
    .           		if ((0 != index) && (text[0] != '\0'))
    6 ( 0.00%)  			index--;
    .           
    .           		/* Parse command line to get completion pargv's */
    .           		/* Prepare context */
   56 ( 0.00%)  		clish_context_init(&context, this);
   64 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (8x)
   40 ( 0.00%)  		clish_context__set_cmd(&context, cmd);
   32 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__set_cmd (8x)
   44 ( 0.00%)  		clish_context__set_pargv(&context, pargv);
  689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   28 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__set_pargv (7x)
    .           
  116 ( 0.00%)  		clish_shell_parse_pargv(pargv, cmd, &context,
5,919 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
14,193 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:clish_shell_parse_pargv (7x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (8x)
    .           			clish_command__get_paramv(cmd),
    .           			argv, &idx, completion, index + idx);
   24 ( 0.00%)  		lub_argv_delete(argv);
3,022 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (8x)
    .           
  104 ( 0.00%)  		while ((param = clish_pargv__get_param(completion,
  670 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   75 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv__get_param (11x)
    .           			completion_index++))) {
    .           			char *result;
    .           			/* The param is args so it has no completion */
   20 ( 0.00%)  			if (param == clish_command__get_args(cmd))
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (4x)
    .           				continue;
    .           			/* The switch has no completion string */
   20 ( 0.00%)  			if (CLISH_PARAM_SWITCH == clish_param__get_mode(param))
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (4x)
    .           				continue;
    .           			/* The subcommand is identified by it's value */
    8 ( 0.00%)  			if (CLISH_PARAM_SUBCOMMAND ==
   12 ( 0.00%)  				clish_param__get_mode(param)) {
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (4x)
    .           				result = clish_param__get_value(param);
    .           				if (result)
    .           					lub_argv_add(matches, result);
    .           			}
    .           			/* The 'completion' field of PARAM */
   24 ( 0.00%)  			if (clish_param__get_completion(param)) {
  719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_completion (3x)
    .           				char *str, *q;
    .           				char *saveptr = NULL;
    .           				str = clish_shell_expand(
    .           					clish_param__get_completion(param), SHELL_VAR_ACTION, &context);
    .           				if (str) {
   16 ( 0.00%)  					for (q = strtok_r(str, " \n", &saveptr);
    .           						q; q = strtok_r(NULL, " \n", &saveptr)) {
    .           						if (q == strstr(q, text))
    .           							lub_argv_add(matches, q);
    .           					}
    .           					lub_string_free(str);
    .           				}
    .           			}
    .           			/* The common PARAM. Let ptype do the work */
   24 ( 0.00%)  			if ((ptype = clish_param__get_ptype(param)))
  663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype (3x)
   24 ( 0.00%)  				clish_ptype_word_generator(ptype, matches, text);
6,434 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,170 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_word_generator (3x)
    .           		}
   24 ( 0.00%)  		clish_pargv_delete(completion);
1,761 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_delete (8x)
   32 ( 0.00%)  		clish_pargv_delete(pargv);
1,731 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_delete (8x)
    .           	}
    .           
   27 ( 0.00%)  	lub_string_free(text);
  810 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
   72 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/command/command.c
--------------------------------------------------------------------------------
Ir             

-- line 15 ----------------------------------------
    .           
    .           /*---------------------------------------------------------
    .            * PRIVATE METHODS
    .            *--------------------------------------------------------- */
    .           static void
    .           clish_command_init(clish_command_t *this, const char *name, const char *text)
    .           {
    .           	/* initialise the node part */
  108 ( 0.00%)  	this->name = lub_string_dup(name);
5,722 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
  108 ( 0.00%)  	this->text = lub_string_dup(text);
5,797 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
    .           
    .           	/* Be a good binary tree citizen */
   81 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
  135 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (27x)
    .           
    .           	/* set up defaults */
   27 ( 0.00%)  	this->link = NULL;
   27 ( 0.00%)  	this->alias = NULL;
   27 ( 0.00%)  	this->alias_view = NULL;
   85 ( 0.00%)  	this->paramv = clish_paramv_new();
4,421 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_new (26x)
  801 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   27 ( 0.00%)  	this->viewid = NULL;
   27 ( 0.00%)  	this->viewname = NULL;
   85 ( 0.00%)  	this->action = clish_action_new();
4,443 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action_new (26x)
  802 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   85 ( 0.00%)  	this->config = clish_config_new();
5,589 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config_new (26x)
  808 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   27 ( 0.00%)  	this->detail = NULL;
   27 ( 0.00%)  	this->escape_chars = NULL;
   27 ( 0.00%)  	this->regex_chars = NULL;
   27 ( 0.00%)  	this->args = NULL;
   27 ( 0.00%)  	this->pview = NULL;
   27 ( 0.00%)  	this->lock = BOOL_TRUE;
   27 ( 0.00%)  	this->interrupt = BOOL_FALSE;
   27 ( 0.00%)  	this->dynamic = BOOL_FALSE;
   27 ( 0.00%)  	this->access = NULL;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           static void clish_command_fini(clish_command_t * this)
   54 ( 0.00%)  {
   81 ( 0.00%)  	lub_string_free(this->name);
2,430 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->text);
2,349 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
    .           
    .           	/* Link need not full cleanup */
   54 ( 0.00%)  	if (this->link)
    .           		return;
    .           
    .           	/* finalize each of the parameter instances */
   85 ( 0.00%)  	clish_paramv_delete(this->paramv);
16,821 ( 0.26%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_delete (26x)
  749 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   85 ( 0.00%)  	clish_action_delete(this->action);
4,555 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action_delete (26x)
  755 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   85 ( 0.00%)  	clish_config_delete(this->config);
3,692 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config_delete (26x)
  787 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   81 ( 0.00%)  	lub_string_free(this->alias);
  243 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->alias_view);
  243 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->viewname);
  972 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->viewid);
  486 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->detail);
  702 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->escape_chars);
  324 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->regex_chars);
  243 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->access);
  324 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	if (this->args)
    2 ( 0.00%)  		clish_param_delete(this->args);
  467 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_delete (1x)
   53 ( 0.00%)  }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC META FUNCTIONS
    .            *--------------------------------------------------------- */
    .           size_t clish_command_bt_offset(void)
    .           {
    .           	return offsetof(clish_command_t, bt_node);
   10 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_bt_compare(const void *clientnode, const void *clientkey)
    .           {
    .           	const clish_command_t *this = clientnode;
    .           	const char *key = clientkey;
    .           
7,599 ( 0.12%)  	return lub_string_nocasecmp(this->name, key);
357,105 ( 5.44%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (2,533x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
   73 ( 0.00%)  {
    .           	const clish_command_t *this = clientnode;
    .           
    .           	/* fill out the opaque key */
  292 ( 0.00%)  	strcpy((char *)key, this->name);
1,602 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (73x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_new(const char *name, const char *help)
  135 ( 0.00%)  {
  108 ( 0.00%)  	clish_command_t *this = malloc(sizeof(clish_command_t));
9,888 ( 0.15%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (27x)
    .           
   54 ( 0.00%)  	if (this)
    .           		clish_command_init(this, name, help);
    .           
    .           	return this;
  135 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_new_link(const char *name,
    .           	const char *help, const clish_command_t * ref)
    .           {
    .           	if (!ref)
    .           		return NULL;
    .           
-- line 119 ----------------------------------------
-- line 154 ----------------------------------------
    .           
    .           	return this;
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC METHODS
    .            *--------------------------------------------------------- */
    .           void clish_command_delete(clish_command_t * this)
   54 ( 0.00%)  {
   27 ( 0.00%)  	clish_command_fini(this);
37,451 ( 0.57%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_fini (27x)
   81 ( 0.00%)  	free(this);
3,275 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (27x)
   27 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command_insert_param(clish_command_t * this, clish_param_t * param)
    .           {
   61 ( 0.00%)  	clish_paramv_insert(this->paramv, param);
3,426 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_insert (18x)
  865 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_help(const clish_command_t *this)
    .           {
    .           	this = this; /* Happy compiler */
    .           
    .           	return 0;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_choose_longest(clish_command_t * cmd1,
    .           	clish_command_t * cmd2)
  150 ( 0.00%)  {
   62 ( 0.00%)  	unsigned len1 = (cmd1 ? strlen(clish_command__get_name(cmd1)) : 0);
   32 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (2x)
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (2x)
  128 ( 0.00%)  	unsigned len2 = (cmd2 ? strlen(clish_command__get_name(cmd2)) : 0);
  208 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (13x)
   52 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (13x)
    .           
    .           	if (len2 < len1) {
    .           		return cmd1;
   26 ( 0.00%)  	} else if (len1 < len2) {
    .           		return cmd2;
    .           	} else {
    .           		/* let local view override */
   12 ( 0.00%)  		return cmd1;
    .           	}
  125 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_diff(const clish_command_t * cmd1,
    .           	const clish_command_t * cmd2)
  245 ( 0.00%)  {
  182 ( 0.00%)  	if (NULL == cmd1) {
  168 ( 0.00%)  		if (NULL != cmd2)
    .           			return 1;
    .           		else
    .           			return 0;
    .           	}
   98 ( 0.00%)  	if (NULL == cmd2)
    .           		return -1;
    .           
  490 ( 0.01%)  	return lub_string_nocasecmp(clish_command__get_name(cmd1),
2,939 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (49x)
  392 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (98x)
    .           		clish_command__get_name(cmd2));
  147 ( 0.00%)  }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC ATTRIBUTES
    .            *--------------------------------------------------------- */
    .           const char *clish_command__get_name(const clish_command_t * this)
    .           {
1,092 ( 0.02%)  	if (!this)
    .           		return NULL;
1,092 ( 0.02%)  	return this->name;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_text(const clish_command_t * this)
    .           {
    .           	return this->text;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_detail(const clish_command_t * this)
    .           {
    1 ( 0.00%)  	return this->detail;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_detail(clish_command_t * this, const char *detail)
    4 ( 0.00%)  {
   12 ( 0.00%)  	assert(NULL == this->detail);
   16 ( 0.00%)  	this->detail = lub_string_dup(detail);
2,047 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (4x)
    8 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_action_t *clish_command__get_action(const clish_command_t *this)
    .           {
   44 ( 0.00%)  	return this->action;
   44 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_config_t *clish_command__get_config(const clish_command_t *this)
    .           {
   22 ( 0.00%)  	return this->config;
   22 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_viewname(clish_command_t * this, const char *viewname)
    .           {
   18 ( 0.00%)  	assert(NULL == this->viewname);
   22 ( 0.00%)  	clish_command__force_viewname(this, viewname);
1,849 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewname (8x)
  985 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__force_viewname(clish_command_t * this, const char *viewname)
   45 ( 0.00%)  {
   27 ( 0.00%)  	if (this->viewname)
    .           		lub_string_free(this->viewname);
   36 ( 0.00%)  	this->viewname = lub_string_dup(viewname);
1,949 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (9x)
   36 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_viewname(const clish_command_t * this)
    .           {
    9 ( 0.00%)  	return this->viewname;
    9 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_viewid(clish_command_t * this, const char *viewid)
    .           {
    6 ( 0.00%)  	assert(NULL == this->viewid);
   10 ( 0.00%)  	clish_command__force_viewid(this, viewid);
1,136 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  455 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewid (2x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__force_viewid(clish_command_t * this, const char *viewid)
   15 ( 0.00%)  {
    9 ( 0.00%)  	if (this->viewid)
    .           		lub_string_free(this->viewid);
   12 ( 0.00%)  	this->viewid = lub_string_dup(viewid);
  734 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
   12 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_viewid(const clish_command_t * this)
    .           {
    3 ( 0.00%)  	return this->viewid;
    3 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_param_t *clish_command__get_param(const clish_command_t * this,
    .           	unsigned index)
    .           {
    .           	return clish_paramv__get_param(this->paramv, index);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_suffix(const clish_command_t * this)
    .           {
  223 ( 0.00%)  	return lub_string_suffix(this->name);
9,280 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_suffix (72x)
1,719 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void
    .           clish_command__set_escape_chars(clish_command_t * this,
    .           	const char *escape_chars)
    1 ( 0.00%)  {
    3 ( 0.00%)  	assert(!this->escape_chars);
    4 ( 0.00%)  	this->escape_chars = lub_string_dup(escape_chars);
  156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_escape_chars(const clish_command_t * this)
    .           {
    3 ( 0.00%)  	return this->escape_chars;
    3 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_regex_chars(clish_command_t *this,
    .           	const char *escape_chars)
    .           {
    .           	assert(!this->regex_chars);
    .           	this->regex_chars = lub_string_dup(escape_chars);
    .           }
-- line 332 ----------------------------------------
-- line 335 ----------------------------------------
    .           const char *clish_command__get_regex_chars(const clish_command_t *this)
    .           {
    .           	return this->regex_chars;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_args(clish_command_t * this, clish_param_t * args)
    .           {
    2 ( 0.00%)  	assert(NULL == this->args);
    2 ( 0.00%)  	this->args = args;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_param_t *clish_command__get_args(const clish_command_t * this)
    .           {
   34 ( 0.00%)  	return this->args;
   34 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned int clish_command__get_param_count(const clish_command_t * this)
    .           {
   19 ( 0.00%)  	return clish_paramv__get_count(this->paramv);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_count (4x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_paramv_t *clish_command__get_paramv(const clish_command_t * this)
    .           {
   48 ( 0.00%)  	return this->paramv;
   48 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_pview(clish_command_t * this, clish_view_t * view)
    .           {
   52 ( 0.00%)  	this->pview = view;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_t *clish_command__get_pview(const clish_command_t * this)
    .           {
    .           	return this->pview;
    .           }
    .           
-- line 376 ----------------------------------------
-- line 380 ----------------------------------------
    .           	if (!this->pview)
    .           		return 0;
    .           	return clish_view__get_depth(this->pview);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_restore_e clish_command__get_restore(const clish_command_t * this)
    .           {
   12 ( 0.00%)  	if (!this->pview)
    .           		return CLISH_RESTORE_NONE;
   10 ( 0.00%)  	return clish_view__get_restore(this->pview);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_restore (2x)
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t * clish_command__get_orig(const clish_command_t * this)
    .           {
    .           	if (this->link)
    .           		return clish_command__get_orig(this->link);
    .           	return this;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_lock(const clish_command_t * this)
    .           {
    4 ( 0.00%)  	return this->lock;
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_lock(clish_command_t * this, bool_t lock)
    .           {
   56 ( 0.00%)  	this->lock = lock;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_alias(clish_command_t * this, const char * alias)
    .           {
    .           	if (this->alias)
    .           		lub_string_free(this->alias);
    .           	this->alias = lub_string_dup(alias);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char * clish_command__get_alias(const clish_command_t * this)
    .           {
   26 ( 0.00%)  	return this->alias;
   26 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_alias_view(clish_command_t *this,
    .           	const char *alias_view)
    .           {
    .           	if (this->alias_view)
    .           		lub_string_free(this->alias_view);
    .           	this->alias_view = lub_string_dup(alias_view);
-- line 433 ----------------------------------------
-- line 448 ----------------------------------------
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_dynamic(const clish_command_t * this)
    .           {
    .           	return this->dynamic;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t * clish_command__get_cmd(const clish_command_t * this)
   12 ( 0.00%)  {
   18 ( 0.00%)  	if (!this->dynamic)
    .           		return this;
    .           	if (this->link)
    .           		return clish_command__get_cmd(this->link);
    .           	return NULL;
    6 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_interrupt(const clish_command_t * this)
    .           {
    4 ( 0.00%)  	return this->interrupt;
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_interrupt(clish_command_t * this, bool_t interrupt)
    .           {
   54 ( 0.00%)  	this->interrupt = interrupt;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_access(clish_command_t *this, const char *access)
    5 ( 0.00%)  {
    3 ( 0.00%)  	if (this->access)
    .           		lub_string_free(this->access);
    4 ( 0.00%)  	this->access = lub_string_dup(access);
  155 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_access(const clish_command_t *this)
    .           {
    .           	return this->access;
    .           }

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_loop.c
--------------------------------------------------------------------------------
Ir          

-- line 9 ----------------------------------------
 .           #include <string.h>
 .           #include <assert.h>
 .           #include <unistd.h>
 .           
 .           /*-------------------------------------------------------- */
 .           /* The main CLI loop while interactive execution.
 .            */
 .           int clish_shell_loop(clish_shell_t *this)
 3 ( 0.00%)  {
 .           	int running = 0;
 .           	int retval = SHELL_STATE_OK;
 .           
 3 ( 0.00%)  	assert(this);
 9 ( 0.00%)  	if (!tinyrl__get_istream(this->tinyrl))
1,672 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1 ( 0.00%)  		return SHELL_STATE_IO_ERROR;
 .           	/* Check the shell isn't closing down */
 3 ( 0.00%)  	if (this && (SHELL_STATE_CLOSING == this->state))
 .           		return retval;
 .           
 .           	/* Loop reading and executing lines until the user quits */
 2 ( 0.00%)  	while (!running) {
 .           		retval = SHELL_STATE_OK;
 .           		/* Get input from the stream */
19 ( 0.00%)  		running = clish_shell_readline(this, NULL);
759,269 (11.57%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
482,104 ( 7.35%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_readline (2x)
 6 ( 0.00%)  		if (running) {
 .           			switch (this->state) {
 .           			case SHELL_STATE_SCRIPT_ERROR:
 .           			case SHELL_STATE_SYNTAX_ERROR:
 .           				/* Interactive session doesn't exit on error */
 .           				if (tinyrl__get_isatty(this->tinyrl) ||
 .           					(this->current_file &&
 .           					!this->current_file->stop_on_error))
 .           					running = 0;
 .           				retval = this->state;
 .           			default:
 .           				break;
 .           			}
 .           		}
 7 ( 0.00%)  		if (SHELL_STATE_CLOSING == this->state)
 .           			running = -1;
 .           		if (running)
 7 ( 0.00%)  			running = clish_shell_pop_file(this);
2,713 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           	}
 .           
 .           	return retval;
 5 ( 0.00%)  }
 .           
 .           /*-------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c
--------------------------------------------------------------------------------
Ir          

-- line 9 ----------------------------------------
 .           #include "lub/string.h"
 .           #include "lub/list.h"
 .           #include "lub/bintree.h"
 .           #include "clish/plugin.h"
 .           #include "clish/view.h"
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_plugin_t * clish_shell_find_plugin(clish_shell_t *this, const char *name)
 3 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           
 2 ( 0.00%)  	assert(this);
 .           
 5 ( 0.00%)  	if (!name || !name[0])
 1 ( 0.00%)  		return NULL;
 .           	/* Iterate elements */
 7 ( 0.00%)  	for(iter = lub_list__get_head(this->plugins);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 .           		iter; iter = lub_list_node__get_next(iter)) {
 .           		plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 .           		if (!strcmp(name, clish_plugin__get_name(plugin)))
 .           			return plugin;
 .           	}
 .           
 .           	return NULL;
 5 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_plugin_t * clish_shell_find_create_plugin(clish_shell_t *this,
 .           	const char *name)
 3 ( 0.00%)  {
 .           	clish_plugin_t *plugin;
 2 ( 0.00%)  	assert(this);
 .           
 6 ( 0.00%)  	if (!name || !name[0])
 1 ( 0.00%)  		return NULL;
 .           
 7 ( 0.00%)  	plugin = clish_shell_find_plugin(this, name);
710 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 2 ( 0.00%)  	if (plugin)
 .           		return plugin;
 8 ( 0.00%)  	plugin = clish_plugin_new(name);
1,448 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 4 ( 0.00%)  	lub_list_add(this->plugins, plugin);
249 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (1x)
 .           
 1 ( 0.00%)  	return plugin;
 5 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* For all plugins:
 .            *  * dlopen(plugin)
 .            *  * dlsym(initialize function)
 .            *  * exec init functions to get all plugin syms
 .            */
 .           int clish_shell_load_plugins(clish_shell_t *this)
 3 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           
 3 ( 0.00%)  	assert(this);
 .           
 .           	/* Iterate elements */
 8 ( 0.00%)  	for(iter = lub_list__get_head(this->plugins);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 4 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (1x)
 3 ( 0.00%)  		plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (1x)
10 ( 0.00%)  		if (clish_plugin_load(plugin, (void *)this))
155,096 ( 2.36%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           			return -1;
 .           #ifdef DEBUG
 .           		clish_plugin_dump(plugin);
 .           #endif
 .           	}
 .           
 1 ( 0.00%)  	return 0;
 4 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Iterate plugins to find symbol by name.
 .            * The symbol name can be simple or with namespace:
 .            * mysym@plugin1
 .            * The symbols with suffix will be resolved using specified plugin only.
 .            */
 .           static clish_sym_t *plugins_find_sym(clish_shell_t *this, const char *name, int type)
 .           {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           	clish_sym_t *sym = NULL;
 .           	/* To parse command name */
 6 ( 0.00%)  	char *saveptr = NULL;
 .           	const char *delim = "@";
 .           	char *plugin_name = NULL;
 .           	char *cmdn = NULL;
24 ( 0.00%)  	char *str = lub_string_dup(name);
1,045 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (6x)
 .           
 .           	assert(this);
 .           
 .           	/* Parse name to get sym name and optional plugin name */
42 ( 0.00%)  	cmdn = strtok_r(str, delim, &saveptr);
1,583 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
597 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r (5x)
12 ( 0.00%)  	if (!cmdn) {
 .           		lub_string_free(str);
 .           		return NULL;
 .           	}
36 ( 0.00%)  	plugin_name = strtok_r(NULL, delim, &saveptr);
483 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r (6x)
 .           
12 ( 0.00%)  	if (plugin_name) {
 .           		/* Search for symbol in specified namespace */
 .           		/* Iterate elements */
27 ( 0.00%)  		for(iter = lub_list__get_head(this->plugins);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 .           			iter; iter = lub_list_node__get_next(iter)) {
12 ( 0.00%)  			plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
31 ( 0.00%)  			if (strcmp(clish_plugin__get_pubname(plugin), plugin_name))
730 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
177 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (3x)
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin__get_pubname (2x)
 .           				continue;
21 ( 0.00%)  			if ((sym = clish_plugin_get_sym(plugin, cmdn, type)))
1,151 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym (3x)
 .           				break;
 .           		}
 .           	} else {
 .           		/* Iterate all plugins */
15 ( 0.00%)  		for(iter = lub_list__get_head(this->plugins);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 .           			iter; iter = lub_list_node__get_next(iter)) {
 9 ( 0.00%)  			plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
28 ( 0.00%)  			if ((sym = clish_plugin_get_sym(plugin, cmdn, type)))
722 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
609 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym (2x)
 .           				break;
 .           		}
 .           	}
24 ( 0.00%)  	lub_string_free(str);
540 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (6x)
 .           
 .           	return sym;
 .           }
 .           
 .           /*--------------------------------------------------------- */
 .           /* Find symbol by name in the list of unresolved symbols */
 .           clish_sym_t *clish_shell_find_sym(clish_shell_t *this, const char *name, int type)
28 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_sym_t *sym;
 .           
 .           	/* Iterate elements */
31 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
853 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 8 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
900 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		int res;
20 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
877 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
32 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
639 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
132 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (4x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (3x)
19 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           			return sym;
 3 ( 0.00%)  		if (res > 0) /* No chance to find name */
 .           			break;
 .           	}
 .           
 3 ( 0.00%)  	return NULL;
28 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Add symbol to the table of unresolved symbols */
 .           clish_sym_t *clish_shell_add_sym(clish_shell_t *this,
 .           	void *func, const char *name, int type)
20 ( 0.00%)  {
 .           	clish_sym_t *sym = NULL;
 .           
16 ( 0.00%)  	if (!name)
 .           		return NULL;
40 ( 0.00%)  	if ((sym = clish_shell_find_sym(this, name, type)))
3,375 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_find_sym (3x)
1,564 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		return sym;
24 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
1,208 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (3x)
 .           		return NULL;
19 ( 0.00%)  	lub_list_add(this->syms, sym);
1,697 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
568 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (2x)
 .           
 .           	return sym;
28 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_sym_t *clish_shell_add_unresolved_sym(clish_shell_t *this,
 .           	const char *name, int type)
 .           {
24 ( 0.00%)  	return clish_shell_add_sym(this, NULL, name, type);
4,949 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_sym (3x)
4,301 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Link one unresolved symbol.
 .            * sym - unresolved symbol
 .            * Returns 0 if the symbol was succesfully resolved
 .            */
 .           static int link_unresolved_sym(clish_shell_t *this, clish_sym_t *sym)
 .           {
 .           	clish_sym_t *plugin_sym;
 .           	char *sym_name = NULL;
 .           	int sym_type;
 .           
34 ( 0.00%)  	if (clish_sym__get_func(sym)) /* Don't relink non-null fn */
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (5x)
 .           		return 0;
30 ( 0.00%)  	sym_name = clish_sym__get_name(sym);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (6x)
24 ( 0.00%)  	sym_type = clish_sym__get_type(sym);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
 .           	plugin_sym = plugins_find_sym(this, sym_name, sym_type);
 .           	if (!plugin_sym) {
 .           		fprintf(stderr, "Error: Can't resolve symbol %s.\n",
 .           			sym_name);
 .           		return -1;
 .           	}
 .           	/* Copy symbol attributes */
34 ( 0.00%)  	clish_sym_clone(sym, plugin_sym);
623 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_clone (5x)
 .           
 .           	return 0;
 .           }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Link unresolved symbols */
 .           int clish_shell_link_plugins(clish_shell_t *this)
 8 ( 0.00%)  {
 .           	clish_sym_t *sym;
 .           	lub_list_node_t *iter;
 .           
 .           	/* Iterate elements */
18 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
24 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (6x)
24 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (6x)
 .           		if (link_unresolved_sym(this, sym) < 0)
 .           			return -1;
 .           	}
 .           
 1 ( 0.00%)  	return 0;
 8 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Get hook sym */
 .           clish_sym_t *clish_shell_get_hook(const clish_shell_t *this, int type)
 .           {
 2 ( 0.00%)  	return this->hooks[type];
 1 ( 0.00%)  }

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c
--------------------------------------------------------------------------------
Ir             

-- line 50 ----------------------------------------
    .           
    .           	this = this; /* Happy compiler */
    .           
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_printf(const tinyrl_vt100_t * this, const char *fmt, ...)
2,058 ( 0.03%)  {
    .           	va_list args;
    .           	int len;
    .           
  588 ( 0.01%)  	if (!this->ostream)
  294 ( 0.00%)  		return 0;
1,764 ( 0.03%)  	va_start(args, fmt);
  882 ( 0.01%)  	len = tinyrl_vt100_vprintf(this, fmt, args);
139,166 ( 2.12%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_vprintf (294x)
    .           	va_end(args);
    .           
    .           	return len;
  588 ( 0.01%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           int
    .           tinyrl_vt100_vprintf(const tinyrl_vt100_t * this, const char *fmt, va_list args)
    .           {
  885 ( 0.01%)  	if (!this->ostream)
    .           		return 0;
  594 ( 0.01%)  	return vfprintf(this->ostream, fmt, args);
137,696 ( 2.10%)  => /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf (294x)
17,314 ( 0.26%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_getchar(const tinyrl_vt100_t *this)
  564 ( 0.01%)  {
    .           	unsigned char c;
    .           	int istream_fd;
    .           	fd_set rfds;
    .           	struct timeval tv;
    .           	int retval;
    .           	ssize_t res;
    .           
  282 ( 0.00%)  	if (!this->istream)
    .           		return VT100_ERR;
  376 ( 0.01%)  	istream_fd = fileno(this->istream);
  564 ( 0.01%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (94x)
    .           
    .           	/* Just wait for the input if no timeout */
  282 ( 0.00%)  	if (this->timeout <= 0) {
  662 ( 0.01%)  		while (((res = read(istream_fd, &c, 1)) < 0) &&
1,452 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  651 ( 0.01%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (93x)
    .           			(EAGAIN == errno));
    .           		/* EOF or error */
    .           		if (res < 0)
    .           			return VT100_ERR;
    .           		if (!res)
    .           			return VT100_EOF;
    .           		return c;
    .           	}
-- line 104 ----------------------------------------
-- line 115 ----------------------------------------
    .           		return VT100_ERR;
    .           	if (!retval)
    .           		return VT100_TIMEOUT;
    .           
    .           	res = read(istream_fd, &c, 1);
    .           	/* EOF or error */
    .           	if (res < 0)
    .           		return VT100_ERR;
   94 ( 0.00%)  	if (!res)
   94 ( 0.00%)  		return VT100_EOF;
    .           
   94 ( 0.00%)  	return c;
  752 ( 0.01%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_oflush(const tinyrl_vt100_t * this)
    .           {
  435 ( 0.01%)  	if (!this->ostream)
    .           		return 0;
  294 ( 0.00%)  	return fflush(this->ostream);
21,912 ( 0.33%)  => /opt/build/glibc/glibc-2.24/libio/iofflush.c:fflush (144x)
1,633 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_ierror(const tinyrl_vt100_t * this)
    .           {
    .           	if (!this->istream)
    .           		return 0;
    .           	return ferror(this->istream);
-- line 142 ----------------------------------------
-- line 163 ----------------------------------------
    .           {
    .           	if (!this->istream)
    .           		return 0;
    .           	return feof(this->istream);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           unsigned int tinyrl_vt100__get_width(const tinyrl_vt100_t *this)
  120 ( 0.00%)  {
    .           #ifdef TIOCGWINSZ
    .           	struct winsize ws;
    .           	int res;
    .           #endif
    .           
  360 ( 0.01%)  	if(!this->ostream)
    .           		return 80;
    .           
    .           #ifdef TIOCGWINSZ
  240 ( 0.00%)  	ws.ws_col = 0;
  968 ( 0.01%)  	res = ioctl(fileno(this->ostream), TIOCGWINSZ, &ws);
2,925 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
  714 ( 0.01%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (119x)
  595 ( 0.01%)  => /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/syscall-template.S:ioctl (119x)
  720 ( 0.01%)  	if (res || !ws.ws_col)
    .           		return 80;
    .           	return ws.ws_col;
    .           #else
    .           	return 80;
    .           #endif
  240 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           unsigned int tinyrl_vt100__get_height(const tinyrl_vt100_t *this)
    .           {
    .           #ifdef TIOCGWINSZ
    .           	struct winsize ws;
    .           	int res;
    .           #endif
-- line 197 ----------------------------------------
-- line 209 ----------------------------------------
    .           	return 25;
    .           #endif
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void
    .           tinyrl_vt100_init(tinyrl_vt100_t * this, FILE * istream, FILE * ostream)
    .           {
    1 ( 0.00%)  	this->istream = istream;
    1 ( 0.00%)  	this->ostream = ostream;
    1 ( 0.00%)  	this->timeout = -1; /* No timeout by default */
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void tinyrl_vt100_fini(tinyrl_vt100_t * this)
    .           {
    .           	/* nothing to do yet... */
    .           	this = this;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           tinyrl_vt100_t *tinyrl_vt100_new(FILE * istream, FILE * ostream)
    5 ( 0.00%)  {
    .           	tinyrl_vt100_t *this = NULL;
    .           
    3 ( 0.00%)  	this = malloc(sizeof(tinyrl_vt100_t));
  197 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
    2 ( 0.00%)  	if (this) {
    .           		tinyrl_vt100_init(this, istream, ostream);
    .           	}
    .           
    .           	return this;
    4 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_delete(tinyrl_vt100_t * this)
    .           {
    .           	tinyrl_vt100_fini(this);
    .           	/* release the memory */
    2 ( 0.00%)  	free(this);
   88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_ding(const tinyrl_vt100_t * this)
   60 ( 0.00%)  {
  150 ( 0.00%)  	tinyrl_vt100_printf(this, "%c", KEY_BEL);
10,740 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (30x)
   90 ( 0.00%)  	(void)tinyrl_vt100_oflush(this);
5,790 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (30x)
   30 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_attribute_reset(const tinyrl_vt100_t * this)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[0m", KEY_ESC);
    .           }
    .           
    .           /*-------------------------------------------------------- */
-- line 263 ----------------------------------------
-- line 325 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_cursor_forward(const tinyrl_vt100_t * this, unsigned count)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[%dC", KEY_ESC, count);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_cursor_back(const tinyrl_vt100_t * this, unsigned count)
   26 ( 0.00%)  {
  130 ( 0.00%)  	tinyrl_vt100_printf(this, "%c[%dD", KEY_ESC, count);
20,722 ( 0.32%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (26x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_cursor_up(const tinyrl_vt100_t * this, unsigned count)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[%dA", KEY_ESC, count);
    .           }
    .           
-- line 342 ----------------------------------------
-- line 374 ----------------------------------------
    .           void tinyrl_vt100_erase(const tinyrl_vt100_t * this, unsigned count)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[%dP", KEY_ESC, count);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100__set_timeout(tinyrl_vt100_t *this, int timeout)
    .           {
    8 ( 0.00%)  	this->timeout = timeout;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_erase_down(const tinyrl_vt100_t * this)
    .           {
  130 ( 0.00%)  	tinyrl_vt100_printf(this, "%c[J", KEY_ESC);
11,050 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (26x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100__set_istream(tinyrl_vt100_t * this, FILE * istream)
    .           {
    4 ( 0.00%)  	this->istream = istream;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl_vt100__get_istream(const tinyrl_vt100_t * this)
    .           {
   19 ( 0.00%)  	return this->istream;
   19 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl_vt100__get_ostream(const tinyrl_vt100_t * this)
    .           {
    .           	return this->ostream;
    .           }
    .           
    .           /*-------------------------------------------------------- */
-- line 409 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c
--------------------------------------------------------------------------------
Ir             

-- line 12 ----------------------------------------
    .           /*--------------------------------------------------------- */
    .           static void lub_argv_init(lub_argv_t * this, const char *line, size_t offset)
    .           {
    .           	size_t len;
    .           	const char *word;
    .           	lub_arg_t *arg;
    .           	size_t quoted;
    .           
  264 ( 0.00%)  	this->argv = NULL;
  264 ( 0.00%)  	this->argc = 0;
  792 ( 0.01%)  	if (!line)
    .           		return;
    .           	/* first of all count the words in the line */
  988 ( 0.02%)  	this->argc = lub_string_wordcount(line);
36,237 ( 0.55%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (245x)
6,376 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  492 ( 0.01%)  	if (0 == this->argc)
    .           		return;
    .           	/* allocate space to hold the vector */
  630 ( 0.01%)  	arg = this->argv = malloc(sizeof(lub_arg_t) * this->argc);
9,588 ( 0.15%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (90x)
  180 ( 0.00%)  	assert(arg);
    .           
    .           	/* then fill out the array with the words */
1,460 ( 0.02%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
12,461 ( 0.19%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (90x)
  270 ( 0.00%)  		*word || quoted;
1,015 ( 0.02%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
13,881 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (145x)
  729 ( 0.01%)  		(*arg).arg = lub_string_ndecode(word, len);
31,346 ( 0.48%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_ndecode (144x)
1,158 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  290 ( 0.00%)  		(*arg).offset = offset;
  725 ( 0.01%)  		(*arg).quoted = quoted ? BOOL_TRUE : BOOL_FALSE;
    .           
  435 ( 0.01%)  		offset += len;
    .           
  290 ( 0.00%)  		if (quoted) {
    .           			len += quoted - 1; /* account for terminating quotation mark */
    .           			offset += quoted; /* account for quotation marks */
    .           		}
  145 ( 0.00%)  		arg++;
    .           	}
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           lub_argv_t *lub_argv_new(const char *line, size_t offset)
2,376 ( 0.04%)  {
    .           	lub_argv_t *this;
    .           
1,056 ( 0.02%)  	this = malloc(sizeof(lub_argv_t));
28,750 ( 0.44%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (264x)
  528 ( 0.01%)  	if (this)
    .           		lub_argv_init(this, line, offset);
    .           
    .           	return this;
2,376 ( 0.04%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_argv_add(lub_argv_t * this, const char *text)
  385 ( 0.01%)  {
    .           	lub_arg_t * arg;
    .           
  154 ( 0.00%)  	if (!text)
    .           		return;
    .           
    .           	/* allocate space to hold the vector */
  539 ( 0.01%)  	arg = realloc(this->argv, sizeof(lub_arg_t) * (this->argc + 1));
21,595 ( 0.33%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (77x)
  154 ( 0.00%)  	assert(arg);
   77 ( 0.00%)  	this->argv = arg;
  693 ( 0.01%)  	(this->argv[this->argc++]).arg = strdup(text);
11,626 ( 0.18%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (77x)
  308 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           static void lub_argv_fini(lub_argv_t * this)
    .           {
    .           	unsigned i;
    .           
1,559 ( 0.02%)  	for (i = 0; i < this->argc; i++)
1,554 ( 0.02%)  		free(this->argv[i].arg);
19,536 ( 0.30%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (222x)
  792 ( 0.01%)  	free(this->argv);
10,265 ( 0.16%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (264x)
    .           	this->argv = NULL;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_argv_delete(lub_argv_t * this)
1,320 ( 0.02%)  {
    .           	lub_argv_fini(this);
  792 ( 0.01%)  	free(this);
23,232 ( 0.35%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (264x)
  792 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_argv__get_line(const lub_argv_t * this)
    .           {
    .           	int space = 0;
    .           	const char *p;
    .           	unsigned i;
    .           	char *line = NULL;
-- line 101 ----------------------------------------
-- line 118 ----------------------------------------
    .           			lub_string_cat(&line, "\"");
    .           	}
    .           
    .           	return line;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           char **lub_argv__get_argv(const lub_argv_t * this, const char *argv0)
   66 ( 0.00%)  {
    .           	char **result = NULL;
    .           	unsigned i;
    .           	unsigned a = 0;
    .           
   22 ( 0.00%)  	if (argv0)
   11 ( 0.00%)  		a = 1;
    .           
   77 ( 0.00%)  	result = malloc(sizeof(char *) * (this->argc + 1 + a));
1,480 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (11x)
    .           
    .           	if (argv0)
   66 ( 0.00%)  		result[0] = strdup(argv0);
1,666 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (11x)
  297 ( 0.00%)  	for (i = 0; i < this->argc; i++)
  770 ( 0.01%)  		result[i + a] = strdup(this->argv[i].arg);
13,414 ( 0.20%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (77x)
   11 ( 0.00%)  	result[i + a] = NULL;
    .           
    .           	return result;
   77 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_argv__free_argv(char **argv)
    .           {
    .           	unsigned i;
    .           
    .           	if (!argv)
    .           		return;
-- line 151 ----------------------------------------
-- line 155 ----------------------------------------
    .           	free(argv);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *lub_argv__get_arg(const lub_argv_t *this, unsigned int index)
    .           {
    .           	const char *result = NULL;
    .           
  358 ( 0.01%)  	if (!this)
    1 ( 0.00%)  		return NULL;
  358 ( 0.01%)  	if (this->argc > index)
1,068 ( 0.02%)  		result = this->argv[index].arg;
    .           
    .           	return result;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned lub_argv__get_count(const lub_argv_t * this)
    .           {
  401 ( 0.01%)  	return this->argc;
  401 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           size_t lub_argv__get_offset(const lub_argv_t * this, unsigned index)
    .           {
    .           	size_t result = 0;
    .           
    .           	if (this->argc > index)
    .           		result = this->argv[index].offset;
-- line 183 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c
--------------------------------------------------------------------------------
Ir              

-- line 8 ----------------------------------------
     .           bool_t lub_ctype_isdigit(char c)
     .           {
     .           	unsigned char tmp = (unsigned char)c;
     .           	return isdigit(tmp) ? BOOL_TRUE : BOOL_FALSE;
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           bool_t lub_ctype_isspace(char c)
   834 ( 0.01%)  {
     .           	unsigned char tmp = (unsigned char)c;
 2,502 ( 0.04%)  	return isspace(tmp) ? BOOL_TRUE : BOOL_FALSE;
 1,251 ( 0.02%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (417x)
   834 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char lub_ctype_tolower(char c)
34,480 ( 0.53%)  {
     .           	unsigned char tmp = (unsigned char)c;
68,964 ( 1.05%)  	return tolower(tmp);
51,717 ( 0.79%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc (17,239x)
 1,639 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
34,480 ( 0.53%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char lub_ctype_toupper(char c)
     .           {
     .           	unsigned char tmp = (unsigned char)c;
     .           	return toupper(tmp);
     .           }
     .           
-- line 34 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c
--------------------------------------------------------------------------------
Ir          

-- line 13 ----------------------------------------
 .           #include "lub/string.h"
 .           #include "lub/db.h"
 .           #include "lub/list.h"
 .           #include "clish/plugin.h"
 .           
 .           /*-------------------------------------------------------- */
 .           static void clish_shell_init(clish_shell_t * this,
 .           	FILE * istream, FILE * ostream, bool_t stop_on_error)
10 ( 0.00%)  {
 .           	clish_ptype_t *tmp_ptype = NULL;
 .           	int i;
 .           	char template[PATH_MAX];
 .           
 .           	/* initialise the tree of views */
16 ( 0.00%)  	lub_bintree_init(&this->view_tree,
1,603 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 .           		clish_view_bt_offset(),
 .           		clish_view_bt_compare, clish_view_bt_getkey);
 .           
 .           	/* initialise the tree of ptypes */
12 ( 0.00%)  	lub_bintree_init(&this->ptype_tree,
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (1x)
 .           		clish_ptype_bt_offset(),
 .           		clish_ptype_bt_compare, clish_ptype_bt_getkey);
 .           
 .           	/* initialise the tree of vars */
12 ( 0.00%)  	lub_bintree_init(&this->var_tree,
639 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (1x)
 .           		clish_var_bt_offset(),
 .           		clish_var_bt_compare, clish_var_bt_getkey);
 .           
 .           	/* Initialize plugin list */
 8 ( 0.00%)  	this->plugins = lub_list_new(NULL);
956 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 .           	/* Initialise the list of unresolved (yet) symbols */
 4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
210 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
 .           
 .           	/* Create userdata storage */
 4 ( 0.00%)  	this->udata = lub_list_new(clish_udata_compare);
210 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
 3 ( 0.00%)  	assert(this->udata);
 .           
 .           	/* Hooks */
10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
34 ( 0.00%)  		this->hooks[i] = clish_sym_new(NULL, NULL, i);
1,607 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
912 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (4x)
10 ( 0.00%)  		this->hooks_use[i] = BOOL_FALSE;
 .           	}
 .           
 .           	/* Set up defaults */
 1 ( 0.00%)  	this->global = NULL;
 1 ( 0.00%)  	this->startup = NULL;
 1 ( 0.00%)  	this->idle_timeout = 0; /* No idle timeout by default */
 1 ( 0.00%)  	this->wdog = NULL;
 1 ( 0.00%)  	this->wdog_timeout = 0; /* No watchdog timeout by default */
 1 ( 0.00%)  	this->wdog_active = BOOL_FALSE;
 1 ( 0.00%)  	this->state = SHELL_STATE_INITIALISING;
 1 ( 0.00%)  	this->overview = NULL;
10 ( 0.00%)  	this->tinyrl = clish_shell_tinyrl_new(istream, ostream, 0);
15,691 ( 0.24%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1 ( 0.00%)  	this->current_file = NULL;
 1 ( 0.00%)  	this->pwdv = NULL;
 1 ( 0.00%)  	this->pwdc = 0;
 1 ( 0.00%)  	this->depth = -1; /* Current depth is undefined */
 1 ( 0.00%)  	this->client = NULL;
 4 ( 0.00%)  	this->lockfile = lub_string_dup(CLISH_LOCK_PATH);
1,762 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 4 ( 0.00%)  	this->default_shebang = lub_string_dup("/bin/sh");
245 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 1 ( 0.00%)  	this->interactive = BOOL_TRUE; /* The interactive shell by default. */
 1 ( 0.00%)  	this->log = BOOL_FALSE; /* Disable logging by default */
 1 ( 0.00%)  	this->log_facility = LOG_LOCAL0; /* LOCAL0 for compatibility */
 1 ( 0.00%)  	this->dryrun = BOOL_FALSE; /* Disable dry-run by default */
14 ( 0.00%)  	this->user = lub_db_getpwuid(getuid()); /* Get user information */
6,629 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 1 ( 0.00%)  	this->default_plugin = BOOL_TRUE; /* Load default plugin by default */
 .           
 .           	/* Create template (string) for FIFO name generation */
18 ( 0.00%)  	snprintf(template, sizeof(template),
4,010 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 .           		"%s/klish.fifo.%u.XXXXXX", "/tmp", getpid());
 1 ( 0.00%)  	template[sizeof(template) - 1] = '\0';
 4 ( 0.00%)  	this->fifo_temp = lub_string_dup(template);
263 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 .           
 .           	/* Create internal ptypes and params */
 .           	/* Args */
12 ( 0.00%)  	tmp_ptype = clish_shell_find_create_ptype(this,
154,923 ( 2.36%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		"__ptype_ARGS",
 .           		"Arguments", "[^\\\\]+",
 .           		CLISH_PTYPE_REGEXP,
 .           		CLISH_PTYPE_NONE);
 2 ( 0.00%)  	assert(tmp_ptype);
 .           
 .           	/* Push non-NULL istream */
 2 ( 0.00%)  	if (istream)
 .           		clish_shell_push_fd(this, istream, stop_on_error);
 7 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           static void clish_shell_fini(clish_shell_t *this)
 .           {
 .           	clish_view_t *view;
 .           	clish_ptype_t *ptype;
 .           	clish_var_t *var;
 .           	unsigned i;
 .           	lub_list_node_t *iter;
 .           
 .           	/* Free all loaded plugins */
12 ( 0.00%)  	while ((iter = lub_list__get_head(this->plugins))) {
 4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (2x)
 .           		/* Remove the symbol from the list */
 9 ( 0.00%)  		lub_list_del(this->plugins, iter);
757 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		/* Free the instance */
11 ( 0.00%)  		clish_plugin_free((clish_plugin_t *)lub_list_node__get_data(iter),
11,027 ( 0.17%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (1x)
 .           			(void *)this);
 3 ( 0.00%)  		lub_list_node_free(iter);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_free (1x)
 .           	}
 3 ( 0.00%)  	lub_list_free(this->plugins);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_free (1x)
 .           
 .           	/* delete each VIEW held  */
38 ( 0.00%)  	while ((view = lub_bintree_findfirst(&this->view_tree))) {
407 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (6x)
24 ( 0.00%)  		lub_bintree_remove(&this->view_tree, view);
2,085 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
780 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c:lub_bintree_remove (4x)
19 ( 0.00%)  		clish_view_delete(view);
33,596 ( 0.51%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
27,880 ( 0.42%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_delete (4x)
 .           	}
 .           
 .           	/* delete each PTYPE held  */
86 ( 0.00%)  	while ((ptype = lub_bintree_findfirst(&this->ptype_tree))) {
1,021 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (14x)
52 ( 0.00%)  		lub_bintree_remove(&this->ptype_tree, ptype);
2,313 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c:lub_bintree_remove (13x)
43 ( 0.00%)  		clish_ptype_delete(ptype);
96,336 ( 1.47%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_delete (12x)
1,643 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           	}
 .           
 .           	/* delete each VAR held  */
 7 ( 0.00%)  	while ((var = lub_bintree_findfirst(&this->var_tree))) {
38 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (1x)
 .           		lub_bintree_remove(&this->var_tree, var);
 .           		clish_var_delete(var);
 .           	}
 .           
 .           	/* Free empty hooks */
10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
31 ( 0.00%)  		if (clish_sym__get_name(this->hooks[i]))
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (5x)
 .           			continue;
 8 ( 0.00%)  		clish_sym_free(this->hooks[i]);
216 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_free (2x)
 .           	}
 .           
 .           	/* Free symbol list */
42 ( 0.00%)  	while ((iter = lub_list__get_head(this->syms))) {
14 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (7x)
 .           		/* Remove the symbol from the list */
25 ( 0.00%)  		lub_list_del(this->syms, iter);
66 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_del (6x)
 .           		/* Free the instance */
36 ( 0.00%)  		clish_sym_free((clish_sym_t *)lub_list_node__get_data(iter));
1,134 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_free (6x)
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (6x)
18 ( 0.00%)  		lub_list_node_free(iter);
540 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_free (6x)
 .           	}
 3 ( 0.00%)  	lub_list_free(this->syms);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_free (1x)
 .           
 .           	/* Free user data storage */
 6 ( 0.00%)  	while ((iter = lub_list__get_head(this->udata))) {
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 .           		/* Remove the symbol from the list */
 1 ( 0.00%)  		lub_list_del(this->udata, iter);
 .           		/* Free the instance */
 .           		clish_udata_free((clish_udata_t *)lub_list_node__get_data(iter));
 .           		lub_list_node_free(iter);
 .           	}
 2 ( 0.00%)  	lub_list_free(this->udata);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_free (1x)
 .           
 .           	/* free the textual details */
 3 ( 0.00%)  	lub_string_free(this->overview);
135 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 .           
 .           	/* Remove the startup command */
 3 ( 0.00%)  	if (this->startup)
 2 ( 0.00%)  		clish_command_delete(this->startup);
1,006 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_delete (1x)
 .           	/* Remove the watchdog command */
 3 ( 0.00%)  	if (this->wdog)
 .           		clish_command_delete(this->wdog);
 .           	/* clean up the file stack */
 5 ( 0.00%)  	while (!clish_shell_pop_file(this));
13 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_file.c:clish_shell_pop_file (1x)
 .           	/* delete the tinyrl object */
 7 ( 0.00%)  	clish_shell_tinyrl_delete(this->tinyrl);
6,949 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 .           	/* finalize each of the pwd strings */
 8 ( 0.00%)  	for (i = 0; i < this->pwdc; i++) {
 5 ( 0.00%)  		clish_shell__fini_pwd(this->pwdv[i]);
361 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_pwd.c:clish_shell__fini_pwd (1x)
 4 ( 0.00%)  		free(this->pwdv[i]);
88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
 .           	}
 .           	/* free the pwd vector */
 3 ( 0.00%)  	free(this->pwdv);
88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
 3 ( 0.00%)  	konf_client_free(this->client);
1,680 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/konf/net/net.c:konf_client_free (1x)
 .           
 3 ( 0.00%)  	lub_string_free(this->lockfile);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 3 ( 0.00%)  	lub_string_free(this->default_shebang);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 3 ( 0.00%)  	free(this->user);
119 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
 3 ( 0.00%)  	if (this->fifo_temp)
 2 ( 0.00%)  		lub_string_free(this->fifo_temp);
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           clish_shell_t *clish_shell_new(
 .           	FILE * istream,
 .           	FILE * ostream,
 .           	bool_t stop_on_error)
 8 ( 0.00%)  {
 8 ( 0.00%)  	clish_shell_t *this = malloc(sizeof(clish_shell_t));
1,637 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 2 ( 0.00%)  	if (this)
 5 ( 0.00%)  		clish_shell_init(this, istream, ostream, stop_on_error);
190,544 ( 2.90%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_init (1x)
 .           
 .           	return this;
 7 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           void clish_shell_delete(clish_shell_t *this)
 5 ( 0.00%)  {
 .           	clish_shell_fini(this);
 3 ( 0.00%)  	free(this);
117 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
 3 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           struct passwd *clish_shell__get_user(clish_shell_t * this)
 .           {
 .           	return this->user;
 .           }
 .           
 .           /*-------------------------------------------------------- */
-- line 223 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c
--------------------------------------------------------------------------------
Ir             

-- line 73 ----------------------------------------
    .            */
    .           const char *default_path = "/etc/clish;~/.clish";
    .           
    .           static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent);
    .           
    .           /*-------------------------------------------------------- */
    .           int clish_shell_load_scheme(clish_shell_t *this, const char *xml_path, const char *xslt_path)
    8 ( 0.00%)  {
    .           	const char *path = xml_path;
    .           	char *buffer;
    .           	char *dirname;
    .           	char *saveptr = NULL;
    .           	int res = -1;
    .           	clish_xmldoc_t *doc = NULL;
    .           	DIR *dir;
    .           
-- line 89 ----------------------------------------
-- line 99 ----------------------------------------
    .           			return -1;
    .           		}
    .           	}
    .           #else
    .           	xslt_path = xslt_path; /* Happy compiler */
    .           #endif
    .           
    .           	/* Use the default path */
    2 ( 0.00%)  	if (!path)
    .           		path = default_path;
    9 ( 0.00%)  	buffer = lub_system_tilde_expand(path);
5,312 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Loop though each directory */
    .           	for (dirname = strtok_r(buffer, ";", &saveptr);
    .           		dirname; dirname = strtok_r(NULL, ";", &saveptr)) {
    .           		struct dirent *entry;
    .           
    .           		/* Search this directory for any XML files */
    8 ( 0.00%)  		dir = opendir(dirname);
2,024 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    3 ( 0.00%)  		if (NULL == dir) {
    .           #ifdef DEBUG
    .           			tinyrl_printf(this->tinyrl,
    .           				"*** Failed to open '%s' directory\n",
    .           				dirname);
    .           #endif
    .           			continue;
    .           		}
   79 ( 0.00%)  		for (entry = readdir(dir); entry; entry = readdir(dir)) {
2,157 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  573 ( 0.01%)  => /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c:readdir (14x)
   88 ( 0.00%)  			const char *extension = strrchr(entry->d_name, '.');
1,506 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  401 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strrchr.S:rindex (13x)
   14 ( 0.00%)  			char *filename = NULL;
    .           			clish_xmlnode_t *root;
    .           			int r;
    .           
    .           			/* Check the filename */
  134 ( 0.00%)  			if (!extension || strcmp(".xml", extension))
    .           				continue;
    .           
    .           			/* Build the filename */
   41 ( 0.00%)  			lub_string_cat(&filename, dirname);
3,779 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, "/");
2,620 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, entry->d_name);
4,032 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
    .           
    .           #ifdef DEBUG
    .           			fprintf(stderr, "Parse XML-file: %s\n", filename);
    .           #endif
    .           			/* Load current XML file */
   44 ( 0.00%)  			doc = clish_xmldoc_read(filename);
1,452,782 (22.14%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read (9x)
134,640 ( 2.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  			if (!clish_xmldoc_is_valid(doc)) {
  659 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (9x)
   10 ( 0.00%)  				int errcaps = clish_xmldoc_error_caps(doc);
    .           				printf("Unable to open file '%s'", filename);
    .           				if ((errcaps & CLISH_XMLERR_LINE) == CLISH_XMLERR_LINE)
    .           					printf(", at line %d", clish_xmldoc_get_err_line(doc));
    .           				if ((errcaps & CLISH_XMLERR_COL) == CLISH_XMLERR_COL)
    .           					printf(", at column %d", clish_xmldoc_get_err_col(doc));
    .           				if ((errcaps & CLISH_XMLERR_DESC) == CLISH_XMLERR_DESC)
    .           					printf(", message is %s", clish_xmldoc_get_err_msg(doc));
    .           				printf("\n");
-- line 155 ----------------------------------------
-- line 171 ----------------------------------------
    .           				}
    .           				clish_xmldoc_release(doc);
    .           				doc = tmp;
    .           			}
    .           
    .           			if (!xslt_path && clish_xslt_is_valid(xslt))
    .           				clish_xslt_release(xslt);
    .           #endif
   24 ( 0.00%)  			root = clish_xmldoc_get_root(doc);
  673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_get_root (9x)
    .           			r = process_node(this, root, NULL);
   44 ( 0.00%)  			clish_xmldoc_release(doc);
179,041 ( 2.73%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release (9x)
14,628 ( 0.22%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           			/* Error message */
   30 ( 0.00%)  			if (r) {
    .           				fprintf(stderr, CLISH_XML_ERROR_STR"File %s\n",
    .           					filename);
    .           				lub_string_free(filename);
    .           				goto error;
    .           			}
   34 ( 0.00%)  			lub_string_free(filename);
2,402 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  810 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
    .           		}
    7 ( 0.00%)  		closedir(dir);
1,641 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           /* To don't free memory twice on cleanup */
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (!xslt_path)
    .           		xslt = NULL;
    .           #endif
    1 ( 0.00%)  	doc = NULL;
    .           	dir = NULL;
    1 ( 0.00%)  	res = 0; /* Success */
    .           error:
    3 ( 0.00%)  	lub_string_free(buffer);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    .           	if (dir)
    .           		closedir(dir);
    5 ( 0.00%)  	if (clish_xmldoc_is_valid(doc))
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (1x)
    .           		clish_xmldoc_release(doc);
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (clish_xslt_is_valid(xslt))
    .           		clish_xslt_release(xslt);
    .           #endif
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /*
    .            * ------------------------------------------------------
    .            * This function reads an element from the XML stream and processes it.
    .            * ------------------------------------------------------
    .            */
  980 ( 0.01%)  static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent)
    .           {
   98 ( 0.00%)  	int res = 0;
    .           
2,511 ( 0.04%)  	switch (clish_xmlnode_get_type(node)) {
2,340,397 (35.66%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 (30x)
  870 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type (174x)
    .           	case CLISH_XMLNODE_ELM: {
    .           			clish_xml_cb_t * cb;
    .           			char name[128];
   98 ( 0.00%)  			unsigned int namelen = sizeof(name);
  788 ( 0.01%)  			if (clish_xmlnode_get_name(node, name, &namelen) == 0) {
5,400 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (9x)
2,754 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,990 ( 0.03%)  				for (cb = &xml_elements[0]; cb->element; cb++) {
2,369 ( 0.04%)  					if (0 == strcmp(name, cb->element)) {
1,476 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  189 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (9x)
    .           #ifdef DEBUG
    .           						fprintf(stderr, "NODE:");
    .           						clish_xmlnode_print(node, stderr);
    .           						fprintf(stderr, "\n");
    .           #endif
    .           						/* process the elements at this level */
  490 ( 0.01%)  						res = cb->handler(shell, node, parent);
2,350,698 (35.82%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module (10x)
    .           
    .           						/* Error message */
  294 ( 0.00%)  						if (res) {
    .           							char *ename = clish_xmlnode_fetch_attr(node, "name");
    .           							char *eref = clish_xmlnode_fetch_attr(node, "ref");
    .           							char *ekey = clish_xmlnode_fetch_attr(node, "key");
    .           							char *efile = clish_xmlnode_fetch_attr(node, "file");
    .           							fprintf(stderr, CLISH_XML_ERROR_STR"Node %s", name);
    .           							if (ename)
    .           								fprintf(stderr, ", name=\"%s\"", ename);
    .           							if (eref)
-- line 252 ----------------------------------------
-- line 274 ----------------------------------------
    .           	case CLISH_XMLNODE_COMMENT:
    .           	case CLISH_XMLNODE_DECL:
    .           	case CLISH_XMLNODE_UNKNOWN:
    .           	default:
    .           		break;
    .           	}
    .           
    .           	return res;
  882 ( 0.01%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_children(clish_shell_t *shell,
    .           	clish_xmlnode_t *element, void *parent)
  549 ( 0.01%)  {
   61 ( 0.00%)  	clish_xmlnode_t *node = NULL;
    .           	int res;
    .           
3,350 ( 0.05%)  	while ((node = clish_xmlnode_next_child(element, node)) != NULL) {
  799 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  750 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child (183x)
    .           		/* Now deal with all the contained elements */
    .           		res = process_node(shell, node, parent);
  176 ( 0.00%)  		if (res)
    .           			return res;
    .           	}
    .           
   61 ( 0.00%)  	return 0;
  366 ( 0.01%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_clish_module(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   50 ( 0.00%)  {
    .           	/* Create the global view */
   30 ( 0.00%)  	if (!shell->global)
   11 ( 0.00%)  		shell->global = clish_shell_find_create_view(shell,
5,219 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			"__view_global", "");
    .           
    .           	parent = parent; /* Happy compiler */
    .           
   30 ( 0.00%)  	return process_children(shell, element, shell->global);
2,345,328 (35.74%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children (10x)
   30 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_view(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   45 ( 0.00%)  {
    .           	clish_view_t *view;
    .           	int res = -1;
    .           
   29 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  164 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (4x)
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  	char *prompt = clish_xmlnode_fetch_attr(element, "prompt");
  328 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *depth = clish_xmlnode_fetch_attr(element, "depth");
  322 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *restore = clish_xmlnode_fetch_attr(element, "restore");
  340 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
  328 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
    .           
    .           	/* Check syntax */
   10 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
    .           
    .           	/* re-use a view if it already exists */
   30 ( 0.00%)  	view = clish_shell_find_create_view(shell, name, prompt);
6,493 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell_find_create_view (5x)
    .           
   10 ( 0.00%)  	if (depth && (lub_ctype_isdigit(*depth))) {
    .           		unsigned int res = 0;
    .           		lub_conv_atoui(depth, &res, 0);
    .           		clish_view__set_depth(view, res);
    .           	}
    .           
   10 ( 0.00%)  	if (restore) {
    .           		if (!lub_string_nocasecmp(restore, "depth"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_DEPTH);
    .           		else if (!lub_string_nocasecmp(restore, "view"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_VIEW);
    .           		else
    .           			clish_view__set_restore(view, CLISH_RESTORE_NONE);
    .           	}
    .           
   10 ( 0.00%)  	if (access)
    .           		clish_view__set_access(view, access);
    .           
    .           //process_view_end:
   25 ( 0.00%)  	res = process_children(shell, element, view);
293,378 ( 4.47%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (5x)
    .           error:
   15 ( 0.00%)  	clish_xml_release(name);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(prompt);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(depth);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(restore);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(access);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   45 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_ptype(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   99 ( 0.00%)  {
    .           	clish_ptype_method_e method;
    .           	clish_ptype_preprocess_e preprocess;
    .           	int res = -1;
    .           
   55 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  480 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,285 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *pattern = clish_xmlnode_fetch_attr(element, "pattern");
  955 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *method_name = clish_xmlnode_fetch_attr(element, "method");
  892 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *preprocess_name =	clish_xmlnode_fetch_attr(element, "preprocess");
1,318 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
    .           
    .           	/* Check syntax */
   22 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   22 ( 0.00%)  	if (!pattern) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("pattern"));
    .           		goto error;
    .           	}
    .           
   48 ( 0.00%)  	method = clish_ptype_method_resolve(method_name);
  705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  616 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_method_resolve (10x)
    .           
   48 ( 0.00%)  	preprocess = clish_ptype_preprocess_resolve(preprocess_name);
  737 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_preprocess_resolve (10x)
   77 ( 0.00%)  	clish_shell_find_create_ptype(shell,
1,796,814 (27.38%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (11x)
    .           		name, help, pattern, method, preprocess);
    .           
   11 ( 0.00%)  	res = 0;
    .           error:
   33 ( 0.00%)  	clish_xml_release(name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(help);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(pattern);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(method_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(preprocess_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   99 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_overview(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    8 ( 0.00%)  {
    1 ( 0.00%)  	char *content = NULL;
    2 ( 0.00%)  	unsigned int content_len = 2048;
    .           	int result;
    .           
    .           	/*
    .           	 * the code below faithfully assume that we'll be able fully store
    .           	 * the content of the node. If it's really, really big, we may have
    .           	 * an issue (but then, if it's that big, how the hell does it
    .           	 * already fits in allocated memory?)
    .           	 * Ergo, it -should- be safe.
    .           	 */
    .           	do {
    4 ( 0.00%)  		char *new = (char*)realloc(content, content_len);
1,863 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (1x)
    2 ( 0.00%)  		if (!new) {
    .           			if (content)
    .           				free(content);
    .           			return -1;
    .           		}
    .           		content = new;
    7 ( 0.00%)  		result = clish_xmlnode_get_content(element, content,
19,272 ( 0.29%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (1x)
    .           			&content_len);
    2 ( 0.00%)  	} while (result == -E2BIG);
    .           
    2 ( 0.00%)  	if (result == 0 && content) {
    .           		/* set the overview text for this view */
    2 ( 0.00%)  		assert(NULL == shell->overview);
    .           		/* store the overview */
    4 ( 0.00%)  		shell->overview = lub_string_dup(content);
  968 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    .           	}
    .           
    .           	if (content)
    3 ( 0.00%)  		free(content);
  148 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    1 ( 0.00%)  	return 0;
    7 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_command(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  260 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	clish_command_t *old;
    .           	int res = -1;
    .           
  130 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,167 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
1,066 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,876 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
2,167 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
2,319 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *escape_chars = clish_xmlnode_fetch_attr(element, "escape_chars");
2,119 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_name = clish_xmlnode_fetch_attr(element, "args");
1,989 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_help = clish_xmlnode_fetch_attr(element, "args_help");
2,371 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
2,290 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
2,374 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *ref = clish_xmlnode_fetch_attr(element, "ref");
2,296 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
    .           
    .           	/* Check syntax */
   52 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   52 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
    .           
    .           	/* check this command doesn't already exist */
  134 ( 0.00%)  	old = clish_view_find_command(v, name, BOOL_FALSE);
  723 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,202 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (25x)
   52 ( 0.00%)  	if (old) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"Duplicate COMMAND name=\"%s\".\n", name);
    .           		goto error;
    .           	}
    .           
    .           	/* create a command */
  160 ( 0.00%)  	cmd = clish_view_new_command(v, name, help);
43,626 ( 0.66%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (25x)
4,334 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  108 ( 0.00%)  	clish_command__set_pview(cmd, v);
  679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_pview (25x)
    .           
    .           	/* Reference 'ref' field */
   78 ( 0.00%)  	if (ref) {
    .           		char *saveptr = NULL;
    .           		const char *delim = "@";
    .           		char *view_name = NULL;
    .           		char *cmdn = NULL;
    .           		char *str = lub_string_dup(ref);
    .           
    .           		cmdn = strtok_r(str, delim, &saveptr);
    .           		if (!cmdn) {
-- line 505 ----------------------------------------
-- line 509 ----------------------------------------
    .           		}
    .           		clish_command__set_alias(cmd, cmdn); /* alias name */
    .           		view_name = strtok_r(NULL, delim, &saveptr);
    .           		clish_command__set_alias_view(cmd, view_name);
    .           		lub_string_free(str);
    .           	}
    .           
    .           	/* define some specialist escape characters */
   78 ( 0.00%)  	if (escape_chars)
    8 ( 0.00%)  		clish_command__set_escape_chars(cmd, escape_chars);
  923 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   52 ( 0.00%)  	if (args_name) {
    .           		/* define a "rest of line" argument */
    .           		clish_param_t *param;
    .           
    .           		/* Check syntax */
    2 ( 0.00%)  		if (!args_help) {
    .           			fprintf(stderr, CLISH_XML_ERROR_ATTR("args_help"));
    .           			goto error;
    .           		}
    5 ( 0.00%)  		param = clish_param_new(args_name, args_help, "__ptype_ARGS");
  751 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (1x)
    8 ( 0.00%)  		clish_command__set_args(cmd, param);
  689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* define the view which this command changes to */
   78 ( 0.00%)  	if (view) {
    .           		/* reference the next view */
   36 ( 0.00%)  		clish_command__set_viewname(cmd, view);
1,802 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,635 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (7x)
    .           	}
    .           
    .           	/* define the view id which this command changes to */
   78 ( 0.00%)  	if (viewid)
   16 ( 0.00%)  		clish_command__set_viewid(cmd, viewid);
1,829 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  463 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewid (2x)
    .           
    .           	/* lock field */
   78 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
  108 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
  725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (25x)
    .           
    .           	/* interrupt field */
   78 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
  108 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
  719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (25x)
    .           
   78 ( 0.00%)  	if (access)
    8 ( 0.00%)  		clish_command__set_access(cmd, access);
  872 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           //process_command_end:
  130 ( 0.00%)  	res = process_children(shell, element, cmd);
365,639 ( 5.57%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (26x)
    .           error:
   78 ( 0.00%)  	clish_xml_release(access);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(view);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(viewid);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(escape_chars);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(lock);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(interrupt);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(ref);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
    .           
    .           	return res;
  234 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_startup(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   10 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	int res = -1;
    .           
    5 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
   70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
   73 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_shebang =
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		clish_xmlnode_fetch_attr(element, "default_shebang");
    5 ( 0.00%)  	char *timeout = clish_xmlnode_fetch_attr(element, "timeout");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_plugin = clish_xmlnode_fetch_attr(element,
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		"default_plugin");
    .           
    .           	/* Check syntax */
    2 ( 0.00%)  	if (!view) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("view"));
    .           		goto error;
    .           	}
    2 ( 0.00%)  	if (shell->startup) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP tag duplication.\n");
    .           		goto error;
    .           	}
    .           
    .           	/* create a command with NULL help */
    6 ( 0.00%)  	cmd = clish_view_new_command(v, "startup", NULL);
1,043 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (1x)
    4 ( 0.00%)  	clish_command__set_lock(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* reference the next view */
    4 ( 0.00%)  	clish_command__set_viewname(cmd, view);
  246 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (1x)
    .           
    .           	/* define the view id which this command changes to */
    3 ( 0.00%)  	if (viewid)
    .           		clish_command__set_viewid(cmd, viewid);
    .           
    3 ( 0.00%)  	if (default_shebang)
    .           		clish_shell__set_default_shebang(shell, default_shebang);
    .           
    3 ( 0.00%)  	if (timeout) {
    .           		unsigned int to = 0;
    .           		lub_conv_atoui(timeout, &to, 0);
    .           		clish_shell__set_timeout(shell, to);
    .           	}
    .           
    .           	/* lock field */
    2 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
    4 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* interrupt field */
    2 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
    4 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (1x)
    .           
    .           	/* If we need the default plugin */
    3 ( 0.00%)  	if (default_plugin && (0 == strcmp(default_plugin, "false")))
    .           		shell->default_plugin = BOOL_FALSE;
    .           
    .           	/* remember this command */
    1 ( 0.00%)  	shell->startup = cmd;
    .           
    5 ( 0.00%)  	res = process_children(shell, element, cmd);
6,101 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (1x)
    .           error:
    3 ( 0.00%)  	clish_xml_release(view);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(viewid);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(default_shebang);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(timeout);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(lock);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(interrupt);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_param(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  190 ( 0.00%)  {
    .           	clish_command_t *cmd = NULL;
   38 ( 0.00%)  	clish_param_t *p_param = NULL;
    .           	clish_xmlnode_t *pelement;
    .           	clish_param_t *param;
    .           	char *pname;
    .           	int res = -1;
    .           
  114 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  808 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,378 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *ptype = clish_xmlnode_fetch_attr(element, "ptype");
2,095 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *prefix = clish_xmlnode_fetch_attr(element, "prefix");
2,203 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *defval = clish_xmlnode_fetch_attr(element, "default");
2,237 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *mode = clish_xmlnode_fetch_attr(element, "mode");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *optional = clish_xmlnode_fetch_attr(element, "optional");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *order = clish_xmlnode_fetch_attr(element, "order");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *value = clish_xmlnode_fetch_attr(element, "value");
2,252 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *hidden = clish_xmlnode_fetch_attr(element, "hidden");
2,045 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *test = clish_xmlnode_fetch_attr(element, "test");
2,252 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *completion = clish_xmlnode_fetch_attr(element, "completion");
2,270 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,186 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
    .           
    .           	/* The PARAM can be child of COMMAND or another PARAM */
   76 ( 0.00%)  	pelement = clish_xmlnode_parent(element);
   76 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (19x)
    .           	pname = clish_xmlnode_get_all_name(pelement);
  190 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "PARAM") == 0)
  969 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (19x)
    .           		p_param = (clish_param_t *)parent;
    .           	else
    .           		cmd = (clish_command_t *)parent;
    .           	if (pname)
   95 ( 0.00%)  		free(pname);
2,369 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (19x)
   38 ( 0.00%)  	if (!cmd && !p_param)
    .           		goto error;
    .           
    .           	/* Check syntax */
   95 ( 0.00%)  	if (cmd && (cmd == shell->startup)) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP can't contain PARAMs.\n");
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!ptype) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("ptype"));
    .           		goto error;
    .           	}
    .           
  118 ( 0.00%)  	param = clish_param_new(name, help, ptype);
21,637 ( 0.33%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (18x)
2,140 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* If prefix is set clish will emulate old optional
    .           	 * command syntax over newer optional command mechanism.
    .           	 * It will create nested PARAM.
    .           	 */
   38 ( 0.00%)  	if (prefix) {
    .           		const char *ptype_name = "__ptype_SUBCOMMAND";
    .           		clish_param_t *opt_param = NULL;
    5 ( 0.00%)  		char *str = NULL;
    .           		clish_ptype_t *tmp;
    .           
    .           		/* Create a ptype for prefix-named subcommand that
    .           		 * will contain the nested optional parameter. The
    .           		 * name of ptype is hardcoded. It's not good but
    .           		 * it's only the service ptype.
    .           		 */
   25 ( 0.00%)  		tmp = (clish_ptype_t *)lub_bintree_find(
2,321 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (5x)
    .           			&shell->ptype_tree, ptype_name);
   10 ( 0.00%)  		if (!tmp)
    8 ( 0.00%)  			tmp = clish_shell_find_create_ptype(shell,
137,331 ( 2.09%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (1x)
    .           				ptype_name, "Option", "[^\\\\]+",
    .           				CLISH_PTYPE_REGEXP, CLISH_PTYPE_NONE);
    2 ( 0.00%)  		assert(tmp);
   20 ( 0.00%)  		lub_string_cat(&str, "_prefix_");
1,905 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   20 ( 0.00%)  		lub_string_cat(&str, name);
1,320 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   30 ( 0.00%)  		opt_param = clish_param_new(str, help, ptype_name);
6,029 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (5x)
   15 ( 0.00%)  		lub_string_free(str);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   24 ( 0.00%)  		clish_param__set_mode(opt_param,
  657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_mode (4x)
    .           			CLISH_PARAM_SUBCOMMAND);
   24 ( 0.00%)  		clish_param__set_value(opt_param, prefix);
  826 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  796 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_value (4x)
   20 ( 0.00%)  		clish_param__set_optional(opt_param, BOOL_TRUE);
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (5x)
    .           
   15 ( 0.00%)  		if (test)
    .           			clish_param__set_test(opt_param, test);
    .           
    .           		/* Add the parameter to the command */
   10 ( 0.00%)  		if (cmd)
   20 ( 0.00%)  			clish_command_insert_param(cmd, opt_param);
  910 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (5x)
    .           		/* Add the parameter to the param */
   15 ( 0.00%)  		if (p_param)
    .           			clish_param_insert_param(p_param, opt_param);
    .           		/* Unset cmd and set parent param to opt_param */
    5 ( 0.00%)  		cmd = NULL;
    .           		p_param = opt_param;
    .           	}
    .           
   57 ( 0.00%)  	if (defval)
   24 ( 0.00%)  		clish_param__set_default(param, defval);
  918 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  966 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_default (4x)
    .           
   57 ( 0.00%)  	if (hidden && lub_string_nocasecmp(hidden, "true") == 0)
    .           		clish_param__set_hidden(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_hidden(param, BOOL_FALSE);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_hidden (18x)
    .           
   57 ( 0.00%)  	if (mode) {
    .           		if (lub_string_nocasecmp(mode, "switch") == 0) {
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_SWITCH);
    .           			/* Force hidden attribute */
    .           			clish_param__set_hidden(param, BOOL_TRUE);
    .           		} else if (lub_string_nocasecmp(mode, "subcommand") == 0)
   28 ( 0.00%)  			clish_param__set_mode(param,
    .           				CLISH_PARAM_SUBCOMMAND);
    .           		else
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_COMMON);
    .           	}
    .           
   57 ( 0.00%)  	if (optional && lub_string_nocasecmp(optional, "true") == 0)
    .           		clish_param__set_optional(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_optional(param, BOOL_FALSE);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (18x)
    .           
   57 ( 0.00%)  	if (order && lub_string_nocasecmp(order, "true") == 0)
    .           		clish_param__set_order(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_order(param, BOOL_FALSE);
  663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_order (18x)
    .           
   57 ( 0.00%)  	if (value) {
    .           		clish_param__set_value(param, value);
    .           		/* Force mode to subcommand */
    .           		clish_param__set_mode(param,
    .           			CLISH_PARAM_SUBCOMMAND);
    .           	}
    .           
   57 ( 0.00%)  	if (test && !prefix)
    .           		clish_param__set_test(param, test);
    .           
   57 ( 0.00%)  	if (completion)
    .           		clish_param__set_completion(param, completion);
    .           
   57 ( 0.00%)  	if (access)
    .           		clish_param__set_access(param, access);
    .           
    .           	/* Add the parameter to the command */
   38 ( 0.00%)  	if (cmd)
   60 ( 0.00%)  		clish_command_insert_param(cmd, param);
1,565 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,570 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (13x)
    .           
    .           	/* Add the parameter to the param */
   38 ( 0.00%)  	if (p_param)
   24 ( 0.00%)  		clish_param_insert_param(p_param, param);
  914 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  959 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_insert_param (4x)
    .           
   95 ( 0.00%)  	res = process_children(shell, element, param);
  570 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (19x)
    .           
    .           error:
   57 ( 0.00%)  	clish_xml_release(name);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(help);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(ptype);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(prefix);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(defval);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(mode);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(optional);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(order);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(value);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(hidden);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(test);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(completion);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(access);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
    .           
    .           	return res;
  171 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_action(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  210 ( 0.00%)  {
    .           	clish_action_t *action = NULL;
  126 ( 0.00%)  	char *builtin = clish_xmlnode_fetch_attr(element, "builtin");
  587 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
  105 ( 0.00%)  	char *shebang = clish_xmlnode_fetch_attr(element, "shebang");
  431 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
   88 ( 0.00%)  	clish_xmlnode_t *pelement = clish_xmlnode_parent(element);
  649 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   80 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (20x)
    .           	char *pname = clish_xmlnode_get_all_name(pelement);
    .           	char *text;
    .           	clish_sym_t *sym = NULL;
    .           
  172 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "VAR") == 0)
3,294 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,020 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (20x)
   21 ( 0.00%)  		action = clish_var__get_action((clish_var_t *)parent);
    .           	else
   67 ( 0.00%)  		action = clish_command__get_action((clish_command_t *)parent);
  703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (20x)
    .           
    .           	if (pname)
   63 ( 0.00%)  		free(pname);
2,705 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
    .           	text = clish_xmlnode_get_all_content(element);
    .           
   84 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   94 ( 0.00%)  		clish_action__set_script(action, text);
  984 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,701 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_script (17x)
    .           	}
    .           	if (text)
   63 ( 0.00%)  		free(text);
2,746 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
   42 ( 0.00%)  	if (builtin)
   28 ( 0.00%)  		sym = clish_shell_add_unresolved_sym(shell, builtin,
5,051 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,964 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_unresolved_sym (3x)
    .           			CLISH_SYM_TYPE_ACTION);
    .           	else
   51 ( 0.00%)  		sym = shell->hooks[CLISH_SYM_TYPE_ACTION];
    .           
   67 ( 0.00%)  	clish_action__set_builtin(action, sym);
  695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_builtin (20x)
   42 ( 0.00%)  	if (shebang)
    .           		clish_action__set_shebang(action, shebang);
    .           
   67 ( 0.00%)  	clish_xml_release(builtin);
  622 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (20x)
   63 ( 0.00%)  	clish_xml_release(shebang);
   21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (21x)
    .           
    .           	return 0;
  189 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_detail(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   28 ( 0.00%)  {
    .           	clish_command_t *cmd = (clish_command_t *) parent;
    .           
    .           	/* read the following text element */
    .           	char *text = clish_xmlnode_get_all_content(element);
    .           
   16 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   24 ( 0.00%)  		clish_command__set_detail(cmd, text);
1,561 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_detail (3x)
1,211 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	if (text)
   12 ( 0.00%)  		free(text);
  534 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (4x)
    .           
    .           	shell = shell; /* Happy compiler */
    .           
    .           	return 0;
   28 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_namespace(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    .           {
    .           	clish_view_t *v = (clish_view_t *)parent;
    .           	clish_nspace_t *nspace = NULL;
    .           	int res = -1;
-- line 906 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c
--------------------------------------------------------------------------------
Ir           

-- line 12 ----------------------------------------
  .           	"clish_script@clish",
  .           	NULL,
  .           	"clish_hook_config@clish",
  .           	"clish_hook_log@clish"
  .           };
  .           
  .           /*----------------------------------------------------------- */
  .           int clish_shell_startup(clish_shell_t *this)
  3 ( 0.00%)  {
  .           	const char *banner;
  .           	clish_context_t context;
  .           
  3 ( 0.00%)  	if (!this->startup) {
  .           		fprintf(stderr, "Error: Can't get valid STARTUP tag.\n");
  .           		return -1;
  .           	}
  .           
  .           	/* Prepare context */
  9 ( 0.00%)  	clish_context_init(&context, this);
645 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_cmd(&context, this->startup);
681 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_action(&context,
689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		clish_command__get_action(this->startup));
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (1x)
  .           
  7 ( 0.00%)  	banner = clish_command__get_detail(this->startup);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	if (banner)
 10 ( 0.00%)  		tinyrl_printf(this->tinyrl, "%s\n", banner);
18,806 ( 0.29%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Call log initialize */
  9 ( 0.00%)  	if (clish_shell__get_log(this))
657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		clish_shell_exec_log(&context, NULL, 0);
  .           	/* Call startup script */
  8 ( 0.00%)  	return clish_shell_execute(&context, NULL);
42,408 ( 0.65%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */
  .           void clish_shell__set_startup_view(clish_shell_t *this, const char *viewname)
  .           {
  .           	clish_view_t *view;
  .           
  .           	assert(this);
  .           	assert(this->startup);
-- line 52 ----------------------------------------
-- line 70 ----------------------------------------
  .           	assert(this);
  .           	lub_string_free(this->default_shebang);
  .           	this->default_shebang = lub_string_dup(shebang);
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           const char * clish_shell__get_default_shebang(const clish_shell_t *this)
  .           {
  4 ( 0.00%)  	assert(this);
  2 ( 0.00%)  	return this->default_shebang;
  2 ( 0.00%)  }
  .           
  .           
  .           
  .           /*-------------------------------------------------------- */
  .           /* Resolve PTYPE for given PARAM.
  .            */
  .           static clish_ptype_t * resolve_ptype(clish_shell_t *this, clish_param_t *param)
 75 ( 0.00%)  {
  .           	clish_ptype_t *ptype = NULL;
  .           
125 ( 0.00%)  	if (!this || !param)
  .           		return NULL;
  .           
  .           	/* Resolve PARAM's PTYPE */
233 ( 0.00%)  	ptype = clish_shell_find_ptype(this, clish_param__get_ptype_name(param));
6,418 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_ptype (24x)
1,692 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype_name (24x)
 50 ( 0.00%)  	if (!ptype) {
  .           		fprintf(stderr, "Error: Unresolved PTYPE \"%s\" in PARAM \"%s\"\n",
  .           			clish_param__get_ptype_name(param),
  .           			clish_param__get_name(param));
  .           		return NULL;
  .           	}
104 ( 0.00%)  	clish_param__set_ptype(param, ptype);
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype (24x)
104 ( 0.00%)  	clish_param__set_ptype_name(param, NULL); /* Free some memory */
813 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,688 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype_name (24x)
  .           
  .           	return ptype;
125 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* Static recursive function to iterate parameters. Logically it's the
  .            * part of clish_shell_prepare() function.
  .            */
  .           static int iterate_paramv(clish_shell_t *this, clish_paramv_t *paramv,
  .           	clish_hook_access_fn_t *access_fn)
400 ( 0.01%)  {
100 ( 0.00%)  	int i = 0;
  .           	clish_param_t *param;
  .           
522 ( 0.01%)  	while((param = clish_paramv__get_param(paramv, i))) {
673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
214 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (44x)
  .           		clish_paramv_t *nested_paramv;
  .           
  .           		/* Resolve PARAM's PTYPE */
120 ( 0.00%)  		if (!resolve_ptype(this, param))
10,769 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (19x)
  .           			return -1;
  .           
  .           		/* Check access for PARAM */
 48 ( 0.00%)  		if (access_fn && clish_param__get_access(param) &&
  .           			access_fn(this, clish_param__get_access(param))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove PARAM \"%s\"\n",
  .           				clish_param__get_name(param));
  .           #endif
  .           			if (clish_paramv_remove(paramv, i) < 0) {
  .           				fprintf(stderr, "Error: Some system problem\n");
  .           				return -1;
  .           			}
  .           			clish_param_delete(param);
  .           			continue; /* Don't increment index */
  .           		}
  .           		/* Recursive iterate nested PARAMs */
 76 ( 0.00%)  		nested_paramv = clish_param__get_paramv(param);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_paramv (18x)
144 ( 0.00%)  		if (iterate_paramv(this, nested_paramv, access_fn) < 0)
2,646 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 (19x)
  .           			return -1;
 48 ( 0.00%)  		i++;
  .           	}
  .           
 50 ( 0.00%)  	return 0;
300 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This function prepares schema for execution. It loads
  .            * plugins, link unresolved symbols, then iterates all the
  .            * objects and link them to each other, check access
  .            * permissions. Don't execute clish_shell_startup() without this
  .            * function.
  .            */
  .           int clish_shell_prepare(clish_shell_t *this)
  8 ( 0.00%)  {
  .           	clish_command_t *cmd;
  .           	clish_view_t *view;
  .           	clish_nspace_t *nspace;
  .           	lub_bintree_t *view_tree, *cmd_tree;
  .           	lub_list_t *nspace_tree;
  .           	lub_bintree_iterator_t cmd_iter, view_iter;
  .           	lub_list_node_t *nspace_iter;
  .           	clish_hook_access_fn_t *access_fn = NULL;
  .           	clish_paramv_t *paramv;
  .           	int i = 0;
  .           
  .           	/* Add statically linked plugins */
  4 ( 0.00%)  	while (clish_plugin_builtin_list[i].name) {
  .           		clish_plugin_t *plugin;
  .           		plugin = clish_shell_find_create_plugin(this,
  .           			clish_plugin_builtin_list[i].name);
  .           		clish_plugin_add_init(plugin,
  .           			clish_plugin_builtin_list[i].init);
  .           		clish_plugin__set_builtin_flag(plugin, BOOL_TRUE);
  .           		i++;
  .           	}
  .           
  .           	/* Add default plugin to the list of plugins */
  5 ( 0.00%)  	if (this->default_plugin) {
  9 ( 0.00%)  		clish_shell_find_create_plugin(this, "clish");
3,187 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* Default hooks */
 11 ( 0.00%)  		for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 15 ( 0.00%)  			if (this->hooks_use[i])
  .           				continue;
 20 ( 0.00%)  			if (!clish_plugin_default_hook[i])
  .           				continue;
 18 ( 0.00%)  			clish_sym__set_name(this->hooks[i],
957 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
640 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_name (2x)
  .           				clish_plugin_default_hook[i]);
  .           		}
  .           	}
  .           	/* Add default syms to unresolved table */
 10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 25 ( 0.00%)  		if (clish_sym__get_name(this->hooks[i]))
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (5x)
 17 ( 0.00%)  			lub_list_add(this->syms, this->hooks[i]);
1,171 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (3x)
  .           	}
  .           
  .           	/* Load plugins and link symbols */
  9 ( 0.00%)  	if (clish_shell_load_plugins(this) < 0)
155,815 ( 2.37%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  9 ( 0.00%)  	if (clish_shell_link_plugins(this) < 0)
10,280 ( 0.16%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  .           
 12 ( 0.00%)  	access_fn = clish_sym__get_func(clish_shell_get_hook(this, CLISH_SYM_TYPE_ACCESS));
648 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (1x)
  .           
  .           	/* Iterate the VIEWs */
  .           	view_tree = &this->view_tree;
  9 ( 0.00%)  	view = lub_bintree_findfirst(view_tree);
1,054 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 23 ( 0.00%)  	for (lub_bintree_iterator_init(&view_iter, view_tree, view);
951 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 20 ( 0.00%)  		view; view = lub_bintree_iterator_next(&view_iter)) {
1,901 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (5x)
  .           		/* Check access rights for the VIEW */
 10 ( 0.00%)  		if (access_fn && clish_view__get_access(view) &&
  .           			access_fn(this, clish_view__get_access(view))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove VIEW \"%s\"\n",
  .           				clish_view__get_name(view));
  .           #endif
  .           			lub_bintree_remove(view_tree, view);
  .           			clish_view_delete(view);
  .           			continue;
  .           		}
  .           
  .           		/* Iterate the NAMESPACEs */
 24 ( 0.00%)  		nspace_tree = clish_view__get_nspace_tree(view);
703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_nspace_tree (4x)
 20 ( 0.00%)  		nspace_iter = lub_list__get_head(nspace_tree);
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
 10 ( 0.00%)  		while(nspace_iter) {
  .           			clish_view_t *ref_view;
  .           			lub_list_node_t *old_nspace_iter;
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(nspace_iter);
  .           			old_nspace_iter = nspace_iter;
  .           			nspace_iter = lub_list_node__get_next(nspace_iter);
  .           			/* Resolve NAMESPACEs and remove unresolved ones */
  .           			ref_view = clish_shell_find_view(this, clish_nspace__get_view_name(nspace));
  .           			if (!ref_view) {
-- line 235 ----------------------------------------
-- line 259 ----------------------------------------
  .           				lub_list_del(nspace_tree, old_nspace_iter);
  .           				lub_list_node_free(old_nspace_iter);
  .           				clish_nspace_delete(nspace);
  .           				continue;
  .           			}
  .           		}
  .           
  .           		/* Iterate the COMMANDs */
 24 ( 0.00%)  		cmd_tree = clish_view__get_command_tree(view);
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_command_tree (4x)
 20 ( 0.00%)  		cmd = lub_bintree_findfirst(cmd_tree);
441 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (5x)
 88 ( 0.00%)  		for (lub_bintree_iterator_init(&cmd_iter, cmd_tree, cmd);
204 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_init.c:lub_bintree_iterator_init (5x)
108 ( 0.00%)  			cmd; cmd = lub_bintree_iterator_next(&cmd_iter)) {
3,573 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
24,274 ( 0.37%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (25x)
108 ( 0.00%)  			int cmd_is_alias = clish_command__get_alias(cmd)?1:0;
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_alias (25x)
  .           			clish_param_t *args = NULL;
  .           
  .           			/* Check access rights for the COMMAND */
 52 ( 0.00%)  			if (access_fn && clish_command__get_access(cmd) &&
  .           				access_fn(this, clish_command__get_access(cmd))) {
  .           #ifdef DEBUG
  .           				fprintf(stderr, "Warning: Access denied. Remove COMMAND \"%s\" from VIEW \"%s\"\n",
  .           					clish_command__get_name(cmd), clish_view__get_name(view));
  .           #endif
  .           				lub_bintree_remove(cmd_tree, cmd);
  .           				clish_command_delete(cmd);
  .           				continue;
  .           			}
  .           
  .           			/* Resolve command aliases */
 52 ( 0.00%)  			if (cmd_is_alias) {
  .           				clish_view_t *aview;
  .           				clish_command_t *cmdref;
 26 ( 0.00%)  				const char *alias_view = clish_command__get_alias_view(cmd);
  .           				if (!alias_view)
  .           					aview = clish_command__get_pview(cmd);
  .           				else
  .           					aview = clish_shell_find_view(this, alias_view);
  .           				if (!aview /* Removed or broken VIEW */
  .           					||
  .           					/* Removed or broken referenced COMMAND */
  .           					!(cmdref = clish_view_find_command(aview, clish_command__get_alias(cmd), BOOL_FALSE))
-- line 298 ----------------------------------------
-- line 328 ----------------------------------------
  .           					lub_bintree_remove(cmd_tree, cmd);
  .           					clish_command_delete(cmd);
  .           					continue;
  .           				}
  .           			}
  .           			if (cmd_is_alias) /* Don't duplicate paramv processing for aliases */
  .           				continue;
  .           			/* Iterate PARAMeters */
 56 ( 0.00%)  			paramv = clish_command__get_paramv(cmd);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (25x)
156 ( 0.00%)  			if (iterate_paramv(this, paramv, access_fn) < 0)
16,132 ( 0.25%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv (26x)
  .           				return -1;
  .           			/* Resolve PTYPE for args */
134 ( 0.00%)  			if ((args = clish_command__get_args(cmd))) {
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (25x)
  5 ( 0.00%)  				if (!resolve_ptype(this, args))
608 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (1x)
  .           					return -1;
  .           			}
  .           		}
  .           	}
  .           
  2 ( 0.00%)  	return 0;
  8 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
The following files chosen for auto-annotation could not be found:
--------------------------------------------------------------------------------
  /opt/build/glibc/glibc-2.24/csu/../csu/libc-start.c
  /opt/build/glibc/glibc-2.24/dlfcn/dlerror.c
  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-sysdep.c
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h
  /opt/build/glibc/glibc-2.24/elf/dl-deps.c
  /opt/build/glibc/glibc-2.24/elf/dl-error.c
  /opt/build/glibc/glibc-2.24/elf/dl-load.c
  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c
  /opt/build/glibc/glibc-2.24/elf/dl-misc.c
  /opt/build/glibc/glibc-2.24/elf/dl-open.c
  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c
  /opt/build/glibc/glibc-2.24/elf/rtld.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c
  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c
  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c
  /opt/build/glibc/glibc-2.24/locale/findlocale.c
  /opt/build/glibc/glibc-2.24/locale/loadarchive.c
  /opt/build/glibc/glibc-2.24/locale/setlocale.c
  /opt/build/glibc/glibc-2.24/malloc/malloc.c
  /opt/build/glibc/glibc-2.24/posix/regcomp.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.c
  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S
  /opt/build/glibc/glibc-2.24/string/strdup.c
  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c
  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c
  /usr/include/x86_64-linux-gnu/bits/string2.h

--------------------------------------------------------------------------------
Ir               
--------------------------------------------------------------------------------
948,878 (14.46%)  events annotated

--------------------------------------------------------------------------------
Profile data file '../heavy/callgrind.out.2004' (creator: callgrind-3.13.0)
--------------------------------------------------------------------------------
I1 cache: 
D1 cache: 
LL cache: 
Timerange: Basic block 0 - 1137894
Trigger: Program termination
Profiled target:  ./clish -x ../../xml-examples/clish (PID 2004, part 1)
Events recorded:  Ir
Events shown:     Ir
Event sort order: Ir
Thresholds:       99
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir                 
--------------------------------------------------------------------------------
5,085,995 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir                  file:function
--------------------------------------------------------------------------------
5,085,995 (100.0%)  ???:0x0000000000000c20 [/lib/x86_64-linux-gnu/ld-2.24.so]
4,810,277 (94.58%)  ???:_start [/home/ykuznetsov/klish-2.1.3/bin/.libs/clish]
4,810,266 (94.58%)  /opt/build/glibc/glibc-2.24/csu/../csu/libc-start.c:(below main) [/lib/x86_64-linux-gnu/libc-2.24.so]
4,810,064 (94.57%)  /home/ykuznetsov/klish-2.1.3/bin/clish.c:main [/home/ykuznetsov/klish-2.1.3/bin/.libs/clish]
4,808,825 (94.55%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave [/lib/x86_64-linux-gnu/ld-2.24.so]
4,172,561 (82.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:clish_shell_load_scheme [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,999,104 (58.97%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,361,179 (46.43%)  /usr/include/x86_64-linux-gnu/bits/string2.h:clish_shell_load_scheme
2,360,995 (46.42%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,350,698 (46.22%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,345,328 (46.11%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,088,343 (41.06%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,078,886 (40.87%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,064,951 (40.60%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,986,989 (39.07%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp [/lib/x86_64-linux-gnu/libc-2.24.so]
1,862,773 (36.63%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
1,804,763 (35.48%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,586,801 (31.20%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,414,464 (27.81%)  ???:XML_Parse [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,402,060 (27.57%)  ???:XML_ParseBuffer [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,401,630 (27.56%)  ???:0x000000000000b4f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,395,360 (27.44%)  ???:0x00000000000094a0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,352,120 (26.59%)  ???:0x0000000000009440 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,351,830 (26.58%)  ???:0x0000000000008190 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,100,831 (21.64%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap [/lib/x86_64-linux-gnu/libc-2.24.so]
1,100,236 (21.63%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap_iter.isra.24 [/lib/x86_64-linux-gnu/libc-2.24.so]
1,013,962 (19.94%)  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c:mbrtowc [/lib/x86_64-linux-gnu/libc-2.24.so]
  923,677 (18.16%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  883,716 (17.38%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  802,023 (15.77%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  800,259 (15.73%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  797,126 (15.67%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  704,424 (13.85%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  665,688 (13.09%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  590,799 (11.62%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c:__gconv_transform_utf8_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  511,211 (10.05%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp [/lib/x86_64-linux-gnu/libc-2.24.so]
  510,924 (10.05%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch [/lib/x86_64-linux-gnu/libc-2.24.so]
  509,636 (10.02%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression [/lib/x86_64-linux-gnu/libc-2.24.so]
  493,174 ( 9.70%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  460,448 ( 9.05%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  457,238 ( 8.99%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:_dl_lookup_symbol_x [/lib/x86_64-linux-gnu/ld-2.24.so]
  442,436 ( 8.70%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_chardata_handler [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  433,577 ( 8.52%)  ???:0x0000000005686930 [???]
  416,130 ( 8.18%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  380,968 ( 7.49%)  ???:0x0000000000007580 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  337,145 ( 6.63%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:do_lookup_x [/lib/x86_64-linux-gnu/ld-2.24.so]
  316,846 ( 6.23%)  /opt/build/glibc/glibc-2.24/string/strdup.c:strdup [/lib/x86_64-linux-gnu/ld-2.24.so]
  302,485 ( 5.95%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_view [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  288,347 ( 5.67%)  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c:_dl_relocate_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  272,522 ( 5.36%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:free [/lib/x86_64-linux-gnu/libc-2.24.so]
  272,383 ( 5.36%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:_dl_start [/lib/x86_64-linux-gnu/ld-2.24.so]
  271,740 ( 5.34%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-sysdep.c:_dl_sysdep_start [/lib/x86_64-linux-gnu/ld-2.24.so]
  271,064 ( 5.33%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:dl_main [/lib/x86_64-linux-gnu/ld-2.24.so]
  265,724 ( 5.22%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h:_dl_relocate_object
  251,594 ( 4.95%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c:_dl_fixup [/lib/x86_64-linux-gnu/ld-2.24.so]
  248,633 ( 4.89%)  ???:0x0000000000013e60 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  240,090 ( 4.72%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_param [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  226,618 ( 4.46%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:clish_shell_prepare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  225,902 ( 4.44%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_free [/lib/x86_64-linux-gnu/libc-2.24.so]
  204,780 ( 4.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_element_start [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  197,624 ( 3.89%)  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c:btowc [/lib/x86_64-linux-gnu/libc-2.24.so]
  193,016 ( 3.80%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  192,211 ( 3.78%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  191,026 ( 3.76%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  190,544 ( 3.75%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_init [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  186,259 ( 3.66%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error [/lib/x86_64-linux-gnu/ld-2.24.so]
  172,879 ( 3.40%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c:__gconv_transform_utf8_internal
  156,580 ( 3.08%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
  155,138 ( 3.05%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_load_plugins [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  154,475 ( 3.04%)  /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_load [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  145,295 ( 2.86%)  ???:0x000000000000f290 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  134,971 ( 2.65%)  /opt/build/glibc/glibc-2.24/dlfcn/dlerror.c:_dlerror_run [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,314 ( 2.60%)  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c:dlopen@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,193 ( 2.60%)  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c:dlopen_doit [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,164 ( 2.60%)  /opt/build/glibc/glibc-2.24/elf/dl-open.c:_dl_open [/lib/x86_64-linux-gnu/ld-2.24.so]
  132,022 ( 2.60%)  /opt/build/glibc/glibc-2.24/elf/dl-open.c:dl_open_worker [/lib/x86_64-linux-gnu/ld-2.24.so]
  127,769 ( 2.51%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter [/lib/x86_64-linux-gnu/libc-2.24.so]
  111,010 ( 2.18%)  /opt/build/glibc/glibc-2.24/elf/dl-misc.c:_dl_name_match_p [/lib/x86_64-linux-gnu/ld-2.24.so]
  108,808 ( 2.14%)  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c:__collseq_table_lookup [/lib/x86_64-linux-gnu/libc-2.24.so]
  102,528 ( 2.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:strcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  101,318 ( 1.99%)  ???:0x000000000001a2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  100,836 ( 1.98%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
   97,036 ( 1.91%)  ???:XML_ParserCreate [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   97,006 ( 1.91%)  ???:XML_ParserCreate_MM [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   92,591 ( 1.82%)  /opt/build/glibc/glibc-2.24/locale/setlocale.c:setlocale [/lib/x86_64-linux-gnu/libc-2.24.so]
   90,949 ( 1.79%)  ???:0x0000000000004c30 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   90,589 ( 1.78%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_consolidate [/lib/x86_64-linux-gnu/libc-2.24.so]
   86,906 ( 1.71%)  /opt/build/glibc/glibc-2.24/locale/findlocale.c:_nl_find_locale [/lib/x86_64-linux-gnu/libc-2.24.so]
   86,862 ( 1.71%)  ???:0x0000000000004cb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   84,985 ( 1.67%)  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
   84,771 ( 1.67%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:_dl_map_object_deps [/lib/x86_64-linux-gnu/ld-2.24.so]
   82,441 ( 1.62%)  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c:vsnprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
   80,590 ( 1.58%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   77,140 ( 1.52%)  ???:0x0000000000005570 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   76,665 ( 1.51%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object [/lib/x86_64-linux-gnu/ld-2.24.so]
   75,825 ( 1.49%)  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
   72,941 ( 1.43%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_compile_internal
   72,620 ( 1.43%)  /opt/build/glibc/glibc-2.24/locale/loadarchive.c:_nl_load_locale_from_archive [/lib/x86_64-linux-gnu/libc-2.24.so]
   70,629 ( 1.39%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:openaux [/lib/x86_64-linux-gnu/ld-2.24.so]
   69,447 ( 1.37%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_action [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   69,014 ( 1.36%)  ???:0x0000000000005130 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   67,663 ( 1.33%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
   63,562 ( 1.25%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
   60,174 ( 1.18%)  /opt/build/glibc/glibc-2.24/intl/../intl/l10nflist.c:_nl_normalize_codeset [/lib/x86_64-linux-gnu/libc-2.24.so]
   60,022 ( 1.18%)  /opt/build/glibc/glibc-2.24/malloc/hooks.c:malloc_hook_ini [/lib/x86_64-linux-gnu/libc-2.24.so]
   59,310 ( 1.17%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_acquire_state_context [/lib/x86_64-linux-gnu/libc-2.24.so]
   58,930 ( 1.16%)  /opt/build/glibc/glibc-2.24/malloc/arena.c:ptmalloc_init.part.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
   58,553 ( 1.15%)  /opt/build/glibc/glibc-2.24/elf/dl-addr.c:_dl_addr [/lib/x86_64-linux-gnu/libc-2.24.so]
   56,681 ( 1.11%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
   56,216 ( 1.11%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   52,175 ( 1.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:build_wcs_buffer [/lib/x86_64-linux-gnu/libc-2.24.so]
   51,856 ( 1.02%)  ???:XML_ParserFree [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   50,337 ( 0.99%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:postorder [/lib/x86_64-linux-gnu/libc-2.24.so]

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/bin/clish.c
--------------------------------------------------------------------------------
Ir          

-- line 43 ----------------------------------------
 .           /* #define version(v) printf("%s\n", QUOTE(v)) */
 .           #define version(v) printf("%s\n", v)
 .           
 .           static void sighandler(int signo);
 .           static void help(int status, const char *argv0);
 .           
 .           /*--------------------------------------------------------- */
 .           int main(int argc, char **argv)
 9 ( 0.00%)  {
 .           	int running;
 .           	int result = -1;
 .           	clish_shell_t *shell = NULL;
 .           
 .           	/* Command line options */
 2 ( 0.00%)  	const char *socket_path = KONFD_SOCKET_PATH;
 1 ( 0.00%)  	bool_t lockless = BOOL_FALSE;
 1 ( 0.00%)  	bool_t stop_on_error = BOOL_FALSE;
 1 ( 0.00%)  	bool_t interactive = BOOL_TRUE;
 1 ( 0.00%)  	bool_t quiet = BOOL_FALSE;
 1 ( 0.00%)  	bool_t utf8 = BOOL_FALSE;
 1 ( 0.00%)  	bool_t bit8 = BOOL_FALSE;
 1 ( 0.00%)  	bool_t log = BOOL_FALSE;
 1 ( 0.00%)  	int log_facility = LOG_LOCAL0;
 1 ( 0.00%)  	bool_t dryrun = BOOL_FALSE;
 1 ( 0.00%)  	bool_t dryrun_config = BOOL_FALSE;
 8 ( 0.00%)  	const char *xml_path = getenv("CLISH_PATH");
1,913 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 4 ( 0.00%)  	const char *view = getenv("CLISH_VIEW");
380 ( 0.01%)  => /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv (1x)
 4 ( 0.00%)  	const char *viewid = getenv("CLISH_VIEWID");
380 ( 0.01%)  => /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv (1x)
 .           	const char *xslt_file = NULL;
 .           
 2 ( 0.00%)  	FILE *outfd = stdout;
 1 ( 0.00%)  	bool_t istimeout = BOOL_FALSE;
 1 ( 0.00%)  	unsigned int timeout = 0;
 1 ( 0.00%)  	bool_t cmd = BOOL_FALSE; /* -c option */
 .           	lub_list_t *cmds; /* Commands defined by -c */
 .           	lub_list_node_t *iter;
 2 ( 0.00%)  	const char *histfile = "~/.clish_history";
 .           	char *histfile_expanded = NULL;
 1 ( 0.00%)  	unsigned int histsize = 50;
 .           	clish_sym_t *sym = NULL;
 .           
 .           	/* Signal vars */
 .           	struct sigaction sigpipe_act;
 .           	sigset_t sigpipe_set;
 .           
 .           	static const char *shortopts = "hvs:ledx:w:i:bqu8oO:kt:c:f:z:p:";
 .           #ifdef HAVE_GETOPT_LONG
-- line 89 ----------------------------------------
-- line 109 ----------------------------------------
 .           		{"histfile",	1, NULL, 'f'},
 .           		{"histsize",	1, NULL, 'z'},
 .           		{"xslt",	1, NULL, 'p'},
 .           		{NULL,		0, NULL, 0}
 .           	};
 .           #endif
 .           
 .           	/* Ignore SIGPIPE */
 8 ( 0.00%)  	sigemptyset(&sigpipe_set);
1,626 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 8 ( 0.00%)  	sigaddset(&sigpipe_set, SIGPIPE);
1,589 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 1 ( 0.00%)  	sigpipe_act.sa_flags = 0;
32 ( 0.00%)  	sigpipe_act.sa_mask = sigpipe_set;
 2 ( 0.00%)  	sigpipe_act.sa_handler = &sighandler;
 9 ( 0.00%)  	sigaction(SIGPIPE, &sigpipe_act, NULL);
1,622 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           #if HAVE_LOCALE_H
 .           	/* Set current locale */
 8 ( 0.00%)  	setlocale(LC_ALL, "");
94,116 ( 1.85%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           #endif
 .           
 .           	/* Var initialization */
 8 ( 0.00%)  	cmds = lub_list_new(NULL);
2,408 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           	/* Parse command line options */
 .           	while(1) {
 .           		int opt;
 .           #ifdef HAVE_GETOPT_LONG
18 ( 0.00%)  		opt = getopt_long(argc, argv, shortopts, longopts, NULL);
2,245 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
109 ( 0.00%)  => /opt/build/glibc/glibc-2.24/posix/getopt1.c:getopt_long (1x)
 .           #else
 .           		opt = getopt(argc, argv, shortopts);
 .           #endif
 4 ( 0.00%)  		if (-1 == opt)
 .           			break;
 7 ( 0.00%)  		switch (opt) {
 .           		case 's':
 .           			socket_path = optarg;
 .           			break;
 .           		case 'l':
 .           			lockless = BOOL_TRUE;
 .           			break;
 .           		case 'e':
 .           			stop_on_error = BOOL_TRUE;
-- line 150 ----------------------------------------
-- line 160 ----------------------------------------
 .           			break;
 .           		case '8':
 .           			bit8 = BOOL_TRUE;
 .           			break;
 .           		case 'o':
 .           			log = BOOL_TRUE;
 .           			break;
 .           		case 'O':
 3 ( 0.00%)  			if (lub_log_facility(optarg, &log_facility)) {
 .           				fprintf(stderr, "Error: Illegal syslog facility %s.\n", optarg);
 .           				help(-1, argv[0]);
 .           				goto end;
 .           			}
 .           			break;
 .           		case 'd':
 .           			dryrun = BOOL_TRUE;
 .           			break;
 .           		case 'x':
 2 ( 0.00%)  			xml_path = optarg;
 1 ( 0.00%)  			break;
 .           		case 'w':
 .           			view = optarg;
 .           			break;
 .           		case 'i':
 .           			viewid = optarg;
 .           			break;
 .           		case 'k':
 .           			lockless = BOOL_TRUE;
 .           			dryrun = BOOL_TRUE;
 .           			dryrun_config = BOOL_TRUE;
 .           			break;
 .           		case 't':
 .           			istimeout = BOOL_TRUE;
 .           			timeout = 0;
 2 ( 0.00%)  			lub_conv_atoui(optarg, &timeout, 0);
 .           			break;
 .           		case 'c': {
 .           			char *str;
 .           			cmd = BOOL_TRUE;
 .           			quiet = BOOL_TRUE;
 .           			str = strdup(optarg);
 .           			lub_list_add(cmds, str);
 .           			}
-- line 202 ----------------------------------------
-- line 204 ----------------------------------------
 .           		case 'f':
 .           			if (!strcmp(optarg, "/dev/null"))
 .           				histfile = NULL;
 .           			else
 .           				histfile = optarg;
 .           			break;
 .           		case 'z': {
 .           			histsize = 0;
 2 ( 0.00%)  			lub_conv_atoui(optarg, &histsize, 0);
 .           			}
 .           			break;
 .           		case 'p':
 .           #ifdef HAVE_LIB_LIBXSLT
 .           			xslt_file = optarg;
 .           #else
 .           			fprintf(stderr, "Error: The klish was built without XSLT support.\n");
 .           			goto end;
-- line 220 ----------------------------------------
-- line 231 ----------------------------------------
 .           		default:
 .           			help(-1, argv[0]);
 .           			goto end;
 .           			break;
 .           		}
 .           	}
 .           
 .           	/* Validate command line options */
 4 ( 0.00%)  	if (utf8 && bit8) {
 .           		fprintf(stderr, "Error: The -u and -8 options can't be used together.\n");
 .           		goto end;
 .           	}
 .           
 .           	/* Create shell instance */
 2 ( 0.00%)  	if (quiet) {
 .           		FILE *tmpfd = NULL;
 .           		if ((tmpfd = fopen("/dev/null", "w")))
 .           			outfd = tmpfd;
 .           	}
10 ( 0.00%)  	shell = clish_shell_new(NULL, outfd, stop_on_error);
192,854 ( 3.79%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 2 ( 0.00%)  	if (!shell) {
 .           		fprintf(stderr, "Error: Can't run clish.\n");
 .           		goto end;
 .           	}
 .           	/* Load the XML files */
 6 ( 0.00%)  	clish_xmldoc_start();
702 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
11 ( 0.00%)  	if (clish_shell_load_scheme(shell, xml_path, xslt_file))
4,173,323 (82.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		goto end;
 .           	/* Set communication to the konfd */
 8 ( 0.00%)  	clish_shell__set_socket(shell, socket_path);
5,538 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	/* Set lockless mode */
 2 ( 0.00%)  	if (lockless)
 .           		clish_shell__set_lockfile(shell, NULL);
 .           	/* Set interactive mode */
 2 ( 0.00%)  	if (!interactive)
 .           		clish_shell__set_interactive(shell, interactive);
 .           	/* Set startup view */
 3 ( 0.00%)  	if (view)
 .           		clish_shell__set_startup_view(shell, view);
 .           	/* Set startup viewid */
 3 ( 0.00%)  	if (viewid)
 .           		clish_shell__set_startup_viewid(shell, viewid);
 .           	/* Set UTF-8 or 8-bit mode */
 4 ( 0.00%)  	if (utf8 || bit8)
 .           		clish_shell__set_utf8(shell, utf8);
 .           	else {
 .           #if HAVE_LANGINFO_CODESET
 .           		/* Autodetect encoding */
17 ( 0.00%)  		if (!strcmp(nl_langinfo(CODESET), "UTF-8"))
3,103 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 9 ( 0.00%)  			clish_shell__set_utf8(shell, BOOL_TRUE);
1,501 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           #else
 .           		/* The default is 8-bit if locale is not supported */
 .           		clish_shell__set_utf8(shell, BOOL_FALSE);
 .           #endif
 .           	}
 .           	/* Set logging */
 2 ( 0.00%)  	if (log) {
 .           		clish_shell__set_log(shell, log);
 .           		clish_shell__set_facility(shell, log_facility);
 .           	}
 .           	/* Set dry-run */
 2 ( 0.00%)  	if (dryrun)
 .           		clish_shell__set_dryrun(shell, dryrun);
 .           	/* Set idle timeout */
 2 ( 0.00%)  	if (istimeout)
 .           		clish_shell__set_timeout(shell, timeout);
 .           	/* Set history settings */
 8 ( 0.00%)  	clish_shell__stifle_history(shell, histsize);
2,399 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 3 ( 0.00%)  	if (histfile)
 8 ( 0.00%)  		histfile_expanded = lub_system_tilde_expand(histfile);
2,178 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 2 ( 0.00%)  	if (histfile_expanded)
 8 ( 0.00%)  		clish_shell__restore_history(shell, histfile_expanded);
33,758 ( 0.66%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	/* Load plugins, link aliases and check access rights */
 9 ( 0.00%)  	if (clish_shell_prepare(shell) < 0)
227,348 ( 4.47%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		goto end;
 .           	/* Dryrun config and log hooks */
 2 ( 0.00%)  	if (dryrun_config) {
 .           		if ((sym = clish_shell_get_hook(shell, CLISH_SYM_TYPE_CONFIG)))
 .           			clish_sym__set_permanent(sym, BOOL_FALSE);
 .           		if ((sym = clish_shell_get_hook(shell, CLISH_SYM_TYPE_LOG)))
 .           			clish_sym__set_permanent(sym, BOOL_FALSE);
 .           	}
 .           #ifdef DEBUG
 .           	clish_shell_dump(shell);
 .           #endif
 .           
 .           	/* Set source of command stream: files or interactive tty */
 3 ( 0.00%)  	if(optind < argc) {
 .           		int i;
 .           		/* Run the commands from the files */
 .           		for (i = argc - 1; i >= optind; i--)
 .           			clish_shell_push_file(shell, argv[i], stop_on_error);
 .           	} else {
 .           		/* The interactive shell */
15 ( 0.00%)  		int tmpfd = dup(fileno(stdin));
2,979 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 .           #ifdef FD_CLOEXEC
16 ( 0.00%)  		fcntl(tmpfd, F_SETFD, fcntl(tmpfd, F_GETFD) | FD_CLOEXEC);
1,522 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
22 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/sysv/linux/fcntl.c:fcntl (1x)
 .           #endif
18 ( 0.00%)  		clish_shell_push_fd(shell, fdopen(tmpfd, "r"), stop_on_error);
6,901 ( 0.14%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 .           	}
 .           
 .           	/* Execute startup */
 7 ( 0.00%)  	running = clish_shell_startup(shell);
49,200 ( 0.97%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	if (running) {
 .           		fprintf(stderr, "Error: Can't startup clish.\n");
 .           		goto end;
 .           	}
 .           
 .           	if (cmd) {
 .           		/* Iterate cmds */
 .           		for(iter = lub_list__get_head(cmds);
-- line 341 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c
--------------------------------------------------------------------------------
Ir           

-- line 12 ----------------------------------------
  .           	"clish_script@clish",
  .           	NULL,
  .           	"clish_hook_config@clish",
  .           	"clish_hook_log@clish"
  .           };
  .           
  .           /*----------------------------------------------------------- */
  .           int clish_shell_startup(clish_shell_t *this)
  3 ( 0.00%)  {
  .           	const char *banner;
  .           	clish_context_t context;
  .           
  3 ( 0.00%)  	if (!this->startup) {
  .           		fprintf(stderr, "Error: Can't get valid STARTUP tag.\n");
  .           		return -1;
  .           	}
  .           
  .           	/* Prepare context */
  9 ( 0.00%)  	clish_context_init(&context, this);
645 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_cmd(&context, this->startup);
681 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_action(&context,
689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		clish_command__get_action(this->startup));
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (1x)
  .           
  7 ( 0.00%)  	banner = clish_command__get_detail(this->startup);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	if (banner)
 10 ( 0.00%)  		tinyrl_printf(this->tinyrl, "%s\n", banner);
18,806 ( 0.37%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Call log initialize */
  9 ( 0.00%)  	if (clish_shell__get_log(this))
657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		clish_shell_exec_log(&context, NULL, 0);
  .           	/* Call startup script */
  8 ( 0.00%)  	return clish_shell_execute(&context, NULL);
26,241 ( 0.52%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           void clish_shell__set_startup_view(clish_shell_t *this, const char *viewname)
  .           {
  .           	clish_view_t *view;
  .           
  .           	assert(this);
-- line 51 ----------------------------------------
-- line 70 ----------------------------------------
  .           	assert(this);
  .           	lub_string_free(this->default_shebang);
  .           	this->default_shebang = lub_string_dup(shebang);
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           const char * clish_shell__get_default_shebang(const clish_shell_t *this)
  .           {
  2 ( 0.00%)  	assert(this);
  1 ( 0.00%)  	return this->default_shebang;
  1 ( 0.00%)  }
  .           
  .           
  .           
  .           /*-------------------------------------------------------- */
  .           /* Resolve PTYPE for given PARAM.
  .            */
  .           static clish_ptype_t * resolve_ptype(clish_shell_t *this, clish_param_t *param)
 75 ( 0.00%)  {
  .           	clish_ptype_t *ptype = NULL;
  .           
125 ( 0.00%)  	if (!this || !param)
  .           		return NULL;
  .           
  .           	/* Resolve PARAM's PTYPE */
233 ( 0.00%)  	ptype = clish_shell_find_ptype(this, clish_param__get_ptype_name(param));
6,418 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_ptype (24x)
1,692 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype_name (24x)
 50 ( 0.00%)  	if (!ptype) {
  .           		fprintf(stderr, "Error: Unresolved PTYPE \"%s\" in PARAM \"%s\"\n",
  .           			clish_param__get_ptype_name(param),
  .           			clish_param__get_name(param));
  .           		return NULL;
  .           	}
104 ( 0.00%)  	clish_param__set_ptype(param, ptype);
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype (24x)
104 ( 0.00%)  	clish_param__set_ptype_name(param, NULL); /* Free some memory */
813 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,688 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype_name (24x)
  .           
  .           	return ptype;
125 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* Static recursive function to iterate parameters. Logically it's the
  .            * part of clish_shell_prepare() function.
  .            */
  .           static int iterate_paramv(clish_shell_t *this, clish_paramv_t *paramv,
  .           	clish_hook_access_fn_t *access_fn)
400 ( 0.01%)  {
100 ( 0.00%)  	int i = 0;
  .           	clish_param_t *param;
  .           
522 ( 0.01%)  	while((param = clish_paramv__get_param(paramv, i))) {
673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
214 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (44x)
  .           		clish_paramv_t *nested_paramv;
  .           
  .           		/* Resolve PARAM's PTYPE */
120 ( 0.00%)  		if (!resolve_ptype(this, param))
10,769 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (19x)
  .           			return -1;
  .           
  .           		/* Check access for PARAM */
 48 ( 0.00%)  		if (access_fn && clish_param__get_access(param) &&
  .           			access_fn(this, clish_param__get_access(param))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove PARAM \"%s\"\n",
  .           				clish_param__get_name(param));
  .           #endif
  .           			if (clish_paramv_remove(paramv, i) < 0) {
  .           				fprintf(stderr, "Error: Some system problem\n");
  .           				return -1;
  .           			}
  .           			clish_param_delete(param);
  .           			continue; /* Don't increment index */
  .           		}
  .           		/* Recursive iterate nested PARAMs */
 76 ( 0.00%)  		nested_paramv = clish_param__get_paramv(param);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_paramv (18x)
144 ( 0.00%)  		if (iterate_paramv(this, nested_paramv, access_fn) < 0)
2,646 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 (19x)
  .           			return -1;
 48 ( 0.00%)  		i++;
  .           	}
  .           
 50 ( 0.00%)  	return 0;
300 ( 0.01%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This function prepares schema for execution. It loads
  .            * plugins, link unresolved symbols, then iterates all the
  .            * objects and link them to each other, check access
  .            * permissions. Don't execute clish_shell_startup() without this
  .            * function.
  .            */
  .           int clish_shell_prepare(clish_shell_t *this)
  8 ( 0.00%)  {
  .           	clish_command_t *cmd;
  .           	clish_view_t *view;
  .           	clish_nspace_t *nspace;
  .           	lub_bintree_t *view_tree, *cmd_tree;
  .           	lub_list_t *nspace_tree;
  .           	lub_bintree_iterator_t cmd_iter, view_iter;
  .           	lub_list_node_t *nspace_iter;
  .           	clish_hook_access_fn_t *access_fn = NULL;
  .           	clish_paramv_t *paramv;
  .           	int i = 0;
  .           
  .           	/* Add statically linked plugins */
  4 ( 0.00%)  	while (clish_plugin_builtin_list[i].name) {
  .           		clish_plugin_t *plugin;
  .           		plugin = clish_shell_find_create_plugin(this,
  .           			clish_plugin_builtin_list[i].name);
  .           		clish_plugin_add_init(plugin,
  .           			clish_plugin_builtin_list[i].init);
  .           		clish_plugin__set_builtin_flag(plugin, BOOL_TRUE);
  .           		i++;
  .           	}
  .           
  .           	/* Add default plugin to the list of plugins */
  5 ( 0.00%)  	if (this->default_plugin) {
  9 ( 0.00%)  		clish_shell_find_create_plugin(this, "clish");
3,187 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* Default hooks */
 11 ( 0.00%)  		for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 15 ( 0.00%)  			if (this->hooks_use[i])
  .           				continue;
 20 ( 0.00%)  			if (!clish_plugin_default_hook[i])
  .           				continue;
 18 ( 0.00%)  			clish_sym__set_name(this->hooks[i],
957 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
640 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_name (2x)
  .           				clish_plugin_default_hook[i]);
  .           		}
  .           	}
  .           	/* Add default syms to unresolved table */
 10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 25 ( 0.00%)  		if (clish_sym__get_name(this->hooks[i]))
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (5x)
 17 ( 0.00%)  			lub_list_add(this->syms, this->hooks[i]);
1,171 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (3x)
  .           	}
  .           
  .           	/* Load plugins and link symbols */
  9 ( 0.00%)  	if (clish_shell_load_plugins(this) < 0)
155,815 ( 3.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  9 ( 0.00%)  	if (clish_shell_link_plugins(this) < 0)
10,280 ( 0.20%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  .           
 12 ( 0.00%)  	access_fn = clish_sym__get_func(clish_shell_get_hook(this, CLISH_SYM_TYPE_ACCESS));
648 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (1x)
  .           
  .           	/* Iterate the VIEWs */
  .           	view_tree = &this->view_tree;
  9 ( 0.00%)  	view = lub_bintree_findfirst(view_tree);
1,054 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 23 ( 0.00%)  	for (lub_bintree_iterator_init(&view_iter, view_tree, view);
951 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 20 ( 0.00%)  		view; view = lub_bintree_iterator_next(&view_iter)) {
1,901 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (5x)
  .           		/* Check access rights for the VIEW */
 10 ( 0.00%)  		if (access_fn && clish_view__get_access(view) &&
  .           			access_fn(this, clish_view__get_access(view))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove VIEW \"%s\"\n",
  .           				clish_view__get_name(view));
  .           #endif
  .           			lub_bintree_remove(view_tree, view);
  .           			clish_view_delete(view);
  .           			continue;
  .           		}
  .           
  .           		/* Iterate the NAMESPACEs */
 24 ( 0.00%)  		nspace_tree = clish_view__get_nspace_tree(view);
703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_nspace_tree (4x)
 20 ( 0.00%)  		nspace_iter = lub_list__get_head(nspace_tree);
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
 10 ( 0.00%)  		while(nspace_iter) {
  .           			clish_view_t *ref_view;
  .           			lub_list_node_t *old_nspace_iter;
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(nspace_iter);
  .           			old_nspace_iter = nspace_iter;
  .           			nspace_iter = lub_list_node__get_next(nspace_iter);
  .           			/* Resolve NAMESPACEs and remove unresolved ones */
  .           			ref_view = clish_shell_find_view(this, clish_nspace__get_view_name(nspace));
  .           			if (!ref_view) {
-- line 235 ----------------------------------------
-- line 259 ----------------------------------------
  .           				lub_list_del(nspace_tree, old_nspace_iter);
  .           				lub_list_node_free(old_nspace_iter);
  .           				clish_nspace_delete(nspace);
  .           				continue;
  .           			}
  .           		}
  .           
  .           		/* Iterate the COMMANDs */
 24 ( 0.00%)  		cmd_tree = clish_view__get_command_tree(view);
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_command_tree (4x)
 20 ( 0.00%)  		cmd = lub_bintree_findfirst(cmd_tree);
441 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (5x)
 88 ( 0.00%)  		for (lub_bintree_iterator_init(&cmd_iter, cmd_tree, cmd);
204 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_init.c:lub_bintree_iterator_init (5x)
108 ( 0.00%)  			cmd; cmd = lub_bintree_iterator_next(&cmd_iter)) {
3,573 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
24,274 ( 0.48%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (25x)
108 ( 0.00%)  			int cmd_is_alias = clish_command__get_alias(cmd)?1:0;
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_alias (25x)
  .           			clish_param_t *args = NULL;
  .           
  .           			/* Check access rights for the COMMAND */
 52 ( 0.00%)  			if (access_fn && clish_command__get_access(cmd) &&
  .           				access_fn(this, clish_command__get_access(cmd))) {
  .           #ifdef DEBUG
  .           				fprintf(stderr, "Warning: Access denied. Remove COMMAND \"%s\" from VIEW \"%s\"\n",
  .           					clish_command__get_name(cmd), clish_view__get_name(view));
  .           #endif
  .           				lub_bintree_remove(cmd_tree, cmd);
  .           				clish_command_delete(cmd);
  .           				continue;
  .           			}
  .           
  .           			/* Resolve command aliases */
 52 ( 0.00%)  			if (cmd_is_alias) {
  .           				clish_view_t *aview;
  .           				clish_command_t *cmdref;
 26 ( 0.00%)  				const char *alias_view = clish_command__get_alias_view(cmd);
  .           				if (!alias_view)
  .           					aview = clish_command__get_pview(cmd);
  .           				else
  .           					aview = clish_shell_find_view(this, alias_view);
  .           				if (!aview /* Removed or broken VIEW */
  .           					||
  .           					/* Removed or broken referenced COMMAND */
  .           					!(cmdref = clish_view_find_command(aview, clish_command__get_alias(cmd), BOOL_FALSE))
-- line 298 ----------------------------------------
-- line 328 ----------------------------------------
  .           					lub_bintree_remove(cmd_tree, cmd);
  .           					clish_command_delete(cmd);
  .           					continue;
  .           				}
  .           			}
  .           			if (cmd_is_alias) /* Don't duplicate paramv processing for aliases */
  .           				continue;
  .           			/* Iterate PARAMeters */
 56 ( 0.00%)  			paramv = clish_command__get_paramv(cmd);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (25x)
156 ( 0.00%)  			if (iterate_paramv(this, paramv, access_fn) < 0)
16,132 ( 0.32%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv (26x)
  .           				return -1;
  .           			/* Resolve PTYPE for args */
134 ( 0.00%)  			if ((args = clish_command__get_args(cmd))) {
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (25x)
  5 ( 0.00%)  				if (!resolve_ptype(this, args))
608 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (1x)
  .           					return -1;
  .           			}
  .           		}
  .           	}
  .           
  2 ( 0.00%)  	return 0;
  8 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 5 ----------------------------------------
  .           #include <assert.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_shell_find_ptype(clish_shell_t *this,
  .           	const char *name)
  .           {
 75 ( 0.00%)  	return lub_bintree_find(&this->ptype_tree, name);
6,663 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_shell_find_create_ptype(clish_shell_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
169 ( 0.00%)  {
 43 ( 0.00%)  	clish_ptype_t *ptype = lub_bintree_find(&this->ptype_tree, name);
1,629 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,507 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (12x)
  .           
 39 ( 0.00%)  	if (!ptype) {
  .           		/* create a ptype */
108 ( 0.00%)  		ptype = clish_ptype_new(name, text, pattern,
1,928,532 (37.92%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new (12x)
150,975 ( 2.97%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			method, preprocess);
 26 ( 0.00%)  		assert(ptype);
 69 ( 0.00%)  		clish_shell_insert_ptype(this, ptype);
1,539 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,590 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_insert_ptype (12x)
  .           	} else {
  .           		if (pattern) {
  .           			/* set the pattern */
  .           			clish_ptype__set_pattern(ptype, pattern, method);
  .           			/* set the preprocess */
  .           			clish_ptype__set_preprocess(ptype, preprocess);
  .           		}
  .           		/* set the help text */
  .           		if (text)
  .           			clish_ptype__set_text(ptype, text);
  .           	}
  .           
  .           	return ptype;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_shell_insert_ptype(clish_shell_t * this, clish_ptype_t * ptype)
  .           {
 43 ( 0.00%)  	(void)lub_bintree_insert(&this->ptype_tree, ptype);
2,554 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (12x)
855 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c
--------------------------------------------------------------------------------
Ir           

-- line 23 ----------------------------------------
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_compare(const void *first, const void *second)
  .           {
  .           	const clish_sym_t *f = (const clish_sym_t *)first;
  .           	const clish_sym_t *s = (const clish_sym_t *)second;
  .           
180 ( 0.00%)  	return strcmp(f->name, s->name);
1,194 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (45x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_sym_new(const char *name, void *func, int type)
168 ( 0.00%)  {
  .           	clish_sym_t *this;
  .           
 84 ( 0.00%)  	this = malloc(sizeof(*this));
4,434 ( 0.09%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (21x)
 88 ( 0.00%)  	this->name = lub_string_dup(name);
3,642 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (20x)
782 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 21 ( 0.00%)  	this->func = func;
 21 ( 0.00%)  	this->type = type;
 21 ( 0.00%)  	this->api = CLISH_SYM_API_SIMPLE;
 21 ( 0.00%)  	this->permanent = BOOL_FALSE;
  .           
  .           	return this;
147 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym_free(clish_sym_t *this)
  .           {
  .           	if (!this)
  .           		return;
  .           	lub_string_free(this->name);
  .           	free(this);
-- line 55 ----------------------------------------
-- line 59 ----------------------------------------
  .           void clish_sym__set_func(clish_sym_t *this, void *func)
  .           {
  .           	this->func = func;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void *clish_sym__get_func(clish_sym_t *this)
  .           {
  8 ( 0.00%)  	return this->func;
  8 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_permanent(clish_sym_t *this, bool_t permanent)
  .           {
 26 ( 0.00%)  	this->permanent = permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_sym__get_permanent(clish_sym_t *this)
  .           {
  .           	return this->permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_name(clish_sym_t *this, const char *name)
 15 ( 0.00%)  {
  9 ( 0.00%)  	lub_string_free(this->name);
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 12 ( 0.00%)  	this->name = lub_string_dup(name);
885 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 12 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_sym__get_name(clish_sym_t *this)
  .           {
 46 ( 0.00%)  	return this->name;
 46 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_plugin(clish_sym_t *this, clish_plugin_t *plugin)
  .           {
 26 ( 0.00%)  	this->plugin = plugin;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_sym__get_plugin(clish_sym_t *this)
  .           {
  .           	return this->plugin;
  .           }
  .           
-- line 106 ----------------------------------------
-- line 108 ----------------------------------------
  .           void clish_sym__set_type(clish_sym_t *this, int type)
  .           {
  .           	this->type = type;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym__get_type(const clish_sym_t *this)
  .           {
 13 ( 0.00%)  	return this->type;
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_api(clish_sym_t *this, clish_sym_api_e api)
  .           {
  2 ( 0.00%)  	this->api = api;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_api_e clish_sym__get_api(const clish_sym_t *this)
  .           {
  2 ( 0.00%)  	return this->api;
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_clone(clish_sym_t *dst, clish_sym_t *src)
  .           {
  .           	char *name;
  .           
 24 ( 0.00%)  	if (!dst || !src)
  .           		return -1;
  6 ( 0.00%)  	name = dst->name;
 60 ( 0.00%)  	*dst = *src;
  6 ( 0.00%)  	dst->name = name;
  .           
 12 ( 0.00%)  	return 0;
  .           }
  .           
  .           /**********************************************************
  .            * PLUGIN functions                                       *
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_plugin_new(const char *name)
  4 ( 0.00%)  {
  .           	clish_plugin_t *this;
  .           
  4 ( 0.00%)  	this = malloc(sizeof(*this));
344 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           
  4 ( 0.00%)  	this->name = lub_string_dup(name);
279 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  1 ( 0.00%)  	this->conf = NULL;
  1 ( 0.00%)  	this->alias = NULL;
  1 ( 0.00%)  	this->file = NULL;
  1 ( 0.00%)  	this->builtin_flag = BOOL_FALSE; /* The plugin is shared object by default */
  1 ( 0.00%)  	this->dlhan = NULL;
  .           	/* Initialise the list of symbols */
  4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
175 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
  .           	/* Constructor and destructor */
  1 ( 0.00%)  	this->init = NULL;
  1 ( 0.00%)  	this->fini = NULL;
  .           	/* Flags */
  1 ( 0.00%)  	this->rtld_global = BOOL_FALSE; /* The dlopen() use RTLD_LOCAL by default */
  .           
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_free(clish_plugin_t *this, void *userdata)
  .           {
  .           	lub_list_node_t *iter;
  .           
  .           	if (!this)
  .           		return;
-- line 179 ----------------------------------------
-- line 201 ----------------------------------------
  .           		dlclose(this->dlhan);
  .           #endif
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_generic(clish_plugin_t *this,
  .           	void *func, const char *name, int type, bool_t permanent)
 39 ( 0.00%)  {
  .           	clish_sym_t *sym;
  .           
 91 ( 0.00%)  	if (!name || !func)
  .           		return NULL;
  .           
 91 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
6,299 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (13x)
  .           		return NULL;
 56 ( 0.00%)  	clish_sym__set_plugin(sym, this);
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_plugin (12x)
 56 ( 0.00%)  	clish_sym__set_permanent(sym, permanent);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_permanent (12x)
 52 ( 0.00%)  	lub_list_add(this->syms, sym);
4,444 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (13x)
  .           
  .           	return sym;
 65 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_sym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
  .           	return clish_plugin_add_generic(this, func,
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_psym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
 36 ( 0.00%)  	return clish_plugin_add_generic(this, func,
7,967 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (9x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_osym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  1 ( 0.00%)  {
  .           	clish_sym_t *s;
  .           
  7 ( 0.00%)  	if (!(s = clish_plugin_add_generic(this, func,
989 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (1x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE)))
  .           		return s;
  8 ( 0.00%)  	clish_sym__set_api(s, CLISH_SYM_API_STDOUT);
631 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return s;
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_posym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  .           {
  .           	clish_sym_t *s;
  .           
-- line 261 ----------------------------------------
-- line 274 ----------------------------------------
  .           	return clish_plugin_add_generic(this, func,
  .           		name, type, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_phook(clish_plugin_t *this,
  .           	void *func, const char *name, int type)
  .           {
 13 ( 0.00%)  	return clish_plugin_add_generic(this, func,
2,633 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,671 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (2x)
  .           		name, type, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_add_fini(clish_plugin_t *this,
  .           	clish_plugin_fini_t *fini)
  .           {
  .           	this->fini = fini;
-- line 290 ----------------------------------------
-- line 306 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           clish_plugin_init_t * clish_plugin_get_init(clish_plugin_t *this)
  .           {
  .           	return this->init;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_get_sym(clish_plugin_t *this, const char *name, int type)
 42 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           	clish_sym_t *sym;
  .           
  .           	/* Iterate elements */
 86 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (6x)
100 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (25x)
  .           		int res;
124 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (31x)
217 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
891 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (31x)
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (31x)
104 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
  .           			return sym;
 25 ( 0.00%)  		if (res > 0) /* No chances to find name */
  .           			break;
  .           	}
  .           
  .           	return NULL;
 42 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static int clish_plugin_load_shared(clish_plugin_t *this)
  .           {
  .           #ifdef HAVE_DLFCN_H
  1 ( 0.00%)  	char *file = NULL; /* Plugin so file name */
  1 ( 0.00%)  	char *init_name = NULL; /* Init function name */
  .           	int flag = RTLD_NOW;
  .           
  3 ( 0.00%)  	if (this->file) {
  .           		file = lub_string_dup(this->file);
  .           	} else {
  4 ( 0.00%)  		lub_string_cat(&file, "clish_plugin_");
343 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  		lub_string_cat(&file, this->name);
264 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  5 ( 0.00%)  		lub_string_cat(&file, ".so");
272 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  .           	}
  .           
  .           	/* Open dynamic library */
  7 ( 0.00%)  	if (clish_plugin__get_rtld_global(this))
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  		flag |= RTLD_GLOBAL;
  .           	else
  .           		flag |= RTLD_LOCAL;
  8 ( 0.00%)  	this->dlhan = dlopen(file, flag);
133,732 ( 2.63%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(file);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  2 ( 0.00%)  	if (!this->dlhan) {
  .           		fprintf(stderr, "Error: Can't open plugin \"%s\": %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	/* Get plugin init function */
  5 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_PREFIX);
286 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, this->name);
264 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_SUFFIX);
282 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  9 ( 0.00%)  	this->init = (clish_plugin_init_t *)dlsym(this->dlhan, init_name);
4,005 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(init_name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	if (!this->init) {
  .           		fprintf(stderr, "Error: Can't get plugin \"%s\" init function: %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	return 0;
  .           #else /* HAVE_DLFCN_H */
  .           	/* We have no any dl functions. */
-- line 376 ----------------------------------------
-- line 377 ----------------------------------------
  .           	fprintf(stderr, "Error: Can't get plugin \"%s\" init function.\n",
  .           		this->name);
  .           	return -1;
  .           #endif /* HAVE_DLFCN_H */
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_plugin_load(clish_plugin_t *this, void *userdata)
  4 ( 0.00%)  {
  .           	int res;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return -1;
  5 ( 0.00%)  	assert(this->name);
  .           
  .           	/* Builtin plugins already have init function. */
  3 ( 0.00%)  	if (!this->builtin_flag) {
  .           		if (clish_plugin_load_shared(this) < 0)
  .           			return -1;
  .           	}
  .           	if (!this->init) {
  .           		fprintf(stderr, "Error: PLUGIN %s has no init function\n",
  .           			this->name);
  .           		return -1;
  .           	}
  .           	/* Execute init function */
  6 ( 0.00%)  	if ((res = this->init(userdata, this)))
14,032 ( 0.28%)  => /home/ykuznetsov/klish-2.1.3/plugins/clish/builtin_init.c:clish_plugin_clish_init (1x)
  .           		fprintf(stderr, "Error: Plugin %s init retcode: %d\n",
  .           			this->name, res);
  .           
  .           	return res;
  6 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_name(const clish_plugin_t *this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 416 ----------------------------------------
-- line 424 ----------------------------------------
  .           char *clish_plugin__get_alias(const clish_plugin_t *this)
  .           {
  .           	return this->alias;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_pubname(const clish_plugin_t *this)
  .           {
 12 ( 0.00%)  	return (this->alias ? this->alias : this->name);
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin__set_file(clish_plugin_t *this, const char *file)
  .           {
  .           	lub_string_free(this->file);
  .           	this->file = lub_string_dup(file);
  .           }
  .           
-- line 441 ----------------------------------------
-- line 474 ----------------------------------------
  .           void clish_plugin__set_rtld_global(clish_plugin_t *this, bool_t rtld_global)
  .           {
  .           	this->rtld_global = rtld_global;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_plugin__get_rtld_global(const clish_plugin_t *this)
  .           {
  1 ( 0.00%)  	return this->rtld_global;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c
--------------------------------------------------------------------------------
Ir             

-- line 73 ----------------------------------------
    .            */
    .           const char *default_path = "/etc/clish;~/.clish";
    .           
    .           static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent);
    .           
    .           /*-------------------------------------------------------- */
    .           int clish_shell_load_scheme(clish_shell_t *this, const char *xml_path, const char *xslt_path)
    8 ( 0.00%)  {
    .           	const char *path = xml_path;
    .           	char *buffer;
    .           	char *dirname;
    .           	char *saveptr = NULL;
    .           	int res = -1;
    .           	clish_xmldoc_t *doc = NULL;
    .           	DIR *dir;
    .           
-- line 89 ----------------------------------------
-- line 99 ----------------------------------------
    .           			return -1;
    .           		}
    .           	}
    .           #else
    .           	xslt_path = xslt_path; /* Happy compiler */
    .           #endif
    .           
    .           	/* Use the default path */
    2 ( 0.00%)  	if (!path)
    .           		path = default_path;
    9 ( 0.00%)  	buffer = lub_system_tilde_expand(path);
5,312 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Loop though each directory */
    .           	for (dirname = strtok_r(buffer, ";", &saveptr);
    .           		dirname; dirname = strtok_r(NULL, ";", &saveptr)) {
    .           		struct dirent *entry;
    .           
    .           		/* Search this directory for any XML files */
    8 ( 0.00%)  		dir = opendir(dirname);
2,024 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    3 ( 0.00%)  		if (NULL == dir) {
    .           #ifdef DEBUG
    .           			tinyrl_printf(this->tinyrl,
    .           				"*** Failed to open '%s' directory\n",
    .           				dirname);
    .           #endif
    .           			continue;
    .           		}
   79 ( 0.00%)  		for (entry = readdir(dir); entry; entry = readdir(dir)) {
2,157 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  573 ( 0.01%)  => /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c:readdir (14x)
   88 ( 0.00%)  			const char *extension = strrchr(entry->d_name, '.');
1,506 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  401 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strrchr.S:rindex (13x)
   14 ( 0.00%)  			char *filename = NULL;
    .           			clish_xmlnode_t *root;
    .           			int r;
    .           
    .           			/* Check the filename */
  134 ( 0.00%)  			if (!extension || strcmp(".xml", extension))
    .           				continue;
    .           
    .           			/* Build the filename */
   41 ( 0.00%)  			lub_string_cat(&filename, dirname);
3,779 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, "/");
2,620 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, entry->d_name);
4,032 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
    .           
    .           #ifdef DEBUG
    .           			fprintf(stderr, "Parse XML-file: %s\n", filename);
    .           #endif
    .           			/* Load current XML file */
   44 ( 0.00%)  			doc = clish_xmldoc_read(filename);
1,452,782 (28.56%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read (9x)
134,640 ( 2.65%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  			if (!clish_xmldoc_is_valid(doc)) {
  659 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (9x)
   10 ( 0.00%)  				int errcaps = clish_xmldoc_error_caps(doc);
    .           				printf("Unable to open file '%s'", filename);
    .           				if ((errcaps & CLISH_XMLERR_LINE) == CLISH_XMLERR_LINE)
    .           					printf(", at line %d", clish_xmldoc_get_err_line(doc));
    .           				if ((errcaps & CLISH_XMLERR_COL) == CLISH_XMLERR_COL)
    .           					printf(", at column %d", clish_xmldoc_get_err_col(doc));
    .           				if ((errcaps & CLISH_XMLERR_DESC) == CLISH_XMLERR_DESC)
    .           					printf(", message is %s", clish_xmldoc_get_err_msg(doc));
    .           				printf("\n");
-- line 155 ----------------------------------------
-- line 171 ----------------------------------------
    .           				}
    .           				clish_xmldoc_release(doc);
    .           				doc = tmp;
    .           			}
    .           
    .           			if (!xslt_path && clish_xslt_is_valid(xslt))
    .           				clish_xslt_release(xslt);
    .           #endif
   24 ( 0.00%)  			root = clish_xmldoc_get_root(doc);
  673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_get_root (9x)
    .           			r = process_node(this, root, NULL);
   44 ( 0.00%)  			clish_xmldoc_release(doc);
179,041 ( 3.52%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release (9x)
14,628 ( 0.29%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           			/* Error message */
   30 ( 0.00%)  			if (r) {
    .           				fprintf(stderr, CLISH_XML_ERROR_STR"File %s\n",
    .           					filename);
    .           				lub_string_free(filename);
    .           				goto error;
    .           			}
   34 ( 0.00%)  			lub_string_free(filename);
2,402 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  810 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
    .           		}
    7 ( 0.00%)  		closedir(dir);
1,641 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           /* To don't free memory twice on cleanup */
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (!xslt_path)
    .           		xslt = NULL;
    .           #endif
    1 ( 0.00%)  	doc = NULL;
    .           	dir = NULL;
    1 ( 0.00%)  	res = 0; /* Success */
    .           error:
    3 ( 0.00%)  	lub_string_free(buffer);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    .           	if (dir)
    .           		closedir(dir);
    5 ( 0.00%)  	if (clish_xmldoc_is_valid(doc))
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (1x)
    .           		clish_xmldoc_release(doc);
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (clish_xslt_is_valid(xslt))
    .           		clish_xslt_release(xslt);
    .           #endif
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /*
    .            * ------------------------------------------------------
    .            * This function reads an element from the XML stream and processes it.
    .            * ------------------------------------------------------
    .            */
  980 ( 0.02%)  static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent)
    .           {
   98 ( 0.00%)  	int res = 0;
    .           
2,511 ( 0.05%)  	switch (clish_xmlnode_get_type(node)) {
2,340,397 (46.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 (30x)
  870 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type (174x)
    .           	case CLISH_XMLNODE_ELM: {
    .           			clish_xml_cb_t * cb;
    .           			char name[128];
   98 ( 0.00%)  			unsigned int namelen = sizeof(name);
  788 ( 0.02%)  			if (clish_xmlnode_get_name(node, name, &namelen) == 0) {
5,400 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (9x)
2,754 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,990 ( 0.04%)  				for (cb = &xml_elements[0]; cb->element; cb++) {
2,369 ( 0.05%)  					if (0 == strcmp(name, cb->element)) {
1,476 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  189 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (9x)
    .           #ifdef DEBUG
    .           						fprintf(stderr, "NODE:");
    .           						clish_xmlnode_print(node, stderr);
    .           						fprintf(stderr, "\n");
    .           #endif
    .           						/* process the elements at this level */
  490 ( 0.01%)  						res = cb->handler(shell, node, parent);
2,350,698 (46.22%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module (10x)
    .           
    .           						/* Error message */
  294 ( 0.01%)  						if (res) {
    .           							char *ename = clish_xmlnode_fetch_attr(node, "name");
    .           							char *eref = clish_xmlnode_fetch_attr(node, "ref");
    .           							char *ekey = clish_xmlnode_fetch_attr(node, "key");
    .           							char *efile = clish_xmlnode_fetch_attr(node, "file");
    .           							fprintf(stderr, CLISH_XML_ERROR_STR"Node %s", name);
    .           							if (ename)
    .           								fprintf(stderr, ", name=\"%s\"", ename);
    .           							if (eref)
-- line 252 ----------------------------------------
-- line 274 ----------------------------------------
    .           	case CLISH_XMLNODE_COMMENT:
    .           	case CLISH_XMLNODE_DECL:
    .           	case CLISH_XMLNODE_UNKNOWN:
    .           	default:
    .           		break;
    .           	}
    .           
    .           	return res;
  882 ( 0.02%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_children(clish_shell_t *shell,
    .           	clish_xmlnode_t *element, void *parent)
  549 ( 0.01%)  {
   61 ( 0.00%)  	clish_xmlnode_t *node = NULL;
    .           	int res;
    .           
3,350 ( 0.07%)  	while ((node = clish_xmlnode_next_child(element, node)) != NULL) {
  799 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  750 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child (183x)
    .           		/* Now deal with all the contained elements */
    .           		res = process_node(shell, node, parent);
  176 ( 0.00%)  		if (res)
    .           			return res;
    .           	}
    .           
   61 ( 0.00%)  	return 0;
  366 ( 0.01%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_clish_module(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   50 ( 0.00%)  {
    .           	/* Create the global view */
   30 ( 0.00%)  	if (!shell->global)
   11 ( 0.00%)  		shell->global = clish_shell_find_create_view(shell,
5,219 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			"__view_global", "");
    .           
    .           	parent = parent; /* Happy compiler */
    .           
   30 ( 0.00%)  	return process_children(shell, element, shell->global);
2,345,328 (46.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children (10x)
   30 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_view(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   45 ( 0.00%)  {
    .           	clish_view_t *view;
    .           	int res = -1;
    .           
   29 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  164 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (4x)
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  	char *prompt = clish_xmlnode_fetch_attr(element, "prompt");
  328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *depth = clish_xmlnode_fetch_attr(element, "depth");
  322 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *restore = clish_xmlnode_fetch_attr(element, "restore");
  340 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
  328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
    .           
    .           	/* Check syntax */
   10 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
    .           
    .           	/* re-use a view if it already exists */
   30 ( 0.00%)  	view = clish_shell_find_create_view(shell, name, prompt);
6,493 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell_find_create_view (5x)
    .           
   10 ( 0.00%)  	if (depth && (lub_ctype_isdigit(*depth))) {
    .           		unsigned int res = 0;
    .           		lub_conv_atoui(depth, &res, 0);
    .           		clish_view__set_depth(view, res);
    .           	}
    .           
   10 ( 0.00%)  	if (restore) {
    .           		if (!lub_string_nocasecmp(restore, "depth"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_DEPTH);
    .           		else if (!lub_string_nocasecmp(restore, "view"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_VIEW);
    .           		else
    .           			clish_view__set_restore(view, CLISH_RESTORE_NONE);
    .           	}
    .           
   10 ( 0.00%)  	if (access)
    .           		clish_view__set_access(view, access);
    .           
    .           //process_view_end:
   25 ( 0.00%)  	res = process_children(shell, element, view);
293,378 ( 5.77%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (5x)
    .           error:
   15 ( 0.00%)  	clish_xml_release(name);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(prompt);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(depth);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(restore);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(access);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   45 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_ptype(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   99 ( 0.00%)  {
    .           	clish_ptype_method_e method;
    .           	clish_ptype_preprocess_e preprocess;
    .           	int res = -1;
    .           
   55 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  480 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,285 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *pattern = clish_xmlnode_fetch_attr(element, "pattern");
  955 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *method_name = clish_xmlnode_fetch_attr(element, "method");
  892 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *preprocess_name =	clish_xmlnode_fetch_attr(element, "preprocess");
1,318 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
    .           
    .           	/* Check syntax */
   22 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   22 ( 0.00%)  	if (!pattern) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("pattern"));
    .           		goto error;
    .           	}
    .           
   48 ( 0.00%)  	method = clish_ptype_method_resolve(method_name);
  705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  616 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_method_resolve (10x)
    .           
   48 ( 0.00%)  	preprocess = clish_ptype_preprocess_resolve(preprocess_name);
  737 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_preprocess_resolve (10x)
   77 ( 0.00%)  	clish_shell_find_create_ptype(shell,
1,796,814 (35.33%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (11x)
    .           		name, help, pattern, method, preprocess);
    .           
   11 ( 0.00%)  	res = 0;
    .           error:
   33 ( 0.00%)  	clish_xml_release(name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(help);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(pattern);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(method_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(preprocess_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   99 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_overview(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    8 ( 0.00%)  {
    1 ( 0.00%)  	char *content = NULL;
    2 ( 0.00%)  	unsigned int content_len = 2048;
    .           	int result;
    .           
    .           	/*
    .           	 * the code below faithfully assume that we'll be able fully store
    .           	 * the content of the node. If it's really, really big, we may have
    .           	 * an issue (but then, if it's that big, how the hell does it
    .           	 * already fits in allocated memory?)
    .           	 * Ergo, it -should- be safe.
    .           	 */
    .           	do {
    4 ( 0.00%)  		char *new = (char*)realloc(content, content_len);
1,863 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (1x)
    2 ( 0.00%)  		if (!new) {
    .           			if (content)
    .           				free(content);
    .           			return -1;
    .           		}
    .           		content = new;
    7 ( 0.00%)  		result = clish_xmlnode_get_content(element, content,
19,272 ( 0.38%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (1x)
    .           			&content_len);
    2 ( 0.00%)  	} while (result == -E2BIG);
    .           
    2 ( 0.00%)  	if (result == 0 && content) {
    .           		/* set the overview text for this view */
    2 ( 0.00%)  		assert(NULL == shell->overview);
    .           		/* store the overview */
    4 ( 0.00%)  		shell->overview = lub_string_dup(content);
  968 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    .           	}
    .           
    .           	if (content)
    3 ( 0.00%)  		free(content);
  148 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    1 ( 0.00%)  	return 0;
    7 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_command(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  260 ( 0.01%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	clish_command_t *old;
    .           	int res = -1;
    .           
  130 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,167 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
1,066 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,876 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
2,167 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
2,319 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *escape_chars = clish_xmlnode_fetch_attr(element, "escape_chars");
2,119 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_name = clish_xmlnode_fetch_attr(element, "args");
1,989 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_help = clish_xmlnode_fetch_attr(element, "args_help");
2,371 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
2,290 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
2,374 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *ref = clish_xmlnode_fetch_attr(element, "ref");
2,296 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
    .           
    .           	/* Check syntax */
   52 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   52 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
    .           
    .           	/* check this command doesn't already exist */
  134 ( 0.00%)  	old = clish_view_find_command(v, name, BOOL_FALSE);
  723 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,202 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (25x)
   52 ( 0.00%)  	if (old) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"Duplicate COMMAND name=\"%s\".\n", name);
    .           		goto error;
    .           	}
    .           
    .           	/* create a command */
  160 ( 0.00%)  	cmd = clish_view_new_command(v, name, help);
43,626 ( 0.86%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (25x)
4,334 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  108 ( 0.00%)  	clish_command__set_pview(cmd, v);
  679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_pview (25x)
    .           
    .           	/* Reference 'ref' field */
   78 ( 0.00%)  	if (ref) {
    .           		char *saveptr = NULL;
    .           		const char *delim = "@";
    .           		char *view_name = NULL;
    .           		char *cmdn = NULL;
    .           		char *str = lub_string_dup(ref);
    .           
    .           		cmdn = strtok_r(str, delim, &saveptr);
    .           		if (!cmdn) {
-- line 505 ----------------------------------------
-- line 509 ----------------------------------------
    .           		}
    .           		clish_command__set_alias(cmd, cmdn); /* alias name */
    .           		view_name = strtok_r(NULL, delim, &saveptr);
    .           		clish_command__set_alias_view(cmd, view_name);
    .           		lub_string_free(str);
    .           	}
    .           
    .           	/* define some specialist escape characters */
   78 ( 0.00%)  	if (escape_chars)
    8 ( 0.00%)  		clish_command__set_escape_chars(cmd, escape_chars);
  923 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   52 ( 0.00%)  	if (args_name) {
    .           		/* define a "rest of line" argument */
    .           		clish_param_t *param;
    .           
    .           		/* Check syntax */
    2 ( 0.00%)  		if (!args_help) {
    .           			fprintf(stderr, CLISH_XML_ERROR_ATTR("args_help"));
    .           			goto error;
    .           		}
    5 ( 0.00%)  		param = clish_param_new(args_name, args_help, "__ptype_ARGS");
  751 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (1x)
    8 ( 0.00%)  		clish_command__set_args(cmd, param);
  689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* define the view which this command changes to */
   78 ( 0.00%)  	if (view) {
    .           		/* reference the next view */
   36 ( 0.00%)  		clish_command__set_viewname(cmd, view);
1,802 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,635 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (7x)
    .           	}
    .           
    .           	/* define the view id which this command changes to */
   78 ( 0.00%)  	if (viewid)
   16 ( 0.00%)  		clish_command__set_viewid(cmd, viewid);
1,829 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  463 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewid (2x)
    .           
    .           	/* lock field */
   78 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
  108 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
  725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (25x)
    .           
    .           	/* interrupt field */
   78 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
  108 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
  719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (25x)
    .           
   78 ( 0.00%)  	if (access)
    8 ( 0.00%)  		clish_command__set_access(cmd, access);
  872 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           //process_command_end:
  130 ( 0.00%)  	res = process_children(shell, element, cmd);
365,639 ( 7.19%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (26x)
    .           error:
   78 ( 0.00%)  	clish_xml_release(access);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(view);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(viewid);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(escape_chars);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(lock);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(interrupt);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(ref);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
    .           
    .           	return res;
  234 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_startup(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   10 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	int res = -1;
    .           
    5 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
   70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
   73 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_shebang =
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		clish_xmlnode_fetch_attr(element, "default_shebang");
    5 ( 0.00%)  	char *timeout = clish_xmlnode_fetch_attr(element, "timeout");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_plugin = clish_xmlnode_fetch_attr(element,
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		"default_plugin");
    .           
    .           	/* Check syntax */
    2 ( 0.00%)  	if (!view) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("view"));
    .           		goto error;
    .           	}
    2 ( 0.00%)  	if (shell->startup) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP tag duplication.\n");
    .           		goto error;
    .           	}
    .           
    .           	/* create a command with NULL help */
    6 ( 0.00%)  	cmd = clish_view_new_command(v, "startup", NULL);
1,043 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (1x)
    4 ( 0.00%)  	clish_command__set_lock(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* reference the next view */
    4 ( 0.00%)  	clish_command__set_viewname(cmd, view);
  246 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (1x)
    .           
    .           	/* define the view id which this command changes to */
    3 ( 0.00%)  	if (viewid)
    .           		clish_command__set_viewid(cmd, viewid);
    .           
    3 ( 0.00%)  	if (default_shebang)
    .           		clish_shell__set_default_shebang(shell, default_shebang);
    .           
    3 ( 0.00%)  	if (timeout) {
    .           		unsigned int to = 0;
    .           		lub_conv_atoui(timeout, &to, 0);
    .           		clish_shell__set_timeout(shell, to);
    .           	}
    .           
    .           	/* lock field */
    2 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
    4 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* interrupt field */
    2 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
    4 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (1x)
    .           
    .           	/* If we need the default plugin */
    3 ( 0.00%)  	if (default_plugin && (0 == strcmp(default_plugin, "false")))
    .           		shell->default_plugin = BOOL_FALSE;
    .           
    .           	/* remember this command */
    1 ( 0.00%)  	shell->startup = cmd;
    .           
    5 ( 0.00%)  	res = process_children(shell, element, cmd);
6,101 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (1x)
    .           error:
    3 ( 0.00%)  	clish_xml_release(view);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(viewid);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(default_shebang);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(timeout);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(lock);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(interrupt);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_param(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  190 ( 0.00%)  {
    .           	clish_command_t *cmd = NULL;
   38 ( 0.00%)  	clish_param_t *p_param = NULL;
    .           	clish_xmlnode_t *pelement;
    .           	clish_param_t *param;
    .           	char *pname;
    .           	int res = -1;
    .           
  114 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  808 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,378 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *ptype = clish_xmlnode_fetch_attr(element, "ptype");
2,095 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *prefix = clish_xmlnode_fetch_attr(element, "prefix");
2,203 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *defval = clish_xmlnode_fetch_attr(element, "default");
2,237 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *mode = clish_xmlnode_fetch_attr(element, "mode");
1,874 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *optional = clish_xmlnode_fetch_attr(element, "optional");
1,874 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *order = clish_xmlnode_fetch_attr(element, "order");
1,874 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *value = clish_xmlnode_fetch_attr(element, "value");
2,252 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *hidden = clish_xmlnode_fetch_attr(element, "hidden");
2,045 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *test = clish_xmlnode_fetch_attr(element, "test");
2,252 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *completion = clish_xmlnode_fetch_attr(element, "completion");
2,270 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,186 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
    .           
    .           	/* The PARAM can be child of COMMAND or another PARAM */
   76 ( 0.00%)  	pelement = clish_xmlnode_parent(element);
   76 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (19x)
    .           	pname = clish_xmlnode_get_all_name(pelement);
  190 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "PARAM") == 0)
  969 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (19x)
    .           		p_param = (clish_param_t *)parent;
    .           	else
    .           		cmd = (clish_command_t *)parent;
    .           	if (pname)
   95 ( 0.00%)  		free(pname);
2,369 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (19x)
   38 ( 0.00%)  	if (!cmd && !p_param)
    .           		goto error;
    .           
    .           	/* Check syntax */
   95 ( 0.00%)  	if (cmd && (cmd == shell->startup)) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP can't contain PARAMs.\n");
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!ptype) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("ptype"));
    .           		goto error;
    .           	}
    .           
  118 ( 0.00%)  	param = clish_param_new(name, help, ptype);
21,637 ( 0.43%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (18x)
2,140 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* If prefix is set clish will emulate old optional
    .           	 * command syntax over newer optional command mechanism.
    .           	 * It will create nested PARAM.
    .           	 */
   38 ( 0.00%)  	if (prefix) {
    .           		const char *ptype_name = "__ptype_SUBCOMMAND";
    .           		clish_param_t *opt_param = NULL;
    5 ( 0.00%)  		char *str = NULL;
    .           		clish_ptype_t *tmp;
    .           
    .           		/* Create a ptype for prefix-named subcommand that
    .           		 * will contain the nested optional parameter. The
    .           		 * name of ptype is hardcoded. It's not good but
    .           		 * it's only the service ptype.
    .           		 */
   25 ( 0.00%)  		tmp = (clish_ptype_t *)lub_bintree_find(
2,321 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (5x)
    .           			&shell->ptype_tree, ptype_name);
   10 ( 0.00%)  		if (!tmp)
    8 ( 0.00%)  			tmp = clish_shell_find_create_ptype(shell,
137,331 ( 2.70%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (1x)
    .           				ptype_name, "Option", "[^\\\\]+",
    .           				CLISH_PTYPE_REGEXP, CLISH_PTYPE_NONE);
    2 ( 0.00%)  		assert(tmp);
   20 ( 0.00%)  		lub_string_cat(&str, "_prefix_");
1,905 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   20 ( 0.00%)  		lub_string_cat(&str, name);
1,320 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   30 ( 0.00%)  		opt_param = clish_param_new(str, help, ptype_name);
6,029 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (5x)
   15 ( 0.00%)  		lub_string_free(str);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   24 ( 0.00%)  		clish_param__set_mode(opt_param,
  657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_mode (4x)
    .           			CLISH_PARAM_SUBCOMMAND);
   24 ( 0.00%)  		clish_param__set_value(opt_param, prefix);
  826 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  796 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_value (4x)
   20 ( 0.00%)  		clish_param__set_optional(opt_param, BOOL_TRUE);
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (5x)
    .           
   15 ( 0.00%)  		if (test)
    .           			clish_param__set_test(opt_param, test);
    .           
    .           		/* Add the parameter to the command */
   10 ( 0.00%)  		if (cmd)
   20 ( 0.00%)  			clish_command_insert_param(cmd, opt_param);
  910 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (5x)
    .           		/* Add the parameter to the param */
   15 ( 0.00%)  		if (p_param)
    .           			clish_param_insert_param(p_param, opt_param);
    .           		/* Unset cmd and set parent param to opt_param */
    5 ( 0.00%)  		cmd = NULL;
    .           		p_param = opt_param;
    .           	}
    .           
   57 ( 0.00%)  	if (defval)
   24 ( 0.00%)  		clish_param__set_default(param, defval);
  918 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  966 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_default (4x)
    .           
   57 ( 0.00%)  	if (hidden && lub_string_nocasecmp(hidden, "true") == 0)
    .           		clish_param__set_hidden(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_hidden(param, BOOL_FALSE);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_hidden (18x)
    .           
   57 ( 0.00%)  	if (mode) {
    .           		if (lub_string_nocasecmp(mode, "switch") == 0) {
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_SWITCH);
    .           			/* Force hidden attribute */
    .           			clish_param__set_hidden(param, BOOL_TRUE);
    .           		} else if (lub_string_nocasecmp(mode, "subcommand") == 0)
   28 ( 0.00%)  			clish_param__set_mode(param,
    .           				CLISH_PARAM_SUBCOMMAND);
    .           		else
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_COMMON);
    .           	}
    .           
   57 ( 0.00%)  	if (optional && lub_string_nocasecmp(optional, "true") == 0)
    .           		clish_param__set_optional(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_optional(param, BOOL_FALSE);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (18x)
    .           
   57 ( 0.00%)  	if (order && lub_string_nocasecmp(order, "true") == 0)
    .           		clish_param__set_order(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_order(param, BOOL_FALSE);
  663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_order (18x)
    .           
   57 ( 0.00%)  	if (value) {
    .           		clish_param__set_value(param, value);
    .           		/* Force mode to subcommand */
    .           		clish_param__set_mode(param,
    .           			CLISH_PARAM_SUBCOMMAND);
    .           	}
    .           
   57 ( 0.00%)  	if (test && !prefix)
    .           		clish_param__set_test(param, test);
    .           
   57 ( 0.00%)  	if (completion)
    .           		clish_param__set_completion(param, completion);
    .           
   57 ( 0.00%)  	if (access)
    .           		clish_param__set_access(param, access);
    .           
    .           	/* Add the parameter to the command */
   38 ( 0.00%)  	if (cmd)
   60 ( 0.00%)  		clish_command_insert_param(cmd, param);
1,565 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,570 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (13x)
    .           
    .           	/* Add the parameter to the param */
   38 ( 0.00%)  	if (p_param)
   24 ( 0.00%)  		clish_param_insert_param(p_param, param);
  914 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  959 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_insert_param (4x)
    .           
   95 ( 0.00%)  	res = process_children(shell, element, param);
  570 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (19x)
    .           
    .           error:
   57 ( 0.00%)  	clish_xml_release(name);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(help);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(ptype);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(prefix);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(defval);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(mode);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(optional);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(order);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(value);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(hidden);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(test);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(completion);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(access);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
    .           
    .           	return res;
  171 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_action(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  210 ( 0.00%)  {
    .           	clish_action_t *action = NULL;
  126 ( 0.00%)  	char *builtin = clish_xmlnode_fetch_attr(element, "builtin");
  587 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
  105 ( 0.00%)  	char *shebang = clish_xmlnode_fetch_attr(element, "shebang");
  431 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
   88 ( 0.00%)  	clish_xmlnode_t *pelement = clish_xmlnode_parent(element);
  649 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   80 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (20x)
    .           	char *pname = clish_xmlnode_get_all_name(pelement);
    .           	char *text;
    .           	clish_sym_t *sym = NULL;
    .           
  172 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "VAR") == 0)
3,294 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,020 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (20x)
   21 ( 0.00%)  		action = clish_var__get_action((clish_var_t *)parent);
    .           	else
   67 ( 0.00%)  		action = clish_command__get_action((clish_command_t *)parent);
  703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (20x)
    .           
    .           	if (pname)
   63 ( 0.00%)  		free(pname);
2,705 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
    .           	text = clish_xmlnode_get_all_content(element);
    .           
   84 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   94 ( 0.00%)  		clish_action__set_script(action, text);
  984 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,701 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_script (17x)
    .           	}
    .           	if (text)
   63 ( 0.00%)  		free(text);
2,746 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
   42 ( 0.00%)  	if (builtin)
   28 ( 0.00%)  		sym = clish_shell_add_unresolved_sym(shell, builtin,
5,051 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,964 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_unresolved_sym (3x)
    .           			CLISH_SYM_TYPE_ACTION);
    .           	else
   51 ( 0.00%)  		sym = shell->hooks[CLISH_SYM_TYPE_ACTION];
    .           
   67 ( 0.00%)  	clish_action__set_builtin(action, sym);
  695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_builtin (20x)
   42 ( 0.00%)  	if (shebang)
    .           		clish_action__set_shebang(action, shebang);
    .           
   67 ( 0.00%)  	clish_xml_release(builtin);
  622 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (20x)
   63 ( 0.00%)  	clish_xml_release(shebang);
   21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (21x)
    .           
    .           	return 0;
  189 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_detail(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   28 ( 0.00%)  {
    .           	clish_command_t *cmd = (clish_command_t *) parent;
    .           
    .           	/* read the following text element */
    .           	char *text = clish_xmlnode_get_all_content(element);
    .           
   16 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   24 ( 0.00%)  		clish_command__set_detail(cmd, text);
1,561 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_detail (3x)
1,211 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	if (text)
   12 ( 0.00%)  		free(text);
  534 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (4x)
    .           
    .           	shell = shell; /* Happy compiler */
    .           
    .           	return 0;
   28 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_namespace(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    .           {
    .           	clish_view_t *v = (clish_view_t *)parent;
    .           	clish_nspace_t *nspace = NULL;
    .           	int res = -1;
-- line 906 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c
--------------------------------------------------------------------------------
Ir              

-- line 78 ----------------------------------------
     .            * @param node element to add
     .            * @return new first element of the list
     .            */
     .           static clish_xmlnode_t *clish_expat_list_push_back(clish_xmlnode_t *first, clish_xmlnode_t *node)
     .           {
     .           	clish_xmlnode_t *cur = first;
     .           	clish_xmlnode_t *prev = NULL;
     .           
25,493 ( 0.50%)  	while (cur) {
     .           		prev = cur;
 7,754 ( 0.15%)  		cur = cur->next;
     .           	}
     .           	if (prev) {
   906 ( 0.02%)  		prev->next = node;
     .           		return first;
     .           	}
     .           	return node;
     .           }
     .           
     .           /** Generic add_attr() function
     .            *
     .            * @param first first attribute in the attribute list
-- line 99 ----------------------------------------
-- line 100 ----------------------------------------
     .            * @param n attribute name
     .            * @param v attribute value
     .            * @return the new first attribute in the attribute list
     .            */
     .           static clish_xmlnode_t *clish_expat_add_attr(clish_xmlnode_t *first, const char *n, const char *v)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   868 ( 0.02%)  	node = malloc(sizeof(clish_xmlnode_t));
44,425 ( 0.87%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (217x)
   434 ( 0.01%)  	if (!node)
     .           		return first;
     .           
   868 ( 0.02%)  	node->name = strdup(n);
49,586 ( 0.97%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   868 ( 0.02%)  	node->content = strdup(v);
54,365 ( 1.07%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   217 ( 0.00%)  	node->children = NULL;
   217 ( 0.00%)  	node->attributes = NULL;
   217 ( 0.00%)  	node->next = NULL;
   217 ( 0.00%)  	node->type = CLISH_XMLNODE_ATTR;
   217 ( 0.00%)  	node->depth = 0;
     .           
     .           	return clish_expat_list_push_back(first, node);
     .           }
     .           
     .           /** Run through an expat attribute list, and create a DOM-like attribute list
     .            *
     .            * @param node parent node
     .            * @param attr NULL-terminated attribute liste
-- line 126 ----------------------------------------
-- line 127 ----------------------------------------
     .            *
     .            * Each attribute uses two slots in the expat attribute list. The first one is
     .            * used to store the name, the second one is used to store the value.
     .            */
     .           static void clish_expat_add_attrlist(clish_xmlnode_t *node, const char **attr)
     .           {
     .           	int i;
     .           
 1,173 ( 0.02%)  	for (i = 0; attr[i]; i += 2) {
   434 ( 0.01%)  		node->attributes = clish_expat_add_attr(node->attributes,
     .           			attr[i], attr[i+1]);
     .           	}
     .           }
     .           
     .           /** Generic make_node() function
     .            *
     .            * @param parent XML parent node
     .            * @param type XML node type
-- line 144 ----------------------------------------
-- line 147 ----------------------------------------
     .            * @param attr attribute list
     .            * @return a new node or NULL on error
     .            */
     .           static clish_xmlnode_t *clish_expat_make_node(clish_xmlnode_t *parent,
     .           					      clish_xmlnodetype_e type,
     .           					      const char *n,
     .           					      const char *v,
     .           					      const char **attr)
 7,428 ( 0.15%)  {
     .           	clish_xmlnode_t *node;
     .           
 2,476 ( 0.05%)  	node = malloc(sizeof(clish_xmlnode_t));
122,324 ( 2.41%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (619x)
 1,238 ( 0.02%)  	if (!node)
     .           		return NULL;
 2,770 ( 0.05%)  	node->name = n ? strdup(n) : NULL;
18,524 ( 0.36%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (98x)
 4,039 ( 0.08%)  	node->content = v ? strdup(v) : NULL;
127,516 ( 2.51%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (521x)
   619 ( 0.01%)  	node->children = NULL;
   619 ( 0.01%)  	node->attributes = NULL;
   619 ( 0.01%)  	node->next = NULL;
 1,238 ( 0.02%)  	node->parent = parent;
 3,085 ( 0.06%)  	node->doc = parent ? parent->doc : NULL;
 2,446 ( 0.05%)  	node->depth = parent ? parent->depth + 1 : 0;
   619 ( 0.01%)  	node->type = type;
     .           
 1,238 ( 0.02%)  	if (attr)
     .           		clish_expat_add_attrlist(node, attr);
     .           
   152 ( 0.00%)  	if (parent)
 2,436 ( 0.05%)  		parent->children = clish_expat_list_push_back(parent->children, node);
     .           
     .           	return node;
 5,571 ( 0.11%)  }
     .           
     .           /** Add a new XML root
     .            *
     .            * @param doc XML document
     .            * @param el root node name
     .            * @param attr expat attribute list
     .            * @return a new root element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_root(clish_xmldoc_t *doc, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   314 ( 0.01%)  	node = clish_expat_make_node(NULL, CLISH_XMLNODE_ELM, el, NULL, attr);
25,901 ( 0.51%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (10x)
    20 ( 0.00%)  	if (!node)
     .           		return doc->root;
     .           
    30 ( 0.00%)  	doc->root = clish_expat_list_push_back(doc->root, node);
     .           
     .           	return node;
     .           }
     .           
     .           /** Add a new XML element as a child
     .            *
     .            * @param cur parent XML element
     .            * @param el element name
     .            * @param attr expat attribute list
     .            * @return a new XMl element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_child(clish_xmlnode_t *cur, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   176 ( 0.00%)  	node = clish_expat_make_node(cur, CLISH_XMLNODE_ELM, el, NULL, attr);
176,849 ( 3.48%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (88x)
   176 ( 0.00%)  	if (!node)
     .           		return cur;
     .           
     .           	return node;
     .           }
     .           
     .           /** Expat handler: element content
     .            *
     .            * @param data user data
     .            * @param s content (not nul-termainated)
     .            * @param len content length
     .            */
     .           static void clish_expat_chardata_handler(void *data, const char *s, int len)
 2,605 ( 0.05%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
 2,605 ( 0.05%)  	if (doc->current) {
 2,605 ( 0.05%)  		char *content = malloc(len + 1);
66,819 ( 1.31%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (521x)
 2,609 ( 0.05%)  		strncpy(content, s, len);
18,080 ( 0.36%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (520x)
 1,541 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   521 ( 0.01%)  		content[len] = '\0';
     .           
 3,126 ( 0.06%)  		clish_expat_make_node(doc->current, CLISH_XMLNODE_TEXT, NULL, content, NULL);
290,424 ( 5.71%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (521x)
     .           		/*
     .           		 * the previous call is a bit too generic, and strdup() content
     .           		 * so we need to free out own version of content.
     .           		 */
 1,567 ( 0.03%)  		free(content);
45,760 ( 0.90%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (520x)
 1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           	}
 2,605 ( 0.05%)  }
     .           
     .           /** Expat handler: start XML element
     .            *
     .            * @param data user data
     .            * @param el element name (nul-terminated)
     .            * @param attr expat attribute list
     .            */
     .           static void clish_expat_element_start(void *data, const char *el, const char **attr)
   490 ( 0.01%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (!doc->current) {
     .           		doc->current = clish_expat_add_root(doc, el, attr);
     .           	} else {
    98 ( 0.00%)  		doc->current = clish_expat_add_child(doc->current, el, attr);
     .           	}
   392 ( 0.01%)  }
     .           
     .           /** Expat handler: end XML element
     .            *
     .            * @param data user data
     .            * @param el element name
     .            */
     .           static void clish_expat_element_end(void *data, const char *el)
     .           {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (doc->current) {
   294 ( 0.01%)  		doc->current = doc->current->parent;
     .           	}
     .           
     .           	el = el; /* Happy compiler */
     .           }
     .           
     .           /** Free a node, its children and its attributes
     .            *
     .            * @param node node to free
     .            */
     .           static void clish_expat_free_node(clish_xmlnode_t *cur)
 3,344 ( 0.07%)  {
     .           	clish_xmlnode_t *node;
     .           	clish_xmlnode_t *first;
     .           
 2,584 ( 0.05%)  	if (cur->attributes) {
     .           		first = cur->attributes;
   651 ( 0.01%)  		while (first) {
     .           			node = first;
   217 ( 0.00%)  			first = first->next;
   217 ( 0.00%)  			clish_expat_free_node(node);
 8,700 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (30x)
     .           		}
     .           	}
 2,569 ( 0.05%)  	if (cur->children) {
     .           		first = cur->children;
 1,827 ( 0.04%)  		while (first) {
     .           			node = first;
   609 ( 0.01%)  			first = first->next;
   609 ( 0.01%)  			clish_expat_free_node(node);
179,286 ( 3.53%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (174x)
     .           		}
     .           	}
 2,508 ( 0.05%)  	if (cur->name)
   630 ( 0.01%)  		free(cur->name);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.05%)  	if (cur->content)
 1,476 ( 0.03%)  		free(cur->content);
64,973 ( 1.28%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (738x)
 2,508 ( 0.05%)  	free(cur);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.05%)  }
     .           
     .           /*
     .            * Public interface
     .            */
     .           
     .           int clish_xmldoc_start(void)
     .           {
     .           	return 0;
-- line 313 ----------------------------------------
-- line 314 ----------------------------------------
     .           }
     .           
     .           int clish_xmldoc_stop(void)
     .           {
     .           	return 0;
     .           }
     .           
     .           clish_xmldoc_t *clish_xmldoc_read(const char *filename)
    70 ( 0.00%)  {
     .           	clish_xmldoc_t *doc;
     .           	struct stat sb;
     .           	int fd;
     .           	char *buffer;
     .           	XML_Parser parser;
     .           	int rb;
     .           
    54 ( 0.00%)  	doc = malloc(sizeof(clish_xmldoc_t));
 1,728 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,269 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc (9x)
    20 ( 0.00%)  	if (!doc)
     .           		return NULL;
     .           	memset(doc, 0, sizeof(clish_xmldoc_t));
    44 ( 0.00%)  	doc->filename = strdup(filename);
 1,751 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,723 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (9x)
    44 ( 0.00%)  	parser = XML_ParserCreate(NULL);
 2,156 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
95,826 ( 1.88%)  => ???:XML_ParserCreate (9x)
    20 ( 0.00%)  	if (!parser)
     .           		goto error_parser_create;
    44 ( 0.00%)  	XML_SetUserData(parser, doc);
   949 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    54 ( 0.00%)  => ???:XML_SetUserData (9x)
    44 ( 0.00%)  	XML_SetCharacterDataHandler(parser, clish_expat_chardata_handler);
 1,060 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    18 ( 0.00%)  => ???:XML_SetCharacterDataHandler (9x)
    54 ( 0.00%)  	XML_SetElementHandler(parser,
 1,011 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    27 ( 0.00%)  => ???:XML_SetElementHandler (9x)
     .           		clish_expat_element_start,
     .           		clish_expat_element_end);
     .           
    64 ( 0.00%)  	fd = open(filename, O_RDONLY);
 1,430 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:open (9x)
    20 ( 0.00%)  	if (fd < 0)
     .           		goto error_open;
     .           	fstat(fd, &sb);
    50 ( 0.00%)  	buffer = malloc(sb.st_size+1);
 2,681 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (10x)
    54 ( 0.00%)  	rb = read(fd, buffer, sb.st_size);
 1,446 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (9x)
    20 ( 0.00%)  	if (rb < 0) {
     .           		close(fd);
     .           		goto error_parse;
     .           	}
    20 ( 0.00%)  	buffer[sb.st_size] = 0;
    34 ( 0.00%)  	close(fd);
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:close (9x)
     .           
    84 ( 0.00%)  	if (!XML_Parse(parser, buffer, sb.st_size, 1))
1,302,462 (25.61%)  => ???:XML_Parse (9x)
112,859 ( 2.22%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           		goto error_parse;
     .           
    34 ( 0.00%)  	XML_ParserFree(parser);
 6,192 ( 0.12%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
46,609 ( 0.92%)  => ???:XML_ParserFree (9x)
    30 ( 0.00%)  	free(buffer);
 1,380 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           
     .           	return doc;
     .           
     .           error_parse:
     .           	free(buffer);
     .           
     .           error_open:
     .           	XML_ParserFree(parser);
     .           
     .           error_parser_create:
     .           	clish_xmldoc_release(doc);
     .           
     .           	return NULL;
    80 ( 0.00%)  }
     .           
     .           void clish_xmldoc_release(clish_xmldoc_t *doc)
    20 ( 0.00%)  {
    20 ( 0.00%)  	if (doc) {
     .           		clish_xmlnode_t *node;
    70 ( 0.00%)  		while (doc->root) {
     .           			node = doc->root;
    20 ( 0.00%)  			doc->root = node->next;
    10 ( 0.00%)  			clish_expat_free_node(node);
191,026 ( 3.76%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node (10x)
     .           		}
    30 ( 0.00%)  		if (doc->filename)
    20 ( 0.00%)  			free(doc->filename);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
    30 ( 0.00%)  		free(doc);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           	}
    10 ( 0.00%)  }
     .           
     .           int clish_xmldoc_is_valid(clish_xmldoc_t *doc)
     .           {
    53 ( 0.00%)  	return doc && doc->root;
    12 ( 0.00%)  }
     .           
     .           int clish_xmldoc_error_caps(clish_xmldoc_t *doc)
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return CLISH_XMLERR_NOCAPS;
     .           }
     .           
-- line 403 ----------------------------------------
-- line 419 ----------------------------------------
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return "";
     .           }
     .           
     .           int clish_xmlnode_get_type(clish_xmlnode_t *node)
     .           {
 1,281 ( 0.03%)  	if (node)
   427 ( 0.01%)  		return node->type;
     .           	return CLISH_XMLNODE_UNKNOWN;
   427 ( 0.01%)  }
     .           
     .           clish_xmlnode_t *clish_xmldoc_get_root(clish_xmldoc_t *doc)
     .           {
    20 ( 0.00%)  	if (doc)
    20 ( 0.00%)  		return doc->root;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_parent(clish_xmlnode_t *node)
     .           {
    80 ( 0.00%)  	if (node)
    80 ( 0.00%)  		return node->parent;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_next_child(clish_xmlnode_t *parent,
     .           					  clish_xmlnode_t *curchild)
     .           {
   956 ( 0.02%)  	if (curchild)
   834 ( 0.02%)  		return curchild->next;
   122 ( 0.00%)  	if (parent)
   122 ( 0.00%)  		return parent->children;
     .           	return NULL;
     .           }
     .           
     .           char *clish_xmlnode_fetch_attr(clish_xmlnode_t *node,
     .           			       const char *attrname)
 2,648 ( 0.05%)  {
 1,324 ( 0.03%)  	if (node) {
   662 ( 0.01%)  		clish_xmlnode_t *n = node->attributes;
 4,292 ( 0.08%)  		while (n) {
 9,924 ( 0.20%)  			if (strcmp(n->name, attrname) == 0)
32,589 ( 0.64%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (1,654x)
   187 ( 0.00%)  				return n->content;
 1,467 ( 0.03%)  			n = n->next;
     .           		}
     .           	}
   475 ( 0.01%)  	return NULL;
 2,648 ( 0.05%)  }
     .           
     .           int clish_xmlnode_get_content(clish_xmlnode_t *node, char *content,
     .           			      unsigned int *contentlen)
   182 ( 0.00%)  {
     .           	unsigned int minlen = 1;
     .           
   208 ( 0.00%)  	if (node && content && contentlen) {
    26 ( 0.00%)  		clish_xmlnode_t *children = node->children;
   505 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   576 ( 0.01%)  				minlen += strlen(children->content);
 5,074 ( 0.10%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (192x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    52 ( 0.00%)  		if (minlen >= *contentlen) {
     .           			*contentlen = minlen + 1;
     .           			return -E2BIG;
     .           		}
     .           		children = node->children;
    52 ( 0.00%)  		*content = 0;
   407 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   580 ( 0.01%)  				strcat(content, children->content);
29,191 ( 0.57%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned (191x)
 1,492 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    26 ( 0.00%)  		return 0;
     .           	}
     .           
     .           	return -EINVAL;
   156 ( 0.00%)  }
     .           
     .           int clish_xmlnode_get_name(clish_xmlnode_t *node, char *name,
     .           	unsigned int *namelen)
   552 ( 0.01%)  {
 1,104 ( 0.02%)  	if (node && name && namelen) {
 1,108 ( 0.02%)  		if (strlen(node->name) >= *namelen) {
 2,192 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (137x)
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			*namelen = strlen(node->name) + 1;
     .           			return -E2BIG;
     .           		}
   828 ( 0.02%)  		snprintf(name, *namelen, "%s", node->name);
72,205 ( 1.42%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (138x)
   414 ( 0.01%)  		name[*namelen - 1] = '\0';
   138 ( 0.00%)  		return 0;
     .           	}
     .           	return -EINVAL;
   552 ( 0.01%)  }
     .           
     .           void clish_xmlnode_print(clish_xmlnode_t *node, FILE *out)
     .           {
     .           	if (node) {
     .           		int i;
     .           		clish_xmlnode_t *a;
     .           		for (i=0; i<node->depth; ++i) {
     .           			fprintf(out, "  ");
-- line 520 ----------------------------------------
-- line 525 ----------------------------------------
     .           			fprintf(out, " %s='%s'", a->name, a->content);
     .           			a = a->next;
     .           		}
     .           		fprintf(out, ">...");
     .           	}
     .           }
     .           
     .           void clish_xml_release(void *p)
   661 ( 0.01%)  {
     .           	p = p; /* Happy compiler */
     .           	/* nothing to release */
     .           }
     .           
     .           #endif /* HAVE_LIB_EXPAT */
     .           

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c
--------------------------------------------------------------------------------
Ir          

-- line 9 ----------------------------------------
 .           #include "lub/string.h"
 .           #include "lub/list.h"
 .           #include "lub/bintree.h"
 .           #include "clish/plugin.h"
 .           #include "clish/view.h"
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_plugin_t * clish_shell_find_plugin(clish_shell_t *this, const char *name)
 3 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           
 2 ( 0.00%)  	assert(this);
 .           
 5 ( 0.00%)  	if (!name || !name[0])
 1 ( 0.00%)  		return NULL;
 .           	/* Iterate elements */
 7 ( 0.00%)  	for(iter = lub_list__get_head(this->plugins);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 .           		iter; iter = lub_list_node__get_next(iter)) {
 .           		plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 .           		if (!strcmp(name, clish_plugin__get_name(plugin)))
 .           			return plugin;
 .           	}
 .           
 .           	return NULL;
 5 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_plugin_t * clish_shell_find_create_plugin(clish_shell_t *this,
 .           	const char *name)
 3 ( 0.00%)  {
 .           	clish_plugin_t *plugin;
 2 ( 0.00%)  	assert(this);
 .           
 6 ( 0.00%)  	if (!name || !name[0])
 1 ( 0.00%)  		return NULL;
 .           
 7 ( 0.00%)  	plugin = clish_shell_find_plugin(this, name);
710 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 2 ( 0.00%)  	if (plugin)
 .           		return plugin;
 8 ( 0.00%)  	plugin = clish_plugin_new(name);
1,448 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 4 ( 0.00%)  	lub_list_add(this->plugins, plugin);
249 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (1x)
 .           
 1 ( 0.00%)  	return plugin;
 5 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* For all plugins:
 .            *  * dlopen(plugin)
 .            *  * dlsym(initialize function)
 .            *  * exec init functions to get all plugin syms
 .            */
 .           int clish_shell_load_plugins(clish_shell_t *this)
 3 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           
 3 ( 0.00%)  	assert(this);
 .           
 .           	/* Iterate elements */
 8 ( 0.00%)  	for(iter = lub_list__get_head(this->plugins);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 4 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (1x)
 3 ( 0.00%)  		plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (1x)
10 ( 0.00%)  		if (clish_plugin_load(plugin, (void *)this))
155,096 ( 3.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           			return -1;
 .           #ifdef DEBUG
 .           		clish_plugin_dump(plugin);
 .           #endif
 .           	}
 .           
 1 ( 0.00%)  	return 0;
 4 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Iterate plugins to find symbol by name.
 .            * The symbol name can be simple or with namespace:
 .            * mysym@plugin1
 .            * The symbols with suffix will be resolved using specified plugin only.
 .            */
 .           static clish_sym_t *plugins_find_sym(clish_shell_t *this, const char *name, int type)
 .           {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           	clish_sym_t *sym = NULL;
 .           	/* To parse command name */
 6 ( 0.00%)  	char *saveptr = NULL;
 .           	const char *delim = "@";
 .           	char *plugin_name = NULL;
 .           	char *cmdn = NULL;
24 ( 0.00%)  	char *str = lub_string_dup(name);
1,045 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (6x)
 .           
 .           	assert(this);
 .           
 .           	/* Parse name to get sym name and optional plugin name */
42 ( 0.00%)  	cmdn = strtok_r(str, delim, &saveptr);
1,583 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
597 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r (5x)
12 ( 0.00%)  	if (!cmdn) {
 .           		lub_string_free(str);
 .           		return NULL;
 .           	}
36 ( 0.00%)  	plugin_name = strtok_r(NULL, delim, &saveptr);
483 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r (6x)
 .           
12 ( 0.00%)  	if (plugin_name) {
 .           		/* Search for symbol in specified namespace */
 .           		/* Iterate elements */
27 ( 0.00%)  		for(iter = lub_list__get_head(this->plugins);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 .           			iter; iter = lub_list_node__get_next(iter)) {
12 ( 0.00%)  			plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
31 ( 0.00%)  			if (strcmp(clish_plugin__get_pubname(plugin), plugin_name))
730 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
177 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (3x)
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin__get_pubname (2x)
 .           				continue;
21 ( 0.00%)  			if ((sym = clish_plugin_get_sym(plugin, cmdn, type)))
1,151 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym (3x)
 .           				break;
 .           		}
 .           	} else {
 .           		/* Iterate all plugins */
15 ( 0.00%)  		for(iter = lub_list__get_head(this->plugins);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 .           			iter; iter = lub_list_node__get_next(iter)) {
 9 ( 0.00%)  			plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
28 ( 0.00%)  			if ((sym = clish_plugin_get_sym(plugin, cmdn, type)))
722 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
609 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym (2x)
 .           				break;
 .           		}
 .           	}
24 ( 0.00%)  	lub_string_free(str);
540 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (6x)
 .           
 .           	return sym;
 .           }
 .           
 .           /*--------------------------------------------------------- */
 .           /* Find symbol by name in the list of unresolved symbols */
 .           clish_sym_t *clish_shell_find_sym(clish_shell_t *this, const char *name, int type)
28 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_sym_t *sym;
 .           
 .           	/* Iterate elements */
31 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
853 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 8 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
900 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		int res;
20 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
877 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
32 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
639 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
132 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (4x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (3x)
19 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           			return sym;
 3 ( 0.00%)  		if (res > 0) /* No chance to find name */
 .           			break;
 .           	}
 .           
 3 ( 0.00%)  	return NULL;
28 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Add symbol to the table of unresolved symbols */
 .           clish_sym_t *clish_shell_add_sym(clish_shell_t *this,
 .           	void *func, const char *name, int type)
20 ( 0.00%)  {
 .           	clish_sym_t *sym = NULL;
 .           
16 ( 0.00%)  	if (!name)
 .           		return NULL;
40 ( 0.00%)  	if ((sym = clish_shell_find_sym(this, name, type)))
3,375 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_find_sym (3x)
1,564 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		return sym;
24 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
1,208 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (3x)
 .           		return NULL;
19 ( 0.00%)  	lub_list_add(this->syms, sym);
1,697 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
568 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (2x)
 .           
 .           	return sym;
28 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_sym_t *clish_shell_add_unresolved_sym(clish_shell_t *this,
 .           	const char *name, int type)
 .           {
24 ( 0.00%)  	return clish_shell_add_sym(this, NULL, name, type);
4,949 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_sym (3x)
4,301 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Link one unresolved symbol.
 .            * sym - unresolved symbol
 .            * Returns 0 if the symbol was succesfully resolved
 .            */
 .           static int link_unresolved_sym(clish_shell_t *this, clish_sym_t *sym)
 .           {
 .           	clish_sym_t *plugin_sym;
 .           	char *sym_name = NULL;
 .           	int sym_type;
 .           
34 ( 0.00%)  	if (clish_sym__get_func(sym)) /* Don't relink non-null fn */
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (5x)
 .           		return 0;
30 ( 0.00%)  	sym_name = clish_sym__get_name(sym);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (6x)
24 ( 0.00%)  	sym_type = clish_sym__get_type(sym);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
 .           	plugin_sym = plugins_find_sym(this, sym_name, sym_type);
 .           	if (!plugin_sym) {
 .           		fprintf(stderr, "Error: Can't resolve symbol %s.\n",
 .           			sym_name);
 .           		return -1;
 .           	}
 .           	/* Copy symbol attributes */
34 ( 0.00%)  	clish_sym_clone(sym, plugin_sym);
623 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_clone (5x)
 .           
 .           	return 0;
 .           }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Link unresolved symbols */
 .           int clish_shell_link_plugins(clish_shell_t *this)
 8 ( 0.00%)  {
 .           	clish_sym_t *sym;
 .           	lub_list_node_t *iter;
 .           
 .           	/* Iterate elements */
18 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
24 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (6x)
24 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (6x)
 .           		if (link_unresolved_sym(this, sym) < 0)
 .           			return -1;
 .           	}
 .           
 1 ( 0.00%)  	return 0;
 8 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Get hook sym */
 .           clish_sym_t *clish_shell_get_hook(const clish_shell_t *this, int type)
 .           {
 2 ( 0.00%)  	return this->hooks[type];
 1 ( 0.00%)  }

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c
--------------------------------------------------------------------------------
Ir          

-- line 13 ----------------------------------------
 .           #include "lub/string.h"
 .           #include "lub/db.h"
 .           #include "lub/list.h"
 .           #include "clish/plugin.h"
 .           
 .           /*-------------------------------------------------------- */
 .           static void clish_shell_init(clish_shell_t * this,
 .           	FILE * istream, FILE * ostream, bool_t stop_on_error)
10 ( 0.00%)  {
 .           	clish_ptype_t *tmp_ptype = NULL;
 .           	int i;
 .           	char template[PATH_MAX];
 .           
 .           	/* initialise the tree of views */
16 ( 0.00%)  	lub_bintree_init(&this->view_tree,
1,603 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 .           		clish_view_bt_offset(),
 .           		clish_view_bt_compare, clish_view_bt_getkey);
 .           
 .           	/* initialise the tree of ptypes */
12 ( 0.00%)  	lub_bintree_init(&this->ptype_tree,
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (1x)
 .           		clish_ptype_bt_offset(),
 .           		clish_ptype_bt_compare, clish_ptype_bt_getkey);
 .           
 .           	/* initialise the tree of vars */
12 ( 0.00%)  	lub_bintree_init(&this->var_tree,
639 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (1x)
 .           		clish_var_bt_offset(),
 .           		clish_var_bt_compare, clish_var_bt_getkey);
 .           
 .           	/* Initialize plugin list */
 8 ( 0.00%)  	this->plugins = lub_list_new(NULL);
956 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 .           	/* Initialise the list of unresolved (yet) symbols */
 4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
210 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
 .           
 .           	/* Create userdata storage */
 4 ( 0.00%)  	this->udata = lub_list_new(clish_udata_compare);
210 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
 3 ( 0.00%)  	assert(this->udata);
 .           
 .           	/* Hooks */
10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
34 ( 0.00%)  		this->hooks[i] = clish_sym_new(NULL, NULL, i);
1,607 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
912 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (4x)
10 ( 0.00%)  		this->hooks_use[i] = BOOL_FALSE;
 .           	}
 .           
 .           	/* Set up defaults */
 1 ( 0.00%)  	this->global = NULL;
 1 ( 0.00%)  	this->startup = NULL;
 1 ( 0.00%)  	this->idle_timeout = 0; /* No idle timeout by default */
 1 ( 0.00%)  	this->wdog = NULL;
 1 ( 0.00%)  	this->wdog_timeout = 0; /* No watchdog timeout by default */
 1 ( 0.00%)  	this->wdog_active = BOOL_FALSE;
 1 ( 0.00%)  	this->state = SHELL_STATE_INITIALISING;
 1 ( 0.00%)  	this->overview = NULL;
10 ( 0.00%)  	this->tinyrl = clish_shell_tinyrl_new(istream, ostream, 0);
15,691 ( 0.31%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1 ( 0.00%)  	this->current_file = NULL;
 1 ( 0.00%)  	this->pwdv = NULL;
 1 ( 0.00%)  	this->pwdc = 0;
 1 ( 0.00%)  	this->depth = -1; /* Current depth is undefined */
 1 ( 0.00%)  	this->client = NULL;
 4 ( 0.00%)  	this->lockfile = lub_string_dup(CLISH_LOCK_PATH);
1,762 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 4 ( 0.00%)  	this->default_shebang = lub_string_dup("/bin/sh");
245 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 1 ( 0.00%)  	this->interactive = BOOL_TRUE; /* The interactive shell by default. */
 1 ( 0.00%)  	this->log = BOOL_FALSE; /* Disable logging by default */
 1 ( 0.00%)  	this->log_facility = LOG_LOCAL0; /* LOCAL0 for compatibility */
 1 ( 0.00%)  	this->dryrun = BOOL_FALSE; /* Disable dry-run by default */
14 ( 0.00%)  	this->user = lub_db_getpwuid(getuid()); /* Get user information */
6,629 ( 0.13%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 1 ( 0.00%)  	this->default_plugin = BOOL_TRUE; /* Load default plugin by default */
 .           
 .           	/* Create template (string) for FIFO name generation */
18 ( 0.00%)  	snprintf(template, sizeof(template),
4,010 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 .           		"%s/klish.fifo.%u.XXXXXX", "/tmp", getpid());
 1 ( 0.00%)  	template[sizeof(template) - 1] = '\0';
 4 ( 0.00%)  	this->fifo_temp = lub_string_dup(template);
263 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 .           
 .           	/* Create internal ptypes and params */
 .           	/* Args */
12 ( 0.00%)  	tmp_ptype = clish_shell_find_create_ptype(this,
154,923 ( 3.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		"__ptype_ARGS",
 .           		"Arguments", "[^\\\\]+",
 .           		CLISH_PTYPE_REGEXP,
 .           		CLISH_PTYPE_NONE);
 2 ( 0.00%)  	assert(tmp_ptype);
 .           
 .           	/* Push non-NULL istream */
 2 ( 0.00%)  	if (istream)
 .           		clish_shell_push_fd(this, istream, stop_on_error);
 7 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           static void clish_shell_fini(clish_shell_t *this)
 .           {
 .           	clish_view_t *view;
 .           	clish_ptype_t *ptype;
 .           	clish_var_t *var;
 .           	unsigned i;
-- line 107 ----------------------------------------
-- line 193 ----------------------------------------
 .           		lub_string_free(this->fifo_temp);
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           clish_shell_t *clish_shell_new(
 .           	FILE * istream,
 .           	FILE * ostream,
 .           	bool_t stop_on_error)
 8 ( 0.00%)  {
 8 ( 0.00%)  	clish_shell_t *this = malloc(sizeof(clish_shell_t));
1,637 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 2 ( 0.00%)  	if (this)
 5 ( 0.00%)  		clish_shell_init(this, istream, ostream, stop_on_error);
190,544 ( 3.75%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_init (1x)
 .           
 .           	return this;
 7 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           void clish_shell_delete(clish_shell_t *this)
 .           {
 .           	clish_shell_fini(this);
 .           	free(this);
 .           }
 .           
-- line 216 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/string/string.c
--------------------------------------------------------------------------------
Ir             

-- line 10 ----------------------------------------
    .           
    .           const char *lub_string_esc_default = "`|$<>&()#;\\\"!";
    .           const char *lub_string_esc_regex = "^$.*+[](){}";
    .           const char *lub_string_esc_quoted = "\\\"";
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_free(char *ptr)
    .           {
  144 ( 0.00%)  	free(ptr);
5,829 ( 0.11%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (69x)
1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_ndecode(const char *string, unsigned int len)
   68 ( 0.00%)  {
    .           	const char *s = string;
    .           	char *res, *p;
    .           	int esc = 0;
    .           
   34 ( 0.00%)  	if (!string)
    .           		return NULL;
    .           
    .           	/* Allocate enough memory for result */
   68 ( 0.00%)  	p = res = malloc(len + 1);
3,443 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (17x)
    .           
1,154 ( 0.02%)  	while (*s && (s < (string +len))) {
  396 ( 0.01%)  		if (!esc) {
  396 ( 0.01%)  			if ('\\' == *s)
  198 ( 0.00%)  				esc = 1;
    .           			else
    .           				*p = *s;
    .           		} else {
    .           /*			switch (*s) {
    .           			case 'r':
    .           			case 'n':
    .           				*p = '\n';
    .           				break;
    .           			case 't':
    .           				*p = '\t';
    .           				break;
    .           			default:
    .           				*p = *s;
    .           				break;
    .           			}
  198 ( 0.00%)  */			*p = *s;
    .           			esc = 0;
    .           		}
    .           		if (!esc)
  396 ( 0.01%)  			p++;
  198 ( 0.00%)  		s++;
    .           	}
   17 ( 0.00%)  	*p = '\0';
    .           
    .           	return res;
   68 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           inline char *lub_string_decode(const char *string)
    .           {
    .           	return lub_string_ndecode(string, strlen(string));
    .           }
    .           
    .           /*----------------------------------------------------------- */
-- line 71 ----------------------------------------
-- line 95 ----------------------------------------
    .           			break;
    .           		}
    .           	}
    .           	return result;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_catn(char **string, const char *text, size_t len)
  618 ( 0.01%)  {
  206 ( 0.00%)  	if (text) {
    .           		char *q;
  515 ( 0.01%)  		size_t length, initlen, textlen = strlen(text);
2,042 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (103x)
    .           
    .           		/* make sure the client cannot give us duff details */
  206 ( 0.00%)  		len = (len < textlen) ? len : textlen;
    .           
    .           		/* remember the size of the original string */
  661 ( 0.01%)  		initlen = *string ? strlen(*string) : 0;
2,134 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (73x)
    .           
    .           		/* account for '\0' */
  103 ( 0.00%)  		length = initlen + len + 1;
    .           
    .           		/* allocate the memory for the result */
  313 ( 0.01%)  		q = realloc(*string, length);
16,316 ( 0.32%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (102x)
1,846 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  206 ( 0.00%)  		if (NULL != q) {
  103 ( 0.00%)  			*string = q;
    .           			/* move to the end of the initial string */
  103 ( 0.00%)  			q += initlen;
    .           
2,372 ( 0.05%)  			while (len--) {
2,790 ( 0.05%)  				*q++ = *text++;
    .           			}
  103 ( 0.00%)  			*q = '\0';
    .           		}
    .           	}
  618 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_cat(char **string, const char *text)
  510 ( 0.01%)  {
  616 ( 0.01%)  	size_t len = text ? strlen(text) : 0;
1,456 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,992 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (101x)
  412 ( 0.01%)  	lub_string_catn(string, text, len);
29,142 ( 0.57%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn (101x)
2,759 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  306 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_dup(const char *string)
    .           {
  578 ( 0.01%)  	if (!string)
    .           		return NULL;
  520 ( 0.01%)  	return strdup(string);
60,648 ( 1.19%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (257x)
1,754 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   62 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_dupn(const char *string, unsigned int len)
   54 ( 0.00%)  {
    .           	char *res = NULL;
    .           
   72 ( 0.00%)  	if (!string)
    .           		return res;
   72 ( 0.00%)  	res = malloc(len + 1);
2,118 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (18x)
   94 ( 0.00%)  	strncpy(res, string, len);
1,584 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  510 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (17x)
   18 ( 0.00%)  	res[len] = '\0';
    .           
    .           	return res;
   90 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int lub_string_nocasecmp(const char *cs, const char *ct)
1,812 ( 0.04%)  {
    .           	int result = 0;
5,822 ( 0.11%)  	while ((0 == result) && *cs && *ct) {
    .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
    .           		 * MACRO implementation uses braces to prevent multiple increments
    .           		 * when called.
    .           		 */
3,444 ( 0.07%)  		int s = lub_ctype_tolower(*cs++);
7,557 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (687x)
2,407 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,440 ( 0.07%)  		int t = lub_ctype_tolower(*ct++);
7,568 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (688x)
    .           
    .           		result = s - t;
    .           	}
    .           	/*lint -e774 Boolean within 'if' always evealuates to True 
    .           	 * not the case because of tolower() evaluating to 0 under lint
    .           	 * (see above)
    .           	 */
    .           	if (0 == result) {
    .           		/* account for different string lengths */
   79 ( 0.00%)  		result = *cs - *ct;
    .           	}
    .           	return result;
1,510 ( 0.03%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_tolower(const char *str)
    .           {
    .           	char *tmp = strdup(str);
    .           	char *p = tmp;
    .           
    .           	while (*p) {
-- line 192 ----------------------------------------
-- line 269 ----------------------------------------
    .           		p1++;
    .           	}
    .           	return p2;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *lub_string_nextword(const char *string,
    .           	size_t *len, size_t *offset, size_t *quoted)
  320 ( 0.01%)  {
    .           	const char *word;
    .           
   40 ( 0.00%)  	*quoted = 0;
    .           
    .           	/* Find the start of a word (not including an opening quote) */
  564 ( 0.01%)  	while (*string && isspace(*string)) {
1,542 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   99 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (33x)
   34 ( 0.00%)  		string++;
   28 ( 0.00%)  		(*offset)++;
    .           	}
    .           	/* Is this the start of a quoted string ? */
  102 ( 0.00%)  	if (*string == '"') {
    .           		*quoted = 1;
    .           		string++;
    .           	}
    .           	word = string;
   80 ( 0.00%)  	*len = 0;
    .           
    .           	/* Find the end of the word */
  912 ( 0.02%)  	while (*string) {
  848 ( 0.02%)  		if (*string == '\\') {
    .           			string++;
    .           			(*len)++;
    .           			if (*string) {
    .           				(*len)++;
    .           				string++;
    .           			}
    .           			continue;
    .           		}
    .           		/* End of word */
3,392 ( 0.07%)  		if (!*quoted && isspace(*string))
1,272 ( 0.03%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (424x)
    .           			break;
  792 ( 0.02%)  		if (*string == '"') {
    .           			/* End of a quoted string */
    .           			*quoted = 2;
    .           			break;
    .           		}
  396 ( 0.01%)  		(*len)++;
  792 ( 0.02%)  		string++;
    .           	}
    .           
    .           	return word;
  280 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned int lub_string_wordcount(const char *line)
   15 ( 0.00%)  {
    .           	const char *word;
    3 ( 0.00%)  	unsigned int result = 0;
    6 ( 0.00%)  	size_t len = 0, offset = 0;
    .           	size_t quoted;
    .           
   71 ( 0.00%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
  682 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (2x)
2,674 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  		*word || quoted;
  102 ( 0.00%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
4,042 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (17x)
    .           		/* account for the terminating quotation mark */
   88 ( 0.00%)  		len += quoted ? quoted - 1 : 0;
   17 ( 0.00%)  		result++;
    .           	}
    .           
    .           	return result;
   21 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 11 ----------------------------------------
  .           #include <string.h>
  .           #include <assert.h>
  .           #include <limits.h>
  .           #include <stdio.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
 51 ( 0.00%)  static char *clish_ptype_select__get_name(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 38 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
829 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
160 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (16x)
 51 ( 0.00%)  	if (arg) {
 68 ( 0.00%)  		size_t name_len = strlen(arg);
326 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (17x)
 72 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
1,504 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
368 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (16x)
  .           		if (lbrk)
 68 ( 0.00%)  			name_len = (size_t) (lbrk - arg);
 72 ( 0.00%)  		result = lub_string_dupn(arg, name_len);
2,566 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,631 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (16x)
  .           	}
  .           	return result;
 51 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_select__get_value(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
  .           	const char *arg = lub_argv__get_arg(this->u.select.items, index);
  .           	if (arg) {
-- line 40 ----------------------------------------
-- line 53 ----------------------------------------
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype__set_range(clish_ptype_t * this)
  .           {
  .           	char tmp[80];
  .           
  .           	/* Now set up the range values */
 75 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* Nothing more to do */
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* Setup the integer range */
 12 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%d..%d",
  .           			this->u.integer.min, this->u.integer.max);
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		this->range = lub_string_dup(tmp);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* Setup the unsigned integer range */
 15 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%u..%u",
2,947 ( 0.06%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (3x)
  .           			(unsigned int)this->u.integer.min,
  .           			(unsigned int)this->u.integer.max);
  3 ( 0.00%)  		tmp[sizeof(tmp) - 1] = '\0';
 12 ( 0.00%)  		this->range = lub_string_dup(tmp);
680 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		/* Setup the selection values to the help text */
  .           		unsigned int i;
  .           
121 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items); i++) {
870 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 38 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (19x)
 68 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
8,855 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (17x)
  .           
 34 ( 0.00%)  			if (i > 0)
 73 ( 0.00%)  				lub_string_cat(&this->range, "/");
3,648 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (14x)
128 ( 0.00%)  			snprintf(tmp, sizeof(tmp), "%s", name);
8,790 ( 0.17%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (17x)
 17 ( 0.00%)  			tmp[sizeof(tmp) - 1] = '\0';
 68 ( 0.00%)  			lub_string_cat(&this->range, tmp);
5,400 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (17x)
 51 ( 0.00%)  			lub_string_free(name);
1,530 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (17x)
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_ptype_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_ptype_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
768 ( 0.02%)  	return strcmp(this->name, key);
7,532 ( 0.15%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (256x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_ptype_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 12 ( 0.00%)  {
  .           	const clish_ptype_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
 48 ( 0.00%)  	strcpy((char *)key, this->name);
268 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           size_t clish_ptype_bt_offset(void)
  .           {
  .           	return offsetof(clish_ptype_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *method_names[] = {
  .           	"regexp",
  .           	"integer",
  .           	"unsignedInteger",
  .           	"select"
  .           };
-- line 137 ----------------------------------------
-- line 143 ----------------------------------------
  .           
  .           	if (method >= max_method)
  .           		return NULL;
  .           	return method_names[method];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_method_e clish_ptype_method_resolve(const char *name)
 36 ( 0.00%)  {
 10 ( 0.00%)  	clish_ptype_method_e result = CLISH_PTYPE_REGEXP;
 22 ( 0.00%)  	if (NULL != name) {
  .           		unsigned i;
 36 ( 0.00%)  		for (i = 0; i < CLISH_PTYPE_SELECT + 1; i++) {
114 ( 0.00%)  			if (0 == strcmp(name, method_names[i])) {
378 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (18x)
  .           				result = (clish_ptype_method_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
  .           		assert(i <= CLISH_PTYPE_SELECT);
  .           	}
  .           	return result;
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *preprocess_names[] = {
  .           	"none",
  .           	"toupper",
  .           	"tolower"
  .           };
  .           
-- line 173 ----------------------------------------
-- line 176 ----------------------------------------
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	return preprocess_names[preprocess];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_preprocess_e clish_ptype_preprocess_resolve(const char *name)
  .           {
 22 ( 0.00%)  	clish_ptype_preprocess_e result = CLISH_PTYPE_NONE;
 22 ( 0.00%)  	if (name) {
  .           		unsigned i;
  .           		for (i = 0; i < CLISH_PTYPE_TOLOWER + 1; i++) {
  .           			if (0 == strcmp(name, preprocess_names[i])) {
  .           				result = (clish_ptype_preprocess_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
-- line 193 ----------------------------------------
-- line 372 ----------------------------------------
  .           	return (char *)result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_init(clish_ptype_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
  .           {
 26 ( 0.00%)  	assert(name);
 52 ( 0.00%)  	this->name = lub_string_dup(name);
2,760 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
 13 ( 0.00%)  	this->text = NULL;
 13 ( 0.00%)  	this->pattern = NULL;
 13 ( 0.00%)  	this->preprocess = preprocess;
 13 ( 0.00%)  	this->range = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 43 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
947 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (12x)
  .           
 26 ( 0.00%)  	if (pattern) {
  .           		/* set the pattern for this type */
 69 ( 0.00%)  		clish_ptype__set_pattern(this, pattern, method);
1,917,560 (37.70%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern (12x)
148,076 ( 2.91%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	} else {
  .           		/* The method is regexp by default */
  .           		this->method = CLISH_PTYPE_REGEXP;
  .           	}
  .           	
  .           	/* set the help text for this type */
 26 ( 0.00%)  	if (text)
 56 ( 0.00%)  		clish_ptype__set_text(this, text);
832 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,284 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_text (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_validate(const clish_ptype_t * this, const char *text)
  .           {
  .           	return clish_ptype_validate_or_translate(this, text, BOOL_FALSE);
  .           }
  .           
-- line 408 ----------------------------------------
-- line 411 ----------------------------------------
  .           {
  .           	return clish_ptype_validate_or_translate(this, text, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_ptype_new(const char *name,
  .           	const char *help, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
156 ( 0.00%)  {
 52 ( 0.00%)  	clish_ptype_t *this = malloc(sizeof(clish_ptype_t));
4,666 ( 0.09%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (13x)
  .           
 26 ( 0.00%)  	if (this)
  .           		clish_ptype_init(this, name, help, pattern, method, preprocess);
  .           	return this;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_fini(clish_ptype_t * this)
  .           {
  .           	if (this->pattern) {
  .           		switch (this->method) {
  .           		case CLISH_PTYPE_REGEXP:
  .           			regfree(&this->u.regexp);
-- line 433 ----------------------------------------
-- line 469 ----------------------------------------
  .           {
  .           	return (const char *)this->text;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_pattern(clish_ptype_t * this,
  .           			 const char *pattern, clish_ptype_method_e method)
 91 ( 0.00%)  {
 26 ( 0.00%)  	assert(NULL == this->pattern);
 13 ( 0.00%)  	this->method = method;
  .           
 74 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           	{
  .           		int result;
  .           
  .           		/* only the expression is allowed */
 39 ( 0.00%)  		lub_string_cat(&this->pattern, "^");
5,043 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,648 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (6x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, pattern);
3,484 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, "$");
1,814 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
  .           
  .           		/* compile the regular expression for later use */
 39 ( 0.00%)  		result = regcomp(&this->u.regexp, this->pattern,
1,846,745 (36.31%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp (6x)
141,777 ( 2.79%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			REG_NOSUB | REG_EXTENDED);
 14 ( 0.00%)  		assert(0 == result);
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* default the range to that of an integer */
  3 ( 0.00%)  		this->u.integer.min = INT_MIN;
  3 ( 0.00%)  		this->u.integer.max = INT_MAX;
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
798 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* now try and read the specified range */
 28 ( 0.00%)  		sscanf(this->pattern, "%d..%d",
2,835 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,758 ( 0.05%)  => /opt/build/glibc/glibc-2.24/stdio-common/isoc99_sscanf.c:__isoc99_sscanf (2x)
  .           			&this->u.integer.min, &this->u.integer.max);
  3 ( 0.00%)  		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* default the range to that of an unsigned integer */
  .           		this->u.integer.min = 0;
  .           		this->u.integer.max = (int)UINT_MAX;
  .           		this->pattern = lub_string_dup(pattern);
  .           		/* now try and read the specified range */
  .           		sscanf(this->pattern, "%u..%u",
  .           			(unsigned int *)&this->u.integer.min,
  .           			(unsigned int *)&this->u.integer.max);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
808 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* store a vector of item descriptors */
 29 ( 0.00%)  		this->u.select.items = lub_argv_new(this->pattern, 0);
16,031 ( 0.32%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,229 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (2x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	}
  .           	/* now set up the range details */
  .           	clish_ptype__set_range(this);
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype__set_text(clish_ptype_t * this, const char *text)
 13 ( 0.00%)  {
 39 ( 0.00%)  	assert(!this->text);
 52 ( 0.00%)  	this->text = lub_string_dup(text);
3,317 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
  .           
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_preprocess(clish_ptype_t * this,
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	assert(!this->preprocess);
  .           	this->preprocess = preprocess;
-- line 545 ----------------------------------------

--------------------------------------------------------------------------------
The following files chosen for auto-annotation could not be found:
--------------------------------------------------------------------------------
  /opt/build/glibc/glibc-2.24/csu/../csu/libc-start.c
  /opt/build/glibc/glibc-2.24/dlfcn/dlerror.c
  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-sysdep.c
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h
  /opt/build/glibc/glibc-2.24/elf/dl-addr.c
  /opt/build/glibc/glibc-2.24/elf/dl-deps.c
  /opt/build/glibc/glibc-2.24/elf/dl-error.c
  /opt/build/glibc/glibc-2.24/elf/dl-load.c
  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c
  /opt/build/glibc/glibc-2.24/elf/dl-misc.c
  /opt/build/glibc/glibc-2.24/elf/dl-open.c
  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c
  /opt/build/glibc/glibc-2.24/elf/rtld.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c
  /opt/build/glibc/glibc-2.24/intl/../intl/l10nflist.c
  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c
  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c
  /opt/build/glibc/glibc-2.24/locale/findlocale.c
  /opt/build/glibc/glibc-2.24/locale/loadarchive.c
  /opt/build/glibc/glibc-2.24/locale/setlocale.c
  /opt/build/glibc/glibc-2.24/malloc/arena.c
  /opt/build/glibc/glibc-2.24/malloc/hooks.c
  /opt/build/glibc/glibc-2.24/malloc/malloc.c
  /opt/build/glibc/glibc-2.24/posix/regcomp.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.c
  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/strdup.c
  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c
  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c
  /usr/include/x86_64-linux-gnu/bits/string2.h

--------------------------------------------------------------------------------
Ir               
--------------------------------------------------------------------------------
242,508 ( 4.77%)  events annotated

--------------------------------------------------------------------------------
Profile data file '../heavy/callgrind.out.2008' (creator: callgrind-3.13.0)
--------------------------------------------------------------------------------
I1 cache: 
D1 cache: 
LL cache: 
Timerange: Basic block 0 - 1351168
Trigger: Program termination
Profiled target:  ./clish -x ../../xml-examples/clish (PID 2008, part 1)
Events recorded:  Ir
Events shown:     Ir
Event sort order: Ir
Thresholds:       99
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir                 
--------------------------------------------------------------------------------
5,862,107 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir                  file:function
--------------------------------------------------------------------------------
5,862,107 (100.0%)  ???:0x0000000000000c20 [/lib/x86_64-linux-gnu/ld-2.24.so]
5,586,389 (95.30%)  ???:_start [/home/ykuznetsov/klish-2.1.3/bin/.libs/clish]
5,586,378 (95.30%)  /opt/build/glibc/glibc-2.24/csu/../csu/libc-start.c:(below main) [/lib/x86_64-linux-gnu/libc-2.24.so]
5,586,176 (95.29%)  /home/ykuznetsov/klish-2.1.3/bin/clish.c:main [/home/ykuznetsov/klish-2.1.3/bin/.libs/clish]
5,584,926 (95.27%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave [/lib/x86_64-linux-gnu/ld-2.24.so]
4,172,561 (71.18%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:clish_shell_load_scheme [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
3,707,438 (63.24%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
2,999,104 (51.16%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,361,179 (40.28%)  /usr/include/x86_64-linux-gnu/bits/string2.h:clish_shell_load_scheme
2,360,995 (40.28%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,350,698 (40.10%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,345,328 (40.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,088,343 (35.62%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,078,886 (35.46%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
2,064,951 (35.23%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,986,989 (33.90%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp [/lib/x86_64-linux-gnu/libc-2.24.so]
1,804,763 (30.79%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,586,801 (27.07%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
1,414,464 (24.13%)  ???:XML_Parse [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,402,060 (23.92%)  ???:XML_ParseBuffer [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,401,630 (23.91%)  ???:0x000000000000b4f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,395,360 (23.80%)  ???:0x00000000000094a0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,352,120 (23.07%)  ???:0x0000000000009440 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,351,830 (23.06%)  ???:0x0000000000008190 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
1,100,831 (18.78%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap [/lib/x86_64-linux-gnu/libc-2.24.so]
1,100,236 (18.77%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap_iter.isra.24 [/lib/x86_64-linux-gnu/libc-2.24.so]
1,013,962 (17.30%)  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c:mbrtowc [/lib/x86_64-linux-gnu/libc-2.24.so]
  986,839 (16.83%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  883,716 (15.08%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  802,023 (13.68%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  800,259 (13.65%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  797,126 (13.60%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  759,238 (12.95%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_loop.c:clish_shell_loop [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  756,878 (12.91%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_readline [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  756,875 (12.91%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_execline [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  744,236 (12.70%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  724,913 (12.37%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_readline [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  724,911 (12.37%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:internal_readline [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  665,688 (11.36%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  590,799 (10.08%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c:__gconv_transform_utf8_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  563,847 ( 9.62%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_do_complete [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  540,762 ( 9.22%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:_dl_lookup_symbol_x [/lib/x86_64-linux-gnu/ld-2.24.so]
  533,310 ( 9.10%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_tab [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  532,115 ( 9.08%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_complete_with_extensions [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  511,211 ( 8.72%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp [/lib/x86_64-linux-gnu/libc-2.24.so]
  510,924 ( 8.72%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch [/lib/x86_64-linux-gnu/libc-2.24.so]
  509,636 ( 8.69%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression [/lib/x86_64-linux-gnu/libc-2.24.so]
  506,856 ( 8.65%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_completion [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  493,174 ( 8.41%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  460,448 ( 7.85%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  455,614 ( 7.77%)  ???:0x0000000005686930 [???]
  442,436 ( 7.55%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_chardata_handler [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  416,130 ( 7.10%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  391,112 ( 6.67%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:do_lookup_x [/lib/x86_64-linux-gnu/ld-2.24.so]
  380,968 ( 6.50%)  ???:0x0000000000007580 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  344,824 ( 5.88%)  /opt/build/glibc/glibc-2.24/string/strdup.c:strdup [/lib/x86_64-linux-gnu/ld-2.24.so]
  343,926 ( 5.87%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c:_dl_fixup [/lib/x86_64-linux-gnu/ld-2.24.so]
  325,028 ( 5.54%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_find_next_completion [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  321,771 ( 5.49%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:free [/lib/x86_64-linux-gnu/libc-2.24.so]
  319,800 ( 5.46%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_next_completion [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  302,485 ( 5.16%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_view [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  288,347 ( 4.92%)  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c:_dl_relocate_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  272,383 ( 4.65%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:_dl_start [/lib/x86_64-linux-gnu/ld-2.24.so]
  271,740 ( 4.64%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-sysdep.c:_dl_sysdep_start [/lib/x86_64-linux-gnu/ld-2.24.so]
  271,064 ( 4.62%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:dl_main [/lib/x86_64-linux-gnu/ld-2.24.so]
  268,715 ( 4.58%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_free [/lib/x86_64-linux-gnu/libc-2.24.so]
  265,724 ( 4.53%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h:_dl_relocate_object
  248,633 ( 4.24%)  ???:0x0000000000013e60 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  240,090 ( 4.10%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_param [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  227,476 ( 3.88%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  226,618 ( 3.87%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:clish_shell_prepare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  223,718 ( 3.82%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  218,838 ( 3.73%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  204,780 ( 3.49%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_element_start [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  202,710 ( 3.46%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  197,624 ( 3.37%)  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c:btowc [/lib/x86_64-linux-gnu/libc-2.24.so]
  193,016 ( 3.29%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  192,211 ( 3.28%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  191,026 ( 3.26%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  190,544 ( 3.25%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_init [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  186,259 ( 3.18%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error [/lib/x86_64-linux-gnu/ld-2.24.so]
  172,879 ( 2.95%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c:__gconv_transform_utf8_internal
  156,580 ( 2.67%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
  155,138 ( 2.65%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_load_plugins [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  154,808 ( 2.64%)  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
  154,475 ( 2.64%)  /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_load [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  145,295 ( 2.48%)  ???:0x000000000000f290 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  134,971 ( 2.30%)  /opt/build/glibc/glibc-2.24/dlfcn/dlerror.c:_dlerror_run [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,314 ( 2.26%)  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c:dlopen@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,193 ( 2.26%)  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c:dlopen_doit [/lib/x86_64-linux-gnu/libdl-2.24.so]
  132,164 ( 2.25%)  /opt/build/glibc/glibc-2.24/elf/dl-open.c:_dl_open [/lib/x86_64-linux-gnu/ld-2.24.so]
  132,022 ( 2.25%)  /opt/build/glibc/glibc-2.24/elf/dl-open.c:dl_open_worker [/lib/x86_64-linux-gnu/ld-2.24.so]
  127,769 ( 2.18%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter [/lib/x86_64-linux-gnu/libc-2.24.so]
  122,854 ( 2.10%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  120,273 ( 2.05%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  118,240 ( 2.02%)  /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  118,117 ( 2.01%)  /opt/build/glibc/glibc-2.24/elf/dl-misc.c:_dl_name_match_p [/lib/x86_64-linux-gnu/ld-2.24.so]
  109,891 ( 1.87%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:strcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  108,808 ( 1.86%)  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c:__collseq_table_lookup [/lib/x86_64-linux-gnu/libc-2.24.so]
  105,316 ( 1.80%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  101,318 ( 1.73%)  ???:0x000000000001a2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   97,161 ( 1.66%)  /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_vprintf [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
   97,036 ( 1.66%)  ???:XML_ParserCreate [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   97,006 ( 1.65%)  ???:XML_ParserCreate_MM [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   92,591 ( 1.58%)  /opt/build/glibc/glibc-2.24/locale/setlocale.c:setlocale [/lib/x86_64-linux-gnu/libc-2.24.so]
   91,926 ( 1.57%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_consolidate [/lib/x86_64-linux-gnu/libc-2.24.so]
   90,949 ( 1.55%)  ???:0x0000000000004c30 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   90,175 ( 1.54%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_resolve_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   87,953 ( 1.50%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   86,906 ( 1.48%)  /opt/build/glibc/glibc-2.24/locale/findlocale.c:_nl_find_locale [/lib/x86_64-linux-gnu/libc-2.24.so]
   86,862 ( 1.48%)  ???:0x0000000000004cb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   84,985 ( 1.45%)  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
   84,771 ( 1.45%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:_dl_map_object_deps [/lib/x86_64-linux-gnu/ld-2.24.so]
   83,839 ( 1.43%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_prefix [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   83,429 ( 1.42%)  /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
   82,928 ( 1.41%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
   82,441 ( 1.41%)  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c:vsnprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
   80,590 ( 1.37%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   79,147 ( 1.35%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
   77,140 ( 1.32%)  ???:0x0000000000005570 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   76,665 ( 1.31%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object [/lib/x86_64-linux-gnu/ld-2.24.so]
   76,405 ( 1.30%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
   72,941 ( 1.24%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_compile_internal
   72,620 ( 1.24%)  /opt/build/glibc/glibc-2.24/locale/loadarchive.c:_nl_load_locale_from_archive [/lib/x86_64-linux-gnu/libc-2.24.so]
   70,629 ( 1.20%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:openaux [/lib/x86_64-linux-gnu/ld-2.24.so]
   69,447 ( 1.18%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_action [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   69,014 ( 1.18%)  ???:0x0000000000005130 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
   67,663 ( 1.15%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
   64,649 ( 1.10%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:clish_shell_startup [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
   60,174 ( 1.03%)  /opt/build/glibc/glibc-2.24/intl/../intl/l10nflist.c:_nl_normalize_codeset [/lib/x86_64-linux-gnu/libc-2.24.so]
   60,022 ( 1.02%)  /opt/build/glibc/glibc-2.24/malloc/hooks.c:malloc_hook_ini [/lib/x86_64-linux-gnu/libc-2.24.so]
   59,880 ( 1.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen [/lib/x86_64-linux-gnu/ld-2.24.so]
   59,310 ( 1.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_acquire_state_context [/lib/x86_64-linux-gnu/libc-2.24.so]
   58,930 ( 1.01%)  /opt/build/glibc/glibc-2.24/malloc/arena.c:ptmalloc_init.part.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
   58,553 ( 1.00%)  /opt/build/glibc/glibc-2.24/elf/dl-addr.c:_dl_addr [/lib/x86_64-linux-gnu/libc-2.24.so]

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c
--------------------------------------------------------------------------------
Ir           

-- line 23 ----------------------------------------
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_compare(const void *first, const void *second)
  .           {
  .           	const clish_sym_t *f = (const clish_sym_t *)first;
  .           	const clish_sym_t *s = (const clish_sym_t *)second;
  .           
180 ( 0.00%)  	return strcmp(f->name, s->name);
1,194 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (45x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_sym_new(const char *name, void *func, int type)
168 ( 0.00%)  {
  .           	clish_sym_t *this;
  .           
 84 ( 0.00%)  	this = malloc(sizeof(*this));
4,434 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (21x)
 88 ( 0.00%)  	this->name = lub_string_dup(name);
3,642 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (20x)
782 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 21 ( 0.00%)  	this->func = func;
 21 ( 0.00%)  	this->type = type;
 21 ( 0.00%)  	this->api = CLISH_SYM_API_SIMPLE;
 21 ( 0.00%)  	this->permanent = BOOL_FALSE;
  .           
  .           	return this;
147 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym_free(clish_sym_t *this)
  .           {
  .           	if (!this)
  .           		return;
  .           	lub_string_free(this->name);
  .           	free(this);
-- line 55 ----------------------------------------
-- line 59 ----------------------------------------
  .           void clish_sym__set_func(clish_sym_t *this, void *func)
  .           {
  .           	this->func = func;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void *clish_sym__get_func(clish_sym_t *this)
  .           {
 10 ( 0.00%)  	return this->func;
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_permanent(clish_sym_t *this, bool_t permanent)
  .           {
 26 ( 0.00%)  	this->permanent = permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_sym__get_permanent(clish_sym_t *this)
  .           {
  .           	return this->permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_name(clish_sym_t *this, const char *name)
 15 ( 0.00%)  {
  9 ( 0.00%)  	lub_string_free(this->name);
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 12 ( 0.00%)  	this->name = lub_string_dup(name);
885 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 12 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_sym__get_name(clish_sym_t *this)
  .           {
 46 ( 0.00%)  	return this->name;
 46 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_plugin(clish_sym_t *this, clish_plugin_t *plugin)
  .           {
 26 ( 0.00%)  	this->plugin = plugin;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_sym__get_plugin(clish_sym_t *this)
  .           {
  .           	return this->plugin;
  .           }
  .           
-- line 106 ----------------------------------------
-- line 108 ----------------------------------------
  .           void clish_sym__set_type(clish_sym_t *this, int type)
  .           {
  .           	this->type = type;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym__get_type(const clish_sym_t *this)
  .           {
 13 ( 0.00%)  	return this->type;
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_api(clish_sym_t *this, clish_sym_api_e api)
  .           {
  2 ( 0.00%)  	this->api = api;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_api_e clish_sym__get_api(const clish_sym_t *this)
  .           {
  4 ( 0.00%)  	return this->api;
  4 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_clone(clish_sym_t *dst, clish_sym_t *src)
  .           {
  .           	char *name;
  .           
 24 ( 0.00%)  	if (!dst || !src)
  .           		return -1;
  6 ( 0.00%)  	name = dst->name;
 60 ( 0.00%)  	*dst = *src;
  6 ( 0.00%)  	dst->name = name;
  .           
 12 ( 0.00%)  	return 0;
  .           }
  .           
  .           /**********************************************************
  .            * PLUGIN functions                                       *
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_plugin_new(const char *name)
  4 ( 0.00%)  {
  .           	clish_plugin_t *this;
  .           
  4 ( 0.00%)  	this = malloc(sizeof(*this));
344 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           
  4 ( 0.00%)  	this->name = lub_string_dup(name);
279 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  1 ( 0.00%)  	this->conf = NULL;
  1 ( 0.00%)  	this->alias = NULL;
  1 ( 0.00%)  	this->file = NULL;
  1 ( 0.00%)  	this->builtin_flag = BOOL_FALSE; /* The plugin is shared object by default */
  1 ( 0.00%)  	this->dlhan = NULL;
  .           	/* Initialise the list of symbols */
  4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
175 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
  .           	/* Constructor and destructor */
  1 ( 0.00%)  	this->init = NULL;
  1 ( 0.00%)  	this->fini = NULL;
  .           	/* Flags */
  1 ( 0.00%)  	this->rtld_global = BOOL_FALSE; /* The dlopen() use RTLD_LOCAL by default */
  .           
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_free(clish_plugin_t *this, void *userdata)
  .           {
  .           	lub_list_node_t *iter;
  .           
  .           	if (!this)
  .           		return;
-- line 179 ----------------------------------------
-- line 201 ----------------------------------------
  .           		dlclose(this->dlhan);
  .           #endif
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_generic(clish_plugin_t *this,
  .           	void *func, const char *name, int type, bool_t permanent)
 39 ( 0.00%)  {
  .           	clish_sym_t *sym;
  .           
 91 ( 0.00%)  	if (!name || !func)
  .           		return NULL;
  .           
 91 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
6,299 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (13x)
  .           		return NULL;
 56 ( 0.00%)  	clish_sym__set_plugin(sym, this);
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_plugin (12x)
 56 ( 0.00%)  	clish_sym__set_permanent(sym, permanent);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_permanent (12x)
 52 ( 0.00%)  	lub_list_add(this->syms, sym);
4,444 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (13x)
  .           
  .           	return sym;
 65 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_sym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
  .           	return clish_plugin_add_generic(this, func,
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_psym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
 36 ( 0.00%)  	return clish_plugin_add_generic(this, func,
7,967 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (9x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_osym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  1 ( 0.00%)  {
  .           	clish_sym_t *s;
  .           
  7 ( 0.00%)  	if (!(s = clish_plugin_add_generic(this, func,
989 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (1x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE)))
  .           		return s;
  8 ( 0.00%)  	clish_sym__set_api(s, CLISH_SYM_API_STDOUT);
631 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return s;
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_posym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  .           {
  .           	clish_sym_t *s;
  .           
-- line 261 ----------------------------------------
-- line 274 ----------------------------------------
  .           	return clish_plugin_add_generic(this, func,
  .           		name, type, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_phook(clish_plugin_t *this,
  .           	void *func, const char *name, int type)
  .           {
 13 ( 0.00%)  	return clish_plugin_add_generic(this, func,
2,633 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,671 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (2x)
  .           		name, type, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_add_fini(clish_plugin_t *this,
  .           	clish_plugin_fini_t *fini)
  .           {
  .           	this->fini = fini;
-- line 290 ----------------------------------------
-- line 306 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           clish_plugin_init_t * clish_plugin_get_init(clish_plugin_t *this)
  .           {
  .           	return this->init;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_get_sym(clish_plugin_t *this, const char *name, int type)
 42 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           	clish_sym_t *sym;
  .           
  .           	/* Iterate elements */
 86 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (6x)
100 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (25x)
  .           		int res;
124 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (31x)
217 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
891 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (31x)
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (31x)
104 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
  .           			return sym;
 25 ( 0.00%)  		if (res > 0) /* No chances to find name */
  .           			break;
  .           	}
  .           
  .           	return NULL;
 42 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static int clish_plugin_load_shared(clish_plugin_t *this)
  .           {
  .           #ifdef HAVE_DLFCN_H
  1 ( 0.00%)  	char *file = NULL; /* Plugin so file name */
  1 ( 0.00%)  	char *init_name = NULL; /* Init function name */
  .           	int flag = RTLD_NOW;
  .           
  3 ( 0.00%)  	if (this->file) {
  .           		file = lub_string_dup(this->file);
  .           	} else {
  4 ( 0.00%)  		lub_string_cat(&file, "clish_plugin_");
343 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  		lub_string_cat(&file, this->name);
264 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  5 ( 0.00%)  		lub_string_cat(&file, ".so");
272 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  .           	}
  .           
  .           	/* Open dynamic library */
  7 ( 0.00%)  	if (clish_plugin__get_rtld_global(this))
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  		flag |= RTLD_GLOBAL;
  .           	else
  .           		flag |= RTLD_LOCAL;
  8 ( 0.00%)  	this->dlhan = dlopen(file, flag);
133,732 ( 2.28%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(file);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  2 ( 0.00%)  	if (!this->dlhan) {
  .           		fprintf(stderr, "Error: Can't open plugin \"%s\": %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	/* Get plugin init function */
  5 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_PREFIX);
286 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, this->name);
264 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_SUFFIX);
282 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  9 ( 0.00%)  	this->init = (clish_plugin_init_t *)dlsym(this->dlhan, init_name);
4,005 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(init_name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	if (!this->init) {
  .           		fprintf(stderr, "Error: Can't get plugin \"%s\" init function: %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	return 0;
  .           #else /* HAVE_DLFCN_H */
  .           	/* We have no any dl functions. */
-- line 376 ----------------------------------------
-- line 377 ----------------------------------------
  .           	fprintf(stderr, "Error: Can't get plugin \"%s\" init function.\n",
  .           		this->name);
  .           	return -1;
  .           #endif /* HAVE_DLFCN_H */
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_plugin_load(clish_plugin_t *this, void *userdata)
  4 ( 0.00%)  {
  .           	int res;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return -1;
  5 ( 0.00%)  	assert(this->name);
  .           
  .           	/* Builtin plugins already have init function. */
  3 ( 0.00%)  	if (!this->builtin_flag) {
  .           		if (clish_plugin_load_shared(this) < 0)
  .           			return -1;
  .           	}
  .           	if (!this->init) {
  .           		fprintf(stderr, "Error: PLUGIN %s has no init function\n",
  .           			this->name);
  .           		return -1;
  .           	}
  .           	/* Execute init function */
  6 ( 0.00%)  	if ((res = this->init(userdata, this)))
14,032 ( 0.24%)  => /home/ykuznetsov/klish-2.1.3/plugins/clish/builtin_init.c:clish_plugin_clish_init (1x)
  .           		fprintf(stderr, "Error: Plugin %s init retcode: %d\n",
  .           			this->name, res);
  .           
  .           	return res;
  6 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_name(const clish_plugin_t *this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 416 ----------------------------------------
-- line 424 ----------------------------------------
  .           char *clish_plugin__get_alias(const clish_plugin_t *this)
  .           {
  .           	return this->alias;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_pubname(const clish_plugin_t *this)
  .           {
 12 ( 0.00%)  	return (this->alias ? this->alias : this->name);
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin__set_file(clish_plugin_t *this, const char *file)
  .           {
  .           	lub_string_free(this->file);
  .           	this->file = lub_string_dup(file);
  .           }
  .           
-- line 441 ----------------------------------------
-- line 474 ----------------------------------------
  .           void clish_plugin__set_rtld_global(clish_plugin_t *this, bool_t rtld_global)
  .           {
  .           	this->rtld_global = rtld_global;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_plugin__get_rtld_global(const clish_plugin_t *this)
  .           {
  1 ( 0.00%)  	return this->rtld_global;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c
--------------------------------------------------------------------------------
Ir              

-- line 78 ----------------------------------------
     .            * @param node element to add
     .            * @return new first element of the list
     .            */
     .           static clish_xmlnode_t *clish_expat_list_push_back(clish_xmlnode_t *first, clish_xmlnode_t *node)
     .           {
     .           	clish_xmlnode_t *cur = first;
     .           	clish_xmlnode_t *prev = NULL;
     .           
25,493 ( 0.43%)  	while (cur) {
     .           		prev = cur;
 7,754 ( 0.13%)  		cur = cur->next;
     .           	}
     .           	if (prev) {
   906 ( 0.02%)  		prev->next = node;
     .           		return first;
     .           	}
     .           	return node;
     .           }
     .           
     .           /** Generic add_attr() function
     .            *
     .            * @param first first attribute in the attribute list
-- line 99 ----------------------------------------
-- line 100 ----------------------------------------
     .            * @param n attribute name
     .            * @param v attribute value
     .            * @return the new first attribute in the attribute list
     .            */
     .           static clish_xmlnode_t *clish_expat_add_attr(clish_xmlnode_t *first, const char *n, const char *v)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   868 ( 0.01%)  	node = malloc(sizeof(clish_xmlnode_t));
44,425 ( 0.76%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (217x)
   434 ( 0.01%)  	if (!node)
     .           		return first;
     .           
   868 ( 0.01%)  	node->name = strdup(n);
49,586 ( 0.85%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   868 ( 0.01%)  	node->content = strdup(v);
54,365 ( 0.93%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   217 ( 0.00%)  	node->children = NULL;
   217 ( 0.00%)  	node->attributes = NULL;
   217 ( 0.00%)  	node->next = NULL;
   217 ( 0.00%)  	node->type = CLISH_XMLNODE_ATTR;
   217 ( 0.00%)  	node->depth = 0;
     .           
     .           	return clish_expat_list_push_back(first, node);
     .           }
     .           
     .           /** Run through an expat attribute list, and create a DOM-like attribute list
     .            *
     .            * @param node parent node
     .            * @param attr NULL-terminated attribute liste
-- line 126 ----------------------------------------
-- line 127 ----------------------------------------
     .            *
     .            * Each attribute uses two slots in the expat attribute list. The first one is
     .            * used to store the name, the second one is used to store the value.
     .            */
     .           static void clish_expat_add_attrlist(clish_xmlnode_t *node, const char **attr)
     .           {
     .           	int i;
     .           
 1,173 ( 0.02%)  	for (i = 0; attr[i]; i += 2) {
   434 ( 0.01%)  		node->attributes = clish_expat_add_attr(node->attributes,
     .           			attr[i], attr[i+1]);
     .           	}
     .           }
     .           
     .           /** Generic make_node() function
     .            *
     .            * @param parent XML parent node
     .            * @param type XML node type
-- line 144 ----------------------------------------
-- line 147 ----------------------------------------
     .            * @param attr attribute list
     .            * @return a new node or NULL on error
     .            */
     .           static clish_xmlnode_t *clish_expat_make_node(clish_xmlnode_t *parent,
     .           					      clish_xmlnodetype_e type,
     .           					      const char *n,
     .           					      const char *v,
     .           					      const char **attr)
 7,428 ( 0.13%)  {
     .           	clish_xmlnode_t *node;
     .           
 2,476 ( 0.04%)  	node = malloc(sizeof(clish_xmlnode_t));
122,324 ( 2.09%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (619x)
 1,238 ( 0.02%)  	if (!node)
     .           		return NULL;
 2,770 ( 0.05%)  	node->name = n ? strdup(n) : NULL;
18,524 ( 0.32%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (98x)
 4,039 ( 0.07%)  	node->content = v ? strdup(v) : NULL;
127,516 ( 2.18%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (521x)
   619 ( 0.01%)  	node->children = NULL;
   619 ( 0.01%)  	node->attributes = NULL;
   619 ( 0.01%)  	node->next = NULL;
 1,238 ( 0.02%)  	node->parent = parent;
 3,085 ( 0.05%)  	node->doc = parent ? parent->doc : NULL;
 2,446 ( 0.04%)  	node->depth = parent ? parent->depth + 1 : 0;
   619 ( 0.01%)  	node->type = type;
     .           
 1,238 ( 0.02%)  	if (attr)
     .           		clish_expat_add_attrlist(node, attr);
     .           
   152 ( 0.00%)  	if (parent)
 2,436 ( 0.04%)  		parent->children = clish_expat_list_push_back(parent->children, node);
     .           
     .           	return node;
 5,571 ( 0.10%)  }
     .           
     .           /** Add a new XML root
     .            *
     .            * @param doc XML document
     .            * @param el root node name
     .            * @param attr expat attribute list
     .            * @return a new root element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_root(clish_xmldoc_t *doc, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   314 ( 0.01%)  	node = clish_expat_make_node(NULL, CLISH_XMLNODE_ELM, el, NULL, attr);
25,901 ( 0.44%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (10x)
    20 ( 0.00%)  	if (!node)
     .           		return doc->root;
     .           
    30 ( 0.00%)  	doc->root = clish_expat_list_push_back(doc->root, node);
     .           
     .           	return node;
     .           }
     .           
     .           /** Add a new XML element as a child
     .            *
     .            * @param cur parent XML element
     .            * @param el element name
     .            * @param attr expat attribute list
     .            * @return a new XMl element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_child(clish_xmlnode_t *cur, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   176 ( 0.00%)  	node = clish_expat_make_node(cur, CLISH_XMLNODE_ELM, el, NULL, attr);
176,849 ( 3.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (88x)
   176 ( 0.00%)  	if (!node)
     .           		return cur;
     .           
     .           	return node;
     .           }
     .           
     .           /** Expat handler: element content
     .            *
     .            * @param data user data
     .            * @param s content (not nul-termainated)
     .            * @param len content length
     .            */
     .           static void clish_expat_chardata_handler(void *data, const char *s, int len)
 2,605 ( 0.04%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
 2,605 ( 0.04%)  	if (doc->current) {
 2,605 ( 0.04%)  		char *content = malloc(len + 1);
66,819 ( 1.14%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (521x)
 2,609 ( 0.04%)  		strncpy(content, s, len);
18,080 ( 0.31%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (520x)
 1,541 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   521 ( 0.01%)  		content[len] = '\0';
     .           
 3,126 ( 0.05%)  		clish_expat_make_node(doc->current, CLISH_XMLNODE_TEXT, NULL, content, NULL);
290,424 ( 4.95%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (521x)
     .           		/*
     .           		 * the previous call is a bit too generic, and strdup() content
     .           		 * so we need to free out own version of content.
     .           		 */
 1,567 ( 0.03%)  		free(content);
45,760 ( 0.78%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (520x)
 1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           	}
 2,605 ( 0.04%)  }
     .           
     .           /** Expat handler: start XML element
     .            *
     .            * @param data user data
     .            * @param el element name (nul-terminated)
     .            * @param attr expat attribute list
     .            */
     .           static void clish_expat_element_start(void *data, const char *el, const char **attr)
   490 ( 0.01%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (!doc->current) {
     .           		doc->current = clish_expat_add_root(doc, el, attr);
     .           	} else {
    98 ( 0.00%)  		doc->current = clish_expat_add_child(doc->current, el, attr);
     .           	}
   392 ( 0.01%)  }
     .           
     .           /** Expat handler: end XML element
     .            *
     .            * @param data user data
     .            * @param el element name
     .            */
     .           static void clish_expat_element_end(void *data, const char *el)
     .           {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (doc->current) {
   294 ( 0.01%)  		doc->current = doc->current->parent;
     .           	}
     .           
     .           	el = el; /* Happy compiler */
     .           }
     .           
     .           /** Free a node, its children and its attributes
     .            *
     .            * @param node node to free
     .            */
     .           static void clish_expat_free_node(clish_xmlnode_t *cur)
 3,344 ( 0.06%)  {
     .           	clish_xmlnode_t *node;
     .           	clish_xmlnode_t *first;
     .           
 2,584 ( 0.04%)  	if (cur->attributes) {
     .           		first = cur->attributes;
   651 ( 0.01%)  		while (first) {
     .           			node = first;
   217 ( 0.00%)  			first = first->next;
   217 ( 0.00%)  			clish_expat_free_node(node);
 8,700 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (30x)
     .           		}
     .           	}
 2,569 ( 0.04%)  	if (cur->children) {
     .           		first = cur->children;
 1,827 ( 0.03%)  		while (first) {
     .           			node = first;
   609 ( 0.01%)  			first = first->next;
   609 ( 0.01%)  			clish_expat_free_node(node);
179,286 ( 3.06%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (174x)
     .           		}
     .           	}
 2,508 ( 0.04%)  	if (cur->name)
   630 ( 0.01%)  		free(cur->name);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.04%)  	if (cur->content)
 1,476 ( 0.03%)  		free(cur->content);
64,973 ( 1.11%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (738x)
 2,508 ( 0.04%)  	free(cur);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.04%)  }
     .           
     .           /*
     .            * Public interface
     .            */
     .           
     .           int clish_xmldoc_start(void)
     .           {
     .           	return 0;
-- line 313 ----------------------------------------
-- line 314 ----------------------------------------
     .           }
     .           
     .           int clish_xmldoc_stop(void)
     .           {
     .           	return 0;
     .           }
     .           
     .           clish_xmldoc_t *clish_xmldoc_read(const char *filename)
    70 ( 0.00%)  {
     .           	clish_xmldoc_t *doc;
     .           	struct stat sb;
     .           	int fd;
     .           	char *buffer;
     .           	XML_Parser parser;
     .           	int rb;
     .           
    54 ( 0.00%)  	doc = malloc(sizeof(clish_xmldoc_t));
 1,728 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,269 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc (9x)
    20 ( 0.00%)  	if (!doc)
     .           		return NULL;
     .           	memset(doc, 0, sizeof(clish_xmldoc_t));
    44 ( 0.00%)  	doc->filename = strdup(filename);
 1,751 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,723 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (9x)
    44 ( 0.00%)  	parser = XML_ParserCreate(NULL);
 2,156 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
95,826 ( 1.63%)  => ???:XML_ParserCreate (9x)
    20 ( 0.00%)  	if (!parser)
     .           		goto error_parser_create;
    44 ( 0.00%)  	XML_SetUserData(parser, doc);
   949 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    54 ( 0.00%)  => ???:XML_SetUserData (9x)
    44 ( 0.00%)  	XML_SetCharacterDataHandler(parser, clish_expat_chardata_handler);
 1,060 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    18 ( 0.00%)  => ???:XML_SetCharacterDataHandler (9x)
    54 ( 0.00%)  	XML_SetElementHandler(parser,
 1,011 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    27 ( 0.00%)  => ???:XML_SetElementHandler (9x)
     .           		clish_expat_element_start,
     .           		clish_expat_element_end);
     .           
    64 ( 0.00%)  	fd = open(filename, O_RDONLY);
 1,430 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:open (9x)
    20 ( 0.00%)  	if (fd < 0)
     .           		goto error_open;
     .           	fstat(fd, &sb);
    50 ( 0.00%)  	buffer = malloc(sb.st_size+1);
 2,681 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (10x)
    54 ( 0.00%)  	rb = read(fd, buffer, sb.st_size);
 1,446 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (9x)
    20 ( 0.00%)  	if (rb < 0) {
     .           		close(fd);
     .           		goto error_parse;
     .           	}
    20 ( 0.00%)  	buffer[sb.st_size] = 0;
    34 ( 0.00%)  	close(fd);
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:close (9x)
     .           
    84 ( 0.00%)  	if (!XML_Parse(parser, buffer, sb.st_size, 1))
1,302,462 (22.22%)  => ???:XML_Parse (9x)
112,859 ( 1.93%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           		goto error_parse;
     .           
    34 ( 0.00%)  	XML_ParserFree(parser);
 6,192 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
46,609 ( 0.80%)  => ???:XML_ParserFree (9x)
    30 ( 0.00%)  	free(buffer);
 1,380 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           
     .           	return doc;
     .           
     .           error_parse:
     .           	free(buffer);
     .           
     .           error_open:
     .           	XML_ParserFree(parser);
     .           
     .           error_parser_create:
     .           	clish_xmldoc_release(doc);
     .           
     .           	return NULL;
    80 ( 0.00%)  }
     .           
     .           void clish_xmldoc_release(clish_xmldoc_t *doc)
    20 ( 0.00%)  {
    20 ( 0.00%)  	if (doc) {
     .           		clish_xmlnode_t *node;
    70 ( 0.00%)  		while (doc->root) {
     .           			node = doc->root;
    20 ( 0.00%)  			doc->root = node->next;
    10 ( 0.00%)  			clish_expat_free_node(node);
191,026 ( 3.26%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node (10x)
     .           		}
    30 ( 0.00%)  		if (doc->filename)
    20 ( 0.00%)  			free(doc->filename);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
    30 ( 0.00%)  		free(doc);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           	}
    10 ( 0.00%)  }
     .           
     .           int clish_xmldoc_is_valid(clish_xmldoc_t *doc)
     .           {
    53 ( 0.00%)  	return doc && doc->root;
    12 ( 0.00%)  }
     .           
     .           int clish_xmldoc_error_caps(clish_xmldoc_t *doc)
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return CLISH_XMLERR_NOCAPS;
     .           }
     .           
-- line 403 ----------------------------------------
-- line 419 ----------------------------------------
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return "";
     .           }
     .           
     .           int clish_xmlnode_get_type(clish_xmlnode_t *node)
     .           {
 1,281 ( 0.02%)  	if (node)
   427 ( 0.01%)  		return node->type;
     .           	return CLISH_XMLNODE_UNKNOWN;
   427 ( 0.01%)  }
     .           
     .           clish_xmlnode_t *clish_xmldoc_get_root(clish_xmldoc_t *doc)
     .           {
    20 ( 0.00%)  	if (doc)
    20 ( 0.00%)  		return doc->root;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_parent(clish_xmlnode_t *node)
     .           {
    80 ( 0.00%)  	if (node)
    80 ( 0.00%)  		return node->parent;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_next_child(clish_xmlnode_t *parent,
     .           					  clish_xmlnode_t *curchild)
     .           {
   956 ( 0.02%)  	if (curchild)
   834 ( 0.01%)  		return curchild->next;
   122 ( 0.00%)  	if (parent)
   122 ( 0.00%)  		return parent->children;
     .           	return NULL;
     .           }
     .           
     .           char *clish_xmlnode_fetch_attr(clish_xmlnode_t *node,
     .           			       const char *attrname)
 2,648 ( 0.05%)  {
 1,324 ( 0.02%)  	if (node) {
   662 ( 0.01%)  		clish_xmlnode_t *n = node->attributes;
 4,292 ( 0.07%)  		while (n) {
 9,924 ( 0.17%)  			if (strcmp(n->name, attrname) == 0)
32,589 ( 0.56%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (1,654x)
   187 ( 0.00%)  				return n->content;
 1,467 ( 0.03%)  			n = n->next;
     .           		}
     .           	}
   475 ( 0.01%)  	return NULL;
 2,648 ( 0.05%)  }
     .           
     .           int clish_xmlnode_get_content(clish_xmlnode_t *node, char *content,
     .           			      unsigned int *contentlen)
   182 ( 0.00%)  {
     .           	unsigned int minlen = 1;
     .           
   208 ( 0.00%)  	if (node && content && contentlen) {
    26 ( 0.00%)  		clish_xmlnode_t *children = node->children;
   505 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   576 ( 0.01%)  				minlen += strlen(children->content);
 5,074 ( 0.09%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (192x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    52 ( 0.00%)  		if (minlen >= *contentlen) {
     .           			*contentlen = minlen + 1;
     .           			return -E2BIG;
     .           		}
     .           		children = node->children;
    52 ( 0.00%)  		*content = 0;
   407 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   580 ( 0.01%)  				strcat(content, children->content);
29,191 ( 0.50%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned (191x)
 1,492 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    26 ( 0.00%)  		return 0;
     .           	}
     .           
     .           	return -EINVAL;
   156 ( 0.00%)  }
     .           
     .           int clish_xmlnode_get_name(clish_xmlnode_t *node, char *name,
     .           	unsigned int *namelen)
   552 ( 0.01%)  {
 1,104 ( 0.02%)  	if (node && name && namelen) {
 1,108 ( 0.02%)  		if (strlen(node->name) >= *namelen) {
 2,192 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (137x)
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			*namelen = strlen(node->name) + 1;
     .           			return -E2BIG;
     .           		}
   828 ( 0.01%)  		snprintf(name, *namelen, "%s", node->name);
72,205 ( 1.23%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (138x)
   414 ( 0.01%)  		name[*namelen - 1] = '\0';
   138 ( 0.00%)  		return 0;
     .           	}
     .           	return -EINVAL;
   552 ( 0.01%)  }
     .           
     .           void clish_xmlnode_print(clish_xmlnode_t *node, FILE *out)
     .           {
     .           	if (node) {
     .           		int i;
     .           		clish_xmlnode_t *a;
     .           		for (i=0; i<node->depth; ++i) {
     .           			fprintf(out, "  ");
-- line 520 ----------------------------------------
-- line 525 ----------------------------------------
     .           			fprintf(out, " %s='%s'", a->name, a->content);
     .           			a = a->next;
     .           		}
     .           		fprintf(out, ">...");
     .           	}
     .           }
     .           
     .           void clish_xml_release(void *p)
   661 ( 0.01%)  {
     .           	p = p; /* Happy compiler */
     .           	/* nothing to release */
     .           }
     .           
     .           #endif /* HAVE_LIB_EXPAT */
     .           

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/view/view.c
--------------------------------------------------------------------------------
Ir             

-- line 17 ----------------------------------------
    .           /*---------------------------------------------------------
    .            * PRIVATE META FUNCTIONS
    .            *--------------------------------------------------------- */
    .           int clish_view_bt_compare(const void *clientnode, const void *clientkey)
    .           {
    .           	const clish_view_t *this = clientnode;
    .           	const char *key = clientkey;
    .           
  153 ( 0.00%)  	return strcmp(this->name, key);
1,483 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (51x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void clish_view_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
    9 ( 0.00%)  {
    .           	const clish_view_t *this = clientnode;
    .           
    .           	/* fill out the opaque key */
   40 ( 0.00%)  	strcpy((char *)key, this->name);
1,495 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  179 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (8x)
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PRIVATE METHODS
    .            *--------------------------------------------------------- */
    .           static void clish_view_init(clish_view_t * this, const char *name, const char *prompt)
    .           {
    .           	/* set up defaults */
   20 ( 0.00%)  	this->name = lub_string_dup(name);
  889 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
    5 ( 0.00%)  	this->prompt = NULL;
    5 ( 0.00%)  	this->depth = 0;
    5 ( 0.00%)  	this->restore = CLISH_RESTORE_NONE;
    5 ( 0.00%)  	this->access = NULL;
    .           
    .           	/* Be a good binary tree citizen */
   15 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
   25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (5x)
    .           
    .           	/* initialise the tree of commands for this view */
   44 ( 0.00%)  	lub_bintree_init(&this->tree,
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (5x)
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_offset (4x)
    .           		clish_command_bt_offset(),
    .           		clish_command_bt_compare, clish_command_bt_getkey);
    .           
    .           	/* Initialise the list of namespaces.
    .           	 * It's important to add new items to the
    .           	 * tail of list.
    .           	 */
   20 ( 0.00%)  	this->nspaces = lub_list_new(NULL);
  671 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (5x)
    .           
    .           	/* set up the defaults */
   24 ( 0.00%)  	clish_view__set_prompt(this, prompt);
  827 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  825 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__set_prompt (4x)
    .           
    .           	/* Initialize hotkey structures */
   19 ( 0.00%)  	this->hotkeys = clish_hotkeyv_new();
  734 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  509 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/hotkey/hotkey.c:clish_hotkeyv_new (4x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           static void clish_view_fini(clish_view_t * this)
    .           {
    .           	clish_command_t *cmd;
    .           	lub_list_node_t *iter;
    .           	clish_nspace_t *nspace;
-- line 75 ----------------------------------------
-- line 103 ----------------------------------------
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC META FUNCTIONS
    .            *--------------------------------------------------------- */
    .           size_t clish_view_bt_offset(void)
    .           {
    .           	return offsetof(clish_view_t, bt_node);
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_t *clish_view_new(const char *name, const char *prompt)
   25 ( 0.00%)  {
   20 ( 0.00%)  	clish_view_t *this = malloc(sizeof(clish_view_t));
1,181 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (5x)
    .           
   10 ( 0.00%)  	if (this)
    .           		clish_view_init(this, name, prompt);
    .           	return this;
   25 ( 0.00%)  }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC METHODS
    .            *--------------------------------------------------------- */
    .           void clish_view_delete(clish_view_t * this)
    .           {
    .           	clish_view_fini(this);
    .           	free(this);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_view_new_command(clish_view_t * this,
    .           	const char *name, const char *help)
  162 ( 0.00%)  {
    .           	/* allocate the memory for a new parameter definition */
   85 ( 0.00%)  	clish_command_t *cmd = clish_command_new(name, help);
36,792 ( 0.63%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_new (26x)
3,605 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  	assert(cmd);
    .           
    .           	/* if this is a command other than the startup command... */
   81 ( 0.00%)  	if (NULL != help) {
    .           		/* ...insert it into the binary tree for this view */
  156 ( 0.00%)  		if (-1 == lub_bintree_insert(&this->tree, cmd)) {
7,256 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (26x)
    .           			/* inserting a duplicate command is bad */
    .           			clish_command_delete(cmd);
    .           			cmd = NULL;
    .           		}
    .           	}
    .           	return cmd;
  135 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           /* This method identifies the command (if any) which provides
    .            * the longest match with the specified line of text.
    .            *
    .            * NB this comparison is case insensitive.
    .            *
    .            * this - the view instance upon which to operate
    .            * line - the command line to analyse 
    .            */
    .           clish_command_t *clish_view_resolve_prefix(clish_view_t * this,
    .           	const char *line, bool_t inherit)
  260 ( 0.00%)  {
   26 ( 0.00%)  	clish_command_t *result = NULL, *cmd;
   26 ( 0.00%)  	char *buffer = NULL;
    .           	lub_argv_t *argv;
    .           	unsigned i;
    .           
    .           	/* create a vector of arguments */
  104 ( 0.00%)  	argv = lub_argv_new(line, 0);
29,208 ( 0.50%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (26x)
    .           
  273 ( 0.00%)  	for (i = 0; i < lub_argv__get_count(argv); i++) {
   78 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (39x)
    .           		/* set our buffer to be that of the first "i" arguments  */
  266 ( 0.00%)  		lub_string_cat(&buffer, lub_argv__get_arg(argv, i));
7,494 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (30x)
  300 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (30x)
    .           
    .           		/* set the result to the longest match */
  180 ( 0.00%)  		cmd = clish_view_find_command(this, buffer, inherit);
31,494 ( 0.54%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (30x)
    .           
    .           		/* job done */
   60 ( 0.00%)  		if (!cmd)
    .           			break;
    .           		result = cmd;
    .           
    .           		/* ready for the next word */
   52 ( 0.00%)  		lub_string_cat(&buffer, " ");
3,172 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (13x)
    .           	}
    .           
    .           	/* free up our dynamic storage */
   78 ( 0.00%)  	lub_string_free(buffer);
2,016 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (26x)
   78 ( 0.00%)  	lub_argv_delete(argv);
8,440 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (26x)
    .           
    .           	return result;
  234 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_view_resolve_command(clish_view_t *this,
    .           	const char *line, bool_t inherit)
   78 ( 0.00%)  {
   56 ( 0.00%)  	clish_command_t *result = clish_view_resolve_prefix(this, line, inherit);
83,483 ( 1.42%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_prefix (25x)
1,065 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   61 ( 0.00%)  	if (result) {
   36 ( 0.00%)  		clish_action_t *action = clish_command__get_action(result);
   18 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (9x)
   40 ( 0.00%)  		clish_config_t *config = clish_command__get_config(result);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_config (8x)
   51 ( 0.00%)  		if (!clish_action__get_script(action) &&
   18 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_script (9x)
   15 ( 0.00%)  			(!clish_action__get_builtin(action)) &&
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_builtin (3x)
   19 ( 0.00%)  			(CLISH_CONFIG_NONE == clish_config__get_op(config)) &&
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config__get_op (2x)
   19 ( 0.00%)  			(!clish_command__get_param_count(result)) &&
1,435 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_param_count (2x)
    9 ( 0.00%)  			(!clish_command__get_viewname(result))) {
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_viewname (3x)
    .           			/* if this doesn't do anything we've
    .           			 * not resolved a command
    .           			 */
   20 ( 0.00%)  			result = NULL;
    .           		}
    .           	}
    .           
    .           	return result;
  130 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_view_find_command(clish_view_t * this,
    .           	const char *name, bool_t inherit)
  448 ( 0.01%)  {
    .           	clish_command_t *result = NULL;
    .           
    .           	/* Search the current view */
  168 ( 0.00%)  	result = lub_bintree_find(&this->tree, name);
37,390 ( 0.64%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (56x)
    .           
  112 ( 0.00%)  	if (inherit) {
    .           		lub_list_node_t *iter;
    .           		clish_command_t *cmd;
    .           		clish_nspace_t *nspace;
    .           
    .           		/* Iterate elements. It's important to iterate
    .           		 * items starting from tail bacause the next
    .           		 * NAMESPACE has higher priority than previous one
    .           		 * in a case then the both NAMESPACEs have the
    .           		 * commands with the same name.
    .           		 */
  180 ( 0.00%)  		for(iter = lub_list__get_tail(this->nspaces);
   60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_tail (30x)
    .           			iter; iter = lub_list_node__get_prev(iter)) {
    .           			nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
    .           			cmd = clish_nspace_find_command(nspace, name);
    .           			/* Choose the longest match */
    .           			result = clish_command_choose_longest(result, cmd);
    .           		}
    .           	}
    .           
    .           	return result;
  392 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           static const clish_command_t *find_next_completion(clish_view_t * this,
    .           		const char *iter_cmd, const char *line)
    .           {
    .           	clish_command_t *cmd;
  480 ( 0.01%)  	const char *name = "";
    .           	lub_argv_t *largv;
    .           	unsigned words;
    .           
    .           	/* build an argument vector for the line */
  400 ( 0.01%)  	largv = lub_argv_new(line, 0);
43,508 ( 0.74%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (80x)
  320 ( 0.01%)  	words = lub_argv__get_count(largv);
  160 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (80x)
    .           
    .           	/* account for trailing space */
  368 ( 0.01%)  	if (!*line || lub_ctype_isspace(line[strlen(line) - 1]))
  848 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  492 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (24x)
  299 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_isspace (23x)
   68 ( 0.00%)  		words++;
    .           
    .           	if (iter_cmd)
    .           		name = iter_cmd;
1,488 ( 0.03%)  	while ((cmd = lub_bintree_findnext(&this->tree, name))) {
193,085 ( 3.29%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext (211x)
1,047 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  712 ( 0.01%)  		name = clish_command__get_name(cmd);
  712 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (178x)
  894 ( 0.02%)  		if (words == lub_string_wordcount(name)) {
42,542 ( 0.73%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (177x)
1,058 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			/* only bother with commands of which this line is a prefix */
    .           			/* this is a completion */
  500 ( 0.01%)  			if (lub_string_nocasestr(name, line) == name)
10,224 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasestr (74x)
  901 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           				break;
    .           		}
    .           	}
    .           	/* clean up the dynamic memory */
  324 ( 0.01%)  	lub_argv_delete(largv);
14,932 ( 0.25%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (79x)
  882 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	return cmd;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t *clish_view_find_next_completion(clish_view_t * this,
    .           	const char *iter_cmd, const char *line,
    .           	clish_nspace_visibility_e field, bool_t inherit)
  960 ( 0.02%)  {
    .           	const clish_command_t *result, *cmd;
    .           	clish_nspace_t *nspace;
    .           	lub_list_node_t *iter;
    .           
    .           	/* ask local view for next command */
    .           	result = find_next_completion(this, iter_cmd, line);
    .           
  240 ( 0.00%)  	if (!inherit)
    .           		return result;
    .           
    .           	/* ask the imported namespaces for next command */
    .           
    .           	/* Iterate elements */
  564 ( 0.01%)  	for(iter = lub_list__get_tail(this->nspaces);
  914 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  158 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_tail (79x)
    .           		iter; iter = lub_list_node__get_prev(iter)) {
    .           		nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
    .           		if (!clish_nspace__get_visibility(nspace, field))
    .           			continue;
    .           		cmd = clish_nspace_find_next_completion(nspace,
    .           			iter_cmd, line, field);
    .           		if (clish_command_diff(result, cmd) > 0)
    .           			result = cmd;
    .           	}
    .           
    .           	return result;
  720 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view_insert_nspace(clish_view_t * this, clish_nspace_t * nspace)
    .           {
    .           	lub_list_add(this->nspaces, nspace);
    .           }
    .           
    .           /*--------------------------------------------------------- */
-- line 323 ----------------------------------------
-- line 331 ----------------------------------------
    .           		clish_nspace_clean_proxy((clish_nspace_t *)lub_list_node__get_data(iter));
    .           	}
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC ATTRIBUTES
    .            *--------------------------------------------------------- */
    .           lub_bintree_t * clish_view__get_command_tree(clish_view_t *this)
    5 ( 0.00%)  {
    .           	return &this->tree;
    5 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           lub_list_t * clish_view__get_nspace_tree(clish_view_t *this)
    .           {
    5 ( 0.00%)  	return this->nspaces;
    5 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_view__get_name(const clish_view_t * this)
    .           {
    .           	return this->name;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view__set_prompt(clish_view_t * this, const char *prompt)
    5 ( 0.00%)  {
   15 ( 0.00%)  	assert(!this->prompt);
   20 ( 0.00%)  	this->prompt = lub_string_dup(prompt);
  941 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
   10 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_view__get_prompt(const clish_view_t *this)
    .           {
    1 ( 0.00%)  	return this->prompt;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view__set_depth(clish_view_t * this, unsigned depth)
    .           {
    .           	this->depth = depth;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned clish_view__get_depth(const clish_view_t * this)
    .           {
    1 ( 0.00%)  	return this->depth;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view__set_restore(clish_view_t * this,
    .           	clish_view_restore_e restore)
    .           {
    .           	this->restore = restore;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_restore_e clish_view__get_restore(const clish_view_t * this)
    .           {
    1 ( 0.00%)  	return this->restore;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_view_insert_hotkey(const clish_view_t *this, const char *key, const char *cmd)
    .           {
    .           	return clish_hotkeyv_insert(this->hotkeys, key, cmd);
    .           }
    .           
    .           /*--------------------------------------------------------- */
-- line 399 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c
--------------------------------------------------------------------------------
Ir             

-- line 155 ----------------------------------------
    .           		return 1;
    .           
    .           	return 0;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void utf8_point_left(tinyrl_t * this)
    .           {
   84 ( 0.00%)  	if (!this->utf8)
    .           		return;
  122 ( 0.00%)  	while (this->point &&
   76 ( 0.00%)  		(UTF8_10 == (this->line[this->point] & UTF8_MASK)))
    .           		this->point--;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void utf8_point_right(tinyrl_t * this)
    .           {
    .           	if (!this->utf8)
    .           		return;
    .           	while ((this->point < this->end) &&
    .           		(UTF8_10 == (this->line[this->point] & UTF8_MASK)))
    .           		this->point++;
    .           }
    .           
    .           /*-------------------------------------------------------- */
  203 ( 0.00%)  static unsigned int utf8_nsyms(const tinyrl_t *this, const char *str,
    .           	unsigned int num)
    .           {
    .           	unsigned int nsym = 0;
    .           	unsigned long sym = 0;
    .           	unsigned int i = 0;
    .           
  406 ( 0.01%)  	if (!this->utf8)
    .           		return num;
    .           
3,170 ( 0.05%)  	while (i < num) {
7,224 ( 0.12%)  		if ('\0' == str[i])
    .           			break;
    .           		/* ASCII char */
2,764 ( 0.05%)  		if (!(UTF8_7BIT_MASK & str[i])) {
1,382 ( 0.02%)  			i++;
1,382 ( 0.02%)  			nsym++;
    .           			continue;
    .           		}
    .           		/* Multibyte */
    .           		i += utf8_wchar(&str[i], &sym);
    .           		if (utf8_is_cjk(sym)) /* CJK chars have double-width */
    .           			nsym += 2;
    .           		else
    .           			nsym += 1;
    .           	}
    .           
    .           	return nsym;
  203 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static void tty_set_raw_mode(tinyrl_t * this)
    .           {
    .           	struct termios new_termios;
    .           	int fd;
    .           
    6 ( 0.00%)  	if (!tinyrl_vt100__get_istream(this->term))
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
    .           		return;
    7 ( 0.00%)  	fd = fileno(tinyrl_vt100__get_istream(this->term));
    6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
    7 ( 0.00%)  	if (tcgetattr(fd, &new_termios) < 0)
   50 ( 0.00%)  => /opt/build/glibc/glibc-2.24/termios/../sysdeps/unix/sysv/linux/tcgetattr.c:tcgetattr (1x)
    .           		return;
    1 ( 0.00%)  	new_termios.c_iflag = 0;
    1 ( 0.00%)  	new_termios.c_oflag = OPOST | ONLCR;
    1 ( 0.00%)  	new_termios.c_lflag = 0;
    1 ( 0.00%)  	new_termios.c_cc[VMIN] = 1;
    1 ( 0.00%)  	new_termios.c_cc[VTIME] = 0;
    .           	/* Do the mode switch */
    9 ( 0.00%)  	(void)tcsetattr(fd, TCSADRAIN, &new_termios);
1,586 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static void tty_restore_mode(const tinyrl_t * this)
    .           {
    .           	int fd;
    .           
    5 ( 0.00%)  	if (!tinyrl_vt100__get_istream(this->term))
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
    .           		return;
    6 ( 0.00%)  	fd = fileno(tinyrl_vt100__get_istream(this->term));
    6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
    .           	/* Do the mode switch */
    6 ( 0.00%)  	(void)tcsetattr(fd, TCSADRAIN, &this->default_termios);
   70 ( 0.00%)  => /opt/build/glibc/glibc-2.24/termios/../sysdeps/unix/sysv/linux/tcsetattr.c:tcsetattr (1x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .           This is called whenever a line is edited in any way.
    .           It signals that if we are currently viewing a history line we should transfer it
    .           to the current buffer
    .           */
    .           static void changed_line(tinyrl_t * this)
   92 ( 0.00%)  {
    .           	/* if the current line is not our buffer then make it so */
  138 ( 0.00%)  	if (this->line != this->buffer) {
    .           		/* replace the current buffer with the new details */
    .           		free(this->buffer);
    .           		this->line = this->buffer = lub_string_dup(this->line);
    .           		this->buffer_size = strlen(this->buffer);
    .           		assert(this->line);
    .           	}
   92 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static int tinyrl_timeout_default(tinyrl_t *this)
    .           {
    .           	this = this; /* Happy compiler */
    .           
    .           	/* Return -1 to close session on timeout */
    .           	return -1;
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static bool_t tinyrl_key_default(tinyrl_t * this, int key)
   40 ( 0.00%)  {
    .           	bool_t result = BOOL_FALSE;
   40 ( 0.00%)  	if (key > 31) {
    .           		char tmp[2];
   40 ( 0.00%)  		tmp[0] = (key & 0xFF), tmp[1] = '\0';
    .           		/* inject this text into the buffer */
   84 ( 0.00%)  		result = tinyrl_insert_text(this, tmp);
3,274 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,859 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text (19x)
    .           	} else {
    .           		/* Call the external hotkey analyzer */
    .           		if (this->hotkey_fn)
    .           			this->hotkey_fn(this, key);
    .           	}
    .           	return result;
   80 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_interrupt(tinyrl_t * this, int key)
    .           {
    .           	tinyrl_crlf(this);
    .           	tinyrl_delete_text(this, 0, this->end);
    .           	this->done = BOOL_TRUE;
    .           	/* keep the compiler happy */
-- line 293 ----------------------------------------
-- line 383 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_down(tinyrl_t * this, int key)
    .           {
    .           	bool_t result = BOOL_FALSE;
    .           	if (this->line != this->buffer) {
    .           		/* we are not already at the bottom */
    .           		/* the iterator will have been set up by the key_up() function */
    .           		tinyrl_history_entry_t *entry =
    2 ( 0.00%)  		    tinyrl_history_getnext(&this->hist_iter);
    .           		if (!entry) {
    .           			/* nothing more in the history list */
    .           			this->line = this->buffer;
    .           		} else {
    .           			this->line = tinyrl_history_entry__get_line(entry);
    .           		}
    .           		/* display the entry moving the insertion point
    .           		 * to the end of the line 
-- line 399 ----------------------------------------
-- line 431 ----------------------------------------
    .           	}
    .           	/* keep the compiler happy */
    .           	key = key;
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_backspace(tinyrl_t *this, int key)
   21 ( 0.00%)  {
    .           	bool_t result = BOOL_FALSE;
   84 ( 0.00%)  	if (this->point) {
   63 ( 0.00%)  		unsigned int end = --this->point;
    .           		utf8_point_left(this);
   63 ( 0.00%)  		tinyrl_delete_text(this, this->point, end);
1,470 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_delete_text (21x)
   21 ( 0.00%)  		result = BOOL_TRUE;
    .           	}
    .           	/* keep the compiler happy */
    .           	key = key;
    .           	return result;
  161 ( 0.00%)  }
  198 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_point_left.part.0 (21x)
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_backword(tinyrl_t *this, int key)
    .           {
    .           	bool_t result = BOOL_FALSE;
    .           
    .               /* remove current whitespace before cursor */
    .           	while (this->point > 0 && isspace(this->line[this->point - 1]))
-- line 458 ----------------------------------------
-- line 562 ----------------------------------------
    .           		break;
    .           	}
    .           
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_tab(tinyrl_t * this, int key)
   18 ( 0.00%)  {
    .           	bool_t result = BOOL_FALSE;
   22 ( 0.00%)  	tinyrl_match_e status = tinyrl_complete_with_extensions(this);
439,092 ( 7.49%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_complete_with_extensions (8x)
93,846 ( 1.60%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   32 ( 0.00%)  	switch (status) {
    .           	case TINYRL_COMPLETED_MATCH:
    .           	case TINYRL_MATCH:
    .           		/* everything is OK with the world... */
   12 ( 0.00%)  		result = tinyrl_insert_text(this, " ");
  267 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text (3x)
    .           		break;
    .           	case TINYRL_NO_MATCH:
    .           	case TINYRL_MATCH_WITH_EXTENSIONS:
    .           	case TINYRL_AMBIGUOUS:
    .           	case TINYRL_COMPLETED_AMBIGUOUS:
    .           		/* oops don't change the result and let the bell ring */
    .           		break;
    .           	}
    .           	/* keep the compiler happy */
    .           	key = key;
    .           	return result;
   21 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           static void tinyrl_fini(tinyrl_t * this)
    .           {
    .           	/* delete the history session */
    .           	tinyrl_history_delete(this->history);
    .           
    .           	/* delete the terminal session */
-- line 598 ----------------------------------------
-- line 606 ----------------------------------------
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void tinyrl_init(tinyrl_t * this, FILE * istream, FILE * ostream,
    .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
    .           {
    .           	int i;
    .           
  512 ( 0.01%)  	for (i = 0; i < NUM_HANDLERS; i++) {
  512 ( 0.01%)  		this->handlers[i] = tinyrl_key_default;
    .           	}
    .           	/* Default handlers */
    2 ( 0.00%)  	this->handlers[KEY_CR] = tinyrl_key_crlf;
    1 ( 0.00%)  	this->handlers[KEY_LF] = tinyrl_key_crlf;
    2 ( 0.00%)  	this->handlers[KEY_ETX] = tinyrl_key_interrupt;
    2 ( 0.00%)  	this->handlers[KEY_DEL] = tinyrl_key_backspace;
    1 ( 0.00%)  	this->handlers[KEY_BS] = tinyrl_key_backspace;
    2 ( 0.00%)  	this->handlers[KEY_EOT] = tinyrl_key_delete;
    2 ( 0.00%)  	this->handlers[KEY_FF] = tinyrl_key_clear_screen;
    2 ( 0.00%)  	this->handlers[KEY_NAK] = tinyrl_key_erase_line;
    2 ( 0.00%)  	this->handlers[KEY_SOH] = tinyrl_key_start_of_line;
    2 ( 0.00%)  	this->handlers[KEY_ENQ] = tinyrl_key_end_of_line;
    2 ( 0.00%)  	this->handlers[KEY_VT] = tinyrl_key_kill;
    2 ( 0.00%)  	this->handlers[KEY_EM] = tinyrl_key_yank;
    2 ( 0.00%)  	this->handlers[KEY_HT] = tinyrl_key_tab;
    2 ( 0.00%)  	this->handlers[KEY_ETB] = tinyrl_key_backword;
    .           
    1 ( 0.00%)  	this->line = NULL;
    1 ( 0.00%)  	this->max_line_length = 0;
    1 ( 0.00%)  	this->prompt = NULL;
    1 ( 0.00%)  	this->prompt_size = 0;
    1 ( 0.00%)  	this->buffer = NULL;
    1 ( 0.00%)  	this->buffer_size = 0;
    1 ( 0.00%)  	this->done = BOOL_FALSE;
    1 ( 0.00%)  	this->completion_over = BOOL_FALSE;
    1 ( 0.00%)  	this->point = 0;
    1 ( 0.00%)  	this->end = 0;
    1 ( 0.00%)  	this->attempted_completion_function = complete_fn;
    2 ( 0.00%)  	this->timeout_fn = tinyrl_timeout_default;
    1 ( 0.00%)  	this->keypress_fn = NULL;
    1 ( 0.00%)  	this->hotkey_fn = NULL;
    1 ( 0.00%)  	this->state = 0;
    1 ( 0.00%)  	this->kill_string = NULL;
    1 ( 0.00%)  	this->echo_char = '\0';
    1 ( 0.00%)  	this->echo_enabled = BOOL_TRUE;
    1 ( 0.00%)  	this->last_buffer = NULL;
    1 ( 0.00%)  	this->last_point = 0;
    1 ( 0.00%)  	this->last_line_size = 0;
    1 ( 0.00%)  	this->utf8 = BOOL_FALSE;
    .           
    .           	/* create the vt100 terminal */
    9 ( 0.00%)  	this->term = tinyrl_vt100_new(NULL, ostream);
  917 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    8 ( 0.00%)  	tinyrl__set_istream(this, istream);
1,547 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    8 ( 0.00%)  	this->last_width = tinyrl_vt100__get_width(this->term);
3,714 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* create the history */
    8 ( 0.00%)  	this->history = tinyrl_history_new(stifle);
1,742 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_printf(const tinyrl_t * this, const char *fmt, ...)
    7 ( 0.00%)  {
    .           	va_list args;
    .           	int len;
    .           
    6 ( 0.00%)  	va_start(args, fmt);
    8 ( 0.00%)  	len = tinyrl_vt100_vprintf(this->term, fmt, args);
18,066 ( 0.31%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	va_end(args);
    .           
    .           	return len;
    2 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_delete(tinyrl_t * this)
    .           {
    .           	assert(this);
    .           	if (this) {
    .           		/* let the object tidy itself up */
    .           		tinyrl_fini(this);
-- line 684 ----------------------------------------
-- line 691 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           
    .           /*#####################################
    .            * EXPORTED INTERFACE
    .            *##################################### */
    .           /*----------------------------------------------------------------------- */
    .           int tinyrl_getchar(const tinyrl_t * this)
    .           {
  181 ( 0.00%)  	return tinyrl_vt100_getchar(this->term);
2,726 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_getchar (58x)
2,231 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static void tinyrl_internal_print(const tinyrl_t * this, const char *text)
    .           {
  210 ( 0.00%)  	if (this->echo_enabled) {
    .           		/* simply echo the line */
  490 ( 0.01%)  		tinyrl_vt100_printf(this->term, "%s", text);
26,542 ( 0.45%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (70x)
    .           	} else {
    .           		/* replace the line with echo char if defined */
    .           		if (this->echo_char) {
    .           			unsigned int i = strlen(text);
    .           			while (i--) {
    .           				tinyrl_vt100_printf(this->term, "%c",
    .           					this->echo_char);
    .           			}
    .           		}
    .           	}
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
  264 ( 0.00%)  static void tinyrl_internal_position(const tinyrl_t *this, int prompt_len,
    .           	int line_len, unsigned int width)
    .           {
    .           	int rows, cols;
    .           
  594 ( 0.01%)  	rows = ((line_len + prompt_len) / width) - (prompt_len / width);
   66 ( 0.00%)  	cols = ((line_len + prompt_len) % width) - (prompt_len % width);
  132 ( 0.00%)  	if (cols > 0)
   88 ( 0.00%)  		tinyrl_vt100_cursor_back(this->term, cols);
16,060 ( 0.27%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_cursor_back (20x)
1,578 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   45 ( 0.00%)  	else if (cols < 0)
    .           		tinyrl_vt100_cursor_forward(this->term, -cols);
  132 ( 0.00%)  	if (rows > 0)
    .           		tinyrl_vt100_cursor_up(this->term, rows);
   66 ( 0.00%)  	else if (rows < 0)
    .           		tinyrl_vt100_cursor_down(this->term, -rows);
  264 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           /* Jump to first free line after current multiline input   */
    .           void tinyrl_multi_crlf(const tinyrl_t * this)
    6 ( 0.00%)  {
    5 ( 0.00%)  	unsigned int line_size = strlen(this->last_buffer);
   16 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (1x)
    5 ( 0.00%)  	unsigned int line_len = utf8_nsyms(this, this->last_buffer, line_size);
   63 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (1x)
    4 ( 0.00%)  	unsigned int count = utf8_nsyms(this, this->last_buffer, this->last_point);
   63 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (1x)
    .           
    5 ( 0.00%)  	tinyrl_internal_position(this, this->prompt_len + line_len,
   24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_internal_position.isra.5 (1x)
    2 ( 0.00%)  		- (line_len - count), this->last_width);
    3 ( 0.00%)  	tinyrl_crlf(this);
  384 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_crlf (1x)
    3 ( 0.00%)  	tinyrl_vt100_oflush(this->term);
   73 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (1x)
    5 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           void tinyrl_redisplay(tinyrl_t * this)
  560 ( 0.01%)  {
  350 ( 0.01%)  	unsigned int line_size = strlen(this->line);
1,300 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (70x)
  350 ( 0.01%)  	unsigned int line_len = utf8_nsyms(this, this->line, line_size);
5,819 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (70x)
  280 ( 0.00%)  	unsigned int width = tinyrl_vt100__get_width(this->term);
2,310 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_width (70x)
    5 ( 0.00%)  	unsigned int count, eq_chars = 0;
    .           	int cols;
    .           
    .           	/* Prepare print position */
  405 ( 0.01%)  	if (this->last_buffer && (width == this->last_width)) {
    .           		unsigned int eq_len = 0;
    .           		/* If line and last line have the equal chars at begining */
  264 ( 0.00%)  		eq_chars = lub_string_equal_part(this->line, this->last_buffer,
6,248 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_equal_part (64x)
  849 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			this->utf8);
  585 ( 0.01%)  		eq_len = utf8_nsyms(this, this->last_buffer, eq_chars);
5,262 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (65x)
  325 ( 0.01%)  		count = utf8_nsyms(this, this->last_buffer, this->last_point);
5,497 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (65x)
  390 ( 0.01%)  		tinyrl_internal_position(this, this->prompt_len + eq_len,
19,265 ( 0.33%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_internal_position.isra.5 (65x)
  130 ( 0.00%)  			count - eq_len, width);
    .           	} else {
    .           		/* Prepare to resize */
   10 ( 0.00%)  		if (width != this->last_width) {
    .           			tinyrl_vt100_next_line(this->term);
    .           			tinyrl_vt100_erase_down(this->term);
    .           		}
   39 ( 0.00%)  		tinyrl_vt100_printf(this->term, "%s", this->prompt);
1,648 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (4x)
1,163 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* Print current line */
   70 ( 0.00%)  	tinyrl_internal_print(this, this->line + eq_chars);
  350 ( 0.01%)  	cols = (this->prompt_len + line_len) % width;
  140 ( 0.00%)  	if (!cols && (line_size - eq_chars))
    .           		tinyrl_vt100_next_line(this->term);
    .           	/* Erase down if current line is shorter than previous one */
  140 ( 0.00%)  	if (this->last_line_size > line_size)
   88 ( 0.00%)  		tinyrl_vt100_erase_down(this->term);
8,600 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_erase_down (20x)
1,189 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	/* Move the cursor to the insertion point */
  210 ( 0.00%)  	if (this->point < line_size) {
    .           		unsigned int pre_len = utf8_nsyms(this,
    .           			this->line, this->point);
    .           		count = utf8_nsyms(this, this->line + this->point,
    .           			line_size - this->point);
    .           		tinyrl_internal_position(this, this->prompt_len + pre_len,
    .           			count, width);
    .           	}
    .           
    .           	/* Update the display */
  214 ( 0.00%)  	tinyrl_vt100_oflush(this->term);
10,917 ( 0.19%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (69x)
2,407 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Save the last line buffer */
  210 ( 0.00%)  	lub_string_free(this->last_buffer);
5,895 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (70x)
  280 ( 0.00%)  	this->last_buffer = lub_string_dup(this->line);
11,008 ( 0.19%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (70x)
  140 ( 0.00%)  	this->last_point = this->point;
   70 ( 0.00%)  	this->last_width = width;
   70 ( 0.00%)  	this->last_line_size = line_size;
  560 ( 0.01%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           tinyrl_t *tinyrl_new(FILE * istream, FILE * ostream,
    .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
    9 ( 0.00%)  {
    .           	tinyrl_t *this = NULL;
    .           
    8 ( 0.00%)  	this = malloc(sizeof(tinyrl_t));
1,783 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  	if (this)
    .           		tinyrl_init(this, istream, ostream, stifle, complete_fn);
    .           
    .           	return this;
    7 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static char *internal_insertline(tinyrl_t * this, char *buffer)
    .           {
    .           	char *p;
    .           	char *s = buffer;
    .           
    .           	/* strip any spurious '\r' or '\n' */
-- line 828 ----------------------------------------
-- line 843 ----------------------------------------
    .           	tinyrl_redisplay(this);
    .           
    .           	return s;
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static char *internal_readline(tinyrl_t * this,
    .           	void *context, const char *str)
   10 ( 0.00%)  {
    4 ( 0.00%)  	FILE *istream = tinyrl_vt100__get_istream(this->term);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
    .           	char *result = NULL;
    .           	int lerrno = 0;
    .           
    1 ( 0.00%)  	this->done = BOOL_FALSE;
    1 ( 0.00%)  	this->point = 0;
    1 ( 0.00%)  	this->end = 0;
    5 ( 0.00%)  	this->buffer = lub_string_dup("");
  156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    4 ( 0.00%)  	this->buffer_size = strlen(this->buffer);
   16 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (1x)
    1 ( 0.00%)  	this->line = this->buffer;
    1 ( 0.00%)  	this->context = context;
    .           
    .           	/* Interactive session */
    5 ( 0.00%)  	if (this->isatty && !str) {
    1 ( 0.00%)  		unsigned int utf8_cont = 0; /* UTF-8 continue bytes */
    1 ( 0.00%)  		unsigned int esc_cont = 0; /* Escape sequence continues */
    .           		char esc_seq[10]; /* Buffer for ESC sequence */
    1 ( 0.00%)  		char *esc_p = esc_seq;
    .           
    .           		/* Set the terminal into raw mode */
    .           		tty_set_raw_mode(this);
    7 ( 0.00%)  		tinyrl_reset_line_state(this);
6,547 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
  121 ( 0.00%)  		while (!this->done) {
    .           			int key;
    .           
  240 ( 0.00%)  			key = tinyrl_getchar(this);
2,949 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,900 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_getchar (58x)
    .           
    .           			/* Error || EOF || Timeout */
  118 ( 0.00%)  			if (key < 0) {
    .           				if ((VT100_TIMEOUT == key) &&
    .           					!this->timeout_fn(this))
    .           					continue;
    .           				/* It's time to finish the session */
    .           				this->done = BOOL_TRUE;
    .           				this->line = NULL;
    .           				lerrno = ENOENT;
    .           				continue;
    .           			}
    .           
    .           			/* Real key pressed */
    .           			/* Common callback for any key */
  177 ( 0.00%)  			if (this->keypress_fn)
  177 ( 0.00%)  				this->keypress_fn(this, key);
1,888 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_wdog.c:clish_shell_keypress_fn (59x)
    .           
    .           			/* Check for ESC sequence. It's a special case. */
  354 ( 0.01%)  			if (!esc_cont && (key == KEY_ESC)) {
    .           				esc_cont = 1; /* Start ESC sequence */
    .           				esc_p = esc_seq;
    .           				continue;
    .           			}
  118 ( 0.00%)  			if (esc_cont) {
    .           				/* Broken sequence */
    3 ( 0.00%)  				if (esc_p >= (esc_seq + sizeof(esc_seq) - 1)) {
    .           					esc_cont = 0;
    .           					continue;
    .           				}
    .           				/* Dump the control sequence into sequence buffer
    .           				   ANSI standard control sequences will end
    .           				   with a character between 64 - 126 */
    .           				*esc_p = key & 0xff;
    .           				esc_p++;
-- line 913 ----------------------------------------
-- line 917 ----------------------------------------
    .           					tinyrl_escape_seq(this, esc_seq);
    .           					esc_cont = 0;
    .           					tinyrl_redisplay(this);
    .           				}
    .           				continue;
    .           			}
    .           
    .           			/* Call the handler for this key */
  354 ( 0.01%)  			if (!this->handlers[key](this, key))
533,310 ( 9.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_tab (9x)
39,255 ( 0.67%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_key_space (1x)
13,002 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_key_enter (1x)
5,417 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_default (20x)
2,165 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_backspace (28x)
   60 ( 0.00%)  				tinyrl_ding(this);
1,959 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,345 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_ding (13x)
  177 ( 0.00%)  			if (this->done) /* Some handler set the done flag */
    .           				continue; /* It will break the loop */
    .           
  174 ( 0.00%)  			if (this->utf8) {
  116 ( 0.00%)  				if (!(UTF8_7BIT_MASK & key)) /* ASCII char */
    .           					utf8_cont = 0;
    .           				else if (utf8_cont && (UTF8_10 == (key & UTF8_MASK))) /* Continue byte */
    .           					utf8_cont--;
    .           				else if (UTF8_11 == (key & UTF8_MASK)) { /* First byte of multibyte char */
    .           					/* Find out number of char's bytes */
    .           					int b = key;
    .           					utf8_cont = 0;
    .           					while ((utf8_cont < 6) && (UTF8_10 != (b & UTF8_MASK))) {
-- line 939 ----------------------------------------
-- line 941 ----------------------------------------
    .           						b = b << 1;
    .           					}
    .           				}
    .           			}
    .           			/* For non UTF-8 encoding the utf8_cont is always 0.
    .           			   For UTF-8 it's 0 when one-byte symbol or we get
    .           			   all bytes for the current multibyte character. */
    .           			if (!utf8_cont)
  348 ( 0.01%)  				tinyrl_redisplay(this);
103,360 ( 1.76%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay (58x)
    .           		}
    .           		/* If the last character in the line (other than NULL)
    .           		   is a space remove it. */
   14 ( 0.00%)  		if (this->end && this->line && isspace(this->line[this->end - 1]))
    3 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (1x)
    .           			tinyrl_delete_text(this, this->end - 1, this->end);
    .           		/* Restores the terminal mode */
    .           		tty_restore_mode(this);
    .           
    .           	/* Non-interactive session */
    .           	} else {
    .           		char *s = NULL, buffer[80];
    .           		size_t len = sizeof(buffer);
-- line 961 ----------------------------------------
-- line 987 ----------------------------------------
    .           		 * error from fgets.
    .           		 */
    .           		if (this->line && !this->handlers[KEY_LF](this, KEY_LF)) {
    .           			/* an issue has occured */
    .           			this->line = NULL;
    .           			lerrno = ENOEXEC;
    .           		}
    .           		if (str)
    1 ( 0.00%)  			lub_string_free(tmp);
    .           	}
    .           	/*
    .           	 * duplicate the string for return to the client 
    .           	 * we have to duplicate as we may be referencing a
    .           	 * history entry or our internal buffer
    .           	 */
    5 ( 0.00%)  	result = this->line ? lub_string_dup(this->line) : NULL;
  155 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    .           
    .           	/* free our internal buffer */
    3 ( 0.00%)  	free(this->buffer);
   88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    1 ( 0.00%)  	this->buffer = NULL;
    .           
    2 ( 0.00%)  	if (!result)
    .           		errno = lerrno; /* get saved errno */
    .           	return result;
    9 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           char *tinyrl_readline(tinyrl_t * this, void *context)
    .           {
    2 ( 0.00%)  	return internal_readline(this, context, NULL);
724,911 (12.37%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:internal_readline (1x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           char *tinyrl_forceline(tinyrl_t * this, void *context, const char *line)
    .           {
    .           	return internal_readline(this, context, line);
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .            * Ensure that buffer has enough space to hold len characters,
    .            * possibly reallocating it if necessary. The function returns BOOL_TRUE
    .            * if the line is successfully extended, BOOL_FALSE if not.
    .            */
    .           bool_t tinyrl_extend_line_buffer(tinyrl_t * this, unsigned int len)
    6 ( 0.00%)  {
    .           	bool_t result = BOOL_TRUE;
    .           	char *new_buffer;
    2 ( 0.00%)  	size_t new_len = len;
    .           
    6 ( 0.00%)  	if (this->buffer_size >= len)
    2 ( 0.00%)  		return result;
    .           
    .           	/*
    .           	 * What we do depends on whether we are limited by
    .           	 * memory or a user imposed limit.
    .           	 */
    8 ( 0.00%)  	if (this->max_line_length == 0) {
    .           		/* make sure we don't realloc too often */
    2 ( 0.00%)  		if (new_len < this->buffer_size + 10)
    .           			new_len = this->buffer_size + 10;
    .           		/* leave space for terminator */
   14 ( 0.00%)  		new_buffer = realloc(this->buffer, new_len + 1);
  262 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (2x)
    .           
    4 ( 0.00%)  		if (!new_buffer) {
    .           			tinyrl_ding(this);
    .           			result = BOOL_FALSE;
    .           		} else {
    2 ( 0.00%)  			this->buffer_size = new_len;
    4 ( 0.00%)  			this->line = this->buffer = new_buffer;
    .           		}
    .           	} else {
    .           		if (new_len < this->max_line_length) {
    .           
    .           			/* Just reallocate once to the max size */
    .           			new_buffer = realloc(this->buffer,
    .           				this->max_line_length);
    .           
-- line 1064 ----------------------------------------
-- line 1072 ----------------------------------------
    .           			}
    .           		} else {
    .           			tinyrl_ding(this);
    .           			result = BOOL_FALSE;
    .           		}
    .           	}
    .           
    .           	return result;
   10 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .            * Insert text into the line at the current cursor position.
    .            */
    .           bool_t tinyrl_insert_text(tinyrl_t * this, const char *text)
  120 ( 0.00%)  {
   96 ( 0.00%)  	unsigned int delta = strlen(text);
  384 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (24x)
    .           
    .           	/*
    .           	 * If the client wants to change the line ensure that the line and buffer
    .           	 * references are in sync
    .           	 */
   48 ( 0.00%)  	changed_line(this);
  168 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:changed_line (24x)
    .           
   96 ( 0.00%)  	if ((delta + this->end) > (this->buffer_size)) {
    .           		/* extend the current buffer */
    6 ( 0.00%)  		if (BOOL_FALSE ==
   10 ( 0.00%)  			tinyrl_extend_line_buffer(this, this->end + delta))
  936 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  161 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_extend_line_buffer (1x)
    .           			return BOOL_FALSE;
    .           	}
    .           
   72 ( 0.00%)  	if (this->point < this->end) {
    .           		/* move the current text to the right (including the terminator) */
    .           		memmove(&this->buffer[this->point + delta],
    .           			&this->buffer[this->point],
    .           			(this->end - this->point) + 1);
    .           	} else {
    .           		/* terminate the string */
   72 ( 0.00%)  		this->buffer[this->end + delta] = '\0';
    .           	}
    .           
    .           	/* insert the new text */
  148 ( 0.00%)  	strncpy(&this->buffer[this->point], text, delta);
1,547 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  731 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (23x)
    .           
    .           	/* now update the indexes */
   24 ( 0.00%)  	this->point += delta;
   24 ( 0.00%)  	this->end += delta;
    .           
   24 ( 0.00%)  	return BOOL_TRUE;
   98 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /* 
    .            * A convenience function for displaying a list of strings in columnar
    .            * format on Readline's output stream. matches is the list of strings,
    .            * in argv format, such as a list of completion matches. len is the number
    .            * of strings in matches, and max is the length of the longest string in matches.
    .            * This function uses the setting of print-completions-horizontally to select
    .            * how the matches are displayed
    .            */
    .           void tinyrl_display_matches(const tinyrl_t *this,
    .           	char *const *matches, unsigned int len, size_t max)
   48 ( 0.00%)  {
   12 ( 0.00%)  	unsigned int width = tinyrl_vt100__get_width(this->term);
  132 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_width (4x)
    .           	unsigned int cols, rows;
    .           
    .           	/* Find out column and rows number */
   12 ( 0.00%)  	if (max < width)
   24 ( 0.00%)  		cols = (width + 1) / (max + 1); /* allow for a space between words */
    .           	else
    .           		cols = 1;
   20 ( 0.00%)  	rows = len / cols + 1;
    .           
    8 ( 0.00%)  	assert(matches);
    .           	if (matches) {
    .           		unsigned int r, c;
    4 ( 0.00%)  		len--, matches++; /* skip the subtitution string */
    .           		/* Print out a table of completions */
   52 ( 0.00%)  		for (r = 0; r < rows && len; r++) {
  210 ( 0.00%)  			for (c = 0; c < cols && len; c++) {
   62 ( 0.00%)  				const char *match = *matches++;
   31 ( 0.00%)  				len--;
   93 ( 0.00%)  				if ((c + 1) == cols) /* Last str in row */
   31 ( 0.00%)  					tinyrl_vt100_printf(this->term, "%s",
    .           						match);
    .           				else
  155 ( 0.00%)  					tinyrl_vt100_printf(this->term, "%-*s ",
20,742 ( 0.35%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (31x)
    .           						max, match);
    .           			}
   16 ( 0.00%)  			tinyrl_crlf(this);
1,536 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_crlf (4x)
    .           		}
    .           	}
   32 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .            * Delete the text between start and end in the current line. (inclusive)
    .            * This adjusts the rl_point and rl_end indexes appropriately.
    .            */
    .           void tinyrl_delete_text(tinyrl_t * this, unsigned int start, unsigned int end)
  176 ( 0.00%)  {
    .           	unsigned int delta;
    .           
    .           	/*
    .           	 * If the client wants to change the line ensure that the line and buffer
    .           	 * references are in sync
    .           	 */
   22 ( 0.00%)  	changed_line(this);
  154 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:changed_line (22x)
    .           
    .           	/* make sure we play it safe */
    .           	if (start > end) {
    .           		unsigned int tmp = end;
    .           		start = end;
    .           		end = tmp;
    .           	}
   44 ( 0.00%)  	if (end > this->end)
    .           		end = this->end;
    .           
   66 ( 0.00%)  	delta = (end - start) + 1;
    .           
    .           	/* move any text which is left */
  180 ( 0.00%)  	memmove(&this->buffer[start],
1,482 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  273 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy@GLIBC_2.2.5 (21x)
   88 ( 0.00%)  		&this->buffer[start + delta], this->end - end);
    .           
    .           	/* now adjust the indexs */
   66 ( 0.00%)  	if (this->point >= start) {
    .           		if (this->point > end) {
    .           			/* move the insertion point back appropriately */
  132 ( 0.00%)  			this->point -= delta;
    .           		} else {
    .           			/* move the insertion point to the start */
    .           			this->point = start;
    .           		}
    .           	}
   66 ( 0.00%)  	if (this->end > end)
   84 ( 0.00%)  		this->end -= delta;
    .           	else
    1 ( 0.00%)  		this->end = start;
    .           	/* put a terminator at the end of the buffer */
   44 ( 0.00%)  	this->buffer[this->end] = '\0';
  132 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           bool_t tinyrl_bind_key(tinyrl_t * this, int key, tinyrl_key_func_t * fn)
    .           {
    4 ( 0.00%)  	bool_t result = BOOL_FALSE;
    .           
    8 ( 0.00%)  	if ((key >= 0) && (key < 256)) {
    .           		/* set the key handling function */
    8 ( 0.00%)  		this->handlers[key] = fn;
    4 ( 0.00%)  		result = BOOL_TRUE;
    .           	}
    .           
    .           	return result;
    4 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           /*
    .            * Returns an array of strings which is a list of completions for text.
    .            * If there are no completions, returns NULL. The first entry in the
    .            * returned array is the substitution for text. The remaining entries
    .            * are the possible completions. The array is terminated with a NULL pointer.
    .            *
-- line 1234 ----------------------------------------
-- line 1286 ----------------------------------------
    .           
    .           	if (matches)
    .           		matches[offset] = NULL;
    .           	return matches;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_delete_matches(char **this)
   35 ( 0.00%)  {
    .           	char **matches = this;
  151 ( 0.00%)  	while (*matches) {
    .           		/* release the memory for each contained string */
  123 ( 0.00%)  		free(*matches++);
3,608 ( 0.06%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (41x)
    .           	}
    .           	/* release the memory for the array */
   21 ( 0.00%)  	free(this);
  616 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (7x)
   21 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_crlf(const tinyrl_t * this)
    .           {
   45 ( 0.00%)  	tinyrl_vt100_printf(this->term, "\n");
3,411 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (9x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           /*
    .            * Ring the terminal bell, obeying the setting of bell-style.
    .            */
    .           void tinyrl_ding(const tinyrl_t * this)
    .           {
   46 ( 0.00%)  	tinyrl_vt100_ding(this->term);
7,306 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_ding (13x)
1,281 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_reset_line_state(tinyrl_t * this)
   10 ( 0.00%)  {
   19 ( 0.00%)  	lub_string_free(this->last_buffer);
  795 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  360 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (4x)
    5 ( 0.00%)  	this->last_buffer = NULL;
    5 ( 0.00%)  	this->last_line_size = 0;
    .           
   19 ( 0.00%)  	tinyrl_redisplay(this);
4,974 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,476 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay (4x)
    5 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_replace_line(tinyrl_t * this, const char *text, int clear_undo)
    .           {
    .           	size_t new_len = strlen(text);
    .           
    .           	/* ignored for now */
    .           	clear_undo = clear_undo;
-- line 1335 ----------------------------------------
-- line 1344 ----------------------------------------
    .           		this->point = this->end = new_len;
    .           	}
    .           	tinyrl_redisplay(this);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static tinyrl_match_e
    .           tinyrl_do_complete(tinyrl_t * this, bool_t with_extensions)
   90 ( 0.00%)  {
    .           	tinyrl_match_e result = TINYRL_NO_MATCH;
    .           	char **matches = NULL;
    .           	unsigned int start, end;
    6 ( 0.00%)  	bool_t completion = BOOL_FALSE;
    .           	bool_t prefix = BOOL_FALSE;
    .           	int i = 0;
    .           
    .           	/* find the start and end of the current word */
   10 ( 0.00%)  	start = end = this->point;
  228 ( 0.00%)  	while (start && !isspace(this->line[start - 1]))
1,546 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   21 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (7x)
    .           		start--;
    .           
   30 ( 0.00%)  	if (this->attempted_completion_function) {
   10 ( 0.00%)  		this->completion_over = BOOL_FALSE;
   10 ( 0.00%)  		this->completion_error_over = BOOL_FALSE;
    .           		/* try and complete the current line buffer */
   60 ( 0.00%)  		matches = this->attempted_completion_function(this,
506,856 ( 8.65%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_completion (10x)
    .           			this->line, start, end);
    .           	}
    .           	if (!matches && (BOOL_FALSE == this->completion_over)) {
    .           		/* insert default completion call here... */
    .           	}
   20 ( 0.00%)  	if (!matches)
    6 ( 0.00%)  		return result;
    .           
    .           	/* identify and insert a common prefix if there is one */
   88 ( 0.00%)  	if (0 != strncmp(matches[0], &this->line[start],
1,491 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  112 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (7x)
  148 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse42.S:__strncmp_sse42 (6x)
    .           		strlen(matches[0]))) {
    .           		/*
    .           		 * delete the original text not including
    .           		 * the current insertion point character
    .           		 */
    1 ( 0.00%)  		if (this->end != end)
    3 ( 0.00%)  			end--;
    8 ( 0.00%)  		tinyrl_delete_text(this, start, end);
2,267 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  		if (BOOL_FALSE == tinyrl_insert_text(this, matches[0]))
   84 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text (1x)
    .           			return TINYRL_NO_MATCH;
    2 ( 0.00%)  		completion = BOOL_TRUE;
    .           	}
  137 ( 0.00%)  	for (i = 1; matches[i]; i++) {
    .           		/* this is just a prefix string */
  106 ( 0.00%)  		if (0 == lub_string_nocasecmp(matches[0], matches[i]))
  867 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,168 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (33x)
  116 ( 0.00%)  			prefix = BOOL_TRUE;
    .           	}
    .           	/* is there more than one completion? */
   26 ( 0.00%)  	if (matches[2]) {
    .           		char **tmp = matches;
    .           		unsigned int max, len;
    .           		max = len = 0;
  156 ( 0.00%)  		while (*tmp) {
   70 ( 0.00%)  			size_t size = strlen(*tmp++);
  560 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (35x)
    .           			len++;
   35 ( 0.00%)  			if (size > max)
  105 ( 0.00%)  				max = size;
    .           		}
   12 ( 0.00%)  		if (completion)
    .           			result = TINYRL_COMPLETED_AMBIGUOUS;
    8 ( 0.00%)  		else if (prefix)
    4 ( 0.00%)  			result = TINYRL_MATCH_WITH_EXTENSIONS;
    .           		else
    4 ( 0.00%)  			result = TINYRL_AMBIGUOUS;
    .           		if (with_extensions || !prefix) {
    .           			/* Either we always want to show extensions or
    .           			 * we haven't been able to complete the current line
    .           			 * and there is just a prefix, so let the user see the options
    .           			 */
   20 ( 0.00%)  			tinyrl_crlf(this);
1,055 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,152 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_crlf (3x)
   28 ( 0.00%)  			tinyrl_display_matches(this, matches, len, max);
10,372 ( 0.18%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
13,599 ( 0.23%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_display_matches (3x)
   16 ( 0.00%)  			tinyrl_reset_line_state(this);
5,880 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_reset_line_state (4x)
    .           		}
    .           	} else {
    .           		result = completion ?
   15 ( 0.00%)  			TINYRL_COMPLETED_MATCH : TINYRL_MATCH;
    .           	}
    .           	/* free the memory */
   25 ( 0.00%)  	tinyrl_delete_matches(matches);
2,162 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,156 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_delete_matches (6x)
    .           	/* redisplay the line */
   21 ( 0.00%)  	tinyrl_redisplay(this);
9,779 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay (7x)
    .           
    .           	return result;
   90 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           tinyrl_match_e tinyrl_complete_with_extensions(tinyrl_t * this)
    .           {
   18 ( 0.00%)  	return tinyrl_do_complete(this, BOOL_TRUE);
532,097 ( 9.08%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_do_complete (9x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           tinyrl_match_e tinyrl_complete(tinyrl_t * this)
    .           {
    2 ( 0.00%)  	return tinyrl_do_complete(this, BOOL_FALSE);
31,750 ( 0.54%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_do_complete (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void *tinyrl__get_context(const tinyrl_t * this)
    .           {
   71 ( 0.00%)  	return this->context;
   71 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *tinyrl__get_line(const tinyrl_t * this)
    .           {
    2 ( 0.00%)  	return this->line;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           tinyrl_history_t *tinyrl__get_history(const tinyrl_t * this)
    .           {
    1 ( 0.00%)  	return this->history;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_completion_over(tinyrl_t * this)
    .           {
   20 ( 0.00%)  	this->completion_over = BOOL_TRUE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_completion_error_over(tinyrl_t * this)
    .           {
    .           	this->completion_error_over = BOOL_TRUE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t tinyrl_is_completion_error_over(const tinyrl_t * this)
    .           {
    1 ( 0.00%)  	return this->completion_error_over;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_done(tinyrl_t * this)
    .           {
    2 ( 0.00%)  	this->done = BOOL_TRUE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_enable_echo(tinyrl_t * this)
    .           {
    .           	this->echo_enabled = BOOL_TRUE;
    .           }
    .           
-- line 1494 ----------------------------------------
-- line 1496 ----------------------------------------
    .           void tinyrl_disable_echo(tinyrl_t * this, char echo_char)
    .           {
    .           	this->echo_enabled = BOOL_FALSE;
    .           	this->echo_char = echo_char;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl__set_istream(tinyrl_t * this, FILE * istream)
   10 ( 0.00%)  {
   10 ( 0.00%)  	tinyrl_vt100__set_istream(this->term, istream);
  785 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__set_istream (1x)
    4 ( 0.00%)  	if (istream) {
    .           		int fd;
   14 ( 0.00%)  		this->isatty = isatty(fileno(istream)) ? BOOL_TRUE : BOOL_FALSE;
1,511 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
    .           		/* Save terminal settings to restore on exit */
    3 ( 0.00%)  		fd = fileno(istream);
    6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
    8 ( 0.00%)  		tcgetattr(fd, &this->default_termios);
1,590 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	} else
    1 ( 0.00%)  		this->isatty = BOOL_FALSE;
    7 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl__get_isatty(const tinyrl_t * this)
    .           {
    1 ( 0.00%)  	return this->isatty;
    1 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl__get_istream(const tinyrl_t * this)
    .           {
   10 ( 0.00%)  	return tinyrl_vt100__get_istream(this->term);
  815 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl__get_ostream(const tinyrl_t * this)
    .           {
    .           	return tinyrl_vt100__get_ostream(this->term);
    .           }
    .           
-- line 1533 ----------------------------------------
-- line 1534 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           const char *tinyrl__get_prompt(const tinyrl_t * this)
    .           {
    .           	return this->prompt;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_prompt(tinyrl_t *this, const char *prompt)
    5 ( 0.00%)  {
    3 ( 0.00%)  	if (this->prompt) {
    .           		lub_string_free(this->prompt);
    .           		this->prompt_size = 0;
    .           		this->prompt_len = 0;
    .           	}
    5 ( 0.00%)  	this->prompt = lub_string_dup(prompt);
  157 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    2 ( 0.00%)  	if (this->prompt) {
    8 ( 0.00%)  		this->prompt_size = strlen(this->prompt);
1,462 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  		this->prompt_len = utf8_nsyms(this, this->prompt,
   30 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (1x)
    .           			this->prompt_size);
    .           	}
    4 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl__get_utf8(const tinyrl_t * this)
    .           {
    .           	return this->utf8;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_utf8(tinyrl_t * this, bool_t utf8)
    .           {
    2 ( 0.00%)  	this->utf8 = utf8;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_timeout(tinyrl_t *this, int timeout)
    .           {
    7 ( 0.00%)  	tinyrl_vt100__set_timeout(this->term, timeout);
  777 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_timeout_fn(tinyrl_t *this,
    .           	tinyrl_timeout_fn_t *fn)
    .           {
    2 ( 0.00%)  	this->timeout_fn = fn;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_keypress_fn(tinyrl_t *this,
    .           	tinyrl_keypress_fn_t *fn)
    .           {
    2 ( 0.00%)  	this->keypress_fn = fn;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_hotkey_fn(tinyrl_t *this,
    .           	tinyrl_key_func_t *fn)
    .           {
    2 ( 0.00%)  	this->hotkey_fn = fn;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl_is_quoting(const tinyrl_t * this)
   11 ( 0.00%)  {
   11 ( 0.00%)  	bool_t result = BOOL_FALSE;
    .           	/* count the quotes upto the current insertion point */
   11 ( 0.00%)  	unsigned int i = 0;
  322 ( 0.01%)  	while (i < this->point) {
   27 ( 0.00%)  		if (result && (this->line[i] == '\\')) {
    .           			i++;
    .           			if (i >= this->point)
    .           				break;
    .           			i++;
    .           			continue;
    .           		}
  291 ( 0.00%)  		if (this->line[i++] == '"') {
    .           			result = result ? BOOL_FALSE : BOOL_TRUE;
    .           		}
    .           	}
    .           	return result;
    2 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl_is_empty(const tinyrl_t *this)
    .           {
    4 ( 0.00%)  	return (this->point == 0) ? BOOL_TRUE : BOOL_FALSE;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_limit_line_length(tinyrl_t * this, unsigned int length)
    .           {
    .           	this->max_line_length = length;
    .           }
    .           
    .           /*--------------------------------------------------------- */
-- line 1628 ----------------------------------------
-- line 1641 ----------------------------------------
    .           int tinyrl__save_history(const tinyrl_t *this, const char *fname)
    .           {
    .           	return tinyrl_history_save(this->history, fname);
    .           }
    .           
    .           /*----------------------------------------------------------*/
    .           int tinyrl__restore_history(tinyrl_t *this, const char *fname)
    .           {
    7 ( 0.00%)  	return tinyrl_history_restore(this->history, fname);
32,091 ( 0.55%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*----------------------------------------------------------*/
    .           void tinyrl__stifle_history(tinyrl_t *this, unsigned int stifle)
    .           {
    7 ( 0.00%)  	tinyrl_history_stifle(this->history, stifle);
  770 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/bin/clish.c
--------------------------------------------------------------------------------
Ir          

-- line 43 ----------------------------------------
 .           /* #define version(v) printf("%s\n", QUOTE(v)) */
 .           #define version(v) printf("%s\n", v)
 .           
 .           static void sighandler(int signo);
 .           static void help(int status, const char *argv0);
 .           
 .           /*--------------------------------------------------------- */
 .           int main(int argc, char **argv)
 9 ( 0.00%)  {
 .           	int running;
 .           	int result = -1;
 .           	clish_shell_t *shell = NULL;
 .           
 .           	/* Command line options */
 2 ( 0.00%)  	const char *socket_path = KONFD_SOCKET_PATH;
 1 ( 0.00%)  	bool_t lockless = BOOL_FALSE;
 1 ( 0.00%)  	bool_t stop_on_error = BOOL_FALSE;
 1 ( 0.00%)  	bool_t interactive = BOOL_TRUE;
 1 ( 0.00%)  	bool_t quiet = BOOL_FALSE;
 1 ( 0.00%)  	bool_t utf8 = BOOL_FALSE;
 1 ( 0.00%)  	bool_t bit8 = BOOL_FALSE;
 1 ( 0.00%)  	bool_t log = BOOL_FALSE;
 1 ( 0.00%)  	int log_facility = LOG_LOCAL0;
 1 ( 0.00%)  	bool_t dryrun = BOOL_FALSE;
 1 ( 0.00%)  	bool_t dryrun_config = BOOL_FALSE;
 8 ( 0.00%)  	const char *xml_path = getenv("CLISH_PATH");
1,913 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 4 ( 0.00%)  	const char *view = getenv("CLISH_VIEW");
380 ( 0.01%)  => /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv (1x)
 4 ( 0.00%)  	const char *viewid = getenv("CLISH_VIEWID");
380 ( 0.01%)  => /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv (1x)
 .           	const char *xslt_file = NULL;
 .           
 2 ( 0.00%)  	FILE *outfd = stdout;
 1 ( 0.00%)  	bool_t istimeout = BOOL_FALSE;
 1 ( 0.00%)  	unsigned int timeout = 0;
 1 ( 0.00%)  	bool_t cmd = BOOL_FALSE; /* -c option */
 .           	lub_list_t *cmds; /* Commands defined by -c */
 .           	lub_list_node_t *iter;
 2 ( 0.00%)  	const char *histfile = "~/.clish_history";
 .           	char *histfile_expanded = NULL;
 1 ( 0.00%)  	unsigned int histsize = 50;
 .           	clish_sym_t *sym = NULL;
 .           
 .           	/* Signal vars */
 .           	struct sigaction sigpipe_act;
 .           	sigset_t sigpipe_set;
 .           
 .           	static const char *shortopts = "hvs:ledx:w:i:bqu8oO:kt:c:f:z:p:";
 .           #ifdef HAVE_GETOPT_LONG
-- line 89 ----------------------------------------
-- line 109 ----------------------------------------
 .           		{"histfile",	1, NULL, 'f'},
 .           		{"histsize",	1, NULL, 'z'},
 .           		{"xslt",	1, NULL, 'p'},
 .           		{NULL,		0, NULL, 0}
 .           	};
 .           #endif
 .           
 .           	/* Ignore SIGPIPE */
 8 ( 0.00%)  	sigemptyset(&sigpipe_set);
1,626 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 8 ( 0.00%)  	sigaddset(&sigpipe_set, SIGPIPE);
1,589 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 1 ( 0.00%)  	sigpipe_act.sa_flags = 0;
32 ( 0.00%)  	sigpipe_act.sa_mask = sigpipe_set;
 2 ( 0.00%)  	sigpipe_act.sa_handler = &sighandler;
 9 ( 0.00%)  	sigaction(SIGPIPE, &sigpipe_act, NULL);
1,622 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           #if HAVE_LOCALE_H
 .           	/* Set current locale */
 8 ( 0.00%)  	setlocale(LC_ALL, "");
94,116 ( 1.61%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           #endif
 .           
 .           	/* Var initialization */
 8 ( 0.00%)  	cmds = lub_list_new(NULL);
2,408 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           
 .           	/* Parse command line options */
 .           	while(1) {
 .           		int opt;
 .           #ifdef HAVE_GETOPT_LONG
18 ( 0.00%)  		opt = getopt_long(argc, argv, shortopts, longopts, NULL);
2,245 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
109 ( 0.00%)  => /opt/build/glibc/glibc-2.24/posix/getopt1.c:getopt_long (1x)
 .           #else
 .           		opt = getopt(argc, argv, shortopts);
 .           #endif
 4 ( 0.00%)  		if (-1 == opt)
 .           			break;
 7 ( 0.00%)  		switch (opt) {
 .           		case 's':
 .           			socket_path = optarg;
 .           			break;
 .           		case 'l':
 .           			lockless = BOOL_TRUE;
 .           			break;
 .           		case 'e':
 .           			stop_on_error = BOOL_TRUE;
-- line 150 ----------------------------------------
-- line 160 ----------------------------------------
 .           			break;
 .           		case '8':
 .           			bit8 = BOOL_TRUE;
 .           			break;
 .           		case 'o':
 .           			log = BOOL_TRUE;
 .           			break;
 .           		case 'O':
 3 ( 0.00%)  			if (lub_log_facility(optarg, &log_facility)) {
 .           				fprintf(stderr, "Error: Illegal syslog facility %s.\n", optarg);
 .           				help(-1, argv[0]);
 .           				goto end;
 .           			}
 .           			break;
 .           		case 'd':
 .           			dryrun = BOOL_TRUE;
 .           			break;
 .           		case 'x':
 2 ( 0.00%)  			xml_path = optarg;
 1 ( 0.00%)  			break;
 .           		case 'w':
 .           			view = optarg;
 .           			break;
 .           		case 'i':
 .           			viewid = optarg;
 .           			break;
 .           		case 'k':
 .           			lockless = BOOL_TRUE;
 .           			dryrun = BOOL_TRUE;
 .           			dryrun_config = BOOL_TRUE;
 .           			break;
 .           		case 't':
 .           			istimeout = BOOL_TRUE;
 .           			timeout = 0;
 2 ( 0.00%)  			lub_conv_atoui(optarg, &timeout, 0);
 .           			break;
 .           		case 'c': {
 .           			char *str;
 .           			cmd = BOOL_TRUE;
 .           			quiet = BOOL_TRUE;
 .           			str = strdup(optarg);
 .           			lub_list_add(cmds, str);
 .           			}
-- line 202 ----------------------------------------
-- line 204 ----------------------------------------
 .           		case 'f':
 .           			if (!strcmp(optarg, "/dev/null"))
 .           				histfile = NULL;
 .           			else
 .           				histfile = optarg;
 .           			break;
 .           		case 'z': {
 .           			histsize = 0;
 2 ( 0.00%)  			lub_conv_atoui(optarg, &histsize, 0);
 .           			}
 .           			break;
 .           		case 'p':
 .           #ifdef HAVE_LIB_LIBXSLT
 .           			xslt_file = optarg;
 .           #else
 .           			fprintf(stderr, "Error: The klish was built without XSLT support.\n");
 .           			goto end;
-- line 220 ----------------------------------------
-- line 231 ----------------------------------------
 .           		default:
 .           			help(-1, argv[0]);
 .           			goto end;
 .           			break;
 .           		}
 .           	}
 .           
 .           	/* Validate command line options */
 4 ( 0.00%)  	if (utf8 && bit8) {
 .           		fprintf(stderr, "Error: The -u and -8 options can't be used together.\n");
 .           		goto end;
 .           	}
 .           
 .           	/* Create shell instance */
 2 ( 0.00%)  	if (quiet) {
 .           		FILE *tmpfd = NULL;
 .           		if ((tmpfd = fopen("/dev/null", "w")))
 .           			outfd = tmpfd;
 .           	}
10 ( 0.00%)  	shell = clish_shell_new(NULL, outfd, stop_on_error);
192,854 ( 3.29%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 2 ( 0.00%)  	if (!shell) {
 .           		fprintf(stderr, "Error: Can't run clish.\n");
 .           		goto end;
 .           	}
 .           	/* Load the XML files */
 6 ( 0.00%)  	clish_xmldoc_start();
702 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
11 ( 0.00%)  	if (clish_shell_load_scheme(shell, xml_path, xslt_file))
4,173,323 (71.19%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		goto end;
 .           	/* Set communication to the konfd */
 8 ( 0.00%)  	clish_shell__set_socket(shell, socket_path);
5,538 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	/* Set lockless mode */
 2 ( 0.00%)  	if (lockless)
 .           		clish_shell__set_lockfile(shell, NULL);
 .           	/* Set interactive mode */
 2 ( 0.00%)  	if (!interactive)
 .           		clish_shell__set_interactive(shell, interactive);
 .           	/* Set startup view */
 3 ( 0.00%)  	if (view)
 .           		clish_shell__set_startup_view(shell, view);
 .           	/* Set startup viewid */
 3 ( 0.00%)  	if (viewid)
 .           		clish_shell__set_startup_viewid(shell, viewid);
 .           	/* Set UTF-8 or 8-bit mode */
 4 ( 0.00%)  	if (utf8 || bit8)
 .           		clish_shell__set_utf8(shell, utf8);
 .           	else {
 .           #if HAVE_LANGINFO_CODESET
 .           		/* Autodetect encoding */
17 ( 0.00%)  		if (!strcmp(nl_langinfo(CODESET), "UTF-8"))
3,103 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 9 ( 0.00%)  			clish_shell__set_utf8(shell, BOOL_TRUE);
1,501 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           #else
 .           		/* The default is 8-bit if locale is not supported */
 .           		clish_shell__set_utf8(shell, BOOL_FALSE);
 .           #endif
 .           	}
 .           	/* Set logging */
 2 ( 0.00%)  	if (log) {
 .           		clish_shell__set_log(shell, log);
 .           		clish_shell__set_facility(shell, log_facility);
 .           	}
 .           	/* Set dry-run */
 2 ( 0.00%)  	if (dryrun)
 .           		clish_shell__set_dryrun(shell, dryrun);
 .           	/* Set idle timeout */
 2 ( 0.00%)  	if (istimeout)
 .           		clish_shell__set_timeout(shell, timeout);
 .           	/* Set history settings */
 8 ( 0.00%)  	clish_shell__stifle_history(shell, histsize);
2,399 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 3 ( 0.00%)  	if (histfile)
 8 ( 0.00%)  		histfile_expanded = lub_system_tilde_expand(histfile);
2,178 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 2 ( 0.00%)  	if (histfile_expanded)
 8 ( 0.00%)  		clish_shell__restore_history(shell, histfile_expanded);
33,758 ( 0.58%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	/* Load plugins, link aliases and check access rights */
 9 ( 0.00%)  	if (clish_shell_prepare(shell) < 0)
227,348 ( 3.88%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           		goto end;
 .           	/* Dryrun config and log hooks */
 2 ( 0.00%)  	if (dryrun_config) {
 .           		if ((sym = clish_shell_get_hook(shell, CLISH_SYM_TYPE_CONFIG)))
 .           			clish_sym__set_permanent(sym, BOOL_FALSE);
 .           		if ((sym = clish_shell_get_hook(shell, CLISH_SYM_TYPE_LOG)))
 .           			clish_sym__set_permanent(sym, BOOL_FALSE);
 .           	}
 .           #ifdef DEBUG
 .           	clish_shell_dump(shell);
 .           #endif
 .           
 .           	/* Set source of command stream: files or interactive tty */
 3 ( 0.00%)  	if(optind < argc) {
 .           		int i;
 .           		/* Run the commands from the files */
 .           		for (i = argc - 1; i >= optind; i--)
 .           			clish_shell_push_file(shell, argv[i], stop_on_error);
 .           	} else {
 .           		/* The interactive shell */
15 ( 0.00%)  		int tmpfd = dup(fileno(stdin));
2,979 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 .           #ifdef FD_CLOEXEC
16 ( 0.00%)  		fcntl(tmpfd, F_SETFD, fcntl(tmpfd, F_GETFD) | FD_CLOEXEC);
1,522 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
22 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/sysv/linux/fcntl.c:fcntl (1x)
 .           #endif
18 ( 0.00%)  		clish_shell_push_fd(shell, fdopen(tmpfd, "r"), stop_on_error);
6,901 ( 0.12%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (2x)
 .           	}
 .           
 .           	/* Execute startup */
 7 ( 0.00%)  	running = clish_shell_startup(shell);
65,371 ( 1.12%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 2 ( 0.00%)  	if (running) {
 .           		fprintf(stderr, "Error: Can't startup clish.\n");
 .           		goto end;
 .           	}
 .           
 2 ( 0.00%)  	if (cmd) {
 .           		/* Iterate cmds */
 .           		for(iter = lub_list__get_head(cmds);
 .           			iter; iter = lub_list_node__get_next(iter)) {
 .           			char *str = (char *)lub_list_node__get_data(iter);
 .           			result = clish_shell_forceline(shell, str, NULL);
 .           			if (stop_on_error && result)
 .           				break;
 .           		}
 .           	} else {
 .           		/* Main loop */
 7 ( 0.00%)  		result = clish_shell_loop(shell);
759,930 (12.96%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave (1x)
 .           	}
 .           
 .           end:
 .           	/* Cleanup */
 .           	if (shell) {
 .           		if (histfile_expanded) {
 .           			clish_shell__save_history(shell, histfile_expanded);
 .           			free(histfile_expanded);
-- line 358 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_loop.c
--------------------------------------------------------------------------------
Ir         

-- line 9 ----------------------------------------
.           #include <string.h>
.           #include <assert.h>
.           #include <unistd.h>
.           
.           /*-------------------------------------------------------- */
.           /* The main CLI loop while interactive execution.
.            */
.           int clish_shell_loop(clish_shell_t *this)
3 ( 0.00%)  {
.           	int running = 0;
.           	int retval = SHELL_STATE_OK;
.           
3 ( 0.00%)  	assert(this);
9 ( 0.00%)  	if (!tinyrl__get_istream(this->tinyrl))
1,672 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1 ( 0.00%)  		return SHELL_STATE_IO_ERROR;
.           	/* Check the shell isn't closing down */
3 ( 0.00%)  	if (this && (SHELL_STATE_CLOSING == this->state))
.           		return retval;
.           
.           	/* Loop reading and executing lines until the user quits */
.           	while (!running) {
.           		retval = SHELL_STATE_OK;
.           		/* Get input from the stream */
8 ( 0.00%)  		running = clish_shell_readline(this, NULL);
757,539 (12.92%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
.           		if (running) {
.           			switch (this->state) {
.           			case SHELL_STATE_SCRIPT_ERROR:
.           			case SHELL_STATE_SYNTAX_ERROR:
.           				/* Interactive session doesn't exit on error */
.           				if (tinyrl__get_isatty(this->tinyrl) ||
.           					(this->current_file &&
.           					!this->current_file->stop_on_error))
-- line 40 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c
--------------------------------------------------------------------------------
Ir             

-- line 73 ----------------------------------------
    .            */
    .           const char *default_path = "/etc/clish;~/.clish";
    .           
    .           static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent);
    .           
    .           /*-------------------------------------------------------- */
    .           int clish_shell_load_scheme(clish_shell_t *this, const char *xml_path, const char *xslt_path)
    8 ( 0.00%)  {
    .           	const char *path = xml_path;
    .           	char *buffer;
    .           	char *dirname;
    .           	char *saveptr = NULL;
    .           	int res = -1;
    .           	clish_xmldoc_t *doc = NULL;
    .           	DIR *dir;
    .           
-- line 89 ----------------------------------------
-- line 99 ----------------------------------------
    .           			return -1;
    .           		}
    .           	}
    .           #else
    .           	xslt_path = xslt_path; /* Happy compiler */
    .           #endif
    .           
    .           	/* Use the default path */
    2 ( 0.00%)  	if (!path)
    .           		path = default_path;
    9 ( 0.00%)  	buffer = lub_system_tilde_expand(path);
5,312 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Loop though each directory */
    .           	for (dirname = strtok_r(buffer, ";", &saveptr);
    .           		dirname; dirname = strtok_r(NULL, ";", &saveptr)) {
    .           		struct dirent *entry;
    .           
    .           		/* Search this directory for any XML files */
    8 ( 0.00%)  		dir = opendir(dirname);
2,024 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    3 ( 0.00%)  		if (NULL == dir) {
    .           #ifdef DEBUG
    .           			tinyrl_printf(this->tinyrl,
    .           				"*** Failed to open '%s' directory\n",
    .           				dirname);
    .           #endif
    .           			continue;
    .           		}
   79 ( 0.00%)  		for (entry = readdir(dir); entry; entry = readdir(dir)) {
2,157 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  573 ( 0.01%)  => /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c:readdir (14x)
   88 ( 0.00%)  			const char *extension = strrchr(entry->d_name, '.');
1,506 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  401 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strrchr.S:rindex (13x)
   14 ( 0.00%)  			char *filename = NULL;
    .           			clish_xmlnode_t *root;
    .           			int r;
    .           
    .           			/* Check the filename */
  134 ( 0.00%)  			if (!extension || strcmp(".xml", extension))
    .           				continue;
    .           
    .           			/* Build the filename */
   41 ( 0.00%)  			lub_string_cat(&filename, dirname);
3,779 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, "/");
2,620 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, entry->d_name);
4,032 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
    .           
    .           #ifdef DEBUG
    .           			fprintf(stderr, "Parse XML-file: %s\n", filename);
    .           #endif
    .           			/* Load current XML file */
   44 ( 0.00%)  			doc = clish_xmldoc_read(filename);
1,452,782 (24.78%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read (9x)
134,640 ( 2.30%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  			if (!clish_xmldoc_is_valid(doc)) {
  659 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (9x)
   10 ( 0.00%)  				int errcaps = clish_xmldoc_error_caps(doc);
    .           				printf("Unable to open file '%s'", filename);
    .           				if ((errcaps & CLISH_XMLERR_LINE) == CLISH_XMLERR_LINE)
    .           					printf(", at line %d", clish_xmldoc_get_err_line(doc));
    .           				if ((errcaps & CLISH_XMLERR_COL) == CLISH_XMLERR_COL)
    .           					printf(", at column %d", clish_xmldoc_get_err_col(doc));
    .           				if ((errcaps & CLISH_XMLERR_DESC) == CLISH_XMLERR_DESC)
    .           					printf(", message is %s", clish_xmldoc_get_err_msg(doc));
    .           				printf("\n");
-- line 155 ----------------------------------------
-- line 171 ----------------------------------------
    .           				}
    .           				clish_xmldoc_release(doc);
    .           				doc = tmp;
    .           			}
    .           
    .           			if (!xslt_path && clish_xslt_is_valid(xslt))
    .           				clish_xslt_release(xslt);
    .           #endif
   24 ( 0.00%)  			root = clish_xmldoc_get_root(doc);
  673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_get_root (9x)
    .           			r = process_node(this, root, NULL);
   44 ( 0.00%)  			clish_xmldoc_release(doc);
179,041 ( 3.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release (9x)
14,628 ( 0.25%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           			/* Error message */
   30 ( 0.00%)  			if (r) {
    .           				fprintf(stderr, CLISH_XML_ERROR_STR"File %s\n",
    .           					filename);
    .           				lub_string_free(filename);
    .           				goto error;
    .           			}
   34 ( 0.00%)  			lub_string_free(filename);
2,402 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  810 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
    .           		}
    7 ( 0.00%)  		closedir(dir);
1,641 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           /* To don't free memory twice on cleanup */
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (!xslt_path)
    .           		xslt = NULL;
    .           #endif
    1 ( 0.00%)  	doc = NULL;
    .           	dir = NULL;
    1 ( 0.00%)  	res = 0; /* Success */
    .           error:
    3 ( 0.00%)  	lub_string_free(buffer);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    .           	if (dir)
    .           		closedir(dir);
    5 ( 0.00%)  	if (clish_xmldoc_is_valid(doc))
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (1x)
    .           		clish_xmldoc_release(doc);
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (clish_xslt_is_valid(xslt))
    .           		clish_xslt_release(xslt);
    .           #endif
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /*
    .            * ------------------------------------------------------
    .            * This function reads an element from the XML stream and processes it.
    .            * ------------------------------------------------------
    .            */
  980 ( 0.02%)  static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent)
    .           {
   98 ( 0.00%)  	int res = 0;
    .           
2,511 ( 0.04%)  	switch (clish_xmlnode_get_type(node)) {
2,340,397 (39.92%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 (30x)
  870 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type (174x)
    .           	case CLISH_XMLNODE_ELM: {
    .           			clish_xml_cb_t * cb;
    .           			char name[128];
   98 ( 0.00%)  			unsigned int namelen = sizeof(name);
  788 ( 0.01%)  			if (clish_xmlnode_get_name(node, name, &namelen) == 0) {
5,400 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (9x)
2,754 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,990 ( 0.03%)  				for (cb = &xml_elements[0]; cb->element; cb++) {
2,369 ( 0.04%)  					if (0 == strcmp(name, cb->element)) {
1,476 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  189 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (9x)
    .           #ifdef DEBUG
    .           						fprintf(stderr, "NODE:");
    .           						clish_xmlnode_print(node, stderr);
    .           						fprintf(stderr, "\n");
    .           #endif
    .           						/* process the elements at this level */
  490 ( 0.01%)  						res = cb->handler(shell, node, parent);
2,350,698 (40.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module (10x)
    .           
    .           						/* Error message */
  294 ( 0.01%)  						if (res) {
    .           							char *ename = clish_xmlnode_fetch_attr(node, "name");
    .           							char *eref = clish_xmlnode_fetch_attr(node, "ref");
    .           							char *ekey = clish_xmlnode_fetch_attr(node, "key");
    .           							char *efile = clish_xmlnode_fetch_attr(node, "file");
    .           							fprintf(stderr, CLISH_XML_ERROR_STR"Node %s", name);
    .           							if (ename)
    .           								fprintf(stderr, ", name=\"%s\"", ename);
    .           							if (eref)
-- line 252 ----------------------------------------
-- line 274 ----------------------------------------
    .           	case CLISH_XMLNODE_COMMENT:
    .           	case CLISH_XMLNODE_DECL:
    .           	case CLISH_XMLNODE_UNKNOWN:
    .           	default:
    .           		break;
    .           	}
    .           
    .           	return res;
  882 ( 0.02%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_children(clish_shell_t *shell,
    .           	clish_xmlnode_t *element, void *parent)
  549 ( 0.01%)  {
   61 ( 0.00%)  	clish_xmlnode_t *node = NULL;
    .           	int res;
    .           
3,350 ( 0.06%)  	while ((node = clish_xmlnode_next_child(element, node)) != NULL) {
  799 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  750 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child (183x)
    .           		/* Now deal with all the contained elements */
    .           		res = process_node(shell, node, parent);
  176 ( 0.00%)  		if (res)
    .           			return res;
    .           	}
    .           
   61 ( 0.00%)  	return 0;
  366 ( 0.01%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_clish_module(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   50 ( 0.00%)  {
    .           	/* Create the global view */
   30 ( 0.00%)  	if (!shell->global)
   11 ( 0.00%)  		shell->global = clish_shell_find_create_view(shell,
5,219 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			"__view_global", "");
    .           
    .           	parent = parent; /* Happy compiler */
    .           
   30 ( 0.00%)  	return process_children(shell, element, shell->global);
2,345,328 (40.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children (10x)
   30 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_view(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   45 ( 0.00%)  {
    .           	clish_view_t *view;
    .           	int res = -1;
    .           
   29 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  164 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (4x)
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  	char *prompt = clish_xmlnode_fetch_attr(element, "prompt");
  328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *depth = clish_xmlnode_fetch_attr(element, "depth");
  322 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *restore = clish_xmlnode_fetch_attr(element, "restore");
  340 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
  328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
    .           
    .           	/* Check syntax */
   10 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
    .           
    .           	/* re-use a view if it already exists */
   30 ( 0.00%)  	view = clish_shell_find_create_view(shell, name, prompt);
6,493 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell_find_create_view (5x)
    .           
   10 ( 0.00%)  	if (depth && (lub_ctype_isdigit(*depth))) {
    .           		unsigned int res = 0;
    .           		lub_conv_atoui(depth, &res, 0);
    .           		clish_view__set_depth(view, res);
    .           	}
    .           
   10 ( 0.00%)  	if (restore) {
    .           		if (!lub_string_nocasecmp(restore, "depth"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_DEPTH);
    .           		else if (!lub_string_nocasecmp(restore, "view"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_VIEW);
    .           		else
    .           			clish_view__set_restore(view, CLISH_RESTORE_NONE);
    .           	}
    .           
   10 ( 0.00%)  	if (access)
    .           		clish_view__set_access(view, access);
    .           
    .           //process_view_end:
   25 ( 0.00%)  	res = process_children(shell, element, view);
293,378 ( 5.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (5x)
    .           error:
   15 ( 0.00%)  	clish_xml_release(name);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(prompt);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(depth);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(restore);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(access);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   45 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_ptype(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   99 ( 0.00%)  {
    .           	clish_ptype_method_e method;
    .           	clish_ptype_preprocess_e preprocess;
    .           	int res = -1;
    .           
   55 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  480 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,285 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *pattern = clish_xmlnode_fetch_attr(element, "pattern");
  955 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *method_name = clish_xmlnode_fetch_attr(element, "method");
  892 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *preprocess_name =	clish_xmlnode_fetch_attr(element, "preprocess");
1,318 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
    .           
    .           	/* Check syntax */
   22 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   22 ( 0.00%)  	if (!pattern) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("pattern"));
    .           		goto error;
    .           	}
    .           
   48 ( 0.00%)  	method = clish_ptype_method_resolve(method_name);
  705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  616 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_method_resolve (10x)
    .           
   48 ( 0.00%)  	preprocess = clish_ptype_preprocess_resolve(preprocess_name);
  737 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_preprocess_resolve (10x)
   77 ( 0.00%)  	clish_shell_find_create_ptype(shell,
1,796,814 (30.65%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (11x)
    .           		name, help, pattern, method, preprocess);
    .           
   11 ( 0.00%)  	res = 0;
    .           error:
   33 ( 0.00%)  	clish_xml_release(name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(help);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(pattern);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(method_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(preprocess_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   99 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_overview(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    8 ( 0.00%)  {
    1 ( 0.00%)  	char *content = NULL;
    2 ( 0.00%)  	unsigned int content_len = 2048;
    .           	int result;
    .           
    .           	/*
    .           	 * the code below faithfully assume that we'll be able fully store
    .           	 * the content of the node. If it's really, really big, we may have
    .           	 * an issue (but then, if it's that big, how the hell does it
    .           	 * already fits in allocated memory?)
    .           	 * Ergo, it -should- be safe.
    .           	 */
    .           	do {
    4 ( 0.00%)  		char *new = (char*)realloc(content, content_len);
1,863 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (1x)
    2 ( 0.00%)  		if (!new) {
    .           			if (content)
    .           				free(content);
    .           			return -1;
    .           		}
    .           		content = new;
    7 ( 0.00%)  		result = clish_xmlnode_get_content(element, content,
19,272 ( 0.33%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (1x)
    .           			&content_len);
    2 ( 0.00%)  	} while (result == -E2BIG);
    .           
    2 ( 0.00%)  	if (result == 0 && content) {
    .           		/* set the overview text for this view */
    2 ( 0.00%)  		assert(NULL == shell->overview);
    .           		/* store the overview */
    4 ( 0.00%)  		shell->overview = lub_string_dup(content);
  968 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    .           	}
    .           
    .           	if (content)
    3 ( 0.00%)  		free(content);
  148 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    1 ( 0.00%)  	return 0;
    7 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_command(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  260 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	clish_command_t *old;
    .           	int res = -1;
    .           
  130 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,167 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
1,066 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,876 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
2,167 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
2,319 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *escape_chars = clish_xmlnode_fetch_attr(element, "escape_chars");
2,119 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_name = clish_xmlnode_fetch_attr(element, "args");
1,989 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_help = clish_xmlnode_fetch_attr(element, "args_help");
2,371 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
2,290 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
2,374 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *ref = clish_xmlnode_fetch_attr(element, "ref");
2,296 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
    .           
    .           	/* Check syntax */
   52 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   52 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
    .           
    .           	/* check this command doesn't already exist */
  134 ( 0.00%)  	old = clish_view_find_command(v, name, BOOL_FALSE);
  723 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,202 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (25x)
   52 ( 0.00%)  	if (old) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"Duplicate COMMAND name=\"%s\".\n", name);
    .           		goto error;
    .           	}
    .           
    .           	/* create a command */
  160 ( 0.00%)  	cmd = clish_view_new_command(v, name, help);
43,626 ( 0.74%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (25x)
4,334 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  108 ( 0.00%)  	clish_command__set_pview(cmd, v);
  679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_pview (25x)
    .           
    .           	/* Reference 'ref' field */
   78 ( 0.00%)  	if (ref) {
    .           		char *saveptr = NULL;
    .           		const char *delim = "@";
    .           		char *view_name = NULL;
    .           		char *cmdn = NULL;
    .           		char *str = lub_string_dup(ref);
    .           
    .           		cmdn = strtok_r(str, delim, &saveptr);
    .           		if (!cmdn) {
-- line 505 ----------------------------------------
-- line 509 ----------------------------------------
    .           		}
    .           		clish_command__set_alias(cmd, cmdn); /* alias name */
    .           		view_name = strtok_r(NULL, delim, &saveptr);
    .           		clish_command__set_alias_view(cmd, view_name);
    .           		lub_string_free(str);
    .           	}
    .           
    .           	/* define some specialist escape characters */
   78 ( 0.00%)  	if (escape_chars)
    8 ( 0.00%)  		clish_command__set_escape_chars(cmd, escape_chars);
  923 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   52 ( 0.00%)  	if (args_name) {
    .           		/* define a "rest of line" argument */
    .           		clish_param_t *param;
    .           
    .           		/* Check syntax */
    2 ( 0.00%)  		if (!args_help) {
    .           			fprintf(stderr, CLISH_XML_ERROR_ATTR("args_help"));
    .           			goto error;
    .           		}
    5 ( 0.00%)  		param = clish_param_new(args_name, args_help, "__ptype_ARGS");
  751 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (1x)
    8 ( 0.00%)  		clish_command__set_args(cmd, param);
  689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* define the view which this command changes to */
   78 ( 0.00%)  	if (view) {
    .           		/* reference the next view */
   36 ( 0.00%)  		clish_command__set_viewname(cmd, view);
1,802 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,635 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (7x)
    .           	}
    .           
    .           	/* define the view id which this command changes to */
   78 ( 0.00%)  	if (viewid)
   16 ( 0.00%)  		clish_command__set_viewid(cmd, viewid);
1,829 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  463 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewid (2x)
    .           
    .           	/* lock field */
   78 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
  108 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
  725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (25x)
    .           
    .           	/* interrupt field */
   78 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
  108 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
  719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (25x)
    .           
   78 ( 0.00%)  	if (access)
    8 ( 0.00%)  		clish_command__set_access(cmd, access);
  872 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           //process_command_end:
  130 ( 0.00%)  	res = process_children(shell, element, cmd);
365,639 ( 6.24%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (26x)
    .           error:
   78 ( 0.00%)  	clish_xml_release(access);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(view);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(viewid);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(escape_chars);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(lock);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(interrupt);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(ref);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
    .           
    .           	return res;
  234 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_startup(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   10 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	int res = -1;
    .           
    5 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
   70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
   73 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_shebang =
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		clish_xmlnode_fetch_attr(element, "default_shebang");
    5 ( 0.00%)  	char *timeout = clish_xmlnode_fetch_attr(element, "timeout");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_plugin = clish_xmlnode_fetch_attr(element,
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		"default_plugin");
    .           
    .           	/* Check syntax */
    2 ( 0.00%)  	if (!view) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("view"));
    .           		goto error;
    .           	}
    2 ( 0.00%)  	if (shell->startup) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP tag duplication.\n");
    .           		goto error;
    .           	}
    .           
    .           	/* create a command with NULL help */
    6 ( 0.00%)  	cmd = clish_view_new_command(v, "startup", NULL);
1,043 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (1x)
    4 ( 0.00%)  	clish_command__set_lock(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* reference the next view */
    4 ( 0.00%)  	clish_command__set_viewname(cmd, view);
  246 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (1x)
    .           
    .           	/* define the view id which this command changes to */
    3 ( 0.00%)  	if (viewid)
    .           		clish_command__set_viewid(cmd, viewid);
    .           
    3 ( 0.00%)  	if (default_shebang)
    .           		clish_shell__set_default_shebang(shell, default_shebang);
    .           
    3 ( 0.00%)  	if (timeout) {
    .           		unsigned int to = 0;
    .           		lub_conv_atoui(timeout, &to, 0);
    .           		clish_shell__set_timeout(shell, to);
    .           	}
    .           
    .           	/* lock field */
    2 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
    4 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* interrupt field */
    2 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
    4 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (1x)
    .           
    .           	/* If we need the default plugin */
    3 ( 0.00%)  	if (default_plugin && (0 == strcmp(default_plugin, "false")))
    .           		shell->default_plugin = BOOL_FALSE;
    .           
    .           	/* remember this command */
    1 ( 0.00%)  	shell->startup = cmd;
    .           
    5 ( 0.00%)  	res = process_children(shell, element, cmd);
6,101 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (1x)
    .           error:
    3 ( 0.00%)  	clish_xml_release(view);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(viewid);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(default_shebang);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(timeout);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(lock);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(interrupt);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_param(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  190 ( 0.00%)  {
    .           	clish_command_t *cmd = NULL;
   38 ( 0.00%)  	clish_param_t *p_param = NULL;
    .           	clish_xmlnode_t *pelement;
    .           	clish_param_t *param;
    .           	char *pname;
    .           	int res = -1;
    .           
  114 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  808 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,378 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *ptype = clish_xmlnode_fetch_attr(element, "ptype");
2,095 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *prefix = clish_xmlnode_fetch_attr(element, "prefix");
2,203 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *defval = clish_xmlnode_fetch_attr(element, "default");
2,237 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *mode = clish_xmlnode_fetch_attr(element, "mode");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *optional = clish_xmlnode_fetch_attr(element, "optional");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *order = clish_xmlnode_fetch_attr(element, "order");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *value = clish_xmlnode_fetch_attr(element, "value");
2,252 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *hidden = clish_xmlnode_fetch_attr(element, "hidden");
2,045 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *test = clish_xmlnode_fetch_attr(element, "test");
2,252 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *completion = clish_xmlnode_fetch_attr(element, "completion");
2,270 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,186 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
    .           
    .           	/* The PARAM can be child of COMMAND or another PARAM */
   76 ( 0.00%)  	pelement = clish_xmlnode_parent(element);
   76 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (19x)
    .           	pname = clish_xmlnode_get_all_name(pelement);
  190 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "PARAM") == 0)
  969 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (19x)
    .           		p_param = (clish_param_t *)parent;
    .           	else
    .           		cmd = (clish_command_t *)parent;
    .           	if (pname)
   95 ( 0.00%)  		free(pname);
2,369 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (19x)
   38 ( 0.00%)  	if (!cmd && !p_param)
    .           		goto error;
    .           
    .           	/* Check syntax */
   95 ( 0.00%)  	if (cmd && (cmd == shell->startup)) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP can't contain PARAMs.\n");
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!ptype) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("ptype"));
    .           		goto error;
    .           	}
    .           
  118 ( 0.00%)  	param = clish_param_new(name, help, ptype);
21,637 ( 0.37%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (18x)
2,140 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* If prefix is set clish will emulate old optional
    .           	 * command syntax over newer optional command mechanism.
    .           	 * It will create nested PARAM.
    .           	 */
   38 ( 0.00%)  	if (prefix) {
    .           		const char *ptype_name = "__ptype_SUBCOMMAND";
    .           		clish_param_t *opt_param = NULL;
    5 ( 0.00%)  		char *str = NULL;
    .           		clish_ptype_t *tmp;
    .           
    .           		/* Create a ptype for prefix-named subcommand that
    .           		 * will contain the nested optional parameter. The
    .           		 * name of ptype is hardcoded. It's not good but
    .           		 * it's only the service ptype.
    .           		 */
   25 ( 0.00%)  		tmp = (clish_ptype_t *)lub_bintree_find(
2,321 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (5x)
    .           			&shell->ptype_tree, ptype_name);
   10 ( 0.00%)  		if (!tmp)
    8 ( 0.00%)  			tmp = clish_shell_find_create_ptype(shell,
137,331 ( 2.34%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (1x)
    .           				ptype_name, "Option", "[^\\\\]+",
    .           				CLISH_PTYPE_REGEXP, CLISH_PTYPE_NONE);
    2 ( 0.00%)  		assert(tmp);
   20 ( 0.00%)  		lub_string_cat(&str, "_prefix_");
1,905 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   20 ( 0.00%)  		lub_string_cat(&str, name);
1,320 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   30 ( 0.00%)  		opt_param = clish_param_new(str, help, ptype_name);
6,029 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (5x)
   15 ( 0.00%)  		lub_string_free(str);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   24 ( 0.00%)  		clish_param__set_mode(opt_param,
  657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_mode (4x)
    .           			CLISH_PARAM_SUBCOMMAND);
   24 ( 0.00%)  		clish_param__set_value(opt_param, prefix);
  826 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  796 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_value (4x)
   20 ( 0.00%)  		clish_param__set_optional(opt_param, BOOL_TRUE);
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (5x)
    .           
   15 ( 0.00%)  		if (test)
    .           			clish_param__set_test(opt_param, test);
    .           
    .           		/* Add the parameter to the command */
   10 ( 0.00%)  		if (cmd)
   20 ( 0.00%)  			clish_command_insert_param(cmd, opt_param);
  910 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (5x)
    .           		/* Add the parameter to the param */
   15 ( 0.00%)  		if (p_param)
    .           			clish_param_insert_param(p_param, opt_param);
    .           		/* Unset cmd and set parent param to opt_param */
    5 ( 0.00%)  		cmd = NULL;
    .           		p_param = opt_param;
    .           	}
    .           
   57 ( 0.00%)  	if (defval)
   24 ( 0.00%)  		clish_param__set_default(param, defval);
  918 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  966 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_default (4x)
    .           
   57 ( 0.00%)  	if (hidden && lub_string_nocasecmp(hidden, "true") == 0)
    .           		clish_param__set_hidden(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_hidden(param, BOOL_FALSE);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_hidden (18x)
    .           
   57 ( 0.00%)  	if (mode) {
    .           		if (lub_string_nocasecmp(mode, "switch") == 0) {
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_SWITCH);
    .           			/* Force hidden attribute */
    .           			clish_param__set_hidden(param, BOOL_TRUE);
    .           		} else if (lub_string_nocasecmp(mode, "subcommand") == 0)
   28 ( 0.00%)  			clish_param__set_mode(param,
    .           				CLISH_PARAM_SUBCOMMAND);
    .           		else
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_COMMON);
    .           	}
    .           
   57 ( 0.00%)  	if (optional && lub_string_nocasecmp(optional, "true") == 0)
    .           		clish_param__set_optional(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_optional(param, BOOL_FALSE);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (18x)
    .           
   57 ( 0.00%)  	if (order && lub_string_nocasecmp(order, "true") == 0)
    .           		clish_param__set_order(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_order(param, BOOL_FALSE);
  663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_order (18x)
    .           
   57 ( 0.00%)  	if (value) {
    .           		clish_param__set_value(param, value);
    .           		/* Force mode to subcommand */
    .           		clish_param__set_mode(param,
    .           			CLISH_PARAM_SUBCOMMAND);
    .           	}
    .           
   57 ( 0.00%)  	if (test && !prefix)
    .           		clish_param__set_test(param, test);
    .           
   57 ( 0.00%)  	if (completion)
    .           		clish_param__set_completion(param, completion);
    .           
   57 ( 0.00%)  	if (access)
    .           		clish_param__set_access(param, access);
    .           
    .           	/* Add the parameter to the command */
   38 ( 0.00%)  	if (cmd)
   60 ( 0.00%)  		clish_command_insert_param(cmd, param);
1,565 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,570 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (13x)
    .           
    .           	/* Add the parameter to the param */
   38 ( 0.00%)  	if (p_param)
   24 ( 0.00%)  		clish_param_insert_param(p_param, param);
  914 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  959 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_insert_param (4x)
    .           
   95 ( 0.00%)  	res = process_children(shell, element, param);
  570 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (19x)
    .           
    .           error:
   57 ( 0.00%)  	clish_xml_release(name);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(help);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(ptype);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(prefix);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(defval);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(mode);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(optional);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(order);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(value);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(hidden);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(test);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(completion);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(access);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
    .           
    .           	return res;
  171 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_action(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  210 ( 0.00%)  {
    .           	clish_action_t *action = NULL;
  126 ( 0.00%)  	char *builtin = clish_xmlnode_fetch_attr(element, "builtin");
  587 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
  105 ( 0.00%)  	char *shebang = clish_xmlnode_fetch_attr(element, "shebang");
  431 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
   88 ( 0.00%)  	clish_xmlnode_t *pelement = clish_xmlnode_parent(element);
  649 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   80 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (20x)
    .           	char *pname = clish_xmlnode_get_all_name(pelement);
    .           	char *text;
    .           	clish_sym_t *sym = NULL;
    .           
  172 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "VAR") == 0)
3,294 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,020 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (20x)
   21 ( 0.00%)  		action = clish_var__get_action((clish_var_t *)parent);
    .           	else
   67 ( 0.00%)  		action = clish_command__get_action((clish_command_t *)parent);
  703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (20x)
    .           
    .           	if (pname)
   63 ( 0.00%)  		free(pname);
2,705 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
    .           	text = clish_xmlnode_get_all_content(element);
    .           
   84 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   94 ( 0.00%)  		clish_action__set_script(action, text);
  984 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,701 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_script (17x)
    .           	}
    .           	if (text)
   63 ( 0.00%)  		free(text);
2,746 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
   42 ( 0.00%)  	if (builtin)
   28 ( 0.00%)  		sym = clish_shell_add_unresolved_sym(shell, builtin,
5,051 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,964 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_unresolved_sym (3x)
    .           			CLISH_SYM_TYPE_ACTION);
    .           	else
   51 ( 0.00%)  		sym = shell->hooks[CLISH_SYM_TYPE_ACTION];
    .           
   67 ( 0.00%)  	clish_action__set_builtin(action, sym);
  695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_builtin (20x)
   42 ( 0.00%)  	if (shebang)
    .           		clish_action__set_shebang(action, shebang);
    .           
   67 ( 0.00%)  	clish_xml_release(builtin);
  622 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (20x)
   63 ( 0.00%)  	clish_xml_release(shebang);
   21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (21x)
    .           
    .           	return 0;
  189 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_detail(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   28 ( 0.00%)  {
    .           	clish_command_t *cmd = (clish_command_t *) parent;
    .           
    .           	/* read the following text element */
    .           	char *text = clish_xmlnode_get_all_content(element);
    .           
   16 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   24 ( 0.00%)  		clish_command__set_detail(cmd, text);
1,561 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_detail (3x)
1,211 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	if (text)
   12 ( 0.00%)  		free(text);
  534 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (4x)
    .           
    .           	shell = shell; /* Happy compiler */
    .           
    .           	return 0;
   28 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_namespace(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    .           {
    .           	clish_view_t *v = (clish_view_t *)parent;
    .           	clish_nspace_t *nspace = NULL;
    .           	int res = -1;
-- line 906 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c
--------------------------------------------------------------------------------
Ir              

-- line 8 ----------------------------------------
     .           bool_t lub_ctype_isdigit(char c)
     .           {
     .           	unsigned char tmp = (unsigned char)c;
     .           	return isdigit(tmp) ? BOOL_TRUE : BOOL_FALSE;
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           bool_t lub_ctype_isspace(char c)
   424 ( 0.01%)  {
     .           	unsigned char tmp = (unsigned char)c;
 1,272 ( 0.02%)  	return isspace(tmp) ? BOOL_TRUE : BOOL_FALSE;
   636 ( 0.01%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (212x)
   424 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char lub_ctype_tolower(char c)
21,200 ( 0.36%)  {
     .           	unsigned char tmp = (unsigned char)c;
42,404 ( 0.72%)  	return tolower(tmp);
31,797 ( 0.54%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc (10,599x)
 1,639 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
21,200 ( 0.36%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char lub_ctype_toupper(char c)
     .           {
     .           	unsigned char tmp = (unsigned char)c;
     .           	return toupper(tmp);
     .           }
     .           
-- line 34 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c
--------------------------------------------------------------------------------
Ir             

-- line 68 ----------------------------------------
    .            *---------------------------------------------------------------
    .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
    .            **************************************************************** */
    .           #include "private.h"
    .           
    .           /*--------------------------------------------------------- */
    .           lub_bintree_node_t *lub_bintree_splay(const lub_bintree_t * this,
    .           				      lub_bintree_node_t * t, const void *key)
3,636 ( 0.06%)  {
    .           	/* Simple top down splay, not requiring "key" to be in the tree t.  */
    .           	/* What it does is described above.                                 */
    .           	lub_bintree_node_t N, *leftTreeMax, *rightTreeMin, *y;
    .           	int comp;
    .           
2,316 ( 0.04%)  	if (t == NULL)
    .           		return t;
1,656 ( 0.03%)  	N.left = N.right = NULL;
1,656 ( 0.03%)  	leftTreeMax = rightTreeMin = &N;
    .           
    .           	for (;;) {
3,852 ( 0.07%)  		comp = lub_bintree_compare(this, t, key);
102,742 ( 1.75%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (799x)
4,017 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (126x)
  778 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (26x)
   24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (12x)
1,926 ( 0.03%)  		if (comp > 0) {
1,350 ( 0.02%)  			if (t->left == NULL)
    .           				break;
1,190 ( 0.02%)  			if (lub_bintree_compare(this, t->left, key) > 0) {
14,180 ( 0.24%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (189x)
1,010 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
   96 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (4x)
   14 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (7x)
  200 ( 0.00%)  				y = t->left;	/* rotate right */
  400 ( 0.01%)  				t->left = y->right;
  200 ( 0.00%)  				y->right = t;
    .           				t = y;
  600 ( 0.01%)  				if (t->left == NULL)
    .           					break;
    .           			}
  368 ( 0.01%)  			rightTreeMin->left = t;	/* link right */
    .           			rightTreeMin = t;
  368 ( 0.01%)  			t = t->left;
  513 ( 0.01%)  		} else if (comp < 0) {
  828 ( 0.01%)  			if (t->right == NULL)
    .           				break;
1,165 ( 0.02%)  			if (lub_bintree_compare(this, t->right, key) < 0) {
45,786 ( 0.78%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (189x)
1,011 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
  218 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (6x)
   90 ( 0.00%)  				y = t->right;	/* rotate left */
   60 ( 0.00%)  				t->right = y->left;
   30 ( 0.00%)  				y->left = t;
    .           				t = y;
  120 ( 0.00%)  				if (t->right == NULL)
    .           					break;
    .           			}
  227 ( 0.00%)  			leftTreeMax->right = t;	/* link left */
    .           			leftTreeMax = t;
  757 ( 0.01%)  			t = t->right;
    .           		} else {
    .           			break;
    .           		}
    .           	}
  552 ( 0.01%)  	leftTreeMax->right = t->left;	/* assemble */
1,104 ( 0.02%)  	rightTreeMin->left = t->right;
1,104 ( 0.02%)  	t->left = N.right;
1,104 ( 0.02%)  	t->right = N.left;
    .           
    .           	/* return the new root */
    .           	return t;
5,462 ( 0.09%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 5 ----------------------------------------
  .           #include <assert.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_shell_find_ptype(clish_shell_t *this,
  .           	const char *name)
  .           {
 75 ( 0.00%)  	return lub_bintree_find(&this->ptype_tree, name);
6,663 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_shell_find_create_ptype(clish_shell_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
169 ( 0.00%)  {
 43 ( 0.00%)  	clish_ptype_t *ptype = lub_bintree_find(&this->ptype_tree, name);
1,629 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,507 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (12x)
  .           
 39 ( 0.00%)  	if (!ptype) {
  .           		/* create a ptype */
108 ( 0.00%)  		ptype = clish_ptype_new(name, text, pattern,
1,928,532 (32.90%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new (12x)
150,975 ( 2.58%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			method, preprocess);
 26 ( 0.00%)  		assert(ptype);
 69 ( 0.00%)  		clish_shell_insert_ptype(this, ptype);
1,539 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,590 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_insert_ptype (12x)
  .           	} else {
  .           		if (pattern) {
  .           			/* set the pattern */
  .           			clish_ptype__set_pattern(ptype, pattern, method);
  .           			/* set the preprocess */
  .           			clish_ptype__set_preprocess(ptype, preprocess);
  .           		}
  .           		/* set the help text */
  .           		if (text)
  .           			clish_ptype__set_text(ptype, text);
  .           	}
  .           
  .           	return ptype;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_shell_insert_ptype(clish_shell_t * this, clish_ptype_t * ptype)
  .           {
 43 ( 0.00%)  	(void)lub_bintree_insert(&this->ptype_tree, ptype);
2,554 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (12x)
855 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c
--------------------------------------------------------------------------------
Ir           

-- line 12 ----------------------------------------
  .           	"clish_script@clish",
  .           	NULL,
  .           	"clish_hook_config@clish",
  .           	"clish_hook_log@clish"
  .           };
  .           
  .           /*----------------------------------------------------------- */
  .           int clish_shell_startup(clish_shell_t *this)
  3 ( 0.00%)  {
  .           	const char *banner;
  .           	clish_context_t context;
  .           
  3 ( 0.00%)  	if (!this->startup) {
  .           		fprintf(stderr, "Error: Can't get valid STARTUP tag.\n");
  .           		return -1;
  .           	}
  .           
  .           	/* Prepare context */
  9 ( 0.00%)  	clish_context_init(&context, this);
645 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_cmd(&context, this->startup);
681 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_action(&context,
689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		clish_command__get_action(this->startup));
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (1x)
  .           
  7 ( 0.00%)  	banner = clish_command__get_detail(this->startup);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	if (banner)
 10 ( 0.00%)  		tinyrl_printf(this->tinyrl, "%s\n", banner);
18,806 ( 0.32%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Call log initialize */
  9 ( 0.00%)  	if (clish_shell__get_log(this))
657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		clish_shell_exec_log(&context, NULL, 0);
  .           	/* Call startup script */
  8 ( 0.00%)  	return clish_shell_execute(&context, NULL);
42,408 ( 0.72%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */
  .           void clish_shell__set_startup_view(clish_shell_t *this, const char *viewname)
  .           {
  .           	clish_view_t *view;
  .           
  .           	assert(this);
  .           	assert(this->startup);
-- line 52 ----------------------------------------
-- line 70 ----------------------------------------
  .           	assert(this);
  .           	lub_string_free(this->default_shebang);
  .           	this->default_shebang = lub_string_dup(shebang);
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           const char * clish_shell__get_default_shebang(const clish_shell_t *this)
  .           {
  4 ( 0.00%)  	assert(this);
  2 ( 0.00%)  	return this->default_shebang;
  2 ( 0.00%)  }
  .           
  .           
  .           
  .           /*-------------------------------------------------------- */
  .           /* Resolve PTYPE for given PARAM.
  .            */
  .           static clish_ptype_t * resolve_ptype(clish_shell_t *this, clish_param_t *param)
 75 ( 0.00%)  {
  .           	clish_ptype_t *ptype = NULL;
  .           
125 ( 0.00%)  	if (!this || !param)
  .           		return NULL;
  .           
  .           	/* Resolve PARAM's PTYPE */
233 ( 0.00%)  	ptype = clish_shell_find_ptype(this, clish_param__get_ptype_name(param));
6,418 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_ptype (24x)
1,692 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype_name (24x)
 50 ( 0.00%)  	if (!ptype) {
  .           		fprintf(stderr, "Error: Unresolved PTYPE \"%s\" in PARAM \"%s\"\n",
  .           			clish_param__get_ptype_name(param),
  .           			clish_param__get_name(param));
  .           		return NULL;
  .           	}
104 ( 0.00%)  	clish_param__set_ptype(param, ptype);
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype (24x)
104 ( 0.00%)  	clish_param__set_ptype_name(param, NULL); /* Free some memory */
813 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,688 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype_name (24x)
  .           
  .           	return ptype;
125 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* Static recursive function to iterate parameters. Logically it's the
  .            * part of clish_shell_prepare() function.
  .            */
  .           static int iterate_paramv(clish_shell_t *this, clish_paramv_t *paramv,
  .           	clish_hook_access_fn_t *access_fn)
400 ( 0.01%)  {
100 ( 0.00%)  	int i = 0;
  .           	clish_param_t *param;
  .           
522 ( 0.01%)  	while((param = clish_paramv__get_param(paramv, i))) {
673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
214 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (44x)
  .           		clish_paramv_t *nested_paramv;
  .           
  .           		/* Resolve PARAM's PTYPE */
120 ( 0.00%)  		if (!resolve_ptype(this, param))
10,769 ( 0.18%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (19x)
  .           			return -1;
  .           
  .           		/* Check access for PARAM */
 48 ( 0.00%)  		if (access_fn && clish_param__get_access(param) &&
  .           			access_fn(this, clish_param__get_access(param))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove PARAM \"%s\"\n",
  .           				clish_param__get_name(param));
  .           #endif
  .           			if (clish_paramv_remove(paramv, i) < 0) {
  .           				fprintf(stderr, "Error: Some system problem\n");
  .           				return -1;
  .           			}
  .           			clish_param_delete(param);
  .           			continue; /* Don't increment index */
  .           		}
  .           		/* Recursive iterate nested PARAMs */
 76 ( 0.00%)  		nested_paramv = clish_param__get_paramv(param);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_paramv (18x)
144 ( 0.00%)  		if (iterate_paramv(this, nested_paramv, access_fn) < 0)
2,646 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 (19x)
  .           			return -1;
 48 ( 0.00%)  		i++;
  .           	}
  .           
 50 ( 0.00%)  	return 0;
300 ( 0.01%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This function prepares schema for execution. It loads
  .            * plugins, link unresolved symbols, then iterates all the
  .            * objects and link them to each other, check access
  .            * permissions. Don't execute clish_shell_startup() without this
  .            * function.
  .            */
  .           int clish_shell_prepare(clish_shell_t *this)
  8 ( 0.00%)  {
  .           	clish_command_t *cmd;
  .           	clish_view_t *view;
  .           	clish_nspace_t *nspace;
  .           	lub_bintree_t *view_tree, *cmd_tree;
  .           	lub_list_t *nspace_tree;
  .           	lub_bintree_iterator_t cmd_iter, view_iter;
  .           	lub_list_node_t *nspace_iter;
  .           	clish_hook_access_fn_t *access_fn = NULL;
  .           	clish_paramv_t *paramv;
  .           	int i = 0;
  .           
  .           	/* Add statically linked plugins */
  4 ( 0.00%)  	while (clish_plugin_builtin_list[i].name) {
  .           		clish_plugin_t *plugin;
  .           		plugin = clish_shell_find_create_plugin(this,
  .           			clish_plugin_builtin_list[i].name);
  .           		clish_plugin_add_init(plugin,
  .           			clish_plugin_builtin_list[i].init);
  .           		clish_plugin__set_builtin_flag(plugin, BOOL_TRUE);
  .           		i++;
  .           	}
  .           
  .           	/* Add default plugin to the list of plugins */
  5 ( 0.00%)  	if (this->default_plugin) {
  9 ( 0.00%)  		clish_shell_find_create_plugin(this, "clish");
3,187 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* Default hooks */
 11 ( 0.00%)  		for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 15 ( 0.00%)  			if (this->hooks_use[i])
  .           				continue;
 20 ( 0.00%)  			if (!clish_plugin_default_hook[i])
  .           				continue;
 18 ( 0.00%)  			clish_sym__set_name(this->hooks[i],
957 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
640 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_name (2x)
  .           				clish_plugin_default_hook[i]);
  .           		}
  .           	}
  .           	/* Add default syms to unresolved table */
 10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 25 ( 0.00%)  		if (clish_sym__get_name(this->hooks[i]))
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (5x)
 17 ( 0.00%)  			lub_list_add(this->syms, this->hooks[i]);
1,171 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (3x)
  .           	}
  .           
  .           	/* Load plugins and link symbols */
  9 ( 0.00%)  	if (clish_shell_load_plugins(this) < 0)
155,815 ( 2.66%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  9 ( 0.00%)  	if (clish_shell_link_plugins(this) < 0)
10,280 ( 0.18%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  .           
 12 ( 0.00%)  	access_fn = clish_sym__get_func(clish_shell_get_hook(this, CLISH_SYM_TYPE_ACCESS));
648 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (1x)
  .           
  .           	/* Iterate the VIEWs */
  .           	view_tree = &this->view_tree;
  9 ( 0.00%)  	view = lub_bintree_findfirst(view_tree);
1,054 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 23 ( 0.00%)  	for (lub_bintree_iterator_init(&view_iter, view_tree, view);
951 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 20 ( 0.00%)  		view; view = lub_bintree_iterator_next(&view_iter)) {
1,901 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (5x)
  .           		/* Check access rights for the VIEW */
 10 ( 0.00%)  		if (access_fn && clish_view__get_access(view) &&
  .           			access_fn(this, clish_view__get_access(view))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove VIEW \"%s\"\n",
  .           				clish_view__get_name(view));
  .           #endif
  .           			lub_bintree_remove(view_tree, view);
  .           			clish_view_delete(view);
  .           			continue;
  .           		}
  .           
  .           		/* Iterate the NAMESPACEs */
 24 ( 0.00%)  		nspace_tree = clish_view__get_nspace_tree(view);
703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_nspace_tree (4x)
 20 ( 0.00%)  		nspace_iter = lub_list__get_head(nspace_tree);
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
 10 ( 0.00%)  		while(nspace_iter) {
  .           			clish_view_t *ref_view;
  .           			lub_list_node_t *old_nspace_iter;
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(nspace_iter);
  .           			old_nspace_iter = nspace_iter;
  .           			nspace_iter = lub_list_node__get_next(nspace_iter);
  .           			/* Resolve NAMESPACEs and remove unresolved ones */
  .           			ref_view = clish_shell_find_view(this, clish_nspace__get_view_name(nspace));
  .           			if (!ref_view) {
-- line 235 ----------------------------------------
-- line 259 ----------------------------------------
  .           				lub_list_del(nspace_tree, old_nspace_iter);
  .           				lub_list_node_free(old_nspace_iter);
  .           				clish_nspace_delete(nspace);
  .           				continue;
  .           			}
  .           		}
  .           
  .           		/* Iterate the COMMANDs */
 24 ( 0.00%)  		cmd_tree = clish_view__get_command_tree(view);
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_command_tree (4x)
 20 ( 0.00%)  		cmd = lub_bintree_findfirst(cmd_tree);
441 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (5x)
 88 ( 0.00%)  		for (lub_bintree_iterator_init(&cmd_iter, cmd_tree, cmd);
204 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_init.c:lub_bintree_iterator_init (5x)
108 ( 0.00%)  			cmd; cmd = lub_bintree_iterator_next(&cmd_iter)) {
3,573 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
24,274 ( 0.41%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (25x)
108 ( 0.00%)  			int cmd_is_alias = clish_command__get_alias(cmd)?1:0;
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_alias (25x)
  .           			clish_param_t *args = NULL;
  .           
  .           			/* Check access rights for the COMMAND */
 52 ( 0.00%)  			if (access_fn && clish_command__get_access(cmd) &&
  .           				access_fn(this, clish_command__get_access(cmd))) {
  .           #ifdef DEBUG
  .           				fprintf(stderr, "Warning: Access denied. Remove COMMAND \"%s\" from VIEW \"%s\"\n",
  .           					clish_command__get_name(cmd), clish_view__get_name(view));
  .           #endif
  .           				lub_bintree_remove(cmd_tree, cmd);
  .           				clish_command_delete(cmd);
  .           				continue;
  .           			}
  .           
  .           			/* Resolve command aliases */
 52 ( 0.00%)  			if (cmd_is_alias) {
  .           				clish_view_t *aview;
  .           				clish_command_t *cmdref;
 26 ( 0.00%)  				const char *alias_view = clish_command__get_alias_view(cmd);
  .           				if (!alias_view)
  .           					aview = clish_command__get_pview(cmd);
  .           				else
  .           					aview = clish_shell_find_view(this, alias_view);
  .           				if (!aview /* Removed or broken VIEW */
  .           					||
  .           					/* Removed or broken referenced COMMAND */
  .           					!(cmdref = clish_view_find_command(aview, clish_command__get_alias(cmd), BOOL_FALSE))
-- line 298 ----------------------------------------
-- line 328 ----------------------------------------
  .           					lub_bintree_remove(cmd_tree, cmd);
  .           					clish_command_delete(cmd);
  .           					continue;
  .           				}
  .           			}
  .           			if (cmd_is_alias) /* Don't duplicate paramv processing for aliases */
  .           				continue;
  .           			/* Iterate PARAMeters */
 56 ( 0.00%)  			paramv = clish_command__get_paramv(cmd);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (25x)
156 ( 0.00%)  			if (iterate_paramv(this, paramv, access_fn) < 0)
16,132 ( 0.28%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv (26x)
  .           				return -1;
  .           			/* Resolve PTYPE for args */
134 ( 0.00%)  			if ((args = clish_command__get_args(cmd))) {
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (25x)
  5 ( 0.00%)  				if (!resolve_ptype(this, args))
608 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (1x)
  .           					return -1;
  .           			}
  .           		}
  .           	}
  .           
  2 ( 0.00%)  	return 0;
  8 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c
--------------------------------------------------------------------------------
Ir           

-- line 6 ----------------------------------------
  .           #include "private.h"
  .           #include "lub/string.h"
  .           #include "lub/argv.h"
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell_iterator_init(clish_shell_iterator_t * iter,
  .           	clish_nspace_visibility_e field)
  .           {
 10 ( 0.00%)  	iter->last_cmd = NULL;
 20 ( 0.00%)  	iter->field = field;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           const clish_command_t *clish_shell_resolve_command(const clish_shell_t * this,
  .           	const char *line)
 65 ( 0.00%)  {
  .           	clish_command_t *cmd, *result;
  .           
  .           	/* Search the current view */
108 ( 0.00%)  	result = clish_view_resolve_command(clish_shell__get_view(this), line, BOOL_TRUE);
26,380 ( 0.45%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_command (12x)
1,775 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
117 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (13x)
  .           	/* Search the global view */
 65 ( 0.00%)  	cmd = clish_view_resolve_command(this->global, line, BOOL_TRUE);
60,491 ( 1.03%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_command (13x)
  .           
 56 ( 0.00%)  	result = clish_command_choose_longest(result, cmd);
725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
354 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_choose_longest (12x)
  .           
  .           	return result;
 39 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const clish_command_t *clish_shell_resolve_prefix(const clish_shell_t * this,
  .           	const char *line)
  .           {
  .           	clish_command_t *cmd, *result;
  .           
  .           	/* Search the current view */
-- line 40 ----------------------------------------
-- line 45 ----------------------------------------
  .           	result = clish_command_choose_longest(result, cmd);
  .           
  .           	return result;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           const clish_command_t *clish_shell_find_next_completion(const clish_shell_t *
  .           	this, const char *line, clish_shell_iterator_t * iter)
320 ( 0.01%)  {
  .           	const clish_command_t *result, *cmd;
  .           
  .           	/* ask the local view for next command */
564 ( 0.01%)  	result = clish_view_find_next_completion(clish_shell__get_view(this),
97,276 ( 1.66%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_next_completion (39x)
5,840 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
360 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (40x)
  .           		iter->last_cmd, line, iter->field, BOOL_TRUE);
  .           	/* ask the global view for next command */
320 ( 0.01%)  	cmd = clish_view_find_next_completion(this->global,
217,417 ( 3.71%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_next_completion (40x)
  .           		iter->last_cmd, line, iter->field, BOOL_TRUE);
  .           
164 ( 0.00%)  	if (clish_command_diff(result, cmd) > 0)
718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,439 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_diff (39x)
  .           		result = cmd;
  .           
 80 ( 0.00%)  	if (!result)
 10 ( 0.00%)  		iter->last_cmd = NULL;
  .           	else
120 ( 0.00%)  		iter->last_cmd = clish_command__get_name(result);
120 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (30x)
  .           
  .           	return result;
280 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_shell_param_generator(clish_shell_t *this, lub_argv_t *matches,
  .           	const clish_command_t *cmd, const char *line, unsigned offset)
 56 ( 0.00%)  {
 16 ( 0.00%)  	const char *name = clish_command__get_name(cmd);
 16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (4x)
 20 ( 0.00%)  	char *text = lub_string_dup(&line[offset]);
623 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (4x)
  .           	clish_ptype_t *ptype;
 16 ( 0.00%)  	unsigned idx = lub_string_wordcount(name);
1,756 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (4x)
  .           	/* get the index of the current parameter */
 12 ( 0.00%)  	unsigned index = lub_string_wordcount(line) - idx;
2,242 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (4x)
  .           	clish_context_t context;
  .           
 17 ( 0.00%)  	if ((0 != index) || (offset && line[offset - 1] == ' ')) {
 20 ( 0.00%)  		lub_argv_t *argv = lub_argv_new(line, 0);
7,873 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (4x)
 16 ( 0.00%)  		clish_pargv_t *pargv = clish_pargv_new();
718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
339 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_new (3x)
 13 ( 0.00%)  		clish_pargv_t *completion = clish_pargv_new();
452 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_new (4x)
  4 ( 0.00%)  		unsigned completion_index = 0;
  .           		const clish_param_t *param = NULL;
  .           
  .           		/* if there is some text for the parameter then adjust the index */
  .           		if ((0 != index) && (text[0] != '\0'))
  6 ( 0.00%)  			index--;
  .           
  .           		/* Parse command line to get completion pargv's */
  .           		/* Prepare context */
 28 ( 0.00%)  		clish_context_init(&context, this);
 32 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (4x)
 20 ( 0.00%)  		clish_context__set_cmd(&context, cmd);
 16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__set_cmd (4x)
 24 ( 0.00%)  		clish_context__set_pargv(&context, pargv);
689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__set_pargv (3x)
  .           
 60 ( 0.00%)  		clish_shell_parse_pargv(pargv, cmd, &context,
5,919 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
13,917 ( 0.24%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:clish_shell_parse_pargv (3x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (4x)
  .           			clish_command__get_paramv(cmd),
  .           			argv, &idx, completion, index + idx);
 12 ( 0.00%)  		lub_argv_delete(argv);
1,854 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (4x)
  .           
 68 ( 0.00%)  		while ((param = clish_pargv__get_param(completion,
670 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 51 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv__get_param (7x)
  .           			completion_index++))) {
  .           			char *result;
  .           			/* The param is args so it has no completion */
 20 ( 0.00%)  			if (param == clish_command__get_args(cmd))
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (4x)
  .           				continue;
  .           			/* The switch has no completion string */
 20 ( 0.00%)  			if (CLISH_PARAM_SWITCH == clish_param__get_mode(param))
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (4x)
  .           				continue;
  .           			/* The subcommand is identified by it's value */
  8 ( 0.00%)  			if (CLISH_PARAM_SUBCOMMAND ==
 12 ( 0.00%)  				clish_param__get_mode(param)) {
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (4x)
  .           				result = clish_param__get_value(param);
  .           				if (result)
  .           					lub_argv_add(matches, result);
  .           			}
  .           			/* The 'completion' field of PARAM */
 24 ( 0.00%)  			if (clish_param__get_completion(param)) {
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_completion (3x)
  .           				char *str, *q;
  .           				char *saveptr = NULL;
  .           				str = clish_shell_expand(
  .           					clish_param__get_completion(param), SHELL_VAR_ACTION, &context);
  .           				if (str) {
  8 ( 0.00%)  					for (q = strtok_r(str, " \n", &saveptr);
  .           						q; q = strtok_r(NULL, " \n", &saveptr)) {
  .           						if (q == strstr(q, text))
  .           							lub_argv_add(matches, q);
  .           					}
  .           					lub_string_free(str);
  .           				}
  .           			}
  .           			/* The common PARAM. Let ptype do the work */
 24 ( 0.00%)  			if ((ptype = clish_param__get_ptype(param)))
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype (3x)
 24 ( 0.00%)  				clish_ptype_word_generator(ptype, matches, text);
6,434 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,170 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_word_generator (3x)
  .           		}
 12 ( 0.00%)  		clish_pargv_delete(completion);
1,305 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_delete (4x)
 16 ( 0.00%)  		clish_pargv_delete(pargv);
1,275 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_delete (4x)
  .           	}
  .           
 12 ( 0.00%)  	lub_string_free(text);
360 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (4x)
 32 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c
--------------------------------------------------------------------------------
Ir          

-- line 13 ----------------------------------------
 .           #include "lub/string.h"
 .           #include "lub/db.h"
 .           #include "lub/list.h"
 .           #include "clish/plugin.h"
 .           
 .           /*-------------------------------------------------------- */
 .           static void clish_shell_init(clish_shell_t * this,
 .           	FILE * istream, FILE * ostream, bool_t stop_on_error)
10 ( 0.00%)  {
 .           	clish_ptype_t *tmp_ptype = NULL;
 .           	int i;
 .           	char template[PATH_MAX];
 .           
 .           	/* initialise the tree of views */
16 ( 0.00%)  	lub_bintree_init(&this->view_tree,
1,603 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 .           		clish_view_bt_offset(),
 .           		clish_view_bt_compare, clish_view_bt_getkey);
 .           
 .           	/* initialise the tree of ptypes */
12 ( 0.00%)  	lub_bintree_init(&this->ptype_tree,
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (1x)
 .           		clish_ptype_bt_offset(),
 .           		clish_ptype_bt_compare, clish_ptype_bt_getkey);
 .           
 .           	/* initialise the tree of vars */
12 ( 0.00%)  	lub_bintree_init(&this->var_tree,
639 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (1x)
 .           		clish_var_bt_offset(),
 .           		clish_var_bt_compare, clish_var_bt_getkey);
 .           
 .           	/* Initialize plugin list */
 8 ( 0.00%)  	this->plugins = lub_list_new(NULL);
956 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 .           	/* Initialise the list of unresolved (yet) symbols */
 4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
210 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
 .           
 .           	/* Create userdata storage */
 4 ( 0.00%)  	this->udata = lub_list_new(clish_udata_compare);
210 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
 3 ( 0.00%)  	assert(this->udata);
 .           
 .           	/* Hooks */
10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
34 ( 0.00%)  		this->hooks[i] = clish_sym_new(NULL, NULL, i);
1,607 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
912 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (4x)
10 ( 0.00%)  		this->hooks_use[i] = BOOL_FALSE;
 .           	}
 .           
 .           	/* Set up defaults */
 1 ( 0.00%)  	this->global = NULL;
 1 ( 0.00%)  	this->startup = NULL;
 1 ( 0.00%)  	this->idle_timeout = 0; /* No idle timeout by default */
 1 ( 0.00%)  	this->wdog = NULL;
 1 ( 0.00%)  	this->wdog_timeout = 0; /* No watchdog timeout by default */
 1 ( 0.00%)  	this->wdog_active = BOOL_FALSE;
 1 ( 0.00%)  	this->state = SHELL_STATE_INITIALISING;
 1 ( 0.00%)  	this->overview = NULL;
10 ( 0.00%)  	this->tinyrl = clish_shell_tinyrl_new(istream, ostream, 0);
15,691 ( 0.27%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1 ( 0.00%)  	this->current_file = NULL;
 1 ( 0.00%)  	this->pwdv = NULL;
 1 ( 0.00%)  	this->pwdc = 0;
 1 ( 0.00%)  	this->depth = -1; /* Current depth is undefined */
 1 ( 0.00%)  	this->client = NULL;
 4 ( 0.00%)  	this->lockfile = lub_string_dup(CLISH_LOCK_PATH);
1,762 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 4 ( 0.00%)  	this->default_shebang = lub_string_dup("/bin/sh");
245 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 1 ( 0.00%)  	this->interactive = BOOL_TRUE; /* The interactive shell by default. */
 1 ( 0.00%)  	this->log = BOOL_FALSE; /* Disable logging by default */
 1 ( 0.00%)  	this->log_facility = LOG_LOCAL0; /* LOCAL0 for compatibility */
 1 ( 0.00%)  	this->dryrun = BOOL_FALSE; /* Disable dry-run by default */
14 ( 0.00%)  	this->user = lub_db_getpwuid(getuid()); /* Get user information */
6,629 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 1 ( 0.00%)  	this->default_plugin = BOOL_TRUE; /* Load default plugin by default */
 .           
 .           	/* Create template (string) for FIFO name generation */
18 ( 0.00%)  	snprintf(template, sizeof(template),
4,010 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 .           		"%s/klish.fifo.%u.XXXXXX", "/tmp", getpid());
 1 ( 0.00%)  	template[sizeof(template) - 1] = '\0';
 4 ( 0.00%)  	this->fifo_temp = lub_string_dup(template);
263 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
 .           
 .           	/* Create internal ptypes and params */
 .           	/* Args */
12 ( 0.00%)  	tmp_ptype = clish_shell_find_create_ptype(this,
154,923 ( 2.64%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		"__ptype_ARGS",
 .           		"Arguments", "[^\\\\]+",
 .           		CLISH_PTYPE_REGEXP,
 .           		CLISH_PTYPE_NONE);
 2 ( 0.00%)  	assert(tmp_ptype);
 .           
 .           	/* Push non-NULL istream */
 2 ( 0.00%)  	if (istream)
 .           		clish_shell_push_fd(this, istream, stop_on_error);
 7 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           static void clish_shell_fini(clish_shell_t *this)
 .           {
 .           	clish_view_t *view;
 .           	clish_ptype_t *ptype;
 .           	clish_var_t *var;
 .           	unsigned i;
-- line 107 ----------------------------------------
-- line 193 ----------------------------------------
 .           		lub_string_free(this->fifo_temp);
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           clish_shell_t *clish_shell_new(
 .           	FILE * istream,
 .           	FILE * ostream,
 .           	bool_t stop_on_error)
 8 ( 0.00%)  {
 8 ( 0.00%)  	clish_shell_t *this = malloc(sizeof(clish_shell_t));
1,637 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           
 2 ( 0.00%)  	if (this)
 5 ( 0.00%)  		clish_shell_init(this, istream, ostream, stop_on_error);
190,544 ( 3.25%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_new.c:clish_shell_init (1x)
 .           
 .           	return this;
 7 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           void clish_shell_delete(clish_shell_t *this)
 .           {
 .           	clish_shell_fini(this);
 .           	free(this);
 .           }
 .           
-- line 216 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c
--------------------------------------------------------------------------------
Ir             

-- line 31 ----------------------------------------
    .            *    Initial version
    .            *---------------------------------------------------------------
    .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
    .            **************************************************************** */
    .           #include "private.h"
    .           
    .           /*--------------------------------------------------------- */
    .           void *lub_bintree_findnext(lub_bintree_t * this, const void *clientkey)
1,215 ( 0.02%)  {
    .           	lub_bintree_node_t *t = this->root;
    .           	int comp;
    .           
    .           	/*
    .           	 * have a look for a direct match
    .           	 */
1,215 ( 0.02%)  	t = this->root = lub_bintree_splay(this, t, clientkey);
127,493 ( 2.17%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (243x)
    .           
  486 ( 0.01%)  	if (NULL != t) {
    .           		/* now look at what we have got */
1,215 ( 0.02%)  		comp = lub_bintree_compare(this, t, clientkey);
52,652 ( 0.90%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (238x)
  304 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (5x)
  486 ( 0.01%)  		if (comp <= 0) {
    .           			/*
    .           			 * time to fiddle with the right hand side of the tree
    .           			 * we need the closest node from the right hand side
    .           			 */
  207 ( 0.00%)  			t = t->right =
1,035 ( 0.02%)  			    lub_bintree_splay(this, t->right, clientkey);
30,364 ( 0.52%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (207x)
    .           		}
    .           	}
  748 ( 0.01%)  	if (NULL == t) {
   40 ( 0.00%)  		return NULL;
    .           	} else {
  406 ( 0.01%)  		return lub_bintree_getclientnode(this, t);
    .           	}
  972 ( 0.02%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/string/string.c
--------------------------------------------------------------------------------
Ir              

-- line 10 ----------------------------------------
     .           
     .           const char *lub_string_esc_default = "`|$<>&()#;\\\"!";
     .           const char *lub_string_esc_regex = "^$.*+[](){}";
     .           const char *lub_string_esc_quoted = "\\\"";
     .           
     .           /*--------------------------------------------------------- */
     .           void lub_string_free(char *ptr)
     .           {
   520 ( 0.01%)  	free(ptr);
21,158 ( 0.36%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (257x)
 1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_ndecode(const char *string, unsigned int len)
   436 ( 0.01%)  {
     .           	const char *s = string;
     .           	char *res, *p;
     .           	int esc = 0;
     .           
   218 ( 0.00%)  	if (!string)
     .           		return NULL;
     .           
     .           	/* Allocate enough memory for result */
   436 ( 0.01%)  	p = res = malloc(len + 1);
13,103 ( 0.22%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (109x)
     .           
 4,378 ( 0.07%)  	while (*s && (s < (string +len))) {
 1,340 ( 0.02%)  		if (!esc) {
 1,340 ( 0.02%)  			if ('\\' == *s)
   670 ( 0.01%)  				esc = 1;
     .           			else
     .           				*p = *s;
     .           		} else {
     .           /*			switch (*s) {
     .           			case 'r':
     .           			case 'n':
     .           				*p = '\n';
     .           				break;
     .           			case 't':
     .           				*p = '\t';
     .           				break;
     .           			default:
     .           				*p = *s;
     .           				break;
     .           			}
   670 ( 0.01%)  */			*p = *s;
     .           			esc = 0;
     .           		}
     .           		if (!esc)
 1,340 ( 0.02%)  			p++;
   670 ( 0.01%)  		s++;
     .           	}
   109 ( 0.00%)  	*p = '\0';
     .           
     .           	return res;
   436 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           inline char *lub_string_decode(const char *string)
     .           {
     .           	return lub_string_ndecode(string, strlen(string));
     .           }
     .           
     .           /*----------------------------------------------------------- */
-- line 71 ----------------------------------------
-- line 95 ----------------------------------------
     .           			break;
     .           		}
     .           	}
     .           	return result;
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           void lub_string_catn(char **string, const char *text, size_t len)
   972 ( 0.02%)  {
   324 ( 0.01%)  	if (text) {
     .           		char *q;
   810 ( 0.01%)  		size_t length, initlen, textlen = strlen(text);
 3,076 ( 0.05%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (162x)
     .           
     .           		/* make sure the client cannot give us duff details */
   324 ( 0.01%)  		len = (len < textlen) ? len : textlen;
     .           
     .           		/* remember the size of the original string */
 1,012 ( 0.02%)  		initlen = *string ? strlen(*string) : 0;
 2,618 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (101x)
     .           
     .           		/* account for '\0' */
   162 ( 0.00%)  		length = initlen + len + 1;
     .           
     .           		/* allocate the memory for the result */
   490 ( 0.01%)  		q = realloc(*string, length);
24,771 ( 0.42%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (161x)
 1,846 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   324 ( 0.01%)  		if (NULL != q) {
   162 ( 0.00%)  			*string = q;
     .           			/* move to the end of the initial string */
   162 ( 0.00%)  			q += initlen;
     .           
 3,314 ( 0.06%)  			while (len--) {
 3,774 ( 0.06%)  				*q++ = *text++;
     .           			}
   162 ( 0.00%)  			*q = '\0';
     .           		}
     .           	}
   972 ( 0.02%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           void lub_string_cat(char **string, const char *text)
   805 ( 0.01%)  {
   970 ( 0.02%)  	size_t len = text ? strlen(text) : 0;
 1,456 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 3,026 ( 0.05%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (160x)
   648 ( 0.01%)  	lub_string_catn(string, text, len);
43,162 ( 0.74%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn (160x)
 2,759 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   483 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_dup(const char *string)
     .           {
   782 ( 0.01%)  	if (!string)
     .           		return NULL;
   718 ( 0.01%)  	return strdup(string);
75,825 ( 1.29%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (356x)
 1,754 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    68 ( 0.00%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_dupn(const char *string, unsigned int len)
   201 ( 0.00%)  {
     .           	char *res = NULL;
     .           
   268 ( 0.00%)  	if (!string)
     .           		return res;
   268 ( 0.00%)  	res = malloc(len + 1);
 7,272 ( 0.12%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (67x)
   339 ( 0.01%)  	strncpy(res, string, len);
 2,004 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (66x)
 1,584 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    67 ( 0.00%)  	res[len] = '\0';
     .           
     .           	return res;
   335 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           int lub_string_nocasecmp(const char *cs, const char *ct)
 9,606 ( 0.16%)  {
     .           	int result = 0;
43,932 ( 0.75%)  	while ((0 == result) && *cs && *ct) {
     .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
     .           		 * MACRO implementation uses braces to prevent multiple increments
     .           		 * when called.
     .           		 */
25,439 ( 0.43%)  		int s = lub_ctype_tolower(*cs++);
55,946 ( 0.95%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (5,086x)
 2,407 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
25,435 ( 0.43%)  		int t = lub_ctype_tolower(*ct++);
55,957 ( 0.95%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (5,087x)
     .           
     .           		result = s - t;
     .           	}
     .           	/*lint -e774 Boolean within 'if' always evealuates to True 
     .           	 * not the case because of tolower() evaluating to 0 under lint
     .           	 * (see above)
     .           	 */
     .           	if (0 == result) {
     .           		/* account for different string lengths */
   749 ( 0.01%)  		result = *cs - *ct;
     .           	}
     .           	return result;
 8,005 ( 0.14%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_tolower(const char *str)
     .           {
     .           	char *tmp = strdup(str);
     .           	char *p = tmp;
     .           
     .           	while (*p) {
-- line 192 ----------------------------------------
-- line 194 ----------------------------------------
     .           		p++;
     .           	}
     .           
     .           	return tmp;
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           const char *lub_string_nocasestr(const char *cs, const char *ct)
   546 ( 0.01%)  {
     .           	const char *p = NULL;
    29 ( 0.00%)  	const char *result = NULL;
     .           
   574 ( 0.01%)  	while (*cs) {
     .           		const char *q = cs;
     .           
     .           		p = ct;
     .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
     .           		 * MACRO implementation uses braces to prevent multiple increments
     .           		 * when called.
     .           		 */
     .           		/*lint -e506 Constant value Boolean
     .           		 * not the case because of tolower() evaluating to 0 under lint
     .           		 * (see above)
     .           		 */
 1,565 ( 0.03%)  		while (*p && *q
 1,704 ( 0.03%)  		       && (lub_ctype_tolower(*p) == lub_ctype_tolower(*q))) {
 4,686 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (426x)
    88 ( 0.00%)  			p++, q++;
     .           		}
   338 ( 0.01%)  		if (0 == *p) {
     .           			break;
     .           		}
   170 ( 0.00%)  		cs++;
     .           	}
    58 ( 0.00%)  	if (p && !*p) {
     .           		/* we've found the first match of ct within cs */
     .           		result = cs;
     .           	}
     .           	return result;
   546 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           unsigned int lub_string_equal_part(const char *str1, const char *str2,
     .           	bool_t utf8)
     .           {
     .           	unsigned int cnt = 0;
     .           
   260 ( 0.00%)  	if (!str1 || !str2)
     .           		return cnt;
 1,955 ( 0.03%)  	while (*str1 && *str2) {
 1,898 ( 0.03%)  		if (*str1 != *str2)
     .           			break;
   819 ( 0.01%)  		cnt++;
   434 ( 0.01%)  		str1++;
   434 ( 0.01%)  		str2++;
     .           	}
    98 ( 0.00%)  	if (!utf8)
     .           		return cnt;
     .           
     .           	/* UTF8 features */
   196 ( 0.00%)  	if (cnt && (UTF8_11 == (*(str1 - 1) & UTF8_MASK)))
   147 ( 0.00%)  		cnt--;
     .           
     .           	return cnt;
    16 ( 0.00%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           const char *lub_string_suffix(const char *string)
   120 ( 0.00%)  {
     .           	const char *p1, *p2;
     .           	p1 = p2 = string;
   714 ( 0.01%)  	while (*p1) {
   568 ( 0.01%)  		if (lub_ctype_isspace(*p1)) {
 2,431 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_isspace (187x)
   777 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			p2 = p1;
   564 ( 0.01%)  			p2++;
     .           		}
     .           		p1++;
     .           	}
     .           	return p2;
   150 ( 0.00%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           const char *lub_string_nextword(const char *string,
     .           	size_t *len, size_t *offset, size_t *quoted)
 6,328 ( 0.11%)  {
     .           	const char *word;
     .           
   791 ( 0.01%)  	*quoted = 0;
     .           
     .           	/* Find the start of a word (not including an opening quote) */
 7,250 ( 0.12%)  	while (*string && isspace(*string)) {
 1,452 ( 0.02%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (484x)
 1,542 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   545 ( 0.01%)  		string++;
   190 ( 0.00%)  		(*offset)++;
     .           	}
     .           	/* Is this the start of a quoted string ? */
 1,308 ( 0.02%)  	if (*string == '"') {
     .           		*quoted = 1;
     .           		string++;
     .           	}
     .           	word = string;
 1,582 ( 0.03%)  	*len = 0;
     .           
     .           	/* Find the end of the word */
 7,529 ( 0.13%)  	while (*string) {
 5,536 ( 0.09%)  		if (*string == '\\') {
     .           			string++;
     .           			(*len)++;
     .           			if (*string) {
     .           				(*len)++;
     .           				string++;
     .           			}
     .           			continue;
     .           		}
     .           		/* End of word */
22,144 ( 0.38%)  		if (!*quoted && isspace(*string))
 8,304 ( 0.14%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (2,768x)
     .           			break;
 5,156 ( 0.09%)  		if (*string == '"') {
     .           			/* End of a quoted string */
     .           			*quoted = 2;
     .           			break;
     .           		}
 2,578 ( 0.04%)  		(*len)++;
 5,156 ( 0.09%)  		string++;
     .           	}
     .           
     .           	return word;
 5,537 ( 0.09%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           unsigned int lub_string_wordcount(const char *line)
 1,505 ( 0.03%)  {
     .           	const char *word;
   301 ( 0.01%)  	unsigned int result = 0;
   602 ( 0.01%)  	size_t len = 0, offset = 0;
     .           	size_t quoted;
     .           
 3,969 ( 0.07%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
37,872 ( 0.65%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (300x)
 2,674 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   602 ( 0.01%)  		*word || quoted;
 1,962 ( 0.03%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
22,548 ( 0.38%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (327x)
     .           		/* account for the terminating quotation mark */
 1,936 ( 0.03%)  		len += quoted ? quoted - 1 : 0;
   327 ( 0.01%)  		result++;
     .           	}
     .           
     .           	return result;
 2,107 ( 0.04%)  }
     .           
     .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c
--------------------------------------------------------------------------------
Ir             

-- line 12 ----------------------------------------
    .           /*--------------------------------------------------------- */
    .           static void lub_argv_init(lub_argv_t * this, const char *line, size_t offset)
    .           {
    .           	size_t len;
    .           	const char *word;
    .           	lub_arg_t *arg;
    .           	size_t quoted;
    .           
  124 ( 0.00%)  	this->argv = NULL;
  124 ( 0.00%)  	this->argc = 0;
  372 ( 0.01%)  	if (!line)
    .           		return;
    .           	/* first of all count the words in the line */
  460 ( 0.01%)  	this->argc = lub_string_wordcount(line);
23,877 ( 0.41%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (113x)
6,376 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  228 ( 0.00%)  	if (0 == this->argc)
    .           		return;
    .           	/* allocate space to hold the vector */
  378 ( 0.01%)  	arg = this->argv = malloc(sizeof(lub_arg_t) * this->argc);
5,808 ( 0.10%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (54x)
  108 ( 0.00%)  	assert(arg);
    .           
    .           	/* then fill out the array with the words */
  920 ( 0.02%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
8,053 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (54x)
  162 ( 0.00%)  		*word || quoted;
  763 ( 0.01%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
12,661 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (109x)
  549 ( 0.01%)  		(*arg).arg = lub_string_ndecode(word, len);
24,752 ( 0.42%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_ndecode (108x)
1,158 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  218 ( 0.00%)  		(*arg).offset = offset;
  545 ( 0.01%)  		(*arg).quoted = quoted ? BOOL_TRUE : BOOL_FALSE;
    .           
  327 ( 0.01%)  		offset += len;
    .           
  218 ( 0.00%)  		if (quoted) {
    .           			len += quoted - 1; /* account for terminating quotation mark */
    .           			offset += quoted; /* account for quotation marks */
    .           		}
  109 ( 0.00%)  		arg++;
    .           	}
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           lub_argv_t *lub_argv_new(const char *line, size_t offset)
1,116 ( 0.02%)  {
    .           	lub_argv_t *this;
    .           
  496 ( 0.01%)  	this = malloc(sizeof(lub_argv_t));
14,050 ( 0.24%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (124x)
  248 ( 0.00%)  	if (this)
    .           		lub_argv_init(this, line, offset);
    .           
    .           	return this;
1,116 ( 0.02%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_argv_add(lub_argv_t * this, const char *text)
  170 ( 0.00%)  {
    .           	lub_arg_t * arg;
    .           
   68 ( 0.00%)  	if (!text)
    .           		return;
    .           
    .           	/* allocate space to hold the vector */
  238 ( 0.00%)  	arg = realloc(this->argv, sizeof(lub_arg_t) * (this->argc + 1));
9,672 ( 0.16%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (34x)
   68 ( 0.00%)  	assert(arg);
   34 ( 0.00%)  	this->argv = arg;
  306 ( 0.01%)  	(this->argv[this->argc++]).arg = strdup(text);
5,127 ( 0.09%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (34x)
  136 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           static void lub_argv_fini(lub_argv_t * this)
    .           {
    .           	unsigned i;
    .           
  799 ( 0.01%)  	for (i = 0; i < this->argc; i++)
  882 ( 0.02%)  		free(this->argv[i].arg);
11,088 ( 0.19%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (126x)
  363 ( 0.01%)  	free(this->argv);
5,665 ( 0.10%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (121x)
    .           	this->argv = NULL;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_argv_delete(lub_argv_t * this)
  605 ( 0.01%)  {
    .           	lub_argv_fini(this);
  363 ( 0.01%)  	free(this);
10,648 ( 0.18%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (121x)
  363 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_argv__get_line(const lub_argv_t * this)
    .           {
    .           	int space = 0;
    .           	const char *p;
    .           	unsigned i;
    .           	char *line = NULL;
-- line 101 ----------------------------------------
-- line 118 ----------------------------------------
    .           			lub_string_cat(&line, "\"");
    .           	}
    .           
    .           	return line;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           char **lub_argv__get_argv(const lub_argv_t * this, const char *argv0)
   42 ( 0.00%)  {
    .           	char **result = NULL;
    .           	unsigned i;
    .           	unsigned a = 0;
    .           
   14 ( 0.00%)  	if (argv0)
    7 ( 0.00%)  		a = 1;
    .           
   49 ( 0.00%)  	result = malloc(sizeof(char *) * (this->argc + 1 + a));
  735 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (7x)
    .           
    .           	if (argv0)
   42 ( 0.00%)  		result[0] = strdup(argv0);
1,059 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (7x)
  144 ( 0.00%)  	for (i = 0; i < this->argc; i++)
  340 ( 0.01%)  		result[i + a] = strdup(this->argv[i].arg);
6,615 ( 0.11%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (34x)
    7 ( 0.00%)  	result[i + a] = NULL;
    .           
    .           	return result;
   49 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_argv__free_argv(char **argv)
    .           {
    .           	unsigned i;
    .           
    .           	if (!argv)
    .           		return;
-- line 151 ----------------------------------------
-- line 155 ----------------------------------------
    .           	free(argv);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *lub_argv__get_arg(const lub_argv_t *this, unsigned int index)
    .           {
    .           	const char *result = NULL;
    .           
  236 ( 0.00%)  	if (!this)
    1 ( 0.00%)  		return NULL;
  236 ( 0.00%)  	if (this->argc > index)
  702 ( 0.01%)  		result = this->argv[index].arg;
    .           
    .           	return result;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned lub_argv__get_count(const lub_argv_t * this)
    .           {
  209 ( 0.00%)  	return this->argc;
  209 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           size_t lub_argv__get_offset(const lub_argv_t * this, unsigned index)
    .           {
    .           	size_t result = 0;
    .           
    .           	if (this->argc > index)
    .           		result = this->argv[index].offset;
-- line 183 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 11 ----------------------------------------
  .           #include <string.h>
  .           #include <assert.h>
  .           #include <limits.h>
  .           #include <stdio.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
108 ( 0.00%)  static char *clish_ptype_select__get_name(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 76 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
829 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
346 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (35x)
107 ( 0.00%)  	if (arg) {
140 ( 0.00%)  		size_t name_len = strlen(arg);
938 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (35x)
144 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
1,504 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
782 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (34x)
  .           		if (lbrk)
140 ( 0.00%)  			name_len = (size_t) (lbrk - arg);
144 ( 0.00%)  		result = lub_string_dupn(arg, name_len);
5,385 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (34x)
2,566 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           	return result;
110 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_select__get_value(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 75 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
150 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (15x)
 30 ( 0.00%)  	if (arg) {
 75 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
345 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (15x)
 75 ( 0.00%)  		const char *rbrk = strchr(arg, ')');
705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (15x)
  .           		const char *value = arg;
 45 ( 0.00%)  		size_t value_len = strlen(arg);
510 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (15x)
 45 ( 0.00%)  		if (lbrk) {
 15 ( 0.00%)  			value = lbrk + 1;
  .           			if (rbrk)
 60 ( 0.00%)  				value_len = (size_t) (rbrk - value);
  .           		}
 75 ( 0.00%)  		result = lub_string_dupn(value, value_len);
2,445 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (15x)
  .           	}
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype__set_range(clish_ptype_t * this)
  .           {
  .           	char tmp[80];
  .           
  .           	/* Now set up the range values */
 75 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* Nothing more to do */
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* Setup the integer range */
 12 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%d..%d",
  .           			this->u.integer.min, this->u.integer.max);
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		this->range = lub_string_dup(tmp);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* Setup the unsigned integer range */
 15 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%u..%u",
2,947 ( 0.05%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (3x)
  .           			(unsigned int)this->u.integer.min,
  .           			(unsigned int)this->u.integer.max);
  3 ( 0.00%)  		tmp[sizeof(tmp) - 1] = '\0';
 12 ( 0.00%)  		this->range = lub_string_dup(tmp);
680 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		/* Setup the selection values to the help text */
  .           		unsigned int i;
  .           
121 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items); i++) {
870 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 38 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (19x)
 68 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
8,855 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (17x)
  .           
 34 ( 0.00%)  			if (i > 0)
 73 ( 0.00%)  				lub_string_cat(&this->range, "/");
3,648 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (14x)
128 ( 0.00%)  			snprintf(tmp, sizeof(tmp), "%s", name);
8,790 ( 0.15%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (17x)
 17 ( 0.00%)  			tmp[sizeof(tmp) - 1] = '\0';
 68 ( 0.00%)  			lub_string_cat(&this->range, tmp);
5,400 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (17x)
 51 ( 0.00%)  			lub_string_free(name);
1,530 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (17x)
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_ptype_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_ptype_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
768 ( 0.01%)  	return strcmp(this->name, key);
7,532 ( 0.13%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (256x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_ptype_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 12 ( 0.00%)  {
  .           	const clish_ptype_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
 48 ( 0.00%)  	strcpy((char *)key, this->name);
268 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           size_t clish_ptype_bt_offset(void)
  .           {
  .           	return offsetof(clish_ptype_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *method_names[] = {
  .           	"regexp",
  .           	"integer",
  .           	"unsignedInteger",
  .           	"select"
  .           };
-- line 137 ----------------------------------------
-- line 143 ----------------------------------------
  .           
  .           	if (method >= max_method)
  .           		return NULL;
  .           	return method_names[method];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_method_e clish_ptype_method_resolve(const char *name)
 36 ( 0.00%)  {
 10 ( 0.00%)  	clish_ptype_method_e result = CLISH_PTYPE_REGEXP;
 22 ( 0.00%)  	if (NULL != name) {
  .           		unsigned i;
 36 ( 0.00%)  		for (i = 0; i < CLISH_PTYPE_SELECT + 1; i++) {
114 ( 0.00%)  			if (0 == strcmp(name, method_names[i])) {
378 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (18x)
  .           				result = (clish_ptype_method_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
  .           		assert(i <= CLISH_PTYPE_SELECT);
  .           	}
  .           	return result;
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *preprocess_names[] = {
  .           	"none",
  .           	"toupper",
  .           	"tolower"
  .           };
  .           
-- line 173 ----------------------------------------
-- line 176 ----------------------------------------
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	return preprocess_names[preprocess];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_preprocess_e clish_ptype_preprocess_resolve(const char *name)
  .           {
 22 ( 0.00%)  	clish_ptype_preprocess_e result = CLISH_PTYPE_NONE;
 22 ( 0.00%)  	if (name) {
  .           		unsigned i;
  .           		for (i = 0; i < CLISH_PTYPE_TOLOWER + 1; i++) {
  .           			if (0 == strcmp(name, preprocess_names[i])) {
  .           				result = (clish_ptype_preprocess_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
-- line 193 ----------------------------------------
-- line 198 ----------------------------------------
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC METHODS
  .            *--------------------------------------------------------- */
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype_word_generator(clish_ptype_t * this,
  .           	lub_argv_t *matches, const char *text)
 16 ( 0.00%)  {
  .           	char *result = NULL;
  .           	unsigned i = 0;
  .           
  .           	/* Another ptypes has no completions */
  8 ( 0.00%)  	if (this->method != CLISH_PTYPE_SELECT)
  .           		return;
  .           
  .           	/* First of all simply try to validate the result */
 14 ( 0.00%)  	result = clish_ptype_validate(this, text);
3,299 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,733 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate (1x)
  4 ( 0.00%)  	if (result) {
  4 ( 0.00%)  		lub_argv_add(matches, result);
312 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add (1x)
  3 ( 0.00%)  		lub_string_free(result);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  .           		return;
  .           	}
  .           
  .           	/* Iterate possible completion */
 27 ( 0.00%)  	while ((result = clish_ptype_select__get_name(this, i++))) {
759 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (4x)
  .           		/* get the next item and check if it is a completion */
 18 ( 0.00%)  		if (result == lub_string_nocasestr(result, text))
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasestr (3x)
 15 ( 0.00%)  			lub_argv_add(matches, result);
1,257 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add (3x)
  9 ( 0.00%)  		lub_string_free(result);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
  .           	}
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_validate_or_translate(const clish_ptype_t * this,
  .           	const char *text, bool_t translate)
 45 ( 0.00%)  {
 15 ( 0.00%)  	char *result = lub_string_dup(text);
776 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 15 ( 0.00%)  	assert(this->pattern);
  .           
 25 ( 0.00%)  	switch (this->preprocess) {
  .           	/*----------------------------------------- */
  .           	case CLISH_PTYPE_NONE:
  .           		break;
  .           	/*----------------------------------------- */
  .           	case CLISH_PTYPE_TOUPPER:
  .           	{
  .           		char *p = result;
  .           		while (*p) {
-- line 246 ----------------------------------------
-- line 263 ----------------------------------------
  .           		}
  .           		break;
  .           	}
  .           	/*----------------------------------------- */
  .           	}
  .           	/*
  .           	 * now validate according the specified method 
  .           	 */
 45 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* test the regular expression against the string */
  .           		/*lint -e64 Type mismatch (arg. no. 4) */
  .           		/*
  .           		 * lint seems to equate regmatch_t[] as being of type regmatch_t !
  .           		 */
  .           		if (0 != regexec(&this->u.regexp, result, 0, NULL, 0)) {
-- line 279 ----------------------------------------
-- line 329 ----------------------------------------
  .           			unsigned int value = 0;
  .           			if ((lub_conv_atoui(result, &value, 0) < 0) ||
  .           				(value < (unsigned)this->u.integer.min) ||
  .           				(value > (unsigned)this->u.integer.max)) {
  .           				lub_string_free(result);
  .           				result = NULL;
  .           			}
  .           		} else {
  4 ( 0.00%)  			lub_string_free(result);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  1 ( 0.00%)  			result = NULL;
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		unsigned i;
 80 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items);
 32 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (16x)
 11 ( 0.00%)  			i++) {
 61 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
3,705 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (15x)
  .           			char *value = clish_ptype_select__get_value(this, i);
 75 ( 0.00%)  			int tmp = lub_string_nocasecmp(result, name);
1,000 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (15x)
 75 ( 0.00%)  			lub_string_free((BOOL_TRUE ==
1,350 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (15x)
  .           				translate) ? name : value);
 42 ( 0.00%)  			if (0 == tmp) {
 16 ( 0.00%)  				lub_string_free(result);
360 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (4x)
  .           				result = ((BOOL_TRUE ==
  .           					translate) ? value : name);
  .           				break;
  .           			} else {
 33 ( 0.00%)  				lub_string_free((BOOL_TRUE ==
990 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (11x)
  .           					translate) ? value : name);
  .           			}
  .           		}
 26 ( 0.00%)  		if (i == lub_argv__get_count(this->u.select.items)) {
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (5x)
  .           			/* failed to find a match */
  .           			lub_string_free(result);
  .           			result = NULL;
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           	return (char *)result;
 45 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_init(clish_ptype_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
  .           {
 26 ( 0.00%)  	assert(name);
 52 ( 0.00%)  	this->name = lub_string_dup(name);
2,760 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
 13 ( 0.00%)  	this->text = NULL;
 13 ( 0.00%)  	this->pattern = NULL;
 13 ( 0.00%)  	this->preprocess = preprocess;
 13 ( 0.00%)  	this->range = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 43 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
947 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (12x)
  .           
 26 ( 0.00%)  	if (pattern) {
  .           		/* set the pattern for this type */
 69 ( 0.00%)  		clish_ptype__set_pattern(this, pattern, method);
1,917,560 (32.71%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern (12x)
148,076 ( 2.53%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	} else {
  .           		/* The method is regexp by default */
  .           		this->method = CLISH_PTYPE_REGEXP;
  .           	}
  .           	
  .           	/* set the help text for this type */
 26 ( 0.00%)  	if (text)
 56 ( 0.00%)  		clish_ptype__set_text(this, text);
832 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,284 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_text (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_validate(const clish_ptype_t * this, const char *text)
  .           {
  4 ( 0.00%)  	return clish_ptype_validate_or_translate(this, text, BOOL_FALSE);
5,375 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate_or_translate (2x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_translate(const clish_ptype_t * this, const char *text)
  .           {
  6 ( 0.00%)  	return clish_ptype_validate_or_translate(this, text, BOOL_TRUE);
8,202 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate_or_translate (3x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_ptype_new(const char *name,
  .           	const char *help, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
156 ( 0.00%)  {
 52 ( 0.00%)  	clish_ptype_t *this = malloc(sizeof(clish_ptype_t));
4,666 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (13x)
  .           
 26 ( 0.00%)  	if (this)
  .           		clish_ptype_init(this, name, help, pattern, method, preprocess);
  .           	return this;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_fini(clish_ptype_t * this)
  .           {
  .           	if (this->pattern) {
  .           		switch (this->method) {
  .           		case CLISH_PTYPE_REGEXP:
  .           			regfree(&this->u.regexp);
-- line 433 ----------------------------------------
-- line 469 ----------------------------------------
  .           {
  .           	return (const char *)this->text;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_pattern(clish_ptype_t * this,
  .           			 const char *pattern, clish_ptype_method_e method)
 91 ( 0.00%)  {
 26 ( 0.00%)  	assert(NULL == this->pattern);
 13 ( 0.00%)  	this->method = method;
  .           
 74 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           	{
  .           		int result;
  .           
  .           		/* only the expression is allowed */
 39 ( 0.00%)  		lub_string_cat(&this->pattern, "^");
5,043 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,648 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (6x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, pattern);
3,484 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, "$");
1,814 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
  .           
  .           		/* compile the regular expression for later use */
 39 ( 0.00%)  		result = regcomp(&this->u.regexp, this->pattern,
1,846,745 (31.50%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp (6x)
141,777 ( 2.42%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			REG_NOSUB | REG_EXTENDED);
 14 ( 0.00%)  		assert(0 == result);
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* default the range to that of an integer */
  3 ( 0.00%)  		this->u.integer.min = INT_MIN;
  3 ( 0.00%)  		this->u.integer.max = INT_MAX;
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
798 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* now try and read the specified range */
 28 ( 0.00%)  		sscanf(this->pattern, "%d..%d",
2,835 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,758 ( 0.05%)  => /opt/build/glibc/glibc-2.24/stdio-common/isoc99_sscanf.c:__isoc99_sscanf (2x)
  .           			&this->u.integer.min, &this->u.integer.max);
  3 ( 0.00%)  		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* default the range to that of an unsigned integer */
  .           		this->u.integer.min = 0;
  .           		this->u.integer.max = (int)UINT_MAX;
  .           		this->pattern = lub_string_dup(pattern);
  .           		/* now try and read the specified range */
  .           		sscanf(this->pattern, "%u..%u",
  .           			(unsigned int *)&this->u.integer.min,
  .           			(unsigned int *)&this->u.integer.max);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
808 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* store a vector of item descriptors */
 29 ( 0.00%)  		this->u.select.items = lub_argv_new(this->pattern, 0);
16,031 ( 0.27%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,229 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (2x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	}
  .           	/* now set up the range details */
  .           	clish_ptype__set_range(this);
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype__set_text(clish_ptype_t * this, const char *text)
 13 ( 0.00%)  {
 39 ( 0.00%)  	assert(!this->text);
 52 ( 0.00%)  	this->text = lub_string_dup(text);
3,317 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
  .           
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_preprocess(clish_ptype_t * this,
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	assert(!this->preprocess);
  .           	this->preprocess = preprocess;
-- line 545 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c
--------------------------------------------------------------------------------
Ir           

-- line 19 ----------------------------------------
  .           #include "lub/string.h"
  .           
  .           /*-------------------------------------------------------- */
  .           static void clish_shell_renew_prompt(clish_shell_t *this)
  .           {
  .           	clish_context_t prompt_context;
  .           	char *prompt = NULL;
  .           	const clish_view_t *view;
  1 ( 0.00%)  	char *str = NULL;
  .           
  .           	/* Create appropriate context */
  5 ( 0.00%)  	clish_context_init(&prompt_context, this);
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (1x)
  .           
  .           	/* Obtain the prompt */
  4 ( 0.00%)  	view = clish_shell__get_view(this);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (1x)
  2 ( 0.00%)  	assert(view);
  5 ( 0.00%)  	lub_string_cat(&str, "${_PROMPT_PREFIX}");
342 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
 11 ( 0.00%)  	lub_string_cat(&str, clish_view__get_prompt(view));
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
527 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&str, "${_PROMPT_SUFFIX}");
760 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  6 ( 0.00%)  	prompt = clish_shell_expand(str, SHELL_VAR_NONE, &prompt_context);
12,374 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand (1x)
  2 ( 0.00%)  	assert(prompt);
  3 ( 0.00%)  	lub_string_free(str);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  8 ( 0.00%)  	tinyrl__set_prompt(this->tinyrl, prompt);
2,501 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(prompt);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_key_help(tinyrl_t *this, int key)
  .           {
  .           	bool_t result = BOOL_TRUE;
  .           
  .           	if (tinyrl_is_quoting(this)) {
-- line 50 ----------------------------------------
-- line 113 ----------------------------------------
  .           /*
  .            * This is a CLISH specific completion function.
  .            * If the current prefix is not a recognised prefix then
  .            * an error is flagged.
  .            * If it is a recognisable prefix then possible completions are displayed
  .            * or a unique completion is inserted.
  .            */
  .           static tinyrl_match_e clish_shell_tinyrl_complete(tinyrl_t *this)
  4 ( 0.00%)  {
  .           	tinyrl_match_e status;
  .           
  .           	/* first of all perform any history expansion */
  .           	(void)clish_shell_tinyrl_expand(this);
  .           	/* perform normal completion */
  7 ( 0.00%)  	status = tinyrl_complete(this);
32,531 ( 0.55%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	switch (status) {
  .           	case TINYRL_NO_MATCH:
  7 ( 0.00%)  		if (BOOL_FALSE == tinyrl_is_completion_error_over(this)) {
935 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			/* The user hasn't even entered a valid prefix! */
  .           /*			tinyrl_crlf(this);
  .           			clish_shell_help(context->shell,
  .           				tinyrl__get_line(this));
  .           			tinyrl_crlf(this);
  .           			tinyrl_reset_line_state(this);
  .           */		}
  .           		break;
  .           	default:
  .           		/* the default completion function will have prompted for completions as
  .           		 * necessary
  .           		 */
  .           		break;
  .           	}
  .           	return status;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_key_space(tinyrl_t *this, int key)
  6 ( 0.00%)  {
  .           	bool_t result = BOOL_FALSE;
  .           	tinyrl_match_e status;
  2 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(this);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (1x)
  4 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (1x)
  8 ( 0.00%)  	const char *line = tinyrl__get_line(this);
789 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	clish_pargv_status_e arg_status;
  1 ( 0.00%)  	const clish_command_t *cmd = NULL;
  1 ( 0.00%)  	clish_pargv_t *pargv = NULL;
  .           
  9 ( 0.00%)  	if(tinyrl_is_empty(this)) {
738 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* ignore space at the begining of the line, don't display commands */
  1 ( 0.00%)  		return BOOL_TRUE;
  6 ( 0.00%)  	} else if (tinyrl_is_quoting(this)) {
 21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_is_quoting (1x)
  .           		/* if we are in the middle of a quote then simply enter a space */
  .           		result = BOOL_TRUE;
  .           	} else {
  .           		/* Find out if current line is legal. It can be
  .           		 * fully completed or partially completed.
  .           		 */
 11 ( 0.00%)  		arg_status = clish_shell_parse(shell, line, &cmd, &pargv);
4,144 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		if (pargv)
  .           			clish_pargv_delete(pargv);
  2 ( 0.00%)  		switch (arg_status) {
  .           		case CLISH_LINE_OK:
  .           		case CLISH_LINE_PARTIAL:
  .           			if (' ' != line[strlen(line) - 1])
  .           				result = BOOL_TRUE;
  .           			break;
  .           		default:
  .           			break;
  .           		}
  .           		/* If current line is illegal try to make auto-comletion. */
  .           		if (!result) {
  .           			/* perform word completion */
  2 ( 0.00%)  			status = clish_shell_tinyrl_complete(this);
33,491 ( 0.57%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_complete (1x)
  5 ( 0.00%)  			switch (status) {
  .           			case TINYRL_NO_MATCH:
  .           			case TINYRL_AMBIGUOUS:
  .           				/* ambiguous result signal an issue */
  .           				break;
  .           			case TINYRL_COMPLETED_AMBIGUOUS:
  .           				/* perform word completion again in case we just did case
  .           				   modification the first time */
  .           				status = clish_shell_tinyrl_complete(this);
-- line 194 ----------------------------------------
-- line 207 ----------------------------------------
  .           		}
  .           	}
  .           	if (result)
  .           		result = tinyrl_insert_text(this, " ");
  .           	/* keep compiler happy */
  .           	key = key;
  .           
  .           	return result;
  7 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_key_enter(tinyrl_t *this, int key)
  6 ( 0.00%)  {
  3 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(this);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (1x)
  4 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (1x)
  .           	const clish_command_t *cmd = NULL;
  4 ( 0.00%)  	const char *line = tinyrl__get_line(this);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_line (1x)
  .           	bool_t result = BOOL_FALSE;
  .           	char *errmsg = NULL;
  .           
  .           	/* Inc line counter */
  3 ( 0.00%)  	if (shell->current_file)
  1 ( 0.00%)  		shell->current_file->line++;
  .           
  .           	/* nothing to pass simply move down the screen */
  2 ( 0.00%)  	if (!*line) {
  .           		tinyrl_multi_crlf(this);
  .           		tinyrl_done(this);
  .           		return BOOL_TRUE;
  .           	}
  .           
  .           	/* try and parse the command */
  4 ( 0.00%)  	cmd = clish_shell_resolve_command(shell, line);
4,911 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_resolve_command (1x)
  2 ( 0.00%)  	if (!cmd) {
  .           		tinyrl_match_e status = clish_shell_tinyrl_complete(this);
  .           		switch (status) {
  .           		case TINYRL_MATCH:
  .           		case TINYRL_MATCH_WITH_EXTENSIONS:
  .           		case TINYRL_COMPLETED_MATCH:
  .           			/* re-fetch the line as it may have changed
  .           			 * due to auto-completion
  .           			 */
-- line 248 ----------------------------------------
-- line 263 ----------------------------------------
  .           				tinyrl_multi_crlf(this);
  .           				errmsg = "Unknown command";
  .           			}
  .           			break;
  .           		}
  .           	}
  .           	if (cmd) {
  .           		clish_pargv_status_e arg_status;
  7 ( 0.00%)  		tinyrl_multi_crlf(this);
1,465 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* we've got a command so check the syntax */
  6 ( 0.00%)  		arg_status = clish_shell_parse(shell,
5,860 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:clish_shell_parse (1x)
  .           			line, &context->cmd, &context->pargv);
  7 ( 0.00%)  		switch (arg_status) {
  .           		case CLISH_LINE_OK:
  7 ( 0.00%)  			tinyrl_done(this);
695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  1 ( 0.00%)  			result = BOOL_TRUE;
  1 ( 0.00%)  			break;
  .           		case CLISH_BAD_HISTORY:
  .           			errmsg = "Bad history entry";
  .           			break;
  .           		case CLISH_BAD_CMD:
  .           			errmsg = "Illegal command line";
  .           			break;
  .           		case CLISH_BAD_PARAM:
  .           			errmsg = "Illegal parameter";
-- line 287 ----------------------------------------
-- line 307 ----------------------------------------
  .           			"%s\n", fname, shell->current_file->line,
  .           			line, errmsg);
  .           		}
  .           	}
  .           	/* keep the compiler happy */
  .           	key = key;
  .           
  .           	return result;
  7 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_hotkey(tinyrl_t *this, int key)
  .           {
  .           	clish_view_t *view;
  .           	const char *cmd = NULL;
  .           	clish_context_t *context = tinyrl__get_context(this);
  .           	clish_shell_t *shell = clish_context__get_shell(context);
-- line 323 ----------------------------------------
-- line 348 ----------------------------------------
  .           	return BOOL_TRUE;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This is the completion function provided for CLISH */
  .           tinyrl_completion_func_t clish_shell_tinyrl_completion;
  .           char **clish_shell_tinyrl_completion(tinyrl_t * tinyrl,
  .           	const char *line, unsigned start, unsigned end)
120 ( 0.00%)  {
  .           	lub_argv_t *matches;
 20 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(tinyrl);
 20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (10x)
 40 ( 0.00%)  	clish_shell_t *this = clish_context__get_shell(context);
 20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (10x)
  .           	clish_shell_iterator_t iter;
  .           	const clish_command_t *cmd = NULL;
  .           	char *text;
 10 ( 0.00%)  	char **result = NULL;
  .           
 54 ( 0.00%)  	if (tinyrl_is_quoting(tinyrl))
788 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
648 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_is_quoting (9x)
  .           		return result;
  .           
 50 ( 0.00%)  	matches = lub_argv_new(NULL, 0);
1,349 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (10x)
 50 ( 0.00%)  	text = lub_string_dupn(line, end);
1,586 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (10x)
  .           
  .           	/* Don't bother to resort to filename completion */
 34 ( 0.00%)  	tinyrl_completion_over(tinyrl);
839 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 18 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_completion_over (9x)
  .           
  .           	/* Search for COMMAND completions */
 54 ( 0.00%)  	clish_shell_iterator_init(&iter, CLISH_NSPACE_COMPLETION);
696 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_iterator_init (9x)
294 ( 0.01%)  	while ((cmd = clish_shell_find_next_completion(this, text, &iter)))
317,310 ( 5.41%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_find_next_completion (39x)
8,467 ( 0.14%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
218 ( 0.00%)  		lub_argv_add(matches, clish_command__get_suffix(cmd));
3,494 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
13,929 ( 0.24%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add (29x)
4,519 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_suffix (29x)
  .           
  .           	/* Try and resolve a command */
 44 ( 0.00%)  	cmd = clish_shell_resolve_command(this, text);
74,636 ( 1.27%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_resolve_command (9x)
3,612 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	/* Search for PARAM completion */
 20 ( 0.00%)  	if (cmd)
 32 ( 0.00%)  		clish_shell_param_generator(this, matches, cmd, text, start);
20,451 ( 0.35%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
32,027 ( 0.55%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_param_generator (3x)
  .           
 30 ( 0.00%)  	lub_string_free(text);
900 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (10x)
  .           
  .           	/* Matches were found */
 50 ( 0.00%)  	if (lub_argv__get_count(matches) > 0) {
 20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (10x)
  .           		unsigned i;
 56 ( 0.00%)  		char *subst = lub_string_dup(lub_argv__get_arg(matches, 0));
1,083 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (7x)
 70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (7x)
  .           		/* Find out substitution */
208 ( 0.00%)  		for (i = 1; i < lub_argv__get_count(matches); i++) {
 68 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (34x)
  .           			char *p = subst;
135 ( 0.00%)  			const char *match = lub_argv__get_arg(matches, i);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (27x)
166 ( 0.00%)  			size_t match_len = strlen(p);
1,643 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
432 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (27x)
 78 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc (26x)
  .           			/* identify the common prefix */
243 ( 0.00%)  			while ((tolower(*p) == tolower(*match)) && match_len--) {
  .           				p++;
  .           				match++;
  .           			}
  .           			/* Terminate the prefix string */
 27 ( 0.00%)  			*p = '\0';
  .           		}
 39 ( 0.00%)  		result = lub_argv__get_argv(matches, subst);
4,567 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,371 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_argv (6x)
 28 ( 0.00%)  		lub_string_free(subst);
630 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (7x)
  .           	}
 30 ( 0.00%)  	lub_argv_delete(matches);
5,146 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (10x)
  .           
  .           	return result;
 90 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static void clish_shell_tinyrl_init(tinyrl_t * this)
  .           {
  .           	bool_t status;
  .           	/* bind the '?' key to the help function */
  9 ( 0.00%)  	status = tinyrl_bind_key(this, '?', clish_shell_tinyrl_key_help);
835 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	assert(status);
  .           
  .           	/* bind the <RET> key to the help function */
  5 ( 0.00%)  	status = tinyrl_bind_key(this, '\r', clish_shell_tinyrl_key_enter);
  7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
  2 ( 0.00%)  	assert(status);
  5 ( 0.00%)  	status = tinyrl_bind_key(this, '\n', clish_shell_tinyrl_key_enter);
  7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
  2 ( 0.00%)  	assert(status);
  .           
  .           	/* bind the <SPACE> key to auto-complete if necessary */
  5 ( 0.00%)  	status = tinyrl_bind_key(this, ' ', clish_shell_tinyrl_key_space);
  7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
  2 ( 0.00%)  	assert(status);
  .           
  .           	/* Set external hotkey callback */
  8 ( 0.00%)  	tinyrl__set_hotkey_fn(this, clish_shell_tinyrl_hotkey);
808 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Assign timeout callback */
  8 ( 0.00%)  	tinyrl__set_timeout_fn(this, clish_shell_timeout_fn);
847 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	/* Assign keypress callback */
  8 ( 0.00%)  	tinyrl__set_keypress_fn(this, clish_shell_keypress_fn);
838 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           /*
  .            * Create an instance of the specialised class
  .            */
  .           tinyrl_t *clish_shell_tinyrl_new(FILE * istream,
  .           	FILE * ostream, unsigned stifle)
  1 ( 0.00%)  {
  .           	/* call the parent constructor */
  8 ( 0.00%)  	tinyrl_t *this = tinyrl_new(istream,
11,579 ( 0.20%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		ostream, stifle, clish_shell_tinyrl_completion);
  .           	/* now call our own constructor */
  2 ( 0.00%)  	if (this)
  .           		clish_shell_tinyrl_init(this);
  .           	return this;
  3 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell_tinyrl_fini(tinyrl_t * this)
  .           {
  .           	/* nothing to do... yet */
  .           	this = this;
  .           }
  .           
-- line 461 ----------------------------------------
-- line 465 ----------------------------------------
  .           	/* call our destructor */
  .           	clish_shell_tinyrl_fini(this);
  .           	/* and call the parent destructor */
  .           	tinyrl_delete(this);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           static int clish_shell_execline(clish_shell_t *this, const char *line, char **out)
  7 ( 0.00%)  {
  .           	char *str;
  .           	clish_context_t context;
  .           	tinyrl_history_t *history;
  .           	int lerror = 0;
  .           
  2 ( 0.00%)  	assert(this);
  1 ( 0.00%)  	this->state = SHELL_STATE_OK;
 10 ( 0.00%)  	if (!line && !tinyrl__get_istream(this->tinyrl)) {
  5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_istream (1x)
  .           		this->state = SHELL_STATE_SYSTEM_ERROR;
  .           		return -1;
  .           	}
  .           
  .           	/* Renew prompt */
  .           	clish_shell_renew_prompt(this);
  .           
  .           	/* Set up the context for tinyrl */
  4 ( 0.00%)  	clish_context_init(&context, this);
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (1x)
  .           
  .           	/* Push the specified line or interactive line */
  2 ( 0.00%)  	if (line)
  1 ( 0.00%)  		str = tinyrl_forceline(this->tinyrl, &context, line);
  .           	else
  9 ( 0.00%)  		str = tinyrl_readline(this->tinyrl, &context);
725,679 (12.38%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  	lerror = errno;
1,596 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	if (!str) {
  .           		switch (lerror) {
  .           		case ENOENT:
  .           			this->state = SHELL_STATE_EOF;
  .           			break;
  .           		case ENOEXEC:
  .           			this->state = SHELL_STATE_SYNTAX_ERROR;
  .           			break;
  .           		default:
  .           			this->state = SHELL_STATE_SYSTEM_ERROR;
  .           			break;
  .           		};
  .           		return -1;
  .           	}
  .           
  .           	/* Deal with the history list */
  9 ( 0.00%)  	if (tinyrl__get_isatty(this->tinyrl)) {
810 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  7 ( 0.00%)  		history = tinyrl__get_history(this->tinyrl);
878 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  9 ( 0.00%)  		tinyrl_history_add(history, str);
2,447 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  3 ( 0.00%)  	free(str);
 88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
  .           
  .           	/* Execute the provided command */
  4 ( 0.00%)  	if (context.cmd && context.pargv) {
  .           		int res;
  4 ( 0.00%)  		if ((res = clish_shell_execute(&context, out))) {
7,866 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_execute.c:clish_shell_execute (1x)
  .           			this->state = SHELL_STATE_SCRIPT_ERROR;
  .           			if (context.pargv)
  .           				clish_pargv_delete(context.pargv);
  .           			return res;
  .           		}
  .           	}
  .           
  .           	if (context.pargv)
-- line 531 ----------------------------------------
-- line 537 ----------------------------------------
  .           /*-------------------------------------------------------- */
  .           int clish_shell_forceline(clish_shell_t *this, const char *line, char **out)
  .           {
  .           	return clish_shell_execline(this, line, out);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           int clish_shell_readline(clish_shell_t *this, char **out)
  1 ( 0.00%)  {
  2 ( 0.00%)  	return clish_shell_execline(this, NULL, out);
756,875 (12.91%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_execline (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           FILE * clish_shell__get_istream(const clish_shell_t * this)
  .           {
  .           	return tinyrl__get_istream(this->tinyrl);
  .           }
  .           
-- line 554 ----------------------------------------
-- line 577 ----------------------------------------
  .           {
  .           	assert(this);
  .           	return tinyrl__get_utf8(this->tinyrl);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell__set_utf8(clish_shell_t * this, bool_t utf8)
  .           {
  2 ( 0.00%)  	assert(this);
  7 ( 0.00%)  	tinyrl__set_utf8(this->tinyrl, utf8);
768 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell__set_timeout(clish_shell_t *this, unsigned int timeout)
  .           {
  .           	assert(this);
  .           	this->idle_timeout = timeout;
  .           }
-- line 594 ----------------------------------------
-- line 603 ----------------------------------------
  .           int clish_shell__save_history(const clish_shell_t *this, const char *fname)
  .           {
  .           	return tinyrl__save_history(this->tinyrl, fname);
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           int clish_shell__restore_history(clish_shell_t *this, const char *fname)
  .           {
  7 ( 0.00%)  	return tinyrl__restore_history(this->tinyrl, fname);
32,950 ( 0.56%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           void clish_shell__stifle_history(clish_shell_t *this, unsigned int stifle)
  .           {
  7 ( 0.00%)  	tinyrl__stifle_history(this->tinyrl, stifle);
1,599 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c
--------------------------------------------------------------------------------
Ir             

-- line 50 ----------------------------------------
    .           
    .           	this = this; /* Happy compiler */
    .           
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_printf(const tinyrl_vt100_t * this, const char *fmt, ...)
1,197 ( 0.02%)  {
    .           	va_list args;
    .           	int len;
    .           
  342 ( 0.01%)  	if (!this->ostream)
  171 ( 0.00%)  		return 0;
1,026 ( 0.02%)  	va_start(args, fmt);
  513 ( 0.01%)  	len = tinyrl_vt100_vprintf(this, fmt, args);
79,838 ( 1.36%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_vprintf (171x)
    .           	va_end(args);
    .           
    .           	return len;
  342 ( 0.01%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           int
    .           tinyrl_vt100_vprintf(const tinyrl_vt100_t * this, const char *fmt, va_list args)
    .           {
  516 ( 0.01%)  	if (!this->ostream)
    .           		return 0;
  348 ( 0.01%)  	return vfprintf(this->ostream, fmt, args);
78,983 ( 1.35%)  => /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf (171x)
17,314 ( 0.30%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_getchar(const tinyrl_vt100_t *this)
  354 ( 0.01%)  {
    .           	unsigned char c;
    .           	int istream_fd;
    .           	fd_set rfds;
    .           	struct timeval tv;
    .           	int retval;
    .           	ssize_t res;
    .           
  177 ( 0.00%)  	if (!this->istream)
    .           		return VT100_ERR;
  236 ( 0.00%)  	istream_fd = fileno(this->istream);
  354 ( 0.01%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (59x)
    .           
    .           	/* Just wait for the input if no timeout */
  177 ( 0.00%)  	if (this->timeout <= 0) {
  417 ( 0.01%)  		while (((res = read(istream_fd, &c, 1)) < 0) &&
1,452 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  406 ( 0.01%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (58x)
    .           			(EAGAIN == errno));
    .           		/* EOF or error */
    .           		if (res < 0)
    .           			return VT100_ERR;
    .           		if (!res)
    .           			return VT100_EOF;
    .           		return c;
    .           	}
-- line 104 ----------------------------------------
-- line 115 ----------------------------------------
    .           		return VT100_ERR;
    .           	if (!retval)
    .           		return VT100_TIMEOUT;
    .           
    .           	res = read(istream_fd, &c, 1);
    .           	/* EOF or error */
    .           	if (res < 0)
    .           		return VT100_ERR;
   59 ( 0.00%)  	if (!res)
   59 ( 0.00%)  		return VT100_EOF;
    .           
   59 ( 0.00%)  	return c;
  472 ( 0.01%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_oflush(const tinyrl_vt100_t * this)
    .           {
  255 ( 0.00%)  	if (!this->ostream)
    .           		return 0;
  174 ( 0.00%)  	return fflush(this->ostream);
13,272 ( 0.23%)  => /opt/build/glibc/glibc-2.24/libio/iofflush.c:fflush (84x)
1,633 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_ierror(const tinyrl_vt100_t * this)
    .           {
    .           	if (!this->istream)
    .           		return 0;
    .           	return ferror(this->istream);
-- line 142 ----------------------------------------
-- line 163 ----------------------------------------
    .           {
    .           	if (!this->istream)
    .           		return 0;
    .           	return feof(this->istream);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           unsigned int tinyrl_vt100__get_width(const tinyrl_vt100_t *this)
   75 ( 0.00%)  {
    .           #ifdef TIOCGWINSZ
    .           	struct winsize ws;
    .           	int res;
    .           #endif
    .           
  225 ( 0.00%)  	if(!this->ostream)
    .           		return 80;
    .           
    .           #ifdef TIOCGWINSZ
  150 ( 0.00%)  	ws.ws_col = 0;
  608 ( 0.01%)  	res = ioctl(fileno(this->ostream), TIOCGWINSZ, &ws);
2,925 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
  444 ( 0.01%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (74x)
  370 ( 0.01%)  => /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/syscall-template.S:ioctl (74x)
  450 ( 0.01%)  	if (res || !ws.ws_col)
    .           		return 80;
    .           	return ws.ws_col;
    .           #else
    .           	return 80;
    .           #endif
  150 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           unsigned int tinyrl_vt100__get_height(const tinyrl_vt100_t *this)
    .           {
    .           #ifdef TIOCGWINSZ
    .           	struct winsize ws;
    .           	int res;
    .           #endif
-- line 197 ----------------------------------------
-- line 209 ----------------------------------------
    .           	return 25;
    .           #endif
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void
    .           tinyrl_vt100_init(tinyrl_vt100_t * this, FILE * istream, FILE * ostream)
    .           {
    1 ( 0.00%)  	this->istream = istream;
    1 ( 0.00%)  	this->ostream = ostream;
    1 ( 0.00%)  	this->timeout = -1; /* No timeout by default */
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void tinyrl_vt100_fini(tinyrl_vt100_t * this)
    .           {
    .           	/* nothing to do yet... */
    .           	this = this;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           tinyrl_vt100_t *tinyrl_vt100_new(FILE * istream, FILE * ostream)
    5 ( 0.00%)  {
    .           	tinyrl_vt100_t *this = NULL;
    .           
    3 ( 0.00%)  	this = malloc(sizeof(tinyrl_vt100_t));
  197 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
    2 ( 0.00%)  	if (this) {
    .           		tinyrl_vt100_init(this, istream, ostream);
    .           	}
    .           
    .           	return this;
    4 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_delete(tinyrl_vt100_t * this)
    .           {
    .           	tinyrl_vt100_fini(this);
    .           	/* release the memory */
    .           	free(this);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_ding(const tinyrl_vt100_t * this)
   28 ( 0.00%)  {
   70 ( 0.00%)  	tinyrl_vt100_printf(this, "%c", KEY_BEL);
5,012 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (14x)
   42 ( 0.00%)  	(void)tinyrl_vt100_oflush(this);
2,702 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (14x)
   14 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_attribute_reset(const tinyrl_vt100_t * this)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[0m", KEY_ESC);
    .           }
    .           
    .           /*-------------------------------------------------------- */
-- line 263 ----------------------------------------
-- line 325 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_cursor_forward(const tinyrl_vt100_t * this, unsigned count)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[%dC", KEY_ESC, count);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_cursor_back(const tinyrl_vt100_t * this, unsigned count)
   21 ( 0.00%)  {
  105 ( 0.00%)  	tinyrl_vt100_printf(this, "%c[%dD", KEY_ESC, count);
16,737 ( 0.29%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (21x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_cursor_up(const tinyrl_vt100_t * this, unsigned count)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[%dA", KEY_ESC, count);
    .           }
    .           
-- line 342 ----------------------------------------
-- line 374 ----------------------------------------
    .           void tinyrl_vt100_erase(const tinyrl_vt100_t * this, unsigned count)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[%dP", KEY_ESC, count);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100__set_timeout(tinyrl_vt100_t *this, int timeout)
    .           {
    2 ( 0.00%)  	this->timeout = timeout;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_erase_down(const tinyrl_vt100_t * this)
    .           {
  105 ( 0.00%)  	tinyrl_vt100_printf(this, "%c[J", KEY_ESC);
8,925 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (21x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100__set_istream(tinyrl_vt100_t * this, FILE * istream)
    .           {
    4 ( 0.00%)  	this->istream = istream;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl_vt100__get_istream(const tinyrl_vt100_t * this)
    .           {
    7 ( 0.00%)  	return this->istream;
    7 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl_vt100__get_ostream(const tinyrl_vt100_t * this)
    .           {
    .           	return this->ostream;
    .           }
    .           
    .           /*-------------------------------------------------------- */
-- line 409 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/command/command.c
--------------------------------------------------------------------------------
Ir             

-- line 15 ----------------------------------------
    .           
    .           /*---------------------------------------------------------
    .            * PRIVATE METHODS
    .            *--------------------------------------------------------- */
    .           static void
    .           clish_command_init(clish_command_t *this, const char *name, const char *text)
    .           {
    .           	/* initialise the node part */
  108 ( 0.00%)  	this->name = lub_string_dup(name);
5,722 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
  108 ( 0.00%)  	this->text = lub_string_dup(text);
5,797 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
    .           
    .           	/* Be a good binary tree citizen */
   81 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
  135 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (27x)
    .           
    .           	/* set up defaults */
   27 ( 0.00%)  	this->link = NULL;
   27 ( 0.00%)  	this->alias = NULL;
   27 ( 0.00%)  	this->alias_view = NULL;
   85 ( 0.00%)  	this->paramv = clish_paramv_new();
4,421 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_new (26x)
  801 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   27 ( 0.00%)  	this->viewid = NULL;
   27 ( 0.00%)  	this->viewname = NULL;
   85 ( 0.00%)  	this->action = clish_action_new();
4,443 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action_new (26x)
  802 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   85 ( 0.00%)  	this->config = clish_config_new();
5,589 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config_new (26x)
  808 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   27 ( 0.00%)  	this->detail = NULL;
   27 ( 0.00%)  	this->escape_chars = NULL;
   27 ( 0.00%)  	this->regex_chars = NULL;
   27 ( 0.00%)  	this->args = NULL;
   27 ( 0.00%)  	this->pview = NULL;
   27 ( 0.00%)  	this->lock = BOOL_TRUE;
   27 ( 0.00%)  	this->interrupt = BOOL_FALSE;
   27 ( 0.00%)  	this->dynamic = BOOL_FALSE;
   27 ( 0.00%)  	this->access = NULL;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           static void clish_command_fini(clish_command_t * this)
    .           {
    .           	lub_string_free(this->name);
    .           	lub_string_free(this->text);
    .           
-- line 54 ----------------------------------------
-- line 74 ----------------------------------------
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC META FUNCTIONS
    .            *--------------------------------------------------------- */
    .           size_t clish_command_bt_offset(void)
    .           {
    .           	return offsetof(clish_command_t, bt_node);
   10 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_bt_compare(const void *clientnode, const void *clientkey)
    .           {
    .           	const clish_command_t *this = clientnode;
    .           	const char *key = clientkey;
    .           
4,461 ( 0.08%)  	return lub_string_nocasecmp(this->name, key);
219,257 ( 3.74%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (1,487x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
   47 ( 0.00%)  {
    .           	const clish_command_t *this = clientnode;
    .           
    .           	/* fill out the opaque key */
  188 ( 0.00%)  	strcpy((char *)key, this->name);
1,033 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (47x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_new(const char *name, const char *help)
  135 ( 0.00%)  {
  108 ( 0.00%)  	clish_command_t *this = malloc(sizeof(clish_command_t));
9,888 ( 0.17%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (27x)
    .           
   54 ( 0.00%)  	if (this)
    .           		clish_command_init(this, name, help);
    .           
    .           	return this;
  135 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_new_link(const char *name,
    .           	const char *help, const clish_command_t * ref)
    .           {
    .           	if (!ref)
    .           		return NULL;
    .           
-- line 119 ----------------------------------------
-- line 162 ----------------------------------------
    .           {
    .           	clish_command_fini(this);
    .           	free(this);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command_insert_param(clish_command_t * this, clish_param_t * param)
    .           {
   61 ( 0.00%)  	clish_paramv_insert(this->paramv, param);
3,426 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_insert (18x)
  865 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_help(const clish_command_t *this)
    .           {
    .           	this = this; /* Happy compiler */
    .           
    .           	return 0;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_choose_longest(clish_command_t * cmd1,
    .           	clish_command_t * cmd2)
   78 ( 0.00%)  {
   26 ( 0.00%)  	unsigned len1 = (cmd1 ? strlen(clish_command__get_name(cmd1)) : 0);
   62 ( 0.00%)  	unsigned len2 = (cmd2 ? strlen(clish_command__get_name(cmd2)) : 0);
   96 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (6x)
   24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (6x)
    .           
    .           	if (len2 < len1) {
    .           		return cmd1;
   12 ( 0.00%)  	} else if (len1 < len2) {
    .           		return cmd2;
    .           	} else {
    .           		/* let local view override */
    7 ( 0.00%)  		return cmd1;
    .           	}
   65 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_diff(const clish_command_t * cmd1,
    .           	const clish_command_t * cmd2)
   80 ( 0.00%)  {
   80 ( 0.00%)  	if (NULL == cmd1) {
   96 ( 0.00%)  		if (NULL != cmd2)
    .           			return 1;
    .           		else
    .           			return 0;
    .           	}
   32 ( 0.00%)  	if (NULL == cmd2)
    .           		return -1;
    .           
  160 ( 0.00%)  	return lub_string_nocasecmp(clish_command__get_name(cmd1),
  896 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (16x)
  128 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (32x)
    .           		clish_command__get_name(cmd2));
   48 ( 0.00%)  }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC ATTRIBUTES
    .            *--------------------------------------------------------- */
    .           const char *clish_command__get_name(const clish_command_t * this)
    .           {
  506 ( 0.01%)  	if (!this)
    .           		return NULL;
  506 ( 0.01%)  	return this->name;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_text(const clish_command_t * this)
    .           {
    .           	return this->text;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_detail(const clish_command_t * this)
    .           {
    1 ( 0.00%)  	return this->detail;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_detail(clish_command_t * this, const char *detail)
    4 ( 0.00%)  {
   12 ( 0.00%)  	assert(NULL == this->detail);
   16 ( 0.00%)  	this->detail = lub_string_dup(detail);
2,047 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (4x)
    8 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_action_t *clish_command__get_action(const clish_command_t *this)
    .           {
   33 ( 0.00%)  	return this->action;
   33 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_config_t *clish_command__get_config(const clish_command_t *this)
    .           {
   10 ( 0.00%)  	return this->config;
   10 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_viewname(clish_command_t * this, const char *viewname)
    .           {
   18 ( 0.00%)  	assert(NULL == this->viewname);
   22 ( 0.00%)  	clish_command__force_viewname(this, viewname);
1,849 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewname (8x)
  985 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__force_viewname(clish_command_t * this, const char *viewname)
   45 ( 0.00%)  {
   27 ( 0.00%)  	if (this->viewname)
    .           		lub_string_free(this->viewname);
   36 ( 0.00%)  	this->viewname = lub_string_dup(viewname);
1,949 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (9x)
   36 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_viewname(const clish_command_t * this)
    .           {
    4 ( 0.00%)  	return this->viewname;
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_viewid(clish_command_t * this, const char *viewid)
    .           {
    6 ( 0.00%)  	assert(NULL == this->viewid);
   10 ( 0.00%)  	clish_command__force_viewid(this, viewid);
1,136 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  455 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewid (2x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__force_viewid(clish_command_t * this, const char *viewid)
   15 ( 0.00%)  {
    9 ( 0.00%)  	if (this->viewid)
    .           		lub_string_free(this->viewid);
   12 ( 0.00%)  	this->viewid = lub_string_dup(viewid);
  734 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
   12 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_viewid(const clish_command_t * this)
    .           {
    1 ( 0.00%)  	return this->viewid;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_param_t *clish_command__get_param(const clish_command_t * this,
    .           	unsigned index)
    .           {
    .           	return clish_paramv__get_param(this->paramv, index);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_suffix(const clish_command_t * this)
    .           {
   94 ( 0.00%)  	return lub_string_suffix(this->name);
4,432 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_suffix (29x)
1,719 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void
    .           clish_command__set_escape_chars(clish_command_t * this,
    .           	const char *escape_chars)
    1 ( 0.00%)  {
    3 ( 0.00%)  	assert(!this->escape_chars);
    4 ( 0.00%)  	this->escape_chars = lub_string_dup(escape_chars);
  156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_escape_chars(const clish_command_t * this)
    .           {
    2 ( 0.00%)  	return this->escape_chars;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_regex_chars(clish_command_t *this,
    .           	const char *escape_chars)
    .           {
    .           	assert(!this->regex_chars);
    .           	this->regex_chars = lub_string_dup(escape_chars);
    .           }
-- line 332 ----------------------------------------
-- line 335 ----------------------------------------
    .           const char *clish_command__get_regex_chars(const clish_command_t *this)
    .           {
    .           	return this->regex_chars;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_args(clish_command_t * this, clish_param_t * args)
    .           {
    2 ( 0.00%)  	assert(NULL == this->args);
    2 ( 0.00%)  	this->args = args;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_param_t *clish_command__get_args(const clish_command_t * this)
    .           {
   30 ( 0.00%)  	return this->args;
   30 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned int clish_command__get_param_count(const clish_command_t * this)
    .           {
   13 ( 0.00%)  	return clish_paramv__get_count(this->paramv);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_count (2x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_paramv_t *clish_command__get_paramv(const clish_command_t * this)
    .           {
   36 ( 0.00%)  	return this->paramv;
   36 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_pview(clish_command_t * this, clish_view_t * view)
    .           {
   52 ( 0.00%)  	this->pview = view;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_t *clish_command__get_pview(const clish_command_t * this)
    .           {
    .           	return this->pview;
    .           }
    .           
-- line 376 ----------------------------------------
-- line 380 ----------------------------------------
    .           	if (!this->pview)
    .           		return 0;
    .           	return clish_view__get_depth(this->pview);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_restore_e clish_command__get_restore(const clish_command_t * this)
    .           {
    6 ( 0.00%)  	if (!this->pview)
    .           		return CLISH_RESTORE_NONE;
    6 ( 0.00%)  	return clish_view__get_restore(this->pview);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t * clish_command__get_orig(const clish_command_t * this)
    .           {
    .           	if (this->link)
    .           		return clish_command__get_orig(this->link);
    .           	return this;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_lock(const clish_command_t * this)
    .           {
    2 ( 0.00%)  	return this->lock;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_lock(clish_command_t * this, bool_t lock)
    .           {
   56 ( 0.00%)  	this->lock = lock;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_alias(clish_command_t * this, const char * alias)
    .           {
    .           	if (this->alias)
    .           		lub_string_free(this->alias);
    .           	this->alias = lub_string_dup(alias);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char * clish_command__get_alias(const clish_command_t * this)
    .           {
   26 ( 0.00%)  	return this->alias;
   26 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_alias_view(clish_command_t *this,
    .           	const char *alias_view)
    .           {
    .           	if (this->alias_view)
    .           		lub_string_free(this->alias_view);
    .           	this->alias_view = lub_string_dup(alias_view);
-- line 433 ----------------------------------------
-- line 448 ----------------------------------------
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_dynamic(const clish_command_t * this)
    .           {
    .           	return this->dynamic;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t * clish_command__get_cmd(const clish_command_t * this)
    4 ( 0.00%)  {
    6 ( 0.00%)  	if (!this->dynamic)
    .           		return this;
    .           	if (this->link)
    .           		return clish_command__get_cmd(this->link);
    .           	return NULL;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_interrupt(const clish_command_t * this)
    .           {
    2 ( 0.00%)  	return this->interrupt;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_interrupt(clish_command_t * this, bool_t interrupt)
    .           {
   54 ( 0.00%)  	this->interrupt = interrupt;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_access(clish_command_t *this, const char *access)
    5 ( 0.00%)  {
    3 ( 0.00%)  	if (this->access)
    .           		lub_string_free(this->access);
    4 ( 0.00%)  	this->access = lub_string_dup(access);
  155 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_access(const clish_command_t *this)
    .           {
    .           	return this->access;
    .           }

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c
--------------------------------------------------------------------------------
Ir          

-- line 9 ----------------------------------------
 .           #include "lub/string.h"
 .           #include "lub/list.h"
 .           #include "lub/bintree.h"
 .           #include "clish/plugin.h"
 .           #include "clish/view.h"
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_plugin_t * clish_shell_find_plugin(clish_shell_t *this, const char *name)
 3 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           
 2 ( 0.00%)  	assert(this);
 .           
 5 ( 0.00%)  	if (!name || !name[0])
 1 ( 0.00%)  		return NULL;
 .           	/* Iterate elements */
 7 ( 0.00%)  	for(iter = lub_list__get_head(this->plugins);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 .           		iter; iter = lub_list_node__get_next(iter)) {
 .           		plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 .           		if (!strcmp(name, clish_plugin__get_name(plugin)))
 .           			return plugin;
 .           	}
 .           
 .           	return NULL;
 5 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_plugin_t * clish_shell_find_create_plugin(clish_shell_t *this,
 .           	const char *name)
 3 ( 0.00%)  {
 .           	clish_plugin_t *plugin;
 2 ( 0.00%)  	assert(this);
 .           
 6 ( 0.00%)  	if (!name || !name[0])
 1 ( 0.00%)  		return NULL;
 .           
 7 ( 0.00%)  	plugin = clish_shell_find_plugin(this, name);
710 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 2 ( 0.00%)  	if (plugin)
 .           		return plugin;
 8 ( 0.00%)  	plugin = clish_plugin_new(name);
1,448 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 4 ( 0.00%)  	lub_list_add(this->plugins, plugin);
249 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (1x)
 .           
 1 ( 0.00%)  	return plugin;
 5 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* For all plugins:
 .            *  * dlopen(plugin)
 .            *  * dlsym(initialize function)
 .            *  * exec init functions to get all plugin syms
 .            */
 .           int clish_shell_load_plugins(clish_shell_t *this)
 3 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           
 3 ( 0.00%)  	assert(this);
 .           
 .           	/* Iterate elements */
 8 ( 0.00%)  	for(iter = lub_list__get_head(this->plugins);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
 4 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (1x)
 3 ( 0.00%)  		plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (1x)
10 ( 0.00%)  		if (clish_plugin_load(plugin, (void *)this))
155,096 ( 2.65%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           			return -1;
 .           #ifdef DEBUG
 .           		clish_plugin_dump(plugin);
 .           #endif
 .           	}
 .           
 1 ( 0.00%)  	return 0;
 4 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Iterate plugins to find symbol by name.
 .            * The symbol name can be simple or with namespace:
 .            * mysym@plugin1
 .            * The symbols with suffix will be resolved using specified plugin only.
 .            */
 .           static clish_sym_t *plugins_find_sym(clish_shell_t *this, const char *name, int type)
 .           {
 .           	lub_list_node_t *iter;
 .           	clish_plugin_t *plugin;
 .           	clish_sym_t *sym = NULL;
 .           	/* To parse command name */
 6 ( 0.00%)  	char *saveptr = NULL;
 .           	const char *delim = "@";
 .           	char *plugin_name = NULL;
 .           	char *cmdn = NULL;
24 ( 0.00%)  	char *str = lub_string_dup(name);
1,045 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (6x)
 .           
 .           	assert(this);
 .           
 .           	/* Parse name to get sym name and optional plugin name */
42 ( 0.00%)  	cmdn = strtok_r(str, delim, &saveptr);
1,583 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
597 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r (5x)
12 ( 0.00%)  	if (!cmdn) {
 .           		lub_string_free(str);
 .           		return NULL;
 .           	}
36 ( 0.00%)  	plugin_name = strtok_r(NULL, delim, &saveptr);
483 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r (6x)
 .           
12 ( 0.00%)  	if (plugin_name) {
 .           		/* Search for symbol in specified namespace */
 .           		/* Iterate elements */
27 ( 0.00%)  		for(iter = lub_list__get_head(this->plugins);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 .           			iter; iter = lub_list_node__get_next(iter)) {
12 ( 0.00%)  			plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
31 ( 0.00%)  			if (strcmp(clish_plugin__get_pubname(plugin), plugin_name))
730 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
177 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (3x)
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin__get_pubname (2x)
 .           				continue;
21 ( 0.00%)  			if ((sym = clish_plugin_get_sym(plugin, cmdn, type)))
1,151 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym (3x)
 .           				break;
 .           		}
 .           	} else {
 .           		/* Iterate all plugins */
15 ( 0.00%)  		for(iter = lub_list__get_head(this->plugins);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 .           			iter; iter = lub_list_node__get_next(iter)) {
 9 ( 0.00%)  			plugin = (clish_plugin_t *)lub_list_node__get_data(iter);
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
28 ( 0.00%)  			if ((sym = clish_plugin_get_sym(plugin, cmdn, type)))
722 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
609 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym (2x)
 .           				break;
 .           		}
 .           	}
24 ( 0.00%)  	lub_string_free(str);
540 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (6x)
 .           
 .           	return sym;
 .           }
 .           
 .           /*--------------------------------------------------------- */
 .           /* Find symbol by name in the list of unresolved symbols */
 .           clish_sym_t *clish_shell_find_sym(clish_shell_t *this, const char *name, int type)
28 ( 0.00%)  {
 .           	lub_list_node_t *iter;
 .           	clish_sym_t *sym;
 .           
 .           	/* Iterate elements */
31 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
853 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (3x)
 8 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
900 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		int res;
20 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
877 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (3x)
32 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
639 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
132 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (4x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (3x)
19 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           			return sym;
 3 ( 0.00%)  		if (res > 0) /* No chance to find name */
 .           			break;
 .           	}
 .           
 3 ( 0.00%)  	return NULL;
28 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Add symbol to the table of unresolved symbols */
 .           clish_sym_t *clish_shell_add_sym(clish_shell_t *this,
 .           	void *func, const char *name, int type)
20 ( 0.00%)  {
 .           	clish_sym_t *sym = NULL;
 .           
16 ( 0.00%)  	if (!name)
 .           		return NULL;
40 ( 0.00%)  	if ((sym = clish_shell_find_sym(this, name, type)))
3,375 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_find_sym (3x)
1,564 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           		return sym;
24 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
1,208 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (3x)
 .           		return NULL;
19 ( 0.00%)  	lub_list_add(this->syms, sym);
1,697 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
568 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (2x)
 .           
 .           	return sym;
28 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           clish_sym_t *clish_shell_add_unresolved_sym(clish_shell_t *this,
 .           	const char *name, int type)
 .           {
24 ( 0.00%)  	return clish_shell_add_sym(this, NULL, name, type);
4,949 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_sym (3x)
4,301 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 .           }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Link one unresolved symbol.
 .            * sym - unresolved symbol
 .            * Returns 0 if the symbol was succesfully resolved
 .            */
 .           static int link_unresolved_sym(clish_shell_t *this, clish_sym_t *sym)
 .           {
 .           	clish_sym_t *plugin_sym;
 .           	char *sym_name = NULL;
 .           	int sym_type;
 .           
34 ( 0.00%)  	if (clish_sym__get_func(sym)) /* Don't relink non-null fn */
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (5x)
 .           		return 0;
30 ( 0.00%)  	sym_name = clish_sym__get_name(sym);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (6x)
24 ( 0.00%)  	sym_type = clish_sym__get_type(sym);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
 .           	plugin_sym = plugins_find_sym(this, sym_name, sym_type);
 .           	if (!plugin_sym) {
 .           		fprintf(stderr, "Error: Can't resolve symbol %s.\n",
 .           			sym_name);
 .           		return -1;
 .           	}
 .           	/* Copy symbol attributes */
34 ( 0.00%)  	clish_sym_clone(sym, plugin_sym);
623 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_clone (5x)
 .           
 .           	return 0;
 .           }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Link unresolved symbols */
 .           int clish_shell_link_plugins(clish_shell_t *this)
 8 ( 0.00%)  {
 .           	clish_sym_t *sym;
 .           	lub_list_node_t *iter;
 .           
 .           	/* Iterate elements */
18 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (1x)
24 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (6x)
24 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (6x)
 .           		if (link_unresolved_sym(this, sym) < 0)
 .           			return -1;
 .           	}
 .           
 1 ( 0.00%)  	return 0;
 8 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------------------- */
 .           /* Get hook sym */
 .           clish_sym_t *clish_shell_get_hook(const clish_shell_t *this, int type)
 .           {
 2 ( 0.00%)  	return this->hooks[type];
 1 ( 0.00%)  }

--------------------------------------------------------------------------------
The following files chosen for auto-annotation could not be found:
--------------------------------------------------------------------------------
  /opt/build/glibc/glibc-2.24/csu/../csu/libc-start.c
  /opt/build/glibc/glibc-2.24/dlfcn/dlerror.c
  /opt/build/glibc/glibc-2.24/dlfcn/dlopen.c
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-sysdep.c
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h
  /opt/build/glibc/glibc-2.24/elf/dl-addr.c
  /opt/build/glibc/glibc-2.24/elf/dl-deps.c
  /opt/build/glibc/glibc-2.24/elf/dl-error.c
  /opt/build/glibc/glibc-2.24/elf/dl-load.c
  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c
  /opt/build/glibc/glibc-2.24/elf/dl-misc.c
  /opt/build/glibc/glibc-2.24/elf/dl-open.c
  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c
  /opt/build/glibc/glibc-2.24/elf/rtld.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c
  /opt/build/glibc/glibc-2.24/intl/../intl/l10nflist.c
  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c
  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c
  /opt/build/glibc/glibc-2.24/locale/findlocale.c
  /opt/build/glibc/glibc-2.24/locale/loadarchive.c
  /opt/build/glibc/glibc-2.24/locale/setlocale.c
  /opt/build/glibc/glibc-2.24/malloc/arena.c
  /opt/build/glibc/glibc-2.24/malloc/hooks.c
  /opt/build/glibc/glibc-2.24/malloc/malloc.c
  /opt/build/glibc/glibc-2.24/posix/regcomp.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.c
  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S
  /opt/build/glibc/glibc-2.24/string/strdup.c
  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c
  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c
  /usr/include/x86_64-linux-gnu/bits/string2.h

--------------------------------------------------------------------------------
Ir               
--------------------------------------------------------------------------------
662,796 (11.31%)  events annotated

