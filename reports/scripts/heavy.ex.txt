--------------------------------------------------------------------------------
Profile data file '../klish-2.1.3/reports/heavy/callgrind.out.2003' (creator: callgrind-3.13.0)
--------------------------------------------------------------------------------
I1 cache: 
D1 cache: 
LL cache: 
Timerange: Basic block 0 - 1547562
Trigger: Program termination
Profiled target:  ./clish -x ../../xml-examples/clish (PID 2003, part 1)
Events recorded:  Ir
Events shown:     Ir
Event sort order: Ir
Thresholds:       99
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir                 
--------------------------------------------------------------------------------
6,562,502 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir                file:function
--------------------------------------------------------------------------------
680,674 (10.37%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
417,920 ( 6.37%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c:__gconv_transform_utf8_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
400,032 ( 6.10%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_free [/lib/x86_64-linux-gnu/libc-2.24.so]
382,308 ( 5.83%)  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c:mbrtowc [/lib/x86_64-linux-gnu/libc-2.24.so]
270,715 ( 4.13%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:do_lookup_x [/lib/x86_64-linux-gnu/ld-2.24.so]
233,416 ( 3.56%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
220,753 ( 3.36%)  ???:0x0000000000013e60 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
185,674 ( 2.83%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
172,879 ( 2.63%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c:__gconv_transform_utf8_internal
158,631 ( 2.42%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:_dl_lookup_symbol_x [/lib/x86_64-linux-gnu/ld-2.24.so]
154,616 ( 2.36%)  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c:btowc [/lib/x86_64-linux-gnu/libc-2.24.so]
145,295 ( 2.21%)  ???:0x000000000000f290 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
137,924 ( 2.10%)  /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
134,017 ( 2.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
130,916 ( 1.99%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap_iter.isra.24 [/lib/x86_64-linux-gnu/libc-2.24.so]
113,193 ( 1.72%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:strcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
109,606 ( 1.67%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
109,116 ( 1.66%)  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
108,808 ( 1.66%)  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c:__collseq_table_lookup [/lib/x86_64-linux-gnu/libc-2.24.so]
 96,831 ( 1.48%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:free [/lib/x86_64-linux-gnu/libc-2.24.so]
 94,058 ( 1.43%)  ???:0x000000000001a2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 91,449 ( 1.39%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_consolidate [/lib/x86_64-linux-gnu/libc-2.24.so]
 76,434 ( 1.16%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 68,998 ( 1.05%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen [/lib/x86_64-linux-gnu/libc-2.24.so]
 58,828 ( 0.90%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 56,567 ( 0.86%)  /opt/build/glibc/glibc-2.24/elf/dl-addr.c:_dl_addr [/lib/x86_64-linux-gnu/libc-2.24.so]
 55,849 ( 0.85%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 51,918 ( 0.79%)  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc [/lib/x86_64-linux-gnu/libc-2.24.so]
 40,355 ( 0.61%)  ???:0x0000000000005130 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 40,047 ( 0.61%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h:_dl_relocate_object
 39,315 ( 0.60%)  /opt/build/glibc/glibc-2.24/elf/dl-misc.c:_dl_name_match_p [/lib/x86_64-linux-gnu/ld-2.24.so]
 35,760 ( 0.54%)  /opt/build/glibc/glibc-2.24/elf/dl-profstub.c:_dl_mcount_wrapper_check [/lib/x86_64-linux-gnu/libc-2.24.so]
 33,396 ( 0.51%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:check_match [/lib/x86_64-linux-gnu/ld-2.24.so]
 32,428 ( 0.49%)  ???:0x0000000000008190 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 31,564 ( 0.48%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
 31,450 ( 0.48%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c:_dl_fixup [/lib/x86_64-linux-gnu/ld-2.24.so]
 30,523 ( 0.47%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
 29,924 ( 0.46%)  ???:0x000000000000f970 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 28,501 ( 0.43%)  /opt/build/glibc/glibc-2.24/string/strdup.c:strdup [/lib/x86_64-linux-gnu/libc-2.24.so]
 27,384 ( 0.42%)  ???:0x000000000000e2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 25,435 ( 0.39%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 25,363 ( 0.39%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_file_xsputn@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
 23,816 ( 0.36%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 23,627 ( 0.36%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 23,485 ( 0.36%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 22,752 ( 0.35%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 21,352 ( 0.33%)  ???:0x0000000000007580 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 20,406 ( 0.31%)  /opt/build/glibc/glibc-2.24/elf/do-rel.h:_dl_relocate_object
 19,783 ( 0.30%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
 19,170 ( 0.29%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
 18,800 ( 0.29%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strchr.S:strchrnul [/lib/x86_64-linux-gnu/libc-2.24.so]
 18,243 ( 0.28%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_chardata_handler [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 17,920 ( 0.27%)  /opt/build/glibc/glibc-2.24/iconv/gconv_simple.c:__gconv_btwoc_ascii [/lib/x86_64-linux-gnu/libc-2.24.so]
 17,608 ( 0.27%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
 17,022 ( 0.26%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_next_completion [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 16,934 ( 0.26%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_default_xsputn [/lib/x86_64-linux-gnu/libc-2.24.so]
 16,599 ( 0.25%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 16,077 ( 0.24%)  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h:mbrtowc
 15,768 ( 0.24%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter [/lib/x86_64-linux-gnu/libc-2.24.so]
 15,510 ( 0.24%)  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc [/lib/x86_64-linux-gnu/libc-2.24.so]
 15,305 ( 0.23%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 15,170 ( 0.23%)  ???:0x0000000000004c30 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 15,162 ( 0.23%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_dfa_add_node [/lib/x86_64-linux-gnu/libc-2.24.so]
 14,870 ( 0.23%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_acquire_state_context [/lib/x86_64-linux-gnu/libc-2.24.so]
 14,857 ( 0.23%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_ndecode [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 14,854 ( 0.23%)  /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv [/lib/x86_64-linux-gnu/libc-2.24.so]
 14,137 ( 0.22%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 13,971 ( 0.21%)  ???:0x000000000000edb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 13,120 ( 0.20%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:postorder [/lib/x86_64-linux-gnu/libc-2.24.so]
 12,672 ( 0.19%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:free_dfa_content [/lib/x86_64-linux-gnu/libc-2.24.so]
 12,600 ( 0.19%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:preorder [/lib/x86_64-linux-gnu/libc-2.24.so]
 12,581 ( 0.19%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_merge [/lib/x86_64-linux-gnu/libc-2.24.so]
 11,167 ( 0.17%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:create_token_tree.isra.13 [/lib/x86_64-linux-gnu/libc-2.24.so]
 11,032 ( 0.17%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
 11,018 ( 0.17%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
 10,845 ( 0.17%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasestr [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 10,752 ( 0.16%)  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h:btowc
 10,648 ( 0.16%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_file_overflow@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
 10,439 ( 0.16%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object [/lib/x86_64-linux-gnu/ld-2.24.so]
 10,017 ( 0.15%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  9,680 ( 0.15%)  ???:0x00000000000045c0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  9,491 ( 0.14%)  ???:0x0000000000005570 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  9,341 ( 0.14%)  /opt/build/glibc/glibc-2.24/stdio-common/../libio/libioP.h:vfprintf
  9,095 ( 0.14%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:_dl_map_object_deps [/lib/x86_64-linux-gnu/ld-2.24.so]
  8,419 ( 0.13%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_insert [/lib/x86_64-linux-gnu/libc-2.24.so]
  8,380 ( 0.13%)  ???:0x00000000000196e0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  7,599 ( 0.12%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  7,533 ( 0.11%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:build_wcs_buffer [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,511 ( 0.11%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  7,406 ( 0.11%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_equal_part [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  7,260 ( 0.11%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,260 ( 0.11%)  ???:align_limit_to_full_utf8_characters [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  7,099 ( 0.11%)  /opt/build/glibc/glibc-2.24/locale/loadlocale.c:_nl_intern_locale_data [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,996 ( 0.11%)  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c:vsnprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,966 ( 0.11%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:peek_token [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,809 ( 0.10%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  6,548 ( 0.10%)  ???:0x0000000000005810 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  6,479 ( 0.10%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:new_do_write [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,398 ( 0.10%)  ???:0x0000000000004cb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  6,174 ( 0.09%)  /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  6,016 ( 0.09%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,909 ( 0.09%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:__GI_mempcpy [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,844 ( 0.09%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:lower_subexps [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,670 ( 0.09%)  /opt/build/glibc/glibc-2.24/libio/strops.c:_IO_str_init_static_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,611 ( 0.09%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_first [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,412 ( 0.08%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcat_sse2_unaligned
  5,296 ( 0.08%)  ???:XML_ParserFree [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  5,074 ( 0.08%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,930 ( 0.08%)  /opt/build/glibc/glibc-2.24/libio/iofflush.c:fflush [/lib/x86_64-linux-gnu/libc-2.24.so]
  4,910 ( 0.07%)  ???:0x0000000000019f90 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  4,699 ( 0.07%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_file_write@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
  4,696 ( 0.07%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,535 ( 0.07%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_completion [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,488 ( 0.07%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,486 ( 0.07%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_param [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,455 ( 0.07%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_suffix [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  4,438 ( 0.07%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:internal_readline [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  4,367 ( 0.07%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,231 ( 0.06%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_find_next_completion [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,189 ( 0.06%)  ???:0x00000000000050d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  4,170 ( 0.06%)  /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_isspace [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  4,049 ( 0.06%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_next [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,870 ( 0.06%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_remove_at.part.4 [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,842 ( 0.06%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  3,812 ( 0.06%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object_from_fd [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,756 ( 0.06%)  /opt/build/glibc/glibc-2.24/stdio-common/printf-parse.h:vfprintf
  3,749 ( 0.06%)  /opt/build/glibc/glibc-2.24/elf/dl-version.c:_dl_check_map_versions [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,663 ( 0.06%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_no_init [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,639 ( 0.06%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_old_init [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,519 ( 0.05%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:__GI_strcmp [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,502 ( 0.05%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_file_sync@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,418 ( 0.05%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S:__GI_memset [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,415 ( 0.05%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:peek_token_bracket [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,200 ( 0.05%)  /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_getchar [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  3,187 ( 0.05%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  3,130 ( 0.05%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  3,111 ( 0.05%)  /opt/build/glibc/glibc-2.24/elf/dl-cache.c:_dl_cache_libcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,046 ( 0.05%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_setb [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,979 ( 0.05%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_do_complete [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  2,962 ( 0.05%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:register_state [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,960 ( 0.05%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_prefix [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,747 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_tree [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,717 ( 0.04%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:open_path [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,686 ( 0.04%)  /opt/build/glibc/glibc-2.24/elf/get-dynamic-info.h:_dl_map_object_from_fd
  2,656 ( 0.04%)  ???:0x0000000000004a50 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  2,648 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_width [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  2,602 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_internal_position.isra.5 [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  2,548 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,544 ( 0.04%)  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,512 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,477 ( 0.04%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,465 ( 0.04%)  /opt/build/glibc/glibc-2.24/libio/libioP.h:fflush
  2,362 ( 0.04%)  /opt/build/glibc/glibc-2.24/stdio-common/vfscanf.c:_IO_vfscanf [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,310 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  2,266 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  2,259 ( 0.03%)  ???:0x0000000005686930 [???]
  2,233 ( 0.03%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:open_verify.constprop.8 [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,224 ( 0.03%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,194 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node_closure [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,184 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,183 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:optimize_subexps [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,181 ( 0.03%)  /opt/build/glibc/glibc-2.24/signal/../sysdeps/unix/sysv/linux/x86_64/sigaction.c:__libc_sigaction [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,176 ( 0.03%)  /opt/build/glibc/glibc-2.24/elf/dl-version.c:match_symbol [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,135 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,126 ( 0.03%)  /opt/build/glibc/glibc-2.24/libio/libioP.h:_IO_default_xsputn
  2,077 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_bracket_element.isra.11.constprop.32 [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,046 ( 0.03%)  /opt/build/glibc/glibc-2.24/libio/iopadn.c:_IO_padn [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,034 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,030 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_element_start [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,028 ( 0.03%)  /opt/build/glibc/glibc-2.24/elf/dl-object.c:_dl_new_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,926 ( 0.03%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h:do_lookup_x
  1,893 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:free_token [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,862 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node_closure'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,860 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,852 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,810 ( 0.03%)  ???:0x000000000000f930 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,799 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,786 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,772 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,768 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,760 ( 0.03%)  ???:0x0000000000013740 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,755 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_display_matches [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,705 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_compile_internal
  1,693 ( 0.03%)  /opt/build/glibc/glibc-2.24/elf/dl-fini.c:_dl_sort_fini [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,676 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c:lub_bintree_remove [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,665 ( 0.03%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:index [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,642 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_action [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,638 ( 0.02%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_init_copy [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,584 ( 0.02%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:calc_eclosure_iter
  1,580 ( 0.02%)  ???:0x00000000000094a0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,556 ( 0.02%)  ???:0x0000000005686938 [???]
  1,550 ( 0.02%)  ???:0x0000000000019b10 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,479 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_vprintf [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,405 ( 0.02%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_do_write@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,397 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_argv [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,390 ( 0.02%)  ???:XML_ParserCreate_MM [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,386 ( 0.02%)  ???:0x0000000000014cd0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,362 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,351 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_delete_text [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,347 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:clish_shell_parse_pargv [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,338 ( 0.02%)  /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,330 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_diff [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,309 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_fini [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,301 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/memcmp-sse4.S:__memcmp_sse4_1 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,280 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,268 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c:strsep [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,260 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,252 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,226 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_wdog.c:clish_shell_keypress_fn [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,223 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,209 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-close.c:_dl_close_worker [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,202 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c:__libc_memalign [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,191 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,159 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c:_dl_relocate_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,150 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,136 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_new [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,129 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:dl_main [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,127 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:clish_shell_prepare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,120 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,117 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../memcmp.S:bcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,112 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_param_generator [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,109 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate_or_translate [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,107 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,105 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,100 ( 0.02%)  ???:0x00000000000137d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,092 ( 0.02%)  /opt/build/glibc/glibc-2.24/locale/findlocale.c:_nl_find_locale [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,084 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:mempcpy [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,073 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/memchr.S:memchr [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,041 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-cache.c:_dl_load_cache_lookup [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,039 ( 0.02%)  /opt/build/glibc/glibc-2.24/locale/loadarchive.c:_nl_load_locale_from_archive [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,038 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,025 ( 0.02%)  /opt/build/glibc/glibc-2.24/setjmp/../sysdeps/x86_64/setjmp.S:__sigsetjmp [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,008 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86/cacheinfo.c:intel_check_word [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,000 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:remove_duplicate [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,000 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
    987 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/./dl-map-segments.h:_dl_map_object_from_fd
    969 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    964 ( 0.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S:memset [/lib/x86_64-linux-gnu/ld-2.24.so]
    944 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand_var_ex [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    928 ( 0.01%)  /opt/build/glibc/glibc-2.24/stdio-common/_itoa.c:_itoa_word [/lib/x86_64-linux-gnu/libc-2.24.so]
    928 ( 0.01%)  /opt/build/glibc/glibc-2.24/string/../bits/stdlib-bsearch.h:intel_check_word
    927 ( 0.01%)  /opt/build/glibc/glibc-2.24/wctype/wcfuncs.c:iswalnum [/lib/x86_64-linux-gnu/libc-2.24.so]
    925 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    884 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    884 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_insert_last [/lib/x86_64-linux-gnu/libc-2.24.so]
    882 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_is_quoting [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
    868 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave [/lib/x86_64-linux-gnu/ld-2.24.so]
    866 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    856 ( 0.01%)  /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/sysv/linux/wordsize-64/mmap.c:mmap [/lib/x86_64-linux-gnu/libc-2.24.so]
    846 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    835 ( 0.01%)  /opt/build/glibc/glibc-2.24/locale/setlocale.c:setlocale [/lib/x86_64-linux-gnu/libc-2.24.so]
    820 ( 0.01%)  /opt/build/glibc/glibc-2.24/libio/genops.c:__overflow [/lib/x86_64-linux-gnu/libc-2.24.so]
    820 ( 0.01%)  ???:0x0000000000006340 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    816 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    810 ( 0.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy [/lib/x86_64-linux-gnu/ld-2.24.so]
    806 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:clish_shell_load_scheme [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    805 ( 0.01%)  /opt/build/glibc/glibc-2.24/stdlib/../stdlib/strtol_l.c:____strtol_l_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
    802 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    783 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h:_dl_relocate_object
    780 ( 0.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:__GI_strncmp [/lib/x86_64-linux-gnu/libc-2.24.so]
    770 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch [/lib/x86_64-linux-gnu/libc-2.24.so]
    768 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:openaux [/lib/x86_64-linux-gnu/ld-2.24.so]
    760 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_execute.c:clish_shell_execute [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    750 ( 0.01%)  ???:0x0000000000004d00 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    740 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    740 ( 0.01%)  /usr/include/x86_64-linux-gnu/bits/string2.h:clish_shell_expand
    737 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.h:parse_bracket_element.isra.11.constprop.32
    729 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
    722 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/xmlapi.h:process_action
    718 ( 0.01%)  ???:XML_GetBuffer [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    701 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    701 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    700 ( 0.01%)  ???:0x0000000000004610 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    693 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_delete_matches [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
    686 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:decompose_rpath [/lib/x86_64-linux-gnu/ld-2.24.so]
    673 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    661 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    660 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_delete [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    652 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_backspace [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
    650 ( 0.01%)  ???:0x000000000000b4f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    648 ( 0.01%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_init_state [/lib/x86_64-linux-gnu/libc-2.24.so]
    645 ( 0.01%)  ???:0x00000000000071d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    644 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:free_state [/lib/x86_64-linux-gnu/libc-2.24.so]
    640 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_delete [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    635 ( 0.01%)  /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:__write_nocancel [/lib/x86_64-linux-gnu/libc-2.24.so]
    633 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_resolve_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    627 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
    619 ( 0.01%)  /opt/build/glibc/glibc-2.24/libio/iogetline.c:_IO_getline_info [/lib/x86_64-linux-gnu/libc-2.24.so]
    600 ( 0.01%)  /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/syscall-template.S:ioctl [/lib/x86_64-linux-gnu/libc-2.24.so]
    600 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.h:parse_expression'2
    597 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    596 ( 0.01%)  /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c:readdir [/lib/x86_64-linux-gnu/libc-2.24.so]
    595 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap [/lib/x86_64-linux-gnu/libc-2.24.so]
    588 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_element_end [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    578 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:free_charset [/lib/x86_64-linux-gnu/libc-2.24.so]
    576 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/dl-fini.c:_dl_fini [/lib/x86_64-linux-gnu/ld-2.24.so]
    576 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:calc_eclosure_iter'2

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c
--------------------------------------------------------------------------------
Ir           

-- line 8 ----------------------------------------
  .           #include "lub/string.h"
  .           #include "lub/system.h"
  .           #include "private.h"
  .           
  .           /*----------------------------------------------------------- */
  .           clish_pargv_status_e clish_shell_parse(
  .           	clish_shell_t *this, const char *line,
  .           	const clish_command_t **ret_cmd, clish_pargv_t **pargv)
 40 ( 0.00%)  {
  .           	clish_pargv_status_e result = CLISH_BAD_CMD;
  .           	clish_context_t context;
  .           	const clish_command_t *cmd;
  .           	lub_argv_t *argv = NULL;
  .           	unsigned int idx;
  .           
 12 ( 0.00%)  	*ret_cmd = cmd = clish_shell_resolve_command(this, line);
15,742 ( 0.24%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_resolve_command (4x)
  8 ( 0.00%)  	if (!cmd)
  4 ( 0.00%)  		return result;
  .           
  .           	/* Now construct the parameters for the command */
  .           	/* Prepare context */
  9 ( 0.00%)  	*pargv = clish_pargv_new();
339 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_new (3x)
 18 ( 0.00%)  	clish_context_init(&context, this);
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (3x)
 12 ( 0.00%)  	clish_context__set_cmd(&context, cmd);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__set_cmd (3x)
 12 ( 0.00%)  	clish_context__set_pargv(&context, *pargv);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__set_pargv (3x)
  .           
 21 ( 0.00%)  	idx = lub_string_wordcount(clish_command__get_name(cmd));
558 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (3x)
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (3x)
 15 ( 0.00%)  	argv = lub_argv_new(line, 0);
2,430 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (3x)
 42 ( 0.00%)  	result = clish_shell_parse_pargv(*pargv, cmd, &context,
189 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:clish_shell_parse_pargv (3x)
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (3x)
  .           		clish_command__get_paramv(cmd),
  .           		argv, &idx, NULL, 0);
  9 ( 0.00%)  	lub_argv_delete(argv);
876 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (3x)
 12 ( 0.00%)  	if (CLISH_LINE_OK != result) {
  .           		clish_pargv_delete(*pargv);
  .           		*pargv = NULL;
  .           	}
  .           
  .           	return result;
 32 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static bool_t line_test(const clish_param_t *param, void *context)
 21 ( 0.00%)  {
  .           	char *str = NULL;
  .           	char *teststr = NULL;
  .           	bool_t res;
  .           
 21 ( 0.00%)  	if (!param)
  .           		return BOOL_FALSE;
 18 ( 0.00%)  	teststr = clish_param__get_test(param);
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_test (6x)
 14 ( 0.00%)  	if (!teststr)
  7 ( 0.00%)  		return BOOL_TRUE;
  .           	str = clish_shell_expand(teststr, SHELL_VAR_ACTION, context);
  .           	if (!str)
  .           		return BOOL_FALSE;
  .           	res = lub_system_line_test(str);
  .           	lub_string_free(str);
  .           
  .           	return res;
 35 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_pargv_status_e clish_shell_parse_pargv(clish_pargv_t *pargv,
  .           	const clish_command_t *cmd,
  .           	void *context,
  .           	clish_paramv_t *paramv,
  .           	const lub_argv_t *argv,
  .           	unsigned *idx, clish_pargv_t *last, unsigned need_index)
165 ( 0.00%)  {
 44 ( 0.00%)  	unsigned argc = lub_argv__get_count(argv);
 22 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (11x)
  .           	unsigned index = 0;
  .           	unsigned nopt_index = 0;
  .           	clish_param_t *nopt_param = NULL;
  .           	unsigned i;
  .           	clish_pargv_status_e retval;
 44 ( 0.00%)  	unsigned paramc = clish_paramv__get_count(paramv);
 22 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_count (11x)
  .           	int up_level = 0; /* Is it a first level of param nesting? */
  .           
 22 ( 0.00%)  	assert(pargv);
 22 ( 0.00%)  	assert(cmd);
  .           
  .           	/* Check is it a first level of PARAM nesting. */
 66 ( 0.00%)  	if (paramv == clish_command__get_paramv(cmd))
 22 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (11x)
  .           		up_level = 1;
  .           
 65 ( 0.00%)  	while (index < paramc) {
  7 ( 0.00%)  		const char *arg = NULL;
 35 ( 0.00%)  		clish_param_t *param = clish_paramv__get_param(paramv, index);
 42 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (7x)
  .           		clish_param_t *cparam = NULL;
  .           		int is_switch = 0;
  .           
 14 ( 0.00%)  		if (!param)
  .           			return CLISH_BAD_PARAM;
  .           
  .           		/* Use real arg or PARAM's default value as argument */
 21 ( 0.00%)  		if (*idx < argc)
 15 ( 0.00%)  			arg = lub_argv__get_arg(argv, *idx);
 30 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (3x)
  .           
  .           		/* Is parameter in "switch" mode? */
 32 ( 0.00%)  		if (CLISH_PARAM_SWITCH == clish_param__get_mode(param))
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (6x)
  .           			is_switch = 1;
  .           
  .           		/* Check the 'test' conditions */
 35 ( 0.00%)  		if (!line_test(param, context)) {
783 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:line_test (7x)
  .           			index++;
  .           			continue;
  .           		}
  .           
  .           		/* Add param for help and completion */
 43 ( 0.00%)  		if (last && (*idx == need_index) &&
 36 ( 0.00%)  			(NULL == clish_pargv_find_arg(pargv, clish_param__get_name(param)))) {
1,341 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
157 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_find_arg (3x)
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_name (3x)
  8 ( 0.00%)  			if (is_switch) {
  4 ( 0.00%)  				unsigned rec_paramc = clish_param__get_param_count(param);
  .           				for (i = 0; i < rec_paramc; i++) {
  .           					cparam = clish_param__get_param(param, i);
  .           					if (!cparam)
  .           						break;
  .           					if (!line_test(cparam, context))
  .           						continue;
  .           					if (CLISH_PARAM_SUBCOMMAND ==
  .           						clish_param__get_mode(cparam)) {
-- line 128 ----------------------------------------
-- line 134 ----------------------------------------
  .           							clish_pargv_insert(last,
  .           								cparam, arg);
  .           					} else {
  .           						clish_pargv_insert(last,
  .           							cparam, arg);
  .           					}
  .           				}
  .           			} else {
  8 ( 0.00%)  				if (CLISH_PARAM_SUBCOMMAND ==
  8 ( 0.00%)  					clish_param__get_mode(param)) {
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (4x)
  .           					const char *pname =
  .           					    clish_param__get_value(param);
  .           					if (!arg || (arg &&
  .           						(pname == lub_string_nocasestr(pname, arg))))
  .           						clish_pargv_insert(last, param, arg);
  .           				} else {
 28 ( 0.00%)  					clish_pargv_insert(last, param, arg);
939 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,089 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_insert (3x)
  .           				}
  .           			}
  .           		}
  .           
  .           		/* Set parameter value */
  .           		{
  .           			char *validated = NULL;
 28 ( 0.00%)  			clish_paramv_t *rec_paramv =
 14 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_paramv (7x)
  .           			    clish_param__get_paramv(param);
 32 ( 0.00%)  			unsigned rec_paramc =
714 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 30 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_param_count (6x)
  .           			    clish_param__get_param_count(param);
  .           
  .           			/* Save the index of last non-option parameter
  .           			 * to restore index if the optional parameters
  .           			 * will be used.
  .           			 */
 53 ( 0.00%)  			if (!clish_param__get_optional(param)) {
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_optional (6x)
  .           				nopt_param = param;
  .           				nopt_index = index;
  .           			}
  .           
  .           			/* Validate the current parameter. */
 63 ( 0.00%)  			if (clish_pargv_find_arg(pargv, clish_param__get_name(param))) {
293 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_find_arg (7x)
 28 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_name (7x)
  .           				/* Duplicated parameter */
  .           				validated = NULL;
 14 ( 0.00%)  			} else if (is_switch) {
  .           				for (i = 0; i < rec_paramc; i++) {
  .           					cparam = clish_param__get_param(param, i);
  .           					if (!cparam)
  .           						break;
  .           					if (!line_test(cparam, context))
  .           						continue;
  .           					if ((validated = arg ?
  .           						clish_param_validate(cparam, arg) : NULL)) {
  .           						rec_paramv = clish_param__get_paramv(cparam);
  .           						rec_paramc = clish_param__get_param_count(cparam);
  .           						break;
  .           					}
  .           				}
  .           			} else {
  .           				validated = arg ?
 33 ( 0.00%)  					clish_param_validate(param, arg) : NULL;
4,072 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,508 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_validate (2x)
  .           			}
  .           
  6 ( 0.00%)  			if (validated) {
  .           				/* add (or update) this parameter */
  .           				if (is_switch) {
  .           					clish_pargv_insert(pargv, param,
  .           						clish_param__get_name(cparam));
  .           					clish_pargv_insert(pargv, cparam,
  .           						validated);
  .           				} else {
 18 ( 0.00%)  					clish_pargv_insert(pargv, param,
1,455 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_insert (3x)
  .           						validated);
  .           				}
  9 ( 0.00%)  				lub_string_free(validated);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
  .           
  .           				/* Next command line argument */
  .           				/* Don't change idx if this is the last
  .           				   unfinished optional argument.
  .           				 */
 18 ( 0.00%)  				if (!(clish_param__get_optional(param) &&
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_optional (3x)
  .           					(*idx == need_index) &&
 16 ( 0.00%)  					(need_index == (argc - 1)))) {
  6 ( 0.00%)  					(*idx)++;
  .           					/* Walk through the nested parameters */
  9 ( 0.00%)  					if (rec_paramc) {
  .           						retval = clish_shell_parse_pargv(pargv, cmd,
  .           							context, rec_paramv,
  .           							argv, idx, last, need_index);
  .           						if (CLISH_LINE_OK != retval)
  .           							return retval;
  .           					}
  .           				}
  .           
  .           				/* Choose the next parameter */
 15 ( 0.00%)  				if (clish_param__get_optional(param) &&
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_optional (3x)
  .           					!clish_param__get_order(param)) {
  .           					if (nopt_param)
  .           						index = nopt_index + 1;
  .           					else
  .           						index = 0;
  .           				} else {
  .           					/* Save non-option position in
  .           					   case of ordered optional param */
  .           					nopt_param = param;
  .           					nopt_index = index;
 12 ( 0.00%)  					index++;
  .           				}
  .           
  .           			} else {
  .           				/* Choose the next parameter if current
  .           				 * is not validated.
  .           				 */
 20 ( 0.00%)  				if (clish_param__get_optional(param))
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_optional (4x)
  .           					index++;
  .           				else {
  8 ( 0.00%)  					if (!arg)
  .           						break;
  .           					else
  .           						return CLISH_BAD_PARAM;
  .           				}
  .           			}
  .           		}
  .           	}
  .           
  .           	/* Check for non-optional parameters without values */
 40 ( 0.00%)  	if ((*idx >= argc) && (index < paramc)) {
  .           		unsigned j = index;
  .           		const clish_param_t *param;
  .           		while (j < paramc) {
 16 ( 0.00%)  			param = clish_paramv__get_param(paramv, j++);
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (4x)
 20 ( 0.00%)  			if (BOOL_TRUE != clish_param__get_optional(param))
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_optional (4x)
  8 ( 0.00%)  				return CLISH_LINE_PARTIAL;
  .           		}
  .           	}
  .           
  .           	/* If the number of arguments is bigger than number of
  .           	 * params than it's a args. So generate the args entry
  .           	 * in the list of completions.
  .           	 */
 30 ( 0.00%)  	if (last && up_level &&
 33 ( 0.00%)  			clish_command__get_args(cmd) &&
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (4x)
  .           			(clish_pargv__get_count(last) == 0) &&
  .           			(*idx <= argc) && (index >= paramc)) {
  .           		clish_pargv_insert(last, clish_command__get_args(cmd), "");
  .           	}
  .           
  .           	/*
  .           	 * if we've satisfied all the parameters we can now construct
  .           	 * an 'args' parameter if one exists
  .           	 */
 23 ( 0.00%)  	if (up_level && (*idx < argc) && (index >= paramc)) {
  .           		const char *arg = lub_argv__get_arg(argv, *idx);
  .           		const clish_param_t *param = clish_command__get_args(cmd);
  .           		char *args = NULL;
  .           
  .           		if (!param)
  .           			return CLISH_BAD_CMD;
  .           
  .           		/*
-- line 291 ----------------------------------------
-- line 308 ----------------------------------------
  .           				lub_string_cat(&args, " ");
  .           			}
  .           		}
  .           		/* add (or update) this parameter */
  .           		clish_pargv_insert(pargv, param, args);
  .           		lub_string_free(args);
  .           	}
  .           
  7 ( 0.00%)  	return CLISH_LINE_OK;
 88 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */
  .           clish_shell_state_e clish_shell__get_state(const clish_shell_t *this)
  .           {
  .           	return this->state;
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           void clish_shell__set_state(clish_shell_t *this,
  .           	clish_shell_state_e state)
  .           {
  2 ( 0.00%)  	assert(this);
  2 ( 0.00%)  	this->state = state;
  .           }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c
--------------------------------------------------------------------------------
Ir              

-- line 78 ----------------------------------------
     .            * @param node element to add
     .            * @return new first element of the list
     .            */
     .           static clish_xmlnode_t *clish_expat_list_push_back(clish_xmlnode_t *first, clish_xmlnode_t *node)
     .           {
     .           	clish_xmlnode_t *cur = first;
     .           	clish_xmlnode_t *prev = NULL;
     .           
25,493 ( 0.39%)  	while (cur) {
     .           		prev = cur;
 7,754 ( 0.12%)  		cur = cur->next;
     .           	}
     .           	if (prev) {
   906 ( 0.01%)  		prev->next = node;
     .           		return first;
     .           	}
     .           	return node;
     .           }
     .           
     .           /** Generic add_attr() function
     .            *
     .            * @param first first attribute in the attribute list
-- line 99 ----------------------------------------
-- line 100 ----------------------------------------
     .            * @param n attribute name
     .            * @param v attribute value
     .            * @return the new first attribute in the attribute list
     .            */
     .           static clish_xmlnode_t *clish_expat_add_attr(clish_xmlnode_t *first, const char *n, const char *v)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   868 ( 0.01%)  	node = malloc(sizeof(clish_xmlnode_t));
44,425 ( 0.68%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (217x)
   434 ( 0.01%)  	if (!node)
     .           		return first;
     .           
   868 ( 0.01%)  	node->name = strdup(n);
49,586 ( 0.76%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   868 ( 0.01%)  	node->content = strdup(v);
54,365 ( 0.83%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   217 ( 0.00%)  	node->children = NULL;
   217 ( 0.00%)  	node->attributes = NULL;
   217 ( 0.00%)  	node->next = NULL;
   217 ( 0.00%)  	node->type = CLISH_XMLNODE_ATTR;
   217 ( 0.00%)  	node->depth = 0;
     .           
     .           	return clish_expat_list_push_back(first, node);
     .           }
     .           
     .           /** Run through an expat attribute list, and create a DOM-like attribute list
     .            *
     .            * @param node parent node
     .            * @param attr NULL-terminated attribute liste
-- line 126 ----------------------------------------
-- line 127 ----------------------------------------
     .            *
     .            * Each attribute uses two slots in the expat attribute list. The first one is
     .            * used to store the name, the second one is used to store the value.
     .            */
     .           static void clish_expat_add_attrlist(clish_xmlnode_t *node, const char **attr)
     .           {
     .           	int i;
     .           
 1,173 ( 0.02%)  	for (i = 0; attr[i]; i += 2) {
   434 ( 0.01%)  		node->attributes = clish_expat_add_attr(node->attributes,
     .           			attr[i], attr[i+1]);
     .           	}
     .           }
     .           
     .           /** Generic make_node() function
     .            *
     .            * @param parent XML parent node
     .            * @param type XML node type
-- line 144 ----------------------------------------
-- line 147 ----------------------------------------
     .            * @param attr attribute list
     .            * @return a new node or NULL on error
     .            */
     .           static clish_xmlnode_t *clish_expat_make_node(clish_xmlnode_t *parent,
     .           					      clish_xmlnodetype_e type,
     .           					      const char *n,
     .           					      const char *v,
     .           					      const char **attr)
 7,428 ( 0.11%)  {
     .           	clish_xmlnode_t *node;
     .           
 2,476 ( 0.04%)  	node = malloc(sizeof(clish_xmlnode_t));
122,324 ( 1.86%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (619x)
 1,238 ( 0.02%)  	if (!node)
     .           		return NULL;
 2,770 ( 0.04%)  	node->name = n ? strdup(n) : NULL;
18,524 ( 0.28%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (98x)
 4,039 ( 0.06%)  	node->content = v ? strdup(v) : NULL;
127,516 ( 1.94%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (521x)
   619 ( 0.01%)  	node->children = NULL;
   619 ( 0.01%)  	node->attributes = NULL;
   619 ( 0.01%)  	node->next = NULL;
 1,238 ( 0.02%)  	node->parent = parent;
 3,085 ( 0.05%)  	node->doc = parent ? parent->doc : NULL;
 2,446 ( 0.04%)  	node->depth = parent ? parent->depth + 1 : 0;
   619 ( 0.01%)  	node->type = type;
     .           
 1,238 ( 0.02%)  	if (attr)
     .           		clish_expat_add_attrlist(node, attr);
     .           
   152 ( 0.00%)  	if (parent)
 2,436 ( 0.04%)  		parent->children = clish_expat_list_push_back(parent->children, node);
     .           
     .           	return node;
 5,571 ( 0.08%)  }
     .           
     .           /** Add a new XML root
     .            *
     .            * @param doc XML document
     .            * @param el root node name
     .            * @param attr expat attribute list
     .            * @return a new root element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_root(clish_xmldoc_t *doc, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   314 ( 0.00%)  	node = clish_expat_make_node(NULL, CLISH_XMLNODE_ELM, el, NULL, attr);
25,901 ( 0.39%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (10x)
    20 ( 0.00%)  	if (!node)
     .           		return doc->root;
     .           
    30 ( 0.00%)  	doc->root = clish_expat_list_push_back(doc->root, node);
     .           
     .           	return node;
     .           }
     .           
     .           /** Add a new XML element as a child
     .            *
     .            * @param cur parent XML element
     .            * @param el element name
     .            * @param attr expat attribute list
     .            * @return a new XMl element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_child(clish_xmlnode_t *cur, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   176 ( 0.00%)  	node = clish_expat_make_node(cur, CLISH_XMLNODE_ELM, el, NULL, attr);
176,849 ( 2.69%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (88x)
   176 ( 0.00%)  	if (!node)
     .           		return cur;
     .           
     .           	return node;
     .           }
     .           
     .           /** Expat handler: element content
     .            *
     .            * @param data user data
     .            * @param s content (not nul-termainated)
     .            * @param len content length
     .            */
     .           static void clish_expat_chardata_handler(void *data, const char *s, int len)
 2,605 ( 0.04%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
 2,605 ( 0.04%)  	if (doc->current) {
 2,605 ( 0.04%)  		char *content = malloc(len + 1);
66,819 ( 1.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (521x)
 2,609 ( 0.04%)  		strncpy(content, s, len);
18,080 ( 0.28%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (520x)
 1,541 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   521 ( 0.01%)  		content[len] = '\0';
     .           
 3,126 ( 0.05%)  		clish_expat_make_node(doc->current, CLISH_XMLNODE_TEXT, NULL, content, NULL);
290,424 ( 4.43%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (521x)
     .           		/*
     .           		 * the previous call is a bit too generic, and strdup() content
     .           		 * so we need to free out own version of content.
     .           		 */
 1,567 ( 0.02%)  		free(content);
45,760 ( 0.70%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (520x)
 1,569 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           	}
 2,605 ( 0.04%)  }
     .           
     .           /** Expat handler: start XML element
     .            *
     .            * @param data user data
     .            * @param el element name (nul-terminated)
     .            * @param attr expat attribute list
     .            */
     .           static void clish_expat_element_start(void *data, const char *el, const char **attr)
   490 ( 0.01%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.00%)  	if (!doc->current) {
     .           		doc->current = clish_expat_add_root(doc, el, attr);
     .           	} else {
    98 ( 0.00%)  		doc->current = clish_expat_add_child(doc->current, el, attr);
     .           	}
   392 ( 0.01%)  }
     .           
     .           /** Expat handler: end XML element
     .            *
     .            * @param data user data
     .            * @param el element name
     .            */
     .           static void clish_expat_element_end(void *data, const char *el)
     .           {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.00%)  	if (doc->current) {
   294 ( 0.00%)  		doc->current = doc->current->parent;
     .           	}
     .           
     .           	el = el; /* Happy compiler */
     .           }
     .           
     .           /** Free a node, its children and its attributes
     .            *
     .            * @param node node to free
     .            */
     .           static void clish_expat_free_node(clish_xmlnode_t *cur)
 3,344 ( 0.05%)  {
     .           	clish_xmlnode_t *node;
     .           	clish_xmlnode_t *first;
     .           
 2,584 ( 0.04%)  	if (cur->attributes) {
     .           		first = cur->attributes;
   651 ( 0.01%)  		while (first) {
     .           			node = first;
   217 ( 0.00%)  			first = first->next;
   217 ( 0.00%)  			clish_expat_free_node(node);
 8,700 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (30x)
     .           		}
     .           	}
 2,569 ( 0.04%)  	if (cur->children) {
     .           		first = cur->children;
 1,827 ( 0.03%)  		while (first) {
     .           			node = first;
   609 ( 0.01%)  			first = first->next;
   609 ( 0.01%)  			clish_expat_free_node(node);
179,286 ( 2.73%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (174x)
     .           		}
     .           	}
 2,508 ( 0.04%)  	if (cur->name)
   630 ( 0.01%)  		free(cur->name);
   880 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.04%)  	if (cur->content)
 1,476 ( 0.02%)  		free(cur->content);
64,973 ( 0.99%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (738x)
 2,508 ( 0.04%)  	free(cur);
   880 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.04%)  }
     .           
     .           /*
     .            * Public interface
     .            */
     .           
     .           int clish_xmldoc_start(void)
     .           {
     .           	return 0;
     .           }
     .           
     .           int clish_xmldoc_stop(void)
     .           {
     .           	return 0;
     2 ( 0.00%)  }
     .           
     .           clish_xmldoc_t *clish_xmldoc_read(const char *filename)
    70 ( 0.00%)  {
     .           	clish_xmldoc_t *doc;
     .           	struct stat sb;
     .           	int fd;
     .           	char *buffer;
     .           	XML_Parser parser;
     .           	int rb;
     .           
    54 ( 0.00%)  	doc = malloc(sizeof(clish_xmldoc_t));
 1,728 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,269 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc (9x)
    20 ( 0.00%)  	if (!doc)
     .           		return NULL;
     .           	memset(doc, 0, sizeof(clish_xmldoc_t));
    44 ( 0.00%)  	doc->filename = strdup(filename);
 1,751 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,723 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (9x)
    44 ( 0.00%)  	parser = XML_ParserCreate(NULL);
 2,156 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
95,826 ( 1.46%)  => ???:XML_ParserCreate (9x)
    20 ( 0.00%)  	if (!parser)
     .           		goto error_parser_create;
    44 ( 0.00%)  	XML_SetUserData(parser, doc);
   949 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    54 ( 0.00%)  => ???:XML_SetUserData (9x)
    44 ( 0.00%)  	XML_SetCharacterDataHandler(parser, clish_expat_chardata_handler);
 1,060 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    18 ( 0.00%)  => ???:XML_SetCharacterDataHandler (9x)
    54 ( 0.00%)  	XML_SetElementHandler(parser,
 1,011 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    27 ( 0.00%)  => ???:XML_SetElementHandler (9x)
     .           		clish_expat_element_start,
     .           		clish_expat_element_end);
     .           
    64 ( 0.00%)  	fd = open(filename, O_RDONLY);
 1,430 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:open (9x)
    20 ( 0.00%)  	if (fd < 0)
     .           		goto error_open;
     .           	fstat(fd, &sb);
    50 ( 0.00%)  	buffer = malloc(sb.st_size+1);
 2,681 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (10x)
    54 ( 0.00%)  	rb = read(fd, buffer, sb.st_size);
 1,446 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (9x)
    20 ( 0.00%)  	if (rb < 0) {
     .           		close(fd);
     .           		goto error_parse;
     .           	}
    20 ( 0.00%)  	buffer[sb.st_size] = 0;
    34 ( 0.00%)  	close(fd);
 1,497 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:close (9x)
     .           
    84 ( 0.00%)  	if (!XML_Parse(parser, buffer, sb.st_size, 1))
1,302,462 (19.85%)  => ???:XML_Parse (9x)
112,859 ( 1.72%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           		goto error_parse;
     .           
    34 ( 0.00%)  	XML_ParserFree(parser);
 6,192 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
46,609 ( 0.71%)  => ???:XML_ParserFree (9x)
    30 ( 0.00%)  	free(buffer);
 1,380 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           
     .           	return doc;
     .           
     .           error_parse:
     .           	free(buffer);
     .           
     .           error_open:
     .           	XML_ParserFree(parser);
     .           
     .           error_parser_create:
     .           	clish_xmldoc_release(doc);
     .           
     .           	return NULL;
    80 ( 0.00%)  }
     .           
     .           void clish_xmldoc_release(clish_xmldoc_t *doc)
    20 ( 0.00%)  {
    20 ( 0.00%)  	if (doc) {
     .           		clish_xmlnode_t *node;
    70 ( 0.00%)  		while (doc->root) {
     .           			node = doc->root;
    20 ( 0.00%)  			doc->root = node->next;
    10 ( 0.00%)  			clish_expat_free_node(node);
191,026 ( 2.91%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node (10x)
     .           		}
    30 ( 0.00%)  		if (doc->filename)
    20 ( 0.00%)  			free(doc->filename);
   880 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
    30 ( 0.00%)  		free(doc);
   880 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           	}
    10 ( 0.00%)  }
     .           
     .           int clish_xmldoc_is_valid(clish_xmldoc_t *doc)
     .           {
    53 ( 0.00%)  	return doc && doc->root;
    12 ( 0.00%)  }
     .           
     .           int clish_xmldoc_error_caps(clish_xmldoc_t *doc)
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return CLISH_XMLERR_NOCAPS;
     .           }
     .           
-- line 403 ----------------------------------------
-- line 419 ----------------------------------------
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return "";
     .           }
     .           
     .           int clish_xmlnode_get_type(clish_xmlnode_t *node)
     .           {
 1,281 ( 0.02%)  	if (node)
   427 ( 0.01%)  		return node->type;
     .           	return CLISH_XMLNODE_UNKNOWN;
   427 ( 0.01%)  }
     .           
     .           clish_xmlnode_t *clish_xmldoc_get_root(clish_xmldoc_t *doc)
     .           {
    20 ( 0.00%)  	if (doc)
    20 ( 0.00%)  		return doc->root;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_parent(clish_xmlnode_t *node)
     .           {
    80 ( 0.00%)  	if (node)
    80 ( 0.00%)  		return node->parent;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_next_child(clish_xmlnode_t *parent,
     .           					  clish_xmlnode_t *curchild)
     .           {
   956 ( 0.01%)  	if (curchild)
   834 ( 0.01%)  		return curchild->next;
   122 ( 0.00%)  	if (parent)
   122 ( 0.00%)  		return parent->children;
     .           	return NULL;
     .           }
     .           
     .           char *clish_xmlnode_fetch_attr(clish_xmlnode_t *node,
     .           			       const char *attrname)
 2,648 ( 0.04%)  {
 1,324 ( 0.02%)  	if (node) {
   662 ( 0.01%)  		clish_xmlnode_t *n = node->attributes;
 4,292 ( 0.07%)  		while (n) {
 9,924 ( 0.15%)  			if (strcmp(n->name, attrname) == 0)
32,589 ( 0.50%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (1,654x)
   187 ( 0.00%)  				return n->content;
 1,467 ( 0.02%)  			n = n->next;
     .           		}
     .           	}
   475 ( 0.01%)  	return NULL;
 2,648 ( 0.04%)  }
     .           
     .           int clish_xmlnode_get_content(clish_xmlnode_t *node, char *content,
     .           			      unsigned int *contentlen)
   182 ( 0.00%)  {
     .           	unsigned int minlen = 1;
     .           
   208 ( 0.00%)  	if (node && content && contentlen) {
    26 ( 0.00%)  		clish_xmlnode_t *children = node->children;
   505 ( 0.01%)  		while (children) {
   960 ( 0.01%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   576 ( 0.01%)  				minlen += strlen(children->content);
 5,074 ( 0.08%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (192x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    52 ( 0.00%)  		if (minlen >= *contentlen) {
     .           			*contentlen = minlen + 1;
     .           			return -E2BIG;
     .           		}
     .           		children = node->children;
    52 ( 0.00%)  		*content = 0;
   407 ( 0.01%)  		while (children) {
   960 ( 0.01%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   580 ( 0.01%)  				strcat(content, children->content);
29,191 ( 0.44%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned (191x)
 1,492 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    26 ( 0.00%)  		return 0;
     .           	}
     .           
     .           	return -EINVAL;
   156 ( 0.00%)  }
     .           
     .           int clish_xmlnode_get_name(clish_xmlnode_t *node, char *name,
     .           	unsigned int *namelen)
   552 ( 0.01%)  {
 1,104 ( 0.02%)  	if (node && name && namelen) {
 1,108 ( 0.02%)  		if (strlen(node->name) >= *namelen) {
 2,192 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (137x)
 1,497 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			*namelen = strlen(node->name) + 1;
     .           			return -E2BIG;
     .           		}
   828 ( 0.01%)  		snprintf(name, *namelen, "%s", node->name);
72,205 ( 1.10%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (138x)
   414 ( 0.01%)  		name[*namelen - 1] = '\0';
   138 ( 0.00%)  		return 0;
     .           	}
     .           	return -EINVAL;
   552 ( 0.01%)  }
     .           
     .           void clish_xmlnode_print(clish_xmlnode_t *node, FILE *out)
     .           {
     .           	if (node) {
     .           		int i;
     .           		clish_xmlnode_t *a;
     .           		for (i=0; i<node->depth; ++i) {
     .           			fprintf(out, "  ");
-- line 520 ----------------------------------------
-- line 525 ----------------------------------------
     .           			fprintf(out, " %s='%s'", a->name, a->content);
     .           			a = a->next;
     .           		}
     .           		fprintf(out, ">...");
     .           	}
     .           }
     .           
     .           void clish_xml_release(void *p)
   661 ( 0.01%)  {
     .           	p = p; /* Happy compiler */
     .           	/* nothing to release */
     .           }
     .           
     .           #endif /* HAVE_LIB_EXPAT */
     .           

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c
--------------------------------------------------------------------------------
Ir             

-- line 6 ----------------------------------------
    .           #include "private.h"
    .           #include "lub/string.h"
    .           #include "lub/argv.h"
    .           
    .           /*-------------------------------------------------------- */
    .           void clish_shell_iterator_init(clish_shell_iterator_t * iter,
    .           	clish_nspace_visibility_e field)
    .           {
   18 ( 0.00%)  	iter->last_cmd = NULL;
   36 ( 0.00%)  	iter->field = field;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t *clish_shell_resolve_command(const clish_shell_t * this,
    .           	const char *line)
  125 ( 0.00%)  {
    .           	clish_command_t *cmd, *result;
    .           
    .           	/* Search the current view */
  204 ( 0.00%)  	result = clish_view_resolve_command(clish_shell__get_view(this), line, BOOL_TRUE);
45,546 ( 0.69%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_command (24x)
1,775 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  225 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (25x)
    .           	/* Search the global view */
  125 ( 0.00%)  	cmd = clish_view_resolve_command(this->global, line, BOOL_TRUE);
84,689 ( 1.29%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_command (25x)
    .           
  104 ( 0.00%)  	result = clish_command_choose_longest(result, cmd);
  725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  787 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_choose_longest (24x)
    .           
    .           	return result;
   75 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t *clish_shell_resolve_prefix(const clish_shell_t * this,
    .           	const char *line)
    .           {
    .           	clish_command_t *cmd, *result;
    .           
    .           	/* Search the current view */
-- line 40 ----------------------------------------
-- line 45 ----------------------------------------
    .           	result = clish_command_choose_longest(result, cmd);
    .           
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           const clish_command_t *clish_shell_find_next_completion(const clish_shell_t *
    .           	this, const char *line, clish_shell_iterator_t * iter)
  728 ( 0.01%)  {
    .           	const clish_command_t *result, *cmd;
    .           
    .           	/* ask the local view for next command */
1,278 ( 0.02%)  	result = clish_view_find_next_completion(clish_shell__get_view(this),
160,411 ( 2.44%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_next_completion (90x)
5,840 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  819 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (91x)
    .           		iter->last_cmd, line, iter->field, BOOL_TRUE);
    .           	/* ask the global view for next command */
  728 ( 0.01%)  	cmd = clish_view_find_next_completion(this->global,
392,700 ( 5.98%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_next_completion (91x)
    .           		iter->last_cmd, line, iter->field, BOOL_TRUE);
    .           
  368 ( 0.01%)  	if (clish_command_diff(result, cmd) > 0)
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,580 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_diff (90x)
    .           		result = cmd;
    .           
  182 ( 0.00%)  	if (!result)
   18 ( 0.00%)  		iter->last_cmd = NULL;
    .           	else
  292 ( 0.00%)  		iter->last_cmd = clish_command__get_name(result);
  292 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (73x)
    .           
    .           	return result;
  637 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_shell_param_generator(clish_shell_t *this, lub_argv_t *matches,
    .           	const clish_command_t *cmd, const char *line, unsigned offset)
  116 ( 0.00%)  {
   36 ( 0.00%)  	const char *name = clish_command__get_name(cmd);
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (9x)
   45 ( 0.00%)  	char *text = lub_string_dup(&line[offset]);
1,402 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (9x)
    .           	clish_ptype_t *ptype;
   36 ( 0.00%)  	unsigned idx = lub_string_wordcount(name);
2,686 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (9x)
    .           	/* get the index of the current parameter */
   27 ( 0.00%)  	unsigned index = lub_string_wordcount(line) - idx;
3,288 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (9x)
    .           	clish_context_t context;
    .           
   54 ( 0.00%)  	if ((0 != index) || (offset && line[offset - 1] == ' ')) {
   40 ( 0.00%)  		lub_argv_t *argv = lub_argv_new(line, 0);
11,353 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (8x)
   28 ( 0.00%)  		clish_pargv_t *pargv = clish_pargv_new();
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  791 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_new (7x)
   29 ( 0.00%)  		clish_pargv_t *completion = clish_pargv_new();
  904 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_new (8x)
    8 ( 0.00%)  		unsigned completion_index = 0;
    .           		const clish_param_t *param = NULL;
    .           
    .           		/* if there is some text for the parameter then adjust the index */
    .           		if ((0 != index) && (text[0] != '\0'))
    6 ( 0.00%)  			index--;
    .           
    .           		/* Parse command line to get completion pargv's */
    .           		/* Prepare context */
   56 ( 0.00%)  		clish_context_init(&context, this);
   64 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (8x)
   40 ( 0.00%)  		clish_context__set_cmd(&context, cmd);
   32 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__set_cmd (8x)
   44 ( 0.00%)  		clish_context__set_pargv(&context, pargv);
  689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   28 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__set_pargv (7x)
    .           
  116 ( 0.00%)  		clish_shell_parse_pargv(pargv, cmd, &context,
5,919 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
14,193 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:clish_shell_parse_pargv (7x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (8x)
    .           			clish_command__get_paramv(cmd),
    .           			argv, &idx, completion, index + idx);
   24 ( 0.00%)  		lub_argv_delete(argv);
3,022 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (8x)
    .           
  104 ( 0.00%)  		while ((param = clish_pargv__get_param(completion,
  670 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   75 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv__get_param (11x)
    .           			completion_index++))) {
    .           			char *result;
    .           			/* The param is args so it has no completion */
   20 ( 0.00%)  			if (param == clish_command__get_args(cmd))
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (4x)
    .           				continue;
    .           			/* The switch has no completion string */
   20 ( 0.00%)  			if (CLISH_PARAM_SWITCH == clish_param__get_mode(param))
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (4x)
    .           				continue;
    .           			/* The subcommand is identified by it's value */
    8 ( 0.00%)  			if (CLISH_PARAM_SUBCOMMAND ==
   12 ( 0.00%)  				clish_param__get_mode(param)) {
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (4x)
    .           				result = clish_param__get_value(param);
    .           				if (result)
    .           					lub_argv_add(matches, result);
    .           			}
    .           			/* The 'completion' field of PARAM */
   24 ( 0.00%)  			if (clish_param__get_completion(param)) {
  719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_completion (3x)
    .           				char *str, *q;
    .           				char *saveptr = NULL;
    .           				str = clish_shell_expand(
    .           					clish_param__get_completion(param), SHELL_VAR_ACTION, &context);
    .           				if (str) {
   16 ( 0.00%)  					for (q = strtok_r(str, " \n", &saveptr);
    .           						q; q = strtok_r(NULL, " \n", &saveptr)) {
    .           						if (q == strstr(q, text))
    .           							lub_argv_add(matches, q);
    .           					}
    .           					lub_string_free(str);
    .           				}
    .           			}
    .           			/* The common PARAM. Let ptype do the work */
   24 ( 0.00%)  			if ((ptype = clish_param__get_ptype(param)))
  663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype (3x)
   24 ( 0.00%)  				clish_ptype_word_generator(ptype, matches, text);
6,434 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,170 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_word_generator (3x)
    .           		}
   24 ( 0.00%)  		clish_pargv_delete(completion);
1,761 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_delete (8x)
   32 ( 0.00%)  		clish_pargv_delete(pargv);
1,731 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_delete (8x)
    .           	}
    .           
   27 ( 0.00%)  	lub_string_free(text);
  810 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
   72 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_wdog.c
--------------------------------------------------------------------------------
Ir           

-- line 26 ----------------------------------------
  .           	this->wdog_active = BOOL_FALSE;
  .           	tinyrl__set_timeout(tinyrl, this->idle_timeout);
  .           
  .           	return 0;
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           int clish_shell_keypress_fn(tinyrl_t *tinyrl, int key)
188 ( 0.00%)  {
192 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(tinyrl);
883 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
186 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (93x)
282 ( 0.00%)  	clish_shell_t *this = clish_context__get_shell(context);
188 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (94x)
  .           
282 ( 0.00%)  	if (this->wdog_active) {
  .           		this->wdog_active = BOOL_FALSE;
  .           		tinyrl__set_timeout(tinyrl, this->idle_timeout);
  .           	}
  .           
  .           	key = key; /* Happy compiler */
  .           
  .           	return 0;
282 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */
  .           int clish_shell_wdog(clish_shell_t *this)
  .           {
  .           	clish_context_t context;
  .           
  .           	assert(this->wdog);
  .           
-- line 54 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/param/param.c
--------------------------------------------------------------------------------
Ir           

-- line 13 ----------------------------------------
  .           #include <string.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
  .           static void clish_param_init(clish_param_t *this, const char *name,
  .           	const char *text, const char *ptype_name)
  .           {
100 ( 0.00%)  	this->name = lub_string_dup(name);
5,612 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  	this->text = lub_string_dup(text);
6,039 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  	this->ptype_name = lub_string_dup(ptype_name);
6,022 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
  .           
  .           	/* Set up defaults */
 25 ( 0.00%)  	this->ptype = NULL;
 25 ( 0.00%)  	this->defval = NULL;
 25 ( 0.00%)  	this->mode = CLISH_PARAM_COMMON;
 25 ( 0.00%)  	this->optional = BOOL_FALSE;
 25 ( 0.00%)  	this->order = BOOL_FALSE;
 25 ( 0.00%)  	this->value = NULL;
 25 ( 0.00%)  	this->hidden = BOOL_FALSE;
 25 ( 0.00%)  	this->test = NULL;
 25 ( 0.00%)  	this->completion = NULL;
 25 ( 0.00%)  	this->access = NULL;
  .           
 75 ( 0.00%)  	this->paramv = clish_paramv_new();
4,795 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_new (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_param_fini(clish_param_t * this)
  .           {
  .           	/* deallocate the memory for this instance */
 75 ( 0.00%)  	lub_string_free(this->defval);
423 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->name);
1,800 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->text);
1,800 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->ptype_name);
180 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->value);
585 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->test);
180 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->completion);
180 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
 75 ( 0.00%)  	lub_string_free(this->access);
180 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (20x)
  .           
 75 ( 0.00%)  	clish_paramv_delete(this->paramv);
5,075 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_delete'2 (19x)
112 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_delete (1x)
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           clish_param_t *clish_param_new(const char *name, const char *text,
  .           	const char *ptype_name)
200 ( 0.00%)  {
100 ( 0.00%)  	clish_param_t *this = malloc(sizeof(clish_param_t));
6,326 ( 0.10%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (25x)
  .           
 50 ( 0.00%)  	if (this)
  .           		clish_param_init(this, name, text, ptype_name);
  .           	return this;
175 ( 0.00%)  }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC METHODS
  .            *--------------------------------------------------------- */
  .           void clish_param_delete(clish_param_t * this)
 50 ( 0.00%)  {
  .           	clish_param_fini(this);
 75 ( 0.00%)  	free(this);
1,760 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (20x)
 25 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param_insert_param(clish_param_t * this, clish_param_t * param)
  .           {
 15 ( 0.00%)  	return clish_paramv_insert(this->paramv, param);
1,173 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_insert (5x)
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC ATTRIBUTES
  .            *--------------------------------------------------------- */
  .           void clish_param__set_ptype_name(clish_param_t *this, const char *ptype_name)
125 ( 0.00%)  {
 75 ( 0.00%)  	if (this->ptype_name)
 50 ( 0.00%)  		lub_string_free(this->ptype_name);
2,250 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (25x)
100 ( 0.00%)  	this->ptype_name = lub_string_dup(ptype_name);
100 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char * clish_param__get_ptype_name(const clish_param_t *this)
  .           {
 25 ( 0.00%)  	return this->ptype_name;
 25 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_param__get_name(const clish_param_t * this)
  .           {
 46 ( 0.00%)  	if (!this)
  .           		return NULL;
 46 ( 0.00%)  	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_param__get_text(const clish_param_t * this)
  .           {
  .           	return this->text;
  .           }
  .           
-- line 113 ----------------------------------------
-- line 115 ----------------------------------------
  .           const char *clish_param__get_range(const clish_param_t * this)
  .           {
  .           	return clish_ptype__get_range(this->ptype);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_param__get_ptype(const clish_param_t * this)
  .           {
  4 ( 0.00%)  	return this->ptype;
  4 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_ptype(clish_param_t *this, clish_ptype_t *ptype)
  .           {
 50 ( 0.00%)  	this->ptype = ptype;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_default(clish_param_t * this, const char *defval)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->defval);
 20 ( 0.00%)  	this->defval = lub_string_dup(defval);
1,157 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_param__get_default(const clish_param_t * this)
  .           {
  .           	return this->defval;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_mode(clish_param_t * this, clish_param_mode_e mode)
  .           {
 10 ( 0.00%)  	assert(this);
 10 ( 0.00%)  	this->mode = mode;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_mode_e clish_param__get_mode(const clish_param_t * this)
  .           {
 22 ( 0.00%)  	return this->mode;
 22 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_param_validate(const clish_param_t * this, const char *text)
 15 ( 0.00%)  {
 12 ( 0.00%)  	if (CLISH_PARAM_SUBCOMMAND == clish_param__get_mode(this)) {
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (3x)
  .           		if (lub_string_nocasecmp(clish_param__get_value(this), text))
  .           			return NULL;
  .           	}
 16 ( 0.00%)  	return clish_ptype_translate(this->ptype, text);
5,472 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_translate (2x)
3,389 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  9 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param_help(const clish_param_t * this, clish_help_t *help)
  .           {
  .           	const char *range = clish_ptype__get_range(this->ptype);
  .           	const char *name;
  .           	char *str = NULL;
  .           
-- line 174 ----------------------------------------
-- line 217 ----------------------------------------
  .           	unsigned index)
  .           {
  .           	return clish_paramv__get_param(this->paramv, index);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_paramv_t *clish_param__get_paramv(clish_param_t * this)
  .           {
 31 ( 0.00%)  	return this->paramv;
 31 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned int clish_param__get_param_count(const clish_param_t * this)
  .           {
 21 ( 0.00%)  	return clish_paramv__get_count(this->paramv);
 14 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_count (7x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_optional(clish_param_t * this, bool_t optional)
  .           {
 48 ( 0.00%)  	this->optional = optional;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_optional(const clish_param_t * this)
  .           {
 21 ( 0.00%)  	return this->optional;
 21 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_order(clish_param_t * this, bool_t order)
  .           {
 38 ( 0.00%)  	this->order = order;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_order(const clish_param_t * this)
  .           {
  .           	return this->order;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           
  .           /* paramv methods */
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_paramv_init(clish_paramv_t * this)
  .           {
 52 ( 0.00%)  	this->paramc = 0;
 52 ( 0.00%)  	this->paramv = NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_paramv_fini(clish_paramv_t * this)
  .           {
  .           	unsigned i;
  .           
  .           	/* finalize each of the parameter instances */
241 ( 0.00%)  	for (i = 0; i < this->paramc; i++) {
124 ( 0.00%)  		clish_param_delete(this->paramv[i]);
12,001 ( 0.18%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_delete (18x)
1,096 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           	/* free the parameter vector */
156 ( 0.00%)  	free(this->paramv);
844 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (28x)
  .           	this->paramc = 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_paramv_t *clish_paramv_new(void)
 52 ( 0.00%)  {
156 ( 0.00%)  	clish_paramv_t *this = malloc(sizeof(clish_paramv_t));
8,884 ( 0.14%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (52x)
  .           
104 ( 0.00%)  	if (this)
  .           		clish_paramv_init(this);
  .           	return this;
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_paramv_delete(clish_paramv_t * this)
260 ( 0.00%)  {
  .           	clish_paramv_fini(this);
156 ( 0.00%)  	free(this);
2,464 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (28x)
156 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_paramv_insert(clish_paramv_t * this, clish_param_t * param)
120 ( 0.00%)  {
 72 ( 0.00%)  	size_t new_size = ((this->paramc + 1) * sizeof(clish_param_t *));
  .           	clish_param_t **tmp;
  .           
  .           	/* resize the parameter vector */
 72 ( 0.00%)  	tmp = realloc(this->paramv, new_size);
4,299 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (24x)
 48 ( 0.00%)  	if (tmp) {
 24 ( 0.00%)  		this->paramv = tmp;
  .           		/* insert reference to the parameter */
 96 ( 0.00%)  		this->paramv[this->paramc++] = param;
  .           	}
 96 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_paramv_remove(clish_paramv_t *this, unsigned int index)
  .           {
  .           	size_t new_size;
  .           	clish_param_t **tmp;
  .           	clish_param_t **dst, **src;
  .           	size_t n;
-- line 321 ----------------------------------------
-- line 345 ----------------------------------------
  .           
  .           	return 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_t *clish_paramv__get_param(const clish_paramv_t * this,
  .           	unsigned int index)
  .           {
 50 ( 0.00%)  	clish_param_t *result = NULL;
  .           
170 ( 0.00%)  	if (index < this->paramc)
140 ( 0.00%)  		result = this->paramv[index];
  .           	return result;
 50 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_t *clish_paramv_find_param(const clish_paramv_t * this,
  .           	const char *name)
  .           {
  .           	clish_param_t *res = NULL;
  .           	unsigned int i;
  .           
-- line 366 ----------------------------------------
-- line 385 ----------------------------------------
  .           		return clish_param__get_default(res);
  .           
  .           	return NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned int clish_paramv__get_count(const clish_paramv_t * this)
  .           {
 23 ( 0.00%)  	return this->paramc;
 23 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_value(clish_param_t * this, const char * value)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->value);
 20 ( 0.00%)  	this->value = lub_string_dup(value);
911 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_param__get_value(const clish_param_t * this)
  .           {
  .           	if (this->value)
  .           		return this->value;
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_hidden(clish_param_t * this, bool_t hidden)
  .           {
 38 ( 0.00%)  	this->hidden = hidden;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_hidden(const clish_param_t * this)
  .           {
  .           	return this->hidden;
  .           }
  .           
-- line 422 ----------------------------------------
-- line 425 ----------------------------------------
  .           {
  .           	assert(!this->test);
  .           	this->test = lub_string_dup(test);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_param__get_test(const clish_param_t *this)
  .           {
  7 ( 0.00%)  	return this->test;
  7 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_completion(clish_param_t *this, const char *completion)
  .           {
  .           	assert(!this->completion);
  .           	this->completion = lub_string_dup(completion);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_param__get_completion(const clish_param_t *this)
  .           {
  4 ( 0.00%)  	return this->completion;
  4 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_access(clish_param_t *this, const char *access)
  .           {
  .           	if (this->access)
  .           		lub_string_free(this->access);
  .           	this->access = lub_string_dup(access);
  .           }
-- line 455 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c
--------------------------------------------------------------------------------
Ir             

-- line 31 ----------------------------------------
    .            *    Initial version
    .            *---------------------------------------------------------------
    .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
    .            **************************************************************** */
    .           #include "private.h"
    .           
    .           /*--------------------------------------------------------- */
    .           void *lub_bintree_findnext(lub_bintree_t * this, const void *clientkey)
2,165 ( 0.03%)  {
    .           	lub_bintree_node_t *t = this->root;
    .           	int comp;
    .           
    .           	/*
    .           	 * have a look for a direct match
    .           	 */
2,165 ( 0.03%)  	t = this->root = lub_bintree_splay(this, t, clientkey);
209,861 ( 3.20%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (433x)
    .           
  866 ( 0.01%)  	if (NULL != t) {
    .           		/* now look at what we have got */
2,165 ( 0.03%)  		comp = lub_bintree_compare(this, t, clientkey);
85,919 ( 1.31%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (428x)
  304 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (5x)
  866 ( 0.01%)  		if (comp <= 0) {
    .           			/*
    .           			 * time to fiddle with the right hand side of the tree
    .           			 * we need the closest node from the right hand side
    .           			 */
  351 ( 0.01%)  			t = t->right =
1,755 ( 0.03%)  			    lub_bintree_splay(this, t->right, clientkey);
52,392 ( 0.80%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (351x)
    .           		}
    .           	}
1,272 ( 0.02%)  	if (NULL == t) {
   66 ( 0.00%)  		return NULL;
    .           	} else {
  734 ( 0.01%)  		return lub_bintree_getclientnode(this, t);
    .           	}
1,732 ( 0.03%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c
--------------------------------------------------------------------------------
Ir           

-- line 26 ----------------------------------------
  .            *    Initial version
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           void *lub_bintree_iterator_next(lub_bintree_iterator_t * this)
124 ( 0.00%)  {
159 ( 0.00%)  	void *clientnode = lub_bintree_findnext(this->tree, &this->key);
24,605 ( 0.37%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext (30x)
1,778 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* make sure that next time we've move onward */
159 ( 0.00%)  	lub_bintree_iterator_init(this, this->tree, clientnode);
861 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,000 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_init.c:lub_bintree_iterator_init (30x)
  .           
  .           	return clientnode;
155 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/string/string.c
--------------------------------------------------------------------------------
Ir              

-- line 10 ----------------------------------------
     .           
     .           const char *lub_string_esc_default = "`|$<>&()#;\\\"!";
     .           const char *lub_string_esc_regex = "^$.*+[](){}";
     .           const char *lub_string_esc_quoted = "\\\"";
     .           
     .           /*--------------------------------------------------------- */
     .           void lub_string_free(char *ptr)
     .           {
 2,266 ( 0.03%)  	free(ptr);
56,262 ( 0.86%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1,130x)
 1,569 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_ndecode(const char *string, unsigned int len)
   580 ( 0.01%)  {
     .           	const char *s = string;
     .           	char *res, *p;
     .           	int esc = 0;
     .           
   290 ( 0.00%)  	if (!string)
     .           		return NULL;
     .           
     .           	/* Allocate enough memory for result */
   580 ( 0.01%)  	p = res = malloc(len + 1);
16,883 ( 0.26%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (145x)
     .           
 5,401 ( 0.08%)  	while (*s && (s < (string +len))) {
 1,618 ( 0.02%)  		if (!esc) {
 1,618 ( 0.02%)  			if ('\\' == *s)
   809 ( 0.01%)  				esc = 1;
     .           			else
     .           				*p = *s;
     .           		} else {
     .           /*			switch (*s) {
     .           			case 'r':
     .           			case 'n':
     .           				*p = '\n';
     .           				break;
     .           			case 't':
     .           				*p = '\t';
     .           				break;
     .           			default:
     .           				*p = *s;
     .           				break;
     .           			}
   809 ( 0.01%)  */			*p = *s;
     .           			esc = 0;
     .           		}
     .           		if (!esc)
 1,618 ( 0.02%)  			p++;
   809 ( 0.01%)  		s++;
     .           	}
   145 ( 0.00%)  	*p = '\0';
     .           
     .           	return res;
   580 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           inline char *lub_string_decode(const char *string)
     .           {
     .           	return lub_string_ndecode(string, strlen(string));
     .           }
     .           
     .           /*----------------------------------------------------------- */
-- line 71 ----------------------------------------
-- line 95 ----------------------------------------
     .           			break;
     .           		}
     .           	}
     .           	return result;
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           void lub_string_catn(char **string, const char *text, size_t len)
 1,284 ( 0.02%)  {
   428 ( 0.01%)  	if (text) {
     .           		char *q;
 1,070 ( 0.02%)  		size_t length, initlen, textlen = strlen(text);
 4,016 ( 0.06%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (214x)
     .           
     .           		/* make sure the client cannot give us duff details */
   428 ( 0.01%)  		len = (len < textlen) ? len : textlen;
     .           
     .           		/* remember the size of the original string */
 1,312 ( 0.02%)  		initlen = *string ? strlen(*string) : 0;
 3,010 ( 0.05%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (121x)
     .           
     .           		/* account for '\0' */
   214 ( 0.00%)  		length = initlen + len + 1;
     .           
     .           		/* allocate the memory for the result */
   646 ( 0.01%)  		q = realloc(*string, length);
32,370 ( 0.49%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (213x)
 1,846 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   428 ( 0.01%)  		if (NULL != q) {
   214 ( 0.00%)  			*string = q;
     .           			/* move to the end of the initial string */
   214 ( 0.00%)  			q += initlen;
     .           
 4,171 ( 0.06%)  			while (len--) {
 4,692 ( 0.07%)  				*q++ = *text++;
     .           			}
   214 ( 0.00%)  			*q = '\0';
     .           		}
     .           	}
 1,284 ( 0.02%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           void lub_string_cat(char **string, const char *text)
 1,065 ( 0.02%)  {
 1,282 ( 0.02%)  	size_t len = text ? strlen(text) : 0;
 1,456 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 3,966 ( 0.06%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (212x)
   856 ( 0.01%)  	lub_string_catn(string, text, len);
55,728 ( 0.85%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn (212x)
 2,759 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   639 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_dup(const char *string)
     .           {
   928 ( 0.01%)  	if (!string)
     .           		return NULL;
   854 ( 0.01%)  	return strdup(string);
86,141 ( 1.31%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (424x)
 1,754 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    78 ( 0.00%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_dupn(const char *string, unsigned int len)
   252 ( 0.00%)  {
     .           	char *res = NULL;
     .           
   336 ( 0.01%)  	if (!string)
     .           		return res;
   336 ( 0.01%)  	res = malloc(len + 1);
 9,057 ( 0.14%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (84x)
   424 ( 0.01%)  	strncpy(res, string, len);
 2,437 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (83x)
 1,584 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    84 ( 0.00%)  	res[len] = '\0';
     .           
     .           	return res;
   420 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           int lub_string_nocasecmp(const char *cs, const char *ct)
16,428 ( 0.25%)  {
     .           	int result = 0;
71,764 ( 1.09%)  	while ((0 == result) && *cs && *ct) {
     .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
     .           		 * MACRO implementation uses braces to prevent multiple increments
     .           		 * when called.
     .           		 */
41,229 ( 0.63%)  		int s = lub_ctype_tolower(*cs++);
90,684 ( 1.38%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (8,244x)
 2,407 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
41,225 ( 0.63%)  		int t = lub_ctype_tolower(*ct++);
90,695 ( 1.38%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (8,245x)
     .           
     .           		result = s - t;
     .           	}
     .           	/*lint -e774 Boolean within 'if' always evealuates to True 
     .           	 * not the case because of tolower() evaluating to 0 under lint
     .           	 * (see above)
     .           	 */
     .           	if (0 == result) {
     .           		/* account for different string lengths */
 1,338 ( 0.02%)  		result = *cs - *ct;
     .           	}
     .           	return result;
13,690 ( 0.21%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_tolower(const char *str)
     .           {
     .           	char *tmp = strdup(str);
     .           	char *p = tmp;
     .           
     .           	while (*p) {
-- line 192 ----------------------------------------
-- line 194 ----------------------------------------
     .           		p++;
     .           	}
     .           
     .           	return tmp;
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           const char *lub_string_nocasestr(const char *cs, const char *ct)
 1,246 ( 0.02%)  {
     .           	const char *p = NULL;
    53 ( 0.00%)  	const char *result = NULL;
     .           
 1,188 ( 0.02%)  	while (*cs) {
     .           		const char *q = cs;
     .           
     .           		p = ct;
     .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
     .           		 * MACRO implementation uses braces to prevent multiple increments
     .           		 * when called.
     .           		 */
     .           		/*lint -e506 Constant value Boolean
     .           		 * not the case because of tolower() evaluating to 0 under lint
     .           		 * (see above)
     .           		 */
 2,929 ( 0.04%)  		while (*p && *q
 3,000 ( 0.05%)  		       && (lub_ctype_tolower(*p) == lub_ctype_tolower(*q))) {
 8,250 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (750x)
   102 ( 0.00%)  			p++, q++;
     .           		}
   648 ( 0.01%)  		if (0 == *p) {
     .           			break;
     .           		}
   327 ( 0.00%)  		cs++;
     .           	}
   106 ( 0.00%)  	if (p && !*p) {
     .           		/* we've found the first match of ct within cs */
     .           		result = cs;
     .           	}
     .           	return result;
 1,246 ( 0.02%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           unsigned int lub_string_equal_part(const char *str1, const char *str2,
     .           	bool_t utf8)
     .           {
     .           	unsigned int cnt = 0;
     .           
   408 ( 0.01%)  	if (!str1 || !str2)
     .           		return cnt;
 2,290 ( 0.03%)  	while (*str1 && *str2) {
 2,189 ( 0.03%)  		if (*str1 != *str2)
     .           			break;
   907 ( 0.01%)  		cnt++;
   487 ( 0.01%)  		str1++;
   487 ( 0.01%)  		str2++;
     .           	}
   134 ( 0.00%)  	if (!utf8)
     .           		return cnt;
     .           
     .           	/* UTF8 features */
   268 ( 0.00%)  	if (cnt && (UTF8_11 == (*(str1 - 1) & UTF8_MASK)))
   201 ( 0.00%)  		cnt--;
     .           
     .           	return cnt;
    35 ( 0.00%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           const char *lub_string_suffix(const char *string)
   292 ( 0.00%)  {
     .           	const char *p1, *p2;
     .           	p1 = p2 = string;
 1,508 ( 0.02%)  	while (*p1) {
 1,147 ( 0.02%)  		if (lub_ctype_isspace(*p1)) {
 4,940 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_isspace (380x)
   777 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			p2 = p1;
 1,143 ( 0.02%)  			p2++;
     .           		}
     .           		p1++;
     .           	}
     .           	return p2;
   365 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           const char *lub_string_nextword(const char *string,
     .           	size_t *len, size_t *offset, size_t *quoted)
11,192 ( 0.17%)  {
     .           	const char *word;
     .           
 1,399 ( 0.02%)  	*quoted = 0;
     .           
     .           	/* Find the start of a word (not including an opening quote) */
11,766 ( 0.18%)  	while (*string && isspace(*string)) {
 2,376 ( 0.04%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (792x)
 1,542 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   949 ( 0.01%)  		string++;
   250 ( 0.00%)  		(*offset)++;
     .           	}
     .           	/* Is this the start of a quoted string ? */
 2,100 ( 0.03%)  	if (*string == '"') {
     .           		*quoted = 1;
     .           		string++;
     .           	}
     .           	word = string;
 2,798 ( 0.04%)  	*len = 0;
     .           
     .           	/* Find the end of the word */
11,569 ( 0.18%)  	while (*string) {
 7,872 ( 0.12%)  		if (*string == '\\') {
     .           			string++;
     .           			(*len)++;
     .           			if (*string) {
     .           				(*len)++;
     .           				string++;
     .           			}
     .           			continue;
     .           		}
     .           		/* End of word */
31,488 ( 0.48%)  		if (!*quoted && isspace(*string))
11,808 ( 0.18%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (3,936x)
     .           			break;
 7,372 ( 0.11%)  		if (*string == '"') {
     .           			/* End of a quoted string */
     .           			*quoted = 2;
     .           			break;
     .           		}
 3,686 ( 0.06%)  		(*len)++;
 7,372 ( 0.11%)  		string++;
     .           	}
     .           
     .           	return word;
 9,793 ( 0.15%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           unsigned int lub_string_wordcount(const char *line)
 3,045 ( 0.05%)  {
     .           	const char *word;
   609 ( 0.01%)  	unsigned int result = 0;
 1,218 ( 0.02%)  	size_t len = 0, offset = 0;
     .           	size_t quoted;
     .           
 7,813 ( 0.12%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
66,468 ( 1.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (608x)
 2,674 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,218 ( 0.02%)  		*word || quoted;
 3,330 ( 0.05%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
30,728 ( 0.47%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (555x)
     .           		/* account for the terminating quotation mark */
 3,384 ( 0.05%)  		len += quoted ? quoted - 1 : 0;
   555 ( 0.01%)  		result++;
     .           	}
     .           
     .           	return result;
 4,263 ( 0.06%)  }
     .           
     .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c
--------------------------------------------------------------------------------
Ir             

-- line 155 ----------------------------------------
    .           		return 1;
    .           
    .           	return 0;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void utf8_point_left(tinyrl_t * this)
    .           {
  104 ( 0.00%)  	if (!this->utf8)
    .           		return;
  150 ( 0.00%)  	while (this->point &&
   92 ( 0.00%)  		(UTF8_10 == (this->line[this->point] & UTF8_MASK)))
    .           		this->point--;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void utf8_point_right(tinyrl_t * this)
    .           {
    .           	if (!this->utf8)
    .           		return;
    .           	while ((this->point < this->end) &&
    .           		(UTF8_10 == (this->line[this->point] & UTF8_MASK)))
    .           		this->point++;
    .           }
    .           
    .           /*-------------------------------------------------------- */
  325 ( 0.00%)  static unsigned int utf8_nsyms(const tinyrl_t *this, const char *str,
    .           	unsigned int num)
    .           {
    .           	unsigned int nsym = 0;
    .           	unsigned long sym = 0;
    .           	unsigned int i = 0;
    .           
  650 ( 0.01%)  	if (!this->utf8)
    .           		return num;
    .           
3,812 ( 0.06%)  	while (i < num) {
8,347 ( 0.13%)  		if ('\0' == str[i])
    .           			break;
    .           		/* ASCII char */
3,162 ( 0.05%)  		if (!(UTF8_7BIT_MASK & str[i])) {
1,581 ( 0.02%)  			i++;
1,581 ( 0.02%)  			nsym++;
    .           			continue;
    .           		}
    .           		/* Multibyte */
    .           		i += utf8_wchar(&str[i], &sym);
    .           		if (utf8_is_cjk(sym)) /* CJK chars have double-width */
    .           			nsym += 2;
    .           		else
    .           			nsym += 1;
    .           	}
    .           
    .           	return nsym;
  325 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static void tty_set_raw_mode(tinyrl_t * this)
    .           {
    .           	struct termios new_termios;
    .           	int fd;
    .           
   18 ( 0.00%)  	if (!tinyrl_vt100__get_istream(this->term))
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (3x)
    .           		return;
   21 ( 0.00%)  	fd = fileno(tinyrl_vt100__get_istream(this->term));
   18 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (3x)
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (3x)
   21 ( 0.00%)  	if (tcgetattr(fd, &new_termios) < 0)
  150 ( 0.00%)  => /opt/build/glibc/glibc-2.24/termios/../sysdeps/unix/sysv/linux/tcgetattr.c:tcgetattr (3x)
    .           		return;
    3 ( 0.00%)  	new_termios.c_iflag = 0;
    3 ( 0.00%)  	new_termios.c_oflag = OPOST | ONLCR;
    3 ( 0.00%)  	new_termios.c_lflag = 0;
    3 ( 0.00%)  	new_termios.c_cc[VMIN] = 1;
    3 ( 0.00%)  	new_termios.c_cc[VTIME] = 0;
    .           	/* Do the mode switch */
   19 ( 0.00%)  	(void)tcsetattr(fd, TCSADRAIN, &new_termios);
1,586 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  140 ( 0.00%)  => /opt/build/glibc/glibc-2.24/termios/../sysdeps/unix/sysv/linux/tcsetattr.c:tcsetattr (2x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static void tty_restore_mode(const tinyrl_t * this)
    .           {
    .           	int fd;
    .           
   15 ( 0.00%)  	if (!tinyrl_vt100__get_istream(this->term))
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (3x)
    .           		return;
   18 ( 0.00%)  	fd = fileno(tinyrl_vt100__get_istream(this->term));
   18 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (3x)
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (3x)
    .           	/* Do the mode switch */
   18 ( 0.00%)  	(void)tcsetattr(fd, TCSADRAIN, &this->default_termios);
  210 ( 0.00%)  => /opt/build/glibc/glibc-2.24/termios/../sysdeps/unix/sysv/linux/tcsetattr.c:tcsetattr (3x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .           This is called whenever a line is edited in any way.
    .           It signals that if we are currently viewing a history line we should transfer it
    .           to the current buffer
    .           */
    .           static void changed_line(tinyrl_t * this)
  126 ( 0.00%)  {
    .           	/* if the current line is not our buffer then make it so */
  189 ( 0.00%)  	if (this->line != this->buffer) {
    .           		/* replace the current buffer with the new details */
    .           		free(this->buffer);
    .           		this->line = this->buffer = lub_string_dup(this->line);
    .           		this->buffer_size = strlen(this->buffer);
    .           		assert(this->line);
    .           	}
  126 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static int tinyrl_timeout_default(tinyrl_t *this)
    .           {
    .           	this = this; /* Happy compiler */
    .           
    .           	/* Return -1 to close session on timeout */
    .           	return -1;
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static bool_t tinyrl_key_default(tinyrl_t * this, int key)
   62 ( 0.00%)  {
    .           	bool_t result = BOOL_FALSE;
   62 ( 0.00%)  	if (key > 31) {
    .           		char tmp[2];
   62 ( 0.00%)  		tmp[0] = (key & 0xFF), tmp[1] = '\0';
    .           		/* inject this text into the buffer */
  128 ( 0.00%)  		result = tinyrl_insert_text(this, tmp);
3,274 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,174 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text (30x)
    .           	} else {
    .           		/* Call the external hotkey analyzer */
    .           		if (this->hotkey_fn)
    .           			this->hotkey_fn(this, key);
    .           	}
    .           	return result;
  124 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_interrupt(tinyrl_t * this, int key)
    .           {
    .           	tinyrl_crlf(this);
    .           	tinyrl_delete_text(this, 0, this->end);
    .           	this->done = BOOL_TRUE;
    .           	/* keep the compiler happy */
-- line 293 ----------------------------------------
-- line 383 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_down(tinyrl_t * this, int key)
    .           {
    .           	bool_t result = BOOL_FALSE;
    .           	if (this->line != this->buffer) {
    .           		/* we are not already at the bottom */
    .           		/* the iterator will have been set up by the key_up() function */
    .           		tinyrl_history_entry_t *entry =
    6 ( 0.00%)  		    tinyrl_history_getnext(&this->hist_iter);
    .           		if (!entry) {
    .           			/* nothing more in the history list */
    .           			this->line = this->buffer;
    .           		} else {
    .           			this->line = tinyrl_history_entry__get_line(entry);
    .           		}
    .           		/* display the entry moving the insertion point
    .           		 * to the end of the line 
-- line 399 ----------------------------------------
-- line 431 ----------------------------------------
    .           	}
    .           	/* keep the compiler happy */
    .           	key = key;
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_backspace(tinyrl_t *this, int key)
   26 ( 0.00%)  {
    .           	bool_t result = BOOL_FALSE;
  126 ( 0.00%)  	if (this->point) {
   78 ( 0.00%)  		unsigned int end = --this->point;
    .           		utf8_point_left(this);
   78 ( 0.00%)  		tinyrl_delete_text(this, this->point, end);
1,820 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_delete_text (26x)
   26 ( 0.00%)  		result = BOOL_TRUE;
    .           	}
    .           	/* keep the compiler happy */
    .           	key = key;
    .           	return result;
  214 ( 0.00%)  }
  242 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_point_left.part.0 (26x)
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_backword(tinyrl_t *this, int key)
    .           {
    .           	bool_t result = BOOL_FALSE;
    .           
    .               /* remove current whitespace before cursor */
    .           	while (this->point > 0 && isspace(this->line[this->point - 1]))
-- line 458 ----------------------------------------
-- line 562 ----------------------------------------
    .           		break;
    .           	}
    .           
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_tab(tinyrl_t * this, int key)
   34 ( 0.00%)  {
    .           	bool_t result = BOOL_FALSE;
   38 ( 0.00%)  	tinyrl_match_e status = tinyrl_complete_with_extensions(this);
817,457 (12.46%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_complete_with_extensions (16x)
93,846 ( 1.43%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   62 ( 0.00%)  	switch (status) {
    .           	case TINYRL_COMPLETED_MATCH:
    .           	case TINYRL_MATCH:
    .           		/* everything is OK with the world... */
   16 ( 0.00%)  		result = tinyrl_insert_text(this, " ");
  356 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text (4x)
    .           		break;
    .           	case TINYRL_NO_MATCH:
    .           	case TINYRL_MATCH_WITH_EXTENSIONS:
    .           	case TINYRL_AMBIGUOUS:
    .           	case TINYRL_COMPLETED_AMBIGUOUS:
    .           		/* oops don't change the result and let the bell ring */
    .           		break;
    .           	}
    .           	/* keep the compiler happy */
    .           	key = key;
    .           	return result;
   43 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           static void tinyrl_fini(tinyrl_t * this)
    .           {
    .           	/* delete the history session */
    7 ( 0.00%)  	tinyrl_history_delete(this->history);
3,644 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* delete the terminal session */
    7 ( 0.00%)  	tinyrl_vt100_delete(this->term);
  817 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* free up any dynamic strings */
    3 ( 0.00%)  	lub_string_free(this->buffer);
    9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    3 ( 0.00%)  	lub_string_free(this->kill_string);
    9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    3 ( 0.00%)  	lub_string_free(this->last_buffer);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    3 ( 0.00%)  	lub_string_free(this->prompt);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void tinyrl_init(tinyrl_t * this, FILE * istream, FILE * ostream,
    .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
    .           {
    .           	int i;
    .           
  512 ( 0.01%)  	for (i = 0; i < NUM_HANDLERS; i++) {
  512 ( 0.01%)  		this->handlers[i] = tinyrl_key_default;
    .           	}
    .           	/* Default handlers */
    2 ( 0.00%)  	this->handlers[KEY_CR] = tinyrl_key_crlf;
    1 ( 0.00%)  	this->handlers[KEY_LF] = tinyrl_key_crlf;
    2 ( 0.00%)  	this->handlers[KEY_ETX] = tinyrl_key_interrupt;
    2 ( 0.00%)  	this->handlers[KEY_DEL] = tinyrl_key_backspace;
    1 ( 0.00%)  	this->handlers[KEY_BS] = tinyrl_key_backspace;
    2 ( 0.00%)  	this->handlers[KEY_EOT] = tinyrl_key_delete;
    2 ( 0.00%)  	this->handlers[KEY_FF] = tinyrl_key_clear_screen;
    2 ( 0.00%)  	this->handlers[KEY_NAK] = tinyrl_key_erase_line;
    2 ( 0.00%)  	this->handlers[KEY_SOH] = tinyrl_key_start_of_line;
    2 ( 0.00%)  	this->handlers[KEY_ENQ] = tinyrl_key_end_of_line;
    2 ( 0.00%)  	this->handlers[KEY_VT] = tinyrl_key_kill;
    2 ( 0.00%)  	this->handlers[KEY_EM] = tinyrl_key_yank;
    2 ( 0.00%)  	this->handlers[KEY_HT] = tinyrl_key_tab;
    2 ( 0.00%)  	this->handlers[KEY_ETB] = tinyrl_key_backword;
    .           
    1 ( 0.00%)  	this->line = NULL;
    1 ( 0.00%)  	this->max_line_length = 0;
    1 ( 0.00%)  	this->prompt = NULL;
    1 ( 0.00%)  	this->prompt_size = 0;
    1 ( 0.00%)  	this->buffer = NULL;
    1 ( 0.00%)  	this->buffer_size = 0;
    1 ( 0.00%)  	this->done = BOOL_FALSE;
    1 ( 0.00%)  	this->completion_over = BOOL_FALSE;
    1 ( 0.00%)  	this->point = 0;
    1 ( 0.00%)  	this->end = 0;
    1 ( 0.00%)  	this->attempted_completion_function = complete_fn;
    2 ( 0.00%)  	this->timeout_fn = tinyrl_timeout_default;
    1 ( 0.00%)  	this->keypress_fn = NULL;
    1 ( 0.00%)  	this->hotkey_fn = NULL;
    1 ( 0.00%)  	this->state = 0;
    1 ( 0.00%)  	this->kill_string = NULL;
    1 ( 0.00%)  	this->echo_char = '\0';
    1 ( 0.00%)  	this->echo_enabled = BOOL_TRUE;
    1 ( 0.00%)  	this->last_buffer = NULL;
    1 ( 0.00%)  	this->last_point = 0;
    1 ( 0.00%)  	this->last_line_size = 0;
    1 ( 0.00%)  	this->utf8 = BOOL_FALSE;
    .           
    .           	/* create the vt100 terminal */
    9 ( 0.00%)  	this->term = tinyrl_vt100_new(NULL, ostream);
  917 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    8 ( 0.00%)  	tinyrl__set_istream(this, istream);
1,547 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    8 ( 0.00%)  	this->last_width = tinyrl_vt100__get_width(this->term);
3,714 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* create the history */
    8 ( 0.00%)  	this->history = tinyrl_history_new(stifle);
1,742 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_printf(const tinyrl_t * this, const char *fmt, ...)
    7 ( 0.00%)  {
    .           	va_list args;
    .           	int len;
    .           
    6 ( 0.00%)  	va_start(args, fmt);
    8 ( 0.00%)  	len = tinyrl_vt100_vprintf(this->term, fmt, args);
18,066 ( 0.28%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	va_end(args);
    .           
    .           	return len;
    2 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_delete(tinyrl_t * this)
    1 ( 0.00%)  {
    3 ( 0.00%)  	assert(this);
    .           	if (this) {
    .           		/* let the object tidy itself up */
    .           		tinyrl_fini(this);
    .           
    .           		/* release the memory associate with this instance */
    3 ( 0.00%)  		free(this);
  119 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           	}
    1 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           
    .           /*#####################################
    .            * EXPORTED INTERFACE
    .            *##################################### */
    .           /*----------------------------------------------------------------------- */
    .           int tinyrl_getchar(const tinyrl_t * this)
    .           {
  286 ( 0.00%)  	return tinyrl_vt100_getchar(this->term);
4,371 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_getchar (93x)
2,231 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static void tinyrl_internal_print(const tinyrl_t * this, const char *text)
    .           {
  336 ( 0.01%)  	if (this->echo_enabled) {
    .           		/* simply echo the line */
  784 ( 0.01%)  		tinyrl_vt100_printf(this->term, "%s", text);
42,244 ( 0.64%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (112x)
    .           	} else {
    .           		/* replace the line with echo char if defined */
    .           		if (this->echo_char) {
    .           			unsigned int i = strlen(text);
    .           			while (i--) {
    .           				tinyrl_vt100_printf(this->term, "%c",
    .           					this->echo_char);
    .           			}
    .           		}
    .           	}
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
  420 ( 0.01%)  static void tinyrl_internal_position(const tinyrl_t *this, int prompt_len,
    .           	int line_len, unsigned int width)
    .           {
    .           	int rows, cols;
    .           
  945 ( 0.01%)  	rows = ((line_len + prompt_len) / width) - (prompt_len / width);
  105 ( 0.00%)  	cols = ((line_len + prompt_len) % width) - (prompt_len % width);
  210 ( 0.00%)  	if (cols > 0)
  108 ( 0.00%)  		tinyrl_vt100_cursor_back(this->term, cols);
20,075 ( 0.31%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_cursor_back (25x)
1,578 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   79 ( 0.00%)  	else if (cols < 0)
    .           		tinyrl_vt100_cursor_forward(this->term, -cols);
  210 ( 0.00%)  	if (rows > 0)
    .           		tinyrl_vt100_cursor_up(this->term, rows);
  105 ( 0.00%)  	else if (rows < 0)
    .           		tinyrl_vt100_cursor_down(this->term, -rows);
  420 ( 0.01%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           /* Jump to first free line after current multiline input   */
    .           void tinyrl_multi_crlf(const tinyrl_t * this)
   18 ( 0.00%)  {
   15 ( 0.00%)  	unsigned int line_size = strlen(this->last_buffer);
   48 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (3x)
   15 ( 0.00%)  	unsigned int line_len = utf8_nsyms(this, this->last_buffer, line_size);
  156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (3x)
   12 ( 0.00%)  	unsigned int count = utf8_nsyms(this, this->last_buffer, this->last_point);
  156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (3x)
    .           
   15 ( 0.00%)  	tinyrl_internal_position(this, this->prompt_len + line_len,
   72 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_internal_position.isra.5 (3x)
    6 ( 0.00%)  		- (line_len - count), this->last_width);
    9 ( 0.00%)  	tinyrl_crlf(this);
1,152 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_crlf (3x)
    9 ( 0.00%)  	tinyrl_vt100_oflush(this->term);
  219 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (3x)
   15 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           void tinyrl_redisplay(tinyrl_t * this)
  896 ( 0.01%)  {
  560 ( 0.01%)  	unsigned int line_size = strlen(this->line);
1,972 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (112x)
  560 ( 0.01%)  	unsigned int line_len = utf8_nsyms(this, this->line, line_size);
6,828 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (112x)
  448 ( 0.01%)  	unsigned int width = tinyrl_vt100__get_width(this->term);
3,696 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_width (112x)
   10 ( 0.00%)  	unsigned int count, eq_chars = 0;
    .           	int cols;
    .           
    .           	/* Prepare print position */
  642 ( 0.01%)  	if (this->last_buffer && (width == this->last_width)) {
    .           		unsigned int eq_len = 0;
    .           		/* If line and last line have the equal chars at begining */
  412 ( 0.01%)  		eq_chars = lub_string_equal_part(this->line, this->last_buffer,
7,397 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_equal_part (101x)
  849 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			this->utf8);
  918 ( 0.01%)  		eq_len = utf8_nsyms(this, this->last_buffer, eq_chars);
6,103 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (102x)
  510 ( 0.01%)  		count = utf8_nsyms(this, this->last_buffer, this->last_point);
6,395 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (102x)
  612 ( 0.01%)  		tinyrl_internal_position(this, this->prompt_len + eq_len,
24,183 ( 0.37%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_internal_position.isra.5 (102x)
  204 ( 0.00%)  			count - eq_len, width);
    .           	} else {
    .           		/* Prepare to resize */
   20 ( 0.00%)  		if (width != this->last_width) {
    .           			tinyrl_vt100_next_line(this->term);
    .           			tinyrl_vt100_erase_down(this->term);
    .           		}
   74 ( 0.00%)  		tinyrl_vt100_printf(this->term, "%s", this->prompt);
3,800 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (9x)
1,163 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* Print current line */
  112 ( 0.00%)  	tinyrl_internal_print(this, this->line + eq_chars);
  560 ( 0.01%)  	cols = (this->prompt_len + line_len) % width;
  224 ( 0.00%)  	if (!cols && (line_size - eq_chars))
    .           		tinyrl_vt100_next_line(this->term);
    .           	/* Erase down if current line is shorter than previous one */
  224 ( 0.00%)  	if (this->last_line_size > line_size)
  108 ( 0.00%)  		tinyrl_vt100_erase_down(this->term);
10,750 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_erase_down (25x)
1,189 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	/* Move the cursor to the insertion point */
  336 ( 0.01%)  	if (this->point < line_size) {
    .           		unsigned int pre_len = utf8_nsyms(this,
    .           			this->line, this->point);
    .           		count = utf8_nsyms(this, this->line + this->point,
    .           			line_size - this->point);
    .           		tinyrl_internal_position(this, this->prompt_len + pre_len,
    .           			count, width);
    .           	}
    .           
    .           	/* Update the display */
  340 ( 0.01%)  	tinyrl_vt100_oflush(this->term);
16,623 ( 0.25%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (111x)
2,407 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Save the last line buffer */
  336 ( 0.01%)  	lub_string_free(this->last_buffer);
9,270 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (112x)
  448 ( 0.01%)  	this->last_buffer = lub_string_dup(this->line);
17,555 ( 0.27%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (112x)
  224 ( 0.00%)  	this->last_point = this->point;
  112 ( 0.00%)  	this->last_width = width;
  112 ( 0.00%)  	this->last_line_size = line_size;
  896 ( 0.01%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           tinyrl_t *tinyrl_new(FILE * istream, FILE * ostream,
    .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
    9 ( 0.00%)  {
    .           	tinyrl_t *this = NULL;
    .           
    8 ( 0.00%)  	this = malloc(sizeof(tinyrl_t));
1,783 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  	if (this)
    .           		tinyrl_init(this, istream, ostream, stifle, complete_fn);
    .           
    .           	return this;
    7 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static char *internal_insertline(tinyrl_t * this, char *buffer)
    .           {
    .           	char *p;
    .           	char *s = buffer;
    .           
    .           	/* strip any spurious '\r' or '\n' */
-- line 828 ----------------------------------------
-- line 843 ----------------------------------------
    .           	tinyrl_redisplay(this);
    .           
    .           	return s;
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static char *internal_readline(tinyrl_t * this,
    .           	void *context, const char *str)
   30 ( 0.00%)  {
   12 ( 0.00%)  	FILE *istream = tinyrl_vt100__get_istream(this->term);
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (3x)
    .           	char *result = NULL;
    .           	int lerrno = 0;
    .           
    3 ( 0.00%)  	this->done = BOOL_FALSE;
    3 ( 0.00%)  	this->point = 0;
    3 ( 0.00%)  	this->end = 0;
   15 ( 0.00%)  	this->buffer = lub_string_dup("");
  468 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
   12 ( 0.00%)  	this->buffer_size = strlen(this->buffer);
   48 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (3x)
    3 ( 0.00%)  	this->line = this->buffer;
    3 ( 0.00%)  	this->context = context;
    .           
    .           	/* Interactive session */
   15 ( 0.00%)  	if (this->isatty && !str) {
    3 ( 0.00%)  		unsigned int utf8_cont = 0; /* UTF-8 continue bytes */
    3 ( 0.00%)  		unsigned int esc_cont = 0; /* Escape sequence continues */
    .           		char esc_seq[10]; /* Buffer for ESC sequence */
    3 ( 0.00%)  		char *esc_p = esc_seq;
    .           
    .           		/* Set the terminal into raw mode */
    .           		tty_set_raw_mode(this);
   13 ( 0.00%)  		tinyrl_reset_line_state(this);
6,547 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,757 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_reset_line_state (2x)
    .           
  197 ( 0.00%)  		while (!this->done) {
    .           			int key;
    .           
  380 ( 0.01%)  			key = tinyrl_getchar(this);
2,949 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,650 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_getchar (93x)
    .           
    .           			/* Error || EOF || Timeout */
  188 ( 0.00%)  			if (key < 0) {
    .           				if ((VT100_TIMEOUT == key) &&
    .           					!this->timeout_fn(this))
    .           					continue;
    .           				/* It's time to finish the session */
    .           				this->done = BOOL_TRUE;
    .           				this->line = NULL;
    .           				lerrno = ENOENT;
    .           				continue;
    .           			}
    .           
    .           			/* Real key pressed */
    .           			/* Common callback for any key */
  282 ( 0.00%)  			if (this->keypress_fn)
  282 ( 0.00%)  				this->keypress_fn(this, key);
2,483 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_wdog.c:clish_shell_keypress_fn (94x)
    .           
    .           			/* Check for ESC sequence. It's a special case. */
  564 ( 0.01%)  			if (!esc_cont && (key == KEY_ESC)) {
    .           				esc_cont = 1; /* Start ESC sequence */
    .           				esc_p = esc_seq;
    .           				continue;
    .           			}
  188 ( 0.00%)  			if (esc_cont) {
    .           				/* Broken sequence */
    9 ( 0.00%)  				if (esc_p >= (esc_seq + sizeof(esc_seq) - 1)) {
    .           					esc_cont = 0;
    .           					continue;
    .           				}
    .           				/* Dump the control sequence into sequence buffer
    .           				   ANSI standard control sequences will end
    .           				   with a character between 64 - 126 */
    .           				*esc_p = key & 0xff;
    .           				esc_p++;
-- line 913 ----------------------------------------
-- line 917 ----------------------------------------
    .           					tinyrl_escape_seq(this, esc_seq);
    .           					esc_cont = 0;
    .           					tinyrl_redisplay(this);
    .           				}
    .           				continue;
    .           			}
    .           
    .           			/* Call the handler for this key */
  564 ( 0.01%)  			if (!this->handlers[key](this, key))
911,852 (13.89%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_tab (17x)
39,255 ( 0.60%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_key_space (1x)
33,840 ( 0.52%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_key_enter (3x)
6,886 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_default (31x)
2,714 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_backspace (42x)
  124 ( 0.00%)  				tinyrl_ding(this);
16,385 ( 0.25%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_ding (29x)
1,959 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  282 ( 0.00%)  			if (this->done) /* Some handler set the done flag */
    .           				continue; /* It will break the loop */
    .           
  273 ( 0.00%)  			if (this->utf8) {
  182 ( 0.00%)  				if (!(UTF8_7BIT_MASK & key)) /* ASCII char */
    .           					utf8_cont = 0;
    .           				else if (utf8_cont && (UTF8_10 == (key & UTF8_MASK))) /* Continue byte */
    .           					utf8_cont--;
    .           				else if (UTF8_11 == (key & UTF8_MASK)) { /* First byte of multibyte char */
    .           					/* Find out number of char's bytes */
    .           					int b = key;
    .           					utf8_cont = 0;
    .           					while ((utf8_cont < 6) && (UTF8_10 != (b & UTF8_MASK))) {
-- line 939 ----------------------------------------
-- line 941 ----------------------------------------
    .           						b = b << 1;
    .           					}
    .           				}
    .           			}
    .           			/* For non UTF-8 encoding the utf8_cont is always 0.
    .           			   For UTF-8 it's 0 when one-byte symbol or we get
    .           			   all bytes for the current multibyte character. */
    .           			if (!utf8_cont)
  546 ( 0.01%)  				tinyrl_redisplay(this);
143,817 ( 2.19%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay (91x)
    .           		}
    .           		/* If the last character in the line (other than NULL)
    .           		   is a space remove it. */
   42 ( 0.00%)  		if (this->end && this->line && isspace(this->line[this->end - 1]))
    9 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (3x)
    .           			tinyrl_delete_text(this, this->end - 1, this->end);
    .           		/* Restores the terminal mode */
    .           		tty_restore_mode(this);
    .           
    .           	/* Non-interactive session */
    .           	} else {
    .           		char *s = NULL, buffer[80];
    .           		size_t len = sizeof(buffer);
-- line 961 ----------------------------------------
-- line 987 ----------------------------------------
    .           		 * error from fgets.
    .           		 */
    .           		if (this->line && !this->handlers[KEY_LF](this, KEY_LF)) {
    .           			/* an issue has occured */
    .           			this->line = NULL;
    .           			lerrno = ENOEXEC;
    .           		}
    .           		if (str)
    3 ( 0.00%)  			lub_string_free(tmp);
    .           	}
    .           	/*
    .           	 * duplicate the string for return to the client 
    .           	 * we have to duplicate as we may be referencing a
    .           	 * history entry or our internal buffer
    .           	 */
   15 ( 0.00%)  	result = this->line ? lub_string_dup(this->line) : NULL;
  465 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
    .           
    .           	/* free our internal buffer */
    9 ( 0.00%)  	free(this->buffer);
  264 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (3x)
    3 ( 0.00%)  	this->buffer = NULL;
    .           
    6 ( 0.00%)  	if (!result)
    .           		errno = lerrno; /* get saved errno */
    .           	return result;
   27 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           char *tinyrl_readline(tinyrl_t * this, void *context)
    .           {
    6 ( 0.00%)  	return internal_readline(this, context, NULL);
1,183,938 (18.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:internal_readline (3x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           char *tinyrl_forceline(tinyrl_t * this, void *context, const char *line)
    .           {
    .           	return internal_readline(this, context, line);
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .            * Ensure that buffer has enough space to hold len characters,
    .            * possibly reallocating it if necessary. The function returns BOOL_TRUE
    .            * if the line is successfully extended, BOOL_FALSE if not.
    .            */
    .           bool_t tinyrl_extend_line_buffer(tinyrl_t * this, unsigned int len)
   12 ( 0.00%)  {
    .           	bool_t result = BOOL_TRUE;
    .           	char *new_buffer;
    4 ( 0.00%)  	size_t new_len = len;
    .           
   12 ( 0.00%)  	if (this->buffer_size >= len)
    4 ( 0.00%)  		return result;
    .           
    .           	/*
    .           	 * What we do depends on whether we are limited by
    .           	 * memory or a user imposed limit.
    .           	 */
   16 ( 0.00%)  	if (this->max_line_length == 0) {
    .           		/* make sure we don't realloc too often */
    4 ( 0.00%)  		if (new_len < this->buffer_size + 10)
    .           			new_len = this->buffer_size + 10;
    .           		/* leave space for terminator */
   28 ( 0.00%)  		new_buffer = realloc(this->buffer, new_len + 1);
  524 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (4x)
    .           
    8 ( 0.00%)  		if (!new_buffer) {
    .           			tinyrl_ding(this);
    .           			result = BOOL_FALSE;
    .           		} else {
    4 ( 0.00%)  			this->buffer_size = new_len;
    8 ( 0.00%)  			this->line = this->buffer = new_buffer;
    .           		}
    .           	} else {
    .           		if (new_len < this->max_line_length) {
    .           
    .           			/* Just reallocate once to the max size */
    .           			new_buffer = realloc(this->buffer,
    .           				this->max_line_length);
    .           
-- line 1064 ----------------------------------------
-- line 1072 ----------------------------------------
    .           			}
    .           		} else {
    .           			tinyrl_ding(this);
    .           			result = BOOL_FALSE;
    .           		}
    .           	}
    .           
    .           	return result;
   20 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .            * Insert text into the line at the current cursor position.
    .            */
    .           bool_t tinyrl_insert_text(tinyrl_t * this, const char *text)
  180 ( 0.00%)  {
  144 ( 0.00%)  	unsigned int delta = strlen(text);
  576 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (36x)
    .           
    .           	/*
    .           	 * If the client wants to change the line ensure that the line and buffer
    .           	 * references are in sync
    .           	 */
   72 ( 0.00%)  	changed_line(this);
  252 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:changed_line (36x)
    .           
  144 ( 0.00%)  	if ((delta + this->end) > (this->buffer_size)) {
    .           		/* extend the current buffer */
   12 ( 0.00%)  		if (BOOL_FALSE ==
   16 ( 0.00%)  			tinyrl_extend_line_buffer(this, this->end + delta))
  936 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  483 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_extend_line_buffer (3x)
    .           			return BOOL_FALSE;
    .           	}
    .           
  108 ( 0.00%)  	if (this->point < this->end) {
    .           		/* move the current text to the right (including the terminator) */
    .           		memmove(&this->buffer[this->point + delta],
    .           			&this->buffer[this->point],
    .           			(this->end - this->point) + 1);
    .           	} else {
    .           		/* terminate the string */
  108 ( 0.00%)  		this->buffer[this->end + delta] = '\0';
    .           	}
    .           
    .           	/* insert the new text */
  220 ( 0.00%)  	strncpy(&this->buffer[this->point], text, delta);
1,547 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,115 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (35x)
    .           
    .           	/* now update the indexes */
   36 ( 0.00%)  	this->point += delta;
   36 ( 0.00%)  	this->end += delta;
    .           
   36 ( 0.00%)  	return BOOL_TRUE;
  148 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /* 
    .            * A convenience function for displaying a list of strings in columnar
    .            * format on Readline's output stream. matches is the list of strings,
    .            * in argv format, such as a list of completion matches. len is the number
    .            * of strings in matches, and max is the length of the longest string in matches.
    .            * This function uses the setting of print-completions-horizontally to select
    .            * how the matches are displayed
    .            */
    .           void tinyrl_display_matches(const tinyrl_t *this,
    .           	char *const *matches, unsigned int len, size_t max)
   84 ( 0.00%)  {
   21 ( 0.00%)  	unsigned int width = tinyrl_vt100__get_width(this->term);
  231 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_width (7x)
    .           	unsigned int cols, rows;
    .           
    .           	/* Find out column and rows number */
   21 ( 0.00%)  	if (max < width)
   42 ( 0.00%)  		cols = (width + 1) / (max + 1); /* allow for a space between words */
    .           	else
    .           		cols = 1;
   35 ( 0.00%)  	rows = len / cols + 1;
    .           
   14 ( 0.00%)  	assert(matches);
    .           	if (matches) {
    .           		unsigned int r, c;
    7 ( 0.00%)  		len--, matches++; /* skip the subtitution string */
    .           		/* Print out a table of completions */
   91 ( 0.00%)  		for (r = 0; r < rows && len; r++) {
  480 ( 0.01%)  			for (c = 0; c < cols && len; c++) {
  146 ( 0.00%)  				const char *match = *matches++;
   73 ( 0.00%)  				len--;
  219 ( 0.00%)  				if ((c + 1) == cols) /* Last str in row */
   73 ( 0.00%)  					tinyrl_vt100_printf(this->term, "%s",
    .           						match);
    .           				else
  365 ( 0.01%)  					tinyrl_vt100_printf(this->term, "%-*s ",
49,929 ( 0.76%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (73x)
    .           						max, match);
    .           			}
   28 ( 0.00%)  			tinyrl_crlf(this);
2,688 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_crlf (7x)
    .           		}
    .           	}
   56 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .            * Delete the text between start and end in the current line. (inclusive)
    .            * This adjusts the rl_point and rl_end indexes appropriately.
    .            */
    .           void tinyrl_delete_text(tinyrl_t * this, unsigned int start, unsigned int end)
  216 ( 0.00%)  {
    .           	unsigned int delta;
    .           
    .           	/*
    .           	 * If the client wants to change the line ensure that the line and buffer
    .           	 * references are in sync
    .           	 */
   27 ( 0.00%)  	changed_line(this);
  189 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:changed_line (27x)
    .           
    .           	/* make sure we play it safe */
    .           	if (start > end) {
    .           		unsigned int tmp = end;
    .           		start = end;
    .           		end = tmp;
    .           	}
   54 ( 0.00%)  	if (end > this->end)
    .           		end = this->end;
    .           
   81 ( 0.00%)  	delta = (end - start) + 1;
    .           
    .           	/* move any text which is left */
  220 ( 0.00%)  	memmove(&this->buffer[start],
1,482 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  338 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy@GLIBC_2.2.5 (26x)
  108 ( 0.00%)  		&this->buffer[start + delta], this->end - end);
    .           
    .           	/* now adjust the indexs */
   81 ( 0.00%)  	if (this->point >= start) {
    .           		if (this->point > end) {
    .           			/* move the insertion point back appropriately */
  162 ( 0.00%)  			this->point -= delta;
    .           		} else {
    .           			/* move the insertion point to the start */
    .           			this->point = start;
    .           		}
    .           	}
   81 ( 0.00%)  	if (this->end > end)
  104 ( 0.00%)  		this->end -= delta;
    .           	else
    1 ( 0.00%)  		this->end = start;
    .           	/* put a terminator at the end of the buffer */
   54 ( 0.00%)  	this->buffer[this->end] = '\0';
  162 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           bool_t tinyrl_bind_key(tinyrl_t * this, int key, tinyrl_key_func_t * fn)
    .           {
    4 ( 0.00%)  	bool_t result = BOOL_FALSE;
    .           
    8 ( 0.00%)  	if ((key >= 0) && (key < 256)) {
    .           		/* set the key handling function */
    8 ( 0.00%)  		this->handlers[key] = fn;
    4 ( 0.00%)  		result = BOOL_TRUE;
    .           	}
    .           
    .           	return result;
    4 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           /*
    .            * Returns an array of strings which is a list of completions for text.
    .            * If there are no completions, returns NULL. The first entry in the
    .            * returned array is the substitution for text. The remaining entries
    .            * are the possible completions. The array is terminated with a NULL pointer.
    .            *
-- line 1234 ----------------------------------------
-- line 1286 ----------------------------------------
    .           
    .           	if (matches)
    .           		matches[offset] = NULL;
    .           	return matches;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_delete_matches(char **this)
   55 ( 0.00%)  {
    .           	char **matches = this;
  308 ( 0.00%)  	while (*matches) {
    .           		/* release the memory for each contained string */
  264 ( 0.00%)  		free(*matches++);
7,744 ( 0.12%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (88x)
    .           	}
    .           	/* release the memory for the array */
   33 ( 0.00%)  	free(this);
1,106 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (11x)
   33 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_crlf(const tinyrl_t * this)
    .           {
   85 ( 0.00%)  	tinyrl_vt100_printf(this->term, "\n");
6,443 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (17x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           /*
    .            * Ring the terminal bell, obeying the setting of bell-style.
    .            */
    .           void tinyrl_ding(const tinyrl_t * this)
    .           {
   94 ( 0.00%)  	tinyrl_vt100_ding(this->term);
16,298 ( 0.25%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_ding (29x)
1,281 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_reset_line_state(tinyrl_t * this)
   20 ( 0.00%)  {
   34 ( 0.00%)  	lub_string_free(this->last_buffer);
  795 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  810 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
   10 ( 0.00%)  	this->last_buffer = NULL;
   10 ( 0.00%)  	this->last_line_size = 0;
    .           
   34 ( 0.00%)  	tinyrl_redisplay(this);
11,898 ( 0.18%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay (9x)
4,974 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   10 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_replace_line(tinyrl_t * this, const char *text, int clear_undo)
    .           {
    .           	size_t new_len = strlen(text);
    .           
    .           	/* ignored for now */
    .           	clear_undo = clear_undo;
-- line 1335 ----------------------------------------
-- line 1344 ----------------------------------------
    .           		this->point = this->end = new_len;
    .           	}
    .           	tinyrl_redisplay(this);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static tinyrl_match_e
    .           tinyrl_do_complete(tinyrl_t * this, bool_t with_extensions)
  162 ( 0.00%)  {
    .           	tinyrl_match_e result = TINYRL_NO_MATCH;
    .           	char **matches = NULL;
    .           	unsigned int start, end;
   10 ( 0.00%)  	bool_t completion = BOOL_FALSE;
    .           	bool_t prefix = BOOL_FALSE;
    .           	int i = 0;
    .           
    .           	/* find the start and end of the current word */
   18 ( 0.00%)  	start = end = this->point;
  333 ( 0.01%)  	while (start && !isspace(this->line[start - 1]))
1,546 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (12x)
    .           		start--;
    .           
   54 ( 0.00%)  	if (this->attempted_completion_function) {
   18 ( 0.00%)  		this->completion_over = BOOL_FALSE;
   18 ( 0.00%)  		this->completion_error_over = BOOL_FALSE;
    .           		/* try and complete the current line buffer */
  108 ( 0.00%)  		matches = this->attempted_completion_function(this,
836,730 (12.75%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_completion (18x)
    .           			this->line, start, end);
    .           	}
    .           	if (!matches && (BOOL_FALSE == this->completion_over)) {
    .           		/* insert default completion call here... */
    .           	}
   36 ( 0.00%)  	if (!matches)
   14 ( 0.00%)  		return result;
    .           
    .           	/* identify and insert a common prefix if there is one */
  136 ( 0.00%)  	if (0 != strncmp(matches[0], &this->line[start],
1,491 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  176 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (11x)
  187 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse42.S:__strncmp_sse42 (10x)
    .           		strlen(matches[0]))) {
    .           		/*
    .           		 * delete the original text not including
    .           		 * the current insertion point character
    .           		 */
    1 ( 0.00%)  		if (this->end != end)
    3 ( 0.00%)  			end--;
    8 ( 0.00%)  		tinyrl_delete_text(this, start, end);
2,267 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  		if (BOOL_FALSE == tinyrl_insert_text(this, matches[0]))
   84 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text (1x)
    .           			return TINYRL_NO_MATCH;
    2 ( 0.00%)  		completion = BOOL_TRUE;
    .           	}
  286 ( 0.00%)  	for (i = 1; matches[i]; i++) {
    .           		/* this is just a prefix string */
  235 ( 0.00%)  		if (0 == lub_string_nocasecmp(matches[0], matches[i]))
  867 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,016 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (76x)
  253 ( 0.00%)  			prefix = BOOL_TRUE;
    .           	}
    .           	/* is there more than one completion? */
   43 ( 0.00%)  	if (matches[2]) {
    .           		char **tmp = matches;
    .           		unsigned int max, len;
    .           		max = len = 0;
  348 ( 0.01%)  		while (*tmp) {
  160 ( 0.00%)  			size_t size = strlen(*tmp++);
1,280 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (80x)
    .           			len++;
   80 ( 0.00%)  			if (size > max)
  240 ( 0.00%)  				max = size;
    .           		}
   21 ( 0.00%)  		if (completion)
    .           			result = TINYRL_COMPLETED_AMBIGUOUS;
   14 ( 0.00%)  		else if (prefix)
    7 ( 0.00%)  			result = TINYRL_MATCH_WITH_EXTENSIONS;
    .           		else
    7 ( 0.00%)  			result = TINYRL_AMBIGUOUS;
    .           		if (with_extensions || !prefix) {
    .           			/* Either we always want to show extensions or
    .           			 * we haven't been able to complete the current line
    .           			 * and there is just a prefix, so let the user see the options
    .           			 */
   32 ( 0.00%)  			tinyrl_crlf(this);
1,055 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,304 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_crlf (6x)
   46 ( 0.00%)  			tinyrl_display_matches(this, matches, len, max);
44,982 ( 0.69%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_display_matches (6x)
10,372 ( 0.16%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   28 ( 0.00%)  			tinyrl_reset_line_state(this);
10,050 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_reset_line_state (7x)
    .           		}
    .           	} else {
    .           		result = completion ?
   20 ( 0.00%)  			TINYRL_COMPLETED_MATCH : TINYRL_MATCH;
    .           	}
    .           	/* free the memory */
   37 ( 0.00%)  	tinyrl_delete_matches(matches);
2,162 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
8,124 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_delete_matches (10x)
    .           	/* redisplay the line */
   33 ( 0.00%)  	tinyrl_redisplay(this);
13,488 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay (11x)
    .           
    .           	return result;
  162 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           tinyrl_match_e tinyrl_complete_with_extensions(tinyrl_t * this)
    .           {
   34 ( 0.00%)  	return tinyrl_do_complete(this, BOOL_TRUE);
910,446 (13.87%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_do_complete (17x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           tinyrl_match_e tinyrl_complete(tinyrl_t * this)
    .           {
    2 ( 0.00%)  	return tinyrl_do_complete(this, BOOL_FALSE);
31,750 ( 0.48%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_do_complete (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void *tinyrl__get_context(const tinyrl_t * this)
    .           {
  116 ( 0.00%)  	return this->context;
  116 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *tinyrl__get_line(const tinyrl_t * this)
    .           {
    4 ( 0.00%)  	return this->line;
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           tinyrl_history_t *tinyrl__get_history(const tinyrl_t * this)
    .           {
    3 ( 0.00%)  	return this->history;
    3 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_completion_over(tinyrl_t * this)
    .           {
   36 ( 0.00%)  	this->completion_over = BOOL_TRUE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_completion_error_over(tinyrl_t * this)
    .           {
    .           	this->completion_error_over = BOOL_TRUE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t tinyrl_is_completion_error_over(const tinyrl_t * this)
    .           {
    1 ( 0.00%)  	return this->completion_error_over;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_done(tinyrl_t * this)
    .           {
    6 ( 0.00%)  	this->done = BOOL_TRUE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_enable_echo(tinyrl_t * this)
    .           {
    .           	this->echo_enabled = BOOL_TRUE;
    .           }
    .           
-- line 1494 ----------------------------------------
-- line 1496 ----------------------------------------
    .           void tinyrl_disable_echo(tinyrl_t * this, char echo_char)
    .           {
    .           	this->echo_enabled = BOOL_FALSE;
    .           	this->echo_char = echo_char;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl__set_istream(tinyrl_t * this, FILE * istream)
   10 ( 0.00%)  {
   10 ( 0.00%)  	tinyrl_vt100__set_istream(this->term, istream);
  785 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__set_istream (1x)
    4 ( 0.00%)  	if (istream) {
    .           		int fd;
   14 ( 0.00%)  		this->isatty = isatty(fileno(istream)) ? BOOL_TRUE : BOOL_FALSE;
1,511 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
    .           		/* Save terminal settings to restore on exit */
    3 ( 0.00%)  		fd = fileno(istream);
    6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
    8 ( 0.00%)  		tcgetattr(fd, &this->default_termios);
1,590 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	} else
    1 ( 0.00%)  		this->isatty = BOOL_FALSE;
    7 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl__get_isatty(const tinyrl_t * this)
    .           {
    3 ( 0.00%)  	return this->isatty;
    3 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl__get_istream(const tinyrl_t * this)
    .           {
   16 ( 0.00%)  	return tinyrl_vt100__get_istream(this->term);
  815 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (3x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl__get_ostream(const tinyrl_t * this)
    .           {
    .           	return tinyrl_vt100__get_ostream(this->term);
    .           }
    .           
-- line 1533 ----------------------------------------
-- line 1534 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           const char *tinyrl__get_prompt(const tinyrl_t * this)
    .           {
    .           	return this->prompt;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_prompt(tinyrl_t *this, const char *prompt)
   15 ( 0.00%)  {
    9 ( 0.00%)  	if (this->prompt) {
    4 ( 0.00%)  		lub_string_free(this->prompt);
  180 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (2x)
    2 ( 0.00%)  		this->prompt_size = 0;
    2 ( 0.00%)  		this->prompt_len = 0;
    .           	}
   15 ( 0.00%)  	this->prompt = lub_string_dup(prompt);
  467 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
    6 ( 0.00%)  	if (this->prompt) {
   16 ( 0.00%)  		this->prompt_size = strlen(this->prompt);
1,462 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   32 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (2x)
   18 ( 0.00%)  		this->prompt_len = utf8_nsyms(this, this->prompt,
  145 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (3x)
    .           			this->prompt_size);
    .           	}
   12 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl__get_utf8(const tinyrl_t * this)
    .           {
    .           	return this->utf8;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_utf8(tinyrl_t * this, bool_t utf8)
    .           {
    2 ( 0.00%)  	this->utf8 = utf8;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_timeout(tinyrl_t *this, int timeout)
    .           {
   16 ( 0.00%)  	tinyrl_vt100__set_timeout(this->term, timeout);
  777 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__set_timeout (3x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_timeout_fn(tinyrl_t *this,
    .           	tinyrl_timeout_fn_t *fn)
    .           {
    2 ( 0.00%)  	this->timeout_fn = fn;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_keypress_fn(tinyrl_t *this,
    .           	tinyrl_keypress_fn_t *fn)
    .           {
    2 ( 0.00%)  	this->keypress_fn = fn;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_hotkey_fn(tinyrl_t *this,
    .           	tinyrl_key_func_t *fn)
    .           {
    2 ( 0.00%)  	this->hotkey_fn = fn;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl_is_quoting(const tinyrl_t * this)
   19 ( 0.00%)  {
   19 ( 0.00%)  	bool_t result = BOOL_FALSE;
    .           	/* count the quotes upto the current insertion point */
   19 ( 0.00%)  	unsigned int i = 0;
  415 ( 0.01%)  	while (i < this->point) {
   42 ( 0.00%)  		if (result && (this->line[i] == '\\')) {
    .           			i++;
    .           			if (i >= this->point)
    .           				break;
    .           			i++;
    .           			continue;
    .           		}
  363 ( 0.01%)  		if (this->line[i++] == '"') {
    .           			result = result ? BOOL_FALSE : BOOL_TRUE;
    .           		}
    .           	}
    .           	return result;
    5 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl_is_empty(const tinyrl_t *this)
    .           {
    4 ( 0.00%)  	return (this->point == 0) ? BOOL_TRUE : BOOL_FALSE;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_limit_line_length(tinyrl_t * this, unsigned int length)
    .           {
    .           	this->max_line_length = length;
    .           }
    .           
    .           /*--------------------------------------------------------- */
-- line 1628 ----------------------------------------
-- line 1635 ----------------------------------------
    .           extern unsigned int tinyrl__get_height(const tinyrl_t *this)
    .           {
    .           	return tinyrl_vt100__get_height(this->term);
    .           }
    .           
    .           /*----------------------------------------------------------*/
    .           int tinyrl__save_history(const tinyrl_t *this, const char *fname)
    .           {
    7 ( 0.00%)  	return tinyrl_history_save(this->history, fname);
12,595 ( 0.19%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*----------------------------------------------------------*/
    .           int tinyrl__restore_history(tinyrl_t *this, const char *fname)
    .           {
    7 ( 0.00%)  	return tinyrl_history_restore(this->history, fname);
32,091 ( 0.49%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*----------------------------------------------------------*/
    .           void tinyrl__stifle_history(tinyrl_t *this, unsigned int stifle)
    .           {
    7 ( 0.00%)  	tinyrl_history_stifle(this->history, stifle);
  770 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/view/view.c
--------------------------------------------------------------------------------
Ir             

-- line 17 ----------------------------------------
    .           /*---------------------------------------------------------
    .            * PRIVATE META FUNCTIONS
    .            *--------------------------------------------------------- */
    .           int clish_view_bt_compare(const void *clientnode, const void *clientkey)
    .           {
    .           	const clish_view_t *this = clientnode;
    .           	const char *key = clientkey;
    .           
  207 ( 0.00%)  	return strcmp(this->name, key);
2,223 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (69x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void clish_view_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
   14 ( 0.00%)  {
    .           	const clish_view_t *this = clientnode;
    .           
    .           	/* fill out the opaque key */
   60 ( 0.00%)  	strcpy((char *)key, this->name);
1,495 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  292 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (13x)
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PRIVATE METHODS
    .            *--------------------------------------------------------- */
    .           static void clish_view_init(clish_view_t * this, const char *name, const char *prompt)
    .           {
    .           	/* set up defaults */
   20 ( 0.00%)  	this->name = lub_string_dup(name);
  889 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
    5 ( 0.00%)  	this->prompt = NULL;
    5 ( 0.00%)  	this->depth = 0;
    5 ( 0.00%)  	this->restore = CLISH_RESTORE_NONE;
    5 ( 0.00%)  	this->access = NULL;
    .           
    .           	/* Be a good binary tree citizen */
   15 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
   25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (5x)
    .           
    .           	/* initialise the tree of commands for this view */
   44 ( 0.00%)  	lub_bintree_init(&this->tree,
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (5x)
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_offset (4x)
    .           		clish_command_bt_offset(),
    .           		clish_command_bt_compare, clish_command_bt_getkey);
    .           
    .           	/* Initialise the list of namespaces.
    .           	 * It's important to add new items to the
    .           	 * tail of list.
    .           	 */
   20 ( 0.00%)  	this->nspaces = lub_list_new(NULL);
  671 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (5x)
    .           
    .           	/* set up the defaults */
   24 ( 0.00%)  	clish_view__set_prompt(this, prompt);
  827 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  825 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__set_prompt (4x)
    .           
    .           	/* Initialize hotkey structures */
   19 ( 0.00%)  	this->hotkeys = clish_hotkeyv_new();
  734 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  509 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/hotkey/hotkey.c:clish_hotkeyv_new (4x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           static void clish_view_fini(clish_view_t * this)
    .           {
    .           	clish_command_t *cmd;
    .           	lub_list_node_t *iter;
    .           	clish_nspace_t *nspace;
    .           
    .           	/* delete each command held by this view */
  191 ( 0.00%)  	while ((cmd = lub_bintree_findfirst(&this->tree))) {
2,111 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (31x)
    .           		/* remove the command from the tree */
  104 ( 0.00%)  		lub_bintree_remove(&this->tree, cmd);
14,565 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c:lub_bintree_remove (26x)
    .           		/* release the instance */
   82 ( 0.00%)  		clish_command_delete(cmd);
37,182 ( 0.57%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_delete (25x)
3,380 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* Free namespaces list */
   30 ( 0.00%)  	while ((iter = lub_list__get_head(this->nspaces))) {
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
    .           		/* Remove the nspace from the list */
    5 ( 0.00%)  		lub_list_del(this->nspaces, iter);
    .           		nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
    .           		lub_list_node_free(iter);
    .           		/* Free the instance */
    .           		clish_nspace_delete(nspace);
    .           	}
   10 ( 0.00%)  	lub_list_free(this->nspaces);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_free (5x)
    .           
    .           	/* Free hotkey structures */
   19 ( 0.00%)  	clish_hotkeyv_delete(this->hotkeys);
  767 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  456 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/hotkey/hotkey.c:clish_hotkeyv_delete (4x)
    .           
    .           	/* free our memory */
   15 ( 0.00%)  	lub_string_free(this->name);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   15 ( 0.00%)  	lub_string_free(this->prompt);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   15 ( 0.00%)  	lub_string_free(this->access);
   45 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC META FUNCTIONS
    .            *--------------------------------------------------------- */
    .           size_t clish_view_bt_offset(void)
    .           {
    .           	return offsetof(clish_view_t, bt_node);
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_t *clish_view_new(const char *name, const char *prompt)
   25 ( 0.00%)  {
   20 ( 0.00%)  	clish_view_t *this = malloc(sizeof(clish_view_t));
1,181 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (5x)
    .           
   10 ( 0.00%)  	if (this)
    .           		clish_view_init(this, name, prompt);
    .           	return this;
   25 ( 0.00%)  }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC METHODS
    .            *--------------------------------------------------------- */
    .           void clish_view_delete(clish_view_t * this)
   25 ( 0.00%)  {
    .           	clish_view_fini(this);
   15 ( 0.00%)  	free(this);
  440 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (5x)
   15 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_view_new_command(clish_view_t * this,
    .           	const char *name, const char *help)
  162 ( 0.00%)  {
    .           	/* allocate the memory for a new parameter definition */
   85 ( 0.00%)  	clish_command_t *cmd = clish_command_new(name, help);
36,792 ( 0.56%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_new (26x)
3,605 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  	assert(cmd);
    .           
    .           	/* if this is a command other than the startup command... */
   81 ( 0.00%)  	if (NULL != help) {
    .           		/* ...insert it into the binary tree for this view */
  156 ( 0.00%)  		if (-1 == lub_bintree_insert(&this->tree, cmd)) {
7,256 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (26x)
    .           			/* inserting a duplicate command is bad */
    .           			clish_command_delete(cmd);
    .           			cmd = NULL;
    .           		}
    .           	}
    .           	return cmd;
  135 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           /* This method identifies the command (if any) which provides
    .            * the longest match with the specified line of text.
    .            *
    .            * NB this comparison is case insensitive.
    .            *
    .            * this - the view instance upon which to operate
    .            * line - the command line to analyse 
    .            */
    .           clish_command_t *clish_view_resolve_prefix(clish_view_t * this,
    .           	const char *line, bool_t inherit)
  500 ( 0.01%)  {
   50 ( 0.00%)  	clish_command_t *result = NULL, *cmd;
   50 ( 0.00%)  	char *buffer = NULL;
    .           	lub_argv_t *argv;
    .           	unsigned i;
    .           
    .           	/* create a vector of arguments */
  200 ( 0.00%)  	argv = lub_argv_new(line, 0);
45,216 ( 0.69%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (50x)
    .           
  504 ( 0.01%)  	for (i = 0; i < lub_argv__get_count(argv); i++) {
  144 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (72x)
    .           		/* set our buffer to be that of the first "i" arguments  */
  434 ( 0.01%)  		lub_string_cat(&buffer, lub_argv__get_arg(argv, i));
11,812 ( 0.18%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (48x)
  480 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (48x)
    .           
    .           		/* set the result to the longest match */
  288 ( 0.00%)  		cmd = clish_view_find_command(this, buffer, inherit);
42,571 ( 0.65%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (48x)
    .           
    .           		/* job done */
   96 ( 0.00%)  		if (!cmd)
    .           			break;
    .           		result = cmd;
    .           
    .           		/* ready for the next word */
   88 ( 0.00%)  		lub_string_cat(&buffer, " ");
5,368 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (22x)
    .           	}
    .           
    .           	/* free up our dynamic storage */
  150 ( 0.00%)  	lub_string_free(buffer);
3,690 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (50x)
  150 ( 0.00%)  	lub_argv_delete(argv);
14,368 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (50x)
    .           
    .           	return result;
  450 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_view_resolve_command(clish_view_t *this,
    .           	const char *line, bool_t inherit)
  150 ( 0.00%)  {
  104 ( 0.00%)  	clish_command_t *result = clish_view_resolve_prefix(this, line, inherit);
126,253 ( 1.92%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_prefix (49x)
1,065 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
  118 ( 0.00%)  	if (result) {
   72 ( 0.00%)  		clish_action_t *action = clish_command__get_action(result);
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (18x)
   76 ( 0.00%)  		clish_config_t *config = clish_command__get_config(result);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   34 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_config (17x)
  114 ( 0.00%)  		if (!clish_action__get_script(action) &&
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_script (18x)
   46 ( 0.00%)  			(!clish_action__get_builtin(action)) &&
   24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_builtin (12x)
   29 ( 0.00%)  			(CLISH_CONFIG_NONE == clish_config__get_op(config)) &&
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config__get_op (4x)
   29 ( 0.00%)  			(!clish_command__get_param_count(result)) &&
1,435 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_param_count (4x)
   15 ( 0.00%)  			(!clish_command__get_viewname(result))) {
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_viewname (5x)
    .           			/* if this doesn't do anything we've
    .           			 * not resolved a command
    .           			 */
   35 ( 0.00%)  			result = NULL;
    .           		}
    .           	}
    .           
    .           	return result;
  250 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_view_find_command(clish_view_t * this,
    .           	const char *name, bool_t inherit)
  592 ( 0.01%)  {
    .           	clish_command_t *result = NULL;
    .           
    .           	/* Search the current view */
  222 ( 0.00%)  	result = lub_bintree_find(&this->tree, name);
47,963 ( 0.73%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (74x)
    .           
  148 ( 0.00%)  	if (inherit) {
    .           		lub_list_node_t *iter;
    .           		clish_command_t *cmd;
    .           		clish_nspace_t *nspace;
    .           
    .           		/* Iterate elements. It's important to iterate
    .           		 * items starting from tail bacause the next
    .           		 * NAMESPACE has higher priority than previous one
    .           		 * in a case then the both NAMESPACEs have the
    .           		 * commands with the same name.
    .           		 */
  288 ( 0.00%)  		for(iter = lub_list__get_tail(this->nspaces);
   96 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_tail (48x)
    .           			iter; iter = lub_list_node__get_prev(iter)) {
    .           			nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
    .           			cmd = clish_nspace_find_command(nspace, name);
    .           			/* Choose the longest match */
    .           			result = clish_command_choose_longest(result, cmd);
    .           		}
    .           	}
    .           
    .           	return result;
  518 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           static const clish_command_t *find_next_completion(clish_view_t * this,
    .           		const char *iter_cmd, const char *line)
    .           {
    .           	clish_command_t *cmd;
1,092 ( 0.02%)  	const char *name = "";
    .           	lub_argv_t *largv;
    .           	unsigned words;
    .           
    .           	/* build an argument vector for the line */
  910 ( 0.01%)  	largv = lub_argv_new(line, 0);
71,168 ( 1.08%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (182x)
  728 ( 0.01%)  	words = lub_argv__get_count(largv);
  364 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (182x)
    .           
    .           	/* account for trailing space */
  672 ( 0.01%)  	if (!*line || lub_ctype_isspace(line[strlen(line) - 1]))
  848 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  684 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (36x)
  455 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_isspace (35x)
  166 ( 0.00%)  		words++;
    .           
    .           	if (iter_cmd)
    .           		name = iter_cmd;
2,818 ( 0.04%)  	while ((cmd = lub_bintree_findnext(&this->tree, name))) {
336,860 ( 5.13%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext (401x)
1,047 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,368 ( 0.02%)  		name = clish_command__get_name(cmd);
1,368 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (342x)
1,714 ( 0.03%)  		if (words == lub_string_wordcount(name)) {
76,754 ( 1.17%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (341x)
1,058 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			/* only bother with commands of which this line is a prefix */
    .           			/* this is a completion */
1,176 ( 0.02%)  			if (lub_string_nocasestr(name, line) == name)
19,015 ( 0.29%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasestr (174x)
  901 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           				break;
    .           		}
    .           	}
    .           	/* clean up the dynamic memory */
  732 ( 0.01%)  	lub_argv_delete(largv);
28,516 ( 0.43%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (181x)
  882 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	return cmd;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t *clish_view_find_next_completion(clish_view_t * this,
    .           	const char *iter_cmd, const char *line,
    .           	clish_nspace_visibility_e field, bool_t inherit)
2,184 ( 0.03%)  {
    .           	const clish_command_t *result, *cmd;
    .           	clish_nspace_t *nspace;
    .           	lub_list_node_t *iter;
    .           
    .           	/* ask local view for next command */
    .           	result = find_next_completion(this, iter_cmd, line);
    .           
  546 ( 0.01%)  	if (!inherit)
    .           		return result;
    .           
    .           	/* ask the imported namespaces for next command */
    .           
    .           	/* Iterate elements */
1,278 ( 0.02%)  	for(iter = lub_list__get_tail(this->nspaces);
  914 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  362 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_tail (181x)
    .           		iter; iter = lub_list_node__get_prev(iter)) {
    .           		nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
    .           		if (!clish_nspace__get_visibility(nspace, field))
    .           			continue;
    .           		cmd = clish_nspace_find_next_completion(nspace,
    .           			iter_cmd, line, field);
    .           		if (clish_command_diff(result, cmd) > 0)
    .           			result = cmd;
    .           	}
    .           
    .           	return result;
1,638 ( 0.02%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view_insert_nspace(clish_view_t * this, clish_nspace_t * nspace)
    .           {
    .           	lub_list_add(this->nspaces, nspace);
    .           }
    .           
    .           /*--------------------------------------------------------- */
-- line 323 ----------------------------------------
-- line 331 ----------------------------------------
    .           		clish_nspace_clean_proxy((clish_nspace_t *)lub_list_node__get_data(iter));
    .           	}
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC ATTRIBUTES
    .            *--------------------------------------------------------- */
    .           lub_bintree_t * clish_view__get_command_tree(clish_view_t *this)
    5 ( 0.00%)  {
    .           	return &this->tree;
    5 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           lub_list_t * clish_view__get_nspace_tree(clish_view_t *this)
    .           {
    5 ( 0.00%)  	return this->nspaces;
    5 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_view__get_name(const clish_view_t * this)
    .           {
    .           	return this->name;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view__set_prompt(clish_view_t * this, const char *prompt)
    5 ( 0.00%)  {
   15 ( 0.00%)  	assert(!this->prompt);
   20 ( 0.00%)  	this->prompt = lub_string_dup(prompt);
  941 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
   10 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_view__get_prompt(const clish_view_t *this)
    .           {
    3 ( 0.00%)  	return this->prompt;
    3 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view__set_depth(clish_view_t * this, unsigned depth)
    .           {
    .           	this->depth = depth;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned clish_view__get_depth(const clish_view_t * this)
    .           {
    3 ( 0.00%)  	return this->depth;
    3 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view__set_restore(clish_view_t * this,
    .           	clish_view_restore_e restore)
    .           {
    .           	this->restore = restore;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_restore_e clish_view__get_restore(const clish_view_t * this)
    .           {
    3 ( 0.00%)  	return this->restore;
    3 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_view_insert_hotkey(const clish_view_t *this, const char *key, const char *cmd)
    .           {
    .           	return clish_hotkeyv_insert(this->hotkeys, key, cmd);
    .           }
    .           
    .           /*--------------------------------------------------------- */
-- line 399 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c
--------------------------------------------------------------------------------
Ir           

-- line 19 ----------------------------------------
  .           #include "lub/string.h"
  .           
  .           /*-------------------------------------------------------- */
  .           static void clish_shell_renew_prompt(clish_shell_t *this)
  .           {
  .           	clish_context_t prompt_context;
  .           	char *prompt = NULL;
  .           	const clish_view_t *view;
  3 ( 0.00%)  	char *str = NULL;
  .           
  .           	/* Create appropriate context */
 15 ( 0.00%)  	clish_context_init(&prompt_context, this);
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (3x)
  .           
  .           	/* Obtain the prompt */
 12 ( 0.00%)  	view = clish_shell__get_view(this);
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (3x)
  6 ( 0.00%)  	assert(view);
 15 ( 0.00%)  	lub_string_cat(&str, "${_PROMPT_PREFIX}");
1,026 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (3x)
 25 ( 0.00%)  	lub_string_cat(&str, clish_view__get_prompt(view));
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,502 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (3x)
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_prompt (2x)
 12 ( 0.00%)  	lub_string_cat(&str, "${_PROMPT_SUFFIX}");
1,838 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (3x)
 18 ( 0.00%)  	prompt = clish_shell_expand(str, SHELL_VAR_NONE, &prompt_context);
24,891 ( 0.38%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand (3x)
  6 ( 0.00%)  	assert(prompt);
  9 ( 0.00%)  	lub_string_free(str);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 16 ( 0.00%)  	tinyrl__set_prompt(this->tinyrl, prompt);
2,501 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
703 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__set_prompt (2x)
  9 ( 0.00%)  	lub_string_free(prompt);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_key_help(tinyrl_t *this, int key)
  .           {
  .           	bool_t result = BOOL_TRUE;
  .           
  .           	if (tinyrl_is_quoting(this)) {
-- line 50 ----------------------------------------
-- line 113 ----------------------------------------
  .           /*
  .            * This is a CLISH specific completion function.
  .            * If the current prefix is not a recognised prefix then
  .            * an error is flagged.
  .            * If it is a recognisable prefix then possible completions are displayed
  .            * or a unique completion is inserted.
  .            */
  .           static tinyrl_match_e clish_shell_tinyrl_complete(tinyrl_t *this)
  4 ( 0.00%)  {
  .           	tinyrl_match_e status;
  .           
  .           	/* first of all perform any history expansion */
  .           	(void)clish_shell_tinyrl_expand(this);
  .           	/* perform normal completion */
  7 ( 0.00%)  	status = tinyrl_complete(this);
32,531 ( 0.50%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	switch (status) {
  .           	case TINYRL_NO_MATCH:
  7 ( 0.00%)  		if (BOOL_FALSE == tinyrl_is_completion_error_over(this)) {
935 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			/* The user hasn't even entered a valid prefix! */
  .           /*			tinyrl_crlf(this);
  .           			clish_shell_help(context->shell,
  .           				tinyrl__get_line(this));
  .           			tinyrl_crlf(this);
  .           			tinyrl_reset_line_state(this);
  .           */		}
  .           		break;
  .           	default:
  .           		/* the default completion function will have prompted for completions as
  .           		 * necessary
  .           		 */
  .           		break;
  .           	}
  .           	return status;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_key_space(tinyrl_t *this, int key)
  6 ( 0.00%)  {
  .           	bool_t result = BOOL_FALSE;
  .           	tinyrl_match_e status;
  2 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(this);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (1x)
  4 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (1x)
  8 ( 0.00%)  	const char *line = tinyrl__get_line(this);
789 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	clish_pargv_status_e arg_status;
  1 ( 0.00%)  	const clish_command_t *cmd = NULL;
  1 ( 0.00%)  	clish_pargv_t *pargv = NULL;
  .           
  9 ( 0.00%)  	if(tinyrl_is_empty(this)) {
738 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* ignore space at the begining of the line, don't display commands */
  1 ( 0.00%)  		return BOOL_TRUE;
  6 ( 0.00%)  	} else if (tinyrl_is_quoting(this)) {
 21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_is_quoting (1x)
  .           		/* if we are in the middle of a quote then simply enter a space */
  .           		result = BOOL_TRUE;
  .           	} else {
  .           		/* Find out if current line is legal. It can be
  .           		 * fully completed or partially completed.
  .           		 */
 11 ( 0.00%)  		arg_status = clish_shell_parse(shell, line, &cmd, &pargv);
4,144 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		if (pargv)
  .           			clish_pargv_delete(pargv);
  2 ( 0.00%)  		switch (arg_status) {
  .           		case CLISH_LINE_OK:
  .           		case CLISH_LINE_PARTIAL:
  .           			if (' ' != line[strlen(line) - 1])
  .           				result = BOOL_TRUE;
  .           			break;
  .           		default:
  .           			break;
  .           		}
  .           		/* If current line is illegal try to make auto-comletion. */
  .           		if (!result) {
  .           			/* perform word completion */
  2 ( 0.00%)  			status = clish_shell_tinyrl_complete(this);
33,491 ( 0.51%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_complete (1x)
  5 ( 0.00%)  			switch (status) {
  .           			case TINYRL_NO_MATCH:
  .           			case TINYRL_AMBIGUOUS:
  .           				/* ambiguous result signal an issue */
  .           				break;
  .           			case TINYRL_COMPLETED_AMBIGUOUS:
  .           				/* perform word completion again in case we just did case
  .           				   modification the first time */
  .           				status = clish_shell_tinyrl_complete(this);
-- line 194 ----------------------------------------
-- line 207 ----------------------------------------
  .           		}
  .           	}
  .           	if (result)
  .           		result = tinyrl_insert_text(this, " ");
  .           	/* keep compiler happy */
  .           	key = key;
  .           
  .           	return result;
  7 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_key_enter(tinyrl_t *this, int key)
 18 ( 0.00%)  {
  9 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(this);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (3x)
 12 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (3x)
  .           	const clish_command_t *cmd = NULL;
 12 ( 0.00%)  	const char *line = tinyrl__get_line(this);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_line (3x)
  .           	bool_t result = BOOL_FALSE;
  .           	char *errmsg = NULL;
  .           
  .           	/* Inc line counter */
  9 ( 0.00%)  	if (shell->current_file)
  3 ( 0.00%)  		shell->current_file->line++;
  .           
  .           	/* nothing to pass simply move down the screen */
  6 ( 0.00%)  	if (!*line) {
  .           		tinyrl_multi_crlf(this);
  .           		tinyrl_done(this);
  .           		return BOOL_TRUE;
  .           	}
  .           
  .           	/* try and parse the command */
 12 ( 0.00%)  	cmd = clish_shell_resolve_command(shell, line);
13,292 ( 0.20%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_resolve_command (3x)
  6 ( 0.00%)  	if (!cmd) {
  .           		tinyrl_match_e status = clish_shell_tinyrl_complete(this);
  .           		switch (status) {
  .           		case TINYRL_MATCH:
  .           		case TINYRL_MATCH_WITH_EXTENSIONS:
  .           		case TINYRL_COMPLETED_MATCH:
  .           			/* re-fetch the line as it may have changed
  .           			 * due to auto-completion
  .           			 */
-- line 248 ----------------------------------------
-- line 263 ----------------------------------------
  .           				tinyrl_multi_crlf(this);
  .           				errmsg = "Unknown command";
  .           			}
  .           			break;
  .           		}
  .           	}
  .           	if (cmd) {
  .           		clish_pargv_status_e arg_status;
 13 ( 0.00%)  		tinyrl_multi_crlf(this);
1,465 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,256 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_multi_crlf (2x)
  .           		/* we've got a command so check the syntax */
 18 ( 0.00%)  		arg_status = clish_shell_parse(shell,
16,931 ( 0.26%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:clish_shell_parse (3x)
  .           			line, &context->cmd, &context->pargv);
 21 ( 0.00%)  		switch (arg_status) {
  .           		case CLISH_LINE_OK:
 13 ( 0.00%)  			tinyrl_done(this);
695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_done (2x)
  3 ( 0.00%)  			result = BOOL_TRUE;
  3 ( 0.00%)  			break;
  .           		case CLISH_BAD_HISTORY:
  .           			errmsg = "Bad history entry";
  .           			break;
  .           		case CLISH_BAD_CMD:
  .           			errmsg = "Illegal command line";
  .           			break;
  .           		case CLISH_BAD_PARAM:
  .           			errmsg = "Illegal parameter";
-- line 287 ----------------------------------------
-- line 307 ----------------------------------------
  .           			"%s\n", fname, shell->current_file->line,
  .           			line, errmsg);
  .           		}
  .           	}
  .           	/* keep the compiler happy */
  .           	key = key;
  .           
  .           	return result;
 21 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_hotkey(tinyrl_t *this, int key)
  .           {
  .           	clish_view_t *view;
  .           	const char *cmd = NULL;
  .           	clish_context_t *context = tinyrl__get_context(this);
  .           	clish_shell_t *shell = clish_context__get_shell(context);
-- line 323 ----------------------------------------
-- line 348 ----------------------------------------
  .           	return BOOL_TRUE;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This is the completion function provided for CLISH */
  .           tinyrl_completion_func_t clish_shell_tinyrl_completion;
  .           char **clish_shell_tinyrl_completion(tinyrl_t * tinyrl,
  .           	const char *line, unsigned start, unsigned end)
216 ( 0.00%)  {
  .           	lub_argv_t *matches;
 36 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(tinyrl);
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (18x)
 72 ( 0.00%)  	clish_shell_t *this = clish_context__get_shell(context);
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (18x)
  .           	clish_shell_iterator_t iter;
  .           	const clish_command_t *cmd = NULL;
  .           	char *text;
 18 ( 0.00%)  	char **result = NULL;
  .           
 94 ( 0.00%)  	if (tinyrl_is_quoting(tinyrl))
788 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
855 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_is_quoting (17x)
  .           		return result;
  .           
 90 ( 0.00%)  	matches = lub_argv_new(NULL, 0);
2,421 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (18x)
 90 ( 0.00%)  	text = lub_string_dupn(line, end);
2,760 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (18x)
  .           
  .           	/* Don't bother to resort to filename completion */
 58 ( 0.00%)  	tinyrl_completion_over(tinyrl);
839 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 34 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_completion_over (17x)
  .           
  .           	/* Search for COMMAND completions */
 94 ( 0.00%)  	clish_shell_iterator_init(&iter, CLISH_NSPACE_COMPLETION);
696 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 51 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_iterator_init (17x)
659 ( 0.01%)  	while ((cmd = clish_shell_find_next_completion(this, text, &iter)))
561,873 ( 8.56%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_find_next_completion (90x)
8,467 ( 0.13%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
519 ( 0.01%)  		lub_argv_add(matches, clish_command__get_suffix(cmd));
3,494 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
33,641 ( 0.51%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add (72x)
9,496 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_suffix (72x)
  .           
  .           	/* Try and resolve a command */
 76 ( 0.00%)  	cmd = clish_shell_resolve_command(this, text);
102,435 ( 1.56%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_resolve_command (17x)
3,612 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	/* Search for PARAM completion */
 36 ( 0.00%)  	if (cmd)
 67 ( 0.00%)  		clish_shell_param_generator(this, matches, cmd, text, start);
20,451 ( 0.31%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
42,580 ( 0.65%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_param_generator (8x)
  .           
 54 ( 0.00%)  	lub_string_free(text);
1,620 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (18x)
  .           
  .           	/* Matches were found */
 90 ( 0.00%)  	if (lub_argv__get_count(matches) > 0) {
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (18x)
  .           		unsigned i;
 88 ( 0.00%)  		char *subst = lub_string_dup(lub_argv__get_arg(matches, 0));
1,703 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (11x)
110 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (11x)
  .           		/* Find out substitution */
469 ( 0.01%)  		for (i = 1; i < lub_argv__get_count(matches); i++) {
154 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (77x)
  .           			char *p = subst;
330 ( 0.01%)  			const char *match = lub_argv__get_arg(matches, i);
660 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (66x)
400 ( 0.01%)  			size_t match_len = strlen(p);
1,643 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,056 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (66x)
195 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc (65x)
  .           			/* identify the common prefix */
594 ( 0.01%)  			while ((tolower(*p) == tolower(*match)) && match_len--) {
  .           				p++;
  .           				match++;
  .           			}
  .           			/* Terminate the prefix string */
 66 ( 0.00%)  			*p = '\0';
  .           		}
 59 ( 0.00%)  		result = lub_argv__get_argv(matches, subst);
4,567 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
14,225 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_argv (10x)
 44 ( 0.00%)  		lub_string_free(subst);
990 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (11x)
  .           	}
 54 ( 0.00%)  	lub_argv_delete(matches);
10,671 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (18x)
  .           
  .           	return result;
162 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static void clish_shell_tinyrl_init(tinyrl_t * this)
  .           {
  .           	bool_t status;
  .           	/* bind the '?' key to the help function */
  9 ( 0.00%)  	status = tinyrl_bind_key(this, '?', clish_shell_tinyrl_key_help);
835 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	assert(status);
  .           
  .           	/* bind the <RET> key to the help function */
  5 ( 0.00%)  	status = tinyrl_bind_key(this, '\r', clish_shell_tinyrl_key_enter);
  7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
  2 ( 0.00%)  	assert(status);
  5 ( 0.00%)  	status = tinyrl_bind_key(this, '\n', clish_shell_tinyrl_key_enter);
  7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
  2 ( 0.00%)  	assert(status);
  .           
  .           	/* bind the <SPACE> key to auto-complete if necessary */
  5 ( 0.00%)  	status = tinyrl_bind_key(this, ' ', clish_shell_tinyrl_key_space);
  7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
  2 ( 0.00%)  	assert(status);
  .           
  .           	/* Set external hotkey callback */
  8 ( 0.00%)  	tinyrl__set_hotkey_fn(this, clish_shell_tinyrl_hotkey);
808 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Assign timeout callback */
  8 ( 0.00%)  	tinyrl__set_timeout_fn(this, clish_shell_timeout_fn);
847 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	/* Assign keypress callback */
  8 ( 0.00%)  	tinyrl__set_keypress_fn(this, clish_shell_keypress_fn);
838 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           /*
  .            * Create an instance of the specialised class
  .            */
  .           tinyrl_t *clish_shell_tinyrl_new(FILE * istream,
  .           	FILE * ostream, unsigned stifle)
  1 ( 0.00%)  {
  .           	/* call the parent constructor */
  8 ( 0.00%)  	tinyrl_t *this = tinyrl_new(istream,
11,579 ( 0.18%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		ostream, stifle, clish_shell_tinyrl_completion);
  .           	/* now call our own constructor */
  2 ( 0.00%)  	if (this)
  .           		clish_shell_tinyrl_init(this);
  .           	return this;
  3 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell_tinyrl_fini(tinyrl_t * this)
  1 ( 0.00%)  {
  .           	/* nothing to do... yet */
  .           	this = this;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell_tinyrl_delete(tinyrl_t * this)
  2 ( 0.00%)  {
  .           	/* call our destructor */
  6 ( 0.00%)  	clish_shell_tinyrl_fini(this);
670 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	/* and call the parent destructor */
  7 ( 0.00%)  	tinyrl_delete(this);
5,578 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  1 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static int clish_shell_execline(clish_shell_t *this, const char *line, char **out)
 21 ( 0.00%)  {
  .           	char *str;
  .           	clish_context_t context;
  .           	tinyrl_history_t *history;
  .           	int lerror = 0;
  .           
  6 ( 0.00%)  	assert(this);
  3 ( 0.00%)  	this->state = SHELL_STATE_OK;
 30 ( 0.00%)  	if (!line && !tinyrl__get_istream(this->tinyrl)) {
 15 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_istream (3x)
  .           		this->state = SHELL_STATE_SYSTEM_ERROR;
  .           		return -1;
  .           	}
  .           
  .           	/* Renew prompt */
  .           	clish_shell_renew_prompt(this);
  .           
  .           	/* Set up the context for tinyrl */
 12 ( 0.00%)  	clish_context_init(&context, this);
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (3x)
  .           
  .           	/* Push the specified line or interactive line */
  6 ( 0.00%)  	if (line)
  3 ( 0.00%)  		str = tinyrl_forceline(this->tinyrl, &context, line);
  .           	else
 19 ( 0.00%)  		str = tinyrl_readline(this->tinyrl, &context);
725,679 (11.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
459,031 ( 6.99%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_readline (2x)
 10 ( 0.00%)  	lerror = errno;
1,596 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/csu/errno-loc.c:__errno_location (2x)
  6 ( 0.00%)  	if (!str) {
  .           		switch (lerror) {
  .           		case ENOENT:
  .           			this->state = SHELL_STATE_EOF;
  .           			break;
  .           		case ENOEXEC:
  .           			this->state = SHELL_STATE_SYNTAX_ERROR;
  .           			break;
  .           		default:
  .           			this->state = SHELL_STATE_SYSTEM_ERROR;
  .           			break;
  .           		};
  .           		return -1;
  .           	}
  .           
  .           	/* Deal with the history list */
 19 ( 0.00%)  	if (tinyrl__get_isatty(this->tinyrl)) {
810 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_isatty (2x)
 13 ( 0.00%)  		history = tinyrl__get_history(this->tinyrl);
878 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_history (2x)
 19 ( 0.00%)  		tinyrl_history_add(history, str);
2,447 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,711 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:tinyrl_history_add (2x)
  .           	}
  9 ( 0.00%)  	free(str);
264 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (3x)
  .           
  .           	/* Execute the provided command */
 12 ( 0.00%)  	if (context.cmd && context.pargv) {
  .           		int res;
 18 ( 0.00%)  		if ((res = clish_shell_execute(&context, out))) {
13,779 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_execute.c:clish_shell_execute (3x)
  .           			this->state = SHELL_STATE_SCRIPT_ERROR;
  .           			if (context.pargv)
  .           				clish_pargv_delete(context.pargv);
  .           			return res;
  .           		}
  .           	}
  .           
  9 ( 0.00%)  	if (context.pargv)
  6 ( 0.00%)  		clish_pargv_delete(context.pargv);
342 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_delete (3x)
  .           
  3 ( 0.00%)  	return 0;
 24 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           int clish_shell_forceline(clish_shell_t *this, const char *line, char **out)
  .           {
  .           	return clish_shell_execline(this, line, out);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           int clish_shell_readline(clish_shell_t *this, char **out)
  3 ( 0.00%)  {
  6 ( 0.00%)  	return clish_shell_execline(this, NULL, out);
1,240,703 (18.91%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_execline (3x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           FILE * clish_shell__get_istream(const clish_shell_t * this)
  .           {
  .           	return tinyrl__get_istream(this->tinyrl);
  .           }
  .           
-- line 554 ----------------------------------------
-- line 577 ----------------------------------------
  .           {
  .           	assert(this);
  .           	return tinyrl__get_utf8(this->tinyrl);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell__set_utf8(clish_shell_t * this, bool_t utf8)
  .           {
  2 ( 0.00%)  	assert(this);
  7 ( 0.00%)  	tinyrl__set_utf8(this->tinyrl, utf8);
768 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell__set_timeout(clish_shell_t *this, unsigned int timeout)
  .           {
  .           	assert(this);
  .           	this->idle_timeout = timeout;
  .           }
-- line 594 ----------------------------------------
-- line 597 ----------------------------------------
  .           tinyrl_t *clish_shell__get_tinyrl(const clish_shell_t * this)
  .           {
  .           	return this->tinyrl;
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           int clish_shell__save_history(const clish_shell_t *this, const char *fname)
  .           {
  7 ( 0.00%)  	return tinyrl__save_history(this->tinyrl, fname);
13,478 ( 0.21%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           int clish_shell__restore_history(clish_shell_t *this, const char *fname)
  .           {
  7 ( 0.00%)  	return tinyrl__restore_history(this->tinyrl, fname);
32,950 ( 0.50%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           void clish_shell__stifle_history(clish_shell_t *this, unsigned int stifle)
  .           {
  7 ( 0.00%)  	tinyrl__stifle_history(this->tinyrl, stifle);
1,599 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c
--------------------------------------------------------------------------------
Ir           

-- line 19 ----------------------------------------
  .           	unsigned size;		/* Number of slots allocated in this array */
  .           	unsigned current_index;
  .           	unsigned stifle;
  .           };
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_init(tinyrl_history_t * this, unsigned stifle)
  .           {
  1 ( 0.00%)  	this->entries = NULL;
  1 ( 0.00%)  	this->stifle = stifle;
  1 ( 0.00%)  	this->current_index = 1;
  1 ( 0.00%)  	this->length = 0;
  2 ( 0.00%)  	this->size = 0;
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_fini(tinyrl_history_t * this)
  4 ( 0.00%)  {
  .           	tinyrl_history_entry_t *entry;
  .           	tinyrl_history_iterator_t iter;
  .           
  .           	/* release the resource associated with each entry */
 25 ( 0.00%)  	for (entry = tinyrl_history_getfirst(this, &iter);
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:tinyrl_history_getfirst (1x)
 27 ( 0.00%)  	     entry; entry = tinyrl_history_getnext(&iter)) {
 96 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:tinyrl_history_getnext (9x)
 27 ( 0.00%)  		tinyrl_history_entry_delete(entry);
1,683 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry_delete (9x)
  .           	}
  .           	/* release the list */
  3 ( 0.00%)  	free(this->entries);
 88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
  1 ( 0.00%)  	this->entries = NULL;
  4 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           tinyrl_history_t *tinyrl_history_new(unsigned stifle)
  4 ( 0.00%)  {
  4 ( 0.00%)  	tinyrl_history_t *this = malloc(sizeof(tinyrl_history_t));
197 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  2 ( 0.00%)  	if (NULL != this) {
  8 ( 0.00%)  		tinyrl_history_init(this, stifle);
787 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_delete(tinyrl_history_t * this)
  2 ( 0.00%)  {
  6 ( 0.00%)  	tinyrl_history_fini(this);
2,693 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	free(this);
 88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
  1 ( 0.00%)  }
  .           
  .           /*
  .           HISTORY LIST MANAGEMENT 
  .           */
  .           /*------------------------------------- */
  .           /* insert a new entry at the current offset */
  .           static void insert_entry(tinyrl_history_t * this, const char *line)
 36 ( 0.00%)  {
 28 ( 0.00%)  	tinyrl_history_entry_t *new_entry =
4,814 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry_new (11x)
1,889 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 36 ( 0.00%)  	    tinyrl_history_entry_new(line, this->current_index++);
 36 ( 0.00%)  	assert(this->length);
 36 ( 0.00%)  	assert(this->entries);
 24 ( 0.00%)  	if (new_entry) {
 24 ( 0.00%)  		this->entries[this->length - 1] = new_entry;
  .           	}
 24 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /*
  .            * This frees the specified entries from the 
  .            * entries vector. NB it doesn't perform any shuffling.
  .            * This function is inclusive of start and end
  .            */
  .           static void
  9 ( 0.00%)  free_entries(const tinyrl_history_t * this, unsigned start, unsigned end)
  .           {
  .           	unsigned i;
  6 ( 0.00%)  	assert(start <= end);
 18 ( 0.00%)  	assert(end < this->length);
  .           
  9 ( 0.00%)  	for (i = start; i <= end; i++) {
  6 ( 0.00%)  		tinyrl_history_entry_t *entry = this->entries[i];
 13 ( 0.00%)  		tinyrl_history_entry_delete(entry);
978 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
374 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry_delete (2x)
  .           		entry = NULL;
  .           	}
 12 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /*
  .            * This removes the specified entries from the 
  .            * entries vector. Shuffling up the array as necessary 
  .            * This function is inclusive of start and end
  .            */
  .           static void
 12 ( 0.00%)  remove_entries(tinyrl_history_t * this, unsigned start, unsigned end)
  .           {
  .           	unsigned delta = (end - start) + 1;	/* number of entries being deleted */
  .           	/* number of entries to shuffle */
  9 ( 0.00%)  	unsigned num_entries = (this->length - end) - 1;
  6 ( 0.00%)  	assert(start <= end);
  9 ( 0.00%)  	assert(end < this->length);
  .           
  9 ( 0.00%)  	if (num_entries) {
  .           		/* move the remaining entries down to close the array */
 24 ( 0.00%)  		memmove(&this->entries[start],
 30 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy@GLIBC_2.2.5 (3x)
  6 ( 0.00%)  			&this->entries[end + 1],
  .           			sizeof(tinyrl_history_entry_t *) * num_entries);
  .           	}
  .           	/* now fix up the length variables */
  6 ( 0.00%)  	this->length -= delta;
 12 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /* 
  .           Search the current history buffer for the specified 
  .           line and if found remove it.
  .           */
  .           static bool_t remove_duplicate(tinyrl_history_t * this, const char *line)
 77 ( 0.00%)  {
  9 ( 0.00%)  	bool_t result = BOOL_FALSE;
  .           	unsigned i;
  .           
198 ( 0.00%)  	for (i = 0; i < this->length; i++) {
114 ( 0.00%)  		tinyrl_history_entry_t *entry = this->entries[i];
524 ( 0.01%)  		if (0 == strcmp(line, tinyrl_history_entry__get_line(entry))) {
2,492 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
1,115 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (56x)
112 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry__get_line (56x)
 15 ( 0.00%)  			free_entries(this, i, i);
1,425 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:free_entries.isra.0 (3x)
 15 ( 0.00%)  			remove_entries(this, i, i);
123 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:remove_entries.isra.2 (3x)
  3 ( 0.00%)  			result = BOOL_TRUE;
  .           			break;
  .           		}
  .           	}
  .           	return result;
 45 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /* 
  .           add an entry to the end of the current array 
  .           if there is no space returns -1 else 0
  .           */
  .           static void append_entry(tinyrl_history_t * this, const char *line)
  .           {
 36 ( 0.00%)  	if (this->length < this->size) {
 24 ( 0.00%)  		this->length++;
  .           
 36 ( 0.00%)  		insert_entry(this, line);
6,947 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:insert_entry (12x)
  .           	}
  .           }
  .           
  .           /*------------------------------------- */
  .           /*
  .            add a new history entry replacing the oldest one 
  .            */
  .           static void add_n_replace(tinyrl_history_t * this, const char *line)
-- line 168 ----------------------------------------
-- line 176 ----------------------------------------
  .           	/* add the new entry */
  .           	append_entry(this, line);
  .           }
  .           
  .           /*------------------------------------- */
  .           /* add a new history entry growing the array if necessary */
  .           static void add_n_grow(tinyrl_history_t * this, const char *line)
  .           {
 24 ( 0.00%)  	if (this->size == this->length) {
  .           		/* increment the history memory by 10 entries each time we grow */
  2 ( 0.00%)  		unsigned new_size = this->size + 10;
  .           		size_t nbytes;
  .           		tinyrl_history_entry_t **new_entries;
  .           
  1 ( 0.00%)  		nbytes = sizeof(tinyrl_history_entry_t *) * new_size;
  7 ( 0.00%)  		new_entries = realloc(this->entries, nbytes);
1,694 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  		if (NULL != new_entries) {
  1 ( 0.00%)  			this->size = new_size;
  2 ( 0.00%)  			this->entries = new_entries;
  .           		}
  .           	}
 36 ( 0.00%)  	(void)remove_duplicate(this, line);
6,267 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:remove_duplicate (12x)
  .           	append_entry(this, line);
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_add(tinyrl_history_t * this, const char *line)
 60 ( 0.00%)  {
 58 ( 0.00%)  	if (this->length && (this->length == this->stifle)) {
  .           		add_n_replace(this, line);
  .           	} else {
  .           		add_n_grow(this, line);
  .           	}
 36 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           tinyrl_history_entry_t *tinyrl_history_remove(tinyrl_history_t * this,
  .           					      unsigned offset)
  .           {
  .           	tinyrl_history_entry_t *result = NULL;
  .           
  .           	if (offset < this->length) {
-- line 217 ----------------------------------------
-- line 228 ----------------------------------------
  .           	/* free all the entries */
  .           	free_entries(this, 0, this->length - 1);
  .           	/* and shuffle the array */
  .           	remove_entries(this, 0, this->length - 1);
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_stifle(tinyrl_history_t * this, unsigned stifle)
  7 ( 0.00%)  {
  .           	/* 
  .           	 * if we are stifling (i.e. non zero value) then 
  .           	 * delete the obsolete entries
  .           	 */
  2 ( 0.00%)  	if (stifle) {
  3 ( 0.00%)  		if (stifle < this->length) {
  .           			unsigned num_deletes = this->length - stifle;
  .           			/* free the entries */
  .           			free_entries(this, 0, num_deletes - 1);
  .           			/* shuffle the array shut */
  .           			remove_entries(this, 0, num_deletes - 1);
  .           		}
  1 ( 0.00%)  		this->stifle = stifle;
  .           	}
  6 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           unsigned tinyrl_history_unstifle(tinyrl_history_t * this)
  .           {
  .           	unsigned result = this->stifle;
  .           
  .           	this->stifle = 0;
  .           
-- line 259 ----------------------------------------
-- line 358 ----------------------------------------
  .           
  .           /*-------------------------------------*/
  .           tinyrl_history_entry_t *tinyrl_history_getfirst(const tinyrl_history_t * this,
  .           						tinyrl_history_iterator_t *
  .           						iter)
  .           {
  .           	tinyrl_history_entry_t *result = NULL;
  .           
  2 ( 0.00%)  	iter->history = this;
  2 ( 0.00%)  	iter->offset = 0;
  .           
  6 ( 0.00%)  	if (this->length) {
  6 ( 0.00%)  		result = this->entries[iter->offset];
  .           	}
  .           	return result;
  .           }
  .           
  .           /*-------------------------------------*/
  .           tinyrl_history_entry_t *tinyrl_history_getnext(tinyrl_history_iterator_t * iter)
  .           {
  2 ( 0.00%)  	tinyrl_history_entry_t *result = NULL;
  .           
108 ( 0.00%)  	if (iter->offset < iter->history->length - 1) {
 32 ( 0.00%)  		iter->offset++;
 48 ( 0.00%)  		result = iter->history->entries[iter->offset];
  .           	}
  .           
  .           	return result;
  2 ( 0.00%)  }
  .           
  .           /*-------------------------------------*/
  .           tinyrl_history_entry_t *tinyrl_history_getlast(const tinyrl_history_t * this,
  .           					       tinyrl_history_iterator_t * iter)
  .           {
  .           	iter->history = this;
  .           	iter->offset = this->length;
  .           
-- line 394 ----------------------------------------
-- line 407 ----------------------------------------
  .           	}
  .           
  .           	return result;
  .           }
  .           
  .           /*-------------------------------------*/
  .           /* Save command history to specified file */
  .           int tinyrl_history_save(const tinyrl_history_t *this, const char *fname)
  4 ( 0.00%)  {
  .           	tinyrl_history_entry_t *entry;
  .           	tinyrl_history_iterator_t iter;
  .           	FILE *f;
  .           
  4 ( 0.00%)  	if (!fname) {
  .           		errno = EINVAL;
  .           		return -1;
  .           	}
  6 ( 0.00%)  	if (!(f = fopen(fname, "w")))
511 ( 0.01%)  => /opt/build/glibc/glibc-2.24/libio/iofopen.c:fopen@@GLIBC_2.2.5 (1x)
  .           		return -1;
 29 ( 0.00%)  	for (entry = tinyrl_history_getfirst(this, &iter);
767 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 31 ( 0.00%)  		entry; entry = tinyrl_history_getnext(&iter)) {
824 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 85 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:tinyrl_history_getnext (8x)
104 ( 0.00%)  		if (fprintf(f, "%s\n", tinyrl_history_entry__get_line(entry)) < 0)
5,290 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,513 ( 0.05%)  => /opt/build/glibc/glibc-2.24/stdio-common/fprintf.c:fprintf (8x)
 18 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry__get_line (9x)
  .           			return -1;
  .           	}
  3 ( 0.00%)  	fclose(f);
665 ( 0.01%)  => /opt/build/glibc/glibc-2.24/libio/iofclose.c:fclose@@GLIBC_2.2.5 (1x)
  .           
  1 ( 0.00%)  	return 0;
  5 ( 0.00%)  }
  .           
  .           /*-------------------------------------*/
  .           /* Restore command history from specified file */
  .           int tinyrl_history_restore(tinyrl_history_t *this, const char *fname)
  5 ( 0.00%)  {
  .           	FILE *f;
  .           	char *p;
  .           	int part_len = 300;
  .           	char *buf;
  1 ( 0.00%)  	int buf_len = part_len;
  1 ( 0.00%)  	int res = 0;
  .           
  4 ( 0.00%)  	if (!fname) {
  .           		errno = EINVAL;
  .           		return -1;
  .           	}
 10 ( 0.00%)  	if (!(f = fopen(fname, "r")))
2,134 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  1 ( 0.00%)  		return 0; /* Can't find history file */
  .           
  5 ( 0.00%)  	buf = malloc(buf_len);
429 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           	p = buf;
 95 ( 0.00%)  	while (fgets(p, buf_len - (p - buf), f)) {
8,891 ( 0.14%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,563 ( 0.02%)  => /opt/build/glibc/glibc-2.24/libio/iofgets.c:fgets (9x)
  .           		char *ptmp = NULL;
 40 ( 0.00%)  		char *el = strchr(buf, '\n');
1,527 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
184 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (8x)
 18 ( 0.00%)  		if (el) { /* The whole line was readed */
  9 ( 0.00%)  			*el = '\0';
 40 ( 0.00%)  			tinyrl_history_add(this, buf);
4,386 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
8,228 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:tinyrl_history_add (8x)
  .           			p = buf;
  9 ( 0.00%)  			continue;
  .           		}
  .           		buf_len += part_len;
  .           		ptmp = realloc(buf, buf_len);
  .           		if (!ptmp) {
  .           			res = -1;
  .           			goto end;
  .           		}
  .           		buf = ptmp;
  .           		p = buf + buf_len - part_len - 1;
  .           	}
  .           end:
  7 ( 0.00%)  	free(buf);
1,633 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  7 ( 0.00%)  	fclose(f);
2,106 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return res;
  7 ( 0.00%)  }
  .           
  .           
  .           /*-------------------------------------*/

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c
--------------------------------------------------------------------------------
Ir           

-- line 4 ----------------------------------------
  .           
  .           #include <assert.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           clish_view_t *clish_shell_find_create_view(clish_shell_t * this,
  .           	const char *name, const char *prompt)
 48 ( 0.00%)  {
 12 ( 0.00%)  	clish_view_t *view = lub_bintree_find(&this->view_tree, name);
706 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (6x)
  .           
 12 ( 0.00%)  	if (!view) {
  .           		/* create a view */
 29 ( 0.00%)  		view = clish_view_new(name, prompt);
3,727 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,477 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new (4x)
 10 ( 0.00%)  		assert(view);
 29 ( 0.00%)  		clish_shell_insert_view(this, view);
694 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,198 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell_insert_view (4x)
  .           	} else {
  .           		/* set the prompt */
  3 ( 0.00%)  		if (prompt)
  .           			clish_view__set_prompt(view, prompt);
  .           	}
  .           	return view;
 42 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_view_t *clish_shell_find_view(clish_shell_t * this, const char *name)
  .           {
  6 ( 0.00%)  	return lub_bintree_find(&this->view_tree, name);
546 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (3x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_shell_insert_view(clish_shell_t * this, clish_view_t * view)
  .           {
 10 ( 0.00%)  	(void)lub_bintree_insert(&this->view_tree, view);
2,213 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (5x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_view_t *clish_shell__get_view(const clish_shell_t * this)
  .           {
246 ( 0.00%)  	assert(this);
369 ( 0.01%)  	if (this->depth < 0)
  1 ( 0.00%)  		return NULL;
366 ( 0.01%)  	return this->pwdv[this->depth]->view;
123 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned int clish_shell__get_depth(const clish_shell_t *this)
  .           {
 16 ( 0.00%)  	assert(this);
  8 ( 0.00%)  	return this->depth;
  8 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_shell__set_depth(clish_shell_t *this, unsigned int depth)
  .           {
  .           	assert(this);
  .           	this->depth = depth;
  .           }
  .           
-- line 62 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c
--------------------------------------------------------------------------------
Ir             

-- line 12 ----------------------------------------
    .           /*--------------------------------------------------------- */
    .           static void lub_argv_init(lub_argv_t * this, const char *line, size_t offset)
    .           {
    .           	size_t len;
    .           	const char *word;
    .           	lub_arg_t *arg;
    .           	size_t quoted;
    .           
  264 ( 0.00%)  	this->argv = NULL;
  264 ( 0.00%)  	this->argc = 0;
  792 ( 0.01%)  	if (!line)
    .           		return;
    .           	/* first of all count the words in the line */
  988 ( 0.02%)  	this->argc = lub_string_wordcount(line);
36,237 ( 0.55%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (245x)
6,376 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  492 ( 0.01%)  	if (0 == this->argc)
    .           		return;
    .           	/* allocate space to hold the vector */
  630 ( 0.01%)  	arg = this->argv = malloc(sizeof(lub_arg_t) * this->argc);
9,588 ( 0.15%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (90x)
  180 ( 0.00%)  	assert(arg);
    .           
    .           	/* then fill out the array with the words */
1,460 ( 0.02%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
12,461 ( 0.19%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (90x)
  270 ( 0.00%)  		*word || quoted;
1,015 ( 0.02%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
13,881 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (145x)
  729 ( 0.01%)  		(*arg).arg = lub_string_ndecode(word, len);
31,346 ( 0.48%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_ndecode (144x)
1,158 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  290 ( 0.00%)  		(*arg).offset = offset;
  725 ( 0.01%)  		(*arg).quoted = quoted ? BOOL_TRUE : BOOL_FALSE;
    .           
  435 ( 0.01%)  		offset += len;
    .           
  290 ( 0.00%)  		if (quoted) {
    .           			len += quoted - 1; /* account for terminating quotation mark */
    .           			offset += quoted; /* account for quotation marks */
    .           		}
  145 ( 0.00%)  		arg++;
    .           	}
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           lub_argv_t *lub_argv_new(const char *line, size_t offset)
2,376 ( 0.04%)  {
    .           	lub_argv_t *this;
    .           
1,056 ( 0.02%)  	this = malloc(sizeof(lub_argv_t));
28,750 ( 0.44%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (264x)
  528 ( 0.01%)  	if (this)
    .           		lub_argv_init(this, line, offset);
    .           
    .           	return this;
2,376 ( 0.04%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_argv_add(lub_argv_t * this, const char *text)
  385 ( 0.01%)  {
    .           	lub_arg_t * arg;
    .           
  154 ( 0.00%)  	if (!text)
    .           		return;
    .           
    .           	/* allocate space to hold the vector */
  539 ( 0.01%)  	arg = realloc(this->argv, sizeof(lub_arg_t) * (this->argc + 1));
21,595 ( 0.33%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (77x)
  154 ( 0.00%)  	assert(arg);
   77 ( 0.00%)  	this->argv = arg;
  693 ( 0.01%)  	(this->argv[this->argc++]).arg = strdup(text);
11,626 ( 0.18%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (77x)
  308 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           static void lub_argv_fini(lub_argv_t * this)
    .           {
    .           	unsigned i;
    .           
1,559 ( 0.02%)  	for (i = 0; i < this->argc; i++)
1,554 ( 0.02%)  		free(this->argv[i].arg);
19,536 ( 0.30%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (222x)
  792 ( 0.01%)  	free(this->argv);
10,265 ( 0.16%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (264x)
    .           	this->argv = NULL;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_argv_delete(lub_argv_t * this)
1,320 ( 0.02%)  {
    .           	lub_argv_fini(this);
  792 ( 0.01%)  	free(this);
23,232 ( 0.35%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (264x)
  792 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_argv__get_line(const lub_argv_t * this)
    .           {
    .           	int space = 0;
    .           	const char *p;
    .           	unsigned i;
    .           	char *line = NULL;
-- line 101 ----------------------------------------
-- line 118 ----------------------------------------
    .           			lub_string_cat(&line, "\"");
    .           	}
    .           
    .           	return line;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           char **lub_argv__get_argv(const lub_argv_t * this, const char *argv0)
   66 ( 0.00%)  {
    .           	char **result = NULL;
    .           	unsigned i;
    .           	unsigned a = 0;
    .           
   22 ( 0.00%)  	if (argv0)
   11 ( 0.00%)  		a = 1;
    .           
   77 ( 0.00%)  	result = malloc(sizeof(char *) * (this->argc + 1 + a));
1,480 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (11x)
    .           
    .           	if (argv0)
   66 ( 0.00%)  		result[0] = strdup(argv0);
1,666 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (11x)
  297 ( 0.00%)  	for (i = 0; i < this->argc; i++)
  770 ( 0.01%)  		result[i + a] = strdup(this->argv[i].arg);
13,414 ( 0.20%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (77x)
   11 ( 0.00%)  	result[i + a] = NULL;
    .           
    .           	return result;
   77 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_argv__free_argv(char **argv)
    .           {
    .           	unsigned i;
    .           
    .           	if (!argv)
    .           		return;
-- line 151 ----------------------------------------
-- line 155 ----------------------------------------
    .           	free(argv);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *lub_argv__get_arg(const lub_argv_t *this, unsigned int index)
    .           {
    .           	const char *result = NULL;
    .           
  358 ( 0.01%)  	if (!this)
    1 ( 0.00%)  		return NULL;
  358 ( 0.01%)  	if (this->argc > index)
1,068 ( 0.02%)  		result = this->argv[index].arg;
    .           
    .           	return result;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned lub_argv__get_count(const lub_argv_t * this)
    .           {
  401 ( 0.01%)  	return this->argc;
  401 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           size_t lub_argv__get_offset(const lub_argv_t * this, unsigned index)
    .           {
    .           	size_t result = 0;
    .           
    .           	if (this->argc > index)
    .           		result = this->argv[index].offset;
-- line 183 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c
--------------------------------------------------------------------------------
Ir           

-- line 38 ----------------------------------------
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include <assert.h>
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           int lub_bintree_insert(lub_bintree_t * this, void *clientnode)
176 ( 0.00%)  {
 19 ( 0.00%)  	int result = -1;
  .           	lub_bintree_node_t *new;
  .           	lub_bintree_key_t key;
  .           
132 ( 0.00%)  	assert(clientnode);
  .           	if (NULL != clientnode) {
  .           		/* obtain the control block from the clientnode */
132 ( 0.00%)  		new = lub_bintree_getnode(this, clientnode);
  .           
  .           		/* check this node is not currently in another tree */
 88 ( 0.00%)  		assert(new->left == NULL);
 88 ( 0.00%)  		assert(new->right == NULL);
  .           
  .           		/* add this node to the splay tree */
  .           
  .           		/* Insert "node" into the tree , unless it's already there. */
 88 ( 0.00%)  		if (NULL == this->root) {
  .           			this->root = new;
  .           			this->root->left = this->root->right = NULL;
  .           			result = 0;
  .           		} else {
  .           			int comp;
  .           			/* get a key from the node */
 74 ( 0.00%)  			this->getkeyFn(clientnode, &key);
1,585 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_getkey (4x)
569 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_getkey (21x)
328 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_getkey (12x)
  .           
  .           			/* do the biz */
222 ( 0.00%)  			this->root = lub_bintree_splay(this, this->root, &key);
5,841 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (37x)
  .           
  .           			/*
  .           			 * compare the new key with the detail found
  .           			 * in the tree
  .           			 */
148 ( 0.00%)  			comp = lub_bintree_compare(this, this->root, &key);
1,579 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (21x)
276 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (12x)
 96 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (4x)
 74 ( 0.00%)  			if (comp > 0) {
 54 ( 0.00%)  				new->left = this->root->left;
 18 ( 0.00%)  				new->right = this->root;
 18 ( 0.00%)  				this->root->left = NULL;
  .           				result = 0;
 19 ( 0.00%)  			} else if (comp < 0) {
 57 ( 0.00%)  				new->right = this->root->right;
 19 ( 0.00%)  				new->left = this->root;
 38 ( 0.00%)  				this->root->right = NULL;
  .           				result = 0;
  .           			} else {
  .           				/* We get here if it's already in the tree */
  .           			}
  .           		}
  .           		if (0 == result) {
  .           			/* update the tree root */
 88 ( 0.00%)  			this->root = new;
  .           		}
  .           	}
  .           	/* added OK */
  .           	return result;
220 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c
--------------------------------------------------------------------------------
Ir           

-- line 12 ----------------------------------------
  .           	"clish_script@clish",
  .           	NULL,
  .           	"clish_hook_config@clish",
  .           	"clish_hook_log@clish"
  .           };
  .           
  .           /*----------------------------------------------------------- */
  .           int clish_shell_startup(clish_shell_t *this)
  3 ( 0.00%)  {
  .           	const char *banner;
  .           	clish_context_t context;
  .           
  3 ( 0.00%)  	if (!this->startup) {
  .           		fprintf(stderr, "Error: Can't get valid STARTUP tag.\n");
  .           		return -1;
  .           	}
  .           
  .           	/* Prepare context */
  9 ( 0.00%)  	clish_context_init(&context, this);
645 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_cmd(&context, this->startup);
681 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_action(&context,
689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		clish_command__get_action(this->startup));
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (1x)
  .           
  7 ( 0.00%)  	banner = clish_command__get_detail(this->startup);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	if (banner)
 10 ( 0.00%)  		tinyrl_printf(this->tinyrl, "%s\n", banner);
18,806 ( 0.29%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Call log initialize */
  9 ( 0.00%)  	if (clish_shell__get_log(this))
657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		clish_shell_exec_log(&context, NULL, 0);
  .           	/* Call startup script */
  8 ( 0.00%)  	return clish_shell_execute(&context, NULL);
42,408 ( 0.65%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */
  .           void clish_shell__set_startup_view(clish_shell_t *this, const char *viewname)
  .           {
  .           	clish_view_t *view;
  .           
  .           	assert(this);
  .           	assert(this->startup);
-- line 52 ----------------------------------------
-- line 70 ----------------------------------------
  .           	assert(this);
  .           	lub_string_free(this->default_shebang);
  .           	this->default_shebang = lub_string_dup(shebang);
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           const char * clish_shell__get_default_shebang(const clish_shell_t *this)
  .           {
  4 ( 0.00%)  	assert(this);
  2 ( 0.00%)  	return this->default_shebang;
  2 ( 0.00%)  }
  .           
  .           
  .           
  .           /*-------------------------------------------------------- */
  .           /* Resolve PTYPE for given PARAM.
  .            */
  .           static clish_ptype_t * resolve_ptype(clish_shell_t *this, clish_param_t *param)
 75 ( 0.00%)  {
  .           	clish_ptype_t *ptype = NULL;
  .           
125 ( 0.00%)  	if (!this || !param)
  .           		return NULL;
  .           
  .           	/* Resolve PARAM's PTYPE */
233 ( 0.00%)  	ptype = clish_shell_find_ptype(this, clish_param__get_ptype_name(param));
6,418 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_ptype (24x)
1,692 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype_name (24x)
 50 ( 0.00%)  	if (!ptype) {
  .           		fprintf(stderr, "Error: Unresolved PTYPE \"%s\" in PARAM \"%s\"\n",
  .           			clish_param__get_ptype_name(param),
  .           			clish_param__get_name(param));
  .           		return NULL;
  .           	}
104 ( 0.00%)  	clish_param__set_ptype(param, ptype);
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype (24x)
104 ( 0.00%)  	clish_param__set_ptype_name(param, NULL); /* Free some memory */
813 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,688 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype_name (24x)
  .           
  .           	return ptype;
125 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* Static recursive function to iterate parameters. Logically it's the
  .            * part of clish_shell_prepare() function.
  .            */
  .           static int iterate_paramv(clish_shell_t *this, clish_paramv_t *paramv,
  .           	clish_hook_access_fn_t *access_fn)
400 ( 0.01%)  {
100 ( 0.00%)  	int i = 0;
  .           	clish_param_t *param;
  .           
522 ( 0.01%)  	while((param = clish_paramv__get_param(paramv, i))) {
673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
214 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (44x)
  .           		clish_paramv_t *nested_paramv;
  .           
  .           		/* Resolve PARAM's PTYPE */
120 ( 0.00%)  		if (!resolve_ptype(this, param))
10,769 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (19x)
  .           			return -1;
  .           
  .           		/* Check access for PARAM */
 48 ( 0.00%)  		if (access_fn && clish_param__get_access(param) &&
  .           			access_fn(this, clish_param__get_access(param))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove PARAM \"%s\"\n",
  .           				clish_param__get_name(param));
  .           #endif
  .           			if (clish_paramv_remove(paramv, i) < 0) {
  .           				fprintf(stderr, "Error: Some system problem\n");
  .           				return -1;
  .           			}
  .           			clish_param_delete(param);
  .           			continue; /* Don't increment index */
  .           		}
  .           		/* Recursive iterate nested PARAMs */
 76 ( 0.00%)  		nested_paramv = clish_param__get_paramv(param);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_paramv (18x)
144 ( 0.00%)  		if (iterate_paramv(this, nested_paramv, access_fn) < 0)
2,646 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 (19x)
  .           			return -1;
 48 ( 0.00%)  		i++;
  .           	}
  .           
 50 ( 0.00%)  	return 0;
300 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This function prepares schema for execution. It loads
  .            * plugins, link unresolved symbols, then iterates all the
  .            * objects and link them to each other, check access
  .            * permissions. Don't execute clish_shell_startup() without this
  .            * function.
  .            */
  .           int clish_shell_prepare(clish_shell_t *this)
  8 ( 0.00%)  {
  .           	clish_command_t *cmd;
  .           	clish_view_t *view;
  .           	clish_nspace_t *nspace;
  .           	lub_bintree_t *view_tree, *cmd_tree;
  .           	lub_list_t *nspace_tree;
  .           	lub_bintree_iterator_t cmd_iter, view_iter;
  .           	lub_list_node_t *nspace_iter;
  .           	clish_hook_access_fn_t *access_fn = NULL;
  .           	clish_paramv_t *paramv;
  .           	int i = 0;
  .           
  .           	/* Add statically linked plugins */
  4 ( 0.00%)  	while (clish_plugin_builtin_list[i].name) {
  .           		clish_plugin_t *plugin;
  .           		plugin = clish_shell_find_create_plugin(this,
  .           			clish_plugin_builtin_list[i].name);
  .           		clish_plugin_add_init(plugin,
  .           			clish_plugin_builtin_list[i].init);
  .           		clish_plugin__set_builtin_flag(plugin, BOOL_TRUE);
  .           		i++;
  .           	}
  .           
  .           	/* Add default plugin to the list of plugins */
  5 ( 0.00%)  	if (this->default_plugin) {
  9 ( 0.00%)  		clish_shell_find_create_plugin(this, "clish");
3,187 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* Default hooks */
 11 ( 0.00%)  		for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 15 ( 0.00%)  			if (this->hooks_use[i])
  .           				continue;
 20 ( 0.00%)  			if (!clish_plugin_default_hook[i])
  .           				continue;
 18 ( 0.00%)  			clish_sym__set_name(this->hooks[i],
957 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
640 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_name (2x)
  .           				clish_plugin_default_hook[i]);
  .           		}
  .           	}
  .           	/* Add default syms to unresolved table */
 10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 25 ( 0.00%)  		if (clish_sym__get_name(this->hooks[i]))
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (5x)
 17 ( 0.00%)  			lub_list_add(this->syms, this->hooks[i]);
1,171 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (3x)
  .           	}
  .           
  .           	/* Load plugins and link symbols */
  9 ( 0.00%)  	if (clish_shell_load_plugins(this) < 0)
155,815 ( 2.37%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  9 ( 0.00%)  	if (clish_shell_link_plugins(this) < 0)
10,280 ( 0.16%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  .           
 12 ( 0.00%)  	access_fn = clish_sym__get_func(clish_shell_get_hook(this, CLISH_SYM_TYPE_ACCESS));
648 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (1x)
  .           
  .           	/* Iterate the VIEWs */
  .           	view_tree = &this->view_tree;
  9 ( 0.00%)  	view = lub_bintree_findfirst(view_tree);
1,054 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 23 ( 0.00%)  	for (lub_bintree_iterator_init(&view_iter, view_tree, view);
951 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 20 ( 0.00%)  		view; view = lub_bintree_iterator_next(&view_iter)) {
1,901 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (5x)
  .           		/* Check access rights for the VIEW */
 10 ( 0.00%)  		if (access_fn && clish_view__get_access(view) &&
  .           			access_fn(this, clish_view__get_access(view))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove VIEW \"%s\"\n",
  .           				clish_view__get_name(view));
  .           #endif
  .           			lub_bintree_remove(view_tree, view);
  .           			clish_view_delete(view);
  .           			continue;
  .           		}
  .           
  .           		/* Iterate the NAMESPACEs */
 24 ( 0.00%)  		nspace_tree = clish_view__get_nspace_tree(view);
703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_nspace_tree (4x)
 20 ( 0.00%)  		nspace_iter = lub_list__get_head(nspace_tree);
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
 10 ( 0.00%)  		while(nspace_iter) {
  .           			clish_view_t *ref_view;
  .           			lub_list_node_t *old_nspace_iter;
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(nspace_iter);
  .           			old_nspace_iter = nspace_iter;
  .           			nspace_iter = lub_list_node__get_next(nspace_iter);
  .           			/* Resolve NAMESPACEs and remove unresolved ones */
  .           			ref_view = clish_shell_find_view(this, clish_nspace__get_view_name(nspace));
  .           			if (!ref_view) {
-- line 235 ----------------------------------------
-- line 259 ----------------------------------------
  .           				lub_list_del(nspace_tree, old_nspace_iter);
  .           				lub_list_node_free(old_nspace_iter);
  .           				clish_nspace_delete(nspace);
  .           				continue;
  .           			}
  .           		}
  .           
  .           		/* Iterate the COMMANDs */
 24 ( 0.00%)  		cmd_tree = clish_view__get_command_tree(view);
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_command_tree (4x)
 20 ( 0.00%)  		cmd = lub_bintree_findfirst(cmd_tree);
441 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (5x)
 88 ( 0.00%)  		for (lub_bintree_iterator_init(&cmd_iter, cmd_tree, cmd);
204 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_init.c:lub_bintree_iterator_init (5x)
108 ( 0.00%)  			cmd; cmd = lub_bintree_iterator_next(&cmd_iter)) {
3,573 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
24,274 ( 0.37%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (25x)
108 ( 0.00%)  			int cmd_is_alias = clish_command__get_alias(cmd)?1:0;
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_alias (25x)
  .           			clish_param_t *args = NULL;
  .           
  .           			/* Check access rights for the COMMAND */
 52 ( 0.00%)  			if (access_fn && clish_command__get_access(cmd) &&
  .           				access_fn(this, clish_command__get_access(cmd))) {
  .           #ifdef DEBUG
  .           				fprintf(stderr, "Warning: Access denied. Remove COMMAND \"%s\" from VIEW \"%s\"\n",
  .           					clish_command__get_name(cmd), clish_view__get_name(view));
  .           #endif
  .           				lub_bintree_remove(cmd_tree, cmd);
  .           				clish_command_delete(cmd);
  .           				continue;
  .           			}
  .           
  .           			/* Resolve command aliases */
 52 ( 0.00%)  			if (cmd_is_alias) {
  .           				clish_view_t *aview;
  .           				clish_command_t *cmdref;
 26 ( 0.00%)  				const char *alias_view = clish_command__get_alias_view(cmd);
  .           				if (!alias_view)
  .           					aview = clish_command__get_pview(cmd);
  .           				else
  .           					aview = clish_shell_find_view(this, alias_view);
  .           				if (!aview /* Removed or broken VIEW */
  .           					||
  .           					/* Removed or broken referenced COMMAND */
  .           					!(cmdref = clish_view_find_command(aview, clish_command__get_alias(cmd), BOOL_FALSE))
-- line 298 ----------------------------------------
-- line 328 ----------------------------------------
  .           					lub_bintree_remove(cmd_tree, cmd);
  .           					clish_command_delete(cmd);
  .           					continue;
  .           				}
  .           			}
  .           			if (cmd_is_alias) /* Don't duplicate paramv processing for aliases */
  .           				continue;
  .           			/* Iterate PARAMeters */
 56 ( 0.00%)  			paramv = clish_command__get_paramv(cmd);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (25x)
156 ( 0.00%)  			if (iterate_paramv(this, paramv, access_fn) < 0)
16,132 ( 0.25%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv (26x)
  .           				return -1;
  .           			/* Resolve PTYPE for args */
134 ( 0.00%)  			if ((args = clish_command__get_args(cmd))) {
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (25x)
  5 ( 0.00%)  				if (!resolve_ptype(this, args))
608 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (1x)
  .           					return -1;
  .           			}
  .           		}
  .           	}
  .           
  2 ( 0.00%)  	return 0;
  8 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c
--------------------------------------------------------------------------------
Ir             

-- line 50 ----------------------------------------
    .           
    .           	this = this; /* Happy compiler */
    .           
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_printf(const tinyrl_vt100_t * this, const char *fmt, ...)
2,058 ( 0.03%)  {
    .           	va_list args;
    .           	int len;
    .           
  588 ( 0.01%)  	if (!this->ostream)
  294 ( 0.00%)  		return 0;
1,764 ( 0.03%)  	va_start(args, fmt);
  882 ( 0.01%)  	len = tinyrl_vt100_vprintf(this, fmt, args);
139,166 ( 2.12%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_vprintf (294x)
    .           	va_end(args);
    .           
    .           	return len;
  588 ( 0.01%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           int
    .           tinyrl_vt100_vprintf(const tinyrl_vt100_t * this, const char *fmt, va_list args)
    .           {
  885 ( 0.01%)  	if (!this->ostream)
    .           		return 0;
  594 ( 0.01%)  	return vfprintf(this->ostream, fmt, args);
137,696 ( 2.10%)  => /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf (294x)
17,314 ( 0.26%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_getchar(const tinyrl_vt100_t *this)
  564 ( 0.01%)  {
    .           	unsigned char c;
    .           	int istream_fd;
    .           	fd_set rfds;
    .           	struct timeval tv;
    .           	int retval;
    .           	ssize_t res;
    .           
  282 ( 0.00%)  	if (!this->istream)
    .           		return VT100_ERR;
  376 ( 0.01%)  	istream_fd = fileno(this->istream);
  564 ( 0.01%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (94x)
    .           
    .           	/* Just wait for the input if no timeout */
  282 ( 0.00%)  	if (this->timeout <= 0) {
  662 ( 0.01%)  		while (((res = read(istream_fd, &c, 1)) < 0) &&
1,452 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  651 ( 0.01%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (93x)
    .           			(EAGAIN == errno));
    .           		/* EOF or error */
    .           		if (res < 0)
    .           			return VT100_ERR;
    .           		if (!res)
    .           			return VT100_EOF;
    .           		return c;
    .           	}
-- line 104 ----------------------------------------
-- line 115 ----------------------------------------
    .           		return VT100_ERR;
    .           	if (!retval)
    .           		return VT100_TIMEOUT;
    .           
    .           	res = read(istream_fd, &c, 1);
    .           	/* EOF or error */
    .           	if (res < 0)
    .           		return VT100_ERR;
   94 ( 0.00%)  	if (!res)
   94 ( 0.00%)  		return VT100_EOF;
    .           
   94 ( 0.00%)  	return c;
  752 ( 0.01%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_oflush(const tinyrl_vt100_t * this)
    .           {
  435 ( 0.01%)  	if (!this->ostream)
    .           		return 0;
  294 ( 0.00%)  	return fflush(this->ostream);
21,912 ( 0.33%)  => /opt/build/glibc/glibc-2.24/libio/iofflush.c:fflush (144x)
1,633 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_ierror(const tinyrl_vt100_t * this)
    .           {
    .           	if (!this->istream)
    .           		return 0;
    .           	return ferror(this->istream);
-- line 142 ----------------------------------------
-- line 163 ----------------------------------------
    .           {
    .           	if (!this->istream)
    .           		return 0;
    .           	return feof(this->istream);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           unsigned int tinyrl_vt100__get_width(const tinyrl_vt100_t *this)
  120 ( 0.00%)  {
    .           #ifdef TIOCGWINSZ
    .           	struct winsize ws;
    .           	int res;
    .           #endif
    .           
  360 ( 0.01%)  	if(!this->ostream)
    .           		return 80;
    .           
    .           #ifdef TIOCGWINSZ
  240 ( 0.00%)  	ws.ws_col = 0;
  968 ( 0.01%)  	res = ioctl(fileno(this->ostream), TIOCGWINSZ, &ws);
2,925 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
  714 ( 0.01%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (119x)
  595 ( 0.01%)  => /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/syscall-template.S:ioctl (119x)
  720 ( 0.01%)  	if (res || !ws.ws_col)
    .           		return 80;
    .           	return ws.ws_col;
    .           #else
    .           	return 80;
    .           #endif
  240 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           unsigned int tinyrl_vt100__get_height(const tinyrl_vt100_t *this)
    .           {
    .           #ifdef TIOCGWINSZ
    .           	struct winsize ws;
    .           	int res;
    .           #endif
-- line 197 ----------------------------------------
-- line 209 ----------------------------------------
    .           	return 25;
    .           #endif
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void
    .           tinyrl_vt100_init(tinyrl_vt100_t * this, FILE * istream, FILE * ostream)
    .           {
    1 ( 0.00%)  	this->istream = istream;
    1 ( 0.00%)  	this->ostream = ostream;
    1 ( 0.00%)  	this->timeout = -1; /* No timeout by default */
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void tinyrl_vt100_fini(tinyrl_vt100_t * this)
    .           {
    .           	/* nothing to do yet... */
    .           	this = this;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           tinyrl_vt100_t *tinyrl_vt100_new(FILE * istream, FILE * ostream)
    5 ( 0.00%)  {
    .           	tinyrl_vt100_t *this = NULL;
    .           
    3 ( 0.00%)  	this = malloc(sizeof(tinyrl_vt100_t));
  197 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
    2 ( 0.00%)  	if (this) {
    .           		tinyrl_vt100_init(this, istream, ostream);
    .           	}
    .           
    .           	return this;
    4 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_delete(tinyrl_vt100_t * this)
    .           {
    .           	tinyrl_vt100_fini(this);
    .           	/* release the memory */
    2 ( 0.00%)  	free(this);
   88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_ding(const tinyrl_vt100_t * this)
   60 ( 0.00%)  {
  150 ( 0.00%)  	tinyrl_vt100_printf(this, "%c", KEY_BEL);
10,740 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (30x)
   90 ( 0.00%)  	(void)tinyrl_vt100_oflush(this);
5,790 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (30x)
   30 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_attribute_reset(const tinyrl_vt100_t * this)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[0m", KEY_ESC);
    .           }
    .           
    .           /*-------------------------------------------------------- */
-- line 263 ----------------------------------------
-- line 325 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_cursor_forward(const tinyrl_vt100_t * this, unsigned count)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[%dC", KEY_ESC, count);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_cursor_back(const tinyrl_vt100_t * this, unsigned count)
   26 ( 0.00%)  {
  130 ( 0.00%)  	tinyrl_vt100_printf(this, "%c[%dD", KEY_ESC, count);
20,722 ( 0.32%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (26x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_cursor_up(const tinyrl_vt100_t * this, unsigned count)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[%dA", KEY_ESC, count);
    .           }
    .           
-- line 342 ----------------------------------------
-- line 374 ----------------------------------------
    .           void tinyrl_vt100_erase(const tinyrl_vt100_t * this, unsigned count)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[%dP", KEY_ESC, count);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100__set_timeout(tinyrl_vt100_t *this, int timeout)
    .           {
    8 ( 0.00%)  	this->timeout = timeout;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_erase_down(const tinyrl_vt100_t * this)
    .           {
  130 ( 0.00%)  	tinyrl_vt100_printf(this, "%c[J", KEY_ESC);
11,050 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (26x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100__set_istream(tinyrl_vt100_t * this, FILE * istream)
    .           {
    4 ( 0.00%)  	this->istream = istream;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl_vt100__get_istream(const tinyrl_vt100_t * this)
    .           {
   19 ( 0.00%)  	return this->istream;
   19 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl_vt100__get_ostream(const tinyrl_vt100_t * this)
    .           {
    .           	return this->ostream;
    .           }
    .           
    .           /*-------------------------------------------------------- */
-- line 409 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c
--------------------------------------------------------------------------------
Ir             

-- line 73 ----------------------------------------
    .            */
    .           const char *default_path = "/etc/clish;~/.clish";
    .           
    .           static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent);
    .           
    .           /*-------------------------------------------------------- */
    .           int clish_shell_load_scheme(clish_shell_t *this, const char *xml_path, const char *xslt_path)
    8 ( 0.00%)  {
    .           	const char *path = xml_path;
    .           	char *buffer;
    .           	char *dirname;
    .           	char *saveptr = NULL;
    .           	int res = -1;
    .           	clish_xmldoc_t *doc = NULL;
    .           	DIR *dir;
    .           
-- line 89 ----------------------------------------
-- line 99 ----------------------------------------
    .           			return -1;
    .           		}
    .           	}
    .           #else
    .           	xslt_path = xslt_path; /* Happy compiler */
    .           #endif
    .           
    .           	/* Use the default path */
    2 ( 0.00%)  	if (!path)
    .           		path = default_path;
    9 ( 0.00%)  	buffer = lub_system_tilde_expand(path);
5,312 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Loop though each directory */
    .           	for (dirname = strtok_r(buffer, ";", &saveptr);
    .           		dirname; dirname = strtok_r(NULL, ";", &saveptr)) {
    .           		struct dirent *entry;
    .           
    .           		/* Search this directory for any XML files */
    8 ( 0.00%)  		dir = opendir(dirname);
2,024 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    3 ( 0.00%)  		if (NULL == dir) {
    .           #ifdef DEBUG
    .           			tinyrl_printf(this->tinyrl,
    .           				"*** Failed to open '%s' directory\n",
    .           				dirname);
    .           #endif
    .           			continue;
    .           		}
   79 ( 0.00%)  		for (entry = readdir(dir); entry; entry = readdir(dir)) {
2,157 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  573 ( 0.01%)  => /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c:readdir (14x)
   88 ( 0.00%)  			const char *extension = strrchr(entry->d_name, '.');
1,506 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  401 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strrchr.S:rindex (13x)
   14 ( 0.00%)  			char *filename = NULL;
    .           			clish_xmlnode_t *root;
    .           			int r;
    .           
    .           			/* Check the filename */
  134 ( 0.00%)  			if (!extension || strcmp(".xml", extension))
    .           				continue;
    .           
    .           			/* Build the filename */
   41 ( 0.00%)  			lub_string_cat(&filename, dirname);
3,779 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, "/");
2,620 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, entry->d_name);
4,032 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
    .           
    .           #ifdef DEBUG
    .           			fprintf(stderr, "Parse XML-file: %s\n", filename);
    .           #endif
    .           			/* Load current XML file */
   44 ( 0.00%)  			doc = clish_xmldoc_read(filename);
1,452,782 (22.14%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read (9x)
134,640 ( 2.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  			if (!clish_xmldoc_is_valid(doc)) {
  659 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (9x)
   10 ( 0.00%)  				int errcaps = clish_xmldoc_error_caps(doc);
    .           				printf("Unable to open file '%s'", filename);
    .           				if ((errcaps & CLISH_XMLERR_LINE) == CLISH_XMLERR_LINE)
    .           					printf(", at line %d", clish_xmldoc_get_err_line(doc));
    .           				if ((errcaps & CLISH_XMLERR_COL) == CLISH_XMLERR_COL)
    .           					printf(", at column %d", clish_xmldoc_get_err_col(doc));
    .           				if ((errcaps & CLISH_XMLERR_DESC) == CLISH_XMLERR_DESC)
    .           					printf(", message is %s", clish_xmldoc_get_err_msg(doc));
    .           				printf("\n");
-- line 155 ----------------------------------------
-- line 171 ----------------------------------------
    .           				}
    .           				clish_xmldoc_release(doc);
    .           				doc = tmp;
    .           			}
    .           
    .           			if (!xslt_path && clish_xslt_is_valid(xslt))
    .           				clish_xslt_release(xslt);
    .           #endif
   24 ( 0.00%)  			root = clish_xmldoc_get_root(doc);
  673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_get_root (9x)
    .           			r = process_node(this, root, NULL);
   44 ( 0.00%)  			clish_xmldoc_release(doc);
179,041 ( 2.73%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release (9x)
14,628 ( 0.22%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           			/* Error message */
   30 ( 0.00%)  			if (r) {
    .           				fprintf(stderr, CLISH_XML_ERROR_STR"File %s\n",
    .           					filename);
    .           				lub_string_free(filename);
    .           				goto error;
    .           			}
   34 ( 0.00%)  			lub_string_free(filename);
2,402 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  810 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
    .           		}
    7 ( 0.00%)  		closedir(dir);
1,641 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           /* To don't free memory twice on cleanup */
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (!xslt_path)
    .           		xslt = NULL;
    .           #endif
    1 ( 0.00%)  	doc = NULL;
    .           	dir = NULL;
    1 ( 0.00%)  	res = 0; /* Success */
    .           error:
    3 ( 0.00%)  	lub_string_free(buffer);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    .           	if (dir)
    .           		closedir(dir);
    5 ( 0.00%)  	if (clish_xmldoc_is_valid(doc))
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (1x)
    .           		clish_xmldoc_release(doc);
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (clish_xslt_is_valid(xslt))
    .           		clish_xslt_release(xslt);
    .           #endif
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /*
    .            * ------------------------------------------------------
    .            * This function reads an element from the XML stream and processes it.
    .            * ------------------------------------------------------
    .            */
  980 ( 0.01%)  static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent)
    .           {
   98 ( 0.00%)  	int res = 0;
    .           
2,511 ( 0.04%)  	switch (clish_xmlnode_get_type(node)) {
2,340,397 (35.66%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 (30x)
  870 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type (174x)
    .           	case CLISH_XMLNODE_ELM: {
    .           			clish_xml_cb_t * cb;
    .           			char name[128];
   98 ( 0.00%)  			unsigned int namelen = sizeof(name);
  788 ( 0.01%)  			if (clish_xmlnode_get_name(node, name, &namelen) == 0) {
5,400 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (9x)
2,754 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,990 ( 0.03%)  				for (cb = &xml_elements[0]; cb->element; cb++) {
2,369 ( 0.04%)  					if (0 == strcmp(name, cb->element)) {
1,476 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  189 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (9x)
    .           #ifdef DEBUG
    .           						fprintf(stderr, "NODE:");
    .           						clish_xmlnode_print(node, stderr);
    .           						fprintf(stderr, "\n");
    .           #endif
    .           						/* process the elements at this level */
  490 ( 0.01%)  						res = cb->handler(shell, node, parent);
2,350,698 (35.82%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module (10x)
    .           
    .           						/* Error message */
  294 ( 0.00%)  						if (res) {
    .           							char *ename = clish_xmlnode_fetch_attr(node, "name");
    .           							char *eref = clish_xmlnode_fetch_attr(node, "ref");
    .           							char *ekey = clish_xmlnode_fetch_attr(node, "key");
    .           							char *efile = clish_xmlnode_fetch_attr(node, "file");
    .           							fprintf(stderr, CLISH_XML_ERROR_STR"Node %s", name);
    .           							if (ename)
    .           								fprintf(stderr, ", name=\"%s\"", ename);
    .           							if (eref)
-- line 252 ----------------------------------------
-- line 274 ----------------------------------------
    .           	case CLISH_XMLNODE_COMMENT:
    .           	case CLISH_XMLNODE_DECL:
    .           	case CLISH_XMLNODE_UNKNOWN:
    .           	default:
    .           		break;
    .           	}
    .           
    .           	return res;
  882 ( 0.01%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_children(clish_shell_t *shell,
    .           	clish_xmlnode_t *element, void *parent)
  549 ( 0.01%)  {
   61 ( 0.00%)  	clish_xmlnode_t *node = NULL;
    .           	int res;
    .           
3,350 ( 0.05%)  	while ((node = clish_xmlnode_next_child(element, node)) != NULL) {
  799 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  750 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child (183x)
    .           		/* Now deal with all the contained elements */
    .           		res = process_node(shell, node, parent);
  176 ( 0.00%)  		if (res)
    .           			return res;
    .           	}
    .           
   61 ( 0.00%)  	return 0;
  366 ( 0.01%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_clish_module(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   50 ( 0.00%)  {
    .           	/* Create the global view */
   30 ( 0.00%)  	if (!shell->global)
   11 ( 0.00%)  		shell->global = clish_shell_find_create_view(shell,
5,219 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			"__view_global", "");
    .           
    .           	parent = parent; /* Happy compiler */
    .           
   30 ( 0.00%)  	return process_children(shell, element, shell->global);
2,345,328 (35.74%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children (10x)
   30 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_view(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   45 ( 0.00%)  {
    .           	clish_view_t *view;
    .           	int res = -1;
    .           
   29 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  164 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (4x)
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  	char *prompt = clish_xmlnode_fetch_attr(element, "prompt");
  328 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *depth = clish_xmlnode_fetch_attr(element, "depth");
  322 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *restore = clish_xmlnode_fetch_attr(element, "restore");
  340 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
  328 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
    .           
    .           	/* Check syntax */
   10 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
    .           
    .           	/* re-use a view if it already exists */
   30 ( 0.00%)  	view = clish_shell_find_create_view(shell, name, prompt);
6,493 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell_find_create_view (5x)
    .           
   10 ( 0.00%)  	if (depth && (lub_ctype_isdigit(*depth))) {
    .           		unsigned int res = 0;
    .           		lub_conv_atoui(depth, &res, 0);
    .           		clish_view__set_depth(view, res);
    .           	}
    .           
   10 ( 0.00%)  	if (restore) {
    .           		if (!lub_string_nocasecmp(restore, "depth"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_DEPTH);
    .           		else if (!lub_string_nocasecmp(restore, "view"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_VIEW);
    .           		else
    .           			clish_view__set_restore(view, CLISH_RESTORE_NONE);
    .           	}
    .           
   10 ( 0.00%)  	if (access)
    .           		clish_view__set_access(view, access);
    .           
    .           //process_view_end:
   25 ( 0.00%)  	res = process_children(shell, element, view);
293,378 ( 4.47%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (5x)
    .           error:
   15 ( 0.00%)  	clish_xml_release(name);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(prompt);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(depth);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(restore);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(access);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   45 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_ptype(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   99 ( 0.00%)  {
    .           	clish_ptype_method_e method;
    .           	clish_ptype_preprocess_e preprocess;
    .           	int res = -1;
    .           
   55 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  480 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,285 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *pattern = clish_xmlnode_fetch_attr(element, "pattern");
  955 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *method_name = clish_xmlnode_fetch_attr(element, "method");
  892 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *preprocess_name =	clish_xmlnode_fetch_attr(element, "preprocess");
1,318 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
    .           
    .           	/* Check syntax */
   22 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   22 ( 0.00%)  	if (!pattern) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("pattern"));
    .           		goto error;
    .           	}
    .           
   48 ( 0.00%)  	method = clish_ptype_method_resolve(method_name);
  705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  616 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_method_resolve (10x)
    .           
   48 ( 0.00%)  	preprocess = clish_ptype_preprocess_resolve(preprocess_name);
  737 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_preprocess_resolve (10x)
   77 ( 0.00%)  	clish_shell_find_create_ptype(shell,
1,796,814 (27.38%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (11x)
    .           		name, help, pattern, method, preprocess);
    .           
   11 ( 0.00%)  	res = 0;
    .           error:
   33 ( 0.00%)  	clish_xml_release(name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(help);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(pattern);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(method_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(preprocess_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   99 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_overview(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    8 ( 0.00%)  {
    1 ( 0.00%)  	char *content = NULL;
    2 ( 0.00%)  	unsigned int content_len = 2048;
    .           	int result;
    .           
    .           	/*
    .           	 * the code below faithfully assume that we'll be able fully store
    .           	 * the content of the node. If it's really, really big, we may have
    .           	 * an issue (but then, if it's that big, how the hell does it
    .           	 * already fits in allocated memory?)
    .           	 * Ergo, it -should- be safe.
    .           	 */
    .           	do {
    4 ( 0.00%)  		char *new = (char*)realloc(content, content_len);
1,863 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (1x)
    2 ( 0.00%)  		if (!new) {
    .           			if (content)
    .           				free(content);
    .           			return -1;
    .           		}
    .           		content = new;
    7 ( 0.00%)  		result = clish_xmlnode_get_content(element, content,
19,272 ( 0.29%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (1x)
    .           			&content_len);
    2 ( 0.00%)  	} while (result == -E2BIG);
    .           
    2 ( 0.00%)  	if (result == 0 && content) {
    .           		/* set the overview text for this view */
    2 ( 0.00%)  		assert(NULL == shell->overview);
    .           		/* store the overview */
    4 ( 0.00%)  		shell->overview = lub_string_dup(content);
  968 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    .           	}
    .           
    .           	if (content)
    3 ( 0.00%)  		free(content);
  148 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    1 ( 0.00%)  	return 0;
    7 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_command(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  260 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	clish_command_t *old;
    .           	int res = -1;
    .           
  130 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,167 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
1,066 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,876 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
2,167 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
2,319 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *escape_chars = clish_xmlnode_fetch_attr(element, "escape_chars");
2,119 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_name = clish_xmlnode_fetch_attr(element, "args");
1,989 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_help = clish_xmlnode_fetch_attr(element, "args_help");
2,371 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
2,290 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
2,374 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *ref = clish_xmlnode_fetch_attr(element, "ref");
2,296 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
    .           
    .           	/* Check syntax */
   52 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   52 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
    .           
    .           	/* check this command doesn't already exist */
  134 ( 0.00%)  	old = clish_view_find_command(v, name, BOOL_FALSE);
  723 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,202 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (25x)
   52 ( 0.00%)  	if (old) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"Duplicate COMMAND name=\"%s\".\n", name);
    .           		goto error;
    .           	}
    .           
    .           	/* create a command */
  160 ( 0.00%)  	cmd = clish_view_new_command(v, name, help);
43,626 ( 0.66%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (25x)
4,334 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  108 ( 0.00%)  	clish_command__set_pview(cmd, v);
  679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_pview (25x)
    .           
    .           	/* Reference 'ref' field */
   78 ( 0.00%)  	if (ref) {
    .           		char *saveptr = NULL;
    .           		const char *delim = "@";
    .           		char *view_name = NULL;
    .           		char *cmdn = NULL;
    .           		char *str = lub_string_dup(ref);
    .           
    .           		cmdn = strtok_r(str, delim, &saveptr);
    .           		if (!cmdn) {
-- line 505 ----------------------------------------
-- line 509 ----------------------------------------
    .           		}
    .           		clish_command__set_alias(cmd, cmdn); /* alias name */
    .           		view_name = strtok_r(NULL, delim, &saveptr);
    .           		clish_command__set_alias_view(cmd, view_name);
    .           		lub_string_free(str);
    .           	}
    .           
    .           	/* define some specialist escape characters */
   78 ( 0.00%)  	if (escape_chars)
    8 ( 0.00%)  		clish_command__set_escape_chars(cmd, escape_chars);
  923 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   52 ( 0.00%)  	if (args_name) {
    .           		/* define a "rest of line" argument */
    .           		clish_param_t *param;
    .           
    .           		/* Check syntax */
    2 ( 0.00%)  		if (!args_help) {
    .           			fprintf(stderr, CLISH_XML_ERROR_ATTR("args_help"));
    .           			goto error;
    .           		}
    5 ( 0.00%)  		param = clish_param_new(args_name, args_help, "__ptype_ARGS");
  751 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (1x)
    8 ( 0.00%)  		clish_command__set_args(cmd, param);
  689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* define the view which this command changes to */
   78 ( 0.00%)  	if (view) {
    .           		/* reference the next view */
   36 ( 0.00%)  		clish_command__set_viewname(cmd, view);
1,802 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,635 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (7x)
    .           	}
    .           
    .           	/* define the view id which this command changes to */
   78 ( 0.00%)  	if (viewid)
   16 ( 0.00%)  		clish_command__set_viewid(cmd, viewid);
1,829 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  463 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewid (2x)
    .           
    .           	/* lock field */
   78 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
  108 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
  725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (25x)
    .           
    .           	/* interrupt field */
   78 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
  108 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
  719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (25x)
    .           
   78 ( 0.00%)  	if (access)
    8 ( 0.00%)  		clish_command__set_access(cmd, access);
  872 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           //process_command_end:
  130 ( 0.00%)  	res = process_children(shell, element, cmd);
365,639 ( 5.57%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (26x)
    .           error:
   78 ( 0.00%)  	clish_xml_release(access);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(view);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(viewid);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(escape_chars);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(lock);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(interrupt);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(ref);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
    .           
    .           	return res;
  234 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_startup(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   10 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	int res = -1;
    .           
    5 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
   70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
   73 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_shebang =
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		clish_xmlnode_fetch_attr(element, "default_shebang");
    5 ( 0.00%)  	char *timeout = clish_xmlnode_fetch_attr(element, "timeout");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_plugin = clish_xmlnode_fetch_attr(element,
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		"default_plugin");
    .           
    .           	/* Check syntax */
    2 ( 0.00%)  	if (!view) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("view"));
    .           		goto error;
    .           	}
    2 ( 0.00%)  	if (shell->startup) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP tag duplication.\n");
    .           		goto error;
    .           	}
    .           
    .           	/* create a command with NULL help */
    6 ( 0.00%)  	cmd = clish_view_new_command(v, "startup", NULL);
1,043 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (1x)
    4 ( 0.00%)  	clish_command__set_lock(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* reference the next view */
    4 ( 0.00%)  	clish_command__set_viewname(cmd, view);
  246 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (1x)
    .           
    .           	/* define the view id which this command changes to */
    3 ( 0.00%)  	if (viewid)
    .           		clish_command__set_viewid(cmd, viewid);
    .           
    3 ( 0.00%)  	if (default_shebang)
    .           		clish_shell__set_default_shebang(shell, default_shebang);
    .           
    3 ( 0.00%)  	if (timeout) {
    .           		unsigned int to = 0;
    .           		lub_conv_atoui(timeout, &to, 0);
    .           		clish_shell__set_timeout(shell, to);
    .           	}
    .           
    .           	/* lock field */
    2 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
    4 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* interrupt field */
    2 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
    4 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (1x)
    .           
    .           	/* If we need the default plugin */
    3 ( 0.00%)  	if (default_plugin && (0 == strcmp(default_plugin, "false")))
    .           		shell->default_plugin = BOOL_FALSE;
    .           
    .           	/* remember this command */
    1 ( 0.00%)  	shell->startup = cmd;
    .           
    5 ( 0.00%)  	res = process_children(shell, element, cmd);
6,101 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (1x)
    .           error:
    3 ( 0.00%)  	clish_xml_release(view);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(viewid);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(default_shebang);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(timeout);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(lock);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(interrupt);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_param(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  190 ( 0.00%)  {
    .           	clish_command_t *cmd = NULL;
   38 ( 0.00%)  	clish_param_t *p_param = NULL;
    .           	clish_xmlnode_t *pelement;
    .           	clish_param_t *param;
    .           	char *pname;
    .           	int res = -1;
    .           
  114 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  808 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,378 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *ptype = clish_xmlnode_fetch_attr(element, "ptype");
2,095 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *prefix = clish_xmlnode_fetch_attr(element, "prefix");
2,203 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *defval = clish_xmlnode_fetch_attr(element, "default");
2,237 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *mode = clish_xmlnode_fetch_attr(element, "mode");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *optional = clish_xmlnode_fetch_attr(element, "optional");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *order = clish_xmlnode_fetch_attr(element, "order");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *value = clish_xmlnode_fetch_attr(element, "value");
2,252 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *hidden = clish_xmlnode_fetch_attr(element, "hidden");
2,045 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *test = clish_xmlnode_fetch_attr(element, "test");
2,252 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *completion = clish_xmlnode_fetch_attr(element, "completion");
2,270 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,186 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
    .           
    .           	/* The PARAM can be child of COMMAND or another PARAM */
   76 ( 0.00%)  	pelement = clish_xmlnode_parent(element);
   76 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (19x)
    .           	pname = clish_xmlnode_get_all_name(pelement);
  190 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "PARAM") == 0)
  969 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (19x)
    .           		p_param = (clish_param_t *)parent;
    .           	else
    .           		cmd = (clish_command_t *)parent;
    .           	if (pname)
   95 ( 0.00%)  		free(pname);
2,369 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (19x)
   38 ( 0.00%)  	if (!cmd && !p_param)
    .           		goto error;
    .           
    .           	/* Check syntax */
   95 ( 0.00%)  	if (cmd && (cmd == shell->startup)) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP can't contain PARAMs.\n");
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!ptype) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("ptype"));
    .           		goto error;
    .           	}
    .           
  118 ( 0.00%)  	param = clish_param_new(name, help, ptype);
21,637 ( 0.33%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (18x)
2,140 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* If prefix is set clish will emulate old optional
    .           	 * command syntax over newer optional command mechanism.
    .           	 * It will create nested PARAM.
    .           	 */
   38 ( 0.00%)  	if (prefix) {
    .           		const char *ptype_name = "__ptype_SUBCOMMAND";
    .           		clish_param_t *opt_param = NULL;
    5 ( 0.00%)  		char *str = NULL;
    .           		clish_ptype_t *tmp;
    .           
    .           		/* Create a ptype for prefix-named subcommand that
    .           		 * will contain the nested optional parameter. The
    .           		 * name of ptype is hardcoded. It's not good but
    .           		 * it's only the service ptype.
    .           		 */
   25 ( 0.00%)  		tmp = (clish_ptype_t *)lub_bintree_find(
2,321 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (5x)
    .           			&shell->ptype_tree, ptype_name);
   10 ( 0.00%)  		if (!tmp)
    8 ( 0.00%)  			tmp = clish_shell_find_create_ptype(shell,
137,331 ( 2.09%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (1x)
    .           				ptype_name, "Option", "[^\\\\]+",
    .           				CLISH_PTYPE_REGEXP, CLISH_PTYPE_NONE);
    2 ( 0.00%)  		assert(tmp);
   20 ( 0.00%)  		lub_string_cat(&str, "_prefix_");
1,905 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   20 ( 0.00%)  		lub_string_cat(&str, name);
1,320 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   30 ( 0.00%)  		opt_param = clish_param_new(str, help, ptype_name);
6,029 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (5x)
   15 ( 0.00%)  		lub_string_free(str);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   24 ( 0.00%)  		clish_param__set_mode(opt_param,
  657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_mode (4x)
    .           			CLISH_PARAM_SUBCOMMAND);
   24 ( 0.00%)  		clish_param__set_value(opt_param, prefix);
  826 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  796 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_value (4x)
   20 ( 0.00%)  		clish_param__set_optional(opt_param, BOOL_TRUE);
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (5x)
    .           
   15 ( 0.00%)  		if (test)
    .           			clish_param__set_test(opt_param, test);
    .           
    .           		/* Add the parameter to the command */
   10 ( 0.00%)  		if (cmd)
   20 ( 0.00%)  			clish_command_insert_param(cmd, opt_param);
  910 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (5x)
    .           		/* Add the parameter to the param */
   15 ( 0.00%)  		if (p_param)
    .           			clish_param_insert_param(p_param, opt_param);
    .           		/* Unset cmd and set parent param to opt_param */
    5 ( 0.00%)  		cmd = NULL;
    .           		p_param = opt_param;
    .           	}
    .           
   57 ( 0.00%)  	if (defval)
   24 ( 0.00%)  		clish_param__set_default(param, defval);
  918 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  966 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_default (4x)
    .           
   57 ( 0.00%)  	if (hidden && lub_string_nocasecmp(hidden, "true") == 0)
    .           		clish_param__set_hidden(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_hidden(param, BOOL_FALSE);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_hidden (18x)
    .           
   57 ( 0.00%)  	if (mode) {
    .           		if (lub_string_nocasecmp(mode, "switch") == 0) {
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_SWITCH);
    .           			/* Force hidden attribute */
    .           			clish_param__set_hidden(param, BOOL_TRUE);
    .           		} else if (lub_string_nocasecmp(mode, "subcommand") == 0)
   28 ( 0.00%)  			clish_param__set_mode(param,
    .           				CLISH_PARAM_SUBCOMMAND);
    .           		else
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_COMMON);
    .           	}
    .           
   57 ( 0.00%)  	if (optional && lub_string_nocasecmp(optional, "true") == 0)
    .           		clish_param__set_optional(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_optional(param, BOOL_FALSE);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (18x)
    .           
   57 ( 0.00%)  	if (order && lub_string_nocasecmp(order, "true") == 0)
    .           		clish_param__set_order(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_order(param, BOOL_FALSE);
  663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_order (18x)
    .           
   57 ( 0.00%)  	if (value) {
    .           		clish_param__set_value(param, value);
    .           		/* Force mode to subcommand */
    .           		clish_param__set_mode(param,
    .           			CLISH_PARAM_SUBCOMMAND);
    .           	}
    .           
   57 ( 0.00%)  	if (test && !prefix)
    .           		clish_param__set_test(param, test);
    .           
   57 ( 0.00%)  	if (completion)
    .           		clish_param__set_completion(param, completion);
    .           
   57 ( 0.00%)  	if (access)
    .           		clish_param__set_access(param, access);
    .           
    .           	/* Add the parameter to the command */
   38 ( 0.00%)  	if (cmd)
   60 ( 0.00%)  		clish_command_insert_param(cmd, param);
1,565 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,570 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (13x)
    .           
    .           	/* Add the parameter to the param */
   38 ( 0.00%)  	if (p_param)
   24 ( 0.00%)  		clish_param_insert_param(p_param, param);
  914 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  959 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_insert_param (4x)
    .           
   95 ( 0.00%)  	res = process_children(shell, element, param);
  570 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (19x)
    .           
    .           error:
   57 ( 0.00%)  	clish_xml_release(name);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(help);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(ptype);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(prefix);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(defval);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(mode);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(optional);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(order);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(value);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(hidden);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(test);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(completion);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(access);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
    .           
    .           	return res;
  171 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_action(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  210 ( 0.00%)  {
    .           	clish_action_t *action = NULL;
  126 ( 0.00%)  	char *builtin = clish_xmlnode_fetch_attr(element, "builtin");
  587 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
  105 ( 0.00%)  	char *shebang = clish_xmlnode_fetch_attr(element, "shebang");
  431 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
   88 ( 0.00%)  	clish_xmlnode_t *pelement = clish_xmlnode_parent(element);
  649 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   80 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (20x)
    .           	char *pname = clish_xmlnode_get_all_name(pelement);
    .           	char *text;
    .           	clish_sym_t *sym = NULL;
    .           
  172 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "VAR") == 0)
3,294 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,020 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (20x)
   21 ( 0.00%)  		action = clish_var__get_action((clish_var_t *)parent);
    .           	else
   67 ( 0.00%)  		action = clish_command__get_action((clish_command_t *)parent);
  703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (20x)
    .           
    .           	if (pname)
   63 ( 0.00%)  		free(pname);
2,705 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
    .           	text = clish_xmlnode_get_all_content(element);
    .           
   84 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   94 ( 0.00%)  		clish_action__set_script(action, text);
  984 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,701 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_script (17x)
    .           	}
    .           	if (text)
   63 ( 0.00%)  		free(text);
2,746 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
   42 ( 0.00%)  	if (builtin)
   28 ( 0.00%)  		sym = clish_shell_add_unresolved_sym(shell, builtin,
5,051 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,964 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_unresolved_sym (3x)
    .           			CLISH_SYM_TYPE_ACTION);
    .           	else
   51 ( 0.00%)  		sym = shell->hooks[CLISH_SYM_TYPE_ACTION];
    .           
   67 ( 0.00%)  	clish_action__set_builtin(action, sym);
  695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_builtin (20x)
   42 ( 0.00%)  	if (shebang)
    .           		clish_action__set_shebang(action, shebang);
    .           
   67 ( 0.00%)  	clish_xml_release(builtin);
  622 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (20x)
   63 ( 0.00%)  	clish_xml_release(shebang);
   21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (21x)
    .           
    .           	return 0;
  189 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_detail(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   28 ( 0.00%)  {
    .           	clish_command_t *cmd = (clish_command_t *) parent;
    .           
    .           	/* read the following text element */
    .           	char *text = clish_xmlnode_get_all_content(element);
    .           
   16 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   24 ( 0.00%)  		clish_command__set_detail(cmd, text);
1,561 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_detail (3x)
1,211 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	if (text)
   12 ( 0.00%)  		free(text);
  534 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (4x)
    .           
    .           	shell = shell; /* Happy compiler */
    .           
    .           	return 0;
   28 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_namespace(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    .           {
    .           	clish_view_t *v = (clish_view_t *)parent;
    .           	clish_nspace_t *nspace = NULL;
    .           	int res = -1;
-- line 906 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c
--------------------------------------------------------------------------------
Ir           

-- line 23 ----------------------------------------
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_compare(const void *first, const void *second)
  .           {
  .           	const clish_sym_t *f = (const clish_sym_t *)first;
  .           	const clish_sym_t *s = (const clish_sym_t *)second;
  .           
180 ( 0.00%)  	return strcmp(f->name, s->name);
1,194 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (45x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_sym_new(const char *name, void *func, int type)
168 ( 0.00%)  {
  .           	clish_sym_t *this;
  .           
 84 ( 0.00%)  	this = malloc(sizeof(*this));
4,434 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (21x)
 88 ( 0.00%)  	this->name = lub_string_dup(name);
3,642 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (20x)
782 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 21 ( 0.00%)  	this->func = func;
 21 ( 0.00%)  	this->type = type;
 21 ( 0.00%)  	this->api = CLISH_SYM_API_SIMPLE;
 21 ( 0.00%)  	this->permanent = BOOL_FALSE;
  .           
  .           	return this;
147 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym_free(clish_sym_t *this)
 42 ( 0.00%)  {
 42 ( 0.00%)  	if (!this)
  .           		return;
 63 ( 0.00%)  	lub_string_free(this->name);
1,728 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (21x)
 63 ( 0.00%)  	free(this);
1,848 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
 21 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_func(clish_sym_t *this, void *func)
  .           {
  .           	this->func = func;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void *clish_sym__get_func(clish_sym_t *this)
  .           {
 14 ( 0.00%)  	return this->func;
 14 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_permanent(clish_sym_t *this, bool_t permanent)
  .           {
 26 ( 0.00%)  	this->permanent = permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_sym__get_permanent(clish_sym_t *this)
  .           {
  .           	return this->permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_name(clish_sym_t *this, const char *name)
 15 ( 0.00%)  {
  9 ( 0.00%)  	lub_string_free(this->name);
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 12 ( 0.00%)  	this->name = lub_string_dup(name);
885 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 12 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_sym__get_name(clish_sym_t *this)
  .           {
 51 ( 0.00%)  	return this->name;
 51 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_plugin(clish_sym_t *this, clish_plugin_t *plugin)
  .           {
 26 ( 0.00%)  	this->plugin = plugin;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_sym__get_plugin(clish_sym_t *this)
  .           {
  .           	return this->plugin;
  .           }
  .           
-- line 106 ----------------------------------------
-- line 108 ----------------------------------------
  .           void clish_sym__set_type(clish_sym_t *this, int type)
  .           {
  .           	this->type = type;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym__get_type(const clish_sym_t *this)
  .           {
 13 ( 0.00%)  	return this->type;
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_api(clish_sym_t *this, clish_sym_api_e api)
  .           {
  2 ( 0.00%)  	this->api = api;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_api_e clish_sym__get_api(const clish_sym_t *this)
  .           {
  5 ( 0.00%)  	return this->api;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_clone(clish_sym_t *dst, clish_sym_t *src)
  .           {
  .           	char *name;
  .           
 24 ( 0.00%)  	if (!dst || !src)
  .           		return -1;
  6 ( 0.00%)  	name = dst->name;
 60 ( 0.00%)  	*dst = *src;
  6 ( 0.00%)  	dst->name = name;
  .           
 12 ( 0.00%)  	return 0;
  .           }
  .           
  .           /**********************************************************
  .            * PLUGIN functions                                       *
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_plugin_new(const char *name)
  4 ( 0.00%)  {
  .           	clish_plugin_t *this;
  .           
  4 ( 0.00%)  	this = malloc(sizeof(*this));
344 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           
  4 ( 0.00%)  	this->name = lub_string_dup(name);
279 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  1 ( 0.00%)  	this->conf = NULL;
  1 ( 0.00%)  	this->alias = NULL;
  1 ( 0.00%)  	this->file = NULL;
  1 ( 0.00%)  	this->builtin_flag = BOOL_FALSE; /* The plugin is shared object by default */
  1 ( 0.00%)  	this->dlhan = NULL;
  .           	/* Initialise the list of symbols */
  4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
175 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
  .           	/* Constructor and destructor */
  1 ( 0.00%)  	this->init = NULL;
  1 ( 0.00%)  	this->fini = NULL;
  .           	/* Flags */
  1 ( 0.00%)  	this->rtld_global = BOOL_FALSE; /* The dlopen() use RTLD_LOCAL by default */
  .           
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_free(clish_plugin_t *this, void *userdata)
  5 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return;
  .           
  .           	/* Execute destructor */
  3 ( 0.00%)  	if (this->fini)
  .           		this->fini(userdata, this);
  .           
  3 ( 0.00%)  	lub_string_free(this->name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->alias);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->file);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	lub_string_free(this->conf);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  .           
  .           	/* Free symbol list */
 85 ( 0.00%)  	while ((iter = lub_list__get_head(this->syms))) {
 28 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (14x)
  .           		/* Remove the symbol from the list */
 53 ( 0.00%)  		lub_list_del(this->syms, iter);
143 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_del (13x)
  .           		/* Free the instance */
 82 ( 0.00%)  		clish_sym_free((clish_sym_t *)lub_list_node__get_data(iter));
786 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,268 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_free (12x)
 26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (13x)
 43 ( 0.00%)  		lub_list_node_free(iter);
946 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,080 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_free (12x)
  .           	}
  6 ( 0.00%)  	lub_list_free(this->syms);
844 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           #ifdef HAVE_DLFCN_H
  3 ( 0.00%)  	if (this->dlhan)
  6 ( 0.00%)  		dlclose(this->dlhan);
3,766 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           #endif
  3 ( 0.00%)  	free(this);
 88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_generic(clish_plugin_t *this,
  .           	void *func, const char *name, int type, bool_t permanent)
 39 ( 0.00%)  {
  .           	clish_sym_t *sym;
  .           
 91 ( 0.00%)  	if (!name || !func)
  .           		return NULL;
  .           
 91 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
6,299 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (13x)
  .           		return NULL;
 56 ( 0.00%)  	clish_sym__set_plugin(sym, this);
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_plugin (12x)
 56 ( 0.00%)  	clish_sym__set_permanent(sym, permanent);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_permanent (12x)
 52 ( 0.00%)  	lub_list_add(this->syms, sym);
4,444 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (13x)
  .           
  .           	return sym;
 65 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_sym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
  .           	return clish_plugin_add_generic(this, func,
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_psym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
 36 ( 0.00%)  	return clish_plugin_add_generic(this, func,
7,967 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (9x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_osym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  1 ( 0.00%)  {
  .           	clish_sym_t *s;
  .           
  7 ( 0.00%)  	if (!(s = clish_plugin_add_generic(this, func,
989 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (1x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE)))
  .           		return s;
  8 ( 0.00%)  	clish_sym__set_api(s, CLISH_SYM_API_STDOUT);
631 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return s;
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_posym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  .           {
  .           	clish_sym_t *s;
  .           
-- line 261 ----------------------------------------
-- line 274 ----------------------------------------
  .           	return clish_plugin_add_generic(this, func,
  .           		name, type, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_phook(clish_plugin_t *this,
  .           	void *func, const char *name, int type)
  .           {
 13 ( 0.00%)  	return clish_plugin_add_generic(this, func,
2,633 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,671 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (2x)
  .           		name, type, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_add_fini(clish_plugin_t *this,
  .           	clish_plugin_fini_t *fini)
  .           {
  .           	this->fini = fini;
-- line 290 ----------------------------------------
-- line 306 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           clish_plugin_init_t * clish_plugin_get_init(clish_plugin_t *this)
  .           {
  .           	return this->init;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_get_sym(clish_plugin_t *this, const char *name, int type)
 42 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           	clish_sym_t *sym;
  .           
  .           	/* Iterate elements */
 86 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (6x)
100 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (25x)
  .           		int res;
124 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (31x)
217 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
891 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (31x)
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (31x)
104 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
  .           			return sym;
 25 ( 0.00%)  		if (res > 0) /* No chances to find name */
  .           			break;
  .           	}
  .           
  .           	return NULL;
 42 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static int clish_plugin_load_shared(clish_plugin_t *this)
  .           {
  .           #ifdef HAVE_DLFCN_H
  1 ( 0.00%)  	char *file = NULL; /* Plugin so file name */
  1 ( 0.00%)  	char *init_name = NULL; /* Init function name */
  .           	int flag = RTLD_NOW;
  .           
  3 ( 0.00%)  	if (this->file) {
  .           		file = lub_string_dup(this->file);
  .           	} else {
  4 ( 0.00%)  		lub_string_cat(&file, "clish_plugin_");
343 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  		lub_string_cat(&file, this->name);
264 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  5 ( 0.00%)  		lub_string_cat(&file, ".so");
272 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  .           	}
  .           
  .           	/* Open dynamic library */
  7 ( 0.00%)  	if (clish_plugin__get_rtld_global(this))
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  		flag |= RTLD_GLOBAL;
  .           	else
  .           		flag |= RTLD_LOCAL;
  8 ( 0.00%)  	this->dlhan = dlopen(file, flag);
133,732 ( 2.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(file);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  2 ( 0.00%)  	if (!this->dlhan) {
  .           		fprintf(stderr, "Error: Can't open plugin \"%s\": %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	/* Get plugin init function */
  5 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_PREFIX);
286 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, this->name);
264 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_SUFFIX);
282 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  9 ( 0.00%)  	this->init = (clish_plugin_init_t *)dlsym(this->dlhan, init_name);
4,005 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(init_name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	if (!this->init) {
  .           		fprintf(stderr, "Error: Can't get plugin \"%s\" init function: %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	return 0;
  .           #else /* HAVE_DLFCN_H */
  .           	/* We have no any dl functions. */
-- line 376 ----------------------------------------
-- line 377 ----------------------------------------
  .           	fprintf(stderr, "Error: Can't get plugin \"%s\" init function.\n",
  .           		this->name);
  .           	return -1;
  .           #endif /* HAVE_DLFCN_H */
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_plugin_load(clish_plugin_t *this, void *userdata)
  4 ( 0.00%)  {
  .           	int res;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return -1;
  5 ( 0.00%)  	assert(this->name);
  .           
  .           	/* Builtin plugins already have init function. */
  3 ( 0.00%)  	if (!this->builtin_flag) {
  .           		if (clish_plugin_load_shared(this) < 0)
  .           			return -1;
  .           	}
  .           	if (!this->init) {
  .           		fprintf(stderr, "Error: PLUGIN %s has no init function\n",
  .           			this->name);
  .           		return -1;
  .           	}
  .           	/* Execute init function */
  6 ( 0.00%)  	if ((res = this->init(userdata, this)))
14,032 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/plugins/clish/builtin_init.c:clish_plugin_clish_init (1x)
  .           		fprintf(stderr, "Error: Plugin %s init retcode: %d\n",
  .           			this->name, res);
  .           
  .           	return res;
  6 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_name(const clish_plugin_t *this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 416 ----------------------------------------
-- line 424 ----------------------------------------
  .           char *clish_plugin__get_alias(const clish_plugin_t *this)
  .           {
  .           	return this->alias;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_pubname(const clish_plugin_t *this)
  .           {
 12 ( 0.00%)  	return (this->alias ? this->alias : this->name);
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin__set_file(clish_plugin_t *this, const char *file)
  .           {
  .           	lub_string_free(this->file);
  .           	this->file = lub_string_dup(file);
  .           }
  .           
-- line 441 ----------------------------------------
-- line 474 ----------------------------------------
  .           void clish_plugin__set_rtld_global(clish_plugin_t *this, bool_t rtld_global)
  .           {
  .           	this->rtld_global = rtld_global;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_plugin__get_rtld_global(const clish_plugin_t *this)
  .           {
  1 ( 0.00%)  	return this->rtld_global;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c
--------------------------------------------------------------------------------
Ir           

-- line 29 ----------------------------------------
  .            *   Initial version 
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           void *lub_bintree_find(lub_bintree_t * this, const void *clientkey)
710 ( 0.01%)  {
714 ( 0.01%)  	this->root = lub_bintree_splay(this, this->root, clientkey);
47,110 ( 0.72%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (141x)
773 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
284 ( 0.00%)  	if (NULL != this->root) {
714 ( 0.01%)  		if (lub_bintree_compare(this, this->root, clientkey) == 0)
8,796 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (69x)
1,986 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (42x)
192 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (8x)
110 ( 0.00%)  			return lub_bintree_getclientnode(this, this->root);
  .           	}
 87 ( 0.00%)  	return NULL;
568 ( 0.01%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/command/command.c
--------------------------------------------------------------------------------
Ir             

-- line 15 ----------------------------------------
    .           
    .           /*---------------------------------------------------------
    .            * PRIVATE METHODS
    .            *--------------------------------------------------------- */
    .           static void
    .           clish_command_init(clish_command_t *this, const char *name, const char *text)
    .           {
    .           	/* initialise the node part */
  108 ( 0.00%)  	this->name = lub_string_dup(name);
5,722 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
  108 ( 0.00%)  	this->text = lub_string_dup(text);
5,797 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
    .           
    .           	/* Be a good binary tree citizen */
   81 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
  135 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (27x)
    .           
    .           	/* set up defaults */
   27 ( 0.00%)  	this->link = NULL;
   27 ( 0.00%)  	this->alias = NULL;
   27 ( 0.00%)  	this->alias_view = NULL;
   85 ( 0.00%)  	this->paramv = clish_paramv_new();
4,421 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_new (26x)
  801 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   27 ( 0.00%)  	this->viewid = NULL;
   27 ( 0.00%)  	this->viewname = NULL;
   85 ( 0.00%)  	this->action = clish_action_new();
4,443 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action_new (26x)
  802 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   85 ( 0.00%)  	this->config = clish_config_new();
5,589 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config_new (26x)
  808 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   27 ( 0.00%)  	this->detail = NULL;
   27 ( 0.00%)  	this->escape_chars = NULL;
   27 ( 0.00%)  	this->regex_chars = NULL;
   27 ( 0.00%)  	this->args = NULL;
   27 ( 0.00%)  	this->pview = NULL;
   27 ( 0.00%)  	this->lock = BOOL_TRUE;
   27 ( 0.00%)  	this->interrupt = BOOL_FALSE;
   27 ( 0.00%)  	this->dynamic = BOOL_FALSE;
   27 ( 0.00%)  	this->access = NULL;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           static void clish_command_fini(clish_command_t * this)
   54 ( 0.00%)  {
   81 ( 0.00%)  	lub_string_free(this->name);
2,430 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->text);
2,349 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
    .           
    .           	/* Link need not full cleanup */
   54 ( 0.00%)  	if (this->link)
    .           		return;
    .           
    .           	/* finalize each of the parameter instances */
   85 ( 0.00%)  	clish_paramv_delete(this->paramv);
16,821 ( 0.26%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_delete (26x)
  749 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   85 ( 0.00%)  	clish_action_delete(this->action);
4,555 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action_delete (26x)
  755 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   85 ( 0.00%)  	clish_config_delete(this->config);
3,692 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config_delete (26x)
  787 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   81 ( 0.00%)  	lub_string_free(this->alias);
  243 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->alias_view);
  243 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->viewname);
  972 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->viewid);
  486 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->detail);
  702 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->escape_chars);
  324 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->regex_chars);
  243 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	lub_string_free(this->access);
  324 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (27x)
   81 ( 0.00%)  	if (this->args)
    2 ( 0.00%)  		clish_param_delete(this->args);
  467 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_delete (1x)
   53 ( 0.00%)  }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC META FUNCTIONS
    .            *--------------------------------------------------------- */
    .           size_t clish_command_bt_offset(void)
    .           {
    .           	return offsetof(clish_command_t, bt_node);
   10 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_bt_compare(const void *clientnode, const void *clientkey)
    .           {
    .           	const clish_command_t *this = clientnode;
    .           	const char *key = clientkey;
    .           
7,599 ( 0.12%)  	return lub_string_nocasecmp(this->name, key);
357,105 ( 5.44%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (2,533x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
   73 ( 0.00%)  {
    .           	const clish_command_t *this = clientnode;
    .           
    .           	/* fill out the opaque key */
  292 ( 0.00%)  	strcpy((char *)key, this->name);
1,602 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (73x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_new(const char *name, const char *help)
  135 ( 0.00%)  {
  108 ( 0.00%)  	clish_command_t *this = malloc(sizeof(clish_command_t));
9,888 ( 0.15%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (27x)
    .           
   54 ( 0.00%)  	if (this)
    .           		clish_command_init(this, name, help);
    .           
    .           	return this;
  135 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_new_link(const char *name,
    .           	const char *help, const clish_command_t * ref)
    .           {
    .           	if (!ref)
    .           		return NULL;
    .           
-- line 119 ----------------------------------------
-- line 154 ----------------------------------------
    .           
    .           	return this;
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC METHODS
    .            *--------------------------------------------------------- */
    .           void clish_command_delete(clish_command_t * this)
   54 ( 0.00%)  {
   27 ( 0.00%)  	clish_command_fini(this);
37,451 ( 0.57%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_fini (27x)
   81 ( 0.00%)  	free(this);
3,275 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (27x)
   27 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command_insert_param(clish_command_t * this, clish_param_t * param)
    .           {
   61 ( 0.00%)  	clish_paramv_insert(this->paramv, param);
3,426 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_insert (18x)
  865 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_help(const clish_command_t *this)
    .           {
    .           	this = this; /* Happy compiler */
    .           
    .           	return 0;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_choose_longest(clish_command_t * cmd1,
    .           	clish_command_t * cmd2)
  150 ( 0.00%)  {
   62 ( 0.00%)  	unsigned len1 = (cmd1 ? strlen(clish_command__get_name(cmd1)) : 0);
   32 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (2x)
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (2x)
  128 ( 0.00%)  	unsigned len2 = (cmd2 ? strlen(clish_command__get_name(cmd2)) : 0);
  208 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (13x)
   52 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (13x)
    .           
    .           	if (len2 < len1) {
    .           		return cmd1;
   26 ( 0.00%)  	} else if (len1 < len2) {
    .           		return cmd2;
    .           	} else {
    .           		/* let local view override */
   12 ( 0.00%)  		return cmd1;
    .           	}
  125 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_diff(const clish_command_t * cmd1,
    .           	const clish_command_t * cmd2)
  245 ( 0.00%)  {
  182 ( 0.00%)  	if (NULL == cmd1) {
  168 ( 0.00%)  		if (NULL != cmd2)
    .           			return 1;
    .           		else
    .           			return 0;
    .           	}
   98 ( 0.00%)  	if (NULL == cmd2)
    .           		return -1;
    .           
  490 ( 0.01%)  	return lub_string_nocasecmp(clish_command__get_name(cmd1),
2,939 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (49x)
  392 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (98x)
    .           		clish_command__get_name(cmd2));
  147 ( 0.00%)  }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC ATTRIBUTES
    .            *--------------------------------------------------------- */
    .           const char *clish_command__get_name(const clish_command_t * this)
    .           {
1,092 ( 0.02%)  	if (!this)
    .           		return NULL;
1,092 ( 0.02%)  	return this->name;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_text(const clish_command_t * this)
    .           {
    .           	return this->text;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_detail(const clish_command_t * this)
    .           {
    1 ( 0.00%)  	return this->detail;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_detail(clish_command_t * this, const char *detail)
    4 ( 0.00%)  {
   12 ( 0.00%)  	assert(NULL == this->detail);
   16 ( 0.00%)  	this->detail = lub_string_dup(detail);
2,047 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (4x)
    8 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_action_t *clish_command__get_action(const clish_command_t *this)
    .           {
   44 ( 0.00%)  	return this->action;
   44 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_config_t *clish_command__get_config(const clish_command_t *this)
    .           {
   22 ( 0.00%)  	return this->config;
   22 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_viewname(clish_command_t * this, const char *viewname)
    .           {
   18 ( 0.00%)  	assert(NULL == this->viewname);
   22 ( 0.00%)  	clish_command__force_viewname(this, viewname);
1,849 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewname (8x)
  985 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__force_viewname(clish_command_t * this, const char *viewname)
   45 ( 0.00%)  {
   27 ( 0.00%)  	if (this->viewname)
    .           		lub_string_free(this->viewname);
   36 ( 0.00%)  	this->viewname = lub_string_dup(viewname);
1,949 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (9x)
   36 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_viewname(const clish_command_t * this)
    .           {
    9 ( 0.00%)  	return this->viewname;
    9 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_viewid(clish_command_t * this, const char *viewid)
    .           {
    6 ( 0.00%)  	assert(NULL == this->viewid);
   10 ( 0.00%)  	clish_command__force_viewid(this, viewid);
1,136 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  455 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewid (2x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__force_viewid(clish_command_t * this, const char *viewid)
   15 ( 0.00%)  {
    9 ( 0.00%)  	if (this->viewid)
    .           		lub_string_free(this->viewid);
   12 ( 0.00%)  	this->viewid = lub_string_dup(viewid);
  734 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
   12 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_viewid(const clish_command_t * this)
    .           {
    3 ( 0.00%)  	return this->viewid;
    3 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_param_t *clish_command__get_param(const clish_command_t * this,
    .           	unsigned index)
    .           {
    .           	return clish_paramv__get_param(this->paramv, index);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_suffix(const clish_command_t * this)
    .           {
  223 ( 0.00%)  	return lub_string_suffix(this->name);
9,280 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_suffix (72x)
1,719 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void
    .           clish_command__set_escape_chars(clish_command_t * this,
    .           	const char *escape_chars)
    1 ( 0.00%)  {
    3 ( 0.00%)  	assert(!this->escape_chars);
    4 ( 0.00%)  	this->escape_chars = lub_string_dup(escape_chars);
  156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_escape_chars(const clish_command_t * this)
    .           {
    3 ( 0.00%)  	return this->escape_chars;
    3 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_regex_chars(clish_command_t *this,
    .           	const char *escape_chars)
    .           {
    .           	assert(!this->regex_chars);
    .           	this->regex_chars = lub_string_dup(escape_chars);
    .           }
-- line 332 ----------------------------------------
-- line 335 ----------------------------------------
    .           const char *clish_command__get_regex_chars(const clish_command_t *this)
    .           {
    .           	return this->regex_chars;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_args(clish_command_t * this, clish_param_t * args)
    .           {
    2 ( 0.00%)  	assert(NULL == this->args);
    2 ( 0.00%)  	this->args = args;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_param_t *clish_command__get_args(const clish_command_t * this)
    .           {
   34 ( 0.00%)  	return this->args;
   34 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned int clish_command__get_param_count(const clish_command_t * this)
    .           {
   19 ( 0.00%)  	return clish_paramv__get_count(this->paramv);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_count (4x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_paramv_t *clish_command__get_paramv(const clish_command_t * this)
    .           {
   48 ( 0.00%)  	return this->paramv;
   48 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_pview(clish_command_t * this, clish_view_t * view)
    .           {
   52 ( 0.00%)  	this->pview = view;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_t *clish_command__get_pview(const clish_command_t * this)
    .           {
    .           	return this->pview;
    .           }
    .           
-- line 376 ----------------------------------------
-- line 380 ----------------------------------------
    .           	if (!this->pview)
    .           		return 0;
    .           	return clish_view__get_depth(this->pview);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_restore_e clish_command__get_restore(const clish_command_t * this)
    .           {
   12 ( 0.00%)  	if (!this->pview)
    .           		return CLISH_RESTORE_NONE;
   10 ( 0.00%)  	return clish_view__get_restore(this->pview);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_restore (2x)
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t * clish_command__get_orig(const clish_command_t * this)
    .           {
    .           	if (this->link)
    .           		return clish_command__get_orig(this->link);
    .           	return this;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_lock(const clish_command_t * this)
    .           {
    4 ( 0.00%)  	return this->lock;
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_lock(clish_command_t * this, bool_t lock)
    .           {
   56 ( 0.00%)  	this->lock = lock;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_alias(clish_command_t * this, const char * alias)
    .           {
    .           	if (this->alias)
    .           		lub_string_free(this->alias);
    .           	this->alias = lub_string_dup(alias);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char * clish_command__get_alias(const clish_command_t * this)
    .           {
   26 ( 0.00%)  	return this->alias;
   26 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_alias_view(clish_command_t *this,
    .           	const char *alias_view)
    .           {
    .           	if (this->alias_view)
    .           		lub_string_free(this->alias_view);
    .           	this->alias_view = lub_string_dup(alias_view);
-- line 433 ----------------------------------------
-- line 448 ----------------------------------------
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_dynamic(const clish_command_t * this)
    .           {
    .           	return this->dynamic;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t * clish_command__get_cmd(const clish_command_t * this)
   12 ( 0.00%)  {
   18 ( 0.00%)  	if (!this->dynamic)
    .           		return this;
    .           	if (this->link)
    .           		return clish_command__get_cmd(this->link);
    .           	return NULL;
    6 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_interrupt(const clish_command_t * this)
    .           {
    4 ( 0.00%)  	return this->interrupt;
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_interrupt(clish_command_t * this, bool_t interrupt)
    .           {
   54 ( 0.00%)  	this->interrupt = interrupt;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_access(clish_command_t *this, const char *access)
    5 ( 0.00%)  {
    3 ( 0.00%)  	if (this->access)
    .           		lub_string_free(this->access);
    4 ( 0.00%)  	this->access = lub_string_dup(access);
  155 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_access(const clish_command_t *this)
    .           {
    .           	return this->access;
    .           }

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c
--------------------------------------------------------------------------------
Ir             

-- line 68 ----------------------------------------
    .            *---------------------------------------------------------------
    .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
    .            **************************************************************** */
    .           #include "private.h"
    .           
    .           /*--------------------------------------------------------- */
    .           lub_bintree_node_t *lub_bintree_splay(const lub_bintree_t * this,
    .           				      lub_bintree_node_t * t, const void *key)
6,414 ( 0.10%)  {
    .           	/* Simple top down splay, not requiring "key" to be in the tree t.  */
    .           	/* What it does is described above.                                 */
    .           	lub_bintree_node_t N, *leftTreeMax, *rightTreeMin, *y;
    .           	int comp;
    .           
4,074 ( 0.06%)  	if (t == NULL)
    .           		return t;
2,904 ( 0.04%)  	N.left = N.right = NULL;
2,904 ( 0.04%)  	leftTreeMax = rightTreeMin = &N;
    .           
    .           	for (;;) {
6,372 ( 0.10%)  		comp = lub_bintree_compare(this, t, key);
167,457 ( 2.55%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (1,353x)
4,455 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (139x)
1,178 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (35x)
  132 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (66x)
3,186 ( 0.05%)  		if (comp > 0) {
2,253 ( 0.03%)  			if (t->left == NULL)
    .           				break;
2,015 ( 0.03%)  			if (lub_bintree_compare(this, t->left, key) > 0) {
23,504 ( 0.36%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (326x)
1,010 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
  120 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (5x)
   68 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (34x)
  351 ( 0.01%)  				y = t->left;	/* rotate right */
  702 ( 0.01%)  				t->left = y->right;
  351 ( 0.01%)  				y->right = t;
    .           				t = y;
1,053 ( 0.02%)  				if (t->left == NULL)
    .           					break;
    .           			}
  552 ( 0.01%)  			rightTreeMin->left = t;	/* link right */
    .           			rightTreeMin = t;
  552 ( 0.01%)  			t = t->left;
  842 ( 0.01%)  		} else if (comp < 0) {
1,257 ( 0.02%)  			if (t->right == NULL)
    .           				break;
1,775 ( 0.03%)  			if (lub_bintree_compare(this, t->right, key) < 0) {
71,595 ( 1.09%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (310x)
1,011 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
  236 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (7x)
  165 ( 0.00%)  				y = t->right;	/* rotate left */
   64 ( 0.00%)  				t->right = y->left;
   32 ( 0.00%)  				y->left = t;
    .           				t = y;
  128 ( 0.00%)  				if (t->right == NULL)
    .           					break;
    .           			}
  349 ( 0.01%)  			leftTreeMax->right = t;	/* link left */
    .           			leftTreeMax = t;
1,151 ( 0.02%)  			t = t->right;
    .           		} else {
    .           			break;
    .           		}
    .           	}
  968 ( 0.01%)  	leftTreeMax->right = t->left;	/* assemble */
1,936 ( 0.03%)  	rightTreeMin->left = t->right;
1,936 ( 0.03%)  	t->left = N.right;
1,936 ( 0.03%)  	t->right = N.left;
    .           
    .           	/* return the new root */
    .           	return t;
9,627 ( 0.15%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c
--------------------------------------------------------------------------------
Ir           

-- line 32 ----------------------------------------
  .            **************************************************************** */
  .           #include "private.h"
  .           
  .           /* forward declare these functions */
  .           static lub_bintree_compare_fn compareleft;
  .           
  .           /*--------------------------------------------------------- */
  .           void *lub_bintree_findfirst(lub_bintree_t * this)
248 ( 0.00%)  {
 62 ( 0.00%)  	lub_bintree_compare_fn *client_compare = this->compareFn;
  .           
  .           	/*
  .           	 * put dummy functions in place
  .           	 * This will make the search faster and direct it to the left most
  .           	 * node
  .           	 */
124 ( 0.00%)  	this->compareFn = compareleft;
  .           
  .           	/*
  .           	 * the key doesn't matter here cos we've cobbled the compare function
  .           	 */
310 ( 0.00%)  	this->root = lub_bintree_splay(this, this->root, NULL);
3,038 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (62x)
  .           
  .           	/* restore the client functions */
 62 ( 0.00%)  	this->compareFn = client_compare;
  .           
124 ( 0.00%)  	if (NULL == this->root)
 24 ( 0.00%)  		return NULL;
  .           	else
 50 ( 0.00%)  		return lub_bintree_getclientnode(this, this->root);
248 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /*
  .            * This comparison operation always returns 1 hence will force a
  .            * search to the left most node.
  .            *
  .            * clientnode - node to compare (not used)
  .            * clientkey  - key to compare (not used)
  .            */
  .           static int compareleft(const void *clientnode, const void *clientkey)
  .           {
  .           	clientnode = clientnode;
  .           	clientkey = clientkey;
  .           	return 1;
200 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_remove.c
--------------------------------------------------------------------------------
Ir           

-- line 43 ----------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include <assert.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           void lub_bintree_remove(lub_bintree_t * this, void *clientnode)
308 ( 0.00%)  {
  .           	lub_bintree_node_t *x, *t;
  .           	lub_bintree_key_t key;
  .           	int comp;
  .           
  .           	/* get the key from the node */
132 ( 0.00%)  	this->getkeyFn(clientnode, &key);
699 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_getkey (26x)
358 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_getkey (13x)
138 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_getkey (5x)
  .           
  .           	/* bring the node in question to the root of the tree */
264 ( 0.00%)  	t = lub_bintree_splay(this, this->root, &key);
8,356 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (44x)
  .           
  .           	/* check that the node was there to remove */
176 ( 0.00%)  	comp = lub_bintree_compare(this, t, &key);
5,854 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (26x)
438 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (13x)
304 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (5x)
  .           
 88 ( 0.00%)  	assert(0 == comp);
  .           	if (0 == comp) {
132 ( 0.00%)  		if (t->left == NULL) {
 88 ( 0.00%)  			x = t->right;
  .           		} else {
  .           			x = lub_bintree_splay(this, t->left, &key);
  .           			x->right = t->right;
  .           		}
  .           		/* set the new root */
 44 ( 0.00%)  		this->root = x;
  .           
  .           		/* re-initialise the node control block for re-use */
180 ( 0.00%)  		lub_bintree_node_init(lub_bintree_getnode(this, clientnode));
855 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
215 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (43x)
  .           	}
264 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 11 ----------------------------------------
  .           #include <string.h>
  .           #include <assert.h>
  .           #include <limits.h>
  .           #include <stdio.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
108 ( 0.00%)  static char *clish_ptype_select__get_name(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 76 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
829 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
346 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (35x)
107 ( 0.00%)  	if (arg) {
140 ( 0.00%)  		size_t name_len = strlen(arg);
938 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (35x)
144 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
1,504 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
782 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (34x)
  .           		if (lbrk)
140 ( 0.00%)  			name_len = (size_t) (lbrk - arg);
144 ( 0.00%)  		result = lub_string_dupn(arg, name_len);
5,385 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (34x)
2,566 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           	return result;
110 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_select__get_value(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 75 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
150 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (15x)
 30 ( 0.00%)  	if (arg) {
 75 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
345 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (15x)
 75 ( 0.00%)  		const char *rbrk = strchr(arg, ')');
705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (15x)
  .           		const char *value = arg;
 45 ( 0.00%)  		size_t value_len = strlen(arg);
510 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (15x)
 45 ( 0.00%)  		if (lbrk) {
 15 ( 0.00%)  			value = lbrk + 1;
  .           			if (rbrk)
 60 ( 0.00%)  				value_len = (size_t) (rbrk - value);
  .           		}
 75 ( 0.00%)  		result = lub_string_dupn(value, value_len);
2,445 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (15x)
  .           	}
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype__set_range(clish_ptype_t * this)
  .           {
  .           	char tmp[80];
  .           
  .           	/* Now set up the range values */
 75 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* Nothing more to do */
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* Setup the integer range */
 12 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%d..%d",
  .           			this->u.integer.min, this->u.integer.max);
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		this->range = lub_string_dup(tmp);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* Setup the unsigned integer range */
 15 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%u..%u",
2,947 ( 0.04%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (3x)
  .           			(unsigned int)this->u.integer.min,
  .           			(unsigned int)this->u.integer.max);
  3 ( 0.00%)  		tmp[sizeof(tmp) - 1] = '\0';
 12 ( 0.00%)  		this->range = lub_string_dup(tmp);
680 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		/* Setup the selection values to the help text */
  .           		unsigned int i;
  .           
121 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items); i++) {
870 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 38 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (19x)
 68 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
8,855 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (17x)
  .           
 34 ( 0.00%)  			if (i > 0)
 73 ( 0.00%)  				lub_string_cat(&this->range, "/");
3,648 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (14x)
128 ( 0.00%)  			snprintf(tmp, sizeof(tmp), "%s", name);
8,790 ( 0.13%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (17x)
 17 ( 0.00%)  			tmp[sizeof(tmp) - 1] = '\0';
 68 ( 0.00%)  			lub_string_cat(&this->range, tmp);
5,400 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (17x)
 51 ( 0.00%)  			lub_string_free(name);
1,530 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (17x)
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_ptype_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_ptype_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
846 ( 0.01%)  	return strcmp(this->name, key);
8,330 ( 0.13%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (282x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_ptype_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 25 ( 0.00%)  {
  .           	const clish_ptype_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
100 ( 0.00%)  	strcpy((char *)key, this->name);
561 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           size_t clish_ptype_bt_offset(void)
  .           {
  .           	return offsetof(clish_ptype_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *method_names[] = {
  .           	"regexp",
  .           	"integer",
  .           	"unsignedInteger",
  .           	"select"
  .           };
-- line 137 ----------------------------------------
-- line 143 ----------------------------------------
  .           
  .           	if (method >= max_method)
  .           		return NULL;
  .           	return method_names[method];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_method_e clish_ptype_method_resolve(const char *name)
 36 ( 0.00%)  {
 10 ( 0.00%)  	clish_ptype_method_e result = CLISH_PTYPE_REGEXP;
 22 ( 0.00%)  	if (NULL != name) {
  .           		unsigned i;
 36 ( 0.00%)  		for (i = 0; i < CLISH_PTYPE_SELECT + 1; i++) {
114 ( 0.00%)  			if (0 == strcmp(name, method_names[i])) {
378 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (18x)
  .           				result = (clish_ptype_method_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
  .           		assert(i <= CLISH_PTYPE_SELECT);
  .           	}
  .           	return result;
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *preprocess_names[] = {
  .           	"none",
  .           	"toupper",
  .           	"tolower"
  .           };
  .           
-- line 173 ----------------------------------------
-- line 176 ----------------------------------------
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	return preprocess_names[preprocess];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_preprocess_e clish_ptype_preprocess_resolve(const char *name)
  .           {
 22 ( 0.00%)  	clish_ptype_preprocess_e result = CLISH_PTYPE_NONE;
 22 ( 0.00%)  	if (name) {
  .           		unsigned i;
  .           		for (i = 0; i < CLISH_PTYPE_TOLOWER + 1; i++) {
  .           			if (0 == strcmp(name, preprocess_names[i])) {
  .           				result = (clish_ptype_preprocess_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
-- line 193 ----------------------------------------
-- line 198 ----------------------------------------
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC METHODS
  .            *--------------------------------------------------------- */
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype_word_generator(clish_ptype_t * this,
  .           	lub_argv_t *matches, const char *text)
 16 ( 0.00%)  {
  .           	char *result = NULL;
  .           	unsigned i = 0;
  .           
  .           	/* Another ptypes has no completions */
  8 ( 0.00%)  	if (this->method != CLISH_PTYPE_SELECT)
  .           		return;
  .           
  .           	/* First of all simply try to validate the result */
 14 ( 0.00%)  	result = clish_ptype_validate(this, text);
3,299 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,733 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate (1x)
  4 ( 0.00%)  	if (result) {
  4 ( 0.00%)  		lub_argv_add(matches, result);
312 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add (1x)
  3 ( 0.00%)  		lub_string_free(result);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  .           		return;
  .           	}
  .           
  .           	/* Iterate possible completion */
 27 ( 0.00%)  	while ((result = clish_ptype_select__get_name(this, i++))) {
759 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (4x)
  .           		/* get the next item and check if it is a completion */
 18 ( 0.00%)  		if (result == lub_string_nocasestr(result, text))
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasestr (3x)
 15 ( 0.00%)  			lub_argv_add(matches, result);
1,257 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add (3x)
  9 ( 0.00%)  		lub_string_free(result);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
  .           	}
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_validate_or_translate(const clish_ptype_t * this,
  .           	const char *text, bool_t translate)
 45 ( 0.00%)  {
 15 ( 0.00%)  	char *result = lub_string_dup(text);
776 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 15 ( 0.00%)  	assert(this->pattern);
  .           
 25 ( 0.00%)  	switch (this->preprocess) {
  .           	/*----------------------------------------- */
  .           	case CLISH_PTYPE_NONE:
  .           		break;
  .           	/*----------------------------------------- */
  .           	case CLISH_PTYPE_TOUPPER:
  .           	{
  .           		char *p = result;
  .           		while (*p) {
-- line 246 ----------------------------------------
-- line 263 ----------------------------------------
  .           		}
  .           		break;
  .           	}
  .           	/*----------------------------------------- */
  .           	}
  .           	/*
  .           	 * now validate according the specified method 
  .           	 */
 45 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* test the regular expression against the string */
  .           		/*lint -e64 Type mismatch (arg. no. 4) */
  .           		/*
  .           		 * lint seems to equate regmatch_t[] as being of type regmatch_t !
  .           		 */
  .           		if (0 != regexec(&this->u.regexp, result, 0, NULL, 0)) {
-- line 279 ----------------------------------------
-- line 329 ----------------------------------------
  .           			unsigned int value = 0;
  .           			if ((lub_conv_atoui(result, &value, 0) < 0) ||
  .           				(value < (unsigned)this->u.integer.min) ||
  .           				(value > (unsigned)this->u.integer.max)) {
  .           				lub_string_free(result);
  .           				result = NULL;
  .           			}
  .           		} else {
  4 ( 0.00%)  			lub_string_free(result);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  1 ( 0.00%)  			result = NULL;
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		unsigned i;
 80 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items);
 32 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (16x)
 11 ( 0.00%)  			i++) {
 61 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
3,705 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (15x)
  .           			char *value = clish_ptype_select__get_value(this, i);
 75 ( 0.00%)  			int tmp = lub_string_nocasecmp(result, name);
1,000 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (15x)
 75 ( 0.00%)  			lub_string_free((BOOL_TRUE ==
1,350 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (15x)
  .           				translate) ? name : value);
 42 ( 0.00%)  			if (0 == tmp) {
 16 ( 0.00%)  				lub_string_free(result);
360 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (4x)
  .           				result = ((BOOL_TRUE ==
  .           					translate) ? value : name);
  .           				break;
  .           			} else {
 33 ( 0.00%)  				lub_string_free((BOOL_TRUE ==
990 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (11x)
  .           					translate) ? value : name);
  .           			}
  .           		}
 26 ( 0.00%)  		if (i == lub_argv__get_count(this->u.select.items)) {
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (5x)
  .           			/* failed to find a match */
  .           			lub_string_free(result);
  .           			result = NULL;
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           	return (char *)result;
 45 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_init(clish_ptype_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
  .           {
 26 ( 0.00%)  	assert(name);
 52 ( 0.00%)  	this->name = lub_string_dup(name);
2,760 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
 13 ( 0.00%)  	this->text = NULL;
 13 ( 0.00%)  	this->pattern = NULL;
 13 ( 0.00%)  	this->preprocess = preprocess;
 13 ( 0.00%)  	this->range = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 43 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
947 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (12x)
  .           
 26 ( 0.00%)  	if (pattern) {
  .           		/* set the pattern for this type */
 69 ( 0.00%)  		clish_ptype__set_pattern(this, pattern, method);
1,917,560 (29.22%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern (12x)
148,076 ( 2.26%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	} else {
  .           		/* The method is regexp by default */
  .           		this->method = CLISH_PTYPE_REGEXP;
  .           	}
  .           	
  .           	/* set the help text for this type */
 26 ( 0.00%)  	if (text)
 56 ( 0.00%)  		clish_ptype__set_text(this, text);
832 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,284 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_text (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_validate(const clish_ptype_t * this, const char *text)
  .           {
  4 ( 0.00%)  	return clish_ptype_validate_or_translate(this, text, BOOL_FALSE);
5,375 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate_or_translate (2x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_translate(const clish_ptype_t * this, const char *text)
  .           {
  6 ( 0.00%)  	return clish_ptype_validate_or_translate(this, text, BOOL_TRUE);
8,202 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate_or_translate (3x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_ptype_new(const char *name,
  .           	const char *help, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
156 ( 0.00%)  {
 52 ( 0.00%)  	clish_ptype_t *this = malloc(sizeof(clish_ptype_t));
4,666 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (13x)
  .           
 26 ( 0.00%)  	if (this)
  .           		clish_ptype_init(this, name, help, pattern, method, preprocess);
  .           	return this;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_fini(clish_ptype_t * this)
  .           {
 26 ( 0.00%)  	if (this->pattern) {
 51 ( 0.00%)  		switch (this->method) {
  .           		case CLISH_PTYPE_REGEXP:
 32 ( 0.00%)  			regfree(&this->u.regexp);
59,605 ( 0.91%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regfree (6x)
29,281 ( 0.45%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			break;
  .           		case CLISH_PTYPE_INTEGER:
  .           		case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           			break;
  .           		case CLISH_PTYPE_SELECT:
  9 ( 0.00%)  			lub_argv_delete(this->u.select.items);
2,277 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (3x)
  .           			break;
  .           		}
  .           	}
  .           
 39 ( 0.00%)  	lub_string_free(this->name);
1,170 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
 13 ( 0.00%)  	this->name = NULL;
 39 ( 0.00%)  	lub_string_free(this->text);
1,170 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
 13 ( 0.00%)  	this->text = NULL;
 39 ( 0.00%)  	lub_string_free(this->pattern);
1,199 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
 13 ( 0.00%)  	this->pattern = NULL;
 39 ( 0.00%)  	lub_string_free(this->range);
603 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (13x)
  .           	this->range = NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype_delete(clish_ptype_t * this)
 26 ( 0.00%)  {
  .           	clish_ptype_fini(this);
 39 ( 0.00%)  	free(this);
1,538 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (13x)
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_ptype__get_name(const clish_ptype_t * this)
  .           {
  .           	return (const char *)this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 467 ----------------------------------------
-- line 469 ----------------------------------------
  .           {
  .           	return (const char *)this->text;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_pattern(clish_ptype_t * this,
  .           			 const char *pattern, clish_ptype_method_e method)
 91 ( 0.00%)  {
 26 ( 0.00%)  	assert(NULL == this->pattern);
 13 ( 0.00%)  	this->method = method;
  .           
 74 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           	{
  .           		int result;
  .           
  .           		/* only the expression is allowed */
 39 ( 0.00%)  		lub_string_cat(&this->pattern, "^");
5,043 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,648 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (6x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, pattern);
3,484 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, "$");
1,814 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
  .           
  .           		/* compile the regular expression for later use */
 39 ( 0.00%)  		result = regcomp(&this->u.regexp, this->pattern,
1,846,745 (28.14%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp (6x)
141,777 ( 2.16%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			REG_NOSUB | REG_EXTENDED);
 14 ( 0.00%)  		assert(0 == result);
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* default the range to that of an integer */
  3 ( 0.00%)  		this->u.integer.min = INT_MIN;
  3 ( 0.00%)  		this->u.integer.max = INT_MAX;
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
798 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* now try and read the specified range */
 28 ( 0.00%)  		sscanf(this->pattern, "%d..%d",
2,835 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,758 ( 0.04%)  => /opt/build/glibc/glibc-2.24/stdio-common/isoc99_sscanf.c:__isoc99_sscanf (2x)
  .           			&this->u.integer.min, &this->u.integer.max);
  3 ( 0.00%)  		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* default the range to that of an unsigned integer */
  .           		this->u.integer.min = 0;
  .           		this->u.integer.max = (int)UINT_MAX;
  .           		this->pattern = lub_string_dup(pattern);
  .           		/* now try and read the specified range */
  .           		sscanf(this->pattern, "%u..%u",
  .           			(unsigned int *)&this->u.integer.min,
  .           			(unsigned int *)&this->u.integer.max);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
808 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* store a vector of item descriptors */
 29 ( 0.00%)  		this->u.select.items = lub_argv_new(this->pattern, 0);
16,031 ( 0.24%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,229 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (2x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	}
  .           	/* now set up the range details */
  .           	clish_ptype__set_range(this);
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype__set_text(clish_ptype_t * this, const char *text)
 13 ( 0.00%)  {
 39 ( 0.00%)  	assert(!this->text);
 52 ( 0.00%)  	this->text = lub_string_dup(text);
3,317 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
  .           
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_preprocess(clish_ptype_t * this,
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	assert(!this->preprocess);
  .           	this->preprocess = preprocess;
-- line 545 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_execute.c
--------------------------------------------------------------------------------
Ir          

-- line 31 ----------------------------------------
 .           {
 .           	int i;
 .           	int res = -1;
 .           	int lock_fd = -1;
 .           	struct flock lock;
 .           
 .           	if (!lock_path)
 .           		return -1;
28 ( 0.00%)  	lock_fd = open(lock_path, O_WRONLY | O_CREAT, 00644);
28 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:open (4x)
 8 ( 0.00%)  	if (-1 == lock_fd) {
 .           		fprintf(stderr, "Warning: Can't open lockfile %s.\n", lock_path);
 .           		return -1;
 .           	}
 .           #ifdef FD_CLOEXEC
56 ( 0.00%)  	fcntl(lock_fd, F_SETFD, fcntl(lock_fd, F_GETFD) | FD_CLOEXEC);
1,469 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
154 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/sysv/linux/fcntl.c:fcntl (7x)
 .           #endif
16 ( 0.00%)  	memset(&lock, 0, sizeof(lock));
12 ( 0.00%)  	lock.l_type = F_WRLCK;
 .           	lock.l_whence = SEEK_SET;
 4 ( 0.00%)  	for (i = 0; i < CLISH_LOCK_WAIT; i++) {
24 ( 0.00%)  		res = fcntl(lock_fd, F_SETLK, &lock);
88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/sysv/linux/fcntl.c:fcntl (4x)
 8 ( 0.00%)  		if (res != -1)
 .           			break;
 .           		if (EINTR == errno)
 .           			continue;
 .           		if ((EAGAIN == errno) || (EACCES == errno)) {
 .           			if (0 == i)
 .           				fprintf(stderr,
 .           					"Warning: Try to get lock. Please wait...\n");
 .           			sleep(1);
-- line 60 ----------------------------------------
-- line 74 ----------------------------------------
 .           
 .           /*-------------------------------------------------------- */
 .           static void clish_shell_unlock(int lock_fd)
 .           {
 .           	struct flock lock;
 .           
 .           	if (lock_fd == -1)
 .           		return;
20 ( 0.00%)  	memset(&lock, 0, sizeof(lock));
 8 ( 0.00%)  	lock.l_type = F_UNLCK;
 .           	lock.l_whence = SEEK_SET;
20 ( 0.00%)  	fcntl(lock_fd, F_SETLK, &lock);
88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/sysv/linux/fcntl.c:fcntl (4x)
12 ( 0.00%)  	close(lock_fd);
28 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:close (4x)
 .           }
 .           
 .           /*----------------------------------------------------------- */
 .           int clish_shell_execute(clish_context_t *context, char **out)
36 ( 0.00%)  {
16 ( 0.00%)  	clish_shell_t *this = clish_context__get_shell(context);
695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (3x)
20 ( 0.00%)  	const clish_command_t *cmd = clish_context__get_cmd(context);
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_cmd (3x)
 .           	int result = 0;
20 ( 0.00%)  	char *lock_path = clish_shell__get_lockfile(this);
697 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_pwd.c:clish_shell__get_lockfile (3x)
 .           	int lock_fd = -1;
20 ( 0.00%)  	clish_view_t *cur_view = clish_shell__get_view(this);
722 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (3x)
 8 ( 0.00%)  	unsigned int saved_wdog_timeout = this->wdog_timeout;
 .           
 8 ( 0.00%)  	assert(cmd);
 .           
 .           	/* Pre-change view if the command is from another depth/view */
 .           	{
16 ( 0.00%)  		clish_view_restore_e restore = clish_command__get_restore(cmd);
714 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
694 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_restore (3x)
 8 ( 0.00%)  		if ((CLISH_RESTORE_VIEW == restore) &&
 .           			(clish_command__get_pview(cmd) != cur_view)) {
 .           			clish_view_t *view = clish_command__get_pview(cmd);
 .           			clish_shell__set_pwd(this, NULL, view, NULL, context);
 8 ( 0.00%)  		} else if ((CLISH_RESTORE_DEPTH == restore) &&
 .           			(clish_command__get_depth(cmd) < this->depth)) {
 .           			this->depth = clish_command__get_depth(cmd);
 .           		}
 .           	}
 .           
 .           	/* Lock the lockfile */
32 ( 0.00%)  	if (lock_path && clish_command__get_lock(cmd)) {
679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_lock (3x)
 .           		lock_fd = clish_shell_lock(lock_path);
 .           		if (-1 == lock_fd) {
 .           			result = -1;
 .           			goto error; /* Can't set lock */
 .           		}
 .           	}
 .           
 .           	/* Execute ACTION */
28 ( 0.00%)  	clish_context__set_action(context, clish_command__get_action(cmd));
16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__set_action (4x)
 8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (4x)
44 ( 0.00%)  	result = clish_shell_exec_action(context, out,
20,917 ( 0.32%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
5,366 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_execute.c:clish_shell_exec_action (3x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_interrupt (3x)
 .           		clish_command__get_interrupt(cmd));
 .           
 .           	/* Call config callback */
 8 ( 0.00%)  	if (!result)
20 ( 0.00%)  		clish_shell_exec_config(context);
1,420 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
258 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_execute.c:clish_shell_exec_config (3x)
 .           
 .           	/* Call logging callback */
20 ( 0.00%)  	if (clish_shell__get_log(this) &&
16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_execute.c:clish_shell__get_log (4x)
 .           		clish_shell_check_hook(context, CLISH_SYM_TYPE_LOG)) {
 .           		char *full_line = clish_shell__get_full_line(context);
 .           		clish_shell_exec_log(context, full_line, result);
 .           		lub_string_free(full_line);
 .           	}
 .           
 .           	/* Unlock the lockfile */
 8 ( 0.00%)  	if (lock_fd != -1)
 .           		clish_shell_unlock(lock_fd);
 .           
 .           	/* Move into the new view */
 8 ( 0.00%)  	if (!result) {
40 ( 0.00%)  		char *viewname = clish_shell_expand(clish_command__get_viewname(cmd), SHELL_VAR_NONE, context);
711 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,032 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand (4x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_viewname (3x)
 8 ( 0.00%)  		if (viewname) {
 .           			/* Search for the view */
19 ( 0.00%)  			clish_view_t *view = clish_shell_find_view(this, viewname);
843 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
370 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell_find_view (2x)
 6 ( 0.00%)  			if (!view)
 .           				fprintf(stderr, "System error: Can't "
 .           					"change view to %s\n", viewname);
 9 ( 0.00%)  			lub_string_free(viewname);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 .           			/* Save the PWD */
 .           			if (view) {
16 ( 0.00%)  				char *line = clish_shell__get_line(context);
2,989 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,180 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell__get_line (2x)
38 ( 0.00%)  				clish_shell__set_pwd(this, line, view,
6,487 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
2,248 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_pwd.c:clish_shell__set_pwd (2x)
 4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_viewid (2x)
 .           					clish_command__get_viewid(cmd), context);
12 ( 0.00%)  				lub_string_free(line);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 .           			}
 .           		}
 .           	}
 .           
 .           	/* Set appropriate timeout. Workaround: Don't turn on  watchdog
 .           	on the "set watchdog <timeout>" command itself. */
12 ( 0.00%)  	if (this->wdog_timeout && saved_wdog_timeout) {
 .           		tinyrl__set_timeout(this->tinyrl, this->wdog_timeout);
 .           		this->wdog_active = BOOL_TRUE;
 .           		fprintf(stderr, "Warning: The watchdog is active. Timeout is %u "
 .           			"seconds.\nWarning: Press any key to stop watchdog.\n",
 .           			this->wdog_timeout);
 .           	} else
20 ( 0.00%)  		tinyrl__set_timeout(this->tinyrl, this->idle_timeout);
1,582 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
15 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__set_timeout (3x)
 .           
 .           error:
 .           	return result;
36 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------- */
 .           /* Execute oaction. It suppose the forked process to get
 .            * script's stdout. Then forked process write the output back
 .            * to klish.
 .            */
 .           static int clish_shell_exec_oaction(clish_hook_oaction_fn_t func,
 .           	void *context, const char *script, char **out)
-- line 186 ----------------------------------------
-- line 279 ----------------------------------------
 .           stdout_error:
 .           	close(pipe1[0]);
 .           	close(pipe1[1]);
 .           	return -1;
 .           }
 .           
 .           /*----------------------------------------------------------- */
 .           int clish_shell_exec_action(clish_context_t *context, char **out, bool_t intr)
40 ( 0.00%)  {
 .           	int result = -1;
 .           	clish_sym_t *sym;
 .           	char *script;
 .           	void *func = NULL; /* We don't know the func API at this time */
16 ( 0.00%)  	const clish_action_t *action = clish_context__get_action(context);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_action (3x)
16 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
 8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (4x)
 .           	/* Signal vars */
 .           	struct sigaction old_sigint, old_sigquit, old_sighup;
 .           	struct sigaction sa;
 .           	sigset_t old_sigs;
 .           
27 ( 0.00%)  	if (!(sym = clish_action__get_builtin(action)))
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_builtin (3x)
 2 ( 0.00%)  		return 0;
 9 ( 0.00%)  	if (shell->dryrun && !clish_sym__get_permanent(sym))
 .           		return 0;
18 ( 0.00%)  	if (!(func = clish_sym__get_func(sym))) {
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (3x)
 .           		fprintf(stderr, "Error: Default ACTION symbol is not specified.\n");
 .           		return -1;
 .           	}
35 ( 0.00%)  	script = clish_shell_expand(clish_action__get_script(action), SHELL_VAR_ACTION, context);
3,245 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
1,030 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand (2x)
 4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_script (2x)
 .           
 .           	/* Ignore and block SIGINT, SIGQUIT, SIGHUP.
 .           	 * The SIG_IGN is not a case because it will be inherited
 .           	 * while a fork(). It's necessary to ignore signals because
 .           	 * the klish itself and ACTION script share the same terminal.
 .           	 */
 3 ( 0.00%)  	sa.sa_flags = 0;
16 ( 0.00%)  	sigemptyset(&sa.sa_mask);
1,573 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
56 ( 0.00%)  => /opt/build/glibc/glibc-2.24/signal/sigempty.c:sigemptyset (2x)
 6 ( 0.00%)  	sa.sa_handler = sigignore; /* Empty signal handler */
22 ( 0.00%)  	sigaction(SIGINT, &sa, &old_sigint);
1,608 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
210 ( 0.00%)  => /opt/build/glibc/glibc-2.24/signal/../nptl/sigaction.c:sigaction (2x)
21 ( 0.00%)  	sigaction(SIGQUIT, &sa, &old_sigquit);
315 ( 0.00%)  => /opt/build/glibc/glibc-2.24/signal/../nptl/sigaction.c:sigaction (3x)
21 ( 0.00%)  	sigaction(SIGHUP, &sa, &old_sighup);
315 ( 0.00%)  => /opt/build/glibc/glibc-2.24/signal/../nptl/sigaction.c:sigaction (3x)
 .           	/* Block signals for children processes. The block state is inherited. */
 6 ( 0.00%)  	if (!intr) {
 .           		sigset_t sigs;
12 ( 0.00%)  		sigemptyset(&sigs);
84 ( 0.00%)  => /opt/build/glibc/glibc-2.24/signal/sigempty.c:sigemptyset (3x)
16 ( 0.00%)  		sigaddset(&sigs, SIGINT);
1,583 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
20 ( 0.00%)  => /opt/build/glibc/glibc-2.24/signal/sigaddset.c:sigaddset (2x)
12 ( 0.00%)  		sigaddset(&sigs, SIGQUIT);
30 ( 0.00%)  => /opt/build/glibc/glibc-2.24/signal/sigaddset.c:sigaddset (3x)
12 ( 0.00%)  		sigaddset(&sigs, SIGHUP);
30 ( 0.00%)  => /opt/build/glibc/glibc-2.24/signal/sigaddset.c:sigaddset (3x)
22 ( 0.00%)  		sigprocmask(SIG_BLOCK, &sigs, &old_sigs);
1,494 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
14 ( 0.00%)  => /opt/build/glibc/glibc-2.24/signal/../sysdeps/unix/sysv/linux/x86_64/sigprocmask.c:sigprocmask (2x)
 .           	}
 .           
 .           	/* Find out the function API */
 .           	/* CLISH_SYM_API_SIMPLE */
19 ( 0.00%)  	if (clish_sym__get_api(sym) == CLISH_SYM_API_SIMPLE) {
731 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_api (2x)
 5 ( 0.00%)  		result = ((clish_hook_action_fn_t *)func)(context, script, out);
16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/plugins/clish/sym_misc.c:clish_close (1x)
 .           
 .           	/* CLISH_SYM_API_STDOUT and output is not needed */
14 ( 0.00%)  	} else if ((clish_sym__get_api(sym) == CLISH_SYM_API_STDOUT) && (!out)) {
 4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_api (2x)
10 ( 0.00%)  		result = ((clish_hook_oaction_fn_t *)func)(context, script);
9,839 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/plugins/clish/sym_script.c:clish_script (2x)
 .           
 .           	/* CLISH_SYM_API_STDOUT and outpus is needed */
 .           	} else if (clish_sym__get_api(sym) == CLISH_SYM_API_STDOUT) {
 .           		result = clish_shell_exec_oaction((clish_hook_oaction_fn_t *)func,
 .           			context, script, out);
 .           	}
 .           
 .           	/* Restore SIGINT, SIGQUIT, SIGHUP */
 6 ( 0.00%)  	if (!intr) {
18 ( 0.00%)  		sigprocmask(SIG_SETMASK, &old_sigs, NULL);
21 ( 0.00%)  => /opt/build/glibc/glibc-2.24/signal/../sysdeps/unix/sysv/linux/x86_64/sigprocmask.c:sigprocmask (3x)
 .           		/* Is the signals delivery guaranteed here (before
 .           		   sigaction restore) for previously blocked and
 .           		   pending signals? The simple test is working well.
 .           		   I don't want to use sigtimedwait() function because
 .           		   it needs a realtime extensions. The sigpending() with
 .           		   the sleep() is not nice too. Report bug if clish will
 .           		   get the SIGINT after non-interruptable action.
 .           		*/
 .           	}
15 ( 0.00%)  	sigaction(SIGINT, &old_sigint, NULL);
198 ( 0.00%)  => /opt/build/glibc/glibc-2.24/signal/../nptl/sigaction.c:sigaction (3x)
15 ( 0.00%)  	sigaction(SIGQUIT, &old_sigquit, NULL);
198 ( 0.00%)  => /opt/build/glibc/glibc-2.24/signal/../nptl/sigaction.c:sigaction (3x)
15 ( 0.00%)  	sigaction(SIGHUP, &old_sighup, NULL);
198 ( 0.00%)  => /opt/build/glibc/glibc-2.24/signal/../nptl/sigaction.c:sigaction (3x)
 .           
 9 ( 0.00%)  	lub_string_free(script);
189 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 .           
 .           	return result;
36 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------- */
 .           void *clish_shell_check_hook(const clish_context_t *clish_context, int type)
 8 ( 0.00%)  {
 .           	clish_sym_t *sym;
 8 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(clish_context);
 8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (4x)
 .           	void *func;
 .           
12 ( 0.00%)  	if (!(sym = shell->hooks[type]))
 .           		return NULL;
12 ( 0.00%)  	if (shell->dryrun && !clish_sym__get_permanent(sym))
 .           		return NULL;
12 ( 0.00%)  	if (!(func = clish_sym__get_func(sym)))
 8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (4x)
 .           		return NULL;
 .           
 .           	return func;
 4 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------- */
 .           CLISH_HOOK_CONFIG(clish_shell_exec_config)
 8 ( 0.00%)  {
 .           	clish_hook_config_fn_t *func = NULL;
16 ( 0.00%)  	func = clish_shell_check_hook(clish_context, CLISH_SYM_TYPE_CONFIG);
679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
54 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_execute.c:clish_shell_check_hook (3x)
16 ( 0.00%)  	return func ? func(clish_context) : 0;
232 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/plugins/clish/hook_config.c:clish_hook_config (4x)
 4 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------- */
 .           CLISH_HOOK_LOG(clish_shell_exec_log)
 .           {
 .           	clish_hook_log_fn_t *func = NULL;
 .           	func = clish_shell_check_hook(clish_context, CLISH_SYM_TYPE_LOG);
 .           	return func ? func(clish_context, line, retcode) : 0;
 .           }
 .           
 .           /*----------------------------------------------------------- */
 .           char *clish_shell_mkfifo(clish_shell_t * this, char *name, size_t n)
18 ( 0.00%)  {
 .           	int res;
 .           
 4 ( 0.00%)  	if (n < 1) /* Buffer too small */
 .           		return NULL;
 .           	do {
10 ( 0.00%)  		strncpy(name, this->fifo_temp, n);
1,022 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (2x)
 2 ( 0.00%)  		name[n - 1] = '\0';
10 ( 0.00%)  		mktemp(name);
1,758 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
258 ( 0.00%)  => /opt/build/glibc/glibc-2.24/misc/mktemp.c:mktemp (1x)
 4 ( 0.00%)  		if (name[0] == '\0')
 .           			return NULL;
12 ( 0.00%)  		res = mkfifo(name, 0600);
1,481 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
25 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/posix/mkfifo.c:mkfifo (1x)
 4 ( 0.00%)  	} while ((res < 0) && (EEXIST == errno));
 .           
 .           	return name;
14 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------- */
 .           int clish_shell_rmfifo(clish_shell_t * this, const char *name)
 .           {
10 ( 0.00%)  	return unlink(name);
1,570 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 5 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:unlink (1x)
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           void clish_shell__set_log(clish_shell_t *this, bool_t log)
 .           {
 .           	assert(this);
 .           	this->log = log;
 .           }
 .           
 .           /*-------------------------------------------------------- */
 .           bool_t clish_shell__get_log(const clish_shell_t *this)
 .           {
10 ( 0.00%)  	assert(this);
 5 ( 0.00%)  	return this->log;
 5 ( 0.00%)  }
 .           
 .           /*-------------------------------------------------------- */
 .           void clish_shell__set_dryrun(clish_shell_t *this, bool_t dryrun)
 .           {
 .           	this->dryrun = dryrun;
 .           }
 .           
 .           /*-------------------------------------------------------- */
-- line 444 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c
--------------------------------------------------------------------------------
Ir           

-- line 14 ----------------------------------------
  .           #include "private.h"
  .           
  .           /*----------------------------------------------------------- */
  .           /*
  .            * search the current viewid string for a variable
  .            */
  .           void clish_shell__expand_viewid(const char *viewid, lub_bintree_t *tree,
  .           	clish_context_t *context)
 18 ( 0.00%)  {
  .           	char *expanded;
  .           	char *q;
  .           	char *saveptr = NULL;
  .           
  9 ( 0.00%)  	expanded = clish_shell_expand(viewid, SHELL_VAR_NONE, context);
114 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand (3x)
  6 ( 0.00%)  	if (!expanded)
  .           		return;
  .           
  .           	for (q = strtok_r(expanded, ";", &saveptr);
  .           		q; q = strtok_r(NULL, ";", &saveptr)) {
  .           		char *value;
  .           		clish_var_t *var;
  .           
  .           		value = strchr(q, '=');
-- line 36 ----------------------------------------
-- line 39 ----------------------------------------
  .           		*value = '\0';
  .           		value++;
  .           		/* Create var instance */
  .           		var = clish_var_new(q);
  .           		lub_bintree_insert(tree, var);
  .           		clish_var__set_value(var, value);
  .           	}
  .           	lub_string_free(expanded);
 18 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */
  .           /*
  .            * expand context dependent fixed-name variables
  .            */
  .           static char *find_context_var(const char *name, clish_context_t *this)
  .           {
 16 ( 0.00%)  	char *result = NULL;
  8 ( 0.00%)  	clish_shell_t *shell = this->shell;
  .           
 48 ( 0.00%)  	if (!lub_string_nocasecmp(name, "_width")) {
648 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (8x)
  .           		char tmp[5];
  .           		snprintf(tmp, sizeof(tmp), "%u",
  .           			tinyrl__get_width(shell->tinyrl));
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		result = strdup(tmp);
  .           
 48 ( 0.00%)  	} else if (!lub_string_nocasecmp(name, "_height")) {
648 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (8x)
  .           		char tmp[5];
  .           		snprintf(tmp, sizeof(tmp), "%u",
  .           			tinyrl__get_height(shell->tinyrl));
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		result = strdup(tmp);
  .           
 48 ( 0.00%)  	} else if (!lub_string_nocasecmp(name, "_watchdog_timeout")) {
648 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (8x)
  .           		char tmp[5];
  .           		snprintf(tmp, sizeof(tmp), "%u", shell->wdog_timeout);
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		result = strdup(tmp);
  .           
 16 ( 0.00%)  	} else if (!this->cmd) { /* The vars dependent on command */
  .           		return NULL;
  .           
  .           	} else if (!lub_string_nocasecmp(name, "_full_cmd")) {
  .           		result = lub_string_dup(clish_command__get_name(this->cmd));
  .           
  .           	} else if (!lub_string_nocasecmp(name, "_cmd")) {
  .           		result = lub_string_dup(clish_command__get_name(
  .           			clish_command__get_cmd(this->cmd)));
-- line 86 ----------------------------------------
-- line 143 ----------------------------------------
  .           		result = clish_shell__get_pwd_full(shell, depth);
  .           	}
  .           
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *find_var(const char *name, lub_bintree_t *tree, clish_context_t *context)
128 ( 0.00%)  {
 48 ( 0.00%)  	clish_var_t *var = lub_bintree_find(tree, name);
544 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (16x)
  .           	char *value;
  .           	bool_t dynamic;
  .           	char *res = NULL;
  .           
 32 ( 0.00%)  	if (!var)
 32 ( 0.00%)  		return NULL;
  .           
  .           	/* Try to get saved value for static var */
  .           	dynamic = clish_var__get_dynamic(var);
  .           	if (!dynamic) {
  .           		char *saved = clish_var__get_saved(var);
  .           		if (saved)
  .           			return lub_string_dup(saved);
  .           	}
-- line 166 ----------------------------------------
-- line 183 ----------------------------------------
  .           		res = out;
  .           	}
  .           
  .           	/* Save value for static var */
  .           	if (!dynamic && res)
  .           		clish_var__set_saved(var, res);
  .           
  .           	return res;
 96 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *find_global_var(const char *name, clish_context_t *context)
  .           {
 24 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
 16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (8x)
 32 ( 0.00%)  	return find_var(name, &shell->var_tree, context);
440 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:find_var (8x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *find_viewid_var(const char *name, clish_context_t *context)
  .           {
 32 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
 16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (8x)
 28 ( 0.00%)  	int depth = clish_shell__get_depth(shell);
665 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 28 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_depth (7x)
 16 ( 0.00%)  	if (depth < 0)
  .           		return NULL;
 64 ( 0.00%)  	return find_var(name, &shell->pwdv[depth]->viewid, context);
440 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:find_var (8x)
  .           }
  .           
  .           static char * chardiff(const char *syms, const char *minus)
  .           {
  .           	char *dst = malloc(strlen(syms) + 1);
  .           	char *p = dst;
  .           	const char *src;
  .           
-- line 215 ----------------------------------------
-- line 225 ----------------------------------------
  .           /*
  .            * return the next segment of text from the provided string
  .            * segments are delimited by variables within the string.
  .            */
  .           static char *expand_nextsegment(const char **string, const char *escape_chars,
  .           	clish_context_t *this)
  .           {
  .           	const char *p = *string;
 31 ( 0.00%)  	char *result = NULL;
  .           	size_t len = 0;
  .           
 62 ( 0.00%)  	if (!p)
  .           		return NULL;
  .           
 99 ( 0.00%)  	if (*p && (p[0] == '$') && (p[1] == '{')) {
  .           		/* start of a variable */
  .           		const char *tmp;
  8 ( 0.00%)  		p += 2;
  .           		tmp = p;
  .           
  .           		/*
  .           		 * find the end of the variable 
  .           		 */
692 ( 0.01%)  		while (*p && p++[0] != '}')
106 ( 0.00%)  			len++;
  .           
  .           		/* ignore non-terminated variables */
 16 ( 0.00%)  		if (p[-1] == '}') {
  .           			bool_t valid = BOOL_FALSE;
  .           			char *text, *q;
  .           			char *saveptr = NULL;
  .           
  .           			/* get the variable text */
 32 ( 0.00%)  			text = lub_string_dupn(tmp, len);
1,256 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (8x)
  .           			/*
  .           			 * tokenise this INTO ':' separated words
  .           			 * and either expand or duplicate into the result string.
  .           			 * Only return a result if at least 
  .           			 * of the words is an expandable variable
  .           			 */
  .           			for (q = strtok_r(text, ":", &saveptr);
  .           				q; q = strtok_r(NULL, ":", &saveptr)) {
  .           				char *var;
  .           				int mod_quote = 0; /* quote modifier */
  .           				int mod_esc = 0; /* internal escape modifier */
  .           				int mod_esc_chars = 1; /* escaping */
 10 ( 0.00%)  				int mod_esc_dec = 0; /* remove internal chars from escaping */
  .           				char *space;
  8 ( 0.00%)  				char *all_esc = NULL;
  .           
  .           				/* Search for modifiers */
108 ( 0.00%)  				while (*q && !isalpha(*q)) {
1,587 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 21 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (7x)
 12 ( 0.00%)  					if ('#' == *q) {
  .           						mod_quote = 1;
  .           						mod_esc = 1;
 12 ( 0.00%)  					} else if ('\\' == *q) {
  .           						mod_esc = 1;
 12 ( 0.00%)  					} else if ('!' == *q) {
  .           						mod_quote = 1;
  .           						mod_esc = 1;
  .           						mod_esc_chars = 0;
 12 ( 0.00%)  					} else if ('~' == *q) {
  .           						mod_esc = 1;
  .           						mod_esc_chars = 0;
  .           					/* Internal automatic variable like ${__line} */
 24 ( 0.00%)  					} else if (('_' == *q) && ('_' == *(q+1))) {
  .           						mod_esc_dec = 1;
  .           						q++;
  .           						break;
  .           					/* No escaping at all. Usefull for macros VAR */
  .           					} else if ('^' == *q) {
  .           						mod_quote = 0;
  .           						mod_esc = 0;
  .           						mod_esc_chars = 0;
  .           					} else
  .           						break;
  .           					q++;
  .           				}
  .           
  .           				/* Get clean variable value */
 44 ( 0.00%)  				var = clish_shell_expand_var(q, this);
4,400 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
6,067 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand_var (7x)
 16 ( 0.00%)  				if (!var) {
 40 ( 0.00%)  					lub_string_cat(&result, q);
2,316 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (8x)
  .           					continue;
  .           				}
 24 ( 0.00%)  				valid = BOOL_TRUE;
  .           
  .           				/* Quoting */
  .           				if (mod_quote)
  .           					space = strchr(var, ' ');
  .           				if (mod_quote && space)
  .           					lub_string_cat(&result, "\"");
  .           
  .           				/* Escape special chars */
-- line 318 ----------------------------------------
-- line 322 ----------------------------------------
  .           						all_esc = chardiff(escape_chars,
  .           							lub_string_esc_quoted);
  .           					else
  .           						all_esc = lub_string_dup(escape_chars);
  .           				}
  .           
  .           				/* Internal escaping */
  .           				if (mod_esc)
 27 ( 0.00%)  					lub_string_cat(&all_esc,
  .           						lub_string_esc_quoted);
  .           
  .           				/* Real escaping */
  .           				if (all_esc) {
  .           					char *tstr = lub_string_encode(var,
  .           						all_esc);
  .           					lub_string_free(var);
  .           					var = tstr;
-- line 338 ----------------------------------------
-- line 344 ----------------------------------------
  .           
  .           				/* Quoting */
  .           				if (mod_quote && space)
  .           					lub_string_cat(&result, "\"");
  .           
  .           				lub_string_free(var);
  .           			}
  .           
 32 ( 0.00%)  			if (!valid) {
  .           				/* not a valid variable expansion */
 24 ( 0.00%)  				lub_string_free(result);
720 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (8x)
 40 ( 0.00%)  				result = lub_string_dup("");
1,248 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (8x)
  .           			}
  .           
  .           			/* finished with the variable text */
 32 ( 0.00%)  			lub_string_free(text);
720 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (8x)
  .           		}
  .           	} else {
  .           		/* find the start of a variable */
448 ( 0.01%)  		while (*p) {
220 ( 0.00%)  			if ((p[0] == '$') && (p[1] == '{'))
  .           				break;
104 ( 0.00%)  			len++;
104 ( 0.00%)  			p++;
  .           		}
 16 ( 0.00%)  		if (len > 0)
 57 ( 0.00%)  			result = lub_string_dupn(*string, len);
1,296 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (8x)
  .           	}
  .           	/* move the string pointer on for next time... */
  .           	*string = p;
  .           
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           /*
  .            * This function builds a dynamic string based on that provided
  .            * subtituting each occurance of a "${FRED}" type variable sub-string
  .            * with the appropriate value.
  .            */
  .           char *clish_shell_expand(const char *str, clish_shell_var_e vtype, clish_context_t *context)
165 ( 0.00%)  {
 15 ( 0.00%)  	char *seg, *result = NULL;
 15 ( 0.00%)  	const char *escape_chars = NULL;
 30 ( 0.00%)  	const clish_command_t *cmd = clish_context__get_cmd(context);
 30 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_cmd (15x)
  .           
  .           	/* Escape special characters */
 30 ( 0.00%)  	if (SHELL_VAR_REGEX == vtype) {
  .           		if (cmd)
  .           			escape_chars = clish_command__get_regex_chars(cmd);
  .           		if (!escape_chars)
  .           			escape_chars = lub_string_esc_regex;
 30 ( 0.00%)  	} else if (SHELL_VAR_ACTION == vtype) {
  6 ( 0.00%)  		if (cmd)
 16 ( 0.00%)  			escape_chars = clish_command__get_escape_chars(cmd);
743 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_escape_chars (2x)
  6 ( 0.00%)  		if (!escape_chars)
 12 ( 0.00%)  			escape_chars = lub_string_esc_default;
  .           	}
  .           
  .           	/* read each segment and extend the result */
 50 ( 0.00%)  	while ((seg = expand_nextsegment(&str, escape_chars, context))) {
100 ( 0.00%)  		lub_string_cat(&result, seg);
4,266 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (16x)
 48 ( 0.00%)  		lub_string_free(seg);
1,440 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (16x)
  .           	}
  .           
 15 ( 0.00%)  	return result;
120 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_shell__get_params(clish_context_t *context)
 16 ( 0.00%)  {
  4 ( 0.00%)  	clish_pargv_t *pargv = clish_context__get_pargv(context);
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_pargv (2x)
  .           	char *line = NULL;
  .           	unsigned i, cnt;
  .           	const clish_param_t *param;
  .           	const clish_parg_t *parg;
  2 ( 0.00%)  	char *request = NULL;
  .           
  4 ( 0.00%)  	if (!pargv)
  .           		return NULL;
  .           
 14 ( 0.00%)  	cnt = clish_pargv__get_count(pargv);
697 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv__get_count (1x)
  8 ( 0.00%)  	for (i = 0; i < cnt; i++) {
  .           		param = clish_pargv__get_param(pargv, i);
  .           		if (clish_param__get_hidden(param))
  .           			continue;
  .           		parg = clish_pargv__get_parg(pargv, i);
  .           		if (request)
  2 ( 0.00%)  			lub_string_cat(&request, " ");
  .           		lub_string_cat(&request, "${!");
  .           		lub_string_cat(&request, clish_parg__get_name(parg));
  .           		lub_string_cat(&request, "}");
  .           	}
  .           
 12 ( 0.00%)  	line = clish_shell_expand(request, SHELL_VAR_NONE, context);
 66 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand (2x)
  6 ( 0.00%)  	lub_string_free(request);
 18 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (2x)
  .           
  .           	return line;
 18 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *internal_get_line(clish_context_t *context, int cmd_type)
 21 ( 0.00%)  {
  9 ( 0.00%)  	const clish_command_t *cmd = clish_context__get_cmd(context);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_cmd (3x)
 16 ( 0.00%)  	clish_pargv_t *pargv = clish_context__get_pargv(context);
679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_pargv (2x)
  3 ( 0.00%)  	char *line = NULL;
  .           	char *params = NULL;
  .           
  6 ( 0.00%)  	if (0 == cmd_type) /* __cmd */
 16 ( 0.00%)  		lub_string_cat(&line, clish_command__get_name(
667 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_cmd (2x)
  .           			clish_command__get_cmd(cmd)));
  .           	else /* __full_cmd */
 25 ( 0.00%)  		lub_string_cat(&line, clish_command__get_name(cmd));
673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
738 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (3x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (2x)
  .           
  6 ( 0.00%)  	if (!pargv)
  .           		return line;
  .           
 12 ( 0.00%)  	params = clish_shell__get_params(context);
1,463 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 89 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell__get_params (1x)
  4 ( 0.00%)  	if (params) {
  .           		lub_string_cat(&line, " ");
  .           		lub_string_cat(&line, params);
  .           	}
  6 ( 0.00%)  	lub_string_free(params);
 18 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (2x)
  .           
  3 ( 0.00%)  	return line;
 18 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_shell__get_line(clish_context_t *context)
  .           {
  6 ( 0.00%)  	return internal_get_line(context, 0); /* __cmd */
4,502 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:internal_get_line (3x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_shell__get_full_line(clish_context_t *context)
  .           {
  .           	return internal_get_line(context, 1); /* __full_cmd */
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_shell_expand_var(const char *name, clish_context_t *context)
  .           {
 28 ( 0.00%)  	return clish_shell_expand_var_ex(name, context, SHELL_EXPAND_ALL);
6,046 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand_var_ex (7x)
3,732 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           char *clish_shell_expand_var_ex(const char *name, clish_context_t *context, clish_shell_expand_e flags)
 56 ( 0.00%)  {
  .           	clish_shell_t *this;
  .           	const clish_command_t *cmd;
  .           	clish_pargv_t *pargv;
  .           	const char *tmp = NULL;
  .           	char *string = NULL;
  .           
 16 ( 0.00%)  	assert(name);
 32 ( 0.00%)  	if (!context)
  .           		return NULL;
 40 ( 0.00%)  	this = clish_context__get_shell(context);
 16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (8x)
 32 ( 0.00%)  	cmd = clish_context__get_cmd(context);
 16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_cmd (8x)
 24 ( 0.00%)  	pargv = clish_context__get_pargv(context);
 16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_pargv (8x)
  .           
  .           	/* try and substitute a parameter value */
 16 ( 0.00%)  	if (pargv && (flags & SHELL_EXPAND_PARAM)) {
  .           		const clish_parg_t *parg = clish_pargv_find_arg(pargv, name);
  .           		if (parg)
  .           			tmp = clish_parg__get_value(parg);
  .           	}
  .           
  .           	/* try and substitute the param's default */
 16 ( 0.00%)  	if (!tmp && cmd && (flags & SHELL_EXPAND_PARAM))
  .           		tmp = clish_paramv_find_default(
  .           			clish_command__get_paramv(cmd), name);
  .           
  .           	/* try and substitute a viewId variable */
 56 ( 0.00%)  	if (!tmp && this && (flags & SHELL_EXPAND_VIEW))
  .           		tmp = string = find_viewid_var(name, context);
  .           
  .           	/* try and substitute context fixed variable */
 32 ( 0.00%)  	if (!tmp && (flags & SHELL_EXPAND_CONTEXT))
  .           		tmp = string = find_context_var(name, context);
  .           
  .           	/* try and substitute a global var value */
 32 ( 0.00%)  	if (!tmp && this && (flags & SHELL_EXPAND_VAR))
  .           		tmp = string = find_global_var(name, context);
  .           
  .           	/* get the contents of an environment variable */
 48 ( 0.00%)  	if (!tmp && (flags & SHELL_EXPAND_ENV))
 36 ( 0.00%)  		tmp = getenv(name);
2,660 ( 0.04%)  => /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv (7x)
1,860 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
 24 ( 0.00%)  	if (string)
  .           		return string;
 32 ( 0.00%)  	return lub_string_dup(tmp);
 32 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (8x)
 72 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/list/list.c
--------------------------------------------------------------------------------
Ir           

-- line 3 ----------------------------------------
  .           #include <string.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           static inline void lub_list_init(lub_list_t * this,
  .           	lub_list_compare_fn compareFn)
  .           {
 10 ( 0.00%)  	this->head = NULL;
 10 ( 0.00%)  	this->tail = NULL;
 10 ( 0.00%)  	this->compareFn = compareFn;
 10 ( 0.00%)  	this->len = 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_t *lub_list_new(lub_list_compare_fn compareFn)
 20 ( 0.00%)  {
  .           	lub_list_t *this;
  .           
 34 ( 0.00%)  	this = malloc(sizeof(*this));
1,645 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,359 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (9x)
 20 ( 0.00%)  	assert(this);
  .           	lub_list_init(this, compareFn);
  .           
  .           	return this;
 20 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void lub_list_free(lub_list_t *this)
  .           {
128 ( 0.00%)  	free(this);
880 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list__get_head(lub_list_t *this)
  .           {
  .           	return this->head;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list__get_tail(lub_list_t *this)
  .           {
230 ( 0.00%)  	return this->tail;
230 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static inline void lub_list_node_init(lub_list_node_t *this,
  .           	void *data)
  .           {
 40 ( 0.00%)  	this->prev = this->next = NULL;
 20 ( 0.00%)  	this->data = data;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_node_t *lub_list_node_new(void *data)
 40 ( 0.00%)  {
  .           	lub_list_node_t *this;
  .           
 60 ( 0.00%)  	this = malloc(sizeof(*this));
4,042 ( 0.06%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (20x)
 40 ( 0.00%)  	assert(this);
  .           	lub_list_node_init(this, data);
  .           
  .           	return this;
 40 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list_iterator_init(lub_list_t *this)
  .           {
  .           	return this->head;
 66 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list_node__get_prev(lub_list_node_t *this)
  .           {
  .           	return this->prev;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 79 ----------------------------------------
-- line 92 ----------------------------------------
  .           inline lub_list_node_t *lub_list_iterator_prev(lub_list_node_t *this)
  .           {
  .           	return lub_list_node__get_prev(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void lub_list_node_free(lub_list_node_t *this)
  .           {
 40 ( 0.00%)  	free(this);
1,760 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (20x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void *lub_list_node__get_data(lub_list_node_t *this)
  .           {
 68 ( 0.00%)  	return this->data;
 68 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_node_t *lub_list_add(lub_list_t *this, void *data)
 80 ( 0.00%)  {
 84 ( 0.00%)  	lub_list_node_t *node = lub_list_node_new(data);
4,156 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_new (19x)
882 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	lub_list_node_t *iter;
  .           
 20 ( 0.00%)  	this->len++;
  .           
  .           	/* Empty list */
 60 ( 0.00%)  	if (!this->head) {
  3 ( 0.00%)  		this->head = node;
  3 ( 0.00%)  		this->tail = node;
  .           		return node;
  .           	}
  .           
  .           	/* Not sorted list. Add to the tail. */
 51 ( 0.00%)  	if (!this->compareFn) {
  .           		node->prev = this->tail;
  .           		node->next = NULL;
  .           		this->tail->next = node;
  .           		this->tail = node;
  .           		return node;
  .           	}
  .           
  .           	/* Sorted list */
 17 ( 0.00%)  	iter = this->tail;
122 ( 0.00%)  	while (iter) {
225 ( 0.00%)  		if (this->compareFn(node->data, iter->data) >= 0) {
1,374 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_compare (45x)
 30 ( 0.00%)  			node->next = iter->next;
 15 ( 0.00%)  			node->prev = iter;
 15 ( 0.00%)  			iter->next = node;
 45 ( 0.00%)  			if (node->next)
  8 ( 0.00%)  				node->next->prev = node;
  .           			break;
  .           		}
 30 ( 0.00%)  		iter = iter->prev;
  .           	}
  .           	/* Insert node into the list head */
  .           	if (!iter) {
  2 ( 0.00%)  		node->next = this->head;
  2 ( 0.00%)  		node->prev = NULL;
  2 ( 0.00%)  		this->head->prev = node;
  2 ( 0.00%)  		this->head = node;
  .           	}
  .           	if (!node->next)
  7 ( 0.00%)  		this->tail = node;
  .           
  .           	return node;
102 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void lub_list_del(lub_list_t *this, lub_list_node_t *node)
  .           {
 60 ( 0.00%)  	if (node->prev)
 20 ( 0.00%)  		node->prev->next = node->next;
  .           	else
 40 ( 0.00%)  		this->head = node->next;
 40 ( 0.00%)  	if (node->next)
 17 ( 0.00%)  		node->next->prev = node->prev;
  .           	else
  3 ( 0.00%)  		this->tail = node->prev;
  .           
 40 ( 0.00%)  	this->len--;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void lub_list_node_copy(lub_list_node_t *dst, lub_list_node_t *src)
  .           {
  .           	memcpy(dst, src, sizeof(lub_list_node_t));
  .           }
  .           
-- line 179 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c
--------------------------------------------------------------------------------
Ir              

-- line 8 ----------------------------------------
     .           bool_t lub_ctype_isdigit(char c)
     .           {
     .           	unsigned char tmp = (unsigned char)c;
     .           	return isdigit(tmp) ? BOOL_TRUE : BOOL_FALSE;
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           bool_t lub_ctype_isspace(char c)
   834 ( 0.01%)  {
     .           	unsigned char tmp = (unsigned char)c;
 2,502 ( 0.04%)  	return isspace(tmp) ? BOOL_TRUE : BOOL_FALSE;
 1,251 ( 0.02%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (417x)
   834 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char lub_ctype_tolower(char c)
34,480 ( 0.53%)  {
     .           	unsigned char tmp = (unsigned char)c;
68,964 ( 1.05%)  	return tolower(tmp);
51,717 ( 0.79%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc (17,239x)
 1,639 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
34,480 ( 0.53%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char lub_ctype_toupper(char c)
     .           {
     .           	unsigned char tmp = (unsigned char)c;
     .           	return toupper(tmp);
     .           }
     .           
-- line 34 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/xmlapi.h
--------------------------------------------------------------------------------
Ir           

-- line 124 ----------------------------------------
  .           /*
  .            * get the node name
  .            * dynamically allocate the buffer (it must be freed once you don't need it
  .            * anymore) that will contain all the content of the node.
  .            * return NULL on error.
  .            */
  .           static inline char* clish_xmlnode_get_all_name(clish_xmlnode_t *node)
  .           {
 40 ( 0.00%)  	char *name = NULL; 
120 ( 0.00%)  	unsigned int nlen = 2048; 
  .           	int result;
  .           
  .           	do { 
164 ( 0.00%)  		name = (char*)realloc(name, nlen);
9,326 ( 0.14%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (20x)
2,745 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
200 ( 0.00%)  		result = clish_xmlnode_get_name(node, name, &nlen);
12,075 ( 0.18%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (21x)
 80 ( 0.00%)  	} while (result == -E2BIG);
  .           
 80 ( 0.00%)  	if (result < 0) {
  .           		free(name);
  .           		return NULL;
  .           	}
  .           
  .           	return name;
  .           }
  .           
  .           /*
-- line 149 ----------------------------------------
-- line 163 ----------------------------------------
  .           /*
  .            * get the node content
  .            * dynamically allocate the buffer (it must be freed once you don't need it
  .            * anymore) that will contain all the content of the node.
  .            * return NULL on error.
  .            */
  .           static inline char* clish_xmlnode_get_all_content(clish_xmlnode_t *node)
  .           {
 46 ( 0.00%)  	char *content = NULL; 
 58 ( 0.00%)  	unsigned int clen = 2048; 
  .           	int result;
  .           
  .           	do { 
100 ( 0.00%)  		content = (char*)realloc(content, clen);
6,237 ( 0.10%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (21x)
129 ( 0.00%)  		result = clish_xmlnode_get_content(node, content, &clen);
2,260 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,087 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (20x)
 50 ( 0.00%)  	} while (result == -E2BIG);
  .           
 50 ( 0.00%)  	if (result < 0) {
  .           		free(content);
  .           		return NULL;
  .           	}
  .           
  .           	return content;
  .           }
  .           
  .           /*
-- line 188 ----------------------------------------

--------------------------------------------------------------------------------
The following files chosen for auto-annotation could not be found:
--------------------------------------------------------------------------------
  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h
  /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h
  /opt/build/glibc/glibc-2.24/elf/./dl-map-segments.h
  /opt/build/glibc/glibc-2.24/elf/dl-addr.c
  /opt/build/glibc/glibc-2.24/elf/dl-cache.c
  /opt/build/glibc/glibc-2.24/elf/dl-close.c
  /opt/build/glibc/glibc-2.24/elf/dl-deps.c
  /opt/build/glibc/glibc-2.24/elf/dl-error.c
  /opt/build/glibc/glibc-2.24/elf/dl-fini.c
  /opt/build/glibc/glibc-2.24/elf/dl-load.c
  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c
  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c
  /opt/build/glibc/glibc-2.24/elf/dl-misc.c
  /opt/build/glibc/glibc-2.24/elf/dl-object.c
  /opt/build/glibc/glibc-2.24/elf/dl-profstub.c
  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c
  /opt/build/glibc/glibc-2.24/elf/dl-version.c
  /opt/build/glibc/glibc-2.24/elf/do-rel.h
  /opt/build/glibc/glibc-2.24/elf/get-dynamic-info.h
  /opt/build/glibc/glibc-2.24/elf/rtld.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c
  /opt/build/glibc/glibc-2.24/iconv/gconv_simple.c
  /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S
  /opt/build/glibc/glibc-2.24/libio/fileno.c
  /opt/build/glibc/glibc-2.24/libio/fileops.c
  /opt/build/glibc/glibc-2.24/libio/genops.c
  /opt/build/glibc/glibc-2.24/libio/iofflush.c
  /opt/build/glibc/glibc-2.24/libio/iogetline.c
  /opt/build/glibc/glibc-2.24/libio/iopadn.c
  /opt/build/glibc/glibc-2.24/libio/libioP.h
  /opt/build/glibc/glibc-2.24/libio/strops.c
  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c
  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c
  /opt/build/glibc/glibc-2.24/locale/findlocale.c
  /opt/build/glibc/glibc-2.24/locale/loadarchive.c
  /opt/build/glibc/glibc-2.24/locale/loadlocale.c
  /opt/build/glibc/glibc-2.24/locale/setlocale.c
  /opt/build/glibc/glibc-2.24/malloc/malloc.c
  /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/syscall-template.S
  /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/sysv/linux/wordsize-64/mmap.c
  /opt/build/glibc/glibc-2.24/posix/regcomp.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.h
  /opt/build/glibc/glibc-2.24/setjmp/../sysdeps/x86_64/setjmp.S
  /opt/build/glibc/glibc-2.24/signal/../sysdeps/unix/sysv/linux/x86_64/sigaction.c
  /opt/build/glibc/glibc-2.24/stdio-common/../libio/libioP.h
  /opt/build/glibc/glibc-2.24/stdio-common/_itoa.c
  /opt/build/glibc/glibc-2.24/stdio-common/printf-parse.h
  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfscanf.c
  /opt/build/glibc/glibc-2.24/stdlib/../stdlib/strtol_l.c
  /opt/build/glibc/glibc-2.24/stdlib/getenv.c
  /opt/build/glibc/glibc-2.24/string/../bits/stdlib-bsearch.h
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86/cacheinfo.c
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/memchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../memcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/memcmp-sse4.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S
  /opt/build/glibc/glibc-2.24/string/strdup.c
  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h
  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c
  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c
  /opt/build/glibc/glibc-2.24/wctype/wcfuncs.c
  /usr/include/x86_64-linux-gnu/bits/string2.h

--------------------------------------------------------------------------------
Ir               
--------------------------------------------------------------------------------
976,826 (14.88%)  events annotated

--------------------------------------------------------------------------------
Profile data file '../klish-2.1.3/reports/heavy/callgrind.out.2004' (creator: callgrind-3.13.0)
--------------------------------------------------------------------------------
I1 cache: 
D1 cache: 
LL cache: 
Timerange: Basic block 0 - 1137894
Trigger: Program termination
Profiled target:  ./clish -x ../../xml-examples/clish (PID 2004, part 1)
Events recorded:  Ir
Events shown:     Ir
Event sort order: Ir
Thresholds:       99
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir                 
--------------------------------------------------------------------------------
5,085,995 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir                file:function
--------------------------------------------------------------------------------
613,421 (12.06%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
417,920 ( 8.22%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c:__gconv_transform_utf8_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
382,308 ( 7.52%)  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c:mbrtowc [/lib/x86_64-linux-gnu/libc-2.24.so]
225,902 ( 4.44%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_free [/lib/x86_64-linux-gnu/libc-2.24.so]
220,753 ( 4.34%)  ???:0x0000000000013e60 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
219,417 ( 4.31%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:do_lookup_x [/lib/x86_64-linux-gnu/ld-2.24.so]
187,324 ( 3.68%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
172,879 ( 3.40%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c:__gconv_transform_utf8_internal
154,616 ( 3.04%)  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c:btowc [/lib/x86_64-linux-gnu/libc-2.24.so]
145,295 ( 2.86%)  ???:0x000000000000f290 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
134,017 ( 2.64%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
130,916 ( 2.57%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap_iter.isra.24 [/lib/x86_64-linux-gnu/libc-2.24.so]
120,093 ( 2.36%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:_dl_lookup_symbol_x [/lib/x86_64-linux-gnu/ld-2.24.so]
108,808 ( 2.14%)  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c:__collseq_table_lookup [/lib/x86_64-linux-gnu/libc-2.24.so]
102,528 ( 2.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:strcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
 94,058 ( 1.85%)  ???:0x000000000001a2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 89,941 ( 1.77%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_consolidate [/lib/x86_64-linux-gnu/libc-2.24.so]
 76,434 ( 1.50%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 56,681 ( 1.11%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 56,567 ( 1.11%)  /opt/build/glibc/glibc-2.24/elf/dl-addr.c:_dl_addr [/lib/x86_64-linux-gnu/libc-2.24.so]
 52,519 ( 1.03%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:free [/lib/x86_64-linux-gnu/libc-2.24.so]
 47,986 ( 0.94%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen [/lib/x86_64-linux-gnu/ld-2.24.so]
 40,355 ( 0.79%)  ???:0x0000000000005130 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 40,047 ( 0.79%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h:_dl_relocate_object
 35,760 ( 0.70%)  /opt/build/glibc/glibc-2.24/elf/dl-profstub.c:_dl_mcount_wrapper_check [/lib/x86_64-linux-gnu/libc-2.24.so]
 35,751 ( 0.70%)  /opt/build/glibc/glibc-2.24/elf/dl-misc.c:_dl_name_match_p [/lib/x86_64-linux-gnu/ld-2.24.so]
 32,428 ( 0.64%)  ???:0x0000000000008190 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 32,064 ( 0.63%)  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
 29,924 ( 0.59%)  ???:0x000000000000f970 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 27,384 ( 0.54%)  ???:0x000000000000e2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 26,762 ( 0.53%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
 25,596 ( 0.50%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:check_match [/lib/x86_64-linux-gnu/ld-2.24.so]
 23,816 ( 0.47%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 23,627 ( 0.46%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 23,485 ( 0.46%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 22,857 ( 0.45%)  /opt/build/glibc/glibc-2.24/string/strdup.c:strdup [/lib/x86_64-linux-gnu/ld-2.24.so]
 21,352 ( 0.42%)  ???:0x0000000000007580 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 20,406 ( 0.40%)  /opt/build/glibc/glibc-2.24/elf/do-rel.h:_dl_relocate_object
 19,906 ( 0.39%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c:_dl_fixup [/lib/x86_64-linux-gnu/ld-2.24.so]
 19,167 ( 0.38%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 19,069 ( 0.37%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
 18,243 ( 0.36%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_chardata_handler [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 17,920 ( 0.35%)  /opt/build/glibc/glibc-2.24/iconv/gconv_simple.c:__gconv_btwoc_ascii [/lib/x86_64-linux-gnu/libc-2.24.so]
 17,608 ( 0.35%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
 16,913 ( 0.33%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_default_xsputn [/lib/x86_64-linux-gnu/libc-2.24.so]
 16,107 ( 0.32%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 16,077 ( 0.32%)  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h:mbrtowc
 15,768 ( 0.31%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter [/lib/x86_64-linux-gnu/libc-2.24.so]
 15,170 ( 0.30%)  ???:0x0000000000004c30 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 15,162 ( 0.30%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_dfa_add_node [/lib/x86_64-linux-gnu/libc-2.24.so]
 14,870 ( 0.29%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_acquire_state_context [/lib/x86_64-linux-gnu/libc-2.24.so]
 13,971 ( 0.27%)  ???:0x000000000000edb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 13,120 ( 0.26%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:postorder [/lib/x86_64-linux-gnu/libc-2.24.so]
 12,600 ( 0.25%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:preorder [/lib/x86_64-linux-gnu/libc-2.24.so]
 12,581 ( 0.25%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_merge [/lib/x86_64-linux-gnu/libc-2.24.so]
 11,942 ( 0.23%)  /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv [/lib/x86_64-linux-gnu/libc-2.24.so]
 11,167 ( 0.22%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:create_token_tree.isra.13 [/lib/x86_64-linux-gnu/libc-2.24.so]
 11,012 ( 0.22%)  /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 10,830 ( 0.21%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
 10,752 ( 0.21%)  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h:btowc
 10,439 ( 0.21%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object [/lib/x86_64-linux-gnu/ld-2.24.so]
 10,136 ( 0.20%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 10,017 ( 0.20%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  9,680 ( 0.19%)  ???:0x00000000000045c0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  9,491 ( 0.19%)  ???:0x0000000000005570 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  9,095 ( 0.18%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:_dl_map_object_deps [/lib/x86_64-linux-gnu/ld-2.24.so]
  8,917 ( 0.18%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  8,580 ( 0.17%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  8,419 ( 0.17%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_insert [/lib/x86_64-linux-gnu/libc-2.24.so]
  8,380 ( 0.16%)  ???:0x00000000000196e0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  7,650 ( 0.15%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_file_overflow@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,533 ( 0.15%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:build_wcs_buffer [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,511 ( 0.15%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  7,260 ( 0.14%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,260 ( 0.14%)  ???:align_limit_to_full_utf8_characters [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  7,099 ( 0.14%)  /opt/build/glibc/glibc-2.24/locale/loadlocale.c:_nl_intern_locale_data [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,996 ( 0.14%)  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c:vsnprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,966 ( 0.14%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:peek_token [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,860 ( 0.13%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
  6,548 ( 0.13%)  ???:0x0000000000005810 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  6,500 ( 0.13%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strchr.S:strchrnul [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,398 ( 0.13%)  ???:0x0000000000004cb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  6,016 ( 0.12%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,844 ( 0.11%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:lower_subexps [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,670 ( 0.11%)  /opt/build/glibc/glibc-2.24/libio/strops.c:_IO_str_init_static_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,611 ( 0.11%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_first [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,412 ( 0.11%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcat_sse2_unaligned
  5,296 ( 0.10%)  ???:XML_ParserFree [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  5,074 ( 0.10%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,910 ( 0.10%)  ???:0x0000000000019f90 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  4,696 ( 0.09%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,488 ( 0.09%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,486 ( 0.09%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_param [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,367 ( 0.09%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,189 ( 0.08%)  ???:0x00000000000050d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  4,128 ( 0.08%)  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc [/lib/x86_64-linux-gnu/libc-2.24.so]
  4,049 ( 0.08%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_next [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,870 ( 0.08%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_remove_at.part.4 [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,812 ( 0.07%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object_from_fd [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,749 ( 0.07%)  /opt/build/glibc/glibc-2.24/elf/dl-version.c:_dl_check_map_versions [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,663 ( 0.07%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_no_init [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,639 ( 0.07%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_old_init [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,519 ( 0.07%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:__GI_strcmp [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,418 ( 0.07%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S:__GI_memset [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,415 ( 0.07%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:peek_token_bracket [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,397 ( 0.07%)  /opt/build/glibc/glibc-2.24/stdio-common/../libio/libioP.h:vfprintf
  3,191 ( 0.06%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_ndecode [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  3,111 ( 0.06%)  /opt/build/glibc/glibc-2.24/elf/dl-cache.c:_dl_cache_libcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,028 ( 0.06%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_setb [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,962 ( 0.06%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:register_state [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,747 ( 0.05%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_tree [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,717 ( 0.05%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:open_path [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,686 ( 0.05%)  /opt/build/glibc/glibc-2.24/elf/get-dynamic-info.h:_dl_map_object_from_fd
  2,656 ( 0.05%)  ???:0x0000000000004a50 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  2,548 ( 0.05%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,544 ( 0.05%)  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,512 ( 0.05%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,362 ( 0.05%)  /opt/build/glibc/glibc-2.24/stdio-common/vfscanf.c:_IO_vfscanf [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,233 ( 0.04%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:open_verify.constprop.8 [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,194 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node_closure [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,183 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:optimize_subexps [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,176 ( 0.04%)  /opt/build/glibc/glibc-2.24/elf/dl-version.c:match_symbol [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,135 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,126 ( 0.04%)  /opt/build/glibc/glibc-2.24/libio/libioP.h:_IO_default_xsputn
  2,077 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_bracket_element.isra.11.constprop.32 [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,034 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,030 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_element_start [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,028 ( 0.04%)  /opt/build/glibc/glibc-2.24/elf/dl-object.c:_dl_new_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,927 ( 0.04%)  ???:0x0000000005686930 [???]
  1,862 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node_closure'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,844 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,810 ( 0.04%)  ???:0x000000000000f930 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,799 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,772 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,760 ( 0.03%)  ???:0x0000000000013740 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,717 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,705 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_compile_internal
  1,665 ( 0.03%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:index [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,642 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_action [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,638 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_init_copy [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,584 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:calc_eclosure_iter
  1,580 ( 0.03%)  ???:0x00000000000094a0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,550 ( 0.03%)  ???:0x0000000000019b10 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,502 ( 0.03%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,458 ( 0.03%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h:do_lookup_x
  1,390 ( 0.03%)  ???:XML_ParserCreate_MM [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,386 ( 0.03%)  ???:0x0000000000014cd0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,374 ( 0.03%)  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,362 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,301 ( 0.03%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/memcmp-sse4.S:__memcmp_sse4_1 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,296 ( 0.03%)  /opt/build/glibc/glibc-2.24/stdio-common/printf-parse.h:vfprintf
  1,280 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,268 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c:strsep [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,223 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,202 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c:__libc_memalign [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,191 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,160 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,159 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c:_dl_relocate_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,150 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,136 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_new [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,129 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:dl_main [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,127 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:clish_shell_prepare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,117 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../memcmp.S:bcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,107 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,100 ( 0.02%)  ???:0x00000000000137d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,092 ( 0.02%)  /opt/build/glibc/glibc-2.24/locale/findlocale.c:_nl_find_locale [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,084 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:mempcpy [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,080 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,073 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/memchr.S:memchr [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,067 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,041 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-cache.c:_dl_load_cache_lookup [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,039 ( 0.02%)  /opt/build/glibc/glibc-2.24/locale/loadarchive.c:_nl_load_locale_from_archive [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,008 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86/cacheinfo.c:intel_check_word [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,006 ( 0.02%)  /opt/build/glibc/glibc-2.24/setjmp/../sysdeps/x86_64/setjmp.S:__sigsetjmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,000 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
    987 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/./dl-map-segments.h:_dl_map_object_from_fd
    928 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../bits/stdlib-bsearch.h:intel_check_word
    927 ( 0.02%)  /opt/build/glibc/glibc-2.24/wctype/wcfuncs.c:iswalnum [/lib/x86_64-linux-gnu/libc-2.24.so]
    925 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    884 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    884 ( 0.02%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_insert_last [/lib/x86_64-linux-gnu/libc-2.24.so]
    866 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    856 ( 0.02%)  /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/sysv/linux/wordsize-64/mmap.c:mmap [/lib/x86_64-linux-gnu/ld-2.24.so]
    835 ( 0.02%)  /opt/build/glibc/glibc-2.24/locale/setlocale.c:setlocale [/lib/x86_64-linux-gnu/libc-2.24.so]
    820 ( 0.02%)  ???:0x0000000000006340 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    816 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    806 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:clish_shell_load_scheme [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    805 ( 0.02%)  /opt/build/glibc/glibc-2.24/stdlib/../stdlib/strtol_l.c:____strtol_l_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
    786 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    786 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy [/lib/x86_64-linux-gnu/ld-2.24.so]
    783 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h:_dl_relocate_object
    780 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:__GI_strncmp [/lib/x86_64-linux-gnu/libc-2.24.so]
    770 ( 0.02%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch [/lib/x86_64-linux-gnu/libc-2.24.so]
    768 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    768 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:openaux [/lib/x86_64-linux-gnu/ld-2.24.so]
    760 ( 0.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr [/lib/x86_64-linux-gnu/libc-2.24.so]
    750 ( 0.01%)  ???:0x0000000000004d00 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    740 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    737 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.h:parse_bracket_element.isra.11.constprop.32
    722 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/xmlapi.h:process_action
    718 ( 0.01%)  ???:XML_GetBuffer [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    701 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    701 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    700 ( 0.01%)  ???:0x0000000000004610 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    686 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:decompose_rpath [/lib/x86_64-linux-gnu/ld-2.24.so]
    680 ( 0.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S:memset [/lib/x86_64-linux-gnu/ld-2.24.so]
    673 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    672 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave [/lib/x86_64-linux-gnu/ld-2.24.so]
    661 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    650 ( 0.01%)  ???:0x000000000000b4f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    648 ( 0.01%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_init_state [/lib/x86_64-linux-gnu/libc-2.24.so]
    647 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    645 ( 0.01%)  ???:0x00000000000071d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    637 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:remove_duplicate [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
    627 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
    619 ( 0.01%)  /opt/build/glibc/glibc-2.24/libio/iogetline.c:_IO_getline_info [/lib/x86_64-linux-gnu/libc-2.24.so]

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/param/param.c
--------------------------------------------------------------------------------
Ir           

-- line 13 ----------------------------------------
  .           #include <string.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
  .           static void clish_param_init(clish_param_t *this, const char *name,
  .           	const char *text, const char *ptype_name)
  .           {
100 ( 0.00%)  	this->name = lub_string_dup(name);
5,612 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  	this->text = lub_string_dup(text);
6,039 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  	this->ptype_name = lub_string_dup(ptype_name);
6,022 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
  .           
  .           	/* Set up defaults */
 25 ( 0.00%)  	this->ptype = NULL;
 25 ( 0.00%)  	this->defval = NULL;
 25 ( 0.00%)  	this->mode = CLISH_PARAM_COMMON;
 25 ( 0.00%)  	this->optional = BOOL_FALSE;
 25 ( 0.00%)  	this->order = BOOL_FALSE;
 25 ( 0.00%)  	this->value = NULL;
 25 ( 0.00%)  	this->hidden = BOOL_FALSE;
 25 ( 0.00%)  	this->test = NULL;
 25 ( 0.00%)  	this->completion = NULL;
 25 ( 0.00%)  	this->access = NULL;
  .           
 75 ( 0.00%)  	this->paramv = clish_paramv_new();
4,795 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_new (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_param_fini(clish_param_t * this)
  .           {
  .           	/* deallocate the memory for this instance */
  .           	lub_string_free(this->defval);
  .           	lub_string_free(this->name);
-- line 45 ----------------------------------------
-- line 53 ----------------------------------------
  .           	clish_paramv_delete(this->paramv);
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           clish_param_t *clish_param_new(const char *name, const char *text,
  .           	const char *ptype_name)
200 ( 0.00%)  {
100 ( 0.00%)  	clish_param_t *this = malloc(sizeof(clish_param_t));
6,326 ( 0.12%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (25x)
  .           
 50 ( 0.00%)  	if (this)
  .           		clish_param_init(this, name, text, ptype_name);
  .           	return this;
175 ( 0.00%)  }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC METHODS
  .            *--------------------------------------------------------- */
  .           void clish_param_delete(clish_param_t * this)
  .           {
  .           	clish_param_fini(this);
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param_insert_param(clish_param_t * this, clish_param_t * param)
  .           {
 15 ( 0.00%)  	return clish_paramv_insert(this->paramv, param);
1,173 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_insert (5x)
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC ATTRIBUTES
  .            *--------------------------------------------------------- */
  .           void clish_param__set_ptype_name(clish_param_t *this, const char *ptype_name)
125 ( 0.00%)  {
 75 ( 0.00%)  	if (this->ptype_name)
 50 ( 0.00%)  		lub_string_free(this->ptype_name);
2,250 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (25x)
100 ( 0.00%)  	this->ptype_name = lub_string_dup(ptype_name);
100 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char * clish_param__get_ptype_name(const clish_param_t *this)
  .           {
 25 ( 0.00%)  	return this->ptype_name;
 25 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_param__get_name(const clish_param_t * this)
  .           {
  .           	if (!this)
  .           		return NULL;
  .           	return this->name;
  .           }
-- line 106 ----------------------------------------
-- line 121 ----------------------------------------
  .           clish_ptype_t *clish_param__get_ptype(const clish_param_t * this)
  .           {
  .           	return this->ptype;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_ptype(clish_param_t *this, clish_ptype_t *ptype)
  .           {
 50 ( 0.00%)  	this->ptype = ptype;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_default(clish_param_t * this, const char *defval)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->defval);
 20 ( 0.00%)  	this->defval = lub_string_dup(defval);
1,157 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_param__get_default(const clish_param_t * this)
  .           {
  .           	return this->defval;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_mode(clish_param_t * this, clish_param_mode_e mode)
  .           {
 10 ( 0.00%)  	assert(this);
 10 ( 0.00%)  	this->mode = mode;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_mode_e clish_param__get_mode(const clish_param_t * this)
  .           {
  .           	return this->mode;
  .           }
  .           
-- line 157 ----------------------------------------
-- line 217 ----------------------------------------
  .           	unsigned index)
  .           {
  .           	return clish_paramv__get_param(this->paramv, index);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_paramv_t *clish_param__get_paramv(clish_param_t * this)
  .           {
 24 ( 0.00%)  	return this->paramv;
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned int clish_param__get_param_count(const clish_param_t * this)
  .           {
  .           	return clish_paramv__get_count(this->paramv);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_optional(clish_param_t * this, bool_t optional)
  .           {
 48 ( 0.00%)  	this->optional = optional;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_optional(const clish_param_t * this)
  .           {
  .           	return this->optional;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_order(clish_param_t * this, bool_t order)
  .           {
 38 ( 0.00%)  	this->order = order;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_order(const clish_param_t * this)
  .           {
  .           	return this->order;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           
  .           /* paramv methods */
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_paramv_init(clish_paramv_t * this)
  .           {
 52 ( 0.00%)  	this->paramc = 0;
 52 ( 0.00%)  	this->paramv = NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_paramv_fini(clish_paramv_t * this)
  .           {
  .           	unsigned i;
  .           
  .           	/* finalize each of the parameter instances */
-- line 274 ----------------------------------------
-- line 277 ----------------------------------------
  .           	}
  .           	/* free the parameter vector */
  .           	free(this->paramv);
  .           	this->paramc = 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_paramv_t *clish_paramv_new(void)
 52 ( 0.00%)  {
156 ( 0.00%)  	clish_paramv_t *this = malloc(sizeof(clish_paramv_t));
8,884 ( 0.17%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (52x)
  .           
104 ( 0.00%)  	if (this)
  .           		clish_paramv_init(this);
  .           	return this;
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_paramv_delete(clish_paramv_t * this)
  .           {
  .           	clish_paramv_fini(this);
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_paramv_insert(clish_paramv_t * this, clish_param_t * param)
120 ( 0.00%)  {
 72 ( 0.00%)  	size_t new_size = ((this->paramc + 1) * sizeof(clish_param_t *));
  .           	clish_param_t **tmp;
  .           
  .           	/* resize the parameter vector */
 72 ( 0.00%)  	tmp = realloc(this->paramv, new_size);
4,299 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (24x)
 48 ( 0.00%)  	if (tmp) {
 24 ( 0.00%)  		this->paramv = tmp;
  .           		/* insert reference to the parameter */
 96 ( 0.00%)  		this->paramv[this->paramc++] = param;
  .           	}
 96 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_paramv_remove(clish_paramv_t *this, unsigned int index)
  .           {
  .           	size_t new_size;
  .           	clish_param_t **tmp;
  .           	clish_param_t **dst, **src;
  .           	size_t n;
-- line 321 ----------------------------------------
-- line 345 ----------------------------------------
  .           
  .           	return 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_t *clish_paramv__get_param(const clish_paramv_t * this,
  .           	unsigned int index)
  .           {
 50 ( 0.00%)  	clish_param_t *result = NULL;
  .           
148 ( 0.00%)  	if (index < this->paramc)
 96 ( 0.00%)  		result = this->paramv[index];
  .           	return result;
 50 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_t *clish_paramv_find_param(const clish_paramv_t * this,
  .           	const char *name)
  .           {
  .           	clish_param_t *res = NULL;
  .           	unsigned int i;
  .           
-- line 366 ----------------------------------------
-- line 390 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           unsigned int clish_paramv__get_count(const clish_paramv_t * this)
  .           {
  .           	return this->paramc;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_value(clish_param_t * this, const char * value)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->value);
 20 ( 0.00%)  	this->value = lub_string_dup(value);
911 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_param__get_value(const clish_param_t * this)
  .           {
  .           	if (this->value)
  .           		return this->value;
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_hidden(clish_param_t * this, bool_t hidden)
  .           {
 38 ( 0.00%)  	this->hidden = hidden;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_hidden(const clish_param_t * this)
  .           {
  .           	return this->hidden;
  .           }
  .           
-- line 422 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c
--------------------------------------------------------------------------------
Ir           

-- line 12 ----------------------------------------
  .           	"clish_script@clish",
  .           	NULL,
  .           	"clish_hook_config@clish",
  .           	"clish_hook_log@clish"
  .           };
  .           
  .           /*----------------------------------------------------------- */
  .           int clish_shell_startup(clish_shell_t *this)
  3 ( 0.00%)  {
  .           	const char *banner;
  .           	clish_context_t context;
  .           
  3 ( 0.00%)  	if (!this->startup) {
  .           		fprintf(stderr, "Error: Can't get valid STARTUP tag.\n");
  .           		return -1;
  .           	}
  .           
  .           	/* Prepare context */
  9 ( 0.00%)  	clish_context_init(&context, this);
645 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_cmd(&context, this->startup);
681 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_action(&context,
689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		clish_command__get_action(this->startup));
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (1x)
  .           
  7 ( 0.00%)  	banner = clish_command__get_detail(this->startup);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	if (banner)
 10 ( 0.00%)  		tinyrl_printf(this->tinyrl, "%s\n", banner);
18,806 ( 0.37%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Call log initialize */
  9 ( 0.00%)  	if (clish_shell__get_log(this))
657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		clish_shell_exec_log(&context, NULL, 0);
  .           	/* Call startup script */
  8 ( 0.00%)  	return clish_shell_execute(&context, NULL);
26,241 ( 0.52%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           void clish_shell__set_startup_view(clish_shell_t *this, const char *viewname)
  .           {
  .           	clish_view_t *view;
  .           
  .           	assert(this);
-- line 51 ----------------------------------------
-- line 70 ----------------------------------------
  .           	assert(this);
  .           	lub_string_free(this->default_shebang);
  .           	this->default_shebang = lub_string_dup(shebang);
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           const char * clish_shell__get_default_shebang(const clish_shell_t *this)
  .           {
  2 ( 0.00%)  	assert(this);
  1 ( 0.00%)  	return this->default_shebang;
  1 ( 0.00%)  }
  .           
  .           
  .           
  .           /*-------------------------------------------------------- */
  .           /* Resolve PTYPE for given PARAM.
  .            */
  .           static clish_ptype_t * resolve_ptype(clish_shell_t *this, clish_param_t *param)
 75 ( 0.00%)  {
  .           	clish_ptype_t *ptype = NULL;
  .           
125 ( 0.00%)  	if (!this || !param)
  .           		return NULL;
  .           
  .           	/* Resolve PARAM's PTYPE */
233 ( 0.00%)  	ptype = clish_shell_find_ptype(this, clish_param__get_ptype_name(param));
6,418 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_ptype (24x)
1,692 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype_name (24x)
 50 ( 0.00%)  	if (!ptype) {
  .           		fprintf(stderr, "Error: Unresolved PTYPE \"%s\" in PARAM \"%s\"\n",
  .           			clish_param__get_ptype_name(param),
  .           			clish_param__get_name(param));
  .           		return NULL;
  .           	}
104 ( 0.00%)  	clish_param__set_ptype(param, ptype);
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype (24x)
104 ( 0.00%)  	clish_param__set_ptype_name(param, NULL); /* Free some memory */
813 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,688 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype_name (24x)
  .           
  .           	return ptype;
125 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* Static recursive function to iterate parameters. Logically it's the
  .            * part of clish_shell_prepare() function.
  .            */
  .           static int iterate_paramv(clish_shell_t *this, clish_paramv_t *paramv,
  .           	clish_hook_access_fn_t *access_fn)
400 ( 0.01%)  {
100 ( 0.00%)  	int i = 0;
  .           	clish_param_t *param;
  .           
522 ( 0.01%)  	while((param = clish_paramv__get_param(paramv, i))) {
673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
214 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (44x)
  .           		clish_paramv_t *nested_paramv;
  .           
  .           		/* Resolve PARAM's PTYPE */
120 ( 0.00%)  		if (!resolve_ptype(this, param))
10,769 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (19x)
  .           			return -1;
  .           
  .           		/* Check access for PARAM */
 48 ( 0.00%)  		if (access_fn && clish_param__get_access(param) &&
  .           			access_fn(this, clish_param__get_access(param))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove PARAM \"%s\"\n",
  .           				clish_param__get_name(param));
  .           #endif
  .           			if (clish_paramv_remove(paramv, i) < 0) {
  .           				fprintf(stderr, "Error: Some system problem\n");
  .           				return -1;
  .           			}
  .           			clish_param_delete(param);
  .           			continue; /* Don't increment index */
  .           		}
  .           		/* Recursive iterate nested PARAMs */
 76 ( 0.00%)  		nested_paramv = clish_param__get_paramv(param);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_paramv (18x)
144 ( 0.00%)  		if (iterate_paramv(this, nested_paramv, access_fn) < 0)
2,646 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 (19x)
  .           			return -1;
 48 ( 0.00%)  		i++;
  .           	}
  .           
 50 ( 0.00%)  	return 0;
300 ( 0.01%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This function prepares schema for execution. It loads
  .            * plugins, link unresolved symbols, then iterates all the
  .            * objects and link them to each other, check access
  .            * permissions. Don't execute clish_shell_startup() without this
  .            * function.
  .            */
  .           int clish_shell_prepare(clish_shell_t *this)
  8 ( 0.00%)  {
  .           	clish_command_t *cmd;
  .           	clish_view_t *view;
  .           	clish_nspace_t *nspace;
  .           	lub_bintree_t *view_tree, *cmd_tree;
  .           	lub_list_t *nspace_tree;
  .           	lub_bintree_iterator_t cmd_iter, view_iter;
  .           	lub_list_node_t *nspace_iter;
  .           	clish_hook_access_fn_t *access_fn = NULL;
  .           	clish_paramv_t *paramv;
  .           	int i = 0;
  .           
  .           	/* Add statically linked plugins */
  4 ( 0.00%)  	while (clish_plugin_builtin_list[i].name) {
  .           		clish_plugin_t *plugin;
  .           		plugin = clish_shell_find_create_plugin(this,
  .           			clish_plugin_builtin_list[i].name);
  .           		clish_plugin_add_init(plugin,
  .           			clish_plugin_builtin_list[i].init);
  .           		clish_plugin__set_builtin_flag(plugin, BOOL_TRUE);
  .           		i++;
  .           	}
  .           
  .           	/* Add default plugin to the list of plugins */
  5 ( 0.00%)  	if (this->default_plugin) {
  9 ( 0.00%)  		clish_shell_find_create_plugin(this, "clish");
3,187 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* Default hooks */
 11 ( 0.00%)  		for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 15 ( 0.00%)  			if (this->hooks_use[i])
  .           				continue;
 20 ( 0.00%)  			if (!clish_plugin_default_hook[i])
  .           				continue;
 18 ( 0.00%)  			clish_sym__set_name(this->hooks[i],
957 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
640 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_name (2x)
  .           				clish_plugin_default_hook[i]);
  .           		}
  .           	}
  .           	/* Add default syms to unresolved table */
 10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 25 ( 0.00%)  		if (clish_sym__get_name(this->hooks[i]))
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (5x)
 17 ( 0.00%)  			lub_list_add(this->syms, this->hooks[i]);
1,171 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (3x)
  .           	}
  .           
  .           	/* Load plugins and link symbols */
  9 ( 0.00%)  	if (clish_shell_load_plugins(this) < 0)
155,815 ( 3.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  9 ( 0.00%)  	if (clish_shell_link_plugins(this) < 0)
10,280 ( 0.20%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  .           
 12 ( 0.00%)  	access_fn = clish_sym__get_func(clish_shell_get_hook(this, CLISH_SYM_TYPE_ACCESS));
648 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (1x)
  .           
  .           	/* Iterate the VIEWs */
  .           	view_tree = &this->view_tree;
  9 ( 0.00%)  	view = lub_bintree_findfirst(view_tree);
1,054 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 23 ( 0.00%)  	for (lub_bintree_iterator_init(&view_iter, view_tree, view);
951 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 20 ( 0.00%)  		view; view = lub_bintree_iterator_next(&view_iter)) {
1,901 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (5x)
  .           		/* Check access rights for the VIEW */
 10 ( 0.00%)  		if (access_fn && clish_view__get_access(view) &&
  .           			access_fn(this, clish_view__get_access(view))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove VIEW \"%s\"\n",
  .           				clish_view__get_name(view));
  .           #endif
  .           			lub_bintree_remove(view_tree, view);
  .           			clish_view_delete(view);
  .           			continue;
  .           		}
  .           
  .           		/* Iterate the NAMESPACEs */
 24 ( 0.00%)  		nspace_tree = clish_view__get_nspace_tree(view);
703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_nspace_tree (4x)
 20 ( 0.00%)  		nspace_iter = lub_list__get_head(nspace_tree);
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
 10 ( 0.00%)  		while(nspace_iter) {
  .           			clish_view_t *ref_view;
  .           			lub_list_node_t *old_nspace_iter;
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(nspace_iter);
  .           			old_nspace_iter = nspace_iter;
  .           			nspace_iter = lub_list_node__get_next(nspace_iter);
  .           			/* Resolve NAMESPACEs and remove unresolved ones */
  .           			ref_view = clish_shell_find_view(this, clish_nspace__get_view_name(nspace));
  .           			if (!ref_view) {
-- line 235 ----------------------------------------
-- line 259 ----------------------------------------
  .           				lub_list_del(nspace_tree, old_nspace_iter);
  .           				lub_list_node_free(old_nspace_iter);
  .           				clish_nspace_delete(nspace);
  .           				continue;
  .           			}
  .           		}
  .           
  .           		/* Iterate the COMMANDs */
 24 ( 0.00%)  		cmd_tree = clish_view__get_command_tree(view);
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_command_tree (4x)
 20 ( 0.00%)  		cmd = lub_bintree_findfirst(cmd_tree);
441 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (5x)
 88 ( 0.00%)  		for (lub_bintree_iterator_init(&cmd_iter, cmd_tree, cmd);
204 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_init.c:lub_bintree_iterator_init (5x)
108 ( 0.00%)  			cmd; cmd = lub_bintree_iterator_next(&cmd_iter)) {
3,573 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
24,274 ( 0.48%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (25x)
108 ( 0.00%)  			int cmd_is_alias = clish_command__get_alias(cmd)?1:0;
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_alias (25x)
  .           			clish_param_t *args = NULL;
  .           
  .           			/* Check access rights for the COMMAND */
 52 ( 0.00%)  			if (access_fn && clish_command__get_access(cmd) &&
  .           				access_fn(this, clish_command__get_access(cmd))) {
  .           #ifdef DEBUG
  .           				fprintf(stderr, "Warning: Access denied. Remove COMMAND \"%s\" from VIEW \"%s\"\n",
  .           					clish_command__get_name(cmd), clish_view__get_name(view));
  .           #endif
  .           				lub_bintree_remove(cmd_tree, cmd);
  .           				clish_command_delete(cmd);
  .           				continue;
  .           			}
  .           
  .           			/* Resolve command aliases */
 52 ( 0.00%)  			if (cmd_is_alias) {
  .           				clish_view_t *aview;
  .           				clish_command_t *cmdref;
 26 ( 0.00%)  				const char *alias_view = clish_command__get_alias_view(cmd);
  .           				if (!alias_view)
  .           					aview = clish_command__get_pview(cmd);
  .           				else
  .           					aview = clish_shell_find_view(this, alias_view);
  .           				if (!aview /* Removed or broken VIEW */
  .           					||
  .           					/* Removed or broken referenced COMMAND */
  .           					!(cmdref = clish_view_find_command(aview, clish_command__get_alias(cmd), BOOL_FALSE))
-- line 298 ----------------------------------------
-- line 328 ----------------------------------------
  .           					lub_bintree_remove(cmd_tree, cmd);
  .           					clish_command_delete(cmd);
  .           					continue;
  .           				}
  .           			}
  .           			if (cmd_is_alias) /* Don't duplicate paramv processing for aliases */
  .           				continue;
  .           			/* Iterate PARAMeters */
 56 ( 0.00%)  			paramv = clish_command__get_paramv(cmd);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (25x)
156 ( 0.00%)  			if (iterate_paramv(this, paramv, access_fn) < 0)
16,132 ( 0.32%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv (26x)
  .           				return -1;
  .           			/* Resolve PTYPE for args */
134 ( 0.00%)  			if ((args = clish_command__get_args(cmd))) {
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (25x)
  5 ( 0.00%)  				if (!resolve_ptype(this, args))
608 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (1x)
  .           					return -1;
  .           			}
  .           		}
  .           	}
  .           
  2 ( 0.00%)  	return 0;
  8 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/list/list.c
--------------------------------------------------------------------------------
Ir           

-- line 3 ----------------------------------------
  .           #include <string.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           static inline void lub_list_init(lub_list_t * this,
  .           	lub_list_compare_fn compareFn)
  .           {
 10 ( 0.00%)  	this->head = NULL;
 10 ( 0.00%)  	this->tail = NULL;
 10 ( 0.00%)  	this->compareFn = compareFn;
 10 ( 0.00%)  	this->len = 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_t *lub_list_new(lub_list_compare_fn compareFn)
 20 ( 0.00%)  {
  .           	lub_list_t *this;
  .           
 34 ( 0.00%)  	this = malloc(sizeof(*this));
1,645 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,359 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (9x)
 20 ( 0.00%)  	assert(this);
  .           	lub_list_init(this, compareFn);
  .           
  .           	return this;
 20 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void lub_list_free(lub_list_t *this)
  .           {
 48 ( 0.00%)  	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list__get_head(lub_list_t *this)
  .           {
  .           	return this->head;
  .           }
  .           
-- line 40 ----------------------------------------
-- line 43 ----------------------------------------
  .           {
  .           	return this->tail;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static inline void lub_list_node_init(lub_list_node_t *this,
  .           	void *data)
  .           {
 40 ( 0.00%)  	this->prev = this->next = NULL;
 20 ( 0.00%)  	this->data = data;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_node_t *lub_list_node_new(void *data)
 40 ( 0.00%)  {
  .           	lub_list_node_t *this;
  .           
 60 ( 0.00%)  	this = malloc(sizeof(*this));
4,042 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (20x)
 40 ( 0.00%)  	assert(this);
  .           	lub_list_node_init(this, data);
  .           
  .           	return this;
 40 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list_iterator_init(lub_list_t *this)
  .           {
  .           	return this->head;
 66 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list_node__get_prev(lub_list_node_t *this)
  .           {
  .           	return this->prev;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 79 ----------------------------------------
-- line 98 ----------------------------------------
  .           inline void lub_list_node_free(lub_list_node_t *this)
  .           {
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void *lub_list_node__get_data(lub_list_node_t *this)
  .           {
 48 ( 0.00%)  	return this->data;
 48 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_node_t *lub_list_add(lub_list_t *this, void *data)
 80 ( 0.00%)  {
 84 ( 0.00%)  	lub_list_node_t *node = lub_list_node_new(data);
4,156 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_new (19x)
882 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	lub_list_node_t *iter;
  .           
 20 ( 0.00%)  	this->len++;
  .           
  .           	/* Empty list */
 60 ( 0.00%)  	if (!this->head) {
  3 ( 0.00%)  		this->head = node;
  3 ( 0.00%)  		this->tail = node;
  .           		return node;
  .           	}
  .           
  .           	/* Not sorted list. Add to the tail. */
 51 ( 0.00%)  	if (!this->compareFn) {
  .           		node->prev = this->tail;
  .           		node->next = NULL;
  .           		this->tail->next = node;
  .           		this->tail = node;
  .           		return node;
  .           	}
  .           
  .           	/* Sorted list */
 17 ( 0.00%)  	iter = this->tail;
122 ( 0.00%)  	while (iter) {
225 ( 0.00%)  		if (this->compareFn(node->data, iter->data) >= 0) {
1,374 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_compare (45x)
 30 ( 0.00%)  			node->next = iter->next;
 15 ( 0.00%)  			node->prev = iter;
 15 ( 0.00%)  			iter->next = node;
 45 ( 0.00%)  			if (node->next)
  8 ( 0.00%)  				node->next->prev = node;
  .           			break;
  .           		}
 30 ( 0.00%)  		iter = iter->prev;
  .           	}
  .           	/* Insert node into the list head */
  .           	if (!iter) {
  2 ( 0.00%)  		node->next = this->head;
  2 ( 0.00%)  		node->prev = NULL;
  2 ( 0.00%)  		this->head->prev = node;
  2 ( 0.00%)  		this->head = node;
  .           	}
  .           	if (!node->next)
  7 ( 0.00%)  		this->tail = node;
  .           
  .           	return node;
102 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void lub_list_del(lub_list_t *this, lub_list_node_t *node)
  .           {
  .           	if (node->prev)
  .           		node->prev->next = node->next;
  .           	else
  .           		this->head = node->next;
-- line 165 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/xmlapi.h
--------------------------------------------------------------------------------
Ir           

-- line 124 ----------------------------------------
  .           /*
  .            * get the node name
  .            * dynamically allocate the buffer (it must be freed once you don't need it
  .            * anymore) that will contain all the content of the node.
  .            * return NULL on error.
  .            */
  .           static inline char* clish_xmlnode_get_all_name(clish_xmlnode_t *node)
  .           {
 40 ( 0.00%)  	char *name = NULL; 
120 ( 0.00%)  	unsigned int nlen = 2048; 
  .           	int result;
  .           
  .           	do { 
164 ( 0.00%)  		name = (char*)realloc(name, nlen);
9,326 ( 0.18%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (20x)
2,745 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
200 ( 0.00%)  		result = clish_xmlnode_get_name(node, name, &nlen);
12,075 ( 0.24%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (21x)
 80 ( 0.00%)  	} while (result == -E2BIG);
  .           
 80 ( 0.00%)  	if (result < 0) {
  .           		free(name);
  .           		return NULL;
  .           	}
  .           
  .           	return name;
  .           }
  .           
  .           /*
-- line 149 ----------------------------------------
-- line 163 ----------------------------------------
  .           /*
  .            * get the node content
  .            * dynamically allocate the buffer (it must be freed once you don't need it
  .            * anymore) that will contain all the content of the node.
  .            * return NULL on error.
  .            */
  .           static inline char* clish_xmlnode_get_all_content(clish_xmlnode_t *node)
  .           {
 46 ( 0.00%)  	char *content = NULL; 
 58 ( 0.00%)  	unsigned int clen = 2048; 
  .           	int result;
  .           
  .           	do { 
100 ( 0.00%)  		content = (char*)realloc(content, clen);
6,237 ( 0.12%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (21x)
129 ( 0.00%)  		result = clish_xmlnode_get_content(node, content, &clen);
2,260 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,087 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (20x)
 50 ( 0.00%)  	} while (result == -E2BIG);
  .           
 50 ( 0.00%)  	if (result < 0) {
  .           		free(content);
  .           		return NULL;
  .           	}
  .           
  .           	return content;
  .           }
  .           
  .           /*
-- line 188 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c
--------------------------------------------------------------------------------
Ir           

-- line 19 ----------------------------------------
  .           	unsigned size;		/* Number of slots allocated in this array */
  .           	unsigned current_index;
  .           	unsigned stifle;
  .           };
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_init(tinyrl_history_t * this, unsigned stifle)
  .           {
  1 ( 0.00%)  	this->entries = NULL;
  1 ( 0.00%)  	this->stifle = stifle;
  1 ( 0.00%)  	this->current_index = 1;
  1 ( 0.00%)  	this->length = 0;
  2 ( 0.00%)  	this->size = 0;
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_fini(tinyrl_history_t * this)
  .           {
  .           	tinyrl_history_entry_t *entry;
  .           	tinyrl_history_iterator_t iter;
  .           
-- line 39 ----------------------------------------
-- line 44 ----------------------------------------
  .           	}
  .           	/* release the list */
  .           	free(this->entries);
  .           	this->entries = NULL;
  .           }
  .           
  .           /*------------------------------------- */
  .           tinyrl_history_t *tinyrl_history_new(unsigned stifle)
  4 ( 0.00%)  {
  4 ( 0.00%)  	tinyrl_history_t *this = malloc(sizeof(tinyrl_history_t));
197 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  2 ( 0.00%)  	if (NULL != this) {
  8 ( 0.00%)  		tinyrl_history_init(this, stifle);
787 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_delete(tinyrl_history_t * this)
  .           {
  .           	tinyrl_history_fini(this);
  .           	free(this);
  .           }
  .           
  .           /*
  .           HISTORY LIST MANAGEMENT 
  .           */
  .           /*------------------------------------- */
  .           /* insert a new entry at the current offset */
  .           static void insert_entry(tinyrl_history_t * this, const char *line)
 27 ( 0.00%)  {
 22 ( 0.00%)  	tinyrl_history_entry_t *new_entry =
3,971 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry_new (8x)
1,889 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 27 ( 0.00%)  	    tinyrl_history_entry_new(line, this->current_index++);
 27 ( 0.00%)  	assert(this->length);
 27 ( 0.00%)  	assert(this->entries);
 18 ( 0.00%)  	if (new_entry) {
 18 ( 0.00%)  		this->entries[this->length - 1] = new_entry;
  .           	}
 18 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /*
  .            * This frees the specified entries from the 
  .            * entries vector. NB it doesn't perform any shuffling.
  .            * This function is inclusive of start and end
  .            */
  .           static void
-- line 89 ----------------------------------------
-- line 126 ----------------------------------------
  .           }
  .           
  .           /*------------------------------------- */
  .           /* 
  .           Search the current history buffer for the specified 
  .           line and if found remove it.
  .           */
  .           static bool_t remove_duplicate(tinyrl_history_t * this, const char *line)
 56 ( 0.00%)  {
  9 ( 0.00%)  	bool_t result = BOOL_FALSE;
  .           	unsigned i;
  .           
135 ( 0.00%)  	for (i = 0; i < this->length; i++) {
 72 ( 0.00%)  		tinyrl_history_entry_t *entry = this->entries[i];
332 ( 0.01%)  		if (0 == strcmp(line, tinyrl_history_entry__get_line(entry))) {
2,492 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (35x)
 70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry__get_line (35x)
  .           			free_entries(this, i, i);
  .           			remove_entries(this, i, i);
  .           			result = BOOL_TRUE;
  .           			break;
  .           		}
  .           	}
  .           	return result;
 33 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /* 
  .           add an entry to the end of the current array 
  .           if there is no space returns -1 else 0
  .           */
  .           static void append_entry(tinyrl_history_t * this, const char *line)
  .           {
 27 ( 0.00%)  	if (this->length < this->size) {
 18 ( 0.00%)  		this->length++;
  .           
 27 ( 0.00%)  		insert_entry(this, line);
6,044 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:insert_entry (9x)
  .           	}
  .           }
  .           
  .           /*------------------------------------- */
  .           /*
  .            add a new history entry replacing the oldest one 
  .            */
  .           static void add_n_replace(tinyrl_history_t * this, const char *line)
-- line 168 ----------------------------------------
-- line 176 ----------------------------------------
  .           	/* add the new entry */
  .           	append_entry(this, line);
  .           }
  .           
  .           /*------------------------------------- */
  .           /* add a new history entry growing the array if necessary */
  .           static void add_n_grow(tinyrl_history_t * this, const char *line)
  .           {
 18 ( 0.00%)  	if (this->size == this->length) {
  .           		/* increment the history memory by 10 entries each time we grow */
  2 ( 0.00%)  		unsigned new_size = this->size + 10;
  .           		size_t nbytes;
  .           		tinyrl_history_entry_t **new_entries;
  .           
  1 ( 0.00%)  		nbytes = sizeof(tinyrl_history_entry_t *) * new_size;
  7 ( 0.00%)  		new_entries = realloc(this->entries, nbytes);
1,694 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  		if (NULL != new_entries) {
  1 ( 0.00%)  			this->size = new_size;
  2 ( 0.00%)  			this->entries = new_entries;
  .           		}
  .           	}
 27 ( 0.00%)  	(void)remove_duplicate(this, line);
3,894 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:remove_duplicate (9x)
  .           	append_entry(this, line);
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_add(tinyrl_history_t * this, const char *line)
 45 ( 0.00%)  {
 43 ( 0.00%)  	if (this->length && (this->length == this->stifle)) {
  .           		add_n_replace(this, line);
  .           	} else {
  .           		add_n_grow(this, line);
  .           	}
 27 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           tinyrl_history_entry_t *tinyrl_history_remove(tinyrl_history_t * this,
  .           					      unsigned offset)
  .           {
  .           	tinyrl_history_entry_t *result = NULL;
  .           
  .           	if (offset < this->length) {
-- line 217 ----------------------------------------
-- line 228 ----------------------------------------
  .           	/* free all the entries */
  .           	free_entries(this, 0, this->length - 1);
  .           	/* and shuffle the array */
  .           	remove_entries(this, 0, this->length - 1);
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_stifle(tinyrl_history_t * this, unsigned stifle)
  7 ( 0.00%)  {
  .           	/* 
  .           	 * if we are stifling (i.e. non zero value) then 
  .           	 * delete the obsolete entries
  .           	 */
  2 ( 0.00%)  	if (stifle) {
  3 ( 0.00%)  		if (stifle < this->length) {
  .           			unsigned num_deletes = this->length - stifle;
  .           			/* free the entries */
  .           			free_entries(this, 0, num_deletes - 1);
  .           			/* shuffle the array shut */
  .           			remove_entries(this, 0, num_deletes - 1);
  .           		}
  1 ( 0.00%)  		this->stifle = stifle;
  .           	}
  6 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           unsigned tinyrl_history_unstifle(tinyrl_history_t * this)
  .           {
  .           	unsigned result = this->stifle;
  .           
  .           	this->stifle = 0;
  .           
-- line 259 ----------------------------------------
-- line 431 ----------------------------------------
  .           	fclose(f);
  .           
  .           	return 0;
  .           }
  .           
  .           /*-------------------------------------*/
  .           /* Restore command history from specified file */
  .           int tinyrl_history_restore(tinyrl_history_t *this, const char *fname)
  5 ( 0.00%)  {
  .           	FILE *f;
  .           	char *p;
  .           	int part_len = 300;
  .           	char *buf;
  1 ( 0.00%)  	int buf_len = part_len;
  1 ( 0.00%)  	int res = 0;
  .           
  4 ( 0.00%)  	if (!fname) {
  .           		errno = EINVAL;
  .           		return -1;
  .           	}
 10 ( 0.00%)  	if (!(f = fopen(fname, "r")))
2,134 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  1 ( 0.00%)  		return 0; /* Can't find history file */
  .           
  5 ( 0.00%)  	buf = malloc(buf_len);
429 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           	p = buf;
 95 ( 0.00%)  	while (fgets(p, buf_len - (p - buf), f)) {
8,891 ( 0.17%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,563 ( 0.03%)  => /opt/build/glibc/glibc-2.24/libio/iofgets.c:fgets (9x)
  .           		char *ptmp = NULL;
 40 ( 0.00%)  		char *el = strchr(buf, '\n');
1,527 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
184 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (8x)
 18 ( 0.00%)  		if (el) { /* The whole line was readed */
  9 ( 0.00%)  			*el = '\0';
 40 ( 0.00%)  			tinyrl_history_add(this, buf);
4,386 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
8,228 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:tinyrl_history_add (8x)
  .           			p = buf;
  9 ( 0.00%)  			continue;
  .           		}
  .           		buf_len += part_len;
  .           		ptmp = realloc(buf, buf_len);
  .           		if (!ptmp) {
  .           			res = -1;
  .           			goto end;
  .           		}
  .           		buf = ptmp;
  .           		p = buf + buf_len - part_len - 1;
  .           	}
  .           end:
  7 ( 0.00%)  	free(buf);
1,633 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  7 ( 0.00%)  	fclose(f);
2,106 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return res;
  7 ( 0.00%)  }
  .           
  .           
  .           /*-------------------------------------*/

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 11 ----------------------------------------
  .           #include <string.h>
  .           #include <assert.h>
  .           #include <limits.h>
  .           #include <stdio.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
 51 ( 0.00%)  static char *clish_ptype_select__get_name(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 38 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
829 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
160 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (16x)
 51 ( 0.00%)  	if (arg) {
 68 ( 0.00%)  		size_t name_len = strlen(arg);
326 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (17x)
 72 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
1,504 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
368 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (16x)
  .           		if (lbrk)
 68 ( 0.00%)  			name_len = (size_t) (lbrk - arg);
 72 ( 0.00%)  		result = lub_string_dupn(arg, name_len);
2,566 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,631 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (16x)
  .           	}
  .           	return result;
 51 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_select__get_value(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
  .           	const char *arg = lub_argv__get_arg(this->u.select.items, index);
  .           	if (arg) {
-- line 40 ----------------------------------------
-- line 53 ----------------------------------------
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype__set_range(clish_ptype_t * this)
  .           {
  .           	char tmp[80];
  .           
  .           	/* Now set up the range values */
 75 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* Nothing more to do */
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* Setup the integer range */
 12 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%d..%d",
  .           			this->u.integer.min, this->u.integer.max);
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		this->range = lub_string_dup(tmp);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* Setup the unsigned integer range */
 15 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%u..%u",
2,947 ( 0.06%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (3x)
  .           			(unsigned int)this->u.integer.min,
  .           			(unsigned int)this->u.integer.max);
  3 ( 0.00%)  		tmp[sizeof(tmp) - 1] = '\0';
 12 ( 0.00%)  		this->range = lub_string_dup(tmp);
680 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		/* Setup the selection values to the help text */
  .           		unsigned int i;
  .           
121 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items); i++) {
870 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 38 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (19x)
 68 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
8,855 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (17x)
  .           
 34 ( 0.00%)  			if (i > 0)
 73 ( 0.00%)  				lub_string_cat(&this->range, "/");
3,648 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (14x)
128 ( 0.00%)  			snprintf(tmp, sizeof(tmp), "%s", name);
8,790 ( 0.17%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (17x)
 17 ( 0.00%)  			tmp[sizeof(tmp) - 1] = '\0';
 68 ( 0.00%)  			lub_string_cat(&this->range, tmp);
5,400 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (17x)
 51 ( 0.00%)  			lub_string_free(name);
1,530 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (17x)
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_ptype_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_ptype_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
768 ( 0.02%)  	return strcmp(this->name, key);
7,532 ( 0.15%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (256x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_ptype_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 12 ( 0.00%)  {
  .           	const clish_ptype_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
 48 ( 0.00%)  	strcpy((char *)key, this->name);
268 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           size_t clish_ptype_bt_offset(void)
  .           {
  .           	return offsetof(clish_ptype_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *method_names[] = {
  .           	"regexp",
  .           	"integer",
  .           	"unsignedInteger",
  .           	"select"
  .           };
-- line 137 ----------------------------------------
-- line 143 ----------------------------------------
  .           
  .           	if (method >= max_method)
  .           		return NULL;
  .           	return method_names[method];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_method_e clish_ptype_method_resolve(const char *name)
 36 ( 0.00%)  {
 10 ( 0.00%)  	clish_ptype_method_e result = CLISH_PTYPE_REGEXP;
 22 ( 0.00%)  	if (NULL != name) {
  .           		unsigned i;
 36 ( 0.00%)  		for (i = 0; i < CLISH_PTYPE_SELECT + 1; i++) {
114 ( 0.00%)  			if (0 == strcmp(name, method_names[i])) {
378 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (18x)
  .           				result = (clish_ptype_method_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
  .           		assert(i <= CLISH_PTYPE_SELECT);
  .           	}
  .           	return result;
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *preprocess_names[] = {
  .           	"none",
  .           	"toupper",
  .           	"tolower"
  .           };
  .           
-- line 173 ----------------------------------------
-- line 176 ----------------------------------------
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	return preprocess_names[preprocess];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_preprocess_e clish_ptype_preprocess_resolve(const char *name)
  .           {
 22 ( 0.00%)  	clish_ptype_preprocess_e result = CLISH_PTYPE_NONE;
 22 ( 0.00%)  	if (name) {
  .           		unsigned i;
  .           		for (i = 0; i < CLISH_PTYPE_TOLOWER + 1; i++) {
  .           			if (0 == strcmp(name, preprocess_names[i])) {
  .           				result = (clish_ptype_preprocess_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
-- line 193 ----------------------------------------
-- line 372 ----------------------------------------
  .           	return (char *)result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_init(clish_ptype_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
  .           {
 26 ( 0.00%)  	assert(name);
 52 ( 0.00%)  	this->name = lub_string_dup(name);
2,760 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
 13 ( 0.00%)  	this->text = NULL;
 13 ( 0.00%)  	this->pattern = NULL;
 13 ( 0.00%)  	this->preprocess = preprocess;
 13 ( 0.00%)  	this->range = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 43 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
947 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (12x)
  .           
 26 ( 0.00%)  	if (pattern) {
  .           		/* set the pattern for this type */
 69 ( 0.00%)  		clish_ptype__set_pattern(this, pattern, method);
1,917,560 (37.70%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern (12x)
148,076 ( 2.91%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	} else {
  .           		/* The method is regexp by default */
  .           		this->method = CLISH_PTYPE_REGEXP;
  .           	}
  .           	
  .           	/* set the help text for this type */
 26 ( 0.00%)  	if (text)
 56 ( 0.00%)  		clish_ptype__set_text(this, text);
832 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,284 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_text (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_validate(const clish_ptype_t * this, const char *text)
  .           {
  .           	return clish_ptype_validate_or_translate(this, text, BOOL_FALSE);
  .           }
  .           
-- line 408 ----------------------------------------
-- line 411 ----------------------------------------
  .           {
  .           	return clish_ptype_validate_or_translate(this, text, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_ptype_new(const char *name,
  .           	const char *help, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
156 ( 0.00%)  {
 52 ( 0.00%)  	clish_ptype_t *this = malloc(sizeof(clish_ptype_t));
4,666 ( 0.09%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (13x)
  .           
 26 ( 0.00%)  	if (this)
  .           		clish_ptype_init(this, name, help, pattern, method, preprocess);
  .           	return this;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_fini(clish_ptype_t * this)
  .           {
  .           	if (this->pattern) {
  .           		switch (this->method) {
  .           		case CLISH_PTYPE_REGEXP:
  .           			regfree(&this->u.regexp);
-- line 433 ----------------------------------------
-- line 469 ----------------------------------------
  .           {
  .           	return (const char *)this->text;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_pattern(clish_ptype_t * this,
  .           			 const char *pattern, clish_ptype_method_e method)
 91 ( 0.00%)  {
 26 ( 0.00%)  	assert(NULL == this->pattern);
 13 ( 0.00%)  	this->method = method;
  .           
 74 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           	{
  .           		int result;
  .           
  .           		/* only the expression is allowed */
 39 ( 0.00%)  		lub_string_cat(&this->pattern, "^");
5,043 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,648 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (6x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, pattern);
3,484 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, "$");
1,814 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
  .           
  .           		/* compile the regular expression for later use */
 39 ( 0.00%)  		result = regcomp(&this->u.regexp, this->pattern,
1,846,745 (36.31%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp (6x)
141,777 ( 2.79%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			REG_NOSUB | REG_EXTENDED);
 14 ( 0.00%)  		assert(0 == result);
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* default the range to that of an integer */
  3 ( 0.00%)  		this->u.integer.min = INT_MIN;
  3 ( 0.00%)  		this->u.integer.max = INT_MAX;
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
798 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* now try and read the specified range */
 28 ( 0.00%)  		sscanf(this->pattern, "%d..%d",
2,835 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,758 ( 0.05%)  => /opt/build/glibc/glibc-2.24/stdio-common/isoc99_sscanf.c:__isoc99_sscanf (2x)
  .           			&this->u.integer.min, &this->u.integer.max);
  3 ( 0.00%)  		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* default the range to that of an unsigned integer */
  .           		this->u.integer.min = 0;
  .           		this->u.integer.max = (int)UINT_MAX;
  .           		this->pattern = lub_string_dup(pattern);
  .           		/* now try and read the specified range */
  .           		sscanf(this->pattern, "%u..%u",
  .           			(unsigned int *)&this->u.integer.min,
  .           			(unsigned int *)&this->u.integer.max);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
808 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* store a vector of item descriptors */
 29 ( 0.00%)  		this->u.select.items = lub_argv_new(this->pattern, 0);
16,031 ( 0.32%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,229 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (2x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	}
  .           	/* now set up the range details */
  .           	clish_ptype__set_range(this);
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype__set_text(clish_ptype_t * this, const char *text)
 13 ( 0.00%)  {
 39 ( 0.00%)  	assert(!this->text);
 52 ( 0.00%)  	this->text = lub_string_dup(text);
3,317 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
  .           
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_preprocess(clish_ptype_t * this,
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	assert(!this->preprocess);
  .           	this->preprocess = preprocess;
-- line 545 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c
--------------------------------------------------------------------------------
Ir           

-- line 606 ----------------------------------------
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           static void tinyrl_init(tinyrl_t * this, FILE * istream, FILE * ostream,
  .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
  .           {
  .           	int i;
  .           
512 ( 0.01%)  	for (i = 0; i < NUM_HANDLERS; i++) {
512 ( 0.01%)  		this->handlers[i] = tinyrl_key_default;
  .           	}
  .           	/* Default handlers */
  2 ( 0.00%)  	this->handlers[KEY_CR] = tinyrl_key_crlf;
  1 ( 0.00%)  	this->handlers[KEY_LF] = tinyrl_key_crlf;
  2 ( 0.00%)  	this->handlers[KEY_ETX] = tinyrl_key_interrupt;
  2 ( 0.00%)  	this->handlers[KEY_DEL] = tinyrl_key_backspace;
  1 ( 0.00%)  	this->handlers[KEY_BS] = tinyrl_key_backspace;
  2 ( 0.00%)  	this->handlers[KEY_EOT] = tinyrl_key_delete;
  2 ( 0.00%)  	this->handlers[KEY_FF] = tinyrl_key_clear_screen;
  2 ( 0.00%)  	this->handlers[KEY_NAK] = tinyrl_key_erase_line;
  2 ( 0.00%)  	this->handlers[KEY_SOH] = tinyrl_key_start_of_line;
  2 ( 0.00%)  	this->handlers[KEY_ENQ] = tinyrl_key_end_of_line;
  2 ( 0.00%)  	this->handlers[KEY_VT] = tinyrl_key_kill;
  2 ( 0.00%)  	this->handlers[KEY_EM] = tinyrl_key_yank;
  2 ( 0.00%)  	this->handlers[KEY_HT] = tinyrl_key_tab;
  2 ( 0.00%)  	this->handlers[KEY_ETB] = tinyrl_key_backword;
  .           
  1 ( 0.00%)  	this->line = NULL;
  1 ( 0.00%)  	this->max_line_length = 0;
  1 ( 0.00%)  	this->prompt = NULL;
  1 ( 0.00%)  	this->prompt_size = 0;
  1 ( 0.00%)  	this->buffer = NULL;
  1 ( 0.00%)  	this->buffer_size = 0;
  1 ( 0.00%)  	this->done = BOOL_FALSE;
  1 ( 0.00%)  	this->completion_over = BOOL_FALSE;
  1 ( 0.00%)  	this->point = 0;
  1 ( 0.00%)  	this->end = 0;
  1 ( 0.00%)  	this->attempted_completion_function = complete_fn;
  2 ( 0.00%)  	this->timeout_fn = tinyrl_timeout_default;
  1 ( 0.00%)  	this->keypress_fn = NULL;
  1 ( 0.00%)  	this->hotkey_fn = NULL;
  1 ( 0.00%)  	this->state = 0;
  1 ( 0.00%)  	this->kill_string = NULL;
  1 ( 0.00%)  	this->echo_char = '\0';
  1 ( 0.00%)  	this->echo_enabled = BOOL_TRUE;
  1 ( 0.00%)  	this->last_buffer = NULL;
  1 ( 0.00%)  	this->last_point = 0;
  1 ( 0.00%)  	this->last_line_size = 0;
  1 ( 0.00%)  	this->utf8 = BOOL_FALSE;
  .           
  .           	/* create the vt100 terminal */
  9 ( 0.00%)  	this->term = tinyrl_vt100_new(NULL, ostream);
917 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	tinyrl__set_istream(this, istream);
1,547 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	this->last_width = tinyrl_vt100__get_width(this->term);
3,714 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* create the history */
  8 ( 0.00%)  	this->history = tinyrl_history_new(stifle);
1,742 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           int tinyrl_printf(const tinyrl_t * this, const char *fmt, ...)
  7 ( 0.00%)  {
  .           	va_list args;
  .           	int len;
  .           
  6 ( 0.00%)  	va_start(args, fmt);
  8 ( 0.00%)  	len = tinyrl_vt100_vprintf(this->term, fmt, args);
18,066 ( 0.36%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	va_end(args);
  .           
  .           	return len;
  2 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl_delete(tinyrl_t * this)
  .           {
  .           	assert(this);
  .           	if (this) {
  .           		/* let the object tidy itself up */
  .           		tinyrl_fini(this);
-- line 684 ----------------------------------------
-- line 804 ----------------------------------------
  .           	this->last_point = this->point;
  .           	this->last_width = width;
  .           	this->last_line_size = line_size;
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           tinyrl_t *tinyrl_new(FILE * istream, FILE * ostream,
  .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
  9 ( 0.00%)  {
  .           	tinyrl_t *this = NULL;
  .           
  8 ( 0.00%)  	this = malloc(sizeof(tinyrl_t));
1,783 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  	if (this)
  .           		tinyrl_init(this, istream, ostream, stifle, complete_fn);
  .           
  .           	return this;
  7 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------------------- */
  .           static char *internal_insertline(tinyrl_t * this, char *buffer)
  .           {
  .           	char *p;
  .           	char *s = buffer;
  .           
  .           	/* strip any spurious '\r' or '\n' */
-- line 828 ----------------------------------------
-- line 1209 ----------------------------------------
  .           		this->end = start;
  .           	/* put a terminator at the end of the buffer */
  .           	this->buffer[this->end] = '\0';
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           bool_t tinyrl_bind_key(tinyrl_t * this, int key, tinyrl_key_func_t * fn)
  .           {
  4 ( 0.00%)  	bool_t result = BOOL_FALSE;
  .           
  8 ( 0.00%)  	if ((key >= 0) && (key < 256)) {
  .           		/* set the key handling function */
  8 ( 0.00%)  		this->handlers[key] = fn;
  4 ( 0.00%)  		result = BOOL_TRUE;
  .           	}
  .           
  .           	return result;
  4 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /*
  .            * Returns an array of strings which is a list of completions for text.
  .            * If there are no completions, returns NULL. The first entry in the
  .            * returned array is the substitution for text. The remaining entries
  .            * are the possible completions. The array is terminated with a NULL pointer.
  .            *
-- line 1234 ----------------------------------------
-- line 1496 ----------------------------------------
  .           void tinyrl_disable_echo(tinyrl_t * this, char echo_char)
  .           {
  .           	this->echo_enabled = BOOL_FALSE;
  .           	this->echo_char = echo_char;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void tinyrl__set_istream(tinyrl_t * this, FILE * istream)
 10 ( 0.00%)  {
 10 ( 0.00%)  	tinyrl_vt100__set_istream(this->term, istream);
785 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__set_istream (1x)
  4 ( 0.00%)  	if (istream) {
  .           		int fd;
 14 ( 0.00%)  		this->isatty = isatty(fileno(istream)) ? BOOL_TRUE : BOOL_FALSE;
1,511 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
  .           		/* Save terminal settings to restore on exit */
  3 ( 0.00%)  		fd = fileno(istream);
  6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
  8 ( 0.00%)  		tcgetattr(fd, &this->default_termios);
1,590 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	} else
  1 ( 0.00%)  		this->isatty = BOOL_FALSE;
  7 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           bool_t tinyrl__get_isatty(const tinyrl_t * this)
  .           {
  .           	return this->isatty;
  .           }
  .           
  .           /*-------------------------------------------------------- */
-- line 1522 ----------------------------------------
-- line 1557 ----------------------------------------
  .           bool_t tinyrl__get_utf8(const tinyrl_t * this)
  .           {
  .           	return this->utf8;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_utf8(tinyrl_t * this, bool_t utf8)
  .           {
  2 ( 0.00%)  	this->utf8 = utf8;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_timeout(tinyrl_t *this, int timeout)
  .           {
  .           	tinyrl_vt100__set_timeout(this->term, timeout);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_timeout_fn(tinyrl_t *this,
  .           	tinyrl_timeout_fn_t *fn)
  .           {
  2 ( 0.00%)  	this->timeout_fn = fn;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_keypress_fn(tinyrl_t *this,
  .           	tinyrl_keypress_fn_t *fn)
  .           {
  2 ( 0.00%)  	this->keypress_fn = fn;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void tinyrl__set_hotkey_fn(tinyrl_t *this,
  .           	tinyrl_key_func_t *fn)
  .           {
  2 ( 0.00%)  	this->hotkey_fn = fn;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           bool_t tinyrl_is_quoting(const tinyrl_t * this)
  .           {
  .           	bool_t result = BOOL_FALSE;
  .           	/* count the quotes upto the current insertion point */
  .           	unsigned int i = 0;
-- line 1600 ----------------------------------------
-- line 1641 ----------------------------------------
  .           int tinyrl__save_history(const tinyrl_t *this, const char *fname)
  .           {
  .           	return tinyrl_history_save(this->history, fname);
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           int tinyrl__restore_history(tinyrl_t *this, const char *fname)
  .           {
  7 ( 0.00%)  	return tinyrl_history_restore(this->history, fname);
32,091 ( 0.63%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           void tinyrl__stifle_history(tinyrl_t *this, unsigned int stifle)
  .           {
  7 ( 0.00%)  	tinyrl_history_stifle(this->history, stifle);
770 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/command/command.c
--------------------------------------------------------------------------------
Ir           

-- line 15 ----------------------------------------
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
  .           static void
  .           clish_command_init(clish_command_t *this, const char *name, const char *text)
  .           {
  .           	/* initialise the node part */
108 ( 0.00%)  	this->name = lub_string_dup(name);
5,722 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
108 ( 0.00%)  	this->text = lub_string_dup(text);
5,797 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
  .           
  .           	/* Be a good binary tree citizen */
 81 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
135 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (27x)
  .           
  .           	/* set up defaults */
 27 ( 0.00%)  	this->link = NULL;
 27 ( 0.00%)  	this->alias = NULL;
 27 ( 0.00%)  	this->alias_view = NULL;
 85 ( 0.00%)  	this->paramv = clish_paramv_new();
4,421 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_new (26x)
801 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 27 ( 0.00%)  	this->viewid = NULL;
 27 ( 0.00%)  	this->viewname = NULL;
 85 ( 0.00%)  	this->action = clish_action_new();
4,443 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action_new (26x)
802 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 85 ( 0.00%)  	this->config = clish_config_new();
5,589 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config_new (26x)
808 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 27 ( 0.00%)  	this->detail = NULL;
 27 ( 0.00%)  	this->escape_chars = NULL;
 27 ( 0.00%)  	this->regex_chars = NULL;
 27 ( 0.00%)  	this->args = NULL;
 27 ( 0.00%)  	this->pview = NULL;
 27 ( 0.00%)  	this->lock = BOOL_TRUE;
 27 ( 0.00%)  	this->interrupt = BOOL_FALSE;
 27 ( 0.00%)  	this->dynamic = BOOL_FALSE;
 27 ( 0.00%)  	this->access = NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_command_fini(clish_command_t * this)
  .           {
  .           	lub_string_free(this->name);
  .           	lub_string_free(this->text);
  .           
-- line 54 ----------------------------------------
-- line 74 ----------------------------------------
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           size_t clish_command_bt_offset(void)
  .           {
  .           	return offsetof(clish_command_t, bt_node);
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_command_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_command_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
786 ( 0.02%)  	return lub_string_nocasecmp(this->name, key);
29,199 ( 0.57%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (262x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 47 ( 0.00%)  {
  .           	const clish_command_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
188 ( 0.00%)  	strcpy((char *)key, this->name);
1,033 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (47x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_command_new(const char *name, const char *help)
135 ( 0.00%)  {
108 ( 0.00%)  	clish_command_t *this = malloc(sizeof(clish_command_t));
9,888 ( 0.19%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (27x)
  .           
 54 ( 0.00%)  	if (this)
  .           		clish_command_init(this, name, help);
  .           
  .           	return this;
135 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_command_new_link(const char *name,
  .           	const char *help, const clish_command_t * ref)
  .           {
  .           	if (!ref)
  .           		return NULL;
  .           
-- line 119 ----------------------------------------
-- line 162 ----------------------------------------
  .           {
  .           	clish_command_fini(this);
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command_insert_param(clish_command_t * this, clish_param_t * param)
  .           {
 61 ( 0.00%)  	clish_paramv_insert(this->paramv, param);
3,426 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_insert (18x)
865 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_command_help(const clish_command_t *this)
  .           {
  .           	this = this; /* Happy compiler */
  .           
  .           	return 0;
-- line 178 ----------------------------------------
-- line 226 ----------------------------------------
  .           const char *clish_command__get_text(const clish_command_t * this)
  .           {
  .           	return this->text;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_command__get_detail(const clish_command_t * this)
  .           {
  1 ( 0.00%)  	return this->detail;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_detail(clish_command_t * this, const char *detail)
  4 ( 0.00%)  {
 12 ( 0.00%)  	assert(NULL == this->detail);
 16 ( 0.00%)  	this->detail = lub_string_dup(detail);
2,047 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (4x)
  8 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_action_t *clish_command__get_action(const clish_command_t *this)
  .           {
 23 ( 0.00%)  	return this->action;
 23 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_config_t *clish_command__get_config(const clish_command_t *this)
  .           {
  .           	return this->config;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_viewname(clish_command_t * this, const char *viewname)
  .           {
 18 ( 0.00%)  	assert(NULL == this->viewname);
 22 ( 0.00%)  	clish_command__force_viewname(this, viewname);
1,849 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewname (8x)
985 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__force_viewname(clish_command_t * this, const char *viewname)
 45 ( 0.00%)  {
 27 ( 0.00%)  	if (this->viewname)
  .           		lub_string_free(this->viewname);
 36 ( 0.00%)  	this->viewname = lub_string_dup(viewname);
1,949 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (9x)
 36 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_command__get_viewname(const clish_command_t * this)
  .           {
  .           	return this->viewname;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_viewid(clish_command_t * this, const char *viewid)
  .           {
  6 ( 0.00%)  	assert(NULL == this->viewid);
 10 ( 0.00%)  	clish_command__force_viewid(this, viewid);
1,136 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
455 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewid (2x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__force_viewid(clish_command_t * this, const char *viewid)
 15 ( 0.00%)  {
  9 ( 0.00%)  	if (this->viewid)
  .           		lub_string_free(this->viewid);
 12 ( 0.00%)  	this->viewid = lub_string_dup(viewid);
734 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 12 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_command__get_viewid(const clish_command_t * this)
  .           {
  .           	return this->viewid;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 298 ----------------------------------------
-- line 307 ----------------------------------------
  .           {
  .           	return lub_string_suffix(this->name);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_command__set_escape_chars(clish_command_t * this,
  .           	const char *escape_chars)
  1 ( 0.00%)  {
  3 ( 0.00%)  	assert(!this->escape_chars);
  4 ( 0.00%)  	this->escape_chars = lub_string_dup(escape_chars);
156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_command__get_escape_chars(const clish_command_t * this)
  .           {
  1 ( 0.00%)  	return this->escape_chars;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_regex_chars(clish_command_t *this,
  .           	const char *escape_chars)
  .           {
  .           	assert(!this->regex_chars);
  .           	this->regex_chars = lub_string_dup(escape_chars);
  .           }
-- line 332 ----------------------------------------
-- line 335 ----------------------------------------
  .           const char *clish_command__get_regex_chars(const clish_command_t *this)
  .           {
  .           	return this->regex_chars;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_args(clish_command_t * this, clish_param_t * args)
  .           {
  2 ( 0.00%)  	assert(NULL == this->args);
  2 ( 0.00%)  	this->args = args;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_t *clish_command__get_args(const clish_command_t * this)
  .           {
 26 ( 0.00%)  	return this->args;
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned int clish_command__get_param_count(const clish_command_t * this)
  .           {
  .           	return clish_paramv__get_count(this->paramv);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_paramv_t *clish_command__get_paramv(const clish_command_t * this)
  .           {
 26 ( 0.00%)  	return this->paramv;
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_pview(clish_command_t * this, clish_view_t * view)
  .           {
 52 ( 0.00%)  	this->pview = view;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_view_t *clish_command__get_pview(const clish_command_t * this)
  .           {
  .           	return this->pview;
  .           }
  .           
-- line 376 ----------------------------------------
-- line 380 ----------------------------------------
  .           	if (!this->pview)
  .           		return 0;
  .           	return clish_view__get_depth(this->pview);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_view_restore_e clish_command__get_restore(const clish_command_t * this)
  .           {
  3 ( 0.00%)  	if (!this->pview)
  .           		return CLISH_RESTORE_NONE;
  .           	return clish_view__get_restore(this->pview);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const clish_command_t * clish_command__get_orig(const clish_command_t * this)
  .           {
  .           	if (this->link)
  .           		return clish_command__get_orig(this->link);
  .           	return this;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_command__get_lock(const clish_command_t * this)
  .           {
  1 ( 0.00%)  	return this->lock;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_lock(clish_command_t * this, bool_t lock)
  .           {
 56 ( 0.00%)  	this->lock = lock;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_alias(clish_command_t * this, const char * alias)
  .           {
  .           	if (this->alias)
  .           		lub_string_free(this->alias);
  .           	this->alias = lub_string_dup(alias);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           const char * clish_command__get_alias(const clish_command_t * this)
  .           {
 26 ( 0.00%)  	return this->alias;
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_alias_view(clish_command_t *this,
  .           	const char *alias_view)
  .           {
  .           	if (this->alias_view)
  .           		lub_string_free(this->alias_view);
  .           	this->alias_view = lub_string_dup(alias_view);
-- line 433 ----------------------------------------
-- line 459 ----------------------------------------
  .           	if (this->link)
  .           		return clish_command__get_cmd(this->link);
  .           	return NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_command__get_interrupt(const clish_command_t * this)
  .           {
  1 ( 0.00%)  	return this->interrupt;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_interrupt(clish_command_t * this, bool_t interrupt)
  .           {
 54 ( 0.00%)  	this->interrupt = interrupt;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_command__set_access(clish_command_t *this, const char *access)
  5 ( 0.00%)  {
  3 ( 0.00%)  	if (this->access)
  .           		lub_string_free(this->access);
  4 ( 0.00%)  	this->access = lub_string_dup(access);
155 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  4 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_command__get_access(const clish_command_t *this)
  .           {
  .           	return this->access;
  .           }

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c
--------------------------------------------------------------------------------
Ir             

-- line 68 ----------------------------------------
    .            *---------------------------------------------------------------
    .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
    .            **************************************************************** */
    .           #include "private.h"
    .           
    .           /*--------------------------------------------------------- */
    .           lub_bintree_node_t *lub_bintree_splay(const lub_bintree_t * this,
    .           				      lub_bintree_node_t * t, const void *key)
1,080 ( 0.02%)  {
    .           	/* Simple top down splay, not requiring "key" to be in the tree t.  */
    .           	/* What it does is described above.                                 */
    .           	lub_bintree_node_t N, *leftTreeMax, *rightTreeMin, *y;
    .           	int comp;
    .           
  694 ( 0.01%)  	if (t == NULL)
    .           		return t;
  501 ( 0.01%)  	N.left = N.right = NULL;
  501 ( 0.01%)  	leftTreeMax = rightTreeMin = &N;
    .           
    .           	for (;;) {
1,192 ( 0.02%)  		comp = lub_bintree_compare(this, t, key);
13,689 ( 0.27%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (136x)
4,017 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (126x)
  730 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (24x)
   24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (12x)
  596 ( 0.01%)  		if (comp > 0) {
  384 ( 0.01%)  			if (t->left == NULL)
    .           				break;
  345 ( 0.01%)  			if (lub_bintree_compare(this, t->left, key) > 0) {
1,746 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (21x)
1,010 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
   72 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (3x)
   14 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (7x)
   44 ( 0.00%)  				y = t->left;	/* rotate right */
   88 ( 0.00%)  				t->left = y->right;
   44 ( 0.00%)  				y->right = t;
    .           				t = y;
  132 ( 0.00%)  				if (t->left == NULL)
    .           					break;
    .           			}
  112 ( 0.00%)  			rightTreeMin->left = t;	/* link right */
    .           			rightTreeMin = t;
  112 ( 0.00%)  			t = t->left;
  170 ( 0.00%)  		} else if (comp < 0) {
  327 ( 0.01%)  			if (t->right == NULL)
    .           				break;
  405 ( 0.01%)  			if (lub_bintree_compare(this, t->right, key) < 0) {
5,863 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (37x)
1,011 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
  218 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (6x)
   49 ( 0.00%)  				y = t->right;	/* rotate left */
   60 ( 0.00%)  				t->right = y->left;
   30 ( 0.00%)  				y->left = t;
    .           				t = y;
  120 ( 0.00%)  				if (t->right == NULL)
    .           					break;
    .           			}
   75 ( 0.00%)  			leftTreeMax->right = t;	/* link left */
    .           			leftTreeMax = t;
  275 ( 0.01%)  			t = t->right;
    .           		} else {
    .           			break;
    .           		}
    .           	}
  167 ( 0.00%)  	leftTreeMax->right = t->left;	/* assemble */
  334 ( 0.01%)  	rightTreeMin->left = t->right;
  334 ( 0.01%)  	t->left = N.right;
  334 ( 0.01%)  	t->right = N.left;
    .           
    .           	/* return the new root */
    .           	return t;
1,631 ( 0.03%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c
--------------------------------------------------------------------------------
Ir           

-- line 31 ----------------------------------------
  .            *    Initial version
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           void *lub_bintree_findnext(lub_bintree_t * this, const void *clientkey)
155 ( 0.00%)  {
  .           	lub_bintree_node_t *t = this->root;
  .           	int comp;
  .           
  .           	/*
  .           	 * have a look for a direct match
  .           	 */
155 ( 0.00%)  	t = this->root = lub_bintree_splay(this, t, clientkey);
14,705 ( 0.29%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (31x)
  .           
 62 ( 0.00%)  	if (NULL != t) {
  .           		/* now look at what we have got */
155 ( 0.00%)  		comp = lub_bintree_compare(this, t, clientkey);
5,854 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (26x)
304 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (5x)
 62 ( 0.00%)  		if (comp <= 0) {
  .           			/*
  .           			 * time to fiddle with the right hand side of the tree
  .           			 * we need the closest node from the right hand side
  .           			 */
 31 ( 0.00%)  			t = t->right =
155 ( 0.00%)  			    lub_bintree_splay(this, t->right, clientkey);
3,649 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (31x)
  .           		}
  .           	}
112 ( 0.00%)  	if (NULL == t) {
  6 ( 0.00%)  		return NULL;
  .           	} else {
 50 ( 0.00%)  		return lub_bintree_getclientnode(this, t);
  .           	}
124 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c
--------------------------------------------------------------------------------
Ir           

-- line 29 ----------------------------------------
  .            *   Initial version 
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           void *lub_bintree_find(lub_bintree_t * this, const void *clientkey)
375 ( 0.01%)  {
379 ( 0.01%)  	this->root = lub_bintree_splay(this, this->root, clientkey);
13,877 ( 0.27%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (74x)
773 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
150 ( 0.00%)  	if (NULL != this->root) {
408 ( 0.01%)  		if (lub_bintree_compare(this, this->root, clientkey) == 0)
1,986 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (42x)
1,254 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (21x)
120 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (5x)
 60 ( 0.00%)  			return lub_bintree_getclientnode(this, this->root);
  .           	}
 45 ( 0.00%)  	return NULL;
300 ( 0.01%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c
--------------------------------------------------------------------------------
Ir           

-- line 38 ----------------------------------------
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include <assert.h>
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           int lub_bintree_insert(lub_bintree_t * this, void *clientnode)
176 ( 0.00%)  {
 19 ( 0.00%)  	int result = -1;
  .           	lub_bintree_node_t *new;
  .           	lub_bintree_key_t key;
  .           
132 ( 0.00%)  	assert(clientnode);
  .           	if (NULL != clientnode) {
  .           		/* obtain the control block from the clientnode */
132 ( 0.00%)  		new = lub_bintree_getnode(this, clientnode);
  .           
  .           		/* check this node is not currently in another tree */
 88 ( 0.00%)  		assert(new->left == NULL);
 88 ( 0.00%)  		assert(new->right == NULL);
  .           
  .           		/* add this node to the splay tree */
  .           
  .           		/* Insert "node" into the tree , unless it's already there. */
 88 ( 0.00%)  		if (NULL == this->root) {
  .           			this->root = new;
  .           			this->root->left = this->root->right = NULL;
  .           			result = 0;
  .           		} else {
  .           			int comp;
  .           			/* get a key from the node */
 74 ( 0.00%)  			this->getkeyFn(clientnode, &key);
1,585 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_getkey (4x)
569 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_getkey (21x)
328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_getkey (12x)
  .           
  .           			/* do the biz */
222 ( 0.00%)  			this->root = lub_bintree_splay(this, this->root, &key);
5,841 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (37x)
  .           
  .           			/*
  .           			 * compare the new key with the detail found
  .           			 * in the tree
  .           			 */
148 ( 0.00%)  			comp = lub_bintree_compare(this, this->root, &key);
1,579 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (21x)
276 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (12x)
 96 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (4x)
 74 ( 0.00%)  			if (comp > 0) {
 54 ( 0.00%)  				new->left = this->root->left;
 18 ( 0.00%)  				new->right = this->root;
 18 ( 0.00%)  				this->root->left = NULL;
  .           				result = 0;
 19 ( 0.00%)  			} else if (comp < 0) {
 57 ( 0.00%)  				new->right = this->root->right;
 19 ( 0.00%)  				new->left = this->root;
 38 ( 0.00%)  				this->root->right = NULL;
  .           				result = 0;
  .           			} else {
  .           				/* We get here if it's already in the tree */
  .           			}
  .           		}
  .           		if (0 == result) {
  .           			/* update the tree root */
 88 ( 0.00%)  			this->root = new;
  .           		}
  .           	}
  .           	/* added OK */
  .           	return result;
220 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c
--------------------------------------------------------------------------------
Ir           

-- line 12 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           static void lub_argv_init(lub_argv_t * this, const char *line, size_t offset)
  .           {
  .           	size_t len;
  .           	const char *word;
  .           	lub_arg_t *arg;
  .           	size_t quoted;
  .           
  3 ( 0.00%)  	this->argv = NULL;
  3 ( 0.00%)  	this->argc = 0;
  9 ( 0.00%)  	if (!line)
  .           		return;
  .           	/* first of all count the words in the line */
 16 ( 0.00%)  	this->argc = lub_string_wordcount(line);
6,376 ( 0.13%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,131 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (2x)
  6 ( 0.00%)  	if (0 == this->argc)
  .           		return;
  .           	/* allocate space to hold the vector */
 21 ( 0.00%)  	arg = this->argv = malloc(sizeof(lub_arg_t) * this->argc);
453 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (3x)
  6 ( 0.00%)  	assert(arg);
  .           
  .           	/* then fill out the array with the words */
 73 ( 0.00%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
933 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (3x)
  9 ( 0.00%)  		*word || quoted;
119 ( 0.00%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
4,042 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (17x)
 89 ( 0.00%)  		(*arg).arg = lub_string_ndecode(word, len);
1,158 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
6,240 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_ndecode (16x)
 34 ( 0.00%)  		(*arg).offset = offset;
 85 ( 0.00%)  		(*arg).quoted = quoted ? BOOL_TRUE : BOOL_FALSE;
  .           
 51 ( 0.00%)  		offset += len;
  .           
 34 ( 0.00%)  		if (quoted) {
  .           			len += quoted - 1; /* account for terminating quotation mark */
  .           			offset += quoted; /* account for quotation marks */
  .           		}
 17 ( 0.00%)  		arg++;
  .           	}
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_argv_t *lub_argv_new(const char *line, size_t offset)
 27 ( 0.00%)  {
  .           	lub_argv_t *this;
  .           
 12 ( 0.00%)  	this = malloc(sizeof(lub_argv_t));
534 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (3x)
  6 ( 0.00%)  	if (this)
  .           		lub_argv_init(this, line, offset);
  .           
  .           	return this;
 27 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void lub_argv_add(lub_argv_t * this, const char *text)
  .           {
  .           	lub_arg_t * arg;
  .           
  .           	if (!text)
  .           		return;
-- line 68 ----------------------------------------
-- line 155 ----------------------------------------
  .           	free(argv);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *lub_argv__get_arg(const lub_argv_t *this, unsigned int index)
  .           {
  .           	const char *result = NULL;
  .           
 34 ( 0.00%)  	if (!this)
  .           		return NULL;
 34 ( 0.00%)  	if (this->argc > index)
102 ( 0.00%)  		result = this->argv[index].arg;
  .           
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned lub_argv__get_count(const lub_argv_t * this)
  .           {
 20 ( 0.00%)  	return this->argc;
 20 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           size_t lub_argv__get_offset(const lub_argv_t * this, unsigned index)
  .           {
  .           	size_t result = 0;
  .           
  .           	if (this->argc > index)
  .           		result = this->argv[index].offset;
-- line 183 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/string/string.c
--------------------------------------------------------------------------------
Ir             

-- line 10 ----------------------------------------
    .           
    .           const char *lub_string_esc_default = "`|$<>&()#;\\\"!";
    .           const char *lub_string_esc_regex = "^$.*+[](){}";
    .           const char *lub_string_esc_quoted = "\\\"";
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_free(char *ptr)
    .           {
  144 ( 0.00%)  	free(ptr);
5,829 ( 0.11%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (69x)
1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_ndecode(const char *string, unsigned int len)
   68 ( 0.00%)  {
    .           	const char *s = string;
    .           	char *res, *p;
    .           	int esc = 0;
    .           
   34 ( 0.00%)  	if (!string)
    .           		return NULL;
    .           
    .           	/* Allocate enough memory for result */
   68 ( 0.00%)  	p = res = malloc(len + 1);
3,443 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (17x)
    .           
1,154 ( 0.02%)  	while (*s && (s < (string +len))) {
  396 ( 0.01%)  		if (!esc) {
  396 ( 0.01%)  			if ('\\' == *s)
  198 ( 0.00%)  				esc = 1;
    .           			else
    .           				*p = *s;
    .           		} else {
    .           /*			switch (*s) {
    .           			case 'r':
    .           			case 'n':
    .           				*p = '\n';
    .           				break;
    .           			case 't':
    .           				*p = '\t';
    .           				break;
    .           			default:
    .           				*p = *s;
    .           				break;
    .           			}
  198 ( 0.00%)  */			*p = *s;
    .           			esc = 0;
    .           		}
    .           		if (!esc)
  396 ( 0.01%)  			p++;
  198 ( 0.00%)  		s++;
    .           	}
   17 ( 0.00%)  	*p = '\0';
    .           
    .           	return res;
   68 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           inline char *lub_string_decode(const char *string)
    .           {
    .           	return lub_string_ndecode(string, strlen(string));
    .           }
    .           
    .           /*----------------------------------------------------------- */
-- line 71 ----------------------------------------
-- line 95 ----------------------------------------
    .           			break;
    .           		}
    .           	}
    .           	return result;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_catn(char **string, const char *text, size_t len)
  618 ( 0.01%)  {
  206 ( 0.00%)  	if (text) {
    .           		char *q;
  515 ( 0.01%)  		size_t length, initlen, textlen = strlen(text);
2,042 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (103x)
    .           
    .           		/* make sure the client cannot give us duff details */
  206 ( 0.00%)  		len = (len < textlen) ? len : textlen;
    .           
    .           		/* remember the size of the original string */
  661 ( 0.01%)  		initlen = *string ? strlen(*string) : 0;
2,134 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (73x)
    .           
    .           		/* account for '\0' */
  103 ( 0.00%)  		length = initlen + len + 1;
    .           
    .           		/* allocate the memory for the result */
  313 ( 0.01%)  		q = realloc(*string, length);
16,316 ( 0.32%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (102x)
1,846 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  206 ( 0.00%)  		if (NULL != q) {
  103 ( 0.00%)  			*string = q;
    .           			/* move to the end of the initial string */
  103 ( 0.00%)  			q += initlen;
    .           
2,372 ( 0.05%)  			while (len--) {
2,790 ( 0.05%)  				*q++ = *text++;
    .           			}
  103 ( 0.00%)  			*q = '\0';
    .           		}
    .           	}
  618 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_string_cat(char **string, const char *text)
  510 ( 0.01%)  {
  616 ( 0.01%)  	size_t len = text ? strlen(text) : 0;
1,456 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,992 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (101x)
  412 ( 0.01%)  	lub_string_catn(string, text, len);
29,142 ( 0.57%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn (101x)
2,759 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  306 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_dup(const char *string)
    .           {
  578 ( 0.01%)  	if (!string)
    .           		return NULL;
  520 ( 0.01%)  	return strdup(string);
60,648 ( 1.19%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (257x)
1,754 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   62 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_dupn(const char *string, unsigned int len)
   54 ( 0.00%)  {
    .           	char *res = NULL;
    .           
   72 ( 0.00%)  	if (!string)
    .           		return res;
   72 ( 0.00%)  	res = malloc(len + 1);
2,118 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (18x)
   94 ( 0.00%)  	strncpy(res, string, len);
1,584 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  510 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (17x)
   18 ( 0.00%)  	res[len] = '\0';
    .           
    .           	return res;
   90 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int lub_string_nocasecmp(const char *cs, const char *ct)
1,812 ( 0.04%)  {
    .           	int result = 0;
5,822 ( 0.11%)  	while ((0 == result) && *cs && *ct) {
    .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
    .           		 * MACRO implementation uses braces to prevent multiple increments
    .           		 * when called.
    .           		 */
3,444 ( 0.07%)  		int s = lub_ctype_tolower(*cs++);
7,557 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (687x)
2,407 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,440 ( 0.07%)  		int t = lub_ctype_tolower(*ct++);
7,568 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (688x)
    .           
    .           		result = s - t;
    .           	}
    .           	/*lint -e774 Boolean within 'if' always evealuates to True 
    .           	 * not the case because of tolower() evaluating to 0 under lint
    .           	 * (see above)
    .           	 */
    .           	if (0 == result) {
    .           		/* account for different string lengths */
   79 ( 0.00%)  		result = *cs - *ct;
    .           	}
    .           	return result;
1,510 ( 0.03%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_string_tolower(const char *str)
    .           {
    .           	char *tmp = strdup(str);
    .           	char *p = tmp;
    .           
    .           	while (*p) {
-- line 192 ----------------------------------------
-- line 269 ----------------------------------------
    .           		p1++;
    .           	}
    .           	return p2;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *lub_string_nextword(const char *string,
    .           	size_t *len, size_t *offset, size_t *quoted)
  320 ( 0.01%)  {
    .           	const char *word;
    .           
   40 ( 0.00%)  	*quoted = 0;
    .           
    .           	/* Find the start of a word (not including an opening quote) */
  564 ( 0.01%)  	while (*string && isspace(*string)) {
1,542 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   99 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (33x)
   34 ( 0.00%)  		string++;
   28 ( 0.00%)  		(*offset)++;
    .           	}
    .           	/* Is this the start of a quoted string ? */
  102 ( 0.00%)  	if (*string == '"') {
    .           		*quoted = 1;
    .           		string++;
    .           	}
    .           	word = string;
   80 ( 0.00%)  	*len = 0;
    .           
    .           	/* Find the end of the word */
  912 ( 0.02%)  	while (*string) {
  848 ( 0.02%)  		if (*string == '\\') {
    .           			string++;
    .           			(*len)++;
    .           			if (*string) {
    .           				(*len)++;
    .           				string++;
    .           			}
    .           			continue;
    .           		}
    .           		/* End of word */
3,392 ( 0.07%)  		if (!*quoted && isspace(*string))
1,272 ( 0.03%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (424x)
    .           			break;
  792 ( 0.02%)  		if (*string == '"') {
    .           			/* End of a quoted string */
    .           			*quoted = 2;
    .           			break;
    .           		}
  396 ( 0.01%)  		(*len)++;
  792 ( 0.02%)  		string++;
    .           	}
    .           
    .           	return word;
  280 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned int lub_string_wordcount(const char *line)
   15 ( 0.00%)  {
    .           	const char *word;
    3 ( 0.00%)  	unsigned int result = 0;
    6 ( 0.00%)  	size_t len = 0, offset = 0;
    .           	size_t quoted;
    .           
   71 ( 0.00%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
  682 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (2x)
2,674 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  		*word || quoted;
  102 ( 0.00%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
4,042 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (17x)
    .           		/* account for the terminating quotation mark */
   88 ( 0.00%)  		len += quoted ? quoted - 1 : 0;
   17 ( 0.00%)  		result++;
    .           	}
    .           
    .           	return result;
   21 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/view/view.c
--------------------------------------------------------------------------------
Ir           

-- line 17 ----------------------------------------
  .           /*---------------------------------------------------------
  .            * PRIVATE META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_view_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_view_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
141 ( 0.00%)  	return strcmp(this->name, key);
1,399 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (47x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_view_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
  9 ( 0.00%)  {
  .           	const clish_view_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
 40 ( 0.00%)  	strcpy((char *)key, this->name);
1,495 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
179 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (8x)
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
  .           static void clish_view_init(clish_view_t * this, const char *name, const char *prompt)
  .           {
  .           	/* set up defaults */
 20 ( 0.00%)  	this->name = lub_string_dup(name);
889 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
  5 ( 0.00%)  	this->prompt = NULL;
  5 ( 0.00%)  	this->depth = 0;
  5 ( 0.00%)  	this->restore = CLISH_RESTORE_NONE;
  5 ( 0.00%)  	this->access = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 15 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
 25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (5x)
  .           
  .           	/* initialise the tree of commands for this view */
 44 ( 0.00%)  	lub_bintree_init(&this->tree,
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (5x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_offset (4x)
  .           		clish_command_bt_offset(),
  .           		clish_command_bt_compare, clish_command_bt_getkey);
  .           
  .           	/* Initialise the list of namespaces.
  .           	 * It's important to add new items to the
  .           	 * tail of list.
  .           	 */
 20 ( 0.00%)  	this->nspaces = lub_list_new(NULL);
671 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (5x)
  .           
  .           	/* set up the defaults */
 24 ( 0.00%)  	clish_view__set_prompt(this, prompt);
827 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
825 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__set_prompt (4x)
  .           
  .           	/* Initialize hotkey structures */
 19 ( 0.00%)  	this->hotkeys = clish_hotkeyv_new();
734 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
509 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/hotkey/hotkey.c:clish_hotkeyv_new (4x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_view_fini(clish_view_t * this)
  .           {
  .           	clish_command_t *cmd;
  .           	lub_list_node_t *iter;
  .           	clish_nspace_t *nspace;
-- line 75 ----------------------------------------
-- line 103 ----------------------------------------
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           size_t clish_view_bt_offset(void)
  .           {
  .           	return offsetof(clish_view_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_view_t *clish_view_new(const char *name, const char *prompt)
 25 ( 0.00%)  {
 20 ( 0.00%)  	clish_view_t *this = malloc(sizeof(clish_view_t));
1,181 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (5x)
  .           
 10 ( 0.00%)  	if (this)
  .           		clish_view_init(this, name, prompt);
  .           	return this;
 25 ( 0.00%)  }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC METHODS
  .            *--------------------------------------------------------- */
  .           void clish_view_delete(clish_view_t * this)
  .           {
  .           	clish_view_fini(this);
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_view_new_command(clish_view_t * this,
  .           	const char *name, const char *help)
162 ( 0.00%)  {
  .           	/* allocate the memory for a new parameter definition */
 85 ( 0.00%)  	clish_command_t *cmd = clish_command_new(name, help);
36,792 ( 0.72%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_new (26x)
3,605 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 54 ( 0.00%)  	assert(cmd);
  .           
  .           	/* if this is a command other than the startup command... */
 81 ( 0.00%)  	if (NULL != help) {
  .           		/* ...insert it into the binary tree for this view */
156 ( 0.00%)  		if (-1 == lub_bintree_insert(&this->tree, cmd)) {
7,256 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (26x)
  .           			/* inserting a duplicate command is bad */
  .           			clish_command_delete(cmd);
  .           			cmd = NULL;
  .           		}
  .           	}
  .           	return cmd;
135 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* This method identifies the command (if any) which provides
  .            * the longest match with the specified line of text.
  .            *
  .            * NB this comparison is case insensitive.
  .            *
  .            * this - the view instance upon which to operate
-- line 158 ----------------------------------------
-- line 214 ----------------------------------------
  .           	}
  .           
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_command_t *clish_view_find_command(clish_view_t * this,
  .           	const char *name, bool_t inherit)
208 ( 0.00%)  {
  .           	clish_command_t *result = NULL;
  .           
  .           	/* Search the current view */
 78 ( 0.00%)  	result = lub_bintree_find(&this->tree, name);
6,736 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (26x)
  .           
 52 ( 0.00%)  	if (inherit) {
  .           		lub_list_node_t *iter;
  .           		clish_command_t *cmd;
  .           		clish_nspace_t *nspace;
  .           
  .           		/* Iterate elements. It's important to iterate
  .           		 * items starting from tail bacause the next
  .           		 * NAMESPACE has higher priority than previous one
  .           		 * in a case then the both NAMESPACEs have the
-- line 236 ----------------------------------------
-- line 241 ----------------------------------------
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
  .           			cmd = clish_nspace_find_command(nspace, name);
  .           			/* Choose the longest match */
  .           			result = clish_command_choose_longest(result, cmd);
  .           		}
  .           	}
  .           
  .           	return result;
182 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const clish_command_t *find_next_completion(clish_view_t * this,
  .           		const char *iter_cmd, const char *line)
  .           {
  .           	clish_command_t *cmd;
  .           	const char *name = "";
  .           	lub_argv_t *largv;
-- line 257 ----------------------------------------
-- line 331 ----------------------------------------
  .           		clish_nspace_clean_proxy((clish_nspace_t *)lub_list_node__get_data(iter));
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC ATTRIBUTES
  .            *--------------------------------------------------------- */
  .           lub_bintree_t * clish_view__get_command_tree(clish_view_t *this)
  5 ( 0.00%)  {
  .           	return &this->tree;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_t * clish_view__get_nspace_tree(clish_view_t *this)
  .           {
  5 ( 0.00%)  	return this->nspaces;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_view__get_name(const clish_view_t * this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_view__set_prompt(clish_view_t * this, const char *prompt)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->prompt);
 20 ( 0.00%)  	this->prompt = lub_string_dup(prompt);
941 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_view__get_prompt(const clish_view_t *this)
  .           {
  .           	return this->prompt;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 368 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c
--------------------------------------------------------------------------------
Ir             

-- line 15 ----------------------------------------
    .           bool_t lub_ctype_isspace(char c)
    .           {
    .           	unsigned char tmp = (unsigned char)c;
    .           	return isspace(tmp) ? BOOL_TRUE : BOOL_FALSE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           char lub_ctype_tolower(char c)
2,752 ( 0.05%)  {
    .           	unsigned char tmp = (unsigned char)c;
5,508 ( 0.11%)  	return tolower(tmp);
4,125 ( 0.08%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc (1,375x)
1,639 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,752 ( 0.05%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char lub_ctype_toupper(char c)
    .           {
    .           	unsigned char tmp = (unsigned char)c;
    .           	return toupper(tmp);
    .           }
    .           
-- line 34 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c
--------------------------------------------------------------------------------
Ir           

-- line 23 ----------------------------------------
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_compare(const void *first, const void *second)
  .           {
  .           	const clish_sym_t *f = (const clish_sym_t *)first;
  .           	const clish_sym_t *s = (const clish_sym_t *)second;
  .           
180 ( 0.00%)  	return strcmp(f->name, s->name);
1,194 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (45x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_sym_new(const char *name, void *func, int type)
168 ( 0.00%)  {
  .           	clish_sym_t *this;
  .           
 84 ( 0.00%)  	this = malloc(sizeof(*this));
4,434 ( 0.09%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (21x)
 88 ( 0.00%)  	this->name = lub_string_dup(name);
3,642 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (20x)
782 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 21 ( 0.00%)  	this->func = func;
 21 ( 0.00%)  	this->type = type;
 21 ( 0.00%)  	this->api = CLISH_SYM_API_SIMPLE;
 21 ( 0.00%)  	this->permanent = BOOL_FALSE;
  .           
  .           	return this;
147 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym_free(clish_sym_t *this)
  .           {
  .           	if (!this)
  .           		return;
  .           	lub_string_free(this->name);
  .           	free(this);
-- line 55 ----------------------------------------
-- line 59 ----------------------------------------
  .           void clish_sym__set_func(clish_sym_t *this, void *func)
  .           {
  .           	this->func = func;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void *clish_sym__get_func(clish_sym_t *this)
  .           {
  8 ( 0.00%)  	return this->func;
  8 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_permanent(clish_sym_t *this, bool_t permanent)
  .           {
 26 ( 0.00%)  	this->permanent = permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_sym__get_permanent(clish_sym_t *this)
  .           {
  .           	return this->permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_name(clish_sym_t *this, const char *name)
 15 ( 0.00%)  {
  9 ( 0.00%)  	lub_string_free(this->name);
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 12 ( 0.00%)  	this->name = lub_string_dup(name);
885 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 12 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_sym__get_name(clish_sym_t *this)
  .           {
 46 ( 0.00%)  	return this->name;
 46 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_plugin(clish_sym_t *this, clish_plugin_t *plugin)
  .           {
 26 ( 0.00%)  	this->plugin = plugin;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_sym__get_plugin(clish_sym_t *this)
  .           {
  .           	return this->plugin;
  .           }
  .           
-- line 106 ----------------------------------------
-- line 108 ----------------------------------------
  .           void clish_sym__set_type(clish_sym_t *this, int type)
  .           {
  .           	this->type = type;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym__get_type(const clish_sym_t *this)
  .           {
 13 ( 0.00%)  	return this->type;
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_api(clish_sym_t *this, clish_sym_api_e api)
  .           {
  2 ( 0.00%)  	this->api = api;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_api_e clish_sym__get_api(const clish_sym_t *this)
  .           {
  2 ( 0.00%)  	return this->api;
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_clone(clish_sym_t *dst, clish_sym_t *src)
  .           {
  .           	char *name;
  .           
 24 ( 0.00%)  	if (!dst || !src)
  .           		return -1;
  6 ( 0.00%)  	name = dst->name;
 60 ( 0.00%)  	*dst = *src;
  6 ( 0.00%)  	dst->name = name;
  .           
 12 ( 0.00%)  	return 0;
  .           }
  .           
  .           /**********************************************************
  .            * PLUGIN functions                                       *
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_plugin_new(const char *name)
  4 ( 0.00%)  {
  .           	clish_plugin_t *this;
  .           
  4 ( 0.00%)  	this = malloc(sizeof(*this));
344 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           
  4 ( 0.00%)  	this->name = lub_string_dup(name);
279 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  1 ( 0.00%)  	this->conf = NULL;
  1 ( 0.00%)  	this->alias = NULL;
  1 ( 0.00%)  	this->file = NULL;
  1 ( 0.00%)  	this->builtin_flag = BOOL_FALSE; /* The plugin is shared object by default */
  1 ( 0.00%)  	this->dlhan = NULL;
  .           	/* Initialise the list of symbols */
  4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
175 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
  .           	/* Constructor and destructor */
  1 ( 0.00%)  	this->init = NULL;
  1 ( 0.00%)  	this->fini = NULL;
  .           	/* Flags */
  1 ( 0.00%)  	this->rtld_global = BOOL_FALSE; /* The dlopen() use RTLD_LOCAL by default */
  .           
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_free(clish_plugin_t *this, void *userdata)
  .           {
  .           	lub_list_node_t *iter;
  .           
  .           	if (!this)
  .           		return;
-- line 179 ----------------------------------------
-- line 201 ----------------------------------------
  .           		dlclose(this->dlhan);
  .           #endif
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_generic(clish_plugin_t *this,
  .           	void *func, const char *name, int type, bool_t permanent)
 39 ( 0.00%)  {
  .           	clish_sym_t *sym;
  .           
 91 ( 0.00%)  	if (!name || !func)
  .           		return NULL;
  .           
 91 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
6,299 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (13x)
  .           		return NULL;
 56 ( 0.00%)  	clish_sym__set_plugin(sym, this);
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_plugin (12x)
 56 ( 0.00%)  	clish_sym__set_permanent(sym, permanent);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_permanent (12x)
 52 ( 0.00%)  	lub_list_add(this->syms, sym);
4,444 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (13x)
  .           
  .           	return sym;
 65 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_sym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
  .           	return clish_plugin_add_generic(this, func,
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_psym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
 36 ( 0.00%)  	return clish_plugin_add_generic(this, func,
7,967 ( 0.16%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (9x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_osym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  1 ( 0.00%)  {
  .           	clish_sym_t *s;
  .           
  7 ( 0.00%)  	if (!(s = clish_plugin_add_generic(this, func,
989 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (1x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE)))
  .           		return s;
  8 ( 0.00%)  	clish_sym__set_api(s, CLISH_SYM_API_STDOUT);
631 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return s;
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_posym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  .           {
  .           	clish_sym_t *s;
  .           
-- line 261 ----------------------------------------
-- line 274 ----------------------------------------
  .           	return clish_plugin_add_generic(this, func,
  .           		name, type, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_phook(clish_plugin_t *this,
  .           	void *func, const char *name, int type)
  .           {
 13 ( 0.00%)  	return clish_plugin_add_generic(this, func,
2,633 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,671 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (2x)
  .           		name, type, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_add_fini(clish_plugin_t *this,
  .           	clish_plugin_fini_t *fini)
  .           {
  .           	this->fini = fini;
-- line 290 ----------------------------------------
-- line 306 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           clish_plugin_init_t * clish_plugin_get_init(clish_plugin_t *this)
  .           {
  .           	return this->init;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_get_sym(clish_plugin_t *this, const char *name, int type)
 42 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           	clish_sym_t *sym;
  .           
  .           	/* Iterate elements */
 86 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (6x)
100 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (25x)
  .           		int res;
124 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (31x)
217 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
891 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (31x)
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (31x)
104 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
  .           			return sym;
 25 ( 0.00%)  		if (res > 0) /* No chances to find name */
  .           			break;
  .           	}
  .           
  .           	return NULL;
 42 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static int clish_plugin_load_shared(clish_plugin_t *this)
  .           {
  .           #ifdef HAVE_DLFCN_H
  1 ( 0.00%)  	char *file = NULL; /* Plugin so file name */
  1 ( 0.00%)  	char *init_name = NULL; /* Init function name */
  .           	int flag = RTLD_NOW;
  .           
  3 ( 0.00%)  	if (this->file) {
  .           		file = lub_string_dup(this->file);
  .           	} else {
  4 ( 0.00%)  		lub_string_cat(&file, "clish_plugin_");
343 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  		lub_string_cat(&file, this->name);
264 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  5 ( 0.00%)  		lub_string_cat(&file, ".so");
272 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  .           	}
  .           
  .           	/* Open dynamic library */
  7 ( 0.00%)  	if (clish_plugin__get_rtld_global(this))
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  		flag |= RTLD_GLOBAL;
  .           	else
  .           		flag |= RTLD_LOCAL;
  8 ( 0.00%)  	this->dlhan = dlopen(file, flag);
133,732 ( 2.63%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(file);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  2 ( 0.00%)  	if (!this->dlhan) {
  .           		fprintf(stderr, "Error: Can't open plugin \"%s\": %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	/* Get plugin init function */
  5 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_PREFIX);
286 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, this->name);
264 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_SUFFIX);
282 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  9 ( 0.00%)  	this->init = (clish_plugin_init_t *)dlsym(this->dlhan, init_name);
4,005 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(init_name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	if (!this->init) {
  .           		fprintf(stderr, "Error: Can't get plugin \"%s\" init function: %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	return 0;
  .           #else /* HAVE_DLFCN_H */
  .           	/* We have no any dl functions. */
-- line 376 ----------------------------------------
-- line 377 ----------------------------------------
  .           	fprintf(stderr, "Error: Can't get plugin \"%s\" init function.\n",
  .           		this->name);
  .           	return -1;
  .           #endif /* HAVE_DLFCN_H */
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_plugin_load(clish_plugin_t *this, void *userdata)
  4 ( 0.00%)  {
  .           	int res;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return -1;
  5 ( 0.00%)  	assert(this->name);
  .           
  .           	/* Builtin plugins already have init function. */
  3 ( 0.00%)  	if (!this->builtin_flag) {
  .           		if (clish_plugin_load_shared(this) < 0)
  .           			return -1;
  .           	}
  .           	if (!this->init) {
  .           		fprintf(stderr, "Error: PLUGIN %s has no init function\n",
  .           			this->name);
  .           		return -1;
  .           	}
  .           	/* Execute init function */
  6 ( 0.00%)  	if ((res = this->init(userdata, this)))
14,032 ( 0.28%)  => /home/ykuznetsov/klish-2.1.3/plugins/clish/builtin_init.c:clish_plugin_clish_init (1x)
  .           		fprintf(stderr, "Error: Plugin %s init retcode: %d\n",
  .           			this->name, res);
  .           
  .           	return res;
  6 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_name(const clish_plugin_t *this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 416 ----------------------------------------
-- line 424 ----------------------------------------
  .           char *clish_plugin__get_alias(const clish_plugin_t *this)
  .           {
  .           	return this->alias;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_pubname(const clish_plugin_t *this)
  .           {
 12 ( 0.00%)  	return (this->alias ? this->alias : this->name);
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin__set_file(clish_plugin_t *this, const char *file)
  .           {
  .           	lub_string_free(this->file);
  .           	this->file = lub_string_dup(file);
  .           }
  .           
-- line 441 ----------------------------------------
-- line 474 ----------------------------------------
  .           void clish_plugin__set_rtld_global(clish_plugin_t *this, bool_t rtld_global)
  .           {
  .           	this->rtld_global = rtld_global;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_plugin__get_rtld_global(const clish_plugin_t *this)
  .           {
  1 ( 0.00%)  	return this->rtld_global;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c
--------------------------------------------------------------------------------
Ir              

-- line 78 ----------------------------------------
     .            * @param node element to add
     .            * @return new first element of the list
     .            */
     .           static clish_xmlnode_t *clish_expat_list_push_back(clish_xmlnode_t *first, clish_xmlnode_t *node)
     .           {
     .           	clish_xmlnode_t *cur = first;
     .           	clish_xmlnode_t *prev = NULL;
     .           
25,493 ( 0.50%)  	while (cur) {
     .           		prev = cur;
 7,754 ( 0.15%)  		cur = cur->next;
     .           	}
     .           	if (prev) {
   906 ( 0.02%)  		prev->next = node;
     .           		return first;
     .           	}
     .           	return node;
     .           }
     .           
     .           /** Generic add_attr() function
     .            *
     .            * @param first first attribute in the attribute list
-- line 99 ----------------------------------------
-- line 100 ----------------------------------------
     .            * @param n attribute name
     .            * @param v attribute value
     .            * @return the new first attribute in the attribute list
     .            */
     .           static clish_xmlnode_t *clish_expat_add_attr(clish_xmlnode_t *first, const char *n, const char *v)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   868 ( 0.02%)  	node = malloc(sizeof(clish_xmlnode_t));
44,425 ( 0.87%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (217x)
   434 ( 0.01%)  	if (!node)
     .           		return first;
     .           
   868 ( 0.02%)  	node->name = strdup(n);
49,586 ( 0.97%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   868 ( 0.02%)  	node->content = strdup(v);
54,365 ( 1.07%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   217 ( 0.00%)  	node->children = NULL;
   217 ( 0.00%)  	node->attributes = NULL;
   217 ( 0.00%)  	node->next = NULL;
   217 ( 0.00%)  	node->type = CLISH_XMLNODE_ATTR;
   217 ( 0.00%)  	node->depth = 0;
     .           
     .           	return clish_expat_list_push_back(first, node);
     .           }
     .           
     .           /** Run through an expat attribute list, and create a DOM-like attribute list
     .            *
     .            * @param node parent node
     .            * @param attr NULL-terminated attribute liste
-- line 126 ----------------------------------------
-- line 127 ----------------------------------------
     .            *
     .            * Each attribute uses two slots in the expat attribute list. The first one is
     .            * used to store the name, the second one is used to store the value.
     .            */
     .           static void clish_expat_add_attrlist(clish_xmlnode_t *node, const char **attr)
     .           {
     .           	int i;
     .           
 1,173 ( 0.02%)  	for (i = 0; attr[i]; i += 2) {
   434 ( 0.01%)  		node->attributes = clish_expat_add_attr(node->attributes,
     .           			attr[i], attr[i+1]);
     .           	}
     .           }
     .           
     .           /** Generic make_node() function
     .            *
     .            * @param parent XML parent node
     .            * @param type XML node type
-- line 144 ----------------------------------------
-- line 147 ----------------------------------------
     .            * @param attr attribute list
     .            * @return a new node or NULL on error
     .            */
     .           static clish_xmlnode_t *clish_expat_make_node(clish_xmlnode_t *parent,
     .           					      clish_xmlnodetype_e type,
     .           					      const char *n,
     .           					      const char *v,
     .           					      const char **attr)
 7,428 ( 0.15%)  {
     .           	clish_xmlnode_t *node;
     .           
 2,476 ( 0.05%)  	node = malloc(sizeof(clish_xmlnode_t));
122,324 ( 2.41%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (619x)
 1,238 ( 0.02%)  	if (!node)
     .           		return NULL;
 2,770 ( 0.05%)  	node->name = n ? strdup(n) : NULL;
18,524 ( 0.36%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (98x)
 4,039 ( 0.08%)  	node->content = v ? strdup(v) : NULL;
127,516 ( 2.51%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (521x)
   619 ( 0.01%)  	node->children = NULL;
   619 ( 0.01%)  	node->attributes = NULL;
   619 ( 0.01%)  	node->next = NULL;
 1,238 ( 0.02%)  	node->parent = parent;
 3,085 ( 0.06%)  	node->doc = parent ? parent->doc : NULL;
 2,446 ( 0.05%)  	node->depth = parent ? parent->depth + 1 : 0;
   619 ( 0.01%)  	node->type = type;
     .           
 1,238 ( 0.02%)  	if (attr)
     .           		clish_expat_add_attrlist(node, attr);
     .           
   152 ( 0.00%)  	if (parent)
 2,436 ( 0.05%)  		parent->children = clish_expat_list_push_back(parent->children, node);
     .           
     .           	return node;
 5,571 ( 0.11%)  }
     .           
     .           /** Add a new XML root
     .            *
     .            * @param doc XML document
     .            * @param el root node name
     .            * @param attr expat attribute list
     .            * @return a new root element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_root(clish_xmldoc_t *doc, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   314 ( 0.01%)  	node = clish_expat_make_node(NULL, CLISH_XMLNODE_ELM, el, NULL, attr);
25,901 ( 0.51%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (10x)
    20 ( 0.00%)  	if (!node)
     .           		return doc->root;
     .           
    30 ( 0.00%)  	doc->root = clish_expat_list_push_back(doc->root, node);
     .           
     .           	return node;
     .           }
     .           
     .           /** Add a new XML element as a child
     .            *
     .            * @param cur parent XML element
     .            * @param el element name
     .            * @param attr expat attribute list
     .            * @return a new XMl element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_child(clish_xmlnode_t *cur, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   176 ( 0.00%)  	node = clish_expat_make_node(cur, CLISH_XMLNODE_ELM, el, NULL, attr);
176,849 ( 3.48%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (88x)
   176 ( 0.00%)  	if (!node)
     .           		return cur;
     .           
     .           	return node;
     .           }
     .           
     .           /** Expat handler: element content
     .            *
     .            * @param data user data
     .            * @param s content (not nul-termainated)
     .            * @param len content length
     .            */
     .           static void clish_expat_chardata_handler(void *data, const char *s, int len)
 2,605 ( 0.05%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
 2,605 ( 0.05%)  	if (doc->current) {
 2,605 ( 0.05%)  		char *content = malloc(len + 1);
66,819 ( 1.31%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (521x)
 2,609 ( 0.05%)  		strncpy(content, s, len);
18,080 ( 0.36%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (520x)
 1,541 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   521 ( 0.01%)  		content[len] = '\0';
     .           
 3,126 ( 0.06%)  		clish_expat_make_node(doc->current, CLISH_XMLNODE_TEXT, NULL, content, NULL);
290,424 ( 5.71%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (521x)
     .           		/*
     .           		 * the previous call is a bit too generic, and strdup() content
     .           		 * so we need to free out own version of content.
     .           		 */
 1,567 ( 0.03%)  		free(content);
45,760 ( 0.90%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (520x)
 1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           	}
 2,605 ( 0.05%)  }
     .           
     .           /** Expat handler: start XML element
     .            *
     .            * @param data user data
     .            * @param el element name (nul-terminated)
     .            * @param attr expat attribute list
     .            */
     .           static void clish_expat_element_start(void *data, const char *el, const char **attr)
   490 ( 0.01%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (!doc->current) {
     .           		doc->current = clish_expat_add_root(doc, el, attr);
     .           	} else {
    98 ( 0.00%)  		doc->current = clish_expat_add_child(doc->current, el, attr);
     .           	}
   392 ( 0.01%)  }
     .           
     .           /** Expat handler: end XML element
     .            *
     .            * @param data user data
     .            * @param el element name
     .            */
     .           static void clish_expat_element_end(void *data, const char *el)
     .           {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (doc->current) {
   294 ( 0.01%)  		doc->current = doc->current->parent;
     .           	}
     .           
     .           	el = el; /* Happy compiler */
     .           }
     .           
     .           /** Free a node, its children and its attributes
     .            *
     .            * @param node node to free
     .            */
     .           static void clish_expat_free_node(clish_xmlnode_t *cur)
 3,344 ( 0.07%)  {
     .           	clish_xmlnode_t *node;
     .           	clish_xmlnode_t *first;
     .           
 2,584 ( 0.05%)  	if (cur->attributes) {
     .           		first = cur->attributes;
   651 ( 0.01%)  		while (first) {
     .           			node = first;
   217 ( 0.00%)  			first = first->next;
   217 ( 0.00%)  			clish_expat_free_node(node);
 8,700 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (30x)
     .           		}
     .           	}
 2,569 ( 0.05%)  	if (cur->children) {
     .           		first = cur->children;
 1,827 ( 0.04%)  		while (first) {
     .           			node = first;
   609 ( 0.01%)  			first = first->next;
   609 ( 0.01%)  			clish_expat_free_node(node);
179,286 ( 3.53%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (174x)
     .           		}
     .           	}
 2,508 ( 0.05%)  	if (cur->name)
   630 ( 0.01%)  		free(cur->name);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.05%)  	if (cur->content)
 1,476 ( 0.03%)  		free(cur->content);
64,973 ( 1.28%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (738x)
 2,508 ( 0.05%)  	free(cur);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.05%)  }
     .           
     .           /*
     .            * Public interface
     .            */
     .           
     .           int clish_xmldoc_start(void)
     .           {
     .           	return 0;
-- line 313 ----------------------------------------
-- line 314 ----------------------------------------
     .           }
     .           
     .           int clish_xmldoc_stop(void)
     .           {
     .           	return 0;
     .           }
     .           
     .           clish_xmldoc_t *clish_xmldoc_read(const char *filename)
    70 ( 0.00%)  {
     .           	clish_xmldoc_t *doc;
     .           	struct stat sb;
     .           	int fd;
     .           	char *buffer;
     .           	XML_Parser parser;
     .           	int rb;
     .           
    54 ( 0.00%)  	doc = malloc(sizeof(clish_xmldoc_t));
 1,728 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,269 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc (9x)
    20 ( 0.00%)  	if (!doc)
     .           		return NULL;
     .           	memset(doc, 0, sizeof(clish_xmldoc_t));
    44 ( 0.00%)  	doc->filename = strdup(filename);
 1,751 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,723 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (9x)
    44 ( 0.00%)  	parser = XML_ParserCreate(NULL);
 2,156 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
95,826 ( 1.88%)  => ???:XML_ParserCreate (9x)
    20 ( 0.00%)  	if (!parser)
     .           		goto error_parser_create;
    44 ( 0.00%)  	XML_SetUserData(parser, doc);
   949 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    54 ( 0.00%)  => ???:XML_SetUserData (9x)
    44 ( 0.00%)  	XML_SetCharacterDataHandler(parser, clish_expat_chardata_handler);
 1,060 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    18 ( 0.00%)  => ???:XML_SetCharacterDataHandler (9x)
    54 ( 0.00%)  	XML_SetElementHandler(parser,
 1,011 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    27 ( 0.00%)  => ???:XML_SetElementHandler (9x)
     .           		clish_expat_element_start,
     .           		clish_expat_element_end);
     .           
    64 ( 0.00%)  	fd = open(filename, O_RDONLY);
 1,430 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:open (9x)
    20 ( 0.00%)  	if (fd < 0)
     .           		goto error_open;
     .           	fstat(fd, &sb);
    50 ( 0.00%)  	buffer = malloc(sb.st_size+1);
 2,681 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (10x)
    54 ( 0.00%)  	rb = read(fd, buffer, sb.st_size);
 1,446 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (9x)
    20 ( 0.00%)  	if (rb < 0) {
     .           		close(fd);
     .           		goto error_parse;
     .           	}
    20 ( 0.00%)  	buffer[sb.st_size] = 0;
    34 ( 0.00%)  	close(fd);
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:close (9x)
     .           
    84 ( 0.00%)  	if (!XML_Parse(parser, buffer, sb.st_size, 1))
1,302,462 (25.61%)  => ???:XML_Parse (9x)
112,859 ( 2.22%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           		goto error_parse;
     .           
    34 ( 0.00%)  	XML_ParserFree(parser);
 6,192 ( 0.12%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
46,609 ( 0.92%)  => ???:XML_ParserFree (9x)
    30 ( 0.00%)  	free(buffer);
 1,380 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           
     .           	return doc;
     .           
     .           error_parse:
     .           	free(buffer);
     .           
     .           error_open:
     .           	XML_ParserFree(parser);
     .           
     .           error_parser_create:
     .           	clish_xmldoc_release(doc);
     .           
     .           	return NULL;
    80 ( 0.00%)  }
     .           
     .           void clish_xmldoc_release(clish_xmldoc_t *doc)
    20 ( 0.00%)  {
    20 ( 0.00%)  	if (doc) {
     .           		clish_xmlnode_t *node;
    70 ( 0.00%)  		while (doc->root) {
     .           			node = doc->root;
    20 ( 0.00%)  			doc->root = node->next;
    10 ( 0.00%)  			clish_expat_free_node(node);
191,026 ( 3.76%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node (10x)
     .           		}
    30 ( 0.00%)  		if (doc->filename)
    20 ( 0.00%)  			free(doc->filename);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
    30 ( 0.00%)  		free(doc);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           	}
    10 ( 0.00%)  }
     .           
     .           int clish_xmldoc_is_valid(clish_xmldoc_t *doc)
     .           {
    53 ( 0.00%)  	return doc && doc->root;
    12 ( 0.00%)  }
     .           
     .           int clish_xmldoc_error_caps(clish_xmldoc_t *doc)
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return CLISH_XMLERR_NOCAPS;
     .           }
     .           
-- line 403 ----------------------------------------
-- line 419 ----------------------------------------
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return "";
     .           }
     .           
     .           int clish_xmlnode_get_type(clish_xmlnode_t *node)
     .           {
 1,281 ( 0.03%)  	if (node)
   427 ( 0.01%)  		return node->type;
     .           	return CLISH_XMLNODE_UNKNOWN;
   427 ( 0.01%)  }
     .           
     .           clish_xmlnode_t *clish_xmldoc_get_root(clish_xmldoc_t *doc)
     .           {
    20 ( 0.00%)  	if (doc)
    20 ( 0.00%)  		return doc->root;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_parent(clish_xmlnode_t *node)
     .           {
    80 ( 0.00%)  	if (node)
    80 ( 0.00%)  		return node->parent;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_next_child(clish_xmlnode_t *parent,
     .           					  clish_xmlnode_t *curchild)
     .           {
   956 ( 0.02%)  	if (curchild)
   834 ( 0.02%)  		return curchild->next;
   122 ( 0.00%)  	if (parent)
   122 ( 0.00%)  		return parent->children;
     .           	return NULL;
     .           }
     .           
     .           char *clish_xmlnode_fetch_attr(clish_xmlnode_t *node,
     .           			       const char *attrname)
 2,648 ( 0.05%)  {
 1,324 ( 0.03%)  	if (node) {
   662 ( 0.01%)  		clish_xmlnode_t *n = node->attributes;
 4,292 ( 0.08%)  		while (n) {
 9,924 ( 0.20%)  			if (strcmp(n->name, attrname) == 0)
32,589 ( 0.64%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (1,654x)
   187 ( 0.00%)  				return n->content;
 1,467 ( 0.03%)  			n = n->next;
     .           		}
     .           	}
   475 ( 0.01%)  	return NULL;
 2,648 ( 0.05%)  }
     .           
     .           int clish_xmlnode_get_content(clish_xmlnode_t *node, char *content,
     .           			      unsigned int *contentlen)
   182 ( 0.00%)  {
     .           	unsigned int minlen = 1;
     .           
   208 ( 0.00%)  	if (node && content && contentlen) {
    26 ( 0.00%)  		clish_xmlnode_t *children = node->children;
   505 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   576 ( 0.01%)  				minlen += strlen(children->content);
 5,074 ( 0.10%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (192x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    52 ( 0.00%)  		if (minlen >= *contentlen) {
     .           			*contentlen = minlen + 1;
     .           			return -E2BIG;
     .           		}
     .           		children = node->children;
    52 ( 0.00%)  		*content = 0;
   407 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   580 ( 0.01%)  				strcat(content, children->content);
29,191 ( 0.57%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned (191x)
 1,492 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    26 ( 0.00%)  		return 0;
     .           	}
     .           
     .           	return -EINVAL;
   156 ( 0.00%)  }
     .           
     .           int clish_xmlnode_get_name(clish_xmlnode_t *node, char *name,
     .           	unsigned int *namelen)
   552 ( 0.01%)  {
 1,104 ( 0.02%)  	if (node && name && namelen) {
 1,108 ( 0.02%)  		if (strlen(node->name) >= *namelen) {
 2,192 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (137x)
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			*namelen = strlen(node->name) + 1;
     .           			return -E2BIG;
     .           		}
   828 ( 0.02%)  		snprintf(name, *namelen, "%s", node->name);
72,205 ( 1.42%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (138x)
   414 ( 0.01%)  		name[*namelen - 1] = '\0';
   138 ( 0.00%)  		return 0;
     .           	}
     .           	return -EINVAL;
   552 ( 0.01%)  }
     .           
     .           void clish_xmlnode_print(clish_xmlnode_t *node, FILE *out)
     .           {
     .           	if (node) {
     .           		int i;
     .           		clish_xmlnode_t *a;
     .           		for (i=0; i<node->depth; ++i) {
     .           			fprintf(out, "  ");
-- line 520 ----------------------------------------
-- line 525 ----------------------------------------
     .           			fprintf(out, " %s='%s'", a->name, a->content);
     .           			a = a->next;
     .           		}
     .           		fprintf(out, ">...");
     .           	}
     .           }
     .           
     .           void clish_xml_release(void *p)
   661 ( 0.01%)  {
     .           	p = p; /* Happy compiler */
     .           	/* nothing to release */
     .           }
     .           
     .           #endif /* HAVE_LIB_EXPAT */
     .           

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c
--------------------------------------------------------------------------------
Ir             

-- line 73 ----------------------------------------
    .            */
    .           const char *default_path = "/etc/clish;~/.clish";
    .           
    .           static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent);
    .           
    .           /*-------------------------------------------------------- */
    .           int clish_shell_load_scheme(clish_shell_t *this, const char *xml_path, const char *xslt_path)
    8 ( 0.00%)  {
    .           	const char *path = xml_path;
    .           	char *buffer;
    .           	char *dirname;
    .           	char *saveptr = NULL;
    .           	int res = -1;
    .           	clish_xmldoc_t *doc = NULL;
    .           	DIR *dir;
    .           
-- line 89 ----------------------------------------
-- line 99 ----------------------------------------
    .           			return -1;
    .           		}
    .           	}
    .           #else
    .           	xslt_path = xslt_path; /* Happy compiler */
    .           #endif
    .           
    .           	/* Use the default path */
    2 ( 0.00%)  	if (!path)
    .           		path = default_path;
    9 ( 0.00%)  	buffer = lub_system_tilde_expand(path);
5,312 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Loop though each directory */
    .           	for (dirname = strtok_r(buffer, ";", &saveptr);
    .           		dirname; dirname = strtok_r(NULL, ";", &saveptr)) {
    .           		struct dirent *entry;
    .           
    .           		/* Search this directory for any XML files */
    8 ( 0.00%)  		dir = opendir(dirname);
2,024 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    3 ( 0.00%)  		if (NULL == dir) {
    .           #ifdef DEBUG
    .           			tinyrl_printf(this->tinyrl,
    .           				"*** Failed to open '%s' directory\n",
    .           				dirname);
    .           #endif
    .           			continue;
    .           		}
   79 ( 0.00%)  		for (entry = readdir(dir); entry; entry = readdir(dir)) {
2,157 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  573 ( 0.01%)  => /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c:readdir (14x)
   88 ( 0.00%)  			const char *extension = strrchr(entry->d_name, '.');
1,506 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  401 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strrchr.S:rindex (13x)
   14 ( 0.00%)  			char *filename = NULL;
    .           			clish_xmlnode_t *root;
    .           			int r;
    .           
    .           			/* Check the filename */
  134 ( 0.00%)  			if (!extension || strcmp(".xml", extension))
    .           				continue;
    .           
    .           			/* Build the filename */
   41 ( 0.00%)  			lub_string_cat(&filename, dirname);
3,779 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, "/");
2,620 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, entry->d_name);
4,032 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
    .           
    .           #ifdef DEBUG
    .           			fprintf(stderr, "Parse XML-file: %s\n", filename);
    .           #endif
    .           			/* Load current XML file */
   44 ( 0.00%)  			doc = clish_xmldoc_read(filename);
1,452,782 (28.56%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read (9x)
134,640 ( 2.65%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  			if (!clish_xmldoc_is_valid(doc)) {
  659 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (9x)
   10 ( 0.00%)  				int errcaps = clish_xmldoc_error_caps(doc);
    .           				printf("Unable to open file '%s'", filename);
    .           				if ((errcaps & CLISH_XMLERR_LINE) == CLISH_XMLERR_LINE)
    .           					printf(", at line %d", clish_xmldoc_get_err_line(doc));
    .           				if ((errcaps & CLISH_XMLERR_COL) == CLISH_XMLERR_COL)
    .           					printf(", at column %d", clish_xmldoc_get_err_col(doc));
    .           				if ((errcaps & CLISH_XMLERR_DESC) == CLISH_XMLERR_DESC)
    .           					printf(", message is %s", clish_xmldoc_get_err_msg(doc));
    .           				printf("\n");
-- line 155 ----------------------------------------
-- line 171 ----------------------------------------
    .           				}
    .           				clish_xmldoc_release(doc);
    .           				doc = tmp;
    .           			}
    .           
    .           			if (!xslt_path && clish_xslt_is_valid(xslt))
    .           				clish_xslt_release(xslt);
    .           #endif
   24 ( 0.00%)  			root = clish_xmldoc_get_root(doc);
  673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_get_root (9x)
    .           			r = process_node(this, root, NULL);
   44 ( 0.00%)  			clish_xmldoc_release(doc);
179,041 ( 3.52%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release (9x)
14,628 ( 0.29%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           			/* Error message */
   30 ( 0.00%)  			if (r) {
    .           				fprintf(stderr, CLISH_XML_ERROR_STR"File %s\n",
    .           					filename);
    .           				lub_string_free(filename);
    .           				goto error;
    .           			}
   34 ( 0.00%)  			lub_string_free(filename);
2,402 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  810 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
    .           		}
    7 ( 0.00%)  		closedir(dir);
1,641 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           /* To don't free memory twice on cleanup */
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (!xslt_path)
    .           		xslt = NULL;
    .           #endif
    1 ( 0.00%)  	doc = NULL;
    .           	dir = NULL;
    1 ( 0.00%)  	res = 0; /* Success */
    .           error:
    3 ( 0.00%)  	lub_string_free(buffer);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    .           	if (dir)
    .           		closedir(dir);
    5 ( 0.00%)  	if (clish_xmldoc_is_valid(doc))
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (1x)
    .           		clish_xmldoc_release(doc);
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (clish_xslt_is_valid(xslt))
    .           		clish_xslt_release(xslt);
    .           #endif
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /*
    .            * ------------------------------------------------------
    .            * This function reads an element from the XML stream and processes it.
    .            * ------------------------------------------------------
    .            */
  980 ( 0.02%)  static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent)
    .           {
   98 ( 0.00%)  	int res = 0;
    .           
2,511 ( 0.05%)  	switch (clish_xmlnode_get_type(node)) {
2,340,397 (46.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 (30x)
  870 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type (174x)
    .           	case CLISH_XMLNODE_ELM: {
    .           			clish_xml_cb_t * cb;
    .           			char name[128];
   98 ( 0.00%)  			unsigned int namelen = sizeof(name);
  788 ( 0.02%)  			if (clish_xmlnode_get_name(node, name, &namelen) == 0) {
5,400 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (9x)
2,754 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,990 ( 0.04%)  				for (cb = &xml_elements[0]; cb->element; cb++) {
2,369 ( 0.05%)  					if (0 == strcmp(name, cb->element)) {
1,476 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  189 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (9x)
    .           #ifdef DEBUG
    .           						fprintf(stderr, "NODE:");
    .           						clish_xmlnode_print(node, stderr);
    .           						fprintf(stderr, "\n");
    .           #endif
    .           						/* process the elements at this level */
  490 ( 0.01%)  						res = cb->handler(shell, node, parent);
2,350,698 (46.22%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module (10x)
    .           
    .           						/* Error message */
  294 ( 0.01%)  						if (res) {
    .           							char *ename = clish_xmlnode_fetch_attr(node, "name");
    .           							char *eref = clish_xmlnode_fetch_attr(node, "ref");
    .           							char *ekey = clish_xmlnode_fetch_attr(node, "key");
    .           							char *efile = clish_xmlnode_fetch_attr(node, "file");
    .           							fprintf(stderr, CLISH_XML_ERROR_STR"Node %s", name);
    .           							if (ename)
    .           								fprintf(stderr, ", name=\"%s\"", ename);
    .           							if (eref)
-- line 252 ----------------------------------------
-- line 274 ----------------------------------------
    .           	case CLISH_XMLNODE_COMMENT:
    .           	case CLISH_XMLNODE_DECL:
    .           	case CLISH_XMLNODE_UNKNOWN:
    .           	default:
    .           		break;
    .           	}
    .           
    .           	return res;
  882 ( 0.02%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_children(clish_shell_t *shell,
    .           	clish_xmlnode_t *element, void *parent)
  549 ( 0.01%)  {
   61 ( 0.00%)  	clish_xmlnode_t *node = NULL;
    .           	int res;
    .           
3,350 ( 0.07%)  	while ((node = clish_xmlnode_next_child(element, node)) != NULL) {
  799 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  750 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child (183x)
    .           		/* Now deal with all the contained elements */
    .           		res = process_node(shell, node, parent);
  176 ( 0.00%)  		if (res)
    .           			return res;
    .           	}
    .           
   61 ( 0.00%)  	return 0;
  366 ( 0.01%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_clish_module(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   50 ( 0.00%)  {
    .           	/* Create the global view */
   30 ( 0.00%)  	if (!shell->global)
   11 ( 0.00%)  		shell->global = clish_shell_find_create_view(shell,
5,219 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			"__view_global", "");
    .           
    .           	parent = parent; /* Happy compiler */
    .           
   30 ( 0.00%)  	return process_children(shell, element, shell->global);
2,345,328 (46.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children (10x)
   30 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_view(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   45 ( 0.00%)  {
    .           	clish_view_t *view;
    .           	int res = -1;
    .           
   29 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  164 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (4x)
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  	char *prompt = clish_xmlnode_fetch_attr(element, "prompt");
  328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *depth = clish_xmlnode_fetch_attr(element, "depth");
  322 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *restore = clish_xmlnode_fetch_attr(element, "restore");
  340 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
  328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
    .           
    .           	/* Check syntax */
   10 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
    .           
    .           	/* re-use a view if it already exists */
   30 ( 0.00%)  	view = clish_shell_find_create_view(shell, name, prompt);
6,493 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell_find_create_view (5x)
    .           
   10 ( 0.00%)  	if (depth && (lub_ctype_isdigit(*depth))) {
    .           		unsigned int res = 0;
    .           		lub_conv_atoui(depth, &res, 0);
    .           		clish_view__set_depth(view, res);
    .           	}
    .           
   10 ( 0.00%)  	if (restore) {
    .           		if (!lub_string_nocasecmp(restore, "depth"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_DEPTH);
    .           		else if (!lub_string_nocasecmp(restore, "view"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_VIEW);
    .           		else
    .           			clish_view__set_restore(view, CLISH_RESTORE_NONE);
    .           	}
    .           
   10 ( 0.00%)  	if (access)
    .           		clish_view__set_access(view, access);
    .           
    .           //process_view_end:
   25 ( 0.00%)  	res = process_children(shell, element, view);
293,378 ( 5.77%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (5x)
    .           error:
   15 ( 0.00%)  	clish_xml_release(name);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(prompt);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(depth);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(restore);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(access);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   45 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_ptype(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   99 ( 0.00%)  {
    .           	clish_ptype_method_e method;
    .           	clish_ptype_preprocess_e preprocess;
    .           	int res = -1;
    .           
   55 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  480 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,285 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *pattern = clish_xmlnode_fetch_attr(element, "pattern");
  955 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *method_name = clish_xmlnode_fetch_attr(element, "method");
  892 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *preprocess_name =	clish_xmlnode_fetch_attr(element, "preprocess");
1,318 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
    .           
    .           	/* Check syntax */
   22 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   22 ( 0.00%)  	if (!pattern) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("pattern"));
    .           		goto error;
    .           	}
    .           
   48 ( 0.00%)  	method = clish_ptype_method_resolve(method_name);
  705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  616 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_method_resolve (10x)
    .           
   48 ( 0.00%)  	preprocess = clish_ptype_preprocess_resolve(preprocess_name);
  737 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_preprocess_resolve (10x)
   77 ( 0.00%)  	clish_shell_find_create_ptype(shell,
1,796,814 (35.33%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (11x)
    .           		name, help, pattern, method, preprocess);
    .           
   11 ( 0.00%)  	res = 0;
    .           error:
   33 ( 0.00%)  	clish_xml_release(name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(help);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(pattern);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(method_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(preprocess_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   99 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_overview(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    8 ( 0.00%)  {
    1 ( 0.00%)  	char *content = NULL;
    2 ( 0.00%)  	unsigned int content_len = 2048;
    .           	int result;
    .           
    .           	/*
    .           	 * the code below faithfully assume that we'll be able fully store
    .           	 * the content of the node. If it's really, really big, we may have
    .           	 * an issue (but then, if it's that big, how the hell does it
    .           	 * already fits in allocated memory?)
    .           	 * Ergo, it -should- be safe.
    .           	 */
    .           	do {
    4 ( 0.00%)  		char *new = (char*)realloc(content, content_len);
1,863 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (1x)
    2 ( 0.00%)  		if (!new) {
    .           			if (content)
    .           				free(content);
    .           			return -1;
    .           		}
    .           		content = new;
    7 ( 0.00%)  		result = clish_xmlnode_get_content(element, content,
19,272 ( 0.38%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (1x)
    .           			&content_len);
    2 ( 0.00%)  	} while (result == -E2BIG);
    .           
    2 ( 0.00%)  	if (result == 0 && content) {
    .           		/* set the overview text for this view */
    2 ( 0.00%)  		assert(NULL == shell->overview);
    .           		/* store the overview */
    4 ( 0.00%)  		shell->overview = lub_string_dup(content);
  968 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    .           	}
    .           
    .           	if (content)
    3 ( 0.00%)  		free(content);
  148 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    1 ( 0.00%)  	return 0;
    7 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_command(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  260 ( 0.01%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	clish_command_t *old;
    .           	int res = -1;
    .           
  130 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,167 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
1,066 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,876 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
2,167 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
2,319 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *escape_chars = clish_xmlnode_fetch_attr(element, "escape_chars");
2,119 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_name = clish_xmlnode_fetch_attr(element, "args");
1,989 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_help = clish_xmlnode_fetch_attr(element, "args_help");
2,371 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
2,290 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
2,374 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *ref = clish_xmlnode_fetch_attr(element, "ref");
2,296 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
    .           
    .           	/* Check syntax */
   52 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   52 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
    .           
    .           	/* check this command doesn't already exist */
  134 ( 0.00%)  	old = clish_view_find_command(v, name, BOOL_FALSE);
  723 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,202 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (25x)
   52 ( 0.00%)  	if (old) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"Duplicate COMMAND name=\"%s\".\n", name);
    .           		goto error;
    .           	}
    .           
    .           	/* create a command */
  160 ( 0.00%)  	cmd = clish_view_new_command(v, name, help);
43,626 ( 0.86%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (25x)
4,334 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  108 ( 0.00%)  	clish_command__set_pview(cmd, v);
  679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_pview (25x)
    .           
    .           	/* Reference 'ref' field */
   78 ( 0.00%)  	if (ref) {
    .           		char *saveptr = NULL;
    .           		const char *delim = "@";
    .           		char *view_name = NULL;
    .           		char *cmdn = NULL;
    .           		char *str = lub_string_dup(ref);
    .           
    .           		cmdn = strtok_r(str, delim, &saveptr);
    .           		if (!cmdn) {
-- line 505 ----------------------------------------
-- line 509 ----------------------------------------
    .           		}
    .           		clish_command__set_alias(cmd, cmdn); /* alias name */
    .           		view_name = strtok_r(NULL, delim, &saveptr);
    .           		clish_command__set_alias_view(cmd, view_name);
    .           		lub_string_free(str);
    .           	}
    .           
    .           	/* define some specialist escape characters */
   78 ( 0.00%)  	if (escape_chars)
    8 ( 0.00%)  		clish_command__set_escape_chars(cmd, escape_chars);
  923 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   52 ( 0.00%)  	if (args_name) {
    .           		/* define a "rest of line" argument */
    .           		clish_param_t *param;
    .           
    .           		/* Check syntax */
    2 ( 0.00%)  		if (!args_help) {
    .           			fprintf(stderr, CLISH_XML_ERROR_ATTR("args_help"));
    .           			goto error;
    .           		}
    5 ( 0.00%)  		param = clish_param_new(args_name, args_help, "__ptype_ARGS");
  751 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (1x)
    8 ( 0.00%)  		clish_command__set_args(cmd, param);
  689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* define the view which this command changes to */
   78 ( 0.00%)  	if (view) {
    .           		/* reference the next view */
   36 ( 0.00%)  		clish_command__set_viewname(cmd, view);
1,802 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,635 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (7x)
    .           	}
    .           
    .           	/* define the view id which this command changes to */
   78 ( 0.00%)  	if (viewid)
   16 ( 0.00%)  		clish_command__set_viewid(cmd, viewid);
1,829 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  463 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewid (2x)
    .           
    .           	/* lock field */
   78 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
  108 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
  725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (25x)
    .           
    .           	/* interrupt field */
   78 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
  108 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
  719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (25x)
    .           
   78 ( 0.00%)  	if (access)
    8 ( 0.00%)  		clish_command__set_access(cmd, access);
  872 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           //process_command_end:
  130 ( 0.00%)  	res = process_children(shell, element, cmd);
365,639 ( 7.19%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (26x)
    .           error:
   78 ( 0.00%)  	clish_xml_release(access);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(view);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(viewid);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(escape_chars);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(lock);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(interrupt);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(ref);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
    .           
    .           	return res;
  234 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_startup(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   10 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	int res = -1;
    .           
    5 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
   70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
   73 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_shebang =
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		clish_xmlnode_fetch_attr(element, "default_shebang");
    5 ( 0.00%)  	char *timeout = clish_xmlnode_fetch_attr(element, "timeout");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_plugin = clish_xmlnode_fetch_attr(element,
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		"default_plugin");
    .           
    .           	/* Check syntax */
    2 ( 0.00%)  	if (!view) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("view"));
    .           		goto error;
    .           	}
    2 ( 0.00%)  	if (shell->startup) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP tag duplication.\n");
    .           		goto error;
    .           	}
    .           
    .           	/* create a command with NULL help */
    6 ( 0.00%)  	cmd = clish_view_new_command(v, "startup", NULL);
1,043 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (1x)
    4 ( 0.00%)  	clish_command__set_lock(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* reference the next view */
    4 ( 0.00%)  	clish_command__set_viewname(cmd, view);
  246 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (1x)
    .           
    .           	/* define the view id which this command changes to */
    3 ( 0.00%)  	if (viewid)
    .           		clish_command__set_viewid(cmd, viewid);
    .           
    3 ( 0.00%)  	if (default_shebang)
    .           		clish_shell__set_default_shebang(shell, default_shebang);
    .           
    3 ( 0.00%)  	if (timeout) {
    .           		unsigned int to = 0;
    .           		lub_conv_atoui(timeout, &to, 0);
    .           		clish_shell__set_timeout(shell, to);
    .           	}
    .           
    .           	/* lock field */
    2 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
    4 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* interrupt field */
    2 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
    4 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (1x)
    .           
    .           	/* If we need the default plugin */
    3 ( 0.00%)  	if (default_plugin && (0 == strcmp(default_plugin, "false")))
    .           		shell->default_plugin = BOOL_FALSE;
    .           
    .           	/* remember this command */
    1 ( 0.00%)  	shell->startup = cmd;
    .           
    5 ( 0.00%)  	res = process_children(shell, element, cmd);
6,101 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (1x)
    .           error:
    3 ( 0.00%)  	clish_xml_release(view);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(viewid);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(default_shebang);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(timeout);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(lock);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(interrupt);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_param(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  190 ( 0.00%)  {
    .           	clish_command_t *cmd = NULL;
   38 ( 0.00%)  	clish_param_t *p_param = NULL;
    .           	clish_xmlnode_t *pelement;
    .           	clish_param_t *param;
    .           	char *pname;
    .           	int res = -1;
    .           
  114 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  808 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,378 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *ptype = clish_xmlnode_fetch_attr(element, "ptype");
2,095 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *prefix = clish_xmlnode_fetch_attr(element, "prefix");
2,203 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *defval = clish_xmlnode_fetch_attr(element, "default");
2,237 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *mode = clish_xmlnode_fetch_attr(element, "mode");
1,874 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *optional = clish_xmlnode_fetch_attr(element, "optional");
1,874 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *order = clish_xmlnode_fetch_attr(element, "order");
1,874 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *value = clish_xmlnode_fetch_attr(element, "value");
2,252 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *hidden = clish_xmlnode_fetch_attr(element, "hidden");
2,045 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *test = clish_xmlnode_fetch_attr(element, "test");
2,252 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *completion = clish_xmlnode_fetch_attr(element, "completion");
2,270 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,186 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
    .           
    .           	/* The PARAM can be child of COMMAND or another PARAM */
   76 ( 0.00%)  	pelement = clish_xmlnode_parent(element);
   76 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (19x)
    .           	pname = clish_xmlnode_get_all_name(pelement);
  190 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "PARAM") == 0)
  969 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (19x)
    .           		p_param = (clish_param_t *)parent;
    .           	else
    .           		cmd = (clish_command_t *)parent;
    .           	if (pname)
   95 ( 0.00%)  		free(pname);
2,369 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (19x)
   38 ( 0.00%)  	if (!cmd && !p_param)
    .           		goto error;
    .           
    .           	/* Check syntax */
   95 ( 0.00%)  	if (cmd && (cmd == shell->startup)) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP can't contain PARAMs.\n");
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!ptype) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("ptype"));
    .           		goto error;
    .           	}
    .           
  118 ( 0.00%)  	param = clish_param_new(name, help, ptype);
21,637 ( 0.43%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (18x)
2,140 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* If prefix is set clish will emulate old optional
    .           	 * command syntax over newer optional command mechanism.
    .           	 * It will create nested PARAM.
    .           	 */
   38 ( 0.00%)  	if (prefix) {
    .           		const char *ptype_name = "__ptype_SUBCOMMAND";
    .           		clish_param_t *opt_param = NULL;
    5 ( 0.00%)  		char *str = NULL;
    .           		clish_ptype_t *tmp;
    .           
    .           		/* Create a ptype for prefix-named subcommand that
    .           		 * will contain the nested optional parameter. The
    .           		 * name of ptype is hardcoded. It's not good but
    .           		 * it's only the service ptype.
    .           		 */
   25 ( 0.00%)  		tmp = (clish_ptype_t *)lub_bintree_find(
2,321 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (5x)
    .           			&shell->ptype_tree, ptype_name);
   10 ( 0.00%)  		if (!tmp)
    8 ( 0.00%)  			tmp = clish_shell_find_create_ptype(shell,
137,331 ( 2.70%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (1x)
    .           				ptype_name, "Option", "[^\\\\]+",
    .           				CLISH_PTYPE_REGEXP, CLISH_PTYPE_NONE);
    2 ( 0.00%)  		assert(tmp);
   20 ( 0.00%)  		lub_string_cat(&str, "_prefix_");
1,905 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   20 ( 0.00%)  		lub_string_cat(&str, name);
1,320 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   30 ( 0.00%)  		opt_param = clish_param_new(str, help, ptype_name);
6,029 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (5x)
   15 ( 0.00%)  		lub_string_free(str);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   24 ( 0.00%)  		clish_param__set_mode(opt_param,
  657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_mode (4x)
    .           			CLISH_PARAM_SUBCOMMAND);
   24 ( 0.00%)  		clish_param__set_value(opt_param, prefix);
  826 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  796 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_value (4x)
   20 ( 0.00%)  		clish_param__set_optional(opt_param, BOOL_TRUE);
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (5x)
    .           
   15 ( 0.00%)  		if (test)
    .           			clish_param__set_test(opt_param, test);
    .           
    .           		/* Add the parameter to the command */
   10 ( 0.00%)  		if (cmd)
   20 ( 0.00%)  			clish_command_insert_param(cmd, opt_param);
  910 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (5x)
    .           		/* Add the parameter to the param */
   15 ( 0.00%)  		if (p_param)
    .           			clish_param_insert_param(p_param, opt_param);
    .           		/* Unset cmd and set parent param to opt_param */
    5 ( 0.00%)  		cmd = NULL;
    .           		p_param = opt_param;
    .           	}
    .           
   57 ( 0.00%)  	if (defval)
   24 ( 0.00%)  		clish_param__set_default(param, defval);
  918 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  966 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_default (4x)
    .           
   57 ( 0.00%)  	if (hidden && lub_string_nocasecmp(hidden, "true") == 0)
    .           		clish_param__set_hidden(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_hidden(param, BOOL_FALSE);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_hidden (18x)
    .           
   57 ( 0.00%)  	if (mode) {
    .           		if (lub_string_nocasecmp(mode, "switch") == 0) {
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_SWITCH);
    .           			/* Force hidden attribute */
    .           			clish_param__set_hidden(param, BOOL_TRUE);
    .           		} else if (lub_string_nocasecmp(mode, "subcommand") == 0)
   28 ( 0.00%)  			clish_param__set_mode(param,
    .           				CLISH_PARAM_SUBCOMMAND);
    .           		else
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_COMMON);
    .           	}
    .           
   57 ( 0.00%)  	if (optional && lub_string_nocasecmp(optional, "true") == 0)
    .           		clish_param__set_optional(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_optional(param, BOOL_FALSE);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (18x)
    .           
   57 ( 0.00%)  	if (order && lub_string_nocasecmp(order, "true") == 0)
    .           		clish_param__set_order(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_order(param, BOOL_FALSE);
  663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_order (18x)
    .           
   57 ( 0.00%)  	if (value) {
    .           		clish_param__set_value(param, value);
    .           		/* Force mode to subcommand */
    .           		clish_param__set_mode(param,
    .           			CLISH_PARAM_SUBCOMMAND);
    .           	}
    .           
   57 ( 0.00%)  	if (test && !prefix)
    .           		clish_param__set_test(param, test);
    .           
   57 ( 0.00%)  	if (completion)
    .           		clish_param__set_completion(param, completion);
    .           
   57 ( 0.00%)  	if (access)
    .           		clish_param__set_access(param, access);
    .           
    .           	/* Add the parameter to the command */
   38 ( 0.00%)  	if (cmd)
   60 ( 0.00%)  		clish_command_insert_param(cmd, param);
1,565 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,570 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (13x)
    .           
    .           	/* Add the parameter to the param */
   38 ( 0.00%)  	if (p_param)
   24 ( 0.00%)  		clish_param_insert_param(p_param, param);
  914 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  959 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_insert_param (4x)
    .           
   95 ( 0.00%)  	res = process_children(shell, element, param);
  570 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (19x)
    .           
    .           error:
   57 ( 0.00%)  	clish_xml_release(name);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(help);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(ptype);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(prefix);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(defval);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(mode);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(optional);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(order);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(value);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(hidden);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(test);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(completion);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(access);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
    .           
    .           	return res;
  171 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_action(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  210 ( 0.00%)  {
    .           	clish_action_t *action = NULL;
  126 ( 0.00%)  	char *builtin = clish_xmlnode_fetch_attr(element, "builtin");
  587 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
  105 ( 0.00%)  	char *shebang = clish_xmlnode_fetch_attr(element, "shebang");
  431 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
   88 ( 0.00%)  	clish_xmlnode_t *pelement = clish_xmlnode_parent(element);
  649 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   80 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (20x)
    .           	char *pname = clish_xmlnode_get_all_name(pelement);
    .           	char *text;
    .           	clish_sym_t *sym = NULL;
    .           
  172 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "VAR") == 0)
3,294 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,020 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (20x)
   21 ( 0.00%)  		action = clish_var__get_action((clish_var_t *)parent);
    .           	else
   67 ( 0.00%)  		action = clish_command__get_action((clish_command_t *)parent);
  703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (20x)
    .           
    .           	if (pname)
   63 ( 0.00%)  		free(pname);
2,705 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
    .           	text = clish_xmlnode_get_all_content(element);
    .           
   84 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   94 ( 0.00%)  		clish_action__set_script(action, text);
  984 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,701 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_script (17x)
    .           	}
    .           	if (text)
   63 ( 0.00%)  		free(text);
2,746 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
   42 ( 0.00%)  	if (builtin)
   28 ( 0.00%)  		sym = clish_shell_add_unresolved_sym(shell, builtin,
5,051 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,964 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_unresolved_sym (3x)
    .           			CLISH_SYM_TYPE_ACTION);
    .           	else
   51 ( 0.00%)  		sym = shell->hooks[CLISH_SYM_TYPE_ACTION];
    .           
   67 ( 0.00%)  	clish_action__set_builtin(action, sym);
  695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_builtin (20x)
   42 ( 0.00%)  	if (shebang)
    .           		clish_action__set_shebang(action, shebang);
    .           
   67 ( 0.00%)  	clish_xml_release(builtin);
  622 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (20x)
   63 ( 0.00%)  	clish_xml_release(shebang);
   21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (21x)
    .           
    .           	return 0;
  189 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_detail(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   28 ( 0.00%)  {
    .           	clish_command_t *cmd = (clish_command_t *) parent;
    .           
    .           	/* read the following text element */
    .           	char *text = clish_xmlnode_get_all_content(element);
    .           
   16 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   24 ( 0.00%)  		clish_command__set_detail(cmd, text);
1,561 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_detail (3x)
1,211 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	if (text)
   12 ( 0.00%)  		free(text);
  534 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (4x)
    .           
    .           	shell = shell; /* Happy compiler */
    .           
    .           	return 0;
   28 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_namespace(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    .           {
    .           	clish_view_t *v = (clish_view_t *)parent;
    .           	clish_nspace_t *nspace = NULL;
    .           	int res = -1;
-- line 906 ----------------------------------------

--------------------------------------------------------------------------------
The following files chosen for auto-annotation could not be found:
--------------------------------------------------------------------------------
  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h
  /opt/build/glibc/glibc-2.24/elf/./dl-map-segments.h
  /opt/build/glibc/glibc-2.24/elf/dl-addr.c
  /opt/build/glibc/glibc-2.24/elf/dl-cache.c
  /opt/build/glibc/glibc-2.24/elf/dl-deps.c
  /opt/build/glibc/glibc-2.24/elf/dl-error.c
  /opt/build/glibc/glibc-2.24/elf/dl-load.c
  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c
  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c
  /opt/build/glibc/glibc-2.24/elf/dl-misc.c
  /opt/build/glibc/glibc-2.24/elf/dl-object.c
  /opt/build/glibc/glibc-2.24/elf/dl-profstub.c
  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c
  /opt/build/glibc/glibc-2.24/elf/dl-version.c
  /opt/build/glibc/glibc-2.24/elf/do-rel.h
  /opt/build/glibc/glibc-2.24/elf/get-dynamic-info.h
  /opt/build/glibc/glibc-2.24/elf/rtld.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c
  /opt/build/glibc/glibc-2.24/iconv/gconv_simple.c
  /opt/build/glibc/glibc-2.24/libio/fileops.c
  /opt/build/glibc/glibc-2.24/libio/genops.c
  /opt/build/glibc/glibc-2.24/libio/iogetline.c
  /opt/build/glibc/glibc-2.24/libio/libioP.h
  /opt/build/glibc/glibc-2.24/libio/strops.c
  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c
  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c
  /opt/build/glibc/glibc-2.24/locale/findlocale.c
  /opt/build/glibc/glibc-2.24/locale/loadarchive.c
  /opt/build/glibc/glibc-2.24/locale/loadlocale.c
  /opt/build/glibc/glibc-2.24/locale/setlocale.c
  /opt/build/glibc/glibc-2.24/malloc/malloc.c
  /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/sysv/linux/wordsize-64/mmap.c
  /opt/build/glibc/glibc-2.24/posix/regcomp.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.h
  /opt/build/glibc/glibc-2.24/setjmp/../sysdeps/x86_64/setjmp.S
  /opt/build/glibc/glibc-2.24/stdio-common/../libio/libioP.h
  /opt/build/glibc/glibc-2.24/stdio-common/printf-parse.h
  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfscanf.c
  /opt/build/glibc/glibc-2.24/stdlib/../stdlib/strtol_l.c
  /opt/build/glibc/glibc-2.24/stdlib/getenv.c
  /opt/build/glibc/glibc-2.24/string/../bits/stdlib-bsearch.h
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86/cacheinfo.c
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/memchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../memcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/memcmp-sse4.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S
  /opt/build/glibc/glibc-2.24/string/strdup.c
  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h
  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c
  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c
  /opt/build/glibc/glibc-2.24/wctype/wcfuncs.c

--------------------------------------------------------------------------------
Ir               
--------------------------------------------------------------------------------
280,347 ( 5.51%)  events annotated

--------------------------------------------------------------------------------
Profile data file '../klish-2.1.3/reports/heavy/callgrind.out.2008' (creator: callgrind-3.13.0)
--------------------------------------------------------------------------------
I1 cache: 
D1 cache: 
LL cache: 
Timerange: Basic block 0 - 1351168
Trigger: Program termination
Profiled target:  ./clish -x ../../xml-examples/clish (PID 2008, part 1)
Events recorded:  Ir
Events shown:     Ir
Event sort order: Ir
Thresholds:       99
Include dirs:     
User annotated:   
Auto-annotation:  on

--------------------------------------------------------------------------------
Ir                 
--------------------------------------------------------------------------------
5,862,107 (100.0%)  PROGRAM TOTALS

--------------------------------------------------------------------------------
Ir                file:function
--------------------------------------------------------------------------------
651,896 (11.12%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
417,920 ( 7.13%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c:__gconv_transform_utf8_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
382,308 ( 6.52%)  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c:mbrtowc [/lib/x86_64-linux-gnu/libc-2.24.so]
268,715 ( 4.58%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_free [/lib/x86_64-linux-gnu/libc-2.24.so]
257,384 ( 4.39%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:do_lookup_x [/lib/x86_64-linux-gnu/ld-2.24.so]
220,753 ( 3.77%)  ???:0x0000000000013e60 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
213,038 ( 3.63%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc [/lib/x86_64-linux-gnu/libc-2.24.so]
172,879 ( 2.95%)  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c:__gconv_transform_utf8_internal
154,616 ( 2.64%)  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c:btowc [/lib/x86_64-linux-gnu/libc-2.24.so]
149,650 ( 2.55%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:_dl_lookup_symbol_x [/lib/x86_64-linux-gnu/ld-2.24.so]
145,295 ( 2.48%)  ???:0x000000000000f290 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
134,017 ( 2.29%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
130,916 ( 2.23%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap_iter.isra.24 [/lib/x86_64-linux-gnu/libc-2.24.so]
113,166 ( 1.93%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
109,891 ( 1.87%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:strcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
108,808 ( 1.86%)  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c:__collseq_table_lookup [/lib/x86_64-linux-gnu/libc-2.24.so]
 94,058 ( 1.60%)  ???:0x000000000001a2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 91,278 ( 1.56%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_consolidate [/lib/x86_64-linux-gnu/libc-2.24.so]
 84,804 ( 1.45%)  /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 76,434 ( 1.30%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 75,789 ( 1.29%)  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
 71,630 ( 1.22%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 61,352 ( 1.05%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:free [/lib/x86_64-linux-gnu/libc-2.24.so]
 59,880 ( 1.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen [/lib/x86_64-linux-gnu/ld-2.24.so]
 57,005 ( 0.97%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 56,567 ( 0.96%)  /opt/build/glibc/glibc-2.24/elf/dl-addr.c:_dl_addr [/lib/x86_64-linux-gnu/libc-2.24.so]
 40,355 ( 0.69%)  ???:0x0000000000005130 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 40,047 ( 0.68%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h:_dl_relocate_object
 38,208 ( 0.65%)  /opt/build/glibc/glibc-2.24/elf/dl-misc.c:_dl_name_match_p [/lib/x86_64-linux-gnu/ld-2.24.so]
 35,760 ( 0.61%)  /opt/build/glibc/glibc-2.24/elf/dl-profstub.c:_dl_mcount_wrapper_check [/lib/x86_64-linux-gnu/libc-2.24.so]
 32,834 ( 0.56%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 32,428 ( 0.55%)  ???:0x0000000000008190 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 31,881 ( 0.54%)  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc [/lib/x86_64-linux-gnu/libc-2.24.so]
 31,425 ( 0.54%)  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c:check_match [/lib/x86_64-linux-gnu/ld-2.24.so]
 29,924 ( 0.51%)  ???:0x000000000000f970 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 29,364 ( 0.50%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
 28,564 ( 0.49%)  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c:_dl_fixup [/lib/x86_64-linux-gnu/ld-2.24.so]
 27,384 ( 0.47%)  ???:0x000000000000e2f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 25,815 ( 0.44%)  /opt/build/glibc/glibc-2.24/string/strdup.c:strdup [/lib/x86_64-linux-gnu/ld-2.24.so]
 24,768 ( 0.42%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
 23,816 ( 0.41%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 23,627 ( 0.40%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 23,485 ( 0.40%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 21,935 ( 0.37%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
 21,352 ( 0.36%)  ???:0x0000000000007580 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 20,406 ( 0.35%)  /opt/build/glibc/glibc-2.24/elf/do-rel.h:_dl_relocate_object
 18,243 ( 0.31%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_chardata_handler [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
 17,920 ( 0.31%)  /opt/build/glibc/glibc-2.24/iconv/gconv_simple.c:__gconv_btwoc_ascii [/lib/x86_64-linux-gnu/libc-2.24.so]
 17,608 ( 0.30%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
 16,913 ( 0.29%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_default_xsputn [/lib/x86_64-linux-gnu/libc-2.24.so]
 16,734 ( 0.29%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
 16,077 ( 0.27%)  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h:mbrtowc
 15,768 ( 0.27%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter [/lib/x86_64-linux-gnu/libc-2.24.so]
 15,170 ( 0.26%)  ???:0x0000000000004c30 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 15,162 ( 0.26%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_dfa_add_node [/lib/x86_64-linux-gnu/libc-2.24.so]
 14,870 ( 0.25%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_acquire_state_context [/lib/x86_64-linux-gnu/libc-2.24.so]
 14,667 ( 0.25%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:_int_realloc [/lib/x86_64-linux-gnu/libc-2.24.so]
 13,971 ( 0.24%)  ???:0x000000000000edb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
 13,580 ( 0.23%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strchr.S:strchrnul [/lib/x86_64-linux-gnu/libc-2.24.so]
 13,390 ( 0.23%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_file_xsputn@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
 13,311 ( 0.23%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 13,120 ( 0.22%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:postorder [/lib/x86_64-linux-gnu/libc-2.24.so]
 13,034 ( 0.22%)  /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv [/lib/x86_64-linux-gnu/libc-2.24.so]
 12,964 ( 0.22%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 12,600 ( 0.21%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:preorder [/lib/x86_64-linux-gnu/libc-2.24.so]
 12,581 ( 0.21%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_merge [/lib/x86_64-linux-gnu/libc-2.24.so]
 12,043 ( 0.21%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_ndecode [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
 11,167 ( 0.19%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:create_token_tree.isra.13 [/lib/x86_64-linux-gnu/libc-2.24.so]
 10,752 ( 0.18%)  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h:btowc
 10,439 ( 0.18%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object [/lib/x86_64-linux-gnu/ld-2.24.so]
 10,431 ( 0.18%)  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc [/lib/x86_64-linux-gnu/libc-2.24.so]
 10,108 ( 0.17%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
 10,017 ( 0.17%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc [/lib/x86_64-linux-gnu/libc-2.24.so]
  9,680 ( 0.17%)  ???:0x00000000000045c0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  9,640 ( 0.16%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_file_overflow@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
  9,491 ( 0.16%)  ???:0x0000000000005570 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  9,095 ( 0.16%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:_dl_map_object_deps [/lib/x86_64-linux-gnu/ld-2.24.so]
  8,581 ( 0.15%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  8,419 ( 0.14%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_insert [/lib/x86_64-linux-gnu/libc-2.24.so]
  8,380 ( 0.14%)  ???:0x00000000000196e0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  8,038 ( 0.14%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_next_completion [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  8,025 ( 0.14%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  7,533 ( 0.13%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:build_wcs_buffer [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,511 ( 0.13%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  7,260 ( 0.12%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_expression [/lib/x86_64-linux-gnu/libc-2.24.so]
  7,260 ( 0.12%)  ???:align_limit_to_full_utf8_characters [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  7,099 ( 0.12%)  /opt/build/glibc/glibc-2.24/locale/loadlocale.c:_nl_intern_locale_data [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,996 ( 0.12%)  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c:vsnprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,966 ( 0.12%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:peek_token [/lib/x86_64-linux-gnu/libc-2.24.so]
  6,935 ( 0.12%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  6,763 ( 0.12%)  /opt/build/glibc/glibc-2.24/stdio-common/../libio/libioP.h:vfprintf
  6,548 ( 0.11%)  ???:0x0000000000005810 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  6,398 ( 0.11%)  ???:0x0000000000004cb0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  6,257 ( 0.11%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_equal_part [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  6,016 ( 0.10%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_eclosure_iter'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,844 ( 0.10%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:lower_subexps [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,670 ( 0.10%)  /opt/build/glibc/glibc-2.24/libio/strops.c:_IO_str_init_static_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,618 ( 0.10%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasestr [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  5,611 ( 0.10%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_first [/lib/x86_64-linux-gnu/libc-2.24.so]
  5,412 ( 0.09%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcat_sse2_unaligned
  5,296 ( 0.09%)  ???:XML_ParserFree [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  5,074 ( 0.09%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,910 ( 0.08%)  ???:0x0000000000019f90 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  4,696 ( 0.08%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,488 ( 0.08%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,486 ( 0.08%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_param [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,461 ( 0.08%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,367 ( 0.07%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  4,189 ( 0.07%)  ???:0x00000000000050d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  4,133 ( 0.07%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:new_do_write [/lib/x86_64-linux-gnu/libc-2.24.so]
  4,049 ( 0.07%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:calc_next [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,870 ( 0.07%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_remove_at.part.4 [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,812 ( 0.07%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:_dl_map_object_from_fd [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,749 ( 0.06%)  /opt/build/glibc/glibc-2.24/elf/dl-version.c:_dl_check_map_versions [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,663 ( 0.06%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_no_init [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,639 ( 0.06%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_old_init [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,591 ( 0.06%)  /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  3,519 ( 0.06%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:__GI_strcmp [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,418 ( 0.06%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S:__GI_memset [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,415 ( 0.06%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:peek_token_bracket [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,375 ( 0.06%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  3,205 ( 0.05%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:__GI_mempcpy [/lib/x86_64-linux-gnu/libc-2.24.so]
  3,111 ( 0.05%)  /opt/build/glibc/glibc-2.24/elf/dl-cache.c:_dl_cache_libcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  3,028 ( 0.05%)  /opt/build/glibc/glibc-2.24/libio/genops.c:_IO_setb [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,997 ( 0.05%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_file_write@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,962 ( 0.05%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:register_state [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,906 ( 0.05%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  2,890 ( 0.05%)  /opt/build/glibc/glibc-2.24/libio/iofflush.c:fflush [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,747 ( 0.05%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_tree [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,717 ( 0.05%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:open_path [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,712 ( 0.05%)  /opt/build/glibc/glibc-2.24/stdio-common/printf-parse.h:vfprintf
  2,686 ( 0.05%)  /opt/build/glibc/glibc-2.24/elf/get-dynamic-info.h:_dl_map_object_from_fd
  2,668 ( 0.05%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:internal_readline [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  2,656 ( 0.05%)  ???:0x0000000000004a50 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  2,548 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,546 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  2,544 ( 0.04%)  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,512 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,362 ( 0.04%)  /opt/build/glibc/glibc-2.24/stdio-common/vfscanf.c:_IO_vfscanf [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,233 ( 0.04%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:open_verify.constprop.8 [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,224 ( 0.04%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,194 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node_closure [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,183 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:optimize_subexps [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,176 ( 0.04%)  /opt/build/glibc/glibc-2.24/elf/dl-version.c:match_symbol [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,142 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_completion [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,135 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,126 ( 0.04%)  /opt/build/glibc/glibc-2.24/libio/libioP.h:_IO_default_xsputn
  2,120 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_isspace [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  2,116 ( 0.04%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_suffix [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  2,101 ( 0.04%)  ???:0x0000000005686930 [???]
  2,085 ( 0.04%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_file_sync@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,077 ( 0.04%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_bracket_element.isra.11.constprop.32 [/lib/x86_64-linux-gnu/libc-2.24.so]
  2,034 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,030 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_element_start [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  2,028 ( 0.03%)  /opt/build/glibc/glibc-2.24/elf/dl-object.c:_dl_new_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  2,010 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_getchar [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,862 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:duplicate_node_closure'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,858 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_find_next_completion [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,810 ( 0.03%)  ???:0x000000000000f930 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,809 ( 0.03%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h:do_lookup_x
  1,799 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,772 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,760 ( 0.03%)  ???:0x0000000000013740 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,705 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_compile_internal
  1,665 ( 0.03%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:index [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,658 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_width [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,651 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_internal_position.isra.5 [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,642 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_action [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,638 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_init_copy [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,637 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_prefix [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,584 ( 0.03%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:calc_eclosure_iter
  1,580 ( 0.03%)  ???:0x00000000000094a0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,572 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_do_complete [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,568 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,550 ( 0.03%)  ???:0x0000000000019b10 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,502 ( 0.03%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,496 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,478 ( 0.03%)  /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,445 ( 0.02%)  /opt/build/glibc/glibc-2.24/libio/libioP.h:fflush
  1,390 ( 0.02%)  ???:XML_ParserCreate_MM [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,386 ( 0.02%)  ???:0x0000000000014cd0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,362 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,301 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/memcmp-sse4.S:__memcmp_sse4_1 [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,300 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,280 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,268 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c:strsep [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,223 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,202 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c:__libc_memalign [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,191 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S:strtok_r [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,180 ( 0.02%)  /opt/build/glibc/glibc-2.24/signal/../sysdeps/unix/sysv/linux/x86_64/sigaction.c:__libc_sigaction [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,176 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,159 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c:_dl_relocate_object [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,150 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,136 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_new [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,129 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/rtld.c:dl_main [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,127 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:clish_shell_prepare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,117 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../memcmp.S:bcmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,109 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate_or_translate [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,107 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,101 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_delete_text [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
  1,100 ( 0.02%)  ???:0x00000000000137d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
  1,092 ( 0.02%)  /opt/build/glibc/glibc-2.24/locale/findlocale.c:_nl_find_locale [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,084 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:mempcpy [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,080 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,073 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/memchr.S:memchr [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,041 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-cache.c:_dl_load_cache_lookup [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,039 ( 0.02%)  /opt/build/glibc/glibc-2.24/locale/loadarchive.c:_nl_load_locale_from_archive [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,020 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
  1,012 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
  1,008 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86/cacheinfo.c:intel_check_word [/lib/x86_64-linux-gnu/libc-2.24.so]
  1,006 ( 0.02%)  /opt/build/glibc/glibc-2.24/setjmp/../sysdeps/x86_64/setjmp.S:__sigsetjmp [/lib/x86_64-linux-gnu/ld-2.24.so]
  1,000 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/dl-error.c:_dl_catch_error'2 [/lib/x86_64-linux-gnu/ld-2.24.so]
    989 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:clish_shell_parse_pargv [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    987 ( 0.02%)  /opt/build/glibc/glibc-2.24/elf/./dl-map-segments.h:_dl_map_object_from_fd
    969 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    928 ( 0.02%)  /opt/build/glibc/glibc-2.24/string/../bits/stdlib-bsearch.h:intel_check_word
    927 ( 0.02%)  /opt/build/glibc/glibc-2.24/wctype/wcfuncs.c:iswalnum [/lib/x86_64-linux-gnu/libc-2.24.so]
    925 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    899 ( 0.02%)  /opt/build/glibc/glibc-2.24/libio/fileops.c:_IO_do_write@@GLIBC_2.2.5 [/lib/x86_64-linux-gnu/libc-2.24.so]
    884 ( 0.02%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    884 ( 0.02%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.c:re_node_set_insert_last [/lib/x86_64-linux-gnu/libc-2.24.so]
    866 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    864 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_vprintf [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
    856 ( 0.01%)  /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/sysv/linux/wordsize-64/mmap.c:mmap [/lib/x86_64-linux-gnu/ld-2.24.so]
    838 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
    835 ( 0.01%)  /opt/build/glibc/glibc-2.24/locale/setlocale.c:setlocale [/lib/x86_64-linux-gnu/libc-2.24.so]
    834 ( 0.01%)  /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno [/lib/x86_64-linux-gnu/libc-2.24.so]
    820 ( 0.01%)  ???:0x0000000000006340 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    818 ( 0.01%)  /opt/build/glibc/glibc-2.24/stdio-common/_itoa.c:_itoa_word [/lib/x86_64-linux-gnu/libc-2.24.so]
    816 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    810 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_display_matches [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
    806 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:clish_shell_load_scheme [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    805 ( 0.01%)  /opt/build/glibc/glibc-2.24/stdlib/../stdlib/strtol_l.c:____strtol_l_internal [/lib/x86_64-linux-gnu/libc-2.24.so]
    786 ( 0.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy [/lib/x86_64-linux-gnu/ld-2.24.so]
    783 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h:_dl_relocate_object
    780 ( 0.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S:__GI_strncmp [/lib/x86_64-linux-gnu/libc-2.24.so]
    771 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_wdog.c:clish_shell_keypress_fn [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    770 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_branch [/lib/x86_64-linux-gnu/libc-2.24.so]
    768 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    768 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/dl-deps.c:openaux [/lib/x86_64-linux-gnu/ld-2.24.so]
    759 ( 0.01%)  /opt/build/glibc/glibc-2.24/libio/iopadn.c:_IO_padn [/lib/x86_64-linux-gnu/libc-2.24.so]
    758 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:remove_duplicate [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
    750 ( 0.01%)  ???:0x0000000000004d00 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    740 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_get_sym [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    737 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.h:parse_bracket_element.isra.11.constprop.32
    722 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/xmlapi.h:process_action
    718 ( 0.01%)  ???:XML_GetBuffer [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    701 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_new [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    701 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    700 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave [/lib/x86_64-linux-gnu/ld-2.24.so]
    700 ( 0.01%)  ???:0x0000000000004610 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    694 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_argv [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    686 ( 0.01%)  /opt/build/glibc/glibc-2.24/elf/dl-load.c:decompose_rpath [/lib/x86_64-linux-gnu/ld-2.24.so]
    680 ( 0.01%)  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S:memset [/lib/x86_64-linux-gnu/ld-2.24.so]
    675 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_is_quoting [/home/ykuznetsov/klish-2.1.3/install/lib/libtinyrl.so.1.0.0]
    673 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    661 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    650 ( 0.01%)  ???:0x000000000000b4f0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    648 ( 0.01%)  /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc_init_state [/lib/x86_64-linux-gnu/libc-2.24.so]
    645 ( 0.01%)  ???:0x00000000000071d0 [/lib/x86_64-linux-gnu/libexpat.so.1.6.2]
    627 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:parse_reg_exp'2 [/lib/x86_64-linux-gnu/libc-2.24.so]
    620 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_param_generator [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]
    619 ( 0.01%)  /opt/build/glibc/glibc-2.24/libio/iogetline.c:_IO_getline_info [/lib/x86_64-linux-gnu/libc-2.24.so]
    600 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regex_internal.h:parse_expression'2
    597 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next [/home/ykuznetsov/klish-2.1.3/install/lib/liblub.so.1.0.0]
    596 ( 0.01%)  /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c:readdir [/lib/x86_64-linux-gnu/libc-2.24.so]
    595 ( 0.01%)  /opt/build/glibc/glibc-2.24/posix/regcomp.c:re_compile_fastmap [/lib/x86_64-linux-gnu/libc-2.24.so]
    588 ( 0.01%)  /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_element_end [/home/ykuznetsov/klish-2.1.3/install/lib/libclish.so.1.0.0]

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_wdog.c
--------------------------------------------------------------------------------
Ir           

-- line 26 ----------------------------------------
  .           	this->wdog_active = BOOL_FALSE;
  .           	tinyrl__set_timeout(tinyrl, this->idle_timeout);
  .           
  .           	return 0;
  .           }
  .           
  .           /*----------------------------------------------------------------------- */
  .           int clish_shell_keypress_fn(tinyrl_t *tinyrl, int key)
118 ( 0.00%)  {
122 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(tinyrl);
883 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
116 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (58x)
177 ( 0.00%)  	clish_shell_t *this = clish_context__get_shell(context);
118 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (59x)
  .           
177 ( 0.00%)  	if (this->wdog_active) {
  .           		this->wdog_active = BOOL_FALSE;
  .           		tinyrl__set_timeout(tinyrl, this->idle_timeout);
  .           	}
  .           
  .           	key = key; /* Happy compiler */
  .           
  .           	return 0;
177 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */
  .           int clish_shell_wdog(clish_shell_t *this)
  .           {
  .           	clish_context_t context;
  .           
  .           	assert(this->wdog);
  .           
-- line 54 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c
--------------------------------------------------------------------------------
Ir             

-- line 68 ----------------------------------------
    .            *---------------------------------------------------------------
    .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
    .            **************************************************************** */
    .           #include "private.h"
    .           
    .           /*--------------------------------------------------------- */
    .           lub_bintree_node_t *lub_bintree_splay(const lub_bintree_t * this,
    .           				      lub_bintree_node_t * t, const void *key)
3,636 ( 0.06%)  {
    .           	/* Simple top down splay, not requiring "key" to be in the tree t.  */
    .           	/* What it does is described above.                                 */
    .           	lub_bintree_node_t N, *leftTreeMax, *rightTreeMin, *y;
    .           	int comp;
    .           
2,316 ( 0.04%)  	if (t == NULL)
    .           		return t;
1,656 ( 0.03%)  	N.left = N.right = NULL;
1,656 ( 0.03%)  	leftTreeMax = rightTreeMin = &N;
    .           
    .           	for (;;) {
3,852 ( 0.07%)  		comp = lub_bintree_compare(this, t, key);
102,742 ( 1.75%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (799x)
4,017 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (126x)
  778 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (26x)
   24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (12x)
1,926 ( 0.03%)  		if (comp > 0) {
1,350 ( 0.02%)  			if (t->left == NULL)
    .           				break;
1,190 ( 0.02%)  			if (lub_bintree_compare(this, t->left, key) > 0) {
14,180 ( 0.24%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (189x)
1,010 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
   96 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (4x)
   14 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:compareleft (7x)
  200 ( 0.00%)  				y = t->left;	/* rotate right */
  400 ( 0.01%)  				t->left = y->right;
  200 ( 0.00%)  				y->right = t;
    .           				t = y;
  600 ( 0.01%)  				if (t->left == NULL)
    .           					break;
    .           			}
  368 ( 0.01%)  			rightTreeMin->left = t;	/* link right */
    .           			rightTreeMin = t;
  368 ( 0.01%)  			t = t->left;
  513 ( 0.01%)  		} else if (comp < 0) {
  828 ( 0.01%)  			if (t->right == NULL)
    .           				break;
1,165 ( 0.02%)  			if (lub_bintree_compare(this, t->right, key) < 0) {
45,786 ( 0.78%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (189x)
1,011 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (38x)
  218 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (6x)
   90 ( 0.00%)  				y = t->right;	/* rotate left */
   60 ( 0.00%)  				t->right = y->left;
   30 ( 0.00%)  				y->left = t;
    .           				t = y;
  120 ( 0.00%)  				if (t->right == NULL)
    .           					break;
    .           			}
  227 ( 0.00%)  			leftTreeMax->right = t;	/* link left */
    .           			leftTreeMax = t;
  757 ( 0.01%)  			t = t->right;
    .           		} else {
    .           			break;
    .           		}
    .           	}
  552 ( 0.01%)  	leftTreeMax->right = t->left;	/* assemble */
1,104 ( 0.02%)  	rightTreeMin->left = t->right;
1,104 ( 0.02%)  	t->left = N.right;
1,104 ( 0.02%)  	t->right = N.left;
    .           
    .           	/* return the new root */
    .           	return t;
5,462 ( 0.09%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/view/view.c
--------------------------------------------------------------------------------
Ir             

-- line 17 ----------------------------------------
    .           /*---------------------------------------------------------
    .            * PRIVATE META FUNCTIONS
    .            *--------------------------------------------------------- */
    .           int clish_view_bt_compare(const void *clientnode, const void *clientkey)
    .           {
    .           	const clish_view_t *this = clientnode;
    .           	const char *key = clientkey;
    .           
  153 ( 0.00%)  	return strcmp(this->name, key);
1,483 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (51x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void clish_view_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
    9 ( 0.00%)  {
    .           	const clish_view_t *this = clientnode;
    .           
    .           	/* fill out the opaque key */
   40 ( 0.00%)  	strcpy((char *)key, this->name);
1,495 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  179 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (8x)
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PRIVATE METHODS
    .            *--------------------------------------------------------- */
    .           static void clish_view_init(clish_view_t * this, const char *name, const char *prompt)
    .           {
    .           	/* set up defaults */
   20 ( 0.00%)  	this->name = lub_string_dup(name);
  889 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
    5 ( 0.00%)  	this->prompt = NULL;
    5 ( 0.00%)  	this->depth = 0;
    5 ( 0.00%)  	this->restore = CLISH_RESTORE_NONE;
    5 ( 0.00%)  	this->access = NULL;
    .           
    .           	/* Be a good binary tree citizen */
   15 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
   25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (5x)
    .           
    .           	/* initialise the tree of commands for this view */
   44 ( 0.00%)  	lub_bintree_init(&this->tree,
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_init.c:lub_bintree_init (5x)
    8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_offset (4x)
    .           		clish_command_bt_offset(),
    .           		clish_command_bt_compare, clish_command_bt_getkey);
    .           
    .           	/* Initialise the list of namespaces.
    .           	 * It's important to add new items to the
    .           	 * tail of list.
    .           	 */
   20 ( 0.00%)  	this->nspaces = lub_list_new(NULL);
  671 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (5x)
    .           
    .           	/* set up the defaults */
   24 ( 0.00%)  	clish_view__set_prompt(this, prompt);
  827 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  825 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__set_prompt (4x)
    .           
    .           	/* Initialize hotkey structures */
   19 ( 0.00%)  	this->hotkeys = clish_hotkeyv_new();
  734 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  509 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/hotkey/hotkey.c:clish_hotkeyv_new (4x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           static void clish_view_fini(clish_view_t * this)
    .           {
    .           	clish_command_t *cmd;
    .           	lub_list_node_t *iter;
    .           	clish_nspace_t *nspace;
-- line 75 ----------------------------------------
-- line 103 ----------------------------------------
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC META FUNCTIONS
    .            *--------------------------------------------------------- */
    .           size_t clish_view_bt_offset(void)
    .           {
    .           	return offsetof(clish_view_t, bt_node);
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_t *clish_view_new(const char *name, const char *prompt)
   25 ( 0.00%)  {
   20 ( 0.00%)  	clish_view_t *this = malloc(sizeof(clish_view_t));
1,181 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (5x)
    .           
   10 ( 0.00%)  	if (this)
    .           		clish_view_init(this, name, prompt);
    .           	return this;
   25 ( 0.00%)  }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC METHODS
    .            *--------------------------------------------------------- */
    .           void clish_view_delete(clish_view_t * this)
    .           {
    .           	clish_view_fini(this);
    .           	free(this);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_view_new_command(clish_view_t * this,
    .           	const char *name, const char *help)
  162 ( 0.00%)  {
    .           	/* allocate the memory for a new parameter definition */
   85 ( 0.00%)  	clish_command_t *cmd = clish_command_new(name, help);
36,792 ( 0.63%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_new (26x)
3,605 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  	assert(cmd);
    .           
    .           	/* if this is a command other than the startup command... */
   81 ( 0.00%)  	if (NULL != help) {
    .           		/* ...insert it into the binary tree for this view */
  156 ( 0.00%)  		if (-1 == lub_bintree_insert(&this->tree, cmd)) {
7,256 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c:lub_bintree_insert (26x)
    .           			/* inserting a duplicate command is bad */
    .           			clish_command_delete(cmd);
    .           			cmd = NULL;
    .           		}
    .           	}
    .           	return cmd;
  135 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           /* This method identifies the command (if any) which provides
    .            * the longest match with the specified line of text.
    .            *
    .            * NB this comparison is case insensitive.
    .            *
    .            * this - the view instance upon which to operate
    .            * line - the command line to analyse 
    .            */
    .           clish_command_t *clish_view_resolve_prefix(clish_view_t * this,
    .           	const char *line, bool_t inherit)
  260 ( 0.00%)  {
   26 ( 0.00%)  	clish_command_t *result = NULL, *cmd;
   26 ( 0.00%)  	char *buffer = NULL;
    .           	lub_argv_t *argv;
    .           	unsigned i;
    .           
    .           	/* create a vector of arguments */
  104 ( 0.00%)  	argv = lub_argv_new(line, 0);
29,208 ( 0.50%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (26x)
    .           
  273 ( 0.00%)  	for (i = 0; i < lub_argv__get_count(argv); i++) {
   78 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (39x)
    .           		/* set our buffer to be that of the first "i" arguments  */
  266 ( 0.00%)  		lub_string_cat(&buffer, lub_argv__get_arg(argv, i));
7,494 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (30x)
  300 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (30x)
    .           
    .           		/* set the result to the longest match */
  180 ( 0.00%)  		cmd = clish_view_find_command(this, buffer, inherit);
31,494 ( 0.54%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (30x)
    .           
    .           		/* job done */
   60 ( 0.00%)  		if (!cmd)
    .           			break;
    .           		result = cmd;
    .           
    .           		/* ready for the next word */
   52 ( 0.00%)  		lub_string_cat(&buffer, " ");
3,172 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (13x)
    .           	}
    .           
    .           	/* free up our dynamic storage */
   78 ( 0.00%)  	lub_string_free(buffer);
2,016 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (26x)
   78 ( 0.00%)  	lub_argv_delete(argv);
8,440 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (26x)
    .           
    .           	return result;
  234 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_view_resolve_command(clish_view_t *this,
    .           	const char *line, bool_t inherit)
   78 ( 0.00%)  {
   56 ( 0.00%)  	clish_command_t *result = clish_view_resolve_prefix(this, line, inherit);
83,483 ( 1.42%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_prefix (25x)
1,065 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   61 ( 0.00%)  	if (result) {
   36 ( 0.00%)  		clish_action_t *action = clish_command__get_action(result);
   18 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (9x)
   40 ( 0.00%)  		clish_config_t *config = clish_command__get_config(result);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_config (8x)
   51 ( 0.00%)  		if (!clish_action__get_script(action) &&
   18 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_script (9x)
   15 ( 0.00%)  			(!clish_action__get_builtin(action)) &&
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__get_builtin (3x)
   19 ( 0.00%)  			(CLISH_CONFIG_NONE == clish_config__get_op(config)) &&
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config__get_op (2x)
   19 ( 0.00%)  			(!clish_command__get_param_count(result)) &&
1,435 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_param_count (2x)
    9 ( 0.00%)  			(!clish_command__get_viewname(result))) {
    6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_viewname (3x)
    .           			/* if this doesn't do anything we've
    .           			 * not resolved a command
    .           			 */
   20 ( 0.00%)  			result = NULL;
    .           		}
    .           	}
    .           
    .           	return result;
  130 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_view_find_command(clish_view_t * this,
    .           	const char *name, bool_t inherit)
  448 ( 0.01%)  {
    .           	clish_command_t *result = NULL;
    .           
    .           	/* Search the current view */
  168 ( 0.00%)  	result = lub_bintree_find(&this->tree, name);
37,390 ( 0.64%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (56x)
    .           
  112 ( 0.00%)  	if (inherit) {
    .           		lub_list_node_t *iter;
    .           		clish_command_t *cmd;
    .           		clish_nspace_t *nspace;
    .           
    .           		/* Iterate elements. It's important to iterate
    .           		 * items starting from tail bacause the next
    .           		 * NAMESPACE has higher priority than previous one
    .           		 * in a case then the both NAMESPACEs have the
    .           		 * commands with the same name.
    .           		 */
  180 ( 0.00%)  		for(iter = lub_list__get_tail(this->nspaces);
   60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_tail (30x)
    .           			iter; iter = lub_list_node__get_prev(iter)) {
    .           			nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
    .           			cmd = clish_nspace_find_command(nspace, name);
    .           			/* Choose the longest match */
    .           			result = clish_command_choose_longest(result, cmd);
    .           		}
    .           	}
    .           
    .           	return result;
  392 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           static const clish_command_t *find_next_completion(clish_view_t * this,
    .           		const char *iter_cmd, const char *line)
    .           {
    .           	clish_command_t *cmd;
  480 ( 0.01%)  	const char *name = "";
    .           	lub_argv_t *largv;
    .           	unsigned words;
    .           
    .           	/* build an argument vector for the line */
  400 ( 0.01%)  	largv = lub_argv_new(line, 0);
43,508 ( 0.74%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (80x)
  320 ( 0.01%)  	words = lub_argv__get_count(largv);
  160 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (80x)
    .           
    .           	/* account for trailing space */
  368 ( 0.01%)  	if (!*line || lub_ctype_isspace(line[strlen(line) - 1]))
  848 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  492 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (24x)
  299 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_isspace (23x)
   68 ( 0.00%)  		words++;
    .           
    .           	if (iter_cmd)
    .           		name = iter_cmd;
1,488 ( 0.03%)  	while ((cmd = lub_bintree_findnext(&this->tree, name))) {
193,085 ( 3.29%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext (211x)
1,047 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  712 ( 0.01%)  		name = clish_command__get_name(cmd);
  712 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (178x)
  894 ( 0.02%)  		if (words == lub_string_wordcount(name)) {
42,542 ( 0.73%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (177x)
1,058 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			/* only bother with commands of which this line is a prefix */
    .           			/* this is a completion */
  500 ( 0.01%)  			if (lub_string_nocasestr(name, line) == name)
10,224 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasestr (74x)
  901 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           				break;
    .           		}
    .           	}
    .           	/* clean up the dynamic memory */
  324 ( 0.01%)  	lub_argv_delete(largv);
14,932 ( 0.25%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (79x)
  882 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	return cmd;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t *clish_view_find_next_completion(clish_view_t * this,
    .           	const char *iter_cmd, const char *line,
    .           	clish_nspace_visibility_e field, bool_t inherit)
  960 ( 0.02%)  {
    .           	const clish_command_t *result, *cmd;
    .           	clish_nspace_t *nspace;
    .           	lub_list_node_t *iter;
    .           
    .           	/* ask local view for next command */
    .           	result = find_next_completion(this, iter_cmd, line);
    .           
  240 ( 0.00%)  	if (!inherit)
    .           		return result;
    .           
    .           	/* ask the imported namespaces for next command */
    .           
    .           	/* Iterate elements */
  564 ( 0.01%)  	for(iter = lub_list__get_tail(this->nspaces);
  914 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  158 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_tail (79x)
    .           		iter; iter = lub_list_node__get_prev(iter)) {
    .           		nspace = (clish_nspace_t *)lub_list_node__get_data(iter);
    .           		if (!clish_nspace__get_visibility(nspace, field))
    .           			continue;
    .           		cmd = clish_nspace_find_next_completion(nspace,
    .           			iter_cmd, line, field);
    .           		if (clish_command_diff(result, cmd) > 0)
    .           			result = cmd;
    .           	}
    .           
    .           	return result;
  720 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view_insert_nspace(clish_view_t * this, clish_nspace_t * nspace)
    .           {
    .           	lub_list_add(this->nspaces, nspace);
    .           }
    .           
    .           /*--------------------------------------------------------- */
-- line 323 ----------------------------------------
-- line 331 ----------------------------------------
    .           		clish_nspace_clean_proxy((clish_nspace_t *)lub_list_node__get_data(iter));
    .           	}
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC ATTRIBUTES
    .            *--------------------------------------------------------- */
    .           lub_bintree_t * clish_view__get_command_tree(clish_view_t *this)
    5 ( 0.00%)  {
    .           	return &this->tree;
    5 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           lub_list_t * clish_view__get_nspace_tree(clish_view_t *this)
    .           {
    5 ( 0.00%)  	return this->nspaces;
    5 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_view__get_name(const clish_view_t * this)
    .           {
    .           	return this->name;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view__set_prompt(clish_view_t * this, const char *prompt)
    5 ( 0.00%)  {
   15 ( 0.00%)  	assert(!this->prompt);
   20 ( 0.00%)  	this->prompt = lub_string_dup(prompt);
  941 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
   10 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_view__get_prompt(const clish_view_t *this)
    .           {
    1 ( 0.00%)  	return this->prompt;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view__set_depth(clish_view_t * this, unsigned depth)
    .           {
    .           	this->depth = depth;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned clish_view__get_depth(const clish_view_t * this)
    .           {
    1 ( 0.00%)  	return this->depth;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_view__set_restore(clish_view_t * this,
    .           	clish_view_restore_e restore)
    .           {
    .           	this->restore = restore;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_restore_e clish_view__get_restore(const clish_view_t * this)
    .           {
    1 ( 0.00%)  	return this->restore;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_view_insert_hotkey(const clish_view_t *this, const char *key, const char *cmd)
    .           {
    .           	return clish_hotkeyv_insert(this->hotkeys, key, cmd);
    .           }
    .           
    .           /*--------------------------------------------------------- */
-- line 399 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_insert.c
--------------------------------------------------------------------------------
Ir           

-- line 38 ----------------------------------------
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include <assert.h>
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           int lub_bintree_insert(lub_bintree_t * this, void *clientnode)
176 ( 0.00%)  {
 19 ( 0.00%)  	int result = -1;
  .           	lub_bintree_node_t *new;
  .           	lub_bintree_key_t key;
  .           
132 ( 0.00%)  	assert(clientnode);
  .           	if (NULL != clientnode) {
  .           		/* obtain the control block from the clientnode */
132 ( 0.00%)  		new = lub_bintree_getnode(this, clientnode);
  .           
  .           		/* check this node is not currently in another tree */
 88 ( 0.00%)  		assert(new->left == NULL);
 88 ( 0.00%)  		assert(new->right == NULL);
  .           
  .           		/* add this node to the splay tree */
  .           
  .           		/* Insert "node" into the tree , unless it's already there. */
 88 ( 0.00%)  		if (NULL == this->root) {
  .           			this->root = new;
  .           			this->root->left = this->root->right = NULL;
  .           			result = 0;
  .           		} else {
  .           			int comp;
  .           			/* get a key from the node */
 74 ( 0.00%)  			this->getkeyFn(clientnode, &key);
1,585 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_getkey (4x)
569 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_getkey (21x)
328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_getkey (12x)
  .           
  .           			/* do the biz */
222 ( 0.00%)  			this->root = lub_bintree_splay(this, this->root, &key);
5,841 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (37x)
  .           
  .           			/*
  .           			 * compare the new key with the detail found
  .           			 * in the tree
  .           			 */
148 ( 0.00%)  			comp = lub_bintree_compare(this, this->root, &key);
1,579 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (21x)
276 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (12x)
 96 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (4x)
 74 ( 0.00%)  			if (comp > 0) {
 54 ( 0.00%)  				new->left = this->root->left;
 18 ( 0.00%)  				new->right = this->root;
 18 ( 0.00%)  				this->root->left = NULL;
  .           				result = 0;
 19 ( 0.00%)  			} else if (comp < 0) {
 57 ( 0.00%)  				new->right = this->root->right;
 19 ( 0.00%)  				new->left = this->root;
 38 ( 0.00%)  				this->root->right = NULL;
  .           				result = 0;
  .           			} else {
  .           				/* We get here if it's already in the tree */
  .           			}
  .           		}
  .           		if (0 == result) {
  .           			/* update the tree root */
 88 ( 0.00%)  			this->root = new;
  .           		}
  .           	}
  .           	/* added OK */
  .           	return result;
220 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c
--------------------------------------------------------------------------------
Ir           

-- line 12 ----------------------------------------
  .           	"clish_script@clish",
  .           	NULL,
  .           	"clish_hook_config@clish",
  .           	"clish_hook_log@clish"
  .           };
  .           
  .           /*----------------------------------------------------------- */
  .           int clish_shell_startup(clish_shell_t *this)
  3 ( 0.00%)  {
  .           	const char *banner;
  .           	clish_context_t context;
  .           
  3 ( 0.00%)  	if (!this->startup) {
  .           		fprintf(stderr, "Error: Can't get valid STARTUP tag.\n");
  .           		return -1;
  .           	}
  .           
  .           	/* Prepare context */
  9 ( 0.00%)  	clish_context_init(&context, this);
645 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_cmd(&context, this->startup);
681 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  	clish_context__set_action(&context,
689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		clish_command__get_action(this->startup));
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (1x)
  .           
  7 ( 0.00%)  	banner = clish_command__get_detail(this->startup);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	if (banner)
 10 ( 0.00%)  		tinyrl_printf(this->tinyrl, "%s\n", banner);
18,806 ( 0.32%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Call log initialize */
  9 ( 0.00%)  	if (clish_shell__get_log(this))
657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		clish_shell_exec_log(&context, NULL, 0);
  .           	/* Call startup script */
  8 ( 0.00%)  	return clish_shell_execute(&context, NULL);
42,408 ( 0.72%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */
  .           void clish_shell__set_startup_view(clish_shell_t *this, const char *viewname)
  .           {
  .           	clish_view_t *view;
  .           
  .           	assert(this);
  .           	assert(this->startup);
-- line 52 ----------------------------------------
-- line 70 ----------------------------------------
  .           	assert(this);
  .           	lub_string_free(this->default_shebang);
  .           	this->default_shebang = lub_string_dup(shebang);
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           const char * clish_shell__get_default_shebang(const clish_shell_t *this)
  .           {
  4 ( 0.00%)  	assert(this);
  2 ( 0.00%)  	return this->default_shebang;
  2 ( 0.00%)  }
  .           
  .           
  .           
  .           /*-------------------------------------------------------- */
  .           /* Resolve PTYPE for given PARAM.
  .            */
  .           static clish_ptype_t * resolve_ptype(clish_shell_t *this, clish_param_t *param)
 75 ( 0.00%)  {
  .           	clish_ptype_t *ptype = NULL;
  .           
125 ( 0.00%)  	if (!this || !param)
  .           		return NULL;
  .           
  .           	/* Resolve PARAM's PTYPE */
233 ( 0.00%)  	ptype = clish_shell_find_ptype(this, clish_param__get_ptype_name(param));
6,418 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_ptype (24x)
1,692 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype_name (24x)
 50 ( 0.00%)  	if (!ptype) {
  .           		fprintf(stderr, "Error: Unresolved PTYPE \"%s\" in PARAM \"%s\"\n",
  .           			clish_param__get_ptype_name(param),
  .           			clish_param__get_name(param));
  .           		return NULL;
  .           	}
104 ( 0.00%)  	clish_param__set_ptype(param, ptype);
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 48 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype (24x)
104 ( 0.00%)  	clish_param__set_ptype_name(param, NULL); /* Free some memory */
813 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,688 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_ptype_name (24x)
  .           
  .           	return ptype;
125 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* Static recursive function to iterate parameters. Logically it's the
  .            * part of clish_shell_prepare() function.
  .            */
  .           static int iterate_paramv(clish_shell_t *this, clish_paramv_t *paramv,
  .           	clish_hook_access_fn_t *access_fn)
400 ( 0.01%)  {
100 ( 0.00%)  	int i = 0;
  .           	clish_param_t *param;
  .           
522 ( 0.01%)  	while((param = clish_paramv__get_param(paramv, i))) {
673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
214 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (44x)
  .           		clish_paramv_t *nested_paramv;
  .           
  .           		/* Resolve PARAM's PTYPE */
120 ( 0.00%)  		if (!resolve_ptype(this, param))
10,769 ( 0.18%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (19x)
  .           			return -1;
  .           
  .           		/* Check access for PARAM */
 48 ( 0.00%)  		if (access_fn && clish_param__get_access(param) &&
  .           			access_fn(this, clish_param__get_access(param))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove PARAM \"%s\"\n",
  .           				clish_param__get_name(param));
  .           #endif
  .           			if (clish_paramv_remove(paramv, i) < 0) {
  .           				fprintf(stderr, "Error: Some system problem\n");
  .           				return -1;
  .           			}
  .           			clish_param_delete(param);
  .           			continue; /* Don't increment index */
  .           		}
  .           		/* Recursive iterate nested PARAMs */
 76 ( 0.00%)  		nested_paramv = clish_param__get_paramv(param);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_paramv (18x)
144 ( 0.00%)  		if (iterate_paramv(this, nested_paramv, access_fn) < 0)
2,646 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv'2 (19x)
  .           			return -1;
 48 ( 0.00%)  		i++;
  .           	}
  .           
 50 ( 0.00%)  	return 0;
300 ( 0.01%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This function prepares schema for execution. It loads
  .            * plugins, link unresolved symbols, then iterates all the
  .            * objects and link them to each other, check access
  .            * permissions. Don't execute clish_shell_startup() without this
  .            * function.
  .            */
  .           int clish_shell_prepare(clish_shell_t *this)
  8 ( 0.00%)  {
  .           	clish_command_t *cmd;
  .           	clish_view_t *view;
  .           	clish_nspace_t *nspace;
  .           	lub_bintree_t *view_tree, *cmd_tree;
  .           	lub_list_t *nspace_tree;
  .           	lub_bintree_iterator_t cmd_iter, view_iter;
  .           	lub_list_node_t *nspace_iter;
  .           	clish_hook_access_fn_t *access_fn = NULL;
  .           	clish_paramv_t *paramv;
  .           	int i = 0;
  .           
  .           	/* Add statically linked plugins */
  4 ( 0.00%)  	while (clish_plugin_builtin_list[i].name) {
  .           		clish_plugin_t *plugin;
  .           		plugin = clish_shell_find_create_plugin(this,
  .           			clish_plugin_builtin_list[i].name);
  .           		clish_plugin_add_init(plugin,
  .           			clish_plugin_builtin_list[i].init);
  .           		clish_plugin__set_builtin_flag(plugin, BOOL_TRUE);
  .           		i++;
  .           	}
  .           
  .           	/* Add default plugin to the list of plugins */
  5 ( 0.00%)  	if (this->default_plugin) {
  9 ( 0.00%)  		clish_shell_find_create_plugin(this, "clish");
3,187 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* Default hooks */
 11 ( 0.00%)  		for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 15 ( 0.00%)  			if (this->hooks_use[i])
  .           				continue;
 20 ( 0.00%)  			if (!clish_plugin_default_hook[i])
  .           				continue;
 18 ( 0.00%)  			clish_sym__set_name(this->hooks[i],
957 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
640 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_name (2x)
  .           				clish_plugin_default_hook[i]);
  .           		}
  .           	}
  .           	/* Add default syms to unresolved table */
 10 ( 0.00%)  	for (i = 0; i < CLISH_SYM_TYPE_MAX; i++) {
 25 ( 0.00%)  		if (clish_sym__get_name(this->hooks[i]))
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (5x)
 17 ( 0.00%)  			lub_list_add(this->syms, this->hooks[i]);
1,171 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (3x)
  .           	}
  .           
  .           	/* Load plugins and link symbols */
  9 ( 0.00%)  	if (clish_shell_load_plugins(this) < 0)
155,815 ( 2.66%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  9 ( 0.00%)  	if (clish_shell_link_plugins(this) < 0)
10,280 ( 0.18%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		return -1;
  .           
 12 ( 0.00%)  	access_fn = clish_sym__get_func(clish_shell_get_hook(this, CLISH_SYM_TYPE_ACCESS));
648 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_func (1x)
  .           
  .           	/* Iterate the VIEWs */
  .           	view_tree = &this->view_tree;
  9 ( 0.00%)  	view = lub_bintree_findfirst(view_tree);
1,054 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 23 ( 0.00%)  	for (lub_bintree_iterator_init(&view_iter, view_tree, view);
951 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 20 ( 0.00%)  		view; view = lub_bintree_iterator_next(&view_iter)) {
1,901 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (5x)
  .           		/* Check access rights for the VIEW */
 10 ( 0.00%)  		if (access_fn && clish_view__get_access(view) &&
  .           			access_fn(this, clish_view__get_access(view))) {
  .           #ifdef DEBUG
  .           			fprintf(stderr, "Warning: Access denied. Remove VIEW \"%s\"\n",
  .           				clish_view__get_name(view));
  .           #endif
  .           			lub_bintree_remove(view_tree, view);
  .           			clish_view_delete(view);
  .           			continue;
  .           		}
  .           
  .           		/* Iterate the NAMESPACEs */
 24 ( 0.00%)  		nspace_tree = clish_view__get_nspace_tree(view);
703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_nspace_tree (4x)
 20 ( 0.00%)  		nspace_iter = lub_list__get_head(nspace_tree);
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (5x)
 10 ( 0.00%)  		while(nspace_iter) {
  .           			clish_view_t *ref_view;
  .           			lub_list_node_t *old_nspace_iter;
  .           			nspace = (clish_nspace_t *)lub_list_node__get_data(nspace_iter);
  .           			old_nspace_iter = nspace_iter;
  .           			nspace_iter = lub_list_node__get_next(nspace_iter);
  .           			/* Resolve NAMESPACEs and remove unresolved ones */
  .           			ref_view = clish_shell_find_view(this, clish_nspace__get_view_name(nspace));
  .           			if (!ref_view) {
-- line 235 ----------------------------------------
-- line 259 ----------------------------------------
  .           				lub_list_del(nspace_tree, old_nspace_iter);
  .           				lub_list_node_free(old_nspace_iter);
  .           				clish_nspace_delete(nspace);
  .           				continue;
  .           			}
  .           		}
  .           
  .           		/* Iterate the COMMANDs */
 24 ( 0.00%)  		cmd_tree = clish_view__get_command_tree(view);
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view__get_command_tree (4x)
 20 ( 0.00%)  		cmd = lub_bintree_findfirst(cmd_tree);
441 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findfirst.c:lub_bintree_findfirst (5x)
 88 ( 0.00%)  		for (lub_bintree_iterator_init(&cmd_iter, cmd_tree, cmd);
204 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_init.c:lub_bintree_iterator_init (5x)
108 ( 0.00%)  			cmd; cmd = lub_bintree_iterator_next(&cmd_iter)) {
3,573 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
24,274 ( 0.41%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c:lub_bintree_iterator_next (25x)
108 ( 0.00%)  			int cmd_is_alias = clish_command__get_alias(cmd)?1:0;
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_alias (25x)
  .           			clish_param_t *args = NULL;
  .           
  .           			/* Check access rights for the COMMAND */
 52 ( 0.00%)  			if (access_fn && clish_command__get_access(cmd) &&
  .           				access_fn(this, clish_command__get_access(cmd))) {
  .           #ifdef DEBUG
  .           				fprintf(stderr, "Warning: Access denied. Remove COMMAND \"%s\" from VIEW \"%s\"\n",
  .           					clish_command__get_name(cmd), clish_view__get_name(view));
  .           #endif
  .           				lub_bintree_remove(cmd_tree, cmd);
  .           				clish_command_delete(cmd);
  .           				continue;
  .           			}
  .           
  .           			/* Resolve command aliases */
 52 ( 0.00%)  			if (cmd_is_alias) {
  .           				clish_view_t *aview;
  .           				clish_command_t *cmdref;
 26 ( 0.00%)  				const char *alias_view = clish_command__get_alias_view(cmd);
  .           				if (!alias_view)
  .           					aview = clish_command__get_pview(cmd);
  .           				else
  .           					aview = clish_shell_find_view(this, alias_view);
  .           				if (!aview /* Removed or broken VIEW */
  .           					||
  .           					/* Removed or broken referenced COMMAND */
  .           					!(cmdref = clish_view_find_command(aview, clish_command__get_alias(cmd), BOOL_FALSE))
-- line 298 ----------------------------------------
-- line 328 ----------------------------------------
  .           					lub_bintree_remove(cmd_tree, cmd);
  .           					clish_command_delete(cmd);
  .           					continue;
  .           				}
  .           			}
  .           			if (cmd_is_alias) /* Don't duplicate paramv processing for aliases */
  .           				continue;
  .           			/* Iterate PARAMeters */
 56 ( 0.00%)  			paramv = clish_command__get_paramv(cmd);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (25x)
156 ( 0.00%)  			if (iterate_paramv(this, paramv, access_fn) < 0)
16,132 ( 0.28%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:iterate_paramv (26x)
  .           				return -1;
  .           			/* Resolve PTYPE for args */
134 ( 0.00%)  			if ((args = clish_command__get_args(cmd))) {
671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (25x)
  5 ( 0.00%)  				if (!resolve_ptype(this, args))
608 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_startup.c:resolve_ptype (1x)
  .           					return -1;
  .           			}
  .           		}
  .           	}
  .           
  2 ( 0.00%)  	return 0;
  8 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/string/string.c
--------------------------------------------------------------------------------
Ir              

-- line 10 ----------------------------------------
     .           
     .           const char *lub_string_esc_default = "`|$<>&()#;\\\"!";
     .           const char *lub_string_esc_regex = "^$.*+[](){}";
     .           const char *lub_string_esc_quoted = "\\\"";
     .           
     .           /*--------------------------------------------------------- */
     .           void lub_string_free(char *ptr)
     .           {
   520 ( 0.01%)  	free(ptr);
21,158 ( 0.36%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (257x)
 1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_ndecode(const char *string, unsigned int len)
   436 ( 0.01%)  {
     .           	const char *s = string;
     .           	char *res, *p;
     .           	int esc = 0;
     .           
   218 ( 0.00%)  	if (!string)
     .           		return NULL;
     .           
     .           	/* Allocate enough memory for result */
   436 ( 0.01%)  	p = res = malloc(len + 1);
13,103 ( 0.22%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (109x)
     .           
 4,378 ( 0.07%)  	while (*s && (s < (string +len))) {
 1,340 ( 0.02%)  		if (!esc) {
 1,340 ( 0.02%)  			if ('\\' == *s)
   670 ( 0.01%)  				esc = 1;
     .           			else
     .           				*p = *s;
     .           		} else {
     .           /*			switch (*s) {
     .           			case 'r':
     .           			case 'n':
     .           				*p = '\n';
     .           				break;
     .           			case 't':
     .           				*p = '\t';
     .           				break;
     .           			default:
     .           				*p = *s;
     .           				break;
     .           			}
   670 ( 0.01%)  */			*p = *s;
     .           			esc = 0;
     .           		}
     .           		if (!esc)
 1,340 ( 0.02%)  			p++;
   670 ( 0.01%)  		s++;
     .           	}
   109 ( 0.00%)  	*p = '\0';
     .           
     .           	return res;
   436 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           inline char *lub_string_decode(const char *string)
     .           {
     .           	return lub_string_ndecode(string, strlen(string));
     .           }
     .           
     .           /*----------------------------------------------------------- */
-- line 71 ----------------------------------------
-- line 95 ----------------------------------------
     .           			break;
     .           		}
     .           	}
     .           	return result;
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           void lub_string_catn(char **string, const char *text, size_t len)
   972 ( 0.02%)  {
   324 ( 0.01%)  	if (text) {
     .           		char *q;
   810 ( 0.01%)  		size_t length, initlen, textlen = strlen(text);
 3,076 ( 0.05%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (162x)
     .           
     .           		/* make sure the client cannot give us duff details */
   324 ( 0.01%)  		len = (len < textlen) ? len : textlen;
     .           
     .           		/* remember the size of the original string */
 1,012 ( 0.02%)  		initlen = *string ? strlen(*string) : 0;
 2,618 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (101x)
     .           
     .           		/* account for '\0' */
   162 ( 0.00%)  		length = initlen + len + 1;
     .           
     .           		/* allocate the memory for the result */
   490 ( 0.01%)  		q = realloc(*string, length);
24,771 ( 0.42%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (161x)
 1,846 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   324 ( 0.01%)  		if (NULL != q) {
   162 ( 0.00%)  			*string = q;
     .           			/* move to the end of the initial string */
   162 ( 0.00%)  			q += initlen;
     .           
 3,314 ( 0.06%)  			while (len--) {
 3,774 ( 0.06%)  				*q++ = *text++;
     .           			}
   162 ( 0.00%)  			*q = '\0';
     .           		}
     .           	}
   972 ( 0.02%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           void lub_string_cat(char **string, const char *text)
   805 ( 0.01%)  {
   970 ( 0.02%)  	size_t len = text ? strlen(text) : 0;
 1,456 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 3,026 ( 0.05%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (160x)
   648 ( 0.01%)  	lub_string_catn(string, text, len);
43,162 ( 0.74%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_catn (160x)
 2,759 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   483 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_dup(const char *string)
     .           {
   782 ( 0.01%)  	if (!string)
     .           		return NULL;
   718 ( 0.01%)  	return strdup(string);
75,825 ( 1.29%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (356x)
 1,754 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    68 ( 0.00%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_dupn(const char *string, unsigned int len)
   201 ( 0.00%)  {
     .           	char *res = NULL;
     .           
   268 ( 0.00%)  	if (!string)
     .           		return res;
   268 ( 0.00%)  	res = malloc(len + 1);
 7,272 ( 0.12%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (67x)
   339 ( 0.01%)  	strncpy(res, string, len);
 2,004 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (66x)
 1,584 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    67 ( 0.00%)  	res[len] = '\0';
     .           
     .           	return res;
   335 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           int lub_string_nocasecmp(const char *cs, const char *ct)
 9,606 ( 0.16%)  {
     .           	int result = 0;
43,932 ( 0.75%)  	while ((0 == result) && *cs && *ct) {
     .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
     .           		 * MACRO implementation uses braces to prevent multiple increments
     .           		 * when called.
     .           		 */
25,439 ( 0.43%)  		int s = lub_ctype_tolower(*cs++);
55,946 ( 0.95%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (5,086x)
 2,407 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
25,435 ( 0.43%)  		int t = lub_ctype_tolower(*ct++);
55,957 ( 0.95%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (5,087x)
     .           
     .           		result = s - t;
     .           	}
     .           	/*lint -e774 Boolean within 'if' always evealuates to True 
     .           	 * not the case because of tolower() evaluating to 0 under lint
     .           	 * (see above)
     .           	 */
     .           	if (0 == result) {
     .           		/* account for different string lengths */
   749 ( 0.01%)  		result = *cs - *ct;
     .           	}
     .           	return result;
 8,005 ( 0.14%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char *lub_string_tolower(const char *str)
     .           {
     .           	char *tmp = strdup(str);
     .           	char *p = tmp;
     .           
     .           	while (*p) {
-- line 192 ----------------------------------------
-- line 194 ----------------------------------------
     .           		p++;
     .           	}
     .           
     .           	return tmp;
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           const char *lub_string_nocasestr(const char *cs, const char *ct)
   546 ( 0.01%)  {
     .           	const char *p = NULL;
    29 ( 0.00%)  	const char *result = NULL;
     .           
   574 ( 0.01%)  	while (*cs) {
     .           		const char *q = cs;
     .           
     .           		p = ct;
     .           		/*lint -e155 Ignoring { }'ed sequence within an expression, 0 assumed 
     .           		 * MACRO implementation uses braces to prevent multiple increments
     .           		 * when called.
     .           		 */
     .           		/*lint -e506 Constant value Boolean
     .           		 * not the case because of tolower() evaluating to 0 under lint
     .           		 * (see above)
     .           		 */
 1,565 ( 0.03%)  		while (*p && *q
 1,704 ( 0.03%)  		       && (lub_ctype_tolower(*p) == lub_ctype_tolower(*q))) {
 4,686 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_tolower (426x)
    88 ( 0.00%)  			p++, q++;
     .           		}
   338 ( 0.01%)  		if (0 == *p) {
     .           			break;
     .           		}
   170 ( 0.00%)  		cs++;
     .           	}
    58 ( 0.00%)  	if (p && !*p) {
     .           		/* we've found the first match of ct within cs */
     .           		result = cs;
     .           	}
     .           	return result;
   546 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           unsigned int lub_string_equal_part(const char *str1, const char *str2,
     .           	bool_t utf8)
     .           {
     .           	unsigned int cnt = 0;
     .           
   260 ( 0.00%)  	if (!str1 || !str2)
     .           		return cnt;
 1,955 ( 0.03%)  	while (*str1 && *str2) {
 1,898 ( 0.03%)  		if (*str1 != *str2)
     .           			break;
   819 ( 0.01%)  		cnt++;
   434 ( 0.01%)  		str1++;
   434 ( 0.01%)  		str2++;
     .           	}
    98 ( 0.00%)  	if (!utf8)
     .           		return cnt;
     .           
     .           	/* UTF8 features */
   196 ( 0.00%)  	if (cnt && (UTF8_11 == (*(str1 - 1) & UTF8_MASK)))
   147 ( 0.00%)  		cnt--;
     .           
     .           	return cnt;
    16 ( 0.00%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           const char *lub_string_suffix(const char *string)
   120 ( 0.00%)  {
     .           	const char *p1, *p2;
     .           	p1 = p2 = string;
   714 ( 0.01%)  	while (*p1) {
   568 ( 0.01%)  		if (lub_ctype_isspace(*p1)) {
 2,431 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c:lub_ctype_isspace (187x)
   777 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			p2 = p1;
   564 ( 0.01%)  			p2++;
     .           		}
     .           		p1++;
     .           	}
     .           	return p2;
   150 ( 0.00%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           const char *lub_string_nextword(const char *string,
     .           	size_t *len, size_t *offset, size_t *quoted)
 6,328 ( 0.11%)  {
     .           	const char *word;
     .           
   791 ( 0.01%)  	*quoted = 0;
     .           
     .           	/* Find the start of a word (not including an opening quote) */
 7,250 ( 0.12%)  	while (*string && isspace(*string)) {
 1,452 ( 0.02%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (484x)
 1,542 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   545 ( 0.01%)  		string++;
   190 ( 0.00%)  		(*offset)++;
     .           	}
     .           	/* Is this the start of a quoted string ? */
 1,308 ( 0.02%)  	if (*string == '"') {
     .           		*quoted = 1;
     .           		string++;
     .           	}
     .           	word = string;
 1,582 ( 0.03%)  	*len = 0;
     .           
     .           	/* Find the end of the word */
 7,529 ( 0.13%)  	while (*string) {
 5,536 ( 0.09%)  		if (*string == '\\') {
     .           			string++;
     .           			(*len)++;
     .           			if (*string) {
     .           				(*len)++;
     .           				string++;
     .           			}
     .           			continue;
     .           		}
     .           		/* End of word */
22,144 ( 0.38%)  		if (!*quoted && isspace(*string))
 8,304 ( 0.14%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (2,768x)
     .           			break;
 5,156 ( 0.09%)  		if (*string == '"') {
     .           			/* End of a quoted string */
     .           			*quoted = 2;
     .           			break;
     .           		}
 2,578 ( 0.04%)  		(*len)++;
 5,156 ( 0.09%)  		string++;
     .           	}
     .           
     .           	return word;
 5,537 ( 0.09%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           unsigned int lub_string_wordcount(const char *line)
 1,505 ( 0.03%)  {
     .           	const char *word;
   301 ( 0.01%)  	unsigned int result = 0;
   602 ( 0.01%)  	size_t len = 0, offset = 0;
     .           	size_t quoted;
     .           
 3,969 ( 0.07%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
37,872 ( 0.65%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (300x)
 2,674 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   602 ( 0.01%)  		*word || quoted;
 1,962 ( 0.03%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
22,548 ( 0.38%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (327x)
     .           		/* account for the terminating quotation mark */
 1,936 ( 0.03%)  		len += quoted ? quoted - 1 : 0;
   327 ( 0.01%)  		result++;
     .           	}
     .           
     .           	return result;
 2,107 ( 0.04%)  }
     .           
     .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c
--------------------------------------------------------------------------------
Ir           

-- line 11 ----------------------------------------
  .           #include <string.h>
  .           #include <assert.h>
  .           #include <limits.h>
  .           #include <stdio.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
108 ( 0.00%)  static char *clish_ptype_select__get_name(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 76 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
829 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
346 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (35x)
107 ( 0.00%)  	if (arg) {
140 ( 0.00%)  		size_t name_len = strlen(arg);
938 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (35x)
144 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
1,504 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
782 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (34x)
  .           		if (lbrk)
140 ( 0.00%)  			name_len = (size_t) (lbrk - arg);
144 ( 0.00%)  		result = lub_string_dupn(arg, name_len);
5,385 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (34x)
2,566 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           	return result;
110 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_select__get_value(const clish_ptype_t * this,
  .           	unsigned index)
  .           {
  .           	char *result = NULL;
 75 ( 0.00%)  	const char *arg = lub_argv__get_arg(this->u.select.items, index);
150 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (15x)
 30 ( 0.00%)  	if (arg) {
 75 ( 0.00%)  		const char *lbrk = strchr(arg, '(');
345 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (15x)
 75 ( 0.00%)  		const char *rbrk = strchr(arg, ')');
705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (15x)
  .           		const char *value = arg;
 45 ( 0.00%)  		size_t value_len = strlen(arg);
510 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (15x)
 45 ( 0.00%)  		if (lbrk) {
 15 ( 0.00%)  			value = lbrk + 1;
  .           			if (rbrk)
 60 ( 0.00%)  				value_len = (size_t) (rbrk - value);
  .           		}
 75 ( 0.00%)  		result = lub_string_dupn(value, value_len);
2,445 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (15x)
  .           	}
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype__set_range(clish_ptype_t * this)
  .           {
  .           	char tmp[80];
  .           
  .           	/* Now set up the range values */
 75 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* Nothing more to do */
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* Setup the integer range */
 12 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%d..%d",
  .           			this->u.integer.min, this->u.integer.max);
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		this->range = lub_string_dup(tmp);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* Setup the unsigned integer range */
 15 ( 0.00%)  		snprintf(tmp, sizeof(tmp), "%u..%u",
2,947 ( 0.05%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (3x)
  .           			(unsigned int)this->u.integer.min,
  .           			(unsigned int)this->u.integer.max);
  3 ( 0.00%)  		tmp[sizeof(tmp) - 1] = '\0';
 12 ( 0.00%)  		this->range = lub_string_dup(tmp);
680 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		/* Setup the selection values to the help text */
  .           		unsigned int i;
  .           
121 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items); i++) {
870 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 38 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (19x)
 68 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
8,855 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (17x)
  .           
 34 ( 0.00%)  			if (i > 0)
 73 ( 0.00%)  				lub_string_cat(&this->range, "/");
3,648 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (14x)
128 ( 0.00%)  			snprintf(tmp, sizeof(tmp), "%s", name);
8,790 ( 0.15%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (17x)
 17 ( 0.00%)  			tmp[sizeof(tmp) - 1] = '\0';
 68 ( 0.00%)  			lub_string_cat(&this->range, tmp);
5,400 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (17x)
 51 ( 0.00%)  			lub_string_free(name);
1,530 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (17x)
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           int clish_ptype_bt_compare(const void *clientnode, const void *clientkey)
  .           {
  .           	const clish_ptype_t *this = clientnode;
  .           	const char *key = clientkey;
  .           
768 ( 0.01%)  	return strcmp(this->name, key);
7,532 ( 0.13%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (256x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_ptype_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
 12 ( 0.00%)  {
  .           	const clish_ptype_t *this = clientnode;
  .           
  .           	/* fill out the opaque key */
 48 ( 0.00%)  	strcpy((char *)key, this->name);
268 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           size_t clish_ptype_bt_offset(void)
  .           {
  .           	return offsetof(clish_ptype_t, bt_node);
  2 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *method_names[] = {
  .           	"regexp",
  .           	"integer",
  .           	"unsignedInteger",
  .           	"select"
  .           };
-- line 137 ----------------------------------------
-- line 143 ----------------------------------------
  .           
  .           	if (method >= max_method)
  .           		return NULL;
  .           	return method_names[method];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_method_e clish_ptype_method_resolve(const char *name)
 36 ( 0.00%)  {
 10 ( 0.00%)  	clish_ptype_method_e result = CLISH_PTYPE_REGEXP;
 22 ( 0.00%)  	if (NULL != name) {
  .           		unsigned i;
 36 ( 0.00%)  		for (i = 0; i < CLISH_PTYPE_SELECT + 1; i++) {
114 ( 0.00%)  			if (0 == strcmp(name, method_names[i])) {
378 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (18x)
  .           				result = (clish_ptype_method_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
  .           		assert(i <= CLISH_PTYPE_SELECT);
  .           	}
  .           	return result;
 24 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static const char *preprocess_names[] = {
  .           	"none",
  .           	"toupper",
  .           	"tolower"
  .           };
  .           
-- line 173 ----------------------------------------
-- line 176 ----------------------------------------
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	return preprocess_names[preprocess];
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_preprocess_e clish_ptype_preprocess_resolve(const char *name)
  .           {
 22 ( 0.00%)  	clish_ptype_preprocess_e result = CLISH_PTYPE_NONE;
 22 ( 0.00%)  	if (name) {
  .           		unsigned i;
  .           		for (i = 0; i < CLISH_PTYPE_TOLOWER + 1; i++) {
  .           			if (0 == strcmp(name, preprocess_names[i])) {
  .           				result = (clish_ptype_preprocess_e) i;
  .           				break;
  .           			}
  .           		}
  .           		/* error for incorrect type spec */
-- line 193 ----------------------------------------
-- line 198 ----------------------------------------
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC METHODS
  .            *--------------------------------------------------------- */
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype_word_generator(clish_ptype_t * this,
  .           	lub_argv_t *matches, const char *text)
 16 ( 0.00%)  {
  .           	char *result = NULL;
  .           	unsigned i = 0;
  .           
  .           	/* Another ptypes has no completions */
  8 ( 0.00%)  	if (this->method != CLISH_PTYPE_SELECT)
  .           		return;
  .           
  .           	/* First of all simply try to validate the result */
 14 ( 0.00%)  	result = clish_ptype_validate(this, text);
3,299 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,733 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate (1x)
  4 ( 0.00%)  	if (result) {
  4 ( 0.00%)  		lub_argv_add(matches, result);
312 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add (1x)
  3 ( 0.00%)  		lub_string_free(result);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  .           		return;
  .           	}
  .           
  .           	/* Iterate possible completion */
 27 ( 0.00%)  	while ((result = clish_ptype_select__get_name(this, i++))) {
759 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (4x)
  .           		/* get the next item and check if it is a completion */
 18 ( 0.00%)  		if (result == lub_string_nocasestr(result, text))
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasestr (3x)
 15 ( 0.00%)  			lub_argv_add(matches, result);
1,257 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add (3x)
  9 ( 0.00%)  		lub_string_free(result);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
  .           	}
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *clish_ptype_validate_or_translate(const clish_ptype_t * this,
  .           	const char *text, bool_t translate)
 45 ( 0.00%)  {
 15 ( 0.00%)  	char *result = lub_string_dup(text);
776 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 15 ( 0.00%)  	assert(this->pattern);
  .           
 25 ( 0.00%)  	switch (this->preprocess) {
  .           	/*----------------------------------------- */
  .           	case CLISH_PTYPE_NONE:
  .           		break;
  .           	/*----------------------------------------- */
  .           	case CLISH_PTYPE_TOUPPER:
  .           	{
  .           		char *p = result;
  .           		while (*p) {
-- line 246 ----------------------------------------
-- line 263 ----------------------------------------
  .           		}
  .           		break;
  .           	}
  .           	/*----------------------------------------- */
  .           	}
  .           	/*
  .           	 * now validate according the specified method 
  .           	 */
 45 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           		/* test the regular expression against the string */
  .           		/*lint -e64 Type mismatch (arg. no. 4) */
  .           		/*
  .           		 * lint seems to equate regmatch_t[] as being of type regmatch_t !
  .           		 */
  .           		if (0 != regexec(&this->u.regexp, result, 0, NULL, 0)) {
-- line 279 ----------------------------------------
-- line 329 ----------------------------------------
  .           			unsigned int value = 0;
  .           			if ((lub_conv_atoui(result, &value, 0) < 0) ||
  .           				(value < (unsigned)this->u.integer.min) ||
  .           				(value > (unsigned)this->u.integer.max)) {
  .           				lub_string_free(result);
  .           				result = NULL;
  .           			}
  .           		} else {
  4 ( 0.00%)  			lub_string_free(result);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  1 ( 0.00%)  			result = NULL;
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
  .           	{
  .           		unsigned i;
 80 ( 0.00%)  		for (i = 0; i < lub_argv__get_count(this->u.select.items);
 32 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (16x)
 11 ( 0.00%)  			i++) {
 61 ( 0.00%)  			char *name = clish_ptype_select__get_name(this, i);
3,705 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_select__get_name.isra.0 (15x)
  .           			char *value = clish_ptype_select__get_value(this, i);
 75 ( 0.00%)  			int tmp = lub_string_nocasecmp(result, name);
1,000 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (15x)
 75 ( 0.00%)  			lub_string_free((BOOL_TRUE ==
1,350 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (15x)
  .           				translate) ? name : value);
 42 ( 0.00%)  			if (0 == tmp) {
 16 ( 0.00%)  				lub_string_free(result);
360 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (4x)
  .           				result = ((BOOL_TRUE ==
  .           					translate) ? value : name);
  .           				break;
  .           			} else {
 33 ( 0.00%)  				lub_string_free((BOOL_TRUE ==
990 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (11x)
  .           					translate) ? value : name);
  .           			}
  .           		}
 26 ( 0.00%)  		if (i == lub_argv__get_count(this->u.select.items)) {
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (5x)
  .           			/* failed to find a match */
  .           			lub_string_free(result);
  .           			result = NULL;
  .           		}
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	}
  .           	return (char *)result;
 45 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_init(clish_ptype_t * this,
  .           	const char *name, const char *text, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
  .           {
 26 ( 0.00%)  	assert(name);
 52 ( 0.00%)  	this->name = lub_string_dup(name);
2,760 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
 13 ( 0.00%)  	this->text = NULL;
 13 ( 0.00%)  	this->pattern = NULL;
 13 ( 0.00%)  	this->preprocess = preprocess;
 13 ( 0.00%)  	this->range = NULL;
  .           
  .           	/* Be a good binary tree citizen */
 43 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
947 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 60 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (12x)
  .           
 26 ( 0.00%)  	if (pattern) {
  .           		/* set the pattern for this type */
 69 ( 0.00%)  		clish_ptype__set_pattern(this, pattern, method);
1,917,560 (32.71%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_pattern (12x)
148,076 ( 2.53%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	} else {
  .           		/* The method is regexp by default */
  .           		this->method = CLISH_PTYPE_REGEXP;
  .           	}
  .           	
  .           	/* set the help text for this type */
 26 ( 0.00%)  	if (text)
 56 ( 0.00%)  		clish_ptype__set_text(this, text);
832 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,284 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype__set_text (12x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_validate(const clish_ptype_t * this, const char *text)
  .           {
  4 ( 0.00%)  	return clish_ptype_validate_or_translate(this, text, BOOL_FALSE);
5,375 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate_or_translate (2x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_ptype_translate(const clish_ptype_t * this, const char *text)
  .           {
  6 ( 0.00%)  	return clish_ptype_validate_or_translate(this, text, BOOL_TRUE);
8,202 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_validate_or_translate (3x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_ptype_new(const char *name,
  .           	const char *help, const char *pattern,
  .           	clish_ptype_method_e method, clish_ptype_preprocess_e preprocess)
156 ( 0.00%)  {
 52 ( 0.00%)  	clish_ptype_t *this = malloc(sizeof(clish_ptype_t));
4,666 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (13x)
  .           
 26 ( 0.00%)  	if (this)
  .           		clish_ptype_init(this, name, help, pattern, method, preprocess);
  .           	return this;
117 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_ptype_fini(clish_ptype_t * this)
  .           {
  .           	if (this->pattern) {
  .           		switch (this->method) {
  .           		case CLISH_PTYPE_REGEXP:
  .           			regfree(&this->u.regexp);
-- line 433 ----------------------------------------
-- line 469 ----------------------------------------
  .           {
  .           	return (const char *)this->text;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_pattern(clish_ptype_t * this,
  .           			 const char *pattern, clish_ptype_method_e method)
 91 ( 0.00%)  {
 26 ( 0.00%)  	assert(NULL == this->pattern);
 13 ( 0.00%)  	this->method = method;
  .           
 74 ( 0.00%)  	switch (this->method) {
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_REGEXP:
  .           	{
  .           		int result;
  .           
  .           		/* only the expression is allowed */
 39 ( 0.00%)  		lub_string_cat(&this->pattern, "^");
5,043 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,648 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (6x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, pattern);
3,484 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
 28 ( 0.00%)  		lub_string_cat(&this->pattern, "$");
1,814 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
  .           
  .           		/* compile the regular expression for later use */
 39 ( 0.00%)  		result = regcomp(&this->u.regexp, this->pattern,
1,846,745 (31.50%)  => /opt/build/glibc/glibc-2.24/posix/regcomp.c:regcomp (6x)
141,777 ( 2.42%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			REG_NOSUB | REG_EXTENDED);
 14 ( 0.00%)  		assert(0 == result);
  .           		break;
  .           	}
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_INTEGER:
  .           		/* default the range to that of an integer */
  3 ( 0.00%)  		this->u.integer.min = INT_MIN;
  3 ( 0.00%)  		this->u.integer.max = INT_MAX;
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
798 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* now try and read the specified range */
 28 ( 0.00%)  		sscanf(this->pattern, "%d..%d",
2,835 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,758 ( 0.05%)  => /opt/build/glibc/glibc-2.24/stdio-common/isoc99_sscanf.c:__isoc99_sscanf (2x)
  .           			&this->u.integer.min, &this->u.integer.max);
  3 ( 0.00%)  		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_UNSIGNEDINTEGER:
  .           		/* default the range to that of an unsigned integer */
  .           		this->u.integer.min = 0;
  .           		this->u.integer.max = (int)UINT_MAX;
  .           		this->pattern = lub_string_dup(pattern);
  .           		/* now try and read the specified range */
  .           		sscanf(this->pattern, "%u..%u",
  .           			(unsigned int *)&this->u.integer.min,
  .           			(unsigned int *)&this->u.integer.max);
  .           		break;
  .           	/*------------------------------------------------- */
  .           	case CLISH_PTYPE_SELECT:
 12 ( 0.00%)  		this->pattern = lub_string_dup(pattern);
808 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           		/* store a vector of item descriptors */
 29 ( 0.00%)  		this->u.select.items = lub_argv_new(this->pattern, 0);
16,031 ( 0.27%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,229 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (2x)
  .           		break;
  .           	/*------------------------------------------------- */
  .           	}
  .           	/* now set up the range details */
  .           	clish_ptype__set_range(this);
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_ptype__set_text(clish_ptype_t * this, const char *text)
 13 ( 0.00%)  {
 39 ( 0.00%)  	assert(!this->text);
 52 ( 0.00%)  	this->text = lub_string_dup(text);
3,317 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (13x)
  .           
 26 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void
  .           clish_ptype__set_preprocess(clish_ptype_t * this,
  .           	clish_ptype_preprocess_e preprocess)
  .           {
  .           	assert(!this->preprocess);
  .           	this->preprocess = preprocess;
-- line 545 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c
--------------------------------------------------------------------------------
Ir             

-- line 12 ----------------------------------------
    .           /*--------------------------------------------------------- */
    .           static void lub_argv_init(lub_argv_t * this, const char *line, size_t offset)
    .           {
    .           	size_t len;
    .           	const char *word;
    .           	lub_arg_t *arg;
    .           	size_t quoted;
    .           
  124 ( 0.00%)  	this->argv = NULL;
  124 ( 0.00%)  	this->argc = 0;
  372 ( 0.01%)  	if (!line)
    .           		return;
    .           	/* first of all count the words in the line */
  460 ( 0.01%)  	this->argc = lub_string_wordcount(line);
23,877 ( 0.41%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (113x)
6,376 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  228 ( 0.00%)  	if (0 == this->argc)
    .           		return;
    .           	/* allocate space to hold the vector */
  378 ( 0.01%)  	arg = this->argv = malloc(sizeof(lub_arg_t) * this->argc);
5,808 ( 0.10%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (54x)
  108 ( 0.00%)  	assert(arg);
    .           
    .           	/* then fill out the array with the words */
  920 ( 0.02%)  	for (word = lub_string_nextword(line, &len, &offset, &quoted);
8,053 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (54x)
  162 ( 0.00%)  		*word || quoted;
  763 ( 0.01%)  		word = lub_string_nextword(word + len, &len, &offset, &quoted)) {
12,661 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nextword (109x)
  549 ( 0.01%)  		(*arg).arg = lub_string_ndecode(word, len);
24,752 ( 0.42%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_ndecode (108x)
1,158 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  218 ( 0.00%)  		(*arg).offset = offset;
  545 ( 0.01%)  		(*arg).quoted = quoted ? BOOL_TRUE : BOOL_FALSE;
    .           
  327 ( 0.01%)  		offset += len;
    .           
  218 ( 0.00%)  		if (quoted) {
    .           			len += quoted - 1; /* account for terminating quotation mark */
    .           			offset += quoted; /* account for quotation marks */
    .           		}
  109 ( 0.00%)  		arg++;
    .           	}
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           lub_argv_t *lub_argv_new(const char *line, size_t offset)
1,116 ( 0.02%)  {
    .           	lub_argv_t *this;
    .           
  496 ( 0.01%)  	this = malloc(sizeof(lub_argv_t));
14,050 ( 0.24%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (124x)
  248 ( 0.00%)  	if (this)
    .           		lub_argv_init(this, line, offset);
    .           
    .           	return this;
1,116 ( 0.02%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_argv_add(lub_argv_t * this, const char *text)
  170 ( 0.00%)  {
    .           	lub_arg_t * arg;
    .           
   68 ( 0.00%)  	if (!text)
    .           		return;
    .           
    .           	/* allocate space to hold the vector */
  238 ( 0.00%)  	arg = realloc(this->argv, sizeof(lub_arg_t) * (this->argc + 1));
9,672 ( 0.16%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (34x)
   68 ( 0.00%)  	assert(arg);
   34 ( 0.00%)  	this->argv = arg;
  306 ( 0.01%)  	(this->argv[this->argc++]).arg = strdup(text);
5,127 ( 0.09%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (34x)
  136 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           static void lub_argv_fini(lub_argv_t * this)
    .           {
    .           	unsigned i;
    .           
  799 ( 0.01%)  	for (i = 0; i < this->argc; i++)
  882 ( 0.02%)  		free(this->argv[i].arg);
11,088 ( 0.19%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (126x)
  363 ( 0.01%)  	free(this->argv);
5,665 ( 0.10%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (121x)
    .           	this->argv = NULL;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_argv_delete(lub_argv_t * this)
  605 ( 0.01%)  {
    .           	lub_argv_fini(this);
  363 ( 0.01%)  	free(this);
10,648 ( 0.18%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (121x)
  363 ( 0.01%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *lub_argv__get_line(const lub_argv_t * this)
    .           {
    .           	int space = 0;
    .           	const char *p;
    .           	unsigned i;
    .           	char *line = NULL;
-- line 101 ----------------------------------------
-- line 118 ----------------------------------------
    .           			lub_string_cat(&line, "\"");
    .           	}
    .           
    .           	return line;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           char **lub_argv__get_argv(const lub_argv_t * this, const char *argv0)
   42 ( 0.00%)  {
    .           	char **result = NULL;
    .           	unsigned i;
    .           	unsigned a = 0;
    .           
   14 ( 0.00%)  	if (argv0)
    7 ( 0.00%)  		a = 1;
    .           
   49 ( 0.00%)  	result = malloc(sizeof(char *) * (this->argc + 1 + a));
  735 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (7x)
    .           
    .           	if (argv0)
   42 ( 0.00%)  		result[0] = strdup(argv0);
1,059 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (7x)
  144 ( 0.00%)  	for (i = 0; i < this->argc; i++)
  340 ( 0.01%)  		result[i + a] = strdup(this->argv[i].arg);
6,615 ( 0.11%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (34x)
    7 ( 0.00%)  	result[i + a] = NULL;
    .           
    .           	return result;
   49 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void lub_argv__free_argv(char **argv)
    .           {
    .           	unsigned i;
    .           
    .           	if (!argv)
    .           		return;
-- line 151 ----------------------------------------
-- line 155 ----------------------------------------
    .           	free(argv);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *lub_argv__get_arg(const lub_argv_t *this, unsigned int index)
    .           {
    .           	const char *result = NULL;
    .           
  236 ( 0.00%)  	if (!this)
    1 ( 0.00%)  		return NULL;
  236 ( 0.00%)  	if (this->argc > index)
  702 ( 0.01%)  		result = this->argv[index].arg;
    .           
    .           	return result;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned lub_argv__get_count(const lub_argv_t * this)
    .           {
  209 ( 0.00%)  	return this->argc;
  209 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           size_t lub_argv__get_offset(const lub_argv_t * this, unsigned index)
    .           {
    .           	size_t result = 0;
    .           
    .           	if (this->argc > index)
    .           		result = this->argv[index].offset;
-- line 183 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c
--------------------------------------------------------------------------------
Ir           

-- line 23 ----------------------------------------
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_compare(const void *first, const void *second)
  .           {
  .           	const clish_sym_t *f = (const clish_sym_t *)first;
  .           	const clish_sym_t *s = (const clish_sym_t *)second;
  .           
180 ( 0.00%)  	return strcmp(f->name, s->name);
1,194 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (45x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_sym_new(const char *name, void *func, int type)
168 ( 0.00%)  {
  .           	clish_sym_t *this;
  .           
 84 ( 0.00%)  	this = malloc(sizeof(*this));
4,434 ( 0.08%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (21x)
 88 ( 0.00%)  	this->name = lub_string_dup(name);
3,642 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (20x)
782 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 21 ( 0.00%)  	this->func = func;
 21 ( 0.00%)  	this->type = type;
 21 ( 0.00%)  	this->api = CLISH_SYM_API_SIMPLE;
 21 ( 0.00%)  	this->permanent = BOOL_FALSE;
  .           
  .           	return this;
147 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym_free(clish_sym_t *this)
  .           {
  .           	if (!this)
  .           		return;
  .           	lub_string_free(this->name);
  .           	free(this);
-- line 55 ----------------------------------------
-- line 59 ----------------------------------------
  .           void clish_sym__set_func(clish_sym_t *this, void *func)
  .           {
  .           	this->func = func;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void *clish_sym__get_func(clish_sym_t *this)
  .           {
 10 ( 0.00%)  	return this->func;
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_permanent(clish_sym_t *this, bool_t permanent)
  .           {
 26 ( 0.00%)  	this->permanent = permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_sym__get_permanent(clish_sym_t *this)
  .           {
  .           	return this->permanent;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_name(clish_sym_t *this, const char *name)
 15 ( 0.00%)  {
  9 ( 0.00%)  	lub_string_free(this->name);
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 12 ( 0.00%)  	this->name = lub_string_dup(name);
885 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 12 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_sym__get_name(clish_sym_t *this)
  .           {
 46 ( 0.00%)  	return this->name;
 46 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_plugin(clish_sym_t *this, clish_plugin_t *plugin)
  .           {
 26 ( 0.00%)  	this->plugin = plugin;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_sym__get_plugin(clish_sym_t *this)
  .           {
  .           	return this->plugin;
  .           }
  .           
-- line 106 ----------------------------------------
-- line 108 ----------------------------------------
  .           void clish_sym__set_type(clish_sym_t *this, int type)
  .           {
  .           	this->type = type;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym__get_type(const clish_sym_t *this)
  .           {
 13 ( 0.00%)  	return this->type;
 13 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_sym__set_api(clish_sym_t *this, clish_sym_api_e api)
  .           {
  2 ( 0.00%)  	this->api = api;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_api_e clish_sym__get_api(const clish_sym_t *this)
  .           {
  4 ( 0.00%)  	return this->api;
  4 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_sym_clone(clish_sym_t *dst, clish_sym_t *src)
  .           {
  .           	char *name;
  .           
 24 ( 0.00%)  	if (!dst || !src)
  .           		return -1;
  6 ( 0.00%)  	name = dst->name;
 60 ( 0.00%)  	*dst = *src;
  6 ( 0.00%)  	dst->name = name;
  .           
 12 ( 0.00%)  	return 0;
  .           }
  .           
  .           /**********************************************************
  .            * PLUGIN functions                                       *
  .            **********************************************************/
  .           
  .           /*--------------------------------------------------------- */
  .           clish_plugin_t *clish_plugin_new(const char *name)
  4 ( 0.00%)  {
  .           	clish_plugin_t *this;
  .           
  4 ( 0.00%)  	this = malloc(sizeof(*this));
344 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           
  4 ( 0.00%)  	this->name = lub_string_dup(name);
279 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
  1 ( 0.00%)  	this->conf = NULL;
  1 ( 0.00%)  	this->alias = NULL;
  1 ( 0.00%)  	this->file = NULL;
  1 ( 0.00%)  	this->builtin_flag = BOOL_FALSE; /* The plugin is shared object by default */
  1 ( 0.00%)  	this->dlhan = NULL;
  .           	/* Initialise the list of symbols */
  4 ( 0.00%)  	this->syms = lub_list_new(clish_sym_compare);
175 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_new (1x)
  .           	/* Constructor and destructor */
  1 ( 0.00%)  	this->init = NULL;
  1 ( 0.00%)  	this->fini = NULL;
  .           	/* Flags */
  1 ( 0.00%)  	this->rtld_global = BOOL_FALSE; /* The dlopen() use RTLD_LOCAL by default */
  .           
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_free(clish_plugin_t *this, void *userdata)
  .           {
  .           	lub_list_node_t *iter;
  .           
  .           	if (!this)
  .           		return;
-- line 179 ----------------------------------------
-- line 201 ----------------------------------------
  .           		dlclose(this->dlhan);
  .           #endif
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_generic(clish_plugin_t *this,
  .           	void *func, const char *name, int type, bool_t permanent)
 39 ( 0.00%)  {
  .           	clish_sym_t *sym;
  .           
 91 ( 0.00%)  	if (!name || !func)
  .           		return NULL;
  .           
 91 ( 0.00%)  	if (!(sym = clish_sym_new(name, func, type)))
6,299 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_new (13x)
  .           		return NULL;
 56 ( 0.00%)  	clish_sym__set_plugin(sym, this);
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_plugin (12x)
 56 ( 0.00%)  	clish_sym__set_permanent(sym, permanent);
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__set_permanent (12x)
 52 ( 0.00%)  	lub_list_add(this->syms, sym);
4,444 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_add (13x)
  .           
  .           	return sym;
 65 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_sym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
  .           	return clish_plugin_add_generic(this, func,
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_psym(clish_plugin_t *this,
  .           	clish_hook_action_fn_t *func, const char *name)
  .           {
 36 ( 0.00%)  	return clish_plugin_add_generic(this, func,
7,967 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (9x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_osym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  1 ( 0.00%)  {
  .           	clish_sym_t *s;
  .           
  7 ( 0.00%)  	if (!(s = clish_plugin_add_generic(this, func,
989 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (1x)
  .           		name, CLISH_SYM_TYPE_ACTION, BOOL_FALSE)))
  .           		return s;
  8 ( 0.00%)  	clish_sym__set_api(s, CLISH_SYM_API_STDOUT);
631 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return s;
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           /* Add permanent symbol (can't be turned off by dry-run) */
  .           clish_sym_t *clish_plugin_add_posym(clish_plugin_t *this,
  .           	clish_hook_oaction_fn_t *func, const char *name)
  .           {
  .           	clish_sym_t *s;
  .           
-- line 261 ----------------------------------------
-- line 274 ----------------------------------------
  .           	return clish_plugin_add_generic(this, func,
  .           		name, type, BOOL_FALSE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_add_phook(clish_plugin_t *this,
  .           	void *func, const char *name, int type)
  .           {
 13 ( 0.00%)  	return clish_plugin_add_generic(this, func,
2,633 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,671 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_plugin_add_generic (2x)
  .           		name, type, BOOL_TRUE);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin_add_fini(clish_plugin_t *this,
  .           	clish_plugin_fini_t *fini)
  .           {
  .           	this->fini = fini;
-- line 290 ----------------------------------------
-- line 306 ----------------------------------------
  .           /*--------------------------------------------------------- */
  .           clish_plugin_init_t * clish_plugin_get_init(clish_plugin_t *this)
  .           {
  .           	return this->init;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_sym_t *clish_plugin_get_sym(clish_plugin_t *this, const char *name, int type)
 42 ( 0.00%)  {
  .           	lub_list_node_t *iter;
  .           	clish_sym_t *sym;
  .           
  .           	/* Iterate elements */
 86 ( 0.00%)  	for(iter = lub_list__get_head(this->syms);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list__get_head (6x)
100 ( 0.00%)  		iter; iter = lub_list_node__get_next(iter)) {
 50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_next (25x)
  .           		int res;
124 ( 0.00%)  		sym = (clish_sym_t *)lub_list_node__get_data(iter);
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node__get_data (31x)
217 ( 0.00%)  		res = strcmp(clish_sym__get_name(sym), name);
891 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (31x)
 62 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_name (31x)
104 ( 0.00%)  		if (!res && ((CLISH_SYM_TYPE_NONE == type) || (clish_sym__get_type(sym) == type)))
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym__get_type (6x)
  .           			return sym;
 25 ( 0.00%)  		if (res > 0) /* No chances to find name */
  .           			break;
  .           	}
  .           
  .           	return NULL;
 42 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static int clish_plugin_load_shared(clish_plugin_t *this)
  .           {
  .           #ifdef HAVE_DLFCN_H
  1 ( 0.00%)  	char *file = NULL; /* Plugin so file name */
  1 ( 0.00%)  	char *init_name = NULL; /* Init function name */
  .           	int flag = RTLD_NOW;
  .           
  3 ( 0.00%)  	if (this->file) {
  .           		file = lub_string_dup(this->file);
  .           	} else {
  4 ( 0.00%)  		lub_string_cat(&file, "clish_plugin_");
343 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  		lub_string_cat(&file, this->name);
264 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  5 ( 0.00%)  		lub_string_cat(&file, ".so");
272 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  .           	}
  .           
  .           	/* Open dynamic library */
  7 ( 0.00%)  	if (clish_plugin__get_rtld_global(this))
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  4 ( 0.00%)  		flag |= RTLD_GLOBAL;
  .           	else
  .           		flag |= RTLD_LOCAL;
  8 ( 0.00%)  	this->dlhan = dlopen(file, flag);
133,732 ( 2.28%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(file);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  2 ( 0.00%)  	if (!this->dlhan) {
  .           		fprintf(stderr, "Error: Can't open plugin \"%s\": %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	/* Get plugin init function */
  5 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_PREFIX);
286 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, this->name);
264 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&init_name, CLISH_PLUGIN_INIT_NAME_SUFFIX);
282 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  9 ( 0.00%)  	this->init = (clish_plugin_init_t *)dlsym(this->dlhan, init_name);
4,005 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(init_name);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  3 ( 0.00%)  	if (!this->init) {
  .           		fprintf(stderr, "Error: Can't get plugin \"%s\" init function: %s\n",
  .           			this->name, dlerror());
  .           		return -1;
  .           	}
  .           
  .           	return 0;
  .           #else /* HAVE_DLFCN_H */
  .           	/* We have no any dl functions. */
-- line 376 ----------------------------------------
-- line 377 ----------------------------------------
  .           	fprintf(stderr, "Error: Can't get plugin \"%s\" init function.\n",
  .           		this->name);
  .           	return -1;
  .           #endif /* HAVE_DLFCN_H */
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_plugin_load(clish_plugin_t *this, void *userdata)
  4 ( 0.00%)  {
  .           	int res;
  .           
  2 ( 0.00%)  	if (!this)
  .           		return -1;
  5 ( 0.00%)  	assert(this->name);
  .           
  .           	/* Builtin plugins already have init function. */
  3 ( 0.00%)  	if (!this->builtin_flag) {
  .           		if (clish_plugin_load_shared(this) < 0)
  .           			return -1;
  .           	}
  .           	if (!this->init) {
  .           		fprintf(stderr, "Error: PLUGIN %s has no init function\n",
  .           			this->name);
  .           		return -1;
  .           	}
  .           	/* Execute init function */
  6 ( 0.00%)  	if ((res = this->init(userdata, this)))
14,032 ( 0.24%)  => /home/ykuznetsov/klish-2.1.3/plugins/clish/builtin_init.c:clish_plugin_clish_init (1x)
  .           		fprintf(stderr, "Error: Plugin %s init retcode: %d\n",
  .           			this->name, res);
  .           
  .           	return res;
  6 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_name(const clish_plugin_t *this)
  .           {
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 416 ----------------------------------------
-- line 424 ----------------------------------------
  .           char *clish_plugin__get_alias(const clish_plugin_t *this)
  .           {
  .           	return this->alias;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_plugin__get_pubname(const clish_plugin_t *this)
  .           {
 12 ( 0.00%)  	return (this->alias ? this->alias : this->name);
  3 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_plugin__set_file(clish_plugin_t *this, const char *file)
  .           {
  .           	lub_string_free(this->file);
  .           	this->file = lub_string_dup(file);
  .           }
  .           
-- line 441 ----------------------------------------
-- line 474 ----------------------------------------
  .           void clish_plugin__set_rtld_global(clish_plugin_t *this, bool_t rtld_global)
  .           {
  .           	this->rtld_global = rtld_global;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_plugin__get_rtld_global(const clish_plugin_t *this)
  .           {
  1 ( 0.00%)  	return this->rtld_global;
  1 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_next.c
--------------------------------------------------------------------------------
Ir           

-- line 26 ----------------------------------------
  .            *    Initial version
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           void *lub_bintree_iterator_next(lub_bintree_iterator_t * this)
124 ( 0.00%)  {
159 ( 0.00%)  	void *clientnode = lub_bintree_findnext(this->tree, &this->key);
24,605 ( 0.42%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c:lub_bintree_findnext (30x)
1,778 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* make sure that next time we've move onward */
159 ( 0.00%)  	lub_bintree_iterator_init(this, this->tree, clientnode);
861 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,000 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_iterator_init.c:lub_bintree_iterator_init (30x)
  .           
  .           	return clientnode;
155 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c
--------------------------------------------------------------------------------
Ir             

-- line 73 ----------------------------------------
    .            */
    .           const char *default_path = "/etc/clish;~/.clish";
    .           
    .           static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent);
    .           
    .           /*-------------------------------------------------------- */
    .           int clish_shell_load_scheme(clish_shell_t *this, const char *xml_path, const char *xslt_path)
    8 ( 0.00%)  {
    .           	const char *path = xml_path;
    .           	char *buffer;
    .           	char *dirname;
    .           	char *saveptr = NULL;
    .           	int res = -1;
    .           	clish_xmldoc_t *doc = NULL;
    .           	DIR *dir;
    .           
-- line 89 ----------------------------------------
-- line 99 ----------------------------------------
    .           			return -1;
    .           		}
    .           	}
    .           #else
    .           	xslt_path = xslt_path; /* Happy compiler */
    .           #endif
    .           
    .           	/* Use the default path */
    2 ( 0.00%)  	if (!path)
    .           		path = default_path;
    9 ( 0.00%)  	buffer = lub_system_tilde_expand(path);
5,312 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Loop though each directory */
    .           	for (dirname = strtok_r(buffer, ";", &saveptr);
    .           		dirname; dirname = strtok_r(NULL, ";", &saveptr)) {
    .           		struct dirent *entry;
    .           
    .           		/* Search this directory for any XML files */
    8 ( 0.00%)  		dir = opendir(dirname);
2,024 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    3 ( 0.00%)  		if (NULL == dir) {
    .           #ifdef DEBUG
    .           			tinyrl_printf(this->tinyrl,
    .           				"*** Failed to open '%s' directory\n",
    .           				dirname);
    .           #endif
    .           			continue;
    .           		}
   79 ( 0.00%)  		for (entry = readdir(dir); entry; entry = readdir(dir)) {
2,157 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  573 ( 0.01%)  => /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c:readdir (14x)
   88 ( 0.00%)  			const char *extension = strrchr(entry->d_name, '.');
1,506 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  401 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strrchr.S:rindex (13x)
   14 ( 0.00%)  			char *filename = NULL;
    .           			clish_xmlnode_t *root;
    .           			int r;
    .           
    .           			/* Check the filename */
  134 ( 0.00%)  			if (!extension || strcmp(".xml", extension))
    .           				continue;
    .           
    .           			/* Build the filename */
   41 ( 0.00%)  			lub_string_cat(&filename, dirname);
3,779 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, "/");
2,620 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
   40 ( 0.00%)  			lub_string_cat(&filename, entry->d_name);
4,032 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (10x)
    .           
    .           #ifdef DEBUG
    .           			fprintf(stderr, "Parse XML-file: %s\n", filename);
    .           #endif
    .           			/* Load current XML file */
   44 ( 0.00%)  			doc = clish_xmldoc_read(filename);
1,452,782 (24.78%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_read (9x)
134,640 ( 2.30%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  			if (!clish_xmldoc_is_valid(doc)) {
  659 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   54 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (9x)
   10 ( 0.00%)  				int errcaps = clish_xmldoc_error_caps(doc);
    .           				printf("Unable to open file '%s'", filename);
    .           				if ((errcaps & CLISH_XMLERR_LINE) == CLISH_XMLERR_LINE)
    .           					printf(", at line %d", clish_xmldoc_get_err_line(doc));
    .           				if ((errcaps & CLISH_XMLERR_COL) == CLISH_XMLERR_COL)
    .           					printf(", at column %d", clish_xmldoc_get_err_col(doc));
    .           				if ((errcaps & CLISH_XMLERR_DESC) == CLISH_XMLERR_DESC)
    .           					printf(", message is %s", clish_xmldoc_get_err_msg(doc));
    .           				printf("\n");
-- line 155 ----------------------------------------
-- line 171 ----------------------------------------
    .           				}
    .           				clish_xmldoc_release(doc);
    .           				doc = tmp;
    .           			}
    .           
    .           			if (!xslt_path && clish_xslt_is_valid(xslt))
    .           				clish_xslt_release(xslt);
    .           #endif
   24 ( 0.00%)  			root = clish_xmldoc_get_root(doc);
  673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_get_root (9x)
    .           			r = process_node(this, root, NULL);
   44 ( 0.00%)  			clish_xmldoc_release(doc);
179,041 ( 3.05%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_release (9x)
14,628 ( 0.25%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           			/* Error message */
   30 ( 0.00%)  			if (r) {
    .           				fprintf(stderr, CLISH_XML_ERROR_STR"File %s\n",
    .           					filename);
    .           				lub_string_free(filename);
    .           				goto error;
    .           			}
   34 ( 0.00%)  			lub_string_free(filename);
2,402 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  810 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (9x)
    .           		}
    7 ( 0.00%)  		closedir(dir);
1,641 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           /* To don't free memory twice on cleanup */
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (!xslt_path)
    .           		xslt = NULL;
    .           #endif
    1 ( 0.00%)  	doc = NULL;
    .           	dir = NULL;
    1 ( 0.00%)  	res = 0; /* Success */
    .           error:
    3 ( 0.00%)  	lub_string_free(buffer);
   90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
    .           	if (dir)
    .           		closedir(dir);
    5 ( 0.00%)  	if (clish_xmldoc_is_valid(doc))
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmldoc_is_valid (1x)
    .           		clish_xmldoc_release(doc);
    .           #ifdef HAVE_LIB_LIBXSLT
    .           	if (clish_xslt_is_valid(xslt))
    .           		clish_xslt_release(xslt);
    .           #endif
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /*
    .            * ------------------------------------------------------
    .            * This function reads an element from the XML stream and processes it.
    .            * ------------------------------------------------------
    .            */
  980 ( 0.02%)  static int process_node(clish_shell_t *shell, clish_xmlnode_t *node,
    .           	void *parent)
    .           {
   98 ( 0.00%)  	int res = 0;
    .           
2,511 ( 0.04%)  	switch (clish_xmlnode_get_type(node)) {
2,340,397 (39.92%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_node.part.0'2 (30x)
  870 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_type (174x)
    .           	case CLISH_XMLNODE_ELM: {
    .           			clish_xml_cb_t * cb;
    .           			char name[128];
   98 ( 0.00%)  			unsigned int namelen = sizeof(name);
  788 ( 0.01%)  			if (clish_xmlnode_get_name(node, name, &namelen) == 0) {
5,400 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (9x)
2,754 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,990 ( 0.03%)  				for (cb = &xml_elements[0]; cb->element; cb++) {
2,369 ( 0.04%)  					if (0 == strcmp(name, cb->element)) {
1,476 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  189 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (9x)
    .           #ifdef DEBUG
    .           						fprintf(stderr, "NODE:");
    .           						clish_xmlnode_print(node, stderr);
    .           						fprintf(stderr, "\n");
    .           #endif
    .           						/* process the elements at this level */
  490 ( 0.01%)  						res = cb->handler(shell, node, parent);
2,350,698 (40.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_clish_module (10x)
    .           
    .           						/* Error message */
  294 ( 0.01%)  						if (res) {
    .           							char *ename = clish_xmlnode_fetch_attr(node, "name");
    .           							char *eref = clish_xmlnode_fetch_attr(node, "ref");
    .           							char *ekey = clish_xmlnode_fetch_attr(node, "key");
    .           							char *efile = clish_xmlnode_fetch_attr(node, "file");
    .           							fprintf(stderr, CLISH_XML_ERROR_STR"Node %s", name);
    .           							if (ename)
    .           								fprintf(stderr, ", name=\"%s\"", ename);
    .           							if (eref)
-- line 252 ----------------------------------------
-- line 274 ----------------------------------------
    .           	case CLISH_XMLNODE_COMMENT:
    .           	case CLISH_XMLNODE_DECL:
    .           	case CLISH_XMLNODE_UNKNOWN:
    .           	default:
    .           		break;
    .           	}
    .           
    .           	return res;
  882 ( 0.02%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_children(clish_shell_t *shell,
    .           	clish_xmlnode_t *element, void *parent)
  549 ( 0.01%)  {
   61 ( 0.00%)  	clish_xmlnode_t *node = NULL;
    .           	int res;
    .           
3,350 ( 0.06%)  	while ((node = clish_xmlnode_next_child(element, node)) != NULL) {
  799 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  750 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_next_child (183x)
    .           		/* Now deal with all the contained elements */
    .           		res = process_node(shell, node, parent);
  176 ( 0.00%)  		if (res)
    .           			return res;
    .           	}
    .           
   61 ( 0.00%)  	return 0;
  366 ( 0.01%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_clish_module(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   50 ( 0.00%)  {
    .           	/* Create the global view */
   30 ( 0.00%)  	if (!shell->global)
   11 ( 0.00%)  		shell->global = clish_shell_find_create_view(shell,
5,219 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			"__view_global", "");
    .           
    .           	parent = parent; /* Happy compiler */
    .           
   30 ( 0.00%)  	return process_children(shell, element, shell->global);
2,345,328 (40.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children (10x)
   30 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_view(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   45 ( 0.00%)  {
    .           	clish_view_t *view;
    .           	int res = -1;
    .           
   29 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  164 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (4x)
  718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   25 ( 0.00%)  	char *prompt = clish_xmlnode_fetch_attr(element, "prompt");
  328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *depth = clish_xmlnode_fetch_attr(element, "depth");
  322 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *restore = clish_xmlnode_fetch_attr(element, "restore");
  340 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
   25 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
  328 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (5x)
    .           
    .           	/* Check syntax */
   10 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
    .           
    .           	/* re-use a view if it already exists */
   30 ( 0.00%)  	view = clish_shell_find_create_view(shell, name, prompt);
6,493 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell_find_create_view (5x)
    .           
   10 ( 0.00%)  	if (depth && (lub_ctype_isdigit(*depth))) {
    .           		unsigned int res = 0;
    .           		lub_conv_atoui(depth, &res, 0);
    .           		clish_view__set_depth(view, res);
    .           	}
    .           
   10 ( 0.00%)  	if (restore) {
    .           		if (!lub_string_nocasecmp(restore, "depth"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_DEPTH);
    .           		else if (!lub_string_nocasecmp(restore, "view"))
    .           			clish_view__set_restore(view, CLISH_RESTORE_VIEW);
    .           		else
    .           			clish_view__set_restore(view, CLISH_RESTORE_NONE);
    .           	}
    .           
   10 ( 0.00%)  	if (access)
    .           		clish_view__set_access(view, access);
    .           
    .           //process_view_end:
   25 ( 0.00%)  	res = process_children(shell, element, view);
293,378 ( 5.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (5x)
    .           error:
   15 ( 0.00%)  	clish_xml_release(name);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(prompt);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(depth);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(restore);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
   15 ( 0.00%)  	clish_xml_release(access);
    5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (5x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   45 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_ptype(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   99 ( 0.00%)  {
    .           	clish_ptype_method_e method;
    .           	clish_ptype_preprocess_e preprocess;
    .           	int res = -1;
    .           
   55 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  480 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,285 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *pattern = clish_xmlnode_fetch_attr(element, "pattern");
  955 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *method_name = clish_xmlnode_fetch_attr(element, "method");
  892 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
   55 ( 0.00%)  	char *preprocess_name =	clish_xmlnode_fetch_attr(element, "preprocess");
1,318 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (11x)
    .           
    .           	/* Check syntax */
   22 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   22 ( 0.00%)  	if (!pattern) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("pattern"));
    .           		goto error;
    .           	}
    .           
   48 ( 0.00%)  	method = clish_ptype_method_resolve(method_name);
  705 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  616 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_method_resolve (10x)
    .           
   48 ( 0.00%)  	preprocess = clish_ptype_preprocess_resolve(preprocess_name);
  737 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_preprocess_resolve (10x)
   77 ( 0.00%)  	clish_shell_find_create_ptype(shell,
1,796,814 (30.65%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (11x)
    .           		name, help, pattern, method, preprocess);
    .           
   11 ( 0.00%)  	res = 0;
    .           error:
   33 ( 0.00%)  	clish_xml_release(name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(help);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(pattern);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(method_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
   33 ( 0.00%)  	clish_xml_release(preprocess_name);
   11 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (11x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    .           	return res;
   99 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_overview(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    8 ( 0.00%)  {
    1 ( 0.00%)  	char *content = NULL;
    2 ( 0.00%)  	unsigned int content_len = 2048;
    .           	int result;
    .           
    .           	/*
    .           	 * the code below faithfully assume that we'll be able fully store
    .           	 * the content of the node. If it's really, really big, we may have
    .           	 * an issue (but then, if it's that big, how the hell does it
    .           	 * already fits in allocated memory?)
    .           	 * Ergo, it -should- be safe.
    .           	 */
    .           	do {
    4 ( 0.00%)  		char *new = (char*)realloc(content, content_len);
1,863 ( 0.03%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (1x)
    2 ( 0.00%)  		if (!new) {
    .           			if (content)
    .           				free(content);
    .           			return -1;
    .           		}
    .           		content = new;
    7 ( 0.00%)  		result = clish_xmlnode_get_content(element, content,
19,272 ( 0.33%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (1x)
    .           			&content_len);
    2 ( 0.00%)  	} while (result == -E2BIG);
    .           
    2 ( 0.00%)  	if (result == 0 && content) {
    .           		/* set the overview text for this view */
    2 ( 0.00%)  		assert(NULL == shell->overview);
    .           		/* store the overview */
    4 ( 0.00%)  		shell->overview = lub_string_dup(content);
  968 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    .           	}
    .           
    .           	if (content)
    3 ( 0.00%)  		free(content);
  148 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    .           
    .           	parent = parent; /* Happy compiler */
    .           
    1 ( 0.00%)  	return 0;
    7 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_command(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  260 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	clish_command_t *old;
    .           	int res = -1;
    .           
  130 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,167 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
1,066 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,876 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
2,167 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
2,319 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *escape_chars = clish_xmlnode_fetch_attr(element, "escape_chars");
2,119 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_name = clish_xmlnode_fetch_attr(element, "args");
1,989 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *args_help = clish_xmlnode_fetch_attr(element, "args_help");
2,371 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
2,290 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
2,374 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
  130 ( 0.00%)  	char *ref = clish_xmlnode_fetch_attr(element, "ref");
2,296 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (26x)
    .           
    .           	/* Check syntax */
   52 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   52 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
    .           
    .           	/* check this command doesn't already exist */
  134 ( 0.00%)  	old = clish_view_find_command(v, name, BOOL_FALSE);
  723 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,202 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_command (25x)
   52 ( 0.00%)  	if (old) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"Duplicate COMMAND name=\"%s\".\n", name);
    .           		goto error;
    .           	}
    .           
    .           	/* create a command */
  160 ( 0.00%)  	cmd = clish_view_new_command(v, name, help);
43,626 ( 0.74%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (25x)
4,334 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  108 ( 0.00%)  	clish_command__set_pview(cmd, v);
  679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_pview (25x)
    .           
    .           	/* Reference 'ref' field */
   78 ( 0.00%)  	if (ref) {
    .           		char *saveptr = NULL;
    .           		const char *delim = "@";
    .           		char *view_name = NULL;
    .           		char *cmdn = NULL;
    .           		char *str = lub_string_dup(ref);
    .           
    .           		cmdn = strtok_r(str, delim, &saveptr);
    .           		if (!cmdn) {
-- line 505 ----------------------------------------
-- line 509 ----------------------------------------
    .           		}
    .           		clish_command__set_alias(cmd, cmdn); /* alias name */
    .           		view_name = strtok_r(NULL, delim, &saveptr);
    .           		clish_command__set_alias_view(cmd, view_name);
    .           		lub_string_free(str);
    .           	}
    .           
    .           	/* define some specialist escape characters */
   78 ( 0.00%)  	if (escape_chars)
    8 ( 0.00%)  		clish_command__set_escape_chars(cmd, escape_chars);
  923 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   52 ( 0.00%)  	if (args_name) {
    .           		/* define a "rest of line" argument */
    .           		clish_param_t *param;
    .           
    .           		/* Check syntax */
    2 ( 0.00%)  		if (!args_help) {
    .           			fprintf(stderr, CLISH_XML_ERROR_ATTR("args_help"));
    .           			goto error;
    .           		}
    5 ( 0.00%)  		param = clish_param_new(args_name, args_help, "__ptype_ARGS");
  751 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (1x)
    8 ( 0.00%)  		clish_command__set_args(cmd, param);
  689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* define the view which this command changes to */
   78 ( 0.00%)  	if (view) {
    .           		/* reference the next view */
   36 ( 0.00%)  		clish_command__set_viewname(cmd, view);
1,802 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,635 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (7x)
    .           	}
    .           
    .           	/* define the view id which this command changes to */
   78 ( 0.00%)  	if (viewid)
   16 ( 0.00%)  		clish_command__set_viewid(cmd, viewid);
1,829 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  463 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewid (2x)
    .           
    .           	/* lock field */
   78 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
  108 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
  725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (25x)
    .           
    .           	/* interrupt field */
   78 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
  108 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
  719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   50 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (25x)
    .           
   78 ( 0.00%)  	if (access)
    8 ( 0.00%)  		clish_command__set_access(cmd, access);
  872 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           //process_command_end:
  130 ( 0.00%)  	res = process_children(shell, element, cmd);
365,639 ( 6.24%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (26x)
    .           error:
   78 ( 0.00%)  	clish_xml_release(access);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(view);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(viewid);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(escape_chars);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_name);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(args_help);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(lock);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(interrupt);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
   78 ( 0.00%)  	clish_xml_release(ref);
   26 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (26x)
    .           
    .           	return res;
  234 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_startup(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   10 ( 0.00%)  {
    .           	clish_view_t *v = (clish_view_t *) parent;
    .           	clish_command_t *cmd = NULL;
    .           	int res = -1;
    .           
    5 ( 0.00%)  	char *view = clish_xmlnode_fetch_attr(element, "view");
   70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *viewid = clish_xmlnode_fetch_attr(element, "viewid");
   73 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_shebang =
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		clish_xmlnode_fetch_attr(element, "default_shebang");
    5 ( 0.00%)  	char *timeout = clish_xmlnode_fetch_attr(element, "timeout");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *lock = clish_xmlnode_fetch_attr(element, "lock");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *interrupt = clish_xmlnode_fetch_attr(element, "interrupt");
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    5 ( 0.00%)  	char *default_plugin = clish_xmlnode_fetch_attr(element,
   44 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (1x)
    .           		"default_plugin");
    .           
    .           	/* Check syntax */
    2 ( 0.00%)  	if (!view) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("view"));
    .           		goto error;
    .           	}
    2 ( 0.00%)  	if (shell->startup) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP tag duplication.\n");
    .           		goto error;
    .           	}
    .           
    .           	/* create a command with NULL help */
    6 ( 0.00%)  	cmd = clish_view_new_command(v, "startup", NULL);
1,043 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_new_command (1x)
    4 ( 0.00%)  	clish_command__set_lock(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* reference the next view */
    4 ( 0.00%)  	clish_command__set_viewname(cmd, view);
  246 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_viewname (1x)
    .           
    .           	/* define the view id which this command changes to */
    3 ( 0.00%)  	if (viewid)
    .           		clish_command__set_viewid(cmd, viewid);
    .           
    3 ( 0.00%)  	if (default_shebang)
    .           		clish_shell__set_default_shebang(shell, default_shebang);
    .           
    3 ( 0.00%)  	if (timeout) {
    .           		unsigned int to = 0;
    .           		lub_conv_atoui(timeout, &to, 0);
    .           		clish_shell__set_timeout(shell, to);
    .           	}
    .           
    .           	/* lock field */
    2 ( 0.00%)  	if (lock && lub_string_nocasecmp(lock, "false") == 0)
    .           		clish_command__set_lock(cmd, BOOL_FALSE);
    .           	else
    4 ( 0.00%)  		clish_command__set_lock(cmd, BOOL_TRUE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_lock (1x)
    .           
    .           	/* interrupt field */
    2 ( 0.00%)  	if (interrupt && lub_string_nocasecmp(interrupt, "true") == 0)
    .           		clish_command__set_interrupt(cmd, BOOL_TRUE);
    .           	else
    4 ( 0.00%)  		clish_command__set_interrupt(cmd, BOOL_FALSE);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_interrupt (1x)
    .           
    .           	/* If we need the default plugin */
    3 ( 0.00%)  	if (default_plugin && (0 == strcmp(default_plugin, "false")))
    .           		shell->default_plugin = BOOL_FALSE;
    .           
    .           	/* remember this command */
    1 ( 0.00%)  	shell->startup = cmd;
    .           
    5 ( 0.00%)  	res = process_children(shell, element, cmd);
6,101 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (1x)
    .           error:
    3 ( 0.00%)  	clish_xml_release(view);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(viewid);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(default_shebang);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(timeout);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(lock);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    3 ( 0.00%)  	clish_xml_release(interrupt);
    1 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (1x)
    .           
    .           	return res;
    9 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_param(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  190 ( 0.00%)  {
    .           	clish_command_t *cmd = NULL;
   38 ( 0.00%)  	clish_param_t *p_param = NULL;
    .           	clish_xmlnode_t *pelement;
    .           	clish_param_t *param;
    .           	char *pname;
    .           	int res = -1;
    .           
  114 ( 0.00%)  	char *name = clish_xmlnode_fetch_attr(element, "name");
  808 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *help = clish_xmlnode_fetch_attr(element, "help");
1,378 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *ptype = clish_xmlnode_fetch_attr(element, "ptype");
2,095 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *prefix = clish_xmlnode_fetch_attr(element, "prefix");
2,203 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *defval = clish_xmlnode_fetch_attr(element, "default");
2,237 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *mode = clish_xmlnode_fetch_attr(element, "mode");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *optional = clish_xmlnode_fetch_attr(element, "optional");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *order = clish_xmlnode_fetch_attr(element, "order");
1,874 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *value = clish_xmlnode_fetch_attr(element, "value");
2,252 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *hidden = clish_xmlnode_fetch_attr(element, "hidden");
2,045 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *test = clish_xmlnode_fetch_attr(element, "test");
2,252 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *completion = clish_xmlnode_fetch_attr(element, "completion");
2,270 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
   95 ( 0.00%)  	char *access = clish_xmlnode_fetch_attr(element, "access");
2,186 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (19x)
    .           
    .           	/* The PARAM can be child of COMMAND or another PARAM */
   76 ( 0.00%)  	pelement = clish_xmlnode_parent(element);
   76 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (19x)
    .           	pname = clish_xmlnode_get_all_name(pelement);
  190 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "PARAM") == 0)
  969 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (19x)
    .           		p_param = (clish_param_t *)parent;
    .           	else
    .           		cmd = (clish_command_t *)parent;
    .           	if (pname)
   95 ( 0.00%)  		free(pname);
2,369 ( 0.04%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (19x)
   38 ( 0.00%)  	if (!cmd && !p_param)
    .           		goto error;
    .           
    .           	/* Check syntax */
   95 ( 0.00%)  	if (cmd && (cmd == shell->startup)) {
    .           		fprintf(stderr, CLISH_XML_ERROR_STR"STARTUP can't contain PARAMs.\n");
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!name) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("name"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!help) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("help"));
    .           		goto error;
    .           	}
   38 ( 0.00%)  	if (!ptype) {
    .           		fprintf(stderr, CLISH_XML_ERROR_ATTR("ptype"));
    .           		goto error;
    .           	}
    .           
  118 ( 0.00%)  	param = clish_param_new(name, help, ptype);
21,637 ( 0.37%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (18x)
2,140 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* If prefix is set clish will emulate old optional
    .           	 * command syntax over newer optional command mechanism.
    .           	 * It will create nested PARAM.
    .           	 */
   38 ( 0.00%)  	if (prefix) {
    .           		const char *ptype_name = "__ptype_SUBCOMMAND";
    .           		clish_param_t *opt_param = NULL;
    5 ( 0.00%)  		char *str = NULL;
    .           		clish_ptype_t *tmp;
    .           
    .           		/* Create a ptype for prefix-named subcommand that
    .           		 * will contain the nested optional parameter. The
    .           		 * name of ptype is hardcoded. It's not good but
    .           		 * it's only the service ptype.
    .           		 */
   25 ( 0.00%)  		tmp = (clish_ptype_t *)lub_bintree_find(
2,321 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (5x)
    .           			&shell->ptype_tree, ptype_name);
   10 ( 0.00%)  		if (!tmp)
    8 ( 0.00%)  			tmp = clish_shell_find_create_ptype(shell,
137,331 ( 2.34%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_ptype.c:clish_shell_find_create_ptype (1x)
    .           				ptype_name, "Option", "[^\\\\]+",
    .           				CLISH_PTYPE_REGEXP, CLISH_PTYPE_NONE);
    2 ( 0.00%)  		assert(tmp);
   20 ( 0.00%)  		lub_string_cat(&str, "_prefix_");
1,905 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   20 ( 0.00%)  		lub_string_cat(&str, name);
1,320 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (5x)
   30 ( 0.00%)  		opt_param = clish_param_new(str, help, ptype_name);
6,029 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_new (5x)
   15 ( 0.00%)  		lub_string_free(str);
  450 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (5x)
   24 ( 0.00%)  		clish_param__set_mode(opt_param,
  657 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_mode (4x)
    .           			CLISH_PARAM_SUBCOMMAND);
   24 ( 0.00%)  		clish_param__set_value(opt_param, prefix);
  826 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  796 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_value (4x)
   20 ( 0.00%)  		clish_param__set_optional(opt_param, BOOL_TRUE);
   10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (5x)
    .           
   15 ( 0.00%)  		if (test)
    .           			clish_param__set_test(opt_param, test);
    .           
    .           		/* Add the parameter to the command */
   10 ( 0.00%)  		if (cmd)
   20 ( 0.00%)  			clish_command_insert_param(cmd, opt_param);
  910 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (5x)
    .           		/* Add the parameter to the param */
   15 ( 0.00%)  		if (p_param)
    .           			clish_param_insert_param(p_param, opt_param);
    .           		/* Unset cmd and set parent param to opt_param */
    5 ( 0.00%)  		cmd = NULL;
    .           		p_param = opt_param;
    .           	}
    .           
   57 ( 0.00%)  	if (defval)
   24 ( 0.00%)  		clish_param__set_default(param, defval);
  918 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  966 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_default (4x)
    .           
   57 ( 0.00%)  	if (hidden && lub_string_nocasecmp(hidden, "true") == 0)
    .           		clish_param__set_hidden(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_hidden(param, BOOL_FALSE);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_hidden (18x)
    .           
   57 ( 0.00%)  	if (mode) {
    .           		if (lub_string_nocasecmp(mode, "switch") == 0) {
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_SWITCH);
    .           			/* Force hidden attribute */
    .           			clish_param__set_hidden(param, BOOL_TRUE);
    .           		} else if (lub_string_nocasecmp(mode, "subcommand") == 0)
   28 ( 0.00%)  			clish_param__set_mode(param,
    .           				CLISH_PARAM_SUBCOMMAND);
    .           		else
    .           			clish_param__set_mode(param,
    .           				CLISH_PARAM_COMMON);
    .           	}
    .           
   57 ( 0.00%)  	if (optional && lub_string_nocasecmp(optional, "true") == 0)
    .           		clish_param__set_optional(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_optional(param, BOOL_FALSE);
  687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_optional (18x)
    .           
   57 ( 0.00%)  	if (order && lub_string_nocasecmp(order, "true") == 0)
    .           		clish_param__set_order(param, BOOL_TRUE);
    .           	else
   80 ( 0.00%)  		clish_param__set_order(param, BOOL_FALSE);
  663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   36 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__set_order (18x)
    .           
   57 ( 0.00%)  	if (value) {
    .           		clish_param__set_value(param, value);
    .           		/* Force mode to subcommand */
    .           		clish_param__set_mode(param,
    .           			CLISH_PARAM_SUBCOMMAND);
    .           	}
    .           
   57 ( 0.00%)  	if (test && !prefix)
    .           		clish_param__set_test(param, test);
    .           
   57 ( 0.00%)  	if (completion)
    .           		clish_param__set_completion(param, completion);
    .           
   57 ( 0.00%)  	if (access)
    .           		clish_param__set_access(param, access);
    .           
    .           	/* Add the parameter to the command */
   38 ( 0.00%)  	if (cmd)
   60 ( 0.00%)  		clish_command_insert_param(cmd, param);
1,565 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,570 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_insert_param (13x)
    .           
    .           	/* Add the parameter to the param */
   38 ( 0.00%)  	if (p_param)
   24 ( 0.00%)  		clish_param_insert_param(p_param, param);
  914 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  959 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_insert_param (4x)
    .           
   95 ( 0.00%)  	res = process_children(shell, element, param);
  570 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_xml.c:process_children'2 (19x)
    .           
    .           error:
   57 ( 0.00%)  	clish_xml_release(name);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(help);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(ptype);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(prefix);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(defval);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(mode);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(optional);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(order);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(value);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(hidden);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(test);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(completion);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
   57 ( 0.00%)  	clish_xml_release(access);
   19 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (19x)
    .           
    .           	return res;
  171 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_action(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
  210 ( 0.00%)  {
    .           	clish_action_t *action = NULL;
  126 ( 0.00%)  	char *builtin = clish_xmlnode_fetch_attr(element, "builtin");
  587 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
  105 ( 0.00%)  	char *shebang = clish_xmlnode_fetch_attr(element, "shebang");
  431 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_fetch_attr (21x)
   88 ( 0.00%)  	clish_xmlnode_t *pelement = clish_xmlnode_parent(element);
  649 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   80 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_parent (20x)
    .           	char *pname = clish_xmlnode_get_all_name(pelement);
    .           	char *text;
    .           	clish_sym_t *sym = NULL;
    .           
  172 ( 0.00%)  	if (pname && lub_string_nocasecmp(pname, "VAR") == 0)
3,294 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,020 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (20x)
   21 ( 0.00%)  		action = clish_var__get_action((clish_var_t *)parent);
    .           	else
   67 ( 0.00%)  		action = clish_command__get_action((clish_command_t *)parent);
  703 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_action (20x)
    .           
    .           	if (pname)
   63 ( 0.00%)  		free(pname);
2,705 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
    .           	text = clish_xmlnode_get_all_content(element);
    .           
   84 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   94 ( 0.00%)  		clish_action__set_script(action, text);
  984 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,701 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_script (17x)
    .           	}
    .           	if (text)
   63 ( 0.00%)  		free(text);
2,746 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (21x)
    .           
   42 ( 0.00%)  	if (builtin)
   28 ( 0.00%)  		sym = clish_shell_add_unresolved_sym(shell, builtin,
5,051 ( 0.09%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,964 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_plugin.c:clish_shell_add_unresolved_sym (3x)
    .           			CLISH_SYM_TYPE_ACTION);
    .           	else
   51 ( 0.00%)  		sym = shell->hooks[CLISH_SYM_TYPE_ACTION];
    .           
   67 ( 0.00%)  	clish_action__set_builtin(action, sym);
  695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   40 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action__set_builtin (20x)
   42 ( 0.00%)  	if (shebang)
    .           		clish_action__set_shebang(action, shebang);
    .           
   67 ( 0.00%)  	clish_xml_release(builtin);
  622 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (20x)
   63 ( 0.00%)  	clish_xml_release(shebang);
   21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xml_release (21x)
    .           
    .           	return 0;
  189 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_detail(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
   28 ( 0.00%)  {
    .           	clish_command_t *cmd = (clish_command_t *) parent;
    .           
    .           	/* read the following text element */
    .           	char *text = clish_xmlnode_get_all_content(element);
    .           
   16 ( 0.00%)  	if (text && *text) {
    .           		/* store the action */
   24 ( 0.00%)  		clish_command__set_detail(cmd, text);
1,561 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__set_detail (3x)
1,211 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	if (text)
   12 ( 0.00%)  		free(text);
  534 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (4x)
    .           
    .           	shell = shell; /* Happy compiler */
    .           
    .           	return 0;
   28 ( 0.00%)  }
    .           
    .           /* ------------------------------------------------------ */
    .           static int process_namespace(clish_shell_t *shell, clish_xmlnode_t *element,
    .           	void *parent)
    .           {
    .           	clish_view_t *v = (clish_view_t *)parent;
    .           	clish_nspace_t *nspace = NULL;
    .           	int res = -1;
-- line 906 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c
--------------------------------------------------------------------------------
Ir           

-- line 19 ----------------------------------------
  .           #include "lub/string.h"
  .           
  .           /*-------------------------------------------------------- */
  .           static void clish_shell_renew_prompt(clish_shell_t *this)
  .           {
  .           	clish_context_t prompt_context;
  .           	char *prompt = NULL;
  .           	const clish_view_t *view;
  1 ( 0.00%)  	char *str = NULL;
  .           
  .           	/* Create appropriate context */
  5 ( 0.00%)  	clish_context_init(&prompt_context, this);
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (1x)
  .           
  .           	/* Obtain the prompt */
  4 ( 0.00%)  	view = clish_shell__get_view(this);
  9 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (1x)
  2 ( 0.00%)  	assert(view);
  5 ( 0.00%)  	lub_string_cat(&str, "${_PROMPT_PREFIX}");
342 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
 11 ( 0.00%)  	lub_string_cat(&str, clish_view__get_prompt(view));
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
527 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  4 ( 0.00%)  	lub_string_cat(&str, "${_PROMPT_SUFFIX}");
760 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  6 ( 0.00%)  	prompt = clish_shell_expand(str, SHELL_VAR_NONE, &prompt_context);
12,374 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand (1x)
  2 ( 0.00%)  	assert(prompt);
  3 ( 0.00%)  	lub_string_free(str);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  8 ( 0.00%)  	tinyrl__set_prompt(this->tinyrl, prompt);
2,501 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  	lub_string_free(prompt);
 90 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_key_help(tinyrl_t *this, int key)
  .           {
  .           	bool_t result = BOOL_TRUE;
  .           
  .           	if (tinyrl_is_quoting(this)) {
-- line 50 ----------------------------------------
-- line 113 ----------------------------------------
  .           /*
  .            * This is a CLISH specific completion function.
  .            * If the current prefix is not a recognised prefix then
  .            * an error is flagged.
  .            * If it is a recognisable prefix then possible completions are displayed
  .            * or a unique completion is inserted.
  .            */
  .           static tinyrl_match_e clish_shell_tinyrl_complete(tinyrl_t *this)
  4 ( 0.00%)  {
  .           	tinyrl_match_e status;
  .           
  .           	/* first of all perform any history expansion */
  .           	(void)clish_shell_tinyrl_expand(this);
  .           	/* perform normal completion */
  7 ( 0.00%)  	status = tinyrl_complete(this);
32,531 ( 0.55%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	switch (status) {
  .           	case TINYRL_NO_MATCH:
  7 ( 0.00%)  		if (BOOL_FALSE == tinyrl_is_completion_error_over(this)) {
935 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			/* The user hasn't even entered a valid prefix! */
  .           /*			tinyrl_crlf(this);
  .           			clish_shell_help(context->shell,
  .           				tinyrl__get_line(this));
  .           			tinyrl_crlf(this);
  .           			tinyrl_reset_line_state(this);
  .           */		}
  .           		break;
  .           	default:
  .           		/* the default completion function will have prompted for completions as
  .           		 * necessary
  .           		 */
  .           		break;
  .           	}
  .           	return status;
  5 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_key_space(tinyrl_t *this, int key)
  6 ( 0.00%)  {
  .           	bool_t result = BOOL_FALSE;
  .           	tinyrl_match_e status;
  2 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(this);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (1x)
  4 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (1x)
  8 ( 0.00%)  	const char *line = tinyrl__get_line(this);
789 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	clish_pargv_status_e arg_status;
  1 ( 0.00%)  	const clish_command_t *cmd = NULL;
  1 ( 0.00%)  	clish_pargv_t *pargv = NULL;
  .           
  9 ( 0.00%)  	if(tinyrl_is_empty(this)) {
738 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* ignore space at the begining of the line, don't display commands */
  1 ( 0.00%)  		return BOOL_TRUE;
  6 ( 0.00%)  	} else if (tinyrl_is_quoting(this)) {
 21 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_is_quoting (1x)
  .           		/* if we are in the middle of a quote then simply enter a space */
  .           		result = BOOL_TRUE;
  .           	} else {
  .           		/* Find out if current line is legal. It can be
  .           		 * fully completed or partially completed.
  .           		 */
 11 ( 0.00%)  		arg_status = clish_shell_parse(shell, line, &cmd, &pargv);
4,144 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  3 ( 0.00%)  		if (pargv)
  .           			clish_pargv_delete(pargv);
  2 ( 0.00%)  		switch (arg_status) {
  .           		case CLISH_LINE_OK:
  .           		case CLISH_LINE_PARTIAL:
  .           			if (' ' != line[strlen(line) - 1])
  .           				result = BOOL_TRUE;
  .           			break;
  .           		default:
  .           			break;
  .           		}
  .           		/* If current line is illegal try to make auto-comletion. */
  .           		if (!result) {
  .           			/* perform word completion */
  2 ( 0.00%)  			status = clish_shell_tinyrl_complete(this);
33,491 ( 0.57%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_complete (1x)
  5 ( 0.00%)  			switch (status) {
  .           			case TINYRL_NO_MATCH:
  .           			case TINYRL_AMBIGUOUS:
  .           				/* ambiguous result signal an issue */
  .           				break;
  .           			case TINYRL_COMPLETED_AMBIGUOUS:
  .           				/* perform word completion again in case we just did case
  .           				   modification the first time */
  .           				status = clish_shell_tinyrl_complete(this);
-- line 194 ----------------------------------------
-- line 207 ----------------------------------------
  .           		}
  .           	}
  .           	if (result)
  .           		result = tinyrl_insert_text(this, " ");
  .           	/* keep compiler happy */
  .           	key = key;
  .           
  .           	return result;
  7 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_key_enter(tinyrl_t *this, int key)
  6 ( 0.00%)  {
  3 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(this);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (1x)
  4 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (1x)
  .           	const clish_command_t *cmd = NULL;
  4 ( 0.00%)  	const char *line = tinyrl__get_line(this);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_line (1x)
  .           	bool_t result = BOOL_FALSE;
  .           	char *errmsg = NULL;
  .           
  .           	/* Inc line counter */
  3 ( 0.00%)  	if (shell->current_file)
  1 ( 0.00%)  		shell->current_file->line++;
  .           
  .           	/* nothing to pass simply move down the screen */
  2 ( 0.00%)  	if (!*line) {
  .           		tinyrl_multi_crlf(this);
  .           		tinyrl_done(this);
  .           		return BOOL_TRUE;
  .           	}
  .           
  .           	/* try and parse the command */
  4 ( 0.00%)  	cmd = clish_shell_resolve_command(shell, line);
4,911 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_resolve_command (1x)
  2 ( 0.00%)  	if (!cmd) {
  .           		tinyrl_match_e status = clish_shell_tinyrl_complete(this);
  .           		switch (status) {
  .           		case TINYRL_MATCH:
  .           		case TINYRL_MATCH_WITH_EXTENSIONS:
  .           		case TINYRL_COMPLETED_MATCH:
  .           			/* re-fetch the line as it may have changed
  .           			 * due to auto-completion
  .           			 */
-- line 248 ----------------------------------------
-- line 263 ----------------------------------------
  .           				tinyrl_multi_crlf(this);
  .           				errmsg = "Unknown command";
  .           			}
  .           			break;
  .           		}
  .           	}
  .           	if (cmd) {
  .           		clish_pargv_status_e arg_status;
  7 ( 0.00%)  		tinyrl_multi_crlf(this);
1,465 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		/* we've got a command so check the syntax */
  6 ( 0.00%)  		arg_status = clish_shell_parse(shell,
5,860 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:clish_shell_parse (1x)
  .           			line, &context->cmd, &context->pargv);
  7 ( 0.00%)  		switch (arg_status) {
  .           		case CLISH_LINE_OK:
  7 ( 0.00%)  			tinyrl_done(this);
695 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  1 ( 0.00%)  			result = BOOL_TRUE;
  1 ( 0.00%)  			break;
  .           		case CLISH_BAD_HISTORY:
  .           			errmsg = "Bad history entry";
  .           			break;
  .           		case CLISH_BAD_CMD:
  .           			errmsg = "Illegal command line";
  .           			break;
  .           		case CLISH_BAD_PARAM:
  .           			errmsg = "Illegal parameter";
-- line 287 ----------------------------------------
-- line 307 ----------------------------------------
  .           			"%s\n", fname, shell->current_file->line,
  .           			line, errmsg);
  .           		}
  .           	}
  .           	/* keep the compiler happy */
  .           	key = key;
  .           
  .           	return result;
  7 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static bool_t clish_shell_tinyrl_hotkey(tinyrl_t *this, int key)
  .           {
  .           	clish_view_t *view;
  .           	const char *cmd = NULL;
  .           	clish_context_t *context = tinyrl__get_context(this);
  .           	clish_shell_t *shell = clish_context__get_shell(context);
-- line 323 ----------------------------------------
-- line 348 ----------------------------------------
  .           	return BOOL_TRUE;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           /* This is the completion function provided for CLISH */
  .           tinyrl_completion_func_t clish_shell_tinyrl_completion;
  .           char **clish_shell_tinyrl_completion(tinyrl_t * tinyrl,
  .           	const char *line, unsigned start, unsigned end)
120 ( 0.00%)  {
  .           	lub_argv_t *matches;
 20 ( 0.00%)  	clish_context_t *context = tinyrl__get_context(tinyrl);
 20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_context (10x)
 40 ( 0.00%)  	clish_shell_t *this = clish_context__get_shell(context);
 20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (10x)
  .           	clish_shell_iterator_t iter;
  .           	const clish_command_t *cmd = NULL;
  .           	char *text;
 10 ( 0.00%)  	char **result = NULL;
  .           
 54 ( 0.00%)  	if (tinyrl_is_quoting(tinyrl))
788 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
648 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_is_quoting (9x)
  .           		return result;
  .           
 50 ( 0.00%)  	matches = lub_argv_new(NULL, 0);
1,349 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (10x)
 50 ( 0.00%)  	text = lub_string_dupn(line, end);
1,586 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (10x)
  .           
  .           	/* Don't bother to resort to filename completion */
 34 ( 0.00%)  	tinyrl_completion_over(tinyrl);
839 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 18 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_completion_over (9x)
  .           
  .           	/* Search for COMMAND completions */
 54 ( 0.00%)  	clish_shell_iterator_init(&iter, CLISH_NSPACE_COMPLETION);
696 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 27 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_iterator_init (9x)
294 ( 0.01%)  	while ((cmd = clish_shell_find_next_completion(this, text, &iter)))
317,310 ( 5.41%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_find_next_completion (39x)
8,467 ( 0.14%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
218 ( 0.00%)  		lub_argv_add(matches, clish_command__get_suffix(cmd));
3,494 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
13,929 ( 0.24%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_add (29x)
4,519 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_suffix (29x)
  .           
  .           	/* Try and resolve a command */
 44 ( 0.00%)  	cmd = clish_shell_resolve_command(this, text);
74,636 ( 1.27%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_resolve_command (9x)
3,612 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	/* Search for PARAM completion */
 20 ( 0.00%)  	if (cmd)
 32 ( 0.00%)  		clish_shell_param_generator(this, matches, cmd, text, start);
20,451 ( 0.35%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
32,027 ( 0.55%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_param_generator (3x)
  .           
 30 ( 0.00%)  	lub_string_free(text);
900 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (10x)
  .           
  .           	/* Matches were found */
 50 ( 0.00%)  	if (lub_argv__get_count(matches) > 0) {
 20 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (10x)
  .           		unsigned i;
 56 ( 0.00%)  		char *subst = lub_string_dup(lub_argv__get_arg(matches, 0));
1,083 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (7x)
 70 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (7x)
  .           		/* Find out substitution */
208 ( 0.00%)  		for (i = 1; i < lub_argv__get_count(matches); i++) {
 68 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (34x)
  .           			char *p = subst;
135 ( 0.00%)  			const char *match = lub_argv__get_arg(matches, i);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (27x)
166 ( 0.00%)  			size_t match_len = strlen(p);
1,643 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
432 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (27x)
 78 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc (26x)
  .           			/* identify the common prefix */
243 ( 0.00%)  			while ((tolower(*p) == tolower(*match)) && match_len--) {
  .           				p++;
  .           				match++;
  .           			}
  .           			/* Terminate the prefix string */
 27 ( 0.00%)  			*p = '\0';
  .           		}
 39 ( 0.00%)  		result = lub_argv__get_argv(matches, subst);
4,567 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,371 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_argv (6x)
 28 ( 0.00%)  		lub_string_free(subst);
630 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (7x)
  .           	}
 30 ( 0.00%)  	lub_argv_delete(matches);
5,146 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (10x)
  .           
  .           	return result;
 90 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           static void clish_shell_tinyrl_init(tinyrl_t * this)
  .           {
  .           	bool_t status;
  .           	/* bind the '?' key to the help function */
  9 ( 0.00%)  	status = tinyrl_bind_key(this, '?', clish_shell_tinyrl_key_help);
835 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	assert(status);
  .           
  .           	/* bind the <RET> key to the help function */
  5 ( 0.00%)  	status = tinyrl_bind_key(this, '\r', clish_shell_tinyrl_key_enter);
  7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
  2 ( 0.00%)  	assert(status);
  5 ( 0.00%)  	status = tinyrl_bind_key(this, '\n', clish_shell_tinyrl_key_enter);
  7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
  2 ( 0.00%)  	assert(status);
  .           
  .           	/* bind the <SPACE> key to auto-complete if necessary */
  5 ( 0.00%)  	status = tinyrl_bind_key(this, ' ', clish_shell_tinyrl_key_space);
  7 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_bind_key (1x)
  2 ( 0.00%)  	assert(status);
  .           
  .           	/* Set external hotkey callback */
  8 ( 0.00%)  	tinyrl__set_hotkey_fn(this, clish_shell_tinyrl_hotkey);
808 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	/* Assign timeout callback */
  8 ( 0.00%)  	tinyrl__set_timeout_fn(this, clish_shell_timeout_fn);
847 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	/* Assign keypress callback */
  8 ( 0.00%)  	tinyrl__set_keypress_fn(this, clish_shell_keypress_fn);
838 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           /*
  .            * Create an instance of the specialised class
  .            */
  .           tinyrl_t *clish_shell_tinyrl_new(FILE * istream,
  .           	FILE * ostream, unsigned stifle)
  1 ( 0.00%)  {
  .           	/* call the parent constructor */
  8 ( 0.00%)  	tinyrl_t *this = tinyrl_new(istream,
11,579 ( 0.20%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		ostream, stifle, clish_shell_tinyrl_completion);
  .           	/* now call our own constructor */
  2 ( 0.00%)  	if (this)
  .           		clish_shell_tinyrl_init(this);
  .           	return this;
  3 ( 0.00%)  }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell_tinyrl_fini(tinyrl_t * this)
  .           {
  .           	/* nothing to do... yet */
  .           	this = this;
  .           }
  .           
-- line 461 ----------------------------------------
-- line 465 ----------------------------------------
  .           	/* call our destructor */
  .           	clish_shell_tinyrl_fini(this);
  .           	/* and call the parent destructor */
  .           	tinyrl_delete(this);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           static int clish_shell_execline(clish_shell_t *this, const char *line, char **out)
  7 ( 0.00%)  {
  .           	char *str;
  .           	clish_context_t context;
  .           	tinyrl_history_t *history;
  .           	int lerror = 0;
  .           
  2 ( 0.00%)  	assert(this);
  1 ( 0.00%)  	this->state = SHELL_STATE_OK;
 10 ( 0.00%)  	if (!line && !tinyrl__get_istream(this->tinyrl)) {
  5 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl__get_istream (1x)
  .           		this->state = SHELL_STATE_SYSTEM_ERROR;
  .           		return -1;
  .           	}
  .           
  .           	/* Renew prompt */
  .           	clish_shell_renew_prompt(this);
  .           
  .           	/* Set up the context for tinyrl */
  4 ( 0.00%)  	clish_context_init(&context, this);
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (1x)
  .           
  .           	/* Push the specified line or interactive line */
  2 ( 0.00%)  	if (line)
  1 ( 0.00%)  		str = tinyrl_forceline(this->tinyrl, &context, line);
  .           	else
  9 ( 0.00%)  		str = tinyrl_readline(this->tinyrl, &context);
725,679 (12.38%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  	lerror = errno;
1,596 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  	if (!str) {
  .           		switch (lerror) {
  .           		case ENOENT:
  .           			this->state = SHELL_STATE_EOF;
  .           			break;
  .           		case ENOEXEC:
  .           			this->state = SHELL_STATE_SYNTAX_ERROR;
  .           			break;
  .           		default:
  .           			this->state = SHELL_STATE_SYSTEM_ERROR;
  .           			break;
  .           		};
  .           		return -1;
  .           	}
  .           
  .           	/* Deal with the history list */
  9 ( 0.00%)  	if (tinyrl__get_isatty(this->tinyrl)) {
810 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  7 ( 0.00%)  		history = tinyrl__get_history(this->tinyrl);
878 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  9 ( 0.00%)  		tinyrl_history_add(history, str);
2,447 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  3 ( 0.00%)  	free(str);
 88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
  .           
  .           	/* Execute the provided command */
  4 ( 0.00%)  	if (context.cmd && context.pargv) {
  .           		int res;
  4 ( 0.00%)  		if ((res = clish_shell_execute(&context, out))) {
7,866 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_execute.c:clish_shell_execute (1x)
  .           			this->state = SHELL_STATE_SCRIPT_ERROR;
  .           			if (context.pargv)
  .           				clish_pargv_delete(context.pargv);
  .           			return res;
  .           		}
  .           	}
  .           
  .           	if (context.pargv)
-- line 531 ----------------------------------------
-- line 537 ----------------------------------------
  .           /*-------------------------------------------------------- */
  .           int clish_shell_forceline(clish_shell_t *this, const char *line, char **out)
  .           {
  .           	return clish_shell_execline(this, line, out);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           int clish_shell_readline(clish_shell_t *this, char **out)
  1 ( 0.00%)  {
  2 ( 0.00%)  	return clish_shell_execline(this, NULL, out);
756,875 (12.91%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_execline (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           FILE * clish_shell__get_istream(const clish_shell_t * this)
  .           {
  .           	return tinyrl__get_istream(this->tinyrl);
  .           }
  .           
-- line 554 ----------------------------------------
-- line 577 ----------------------------------------
  .           {
  .           	assert(this);
  .           	return tinyrl__get_utf8(this->tinyrl);
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell__set_utf8(clish_shell_t * this, bool_t utf8)
  .           {
  2 ( 0.00%)  	assert(this);
  7 ( 0.00%)  	tinyrl__set_utf8(this->tinyrl, utf8);
768 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell__set_timeout(clish_shell_t *this, unsigned int timeout)
  .           {
  .           	assert(this);
  .           	this->idle_timeout = timeout;
  .           }
-- line 594 ----------------------------------------
-- line 603 ----------------------------------------
  .           int clish_shell__save_history(const clish_shell_t *this, const char *fname)
  .           {
  .           	return tinyrl__save_history(this->tinyrl, fname);
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           int clish_shell__restore_history(clish_shell_t *this, const char *fname)
  .           {
  7 ( 0.00%)  	return tinyrl__restore_history(this->tinyrl, fname);
32,950 ( 0.56%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*----------------------------------------------------------*/
  .           void clish_shell__stifle_history(clish_shell_t *this, unsigned int stifle)
  .           {
  7 ( 0.00%)  	tinyrl__stifle_history(this->tinyrl, stifle);
1,599 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           }
  .           
  .           /*-------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c
--------------------------------------------------------------------------------
Ir             

-- line 155 ----------------------------------------
    .           		return 1;
    .           
    .           	return 0;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void utf8_point_left(tinyrl_t * this)
    .           {
   84 ( 0.00%)  	if (!this->utf8)
    .           		return;
  122 ( 0.00%)  	while (this->point &&
   76 ( 0.00%)  		(UTF8_10 == (this->line[this->point] & UTF8_MASK)))
    .           		this->point--;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void utf8_point_right(tinyrl_t * this)
    .           {
    .           	if (!this->utf8)
    .           		return;
    .           	while ((this->point < this->end) &&
    .           		(UTF8_10 == (this->line[this->point] & UTF8_MASK)))
    .           		this->point++;
    .           }
    .           
    .           /*-------------------------------------------------------- */
  203 ( 0.00%)  static unsigned int utf8_nsyms(const tinyrl_t *this, const char *str,
    .           	unsigned int num)
    .           {
    .           	unsigned int nsym = 0;
    .           	unsigned long sym = 0;
    .           	unsigned int i = 0;
    .           
  406 ( 0.01%)  	if (!this->utf8)
    .           		return num;
    .           
3,170 ( 0.05%)  	while (i < num) {
7,224 ( 0.12%)  		if ('\0' == str[i])
    .           			break;
    .           		/* ASCII char */
2,764 ( 0.05%)  		if (!(UTF8_7BIT_MASK & str[i])) {
1,382 ( 0.02%)  			i++;
1,382 ( 0.02%)  			nsym++;
    .           			continue;
    .           		}
    .           		/* Multibyte */
    .           		i += utf8_wchar(&str[i], &sym);
    .           		if (utf8_is_cjk(sym)) /* CJK chars have double-width */
    .           			nsym += 2;
    .           		else
    .           			nsym += 1;
    .           	}
    .           
    .           	return nsym;
  203 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static void tty_set_raw_mode(tinyrl_t * this)
    .           {
    .           	struct termios new_termios;
    .           	int fd;
    .           
    6 ( 0.00%)  	if (!tinyrl_vt100__get_istream(this->term))
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
    .           		return;
    7 ( 0.00%)  	fd = fileno(tinyrl_vt100__get_istream(this->term));
    6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
    7 ( 0.00%)  	if (tcgetattr(fd, &new_termios) < 0)
   50 ( 0.00%)  => /opt/build/glibc/glibc-2.24/termios/../sysdeps/unix/sysv/linux/tcgetattr.c:tcgetattr (1x)
    .           		return;
    1 ( 0.00%)  	new_termios.c_iflag = 0;
    1 ( 0.00%)  	new_termios.c_oflag = OPOST | ONLCR;
    1 ( 0.00%)  	new_termios.c_lflag = 0;
    1 ( 0.00%)  	new_termios.c_cc[VMIN] = 1;
    1 ( 0.00%)  	new_termios.c_cc[VTIME] = 0;
    .           	/* Do the mode switch */
    9 ( 0.00%)  	(void)tcsetattr(fd, TCSADRAIN, &new_termios);
1,586 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static void tty_restore_mode(const tinyrl_t * this)
    .           {
    .           	int fd;
    .           
    5 ( 0.00%)  	if (!tinyrl_vt100__get_istream(this->term))
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
    .           		return;
    6 ( 0.00%)  	fd = fileno(tinyrl_vt100__get_istream(this->term));
    6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
    .           	/* Do the mode switch */
    6 ( 0.00%)  	(void)tcsetattr(fd, TCSADRAIN, &this->default_termios);
   70 ( 0.00%)  => /opt/build/glibc/glibc-2.24/termios/../sysdeps/unix/sysv/linux/tcsetattr.c:tcsetattr (1x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .           This is called whenever a line is edited in any way.
    .           It signals that if we are currently viewing a history line we should transfer it
    .           to the current buffer
    .           */
    .           static void changed_line(tinyrl_t * this)
   92 ( 0.00%)  {
    .           	/* if the current line is not our buffer then make it so */
  138 ( 0.00%)  	if (this->line != this->buffer) {
    .           		/* replace the current buffer with the new details */
    .           		free(this->buffer);
    .           		this->line = this->buffer = lub_string_dup(this->line);
    .           		this->buffer_size = strlen(this->buffer);
    .           		assert(this->line);
    .           	}
   92 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static int tinyrl_timeout_default(tinyrl_t *this)
    .           {
    .           	this = this; /* Happy compiler */
    .           
    .           	/* Return -1 to close session on timeout */
    .           	return -1;
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static bool_t tinyrl_key_default(tinyrl_t * this, int key)
   40 ( 0.00%)  {
    .           	bool_t result = BOOL_FALSE;
   40 ( 0.00%)  	if (key > 31) {
    .           		char tmp[2];
   40 ( 0.00%)  		tmp[0] = (key & 0xFF), tmp[1] = '\0';
    .           		/* inject this text into the buffer */
   84 ( 0.00%)  		result = tinyrl_insert_text(this, tmp);
3,274 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,859 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text (19x)
    .           	} else {
    .           		/* Call the external hotkey analyzer */
    .           		if (this->hotkey_fn)
    .           			this->hotkey_fn(this, key);
    .           	}
    .           	return result;
   80 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_interrupt(tinyrl_t * this, int key)
    .           {
    .           	tinyrl_crlf(this);
    .           	tinyrl_delete_text(this, 0, this->end);
    .           	this->done = BOOL_TRUE;
    .           	/* keep the compiler happy */
-- line 293 ----------------------------------------
-- line 383 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_down(tinyrl_t * this, int key)
    .           {
    .           	bool_t result = BOOL_FALSE;
    .           	if (this->line != this->buffer) {
    .           		/* we are not already at the bottom */
    .           		/* the iterator will have been set up by the key_up() function */
    .           		tinyrl_history_entry_t *entry =
    2 ( 0.00%)  		    tinyrl_history_getnext(&this->hist_iter);
    .           		if (!entry) {
    .           			/* nothing more in the history list */
    .           			this->line = this->buffer;
    .           		} else {
    .           			this->line = tinyrl_history_entry__get_line(entry);
    .           		}
    .           		/* display the entry moving the insertion point
    .           		 * to the end of the line 
-- line 399 ----------------------------------------
-- line 431 ----------------------------------------
    .           	}
    .           	/* keep the compiler happy */
    .           	key = key;
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_backspace(tinyrl_t *this, int key)
   21 ( 0.00%)  {
    .           	bool_t result = BOOL_FALSE;
   84 ( 0.00%)  	if (this->point) {
   63 ( 0.00%)  		unsigned int end = --this->point;
    .           		utf8_point_left(this);
   63 ( 0.00%)  		tinyrl_delete_text(this, this->point, end);
1,470 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_delete_text (21x)
   21 ( 0.00%)  		result = BOOL_TRUE;
    .           	}
    .           	/* keep the compiler happy */
    .           	key = key;
    .           	return result;
  161 ( 0.00%)  }
  198 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_point_left.part.0 (21x)
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_backword(tinyrl_t *this, int key)
    .           {
    .           	bool_t result = BOOL_FALSE;
    .           
    .               /* remove current whitespace before cursor */
    .           	while (this->point > 0 && isspace(this->line[this->point - 1]))
-- line 458 ----------------------------------------
-- line 562 ----------------------------------------
    .           		break;
    .           	}
    .           
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static bool_t tinyrl_key_tab(tinyrl_t * this, int key)
   18 ( 0.00%)  {
    .           	bool_t result = BOOL_FALSE;
   22 ( 0.00%)  	tinyrl_match_e status = tinyrl_complete_with_extensions(this);
439,092 ( 7.49%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_complete_with_extensions (8x)
93,846 ( 1.60%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
   32 ( 0.00%)  	switch (status) {
    .           	case TINYRL_COMPLETED_MATCH:
    .           	case TINYRL_MATCH:
    .           		/* everything is OK with the world... */
   12 ( 0.00%)  		result = tinyrl_insert_text(this, " ");
  267 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text (3x)
    .           		break;
    .           	case TINYRL_NO_MATCH:
    .           	case TINYRL_MATCH_WITH_EXTENSIONS:
    .           	case TINYRL_AMBIGUOUS:
    .           	case TINYRL_COMPLETED_AMBIGUOUS:
    .           		/* oops don't change the result and let the bell ring */
    .           		break;
    .           	}
    .           	/* keep the compiler happy */
    .           	key = key;
    .           	return result;
   21 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           static void tinyrl_fini(tinyrl_t * this)
    .           {
    .           	/* delete the history session */
    .           	tinyrl_history_delete(this->history);
    .           
    .           	/* delete the terminal session */
-- line 598 ----------------------------------------
-- line 606 ----------------------------------------
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void tinyrl_init(tinyrl_t * this, FILE * istream, FILE * ostream,
    .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
    .           {
    .           	int i;
    .           
  512 ( 0.01%)  	for (i = 0; i < NUM_HANDLERS; i++) {
  512 ( 0.01%)  		this->handlers[i] = tinyrl_key_default;
    .           	}
    .           	/* Default handlers */
    2 ( 0.00%)  	this->handlers[KEY_CR] = tinyrl_key_crlf;
    1 ( 0.00%)  	this->handlers[KEY_LF] = tinyrl_key_crlf;
    2 ( 0.00%)  	this->handlers[KEY_ETX] = tinyrl_key_interrupt;
    2 ( 0.00%)  	this->handlers[KEY_DEL] = tinyrl_key_backspace;
    1 ( 0.00%)  	this->handlers[KEY_BS] = tinyrl_key_backspace;
    2 ( 0.00%)  	this->handlers[KEY_EOT] = tinyrl_key_delete;
    2 ( 0.00%)  	this->handlers[KEY_FF] = tinyrl_key_clear_screen;
    2 ( 0.00%)  	this->handlers[KEY_NAK] = tinyrl_key_erase_line;
    2 ( 0.00%)  	this->handlers[KEY_SOH] = tinyrl_key_start_of_line;
    2 ( 0.00%)  	this->handlers[KEY_ENQ] = tinyrl_key_end_of_line;
    2 ( 0.00%)  	this->handlers[KEY_VT] = tinyrl_key_kill;
    2 ( 0.00%)  	this->handlers[KEY_EM] = tinyrl_key_yank;
    2 ( 0.00%)  	this->handlers[KEY_HT] = tinyrl_key_tab;
    2 ( 0.00%)  	this->handlers[KEY_ETB] = tinyrl_key_backword;
    .           
    1 ( 0.00%)  	this->line = NULL;
    1 ( 0.00%)  	this->max_line_length = 0;
    1 ( 0.00%)  	this->prompt = NULL;
    1 ( 0.00%)  	this->prompt_size = 0;
    1 ( 0.00%)  	this->buffer = NULL;
    1 ( 0.00%)  	this->buffer_size = 0;
    1 ( 0.00%)  	this->done = BOOL_FALSE;
    1 ( 0.00%)  	this->completion_over = BOOL_FALSE;
    1 ( 0.00%)  	this->point = 0;
    1 ( 0.00%)  	this->end = 0;
    1 ( 0.00%)  	this->attempted_completion_function = complete_fn;
    2 ( 0.00%)  	this->timeout_fn = tinyrl_timeout_default;
    1 ( 0.00%)  	this->keypress_fn = NULL;
    1 ( 0.00%)  	this->hotkey_fn = NULL;
    1 ( 0.00%)  	this->state = 0;
    1 ( 0.00%)  	this->kill_string = NULL;
    1 ( 0.00%)  	this->echo_char = '\0';
    1 ( 0.00%)  	this->echo_enabled = BOOL_TRUE;
    1 ( 0.00%)  	this->last_buffer = NULL;
    1 ( 0.00%)  	this->last_point = 0;
    1 ( 0.00%)  	this->last_line_size = 0;
    1 ( 0.00%)  	this->utf8 = BOOL_FALSE;
    .           
    .           	/* create the vt100 terminal */
    9 ( 0.00%)  	this->term = tinyrl_vt100_new(NULL, ostream);
  917 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    8 ( 0.00%)  	tinyrl__set_istream(this, istream);
1,547 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    8 ( 0.00%)  	this->last_width = tinyrl_vt100__get_width(this->term);
3,714 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* create the history */
    8 ( 0.00%)  	this->history = tinyrl_history_new(stifle);
1,742 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_printf(const tinyrl_t * this, const char *fmt, ...)
    7 ( 0.00%)  {
    .           	va_list args;
    .           	int len;
    .           
    6 ( 0.00%)  	va_start(args, fmt);
    8 ( 0.00%)  	len = tinyrl_vt100_vprintf(this->term, fmt, args);
18,066 ( 0.31%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	va_end(args);
    .           
    .           	return len;
    2 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_delete(tinyrl_t * this)
    .           {
    .           	assert(this);
    .           	if (this) {
    .           		/* let the object tidy itself up */
    .           		tinyrl_fini(this);
-- line 684 ----------------------------------------
-- line 691 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           
    .           /*#####################################
    .            * EXPORTED INTERFACE
    .            *##################################### */
    .           /*----------------------------------------------------------------------- */
    .           int tinyrl_getchar(const tinyrl_t * this)
    .           {
  181 ( 0.00%)  	return tinyrl_vt100_getchar(this->term);
2,726 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_getchar (58x)
2,231 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static void tinyrl_internal_print(const tinyrl_t * this, const char *text)
    .           {
  210 ( 0.00%)  	if (this->echo_enabled) {
    .           		/* simply echo the line */
  490 ( 0.01%)  		tinyrl_vt100_printf(this->term, "%s", text);
26,542 ( 0.45%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (70x)
    .           	} else {
    .           		/* replace the line with echo char if defined */
    .           		if (this->echo_char) {
    .           			unsigned int i = strlen(text);
    .           			while (i--) {
    .           				tinyrl_vt100_printf(this->term, "%c",
    .           					this->echo_char);
    .           			}
    .           		}
    .           	}
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
  264 ( 0.00%)  static void tinyrl_internal_position(const tinyrl_t *this, int prompt_len,
    .           	int line_len, unsigned int width)
    .           {
    .           	int rows, cols;
    .           
  594 ( 0.01%)  	rows = ((line_len + prompt_len) / width) - (prompt_len / width);
   66 ( 0.00%)  	cols = ((line_len + prompt_len) % width) - (prompt_len % width);
  132 ( 0.00%)  	if (cols > 0)
   88 ( 0.00%)  		tinyrl_vt100_cursor_back(this->term, cols);
16,060 ( 0.27%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_cursor_back (20x)
1,578 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   45 ( 0.00%)  	else if (cols < 0)
    .           		tinyrl_vt100_cursor_forward(this->term, -cols);
  132 ( 0.00%)  	if (rows > 0)
    .           		tinyrl_vt100_cursor_up(this->term, rows);
   66 ( 0.00%)  	else if (rows < 0)
    .           		tinyrl_vt100_cursor_down(this->term, -rows);
  264 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           /* Jump to first free line after current multiline input   */
    .           void tinyrl_multi_crlf(const tinyrl_t * this)
    6 ( 0.00%)  {
    5 ( 0.00%)  	unsigned int line_size = strlen(this->last_buffer);
   16 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (1x)
    5 ( 0.00%)  	unsigned int line_len = utf8_nsyms(this, this->last_buffer, line_size);
   63 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (1x)
    4 ( 0.00%)  	unsigned int count = utf8_nsyms(this, this->last_buffer, this->last_point);
   63 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (1x)
    .           
    5 ( 0.00%)  	tinyrl_internal_position(this, this->prompt_len + line_len,
   24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_internal_position.isra.5 (1x)
    2 ( 0.00%)  		- (line_len - count), this->last_width);
    3 ( 0.00%)  	tinyrl_crlf(this);
  384 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_crlf (1x)
    3 ( 0.00%)  	tinyrl_vt100_oflush(this->term);
   73 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (1x)
    5 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           void tinyrl_redisplay(tinyrl_t * this)
  560 ( 0.01%)  {
  350 ( 0.01%)  	unsigned int line_size = strlen(this->line);
1,300 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (70x)
  350 ( 0.01%)  	unsigned int line_len = utf8_nsyms(this, this->line, line_size);
5,819 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (70x)
  280 ( 0.00%)  	unsigned int width = tinyrl_vt100__get_width(this->term);
2,310 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_width (70x)
    5 ( 0.00%)  	unsigned int count, eq_chars = 0;
    .           	int cols;
    .           
    .           	/* Prepare print position */
  405 ( 0.01%)  	if (this->last_buffer && (width == this->last_width)) {
    .           		unsigned int eq_len = 0;
    .           		/* If line and last line have the equal chars at begining */
  264 ( 0.00%)  		eq_chars = lub_string_equal_part(this->line, this->last_buffer,
6,248 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_equal_part (64x)
  849 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           			this->utf8);
  585 ( 0.01%)  		eq_len = utf8_nsyms(this, this->last_buffer, eq_chars);
5,262 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (65x)
  325 ( 0.01%)  		count = utf8_nsyms(this, this->last_buffer, this->last_point);
5,497 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (65x)
  390 ( 0.01%)  		tinyrl_internal_position(this, this->prompt_len + eq_len,
19,265 ( 0.33%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_internal_position.isra.5 (65x)
  130 ( 0.00%)  			count - eq_len, width);
    .           	} else {
    .           		/* Prepare to resize */
   10 ( 0.00%)  		if (width != this->last_width) {
    .           			tinyrl_vt100_next_line(this->term);
    .           			tinyrl_vt100_erase_down(this->term);
    .           		}
   39 ( 0.00%)  		tinyrl_vt100_printf(this->term, "%s", this->prompt);
1,648 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (4x)
1,163 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	}
    .           
    .           	/* Print current line */
   70 ( 0.00%)  	tinyrl_internal_print(this, this->line + eq_chars);
  350 ( 0.01%)  	cols = (this->prompt_len + line_len) % width;
  140 ( 0.00%)  	if (!cols && (line_size - eq_chars))
    .           		tinyrl_vt100_next_line(this->term);
    .           	/* Erase down if current line is shorter than previous one */
  140 ( 0.00%)  	if (this->last_line_size > line_size)
   88 ( 0.00%)  		tinyrl_vt100_erase_down(this->term);
8,600 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_erase_down (20x)
1,189 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	/* Move the cursor to the insertion point */
  210 ( 0.00%)  	if (this->point < line_size) {
    .           		unsigned int pre_len = utf8_nsyms(this,
    .           			this->line, this->point);
    .           		count = utf8_nsyms(this, this->line + this->point,
    .           			line_size - this->point);
    .           		tinyrl_internal_position(this, this->prompt_len + pre_len,
    .           			count, width);
    .           	}
    .           
    .           	/* Update the display */
  214 ( 0.00%)  	tinyrl_vt100_oflush(this->term);
10,917 ( 0.19%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (69x)
2,407 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
    .           	/* Save the last line buffer */
  210 ( 0.00%)  	lub_string_free(this->last_buffer);
5,895 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (70x)
  280 ( 0.00%)  	this->last_buffer = lub_string_dup(this->line);
11,008 ( 0.19%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (70x)
  140 ( 0.00%)  	this->last_point = this->point;
   70 ( 0.00%)  	this->last_width = width;
   70 ( 0.00%)  	this->last_line_size = line_size;
  560 ( 0.01%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           tinyrl_t *tinyrl_new(FILE * istream, FILE * ostream,
    .           	unsigned int stifle, tinyrl_completion_func_t * complete_fn)
    9 ( 0.00%)  {
    .           	tinyrl_t *this = NULL;
    .           
    8 ( 0.00%)  	this = malloc(sizeof(tinyrl_t));
1,783 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  	if (this)
    .           		tinyrl_init(this, istream, ostream, stifle, complete_fn);
    .           
    .           	return this;
    7 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static char *internal_insertline(tinyrl_t * this, char *buffer)
    .           {
    .           	char *p;
    .           	char *s = buffer;
    .           
    .           	/* strip any spurious '\r' or '\n' */
-- line 828 ----------------------------------------
-- line 843 ----------------------------------------
    .           	tinyrl_redisplay(this);
    .           
    .           	return s;
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           static char *internal_readline(tinyrl_t * this,
    .           	void *context, const char *str)
   10 ( 0.00%)  {
    4 ( 0.00%)  	FILE *istream = tinyrl_vt100__get_istream(this->term);
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
    .           	char *result = NULL;
    .           	int lerrno = 0;
    .           
    1 ( 0.00%)  	this->done = BOOL_FALSE;
    1 ( 0.00%)  	this->point = 0;
    1 ( 0.00%)  	this->end = 0;
    5 ( 0.00%)  	this->buffer = lub_string_dup("");
  156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    4 ( 0.00%)  	this->buffer_size = strlen(this->buffer);
   16 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (1x)
    1 ( 0.00%)  	this->line = this->buffer;
    1 ( 0.00%)  	this->context = context;
    .           
    .           	/* Interactive session */
    5 ( 0.00%)  	if (this->isatty && !str) {
    1 ( 0.00%)  		unsigned int utf8_cont = 0; /* UTF-8 continue bytes */
    1 ( 0.00%)  		unsigned int esc_cont = 0; /* Escape sequence continues */
    .           		char esc_seq[10]; /* Buffer for ESC sequence */
    1 ( 0.00%)  		char *esc_p = esc_seq;
    .           
    .           		/* Set the terminal into raw mode */
    .           		tty_set_raw_mode(this);
    7 ( 0.00%)  		tinyrl_reset_line_state(this);
6,547 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           
  121 ( 0.00%)  		while (!this->done) {
    .           			int key;
    .           
  240 ( 0.00%)  			key = tinyrl_getchar(this);
2,949 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
2,900 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_getchar (58x)
    .           
    .           			/* Error || EOF || Timeout */
  118 ( 0.00%)  			if (key < 0) {
    .           				if ((VT100_TIMEOUT == key) &&
    .           					!this->timeout_fn(this))
    .           					continue;
    .           				/* It's time to finish the session */
    .           				this->done = BOOL_TRUE;
    .           				this->line = NULL;
    .           				lerrno = ENOENT;
    .           				continue;
    .           			}
    .           
    .           			/* Real key pressed */
    .           			/* Common callback for any key */
  177 ( 0.00%)  			if (this->keypress_fn)
  177 ( 0.00%)  				this->keypress_fn(this, key);
1,888 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_wdog.c:clish_shell_keypress_fn (59x)
    .           
    .           			/* Check for ESC sequence. It's a special case. */
  354 ( 0.01%)  			if (!esc_cont && (key == KEY_ESC)) {
    .           				esc_cont = 1; /* Start ESC sequence */
    .           				esc_p = esc_seq;
    .           				continue;
    .           			}
  118 ( 0.00%)  			if (esc_cont) {
    .           				/* Broken sequence */
    3 ( 0.00%)  				if (esc_p >= (esc_seq + sizeof(esc_seq) - 1)) {
    .           					esc_cont = 0;
    .           					continue;
    .           				}
    .           				/* Dump the control sequence into sequence buffer
    .           				   ANSI standard control sequences will end
    .           				   with a character between 64 - 126 */
    .           				*esc_p = key & 0xff;
    .           				esc_p++;
-- line 913 ----------------------------------------
-- line 917 ----------------------------------------
    .           					tinyrl_escape_seq(this, esc_seq);
    .           					esc_cont = 0;
    .           					tinyrl_redisplay(this);
    .           				}
    .           				continue;
    .           			}
    .           
    .           			/* Call the handler for this key */
  354 ( 0.01%)  			if (!this->handlers[key](this, key))
533,310 ( 9.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_tab (9x)
39,255 ( 0.67%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_key_space (1x)
13,002 ( 0.22%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_key_enter (1x)
5,417 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_default (20x)
2,165 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_key_backspace (28x)
   60 ( 0.00%)  				tinyrl_ding(this);
1,959 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
7,345 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_ding (13x)
  177 ( 0.00%)  			if (this->done) /* Some handler set the done flag */
    .           				continue; /* It will break the loop */
    .           
  174 ( 0.00%)  			if (this->utf8) {
  116 ( 0.00%)  				if (!(UTF8_7BIT_MASK & key)) /* ASCII char */
    .           					utf8_cont = 0;
    .           				else if (utf8_cont && (UTF8_10 == (key & UTF8_MASK))) /* Continue byte */
    .           					utf8_cont--;
    .           				else if (UTF8_11 == (key & UTF8_MASK)) { /* First byte of multibyte char */
    .           					/* Find out number of char's bytes */
    .           					int b = key;
    .           					utf8_cont = 0;
    .           					while ((utf8_cont < 6) && (UTF8_10 != (b & UTF8_MASK))) {
-- line 939 ----------------------------------------
-- line 941 ----------------------------------------
    .           						b = b << 1;
    .           					}
    .           				}
    .           			}
    .           			/* For non UTF-8 encoding the utf8_cont is always 0.
    .           			   For UTF-8 it's 0 when one-byte symbol or we get
    .           			   all bytes for the current multibyte character. */
    .           			if (!utf8_cont)
  348 ( 0.01%)  				tinyrl_redisplay(this);
103,360 ( 1.76%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay (58x)
    .           		}
    .           		/* If the last character in the line (other than NULL)
    .           		   is a space remove it. */
   14 ( 0.00%)  		if (this->end && this->line && isspace(this->line[this->end - 1]))
    3 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (1x)
    .           			tinyrl_delete_text(this, this->end - 1, this->end);
    .           		/* Restores the terminal mode */
    .           		tty_restore_mode(this);
    .           
    .           	/* Non-interactive session */
    .           	} else {
    .           		char *s = NULL, buffer[80];
    .           		size_t len = sizeof(buffer);
-- line 961 ----------------------------------------
-- line 987 ----------------------------------------
    .           		 * error from fgets.
    .           		 */
    .           		if (this->line && !this->handlers[KEY_LF](this, KEY_LF)) {
    .           			/* an issue has occured */
    .           			this->line = NULL;
    .           			lerrno = ENOEXEC;
    .           		}
    .           		if (str)
    1 ( 0.00%)  			lub_string_free(tmp);
    .           	}
    .           	/*
    .           	 * duplicate the string for return to the client 
    .           	 * we have to duplicate as we may be referencing a
    .           	 * history entry or our internal buffer
    .           	 */
    5 ( 0.00%)  	result = this->line ? lub_string_dup(this->line) : NULL;
  155 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    .           
    .           	/* free our internal buffer */
    3 ( 0.00%)  	free(this->buffer);
   88 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (1x)
    1 ( 0.00%)  	this->buffer = NULL;
    .           
    2 ( 0.00%)  	if (!result)
    .           		errno = lerrno; /* get saved errno */
    .           	return result;
    9 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           char *tinyrl_readline(tinyrl_t * this, void *context)
    .           {
    2 ( 0.00%)  	return internal_readline(this, context, NULL);
724,911 (12.37%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:internal_readline (1x)
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           char *tinyrl_forceline(tinyrl_t * this, void *context, const char *line)
    .           {
    .           	return internal_readline(this, context, line);
    .           }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .            * Ensure that buffer has enough space to hold len characters,
    .            * possibly reallocating it if necessary. The function returns BOOL_TRUE
    .            * if the line is successfully extended, BOOL_FALSE if not.
    .            */
    .           bool_t tinyrl_extend_line_buffer(tinyrl_t * this, unsigned int len)
    6 ( 0.00%)  {
    .           	bool_t result = BOOL_TRUE;
    .           	char *new_buffer;
    2 ( 0.00%)  	size_t new_len = len;
    .           
    6 ( 0.00%)  	if (this->buffer_size >= len)
    2 ( 0.00%)  		return result;
    .           
    .           	/*
    .           	 * What we do depends on whether we are limited by
    .           	 * memory or a user imposed limit.
    .           	 */
    8 ( 0.00%)  	if (this->max_line_length == 0) {
    .           		/* make sure we don't realloc too often */
    2 ( 0.00%)  		if (new_len < this->buffer_size + 10)
    .           			new_len = this->buffer_size + 10;
    .           		/* leave space for terminator */
   14 ( 0.00%)  		new_buffer = realloc(this->buffer, new_len + 1);
  262 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (2x)
    .           
    4 ( 0.00%)  		if (!new_buffer) {
    .           			tinyrl_ding(this);
    .           			result = BOOL_FALSE;
    .           		} else {
    2 ( 0.00%)  			this->buffer_size = new_len;
    4 ( 0.00%)  			this->line = this->buffer = new_buffer;
    .           		}
    .           	} else {
    .           		if (new_len < this->max_line_length) {
    .           
    .           			/* Just reallocate once to the max size */
    .           			new_buffer = realloc(this->buffer,
    .           				this->max_line_length);
    .           
-- line 1064 ----------------------------------------
-- line 1072 ----------------------------------------
    .           			}
    .           		} else {
    .           			tinyrl_ding(this);
    .           			result = BOOL_FALSE;
    .           		}
    .           	}
    .           
    .           	return result;
   10 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .            * Insert text into the line at the current cursor position.
    .            */
    .           bool_t tinyrl_insert_text(tinyrl_t * this, const char *text)
  120 ( 0.00%)  {
   96 ( 0.00%)  	unsigned int delta = strlen(text);
  384 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (24x)
    .           
    .           	/*
    .           	 * If the client wants to change the line ensure that the line and buffer
    .           	 * references are in sync
    .           	 */
   48 ( 0.00%)  	changed_line(this);
  168 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:changed_line (24x)
    .           
   96 ( 0.00%)  	if ((delta + this->end) > (this->buffer_size)) {
    .           		/* extend the current buffer */
    6 ( 0.00%)  		if (BOOL_FALSE ==
   10 ( 0.00%)  			tinyrl_extend_line_buffer(this, this->end + delta))
  936 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  161 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_extend_line_buffer (1x)
    .           			return BOOL_FALSE;
    .           	}
    .           
   72 ( 0.00%)  	if (this->point < this->end) {
    .           		/* move the current text to the right (including the terminator) */
    .           		memmove(&this->buffer[this->point + delta],
    .           			&this->buffer[this->point],
    .           			(this->end - this->point) + 1);
    .           	} else {
    .           		/* terminate the string */
   72 ( 0.00%)  		this->buffer[this->end + delta] = '\0';
    .           	}
    .           
    .           	/* insert the new text */
  148 ( 0.00%)  	strncpy(&this->buffer[this->point], text, delta);
1,547 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  731 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (23x)
    .           
    .           	/* now update the indexes */
   24 ( 0.00%)  	this->point += delta;
   24 ( 0.00%)  	this->end += delta;
    .           
   24 ( 0.00%)  	return BOOL_TRUE;
   98 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /* 
    .            * A convenience function for displaying a list of strings in columnar
    .            * format on Readline's output stream. matches is the list of strings,
    .            * in argv format, such as a list of completion matches. len is the number
    .            * of strings in matches, and max is the length of the longest string in matches.
    .            * This function uses the setting of print-completions-horizontally to select
    .            * how the matches are displayed
    .            */
    .           void tinyrl_display_matches(const tinyrl_t *this,
    .           	char *const *matches, unsigned int len, size_t max)
   48 ( 0.00%)  {
   12 ( 0.00%)  	unsigned int width = tinyrl_vt100__get_width(this->term);
  132 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_width (4x)
    .           	unsigned int cols, rows;
    .           
    .           	/* Find out column and rows number */
   12 ( 0.00%)  	if (max < width)
   24 ( 0.00%)  		cols = (width + 1) / (max + 1); /* allow for a space between words */
    .           	else
    .           		cols = 1;
   20 ( 0.00%)  	rows = len / cols + 1;
    .           
    8 ( 0.00%)  	assert(matches);
    .           	if (matches) {
    .           		unsigned int r, c;
    4 ( 0.00%)  		len--, matches++; /* skip the subtitution string */
    .           		/* Print out a table of completions */
   52 ( 0.00%)  		for (r = 0; r < rows && len; r++) {
  210 ( 0.00%)  			for (c = 0; c < cols && len; c++) {
   62 ( 0.00%)  				const char *match = *matches++;
   31 ( 0.00%)  				len--;
   93 ( 0.00%)  				if ((c + 1) == cols) /* Last str in row */
   31 ( 0.00%)  					tinyrl_vt100_printf(this->term, "%s",
    .           						match);
    .           				else
  155 ( 0.00%)  					tinyrl_vt100_printf(this->term, "%-*s ",
20,742 ( 0.35%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (31x)
    .           						max, match);
    .           			}
   16 ( 0.00%)  			tinyrl_crlf(this);
1,536 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_crlf (4x)
    .           		}
    .           	}
   32 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           /*
    .            * Delete the text between start and end in the current line. (inclusive)
    .            * This adjusts the rl_point and rl_end indexes appropriately.
    .            */
    .           void tinyrl_delete_text(tinyrl_t * this, unsigned int start, unsigned int end)
  176 ( 0.00%)  {
    .           	unsigned int delta;
    .           
    .           	/*
    .           	 * If the client wants to change the line ensure that the line and buffer
    .           	 * references are in sync
    .           	 */
   22 ( 0.00%)  	changed_line(this);
  154 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:changed_line (22x)
    .           
    .           	/* make sure we play it safe */
    .           	if (start > end) {
    .           		unsigned int tmp = end;
    .           		start = end;
    .           		end = tmp;
    .           	}
   44 ( 0.00%)  	if (end > this->end)
    .           		end = this->end;
    .           
   66 ( 0.00%)  	delta = (end - start) + 1;
    .           
    .           	/* move any text which is left */
  180 ( 0.00%)  	memmove(&this->buffer[start],
1,482 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  273 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy@GLIBC_2.2.5 (21x)
   88 ( 0.00%)  		&this->buffer[start + delta], this->end - end);
    .           
    .           	/* now adjust the indexs */
   66 ( 0.00%)  	if (this->point >= start) {
    .           		if (this->point > end) {
    .           			/* move the insertion point back appropriately */
  132 ( 0.00%)  			this->point -= delta;
    .           		} else {
    .           			/* move the insertion point to the start */
    .           			this->point = start;
    .           		}
    .           	}
   66 ( 0.00%)  	if (this->end > end)
   84 ( 0.00%)  		this->end -= delta;
    .           	else
    1 ( 0.00%)  		this->end = start;
    .           	/* put a terminator at the end of the buffer */
   44 ( 0.00%)  	this->buffer[this->end] = '\0';
  132 ( 0.00%)  }
    .           
    .           /*----------------------------------------------------------------------- */
    .           bool_t tinyrl_bind_key(tinyrl_t * this, int key, tinyrl_key_func_t * fn)
    .           {
    4 ( 0.00%)  	bool_t result = BOOL_FALSE;
    .           
    8 ( 0.00%)  	if ((key >= 0) && (key < 256)) {
    .           		/* set the key handling function */
    8 ( 0.00%)  		this->handlers[key] = fn;
    4 ( 0.00%)  		result = BOOL_TRUE;
    .           	}
    .           
    .           	return result;
    4 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           /*
    .            * Returns an array of strings which is a list of completions for text.
    .            * If there are no completions, returns NULL. The first entry in the
    .            * returned array is the substitution for text. The remaining entries
    .            * are the possible completions. The array is terminated with a NULL pointer.
    .            *
-- line 1234 ----------------------------------------
-- line 1286 ----------------------------------------
    .           
    .           	if (matches)
    .           		matches[offset] = NULL;
    .           	return matches;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_delete_matches(char **this)
   35 ( 0.00%)  {
    .           	char **matches = this;
  151 ( 0.00%)  	while (*matches) {
    .           		/* release the memory for each contained string */
  123 ( 0.00%)  		free(*matches++);
3,608 ( 0.06%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (41x)
    .           	}
    .           	/* release the memory for the array */
   21 ( 0.00%)  	free(this);
  616 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (7x)
   21 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_crlf(const tinyrl_t * this)
    .           {
   45 ( 0.00%)  	tinyrl_vt100_printf(this->term, "\n");
3,411 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (9x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           /*
    .            * Ring the terminal bell, obeying the setting of bell-style.
    .            */
    .           void tinyrl_ding(const tinyrl_t * this)
    .           {
   46 ( 0.00%)  	tinyrl_vt100_ding(this->term);
7,306 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_ding (13x)
1,281 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_reset_line_state(tinyrl_t * this)
   10 ( 0.00%)  {
   19 ( 0.00%)  	lub_string_free(this->last_buffer);
  795 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  360 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (4x)
    5 ( 0.00%)  	this->last_buffer = NULL;
    5 ( 0.00%)  	this->last_line_size = 0;
    .           
   19 ( 0.00%)  	tinyrl_redisplay(this);
4,974 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,476 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay (4x)
    5 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_replace_line(tinyrl_t * this, const char *text, int clear_undo)
    .           {
    .           	size_t new_len = strlen(text);
    .           
    .           	/* ignored for now */
    .           	clear_undo = clear_undo;
-- line 1335 ----------------------------------------
-- line 1344 ----------------------------------------
    .           		this->point = this->end = new_len;
    .           	}
    .           	tinyrl_redisplay(this);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static tinyrl_match_e
    .           tinyrl_do_complete(tinyrl_t * this, bool_t with_extensions)
   90 ( 0.00%)  {
    .           	tinyrl_match_e result = TINYRL_NO_MATCH;
    .           	char **matches = NULL;
    .           	unsigned int start, end;
    6 ( 0.00%)  	bool_t completion = BOOL_FALSE;
    .           	bool_t prefix = BOOL_FALSE;
    .           	int i = 0;
    .           
    .           	/* find the start and end of the current word */
   10 ( 0.00%)  	start = end = this->point;
  228 ( 0.00%)  	while (start && !isspace(this->line[start - 1]))
1,546 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   21 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (7x)
    .           		start--;
    .           
   30 ( 0.00%)  	if (this->attempted_completion_function) {
   10 ( 0.00%)  		this->completion_over = BOOL_FALSE;
   10 ( 0.00%)  		this->completion_error_over = BOOL_FALSE;
    .           		/* try and complete the current line buffer */
   60 ( 0.00%)  		matches = this->attempted_completion_function(this,
506,856 ( 8.65%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_tinyrl.c:clish_shell_tinyrl_completion (10x)
    .           			this->line, start, end);
    .           	}
    .           	if (!matches && (BOOL_FALSE == this->completion_over)) {
    .           		/* insert default completion call here... */
    .           	}
   20 ( 0.00%)  	if (!matches)
    6 ( 0.00%)  		return result;
    .           
    .           	/* identify and insert a common prefix if there is one */
   88 ( 0.00%)  	if (0 != strncmp(matches[0], &this->line[start],
1,491 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  112 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (7x)
  148 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse42.S:__strncmp_sse42 (6x)
    .           		strlen(matches[0]))) {
    .           		/*
    .           		 * delete the original text not including
    .           		 * the current insertion point character
    .           		 */
    1 ( 0.00%)  		if (this->end != end)
    3 ( 0.00%)  			end--;
    8 ( 0.00%)  		tinyrl_delete_text(this, start, end);
2,267 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  		if (BOOL_FALSE == tinyrl_insert_text(this, matches[0]))
   84 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_insert_text (1x)
    .           			return TINYRL_NO_MATCH;
    2 ( 0.00%)  		completion = BOOL_TRUE;
    .           	}
  137 ( 0.00%)  	for (i = 1; matches[i]; i++) {
    .           		/* this is just a prefix string */
  106 ( 0.00%)  		if (0 == lub_string_nocasecmp(matches[0], matches[i]))
  867 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,168 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (33x)
  116 ( 0.00%)  			prefix = BOOL_TRUE;
    .           	}
    .           	/* is there more than one completion? */
   26 ( 0.00%)  	if (matches[2]) {
    .           		char **tmp = matches;
    .           		unsigned int max, len;
    .           		max = len = 0;
  156 ( 0.00%)  		while (*tmp) {
   70 ( 0.00%)  			size_t size = strlen(*tmp++);
  560 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (35x)
    .           			len++;
   35 ( 0.00%)  			if (size > max)
  105 ( 0.00%)  				max = size;
    .           		}
   12 ( 0.00%)  		if (completion)
    .           			result = TINYRL_COMPLETED_AMBIGUOUS;
    8 ( 0.00%)  		else if (prefix)
    4 ( 0.00%)  			result = TINYRL_MATCH_WITH_EXTENSIONS;
    .           		else
    4 ( 0.00%)  			result = TINYRL_AMBIGUOUS;
    .           		if (with_extensions || !prefix) {
    .           			/* Either we always want to show extensions or
    .           			 * we haven't been able to complete the current line
    .           			 * and there is just a prefix, so let the user see the options
    .           			 */
   20 ( 0.00%)  			tinyrl_crlf(this);
1,055 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,152 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_crlf (3x)
   28 ( 0.00%)  			tinyrl_display_matches(this, matches, len, max);
10,372 ( 0.18%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
13,599 ( 0.23%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_display_matches (3x)
   16 ( 0.00%)  			tinyrl_reset_line_state(this);
5,880 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_reset_line_state (4x)
    .           		}
    .           	} else {
    .           		result = completion ?
   15 ( 0.00%)  			TINYRL_COMPLETED_MATCH : TINYRL_MATCH;
    .           	}
    .           	/* free the memory */
   25 ( 0.00%)  	tinyrl_delete_matches(matches);
2,162 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,156 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_delete_matches (6x)
    .           	/* redisplay the line */
   21 ( 0.00%)  	tinyrl_redisplay(this);
9,779 ( 0.17%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_redisplay (7x)
    .           
    .           	return result;
   90 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           tinyrl_match_e tinyrl_complete_with_extensions(tinyrl_t * this)
    .           {
   18 ( 0.00%)  	return tinyrl_do_complete(this, BOOL_TRUE);
532,097 ( 9.08%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_do_complete (9x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           tinyrl_match_e tinyrl_complete(tinyrl_t * this)
    .           {
    2 ( 0.00%)  	return tinyrl_do_complete(this, BOOL_FALSE);
31,750 ( 0.54%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:tinyrl_do_complete (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void *tinyrl__get_context(const tinyrl_t * this)
    .           {
   71 ( 0.00%)  	return this->context;
   71 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *tinyrl__get_line(const tinyrl_t * this)
    .           {
    2 ( 0.00%)  	return this->line;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           tinyrl_history_t *tinyrl__get_history(const tinyrl_t * this)
    .           {
    1 ( 0.00%)  	return this->history;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_completion_over(tinyrl_t * this)
    .           {
   20 ( 0.00%)  	this->completion_over = BOOL_TRUE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_completion_error_over(tinyrl_t * this)
    .           {
    .           	this->completion_error_over = BOOL_TRUE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t tinyrl_is_completion_error_over(const tinyrl_t * this)
    .           {
    1 ( 0.00%)  	return this->completion_error_over;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_done(tinyrl_t * this)
    .           {
    2 ( 0.00%)  	this->done = BOOL_TRUE;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_enable_echo(tinyrl_t * this)
    .           {
    .           	this->echo_enabled = BOOL_TRUE;
    .           }
    .           
-- line 1494 ----------------------------------------
-- line 1496 ----------------------------------------
    .           void tinyrl_disable_echo(tinyrl_t * this, char echo_char)
    .           {
    .           	this->echo_enabled = BOOL_FALSE;
    .           	this->echo_char = echo_char;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl__set_istream(tinyrl_t * this, FILE * istream)
   10 ( 0.00%)  {
   10 ( 0.00%)  	tinyrl_vt100__set_istream(this->term, istream);
  785 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__set_istream (1x)
    4 ( 0.00%)  	if (istream) {
    .           		int fd;
   14 ( 0.00%)  		this->isatty = isatty(fileno(istream)) ? BOOL_TRUE : BOOL_FALSE;
1,511 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
    .           		/* Save terminal settings to restore on exit */
    3 ( 0.00%)  		fd = fileno(istream);
    6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (1x)
    8 ( 0.00%)  		tcgetattr(fd, &this->default_termios);
1,590 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           	} else
    1 ( 0.00%)  		this->isatty = BOOL_FALSE;
    7 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl__get_isatty(const tinyrl_t * this)
    .           {
    1 ( 0.00%)  	return this->isatty;
    1 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl__get_istream(const tinyrl_t * this)
    .           {
   10 ( 0.00%)  	return tinyrl_vt100__get_istream(this->term);
  815 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100__get_istream (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl__get_ostream(const tinyrl_t * this)
    .           {
    .           	return tinyrl_vt100__get_ostream(this->term);
    .           }
    .           
-- line 1533 ----------------------------------------
-- line 1534 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           const char *tinyrl__get_prompt(const tinyrl_t * this)
    .           {
    .           	return this->prompt;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_prompt(tinyrl_t *this, const char *prompt)
    5 ( 0.00%)  {
    3 ( 0.00%)  	if (this->prompt) {
    .           		lub_string_free(this->prompt);
    .           		this->prompt_size = 0;
    .           		this->prompt_len = 0;
    .           	}
    5 ( 0.00%)  	this->prompt = lub_string_dup(prompt);
  157 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    2 ( 0.00%)  	if (this->prompt) {
    8 ( 0.00%)  		this->prompt_size = strlen(this->prompt);
1,462 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    6 ( 0.00%)  		this->prompt_len = utf8_nsyms(this, this->prompt,
   30 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/tinyrl.c:utf8_nsyms.isra.2 (1x)
    .           			this->prompt_size);
    .           	}
    4 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl__get_utf8(const tinyrl_t * this)
    .           {
    .           	return this->utf8;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_utf8(tinyrl_t * this, bool_t utf8)
    .           {
    2 ( 0.00%)  	this->utf8 = utf8;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_timeout(tinyrl_t *this, int timeout)
    .           {
    7 ( 0.00%)  	tinyrl_vt100__set_timeout(this->term, timeout);
  777 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_timeout_fn(tinyrl_t *this,
    .           	tinyrl_timeout_fn_t *fn)
    .           {
    2 ( 0.00%)  	this->timeout_fn = fn;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_keypress_fn(tinyrl_t *this,
    .           	tinyrl_keypress_fn_t *fn)
    .           {
    2 ( 0.00%)  	this->keypress_fn = fn;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl__set_hotkey_fn(tinyrl_t *this,
    .           	tinyrl_key_func_t *fn)
    .           {
    2 ( 0.00%)  	this->hotkey_fn = fn;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl_is_quoting(const tinyrl_t * this)
   11 ( 0.00%)  {
   11 ( 0.00%)  	bool_t result = BOOL_FALSE;
    .           	/* count the quotes upto the current insertion point */
   11 ( 0.00%)  	unsigned int i = 0;
  322 ( 0.01%)  	while (i < this->point) {
   27 ( 0.00%)  		if (result && (this->line[i] == '\\')) {
    .           			i++;
    .           			if (i >= this->point)
    .           				break;
    .           			i++;
    .           			continue;
    .           		}
  291 ( 0.00%)  		if (this->line[i++] == '"') {
    .           			result = result ? BOOL_FALSE : BOOL_TRUE;
    .           		}
    .           	}
    .           	return result;
    2 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           bool_t tinyrl_is_empty(const tinyrl_t *this)
    .           {
    4 ( 0.00%)  	return (this->point == 0) ? BOOL_TRUE : BOOL_FALSE;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void tinyrl_limit_line_length(tinyrl_t * this, unsigned int length)
    .           {
    .           	this->max_line_length = length;
    .           }
    .           
    .           /*--------------------------------------------------------- */
-- line 1628 ----------------------------------------
-- line 1641 ----------------------------------------
    .           int tinyrl__save_history(const tinyrl_t *this, const char *fname)
    .           {
    .           	return tinyrl_history_save(this->history, fname);
    .           }
    .           
    .           /*----------------------------------------------------------*/
    .           int tinyrl__restore_history(tinyrl_t *this, const char *fname)
    .           {
    7 ( 0.00%)  	return tinyrl_history_restore(this->history, fname);
32,091 ( 0.55%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*----------------------------------------------------------*/
    .           void tinyrl__stifle_history(tinyrl_t *this, unsigned int stifle)
    .           {
    7 ( 0.00%)  	tinyrl_history_stifle(this->history, stifle);
  770 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c
--------------------------------------------------------------------------------
Ir           

-- line 6 ----------------------------------------
  .           #include "private.h"
  .           #include "lub/string.h"
  .           #include "lub/argv.h"
  .           
  .           /*-------------------------------------------------------- */
  .           void clish_shell_iterator_init(clish_shell_iterator_t * iter,
  .           	clish_nspace_visibility_e field)
  .           {
 10 ( 0.00%)  	iter->last_cmd = NULL;
 20 ( 0.00%)  	iter->field = field;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           const clish_command_t *clish_shell_resolve_command(const clish_shell_t * this,
  .           	const char *line)
 65 ( 0.00%)  {
  .           	clish_command_t *cmd, *result;
  .           
  .           	/* Search the current view */
108 ( 0.00%)  	result = clish_view_resolve_command(clish_shell__get_view(this), line, BOOL_TRUE);
26,380 ( 0.45%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_command (12x)
1,775 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
117 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (13x)
  .           	/* Search the global view */
 65 ( 0.00%)  	cmd = clish_view_resolve_command(this->global, line, BOOL_TRUE);
60,491 ( 1.03%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_resolve_command (13x)
  .           
 56 ( 0.00%)  	result = clish_command_choose_longest(result, cmd);
725 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
354 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_choose_longest (12x)
  .           
  .           	return result;
 39 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const clish_command_t *clish_shell_resolve_prefix(const clish_shell_t * this,
  .           	const char *line)
  .           {
  .           	clish_command_t *cmd, *result;
  .           
  .           	/* Search the current view */
-- line 40 ----------------------------------------
-- line 45 ----------------------------------------
  .           	result = clish_command_choose_longest(result, cmd);
  .           
  .           	return result;
  .           }
  .           
  .           /*-------------------------------------------------------- */
  .           const clish_command_t *clish_shell_find_next_completion(const clish_shell_t *
  .           	this, const char *line, clish_shell_iterator_t * iter)
320 ( 0.01%)  {
  .           	const clish_command_t *result, *cmd;
  .           
  .           	/* ask the local view for next command */
564 ( 0.01%)  	result = clish_view_find_next_completion(clish_shell__get_view(this),
97,276 ( 1.66%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_next_completion (39x)
5,840 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
360 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_view (40x)
  .           		iter->last_cmd, line, iter->field, BOOL_TRUE);
  .           	/* ask the global view for next command */
320 ( 0.01%)  	cmd = clish_view_find_next_completion(this->global,
217,417 ( 3.71%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_find_next_completion (40x)
  .           		iter->last_cmd, line, iter->field, BOOL_TRUE);
  .           
164 ( 0.00%)  	if (clish_command_diff(result, cmd) > 0)
718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,439 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_diff (39x)
  .           		result = cmd;
  .           
 80 ( 0.00%)  	if (!result)
 10 ( 0.00%)  		iter->last_cmd = NULL;
  .           	else
120 ( 0.00%)  		iter->last_cmd = clish_command__get_name(result);
120 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (30x)
  .           
  .           	return result;
280 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_shell_param_generator(clish_shell_t *this, lub_argv_t *matches,
  .           	const clish_command_t *cmd, const char *line, unsigned offset)
 56 ( 0.00%)  {
 16 ( 0.00%)  	const char *name = clish_command__get_name(cmd);
 16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (4x)
 20 ( 0.00%)  	char *text = lub_string_dup(&line[offset]);
623 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (4x)
  .           	clish_ptype_t *ptype;
 16 ( 0.00%)  	unsigned idx = lub_string_wordcount(name);
1,756 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (4x)
  .           	/* get the index of the current parameter */
 12 ( 0.00%)  	unsigned index = lub_string_wordcount(line) - idx;
2,242 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (4x)
  .           	clish_context_t context;
  .           
 17 ( 0.00%)  	if ((0 != index) || (offset && line[offset - 1] == ' ')) {
 20 ( 0.00%)  		lub_argv_t *argv = lub_argv_new(line, 0);
7,873 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (4x)
 16 ( 0.00%)  		clish_pargv_t *pargv = clish_pargv_new();
718 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
339 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_new (3x)
 13 ( 0.00%)  		clish_pargv_t *completion = clish_pargv_new();
452 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_new (4x)
  4 ( 0.00%)  		unsigned completion_index = 0;
  .           		const clish_param_t *param = NULL;
  .           
  .           		/* if there is some text for the parameter then adjust the index */
  .           		if ((0 != index) && (text[0] != '\0'))
  6 ( 0.00%)  			index--;
  .           
  .           		/* Parse command line to get completion pargv's */
  .           		/* Prepare context */
 28 ( 0.00%)  		clish_context_init(&context, this);
 32 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (4x)
 20 ( 0.00%)  		clish_context__set_cmd(&context, cmd);
 16 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__set_cmd (4x)
 24 ( 0.00%)  		clish_context__set_pargv(&context, pargv);
689 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__set_pargv (3x)
  .           
 60 ( 0.00%)  		clish_shell_parse_pargv(pargv, cmd, &context,
5,919 ( 0.10%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
13,917 ( 0.24%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:clish_shell_parse_pargv (3x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (4x)
  .           			clish_command__get_paramv(cmd),
  .           			argv, &idx, completion, index + idx);
 12 ( 0.00%)  		lub_argv_delete(argv);
1,854 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (4x)
  .           
 68 ( 0.00%)  		while ((param = clish_pargv__get_param(completion,
670 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 51 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv__get_param (7x)
  .           			completion_index++))) {
  .           			char *result;
  .           			/* The param is args so it has no completion */
 20 ( 0.00%)  			if (param == clish_command__get_args(cmd))
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_args (4x)
  .           				continue;
  .           			/* The switch has no completion string */
 20 ( 0.00%)  			if (CLISH_PARAM_SWITCH == clish_param__get_mode(param))
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (4x)
  .           				continue;
  .           			/* The subcommand is identified by it's value */
  8 ( 0.00%)  			if (CLISH_PARAM_SUBCOMMAND ==
 12 ( 0.00%)  				clish_param__get_mode(param)) {
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (4x)
  .           				result = clish_param__get_value(param);
  .           				if (result)
  .           					lub_argv_add(matches, result);
  .           			}
  .           			/* The 'completion' field of PARAM */
 24 ( 0.00%)  			if (clish_param__get_completion(param)) {
719 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_completion (3x)
  .           				char *str, *q;
  .           				char *saveptr = NULL;
  .           				str = clish_shell_expand(
  .           					clish_param__get_completion(param), SHELL_VAR_ACTION, &context);
  .           				if (str) {
  8 ( 0.00%)  					for (q = strtok_r(str, " \n", &saveptr);
  .           						q; q = strtok_r(NULL, " \n", &saveptr)) {
  .           						if (q == strstr(q, text))
  .           							lub_argv_add(matches, q);
  .           					}
  .           					lub_string_free(str);
  .           				}
  .           			}
  .           			/* The common PARAM. Let ptype do the work */
 24 ( 0.00%)  			if ((ptype = clish_param__get_ptype(param)))
663 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_ptype (3x)
 24 ( 0.00%)  				clish_ptype_word_generator(ptype, matches, text);
6,434 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
3,170 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_word_generator (3x)
  .           		}
 12 ( 0.00%)  		clish_pargv_delete(completion);
1,305 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_delete (4x)
 16 ( 0.00%)  		clish_pargv_delete(pargv);
1,275 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_delete (4x)
  .           	}
  .           
 12 ( 0.00%)  	lub_string_free(text);
360 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (4x)
 32 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c
--------------------------------------------------------------------------------
Ir           

-- line 19 ----------------------------------------
  .           	unsigned size;		/* Number of slots allocated in this array */
  .           	unsigned current_index;
  .           	unsigned stifle;
  .           };
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_init(tinyrl_history_t * this, unsigned stifle)
  .           {
  1 ( 0.00%)  	this->entries = NULL;
  1 ( 0.00%)  	this->stifle = stifle;
  1 ( 0.00%)  	this->current_index = 1;
  1 ( 0.00%)  	this->length = 0;
  2 ( 0.00%)  	this->size = 0;
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_fini(tinyrl_history_t * this)
  .           {
  .           	tinyrl_history_entry_t *entry;
  .           	tinyrl_history_iterator_t iter;
  .           
-- line 39 ----------------------------------------
-- line 44 ----------------------------------------
  .           	}
  .           	/* release the list */
  .           	free(this->entries);
  .           	this->entries = NULL;
  .           }
  .           
  .           /*------------------------------------- */
  .           tinyrl_history_t *tinyrl_history_new(unsigned stifle)
  4 ( 0.00%)  {
  4 ( 0.00%)  	tinyrl_history_t *this = malloc(sizeof(tinyrl_history_t));
197 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  2 ( 0.00%)  	if (NULL != this) {
  8 ( 0.00%)  		tinyrl_history_init(this, stifle);
787 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	}
  .           	return this;
  5 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_delete(tinyrl_history_t * this)
  .           {
  .           	tinyrl_history_fini(this);
  .           	free(this);
  .           }
  .           
  .           /*
  .           HISTORY LIST MANAGEMENT 
  .           */
  .           /*------------------------------------- */
  .           /* insert a new entry at the current offset */
  .           static void insert_entry(tinyrl_history_t * this, const char *line)
 30 ( 0.00%)  {
 24 ( 0.00%)  	tinyrl_history_entry_t *new_entry =
4,252 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry_new (9x)
1,889 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 30 ( 0.00%)  	    tinyrl_history_entry_new(line, this->current_index++);
 30 ( 0.00%)  	assert(this->length);
 30 ( 0.00%)  	assert(this->entries);
 20 ( 0.00%)  	if (new_entry) {
 20 ( 0.00%)  		this->entries[this->length - 1] = new_entry;
  .           	}
 20 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /*
  .            * This frees the specified entries from the 
  .            * entries vector. NB it doesn't perform any shuffling.
  .            * This function is inclusive of start and end
  .            */
  .           static void
  3 ( 0.00%)  free_entries(const tinyrl_history_t * this, unsigned start, unsigned end)
  .           {
  .           	unsigned i;
  2 ( 0.00%)  	assert(start <= end);
  6 ( 0.00%)  	assert(end < this->length);
  .           
  3 ( 0.00%)  	for (i = start; i <= end; i++) {
  2 ( 0.00%)  		tinyrl_history_entry_t *entry = this->entries[i];
  7 ( 0.00%)  		tinyrl_history_entry_delete(entry);
978 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           		entry = NULL;
  .           	}
  4 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /*
  .            * This removes the specified entries from the 
  .            * entries vector. Shuffling up the array as necessary 
  .            * This function is inclusive of start and end
  .            */
  .           static void
  4 ( 0.00%)  remove_entries(tinyrl_history_t * this, unsigned start, unsigned end)
  .           {
  .           	unsigned delta = (end - start) + 1;	/* number of entries being deleted */
  .           	/* number of entries to shuffle */
  3 ( 0.00%)  	unsigned num_entries = (this->length - end) - 1;
  2 ( 0.00%)  	assert(start <= end);
  3 ( 0.00%)  	assert(end < this->length);
  .           
  3 ( 0.00%)  	if (num_entries) {
  .           		/* move the remaining entries down to close the array */
  8 ( 0.00%)  		memmove(&this->entries[start],
 10 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S:memcpy@GLIBC_2.2.5 (1x)
  2 ( 0.00%)  			&this->entries[end + 1],
  .           			sizeof(tinyrl_history_entry_t *) * num_entries);
  .           	}
  .           	/* now fix up the length variables */
  2 ( 0.00%)  	this->length -= delta;
  4 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /* 
  .           Search the current history buffer for the specified 
  .           line and if found remove it.
  .           */
  .           static bool_t remove_duplicate(tinyrl_history_t * this, const char *line)
 63 ( 0.00%)  {
  9 ( 0.00%)  	bool_t result = BOOL_FALSE;
  .           	unsigned i;
  .           
156 ( 0.00%)  	for (i = 0; i < this->length; i++) {
 86 ( 0.00%)  		tinyrl_history_entry_t *entry = this->entries[i];
396 ( 0.01%)  		if (0 == strcmp(line, tinyrl_history_entry__get_line(entry))) {
2,492 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
830 ( 0.01%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (42x)
 84 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history_entry.c:tinyrl_history_entry__get_line (42x)
  5 ( 0.00%)  			free_entries(this, i, i);
1,005 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:free_entries.isra.0 (1x)
  5 ( 0.00%)  			remove_entries(this, i, i);
 41 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:remove_entries.isra.2 (1x)
  1 ( 0.00%)  			result = BOOL_TRUE;
  .           			break;
  .           		}
  .           	}
  .           	return result;
 37 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           /* 
  .           add an entry to the end of the current array 
  .           if there is no space returns -1 else 0
  .           */
  .           static void append_entry(tinyrl_history_t * this, const char *line)
  .           {
 30 ( 0.00%)  	if (this->length < this->size) {
 20 ( 0.00%)  		this->length++;
  .           
 30 ( 0.00%)  		insert_entry(this, line);
6,345 ( 0.11%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:insert_entry (10x)
  .           	}
  .           }
  .           
  .           /*------------------------------------- */
  .           /*
  .            add a new history entry replacing the oldest one 
  .            */
  .           static void add_n_replace(tinyrl_history_t * this, const char *line)
-- line 168 ----------------------------------------
-- line 176 ----------------------------------------
  .           	/* add the new entry */
  .           	append_entry(this, line);
  .           }
  .           
  .           /*------------------------------------- */
  .           /* add a new history entry growing the array if necessary */
  .           static void add_n_grow(tinyrl_history_t * this, const char *line)
  .           {
 20 ( 0.00%)  	if (this->size == this->length) {
  .           		/* increment the history memory by 10 entries each time we grow */
  2 ( 0.00%)  		unsigned new_size = this->size + 10;
  .           		size_t nbytes;
  .           		tinyrl_history_entry_t **new_entries;
  .           
  1 ( 0.00%)  		nbytes = sizeof(tinyrl_history_entry_t *) * new_size;
  7 ( 0.00%)  		new_entries = realloc(this->entries, nbytes);
1,694 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  		if (NULL != new_entries) {
  1 ( 0.00%)  			this->size = new_size;
  2 ( 0.00%)  			this->entries = new_entries;
  .           		}
  .           	}
 30 ( 0.00%)  	(void)remove_duplicate(this, line);
5,210 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:remove_duplicate (10x)
  .           	append_entry(this, line);
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_add(tinyrl_history_t * this, const char *line)
 50 ( 0.00%)  {
 48 ( 0.00%)  	if (this->length && (this->length == this->stifle)) {
  .           		add_n_replace(this, line);
  .           	} else {
  .           		add_n_grow(this, line);
  .           	}
 30 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           tinyrl_history_entry_t *tinyrl_history_remove(tinyrl_history_t * this,
  .           					      unsigned offset)
  .           {
  .           	tinyrl_history_entry_t *result = NULL;
  .           
  .           	if (offset < this->length) {
-- line 217 ----------------------------------------
-- line 228 ----------------------------------------
  .           	/* free all the entries */
  .           	free_entries(this, 0, this->length - 1);
  .           	/* and shuffle the array */
  .           	remove_entries(this, 0, this->length - 1);
  .           }
  .           
  .           /*------------------------------------- */
  .           void tinyrl_history_stifle(tinyrl_history_t * this, unsigned stifle)
  7 ( 0.00%)  {
  .           	/* 
  .           	 * if we are stifling (i.e. non zero value) then 
  .           	 * delete the obsolete entries
  .           	 */
  2 ( 0.00%)  	if (stifle) {
  3 ( 0.00%)  		if (stifle < this->length) {
  .           			unsigned num_deletes = this->length - stifle;
  .           			/* free the entries */
  .           			free_entries(this, 0, num_deletes - 1);
  .           			/* shuffle the array shut */
  .           			remove_entries(this, 0, num_deletes - 1);
  .           		}
  1 ( 0.00%)  		this->stifle = stifle;
  .           	}
  6 ( 0.00%)  }
  .           
  .           /*------------------------------------- */
  .           unsigned tinyrl_history_unstifle(tinyrl_history_t * this)
  .           {
  .           	unsigned result = this->stifle;
  .           
  .           	this->stifle = 0;
  .           
-- line 259 ----------------------------------------
-- line 431 ----------------------------------------
  .           	fclose(f);
  .           
  .           	return 0;
  .           }
  .           
  .           /*-------------------------------------*/
  .           /* Restore command history from specified file */
  .           int tinyrl_history_restore(tinyrl_history_t *this, const char *fname)
  5 ( 0.00%)  {
  .           	FILE *f;
  .           	char *p;
  .           	int part_len = 300;
  .           	char *buf;
  1 ( 0.00%)  	int buf_len = part_len;
  1 ( 0.00%)  	int res = 0;
  .           
  4 ( 0.00%)  	if (!fname) {
  .           		errno = EINVAL;
  .           		return -1;
  .           	}
 10 ( 0.00%)  	if (!(f = fopen(fname, "r")))
2,134 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  1 ( 0.00%)  		return 0; /* Can't find history file */
  .           
  5 ( 0.00%)  	buf = malloc(buf_len);
429 ( 0.01%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
  .           	p = buf;
 95 ( 0.00%)  	while (fgets(p, buf_len - (p - buf), f)) {
8,891 ( 0.15%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,563 ( 0.03%)  => /opt/build/glibc/glibc-2.24/libio/iofgets.c:fgets (9x)
  .           		char *ptmp = NULL;
 40 ( 0.00%)  		char *el = strchr(buf, '\n');
1,527 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
184 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S:__GI_strchr (8x)
 18 ( 0.00%)  		if (el) { /* The whole line was readed */
  9 ( 0.00%)  			*el = '\0';
 40 ( 0.00%)  			tinyrl_history_add(this, buf);
4,386 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
8,228 ( 0.14%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/history/history.c:tinyrl_history_add (8x)
  .           			p = buf;
  9 ( 0.00%)  			continue;
  .           		}
  .           		buf_len += part_len;
  .           		ptmp = realloc(buf, buf_len);
  .           		if (!ptmp) {
  .           			res = -1;
  .           			goto end;
  .           		}
  .           		buf = ptmp;
  .           		p = buf + buf_len - part_len - 1;
  .           	}
  .           end:
  7 ( 0.00%)  	free(buf);
1,633 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  7 ( 0.00%)  	fclose(f);
2,106 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
  .           	return res;
  7 ( 0.00%)  }
  .           
  .           
  .           /*-------------------------------------*/

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_findnext.c
--------------------------------------------------------------------------------
Ir             

-- line 31 ----------------------------------------
    .            *    Initial version
    .            *---------------------------------------------------------------
    .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
    .            **************************************************************** */
    .           #include "private.h"
    .           
    .           /*--------------------------------------------------------- */
    .           void *lub_bintree_findnext(lub_bintree_t * this, const void *clientkey)
1,215 ( 0.02%)  {
    .           	lub_bintree_node_t *t = this->root;
    .           	int comp;
    .           
    .           	/*
    .           	 * have a look for a direct match
    .           	 */
1,215 ( 0.02%)  	t = this->root = lub_bintree_splay(this, t, clientkey);
127,493 ( 2.17%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (243x)
    .           
  486 ( 0.01%)  	if (NULL != t) {
    .           		/* now look at what we have got */
1,215 ( 0.02%)  		comp = lub_bintree_compare(this, t, clientkey);
52,652 ( 0.90%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (238x)
  304 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (5x)
  486 ( 0.01%)  		if (comp <= 0) {
    .           			/*
    .           			 * time to fiddle with the right hand side of the tree
    .           			 * we need the closest node from the right hand side
    .           			 */
  207 ( 0.00%)  			t = t->right =
1,035 ( 0.02%)  			    lub_bintree_splay(this, t->right, clientkey);
30,364 ( 0.52%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (207x)
    .           		}
    .           	}
  748 ( 0.01%)  	if (NULL == t) {
   40 ( 0.00%)  		return NULL;
    .           	} else {
  406 ( 0.01%)  		return lub_bintree_getclientnode(this, t);
    .           	}
  972 ( 0.02%)  }
    .           
    .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/list/list.c
--------------------------------------------------------------------------------
Ir           

-- line 3 ----------------------------------------
  .           #include <string.h>
  .           
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           static inline void lub_list_init(lub_list_t * this,
  .           	lub_list_compare_fn compareFn)
  .           {
 10 ( 0.00%)  	this->head = NULL;
 10 ( 0.00%)  	this->tail = NULL;
 10 ( 0.00%)  	this->compareFn = compareFn;
 10 ( 0.00%)  	this->len = 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_t *lub_list_new(lub_list_compare_fn compareFn)
 20 ( 0.00%)  {
  .           	lub_list_t *this;
  .           
 34 ( 0.00%)  	this = malloc(sizeof(*this));
1,645 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,359 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (9x)
 20 ( 0.00%)  	assert(this);
  .           	lub_list_init(this, compareFn);
  .           
  .           	return this;
 20 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void lub_list_free(lub_list_t *this)
  .           {
 48 ( 0.00%)  	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list__get_head(lub_list_t *this)
  .           {
  .           	return this->head;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list__get_tail(lub_list_t *this)
  .           {
110 ( 0.00%)  	return this->tail;
110 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static inline void lub_list_node_init(lub_list_node_t *this,
  .           	void *data)
  .           {
 40 ( 0.00%)  	this->prev = this->next = NULL;
 20 ( 0.00%)  	this->data = data;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_node_t *lub_list_node_new(void *data)
 40 ( 0.00%)  {
  .           	lub_list_node_t *this;
  .           
 60 ( 0.00%)  	this = malloc(sizeof(*this));
4,042 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (20x)
 40 ( 0.00%)  	assert(this);
  .           	lub_list_node_init(this, data);
  .           
  .           	return this;
 40 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list_iterator_init(lub_list_t *this)
  .           {
  .           	return this->head;
 66 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           inline lub_list_node_t *lub_list_node__get_prev(lub_list_node_t *this)
  .           {
  .           	return this->prev;
  .           }
  .           
  .           /*--------------------------------------------------------- */
-- line 79 ----------------------------------------
-- line 98 ----------------------------------------
  .           inline void lub_list_node_free(lub_list_node_t *this)
  .           {
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           inline void *lub_list_node__get_data(lub_list_node_t *this)
  .           {
 48 ( 0.00%)  	return this->data;
 48 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           lub_list_node_t *lub_list_add(lub_list_t *this, void *data)
 80 ( 0.00%)  {
 84 ( 0.00%)  	lub_list_node_t *node = lub_list_node_new(data);
4,156 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/lub/list/list.c:lub_list_node_new (19x)
882 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           	lub_list_node_t *iter;
  .           
 20 ( 0.00%)  	this->len++;
  .           
  .           	/* Empty list */
 60 ( 0.00%)  	if (!this->head) {
  3 ( 0.00%)  		this->head = node;
  3 ( 0.00%)  		this->tail = node;
  .           		return node;
  .           	}
  .           
  .           	/* Not sorted list. Add to the tail. */
 51 ( 0.00%)  	if (!this->compareFn) {
  .           		node->prev = this->tail;
  .           		node->next = NULL;
  .           		this->tail->next = node;
  .           		this->tail = node;
  .           		return node;
  .           	}
  .           
  .           	/* Sorted list */
 17 ( 0.00%)  	iter = this->tail;
122 ( 0.00%)  	while (iter) {
225 ( 0.00%)  		if (this->compareFn(node->data, iter->data) >= 0) {
1,374 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/plugin/plugin.c:clish_sym_compare (45x)
 30 ( 0.00%)  			node->next = iter->next;
 15 ( 0.00%)  			node->prev = iter;
 15 ( 0.00%)  			iter->next = node;
 45 ( 0.00%)  			if (node->next)
  8 ( 0.00%)  				node->next->prev = node;
  .           			break;
  .           		}
 30 ( 0.00%)  		iter = iter->prev;
  .           	}
  .           	/* Insert node into the list head */
  .           	if (!iter) {
  2 ( 0.00%)  		node->next = this->head;
  2 ( 0.00%)  		node->prev = NULL;
  2 ( 0.00%)  		this->head->prev = node;
  2 ( 0.00%)  		this->head = node;
  .           	}
  .           	if (!node->next)
  7 ( 0.00%)  		this->tail = node;
  .           
  .           	return node;
102 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void lub_list_del(lub_list_t *this, lub_list_node_t *node)
  .           {
  .           	if (node->prev)
  .           		node->prev->next = node->next;
  .           	else
  .           		this->head = node->next;
-- line 165 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/xmlapi.h
--------------------------------------------------------------------------------
Ir           

-- line 124 ----------------------------------------
  .           /*
  .            * get the node name
  .            * dynamically allocate the buffer (it must be freed once you don't need it
  .            * anymore) that will contain all the content of the node.
  .            * return NULL on error.
  .            */
  .           static inline char* clish_xmlnode_get_all_name(clish_xmlnode_t *node)
  .           {
 40 ( 0.00%)  	char *name = NULL; 
120 ( 0.00%)  	unsigned int nlen = 2048; 
  .           	int result;
  .           
  .           	do { 
164 ( 0.00%)  		name = (char*)realloc(name, nlen);
9,326 ( 0.16%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (20x)
2,745 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
200 ( 0.00%)  		result = clish_xmlnode_get_name(node, name, &nlen);
12,075 ( 0.21%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_name (21x)
 80 ( 0.00%)  	} while (result == -E2BIG);
  .           
 80 ( 0.00%)  	if (result < 0) {
  .           		free(name);
  .           		return NULL;
  .           	}
  .           
  .           	return name;
  .           }
  .           
  .           /*
-- line 149 ----------------------------------------
-- line 163 ----------------------------------------
  .           /*
  .            * get the node content
  .            * dynamically allocate the buffer (it must be freed once you don't need it
  .            * anymore) that will contain all the content of the node.
  .            * return NULL on error.
  .            */
  .           static inline char* clish_xmlnode_get_all_content(clish_xmlnode_t *node)
  .           {
 46 ( 0.00%)  	char *content = NULL; 
 58 ( 0.00%)  	unsigned int clen = 2048; 
  .           	int result;
  .           
  .           	do { 
100 ( 0.00%)  		content = (char*)realloc(content, clen);
6,237 ( 0.11%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (21x)
129 ( 0.00%)  		result = clish_xmlnode_get_content(node, content, &clen);
2,260 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
4,087 ( 0.07%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_xmlnode_get_content (20x)
 50 ( 0.00%)  	} while (result == -E2BIG);
  .           
 50 ( 0.00%)  	if (result < 0) {
  .           		free(content);
  .           		return NULL;
  .           	}
  .           
  .           	return content;
  .           }
  .           
  .           /*
-- line 188 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c
--------------------------------------------------------------------------------
Ir           

-- line 14 ----------------------------------------
  .           #include "private.h"
  .           
  .           /*----------------------------------------------------------- */
  .           /*
  .            * search the current viewid string for a variable
  .            */
  .           void clish_shell__expand_viewid(const char *viewid, lub_bintree_t *tree,
  .           	clish_context_t *context)
  6 ( 0.00%)  {
  .           	char *expanded;
  .           	char *q;
  .           	char *saveptr = NULL;
  .           
  3 ( 0.00%)  	expanded = clish_shell_expand(viewid, SHELL_VAR_NONE, context);
 33 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand (1x)
  2 ( 0.00%)  	if (!expanded)
  .           		return;
  .           
  .           	for (q = strtok_r(expanded, ";", &saveptr);
  .           		q; q = strtok_r(NULL, ";", &saveptr)) {
  .           		char *value;
  .           		clish_var_t *var;
  .           
  .           		value = strchr(q, '=');
-- line 36 ----------------------------------------
-- line 39 ----------------------------------------
  .           		*value = '\0';
  .           		value++;
  .           		/* Create var instance */
  .           		var = clish_var_new(q);
  .           		lub_bintree_insert(tree, var);
  .           		clish_var__set_value(var, value);
  .           	}
  .           	lub_string_free(expanded);
  6 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */
  .           /*
  .            * expand context dependent fixed-name variables
  .            */
  .           static char *find_context_var(const char *name, clish_context_t *this)
  .           {
  6 ( 0.00%)  	char *result = NULL;
  3 ( 0.00%)  	clish_shell_t *shell = this->shell;
  .           
 18 ( 0.00%)  	if (!lub_string_nocasecmp(name, "_width")) {
233 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (3x)
  .           		char tmp[5];
  .           		snprintf(tmp, sizeof(tmp), "%u",
  .           			tinyrl__get_width(shell->tinyrl));
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		result = strdup(tmp);
  .           
 18 ( 0.00%)  	} else if (!lub_string_nocasecmp(name, "_height")) {
233 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (3x)
  .           		char tmp[5];
  .           		snprintf(tmp, sizeof(tmp), "%u",
  .           			tinyrl__get_height(shell->tinyrl));
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		result = strdup(tmp);
  .           
 18 ( 0.00%)  	} else if (!lub_string_nocasecmp(name, "_watchdog_timeout")) {
233 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (3x)
  .           		char tmp[5];
  .           		snprintf(tmp, sizeof(tmp), "%u", shell->wdog_timeout);
  .           		tmp[sizeof(tmp) - 1] = '\0';
  .           		result = strdup(tmp);
  .           
  6 ( 0.00%)  	} else if (!this->cmd) { /* The vars dependent on command */
  .           		return NULL;
  .           
  .           	} else if (!lub_string_nocasecmp(name, "_full_cmd")) {
  .           		result = lub_string_dup(clish_command__get_name(this->cmd));
  .           
  .           	} else if (!lub_string_nocasecmp(name, "_cmd")) {
  .           		result = lub_string_dup(clish_command__get_name(
  .           			clish_command__get_cmd(this->cmd)));
-- line 86 ----------------------------------------
-- line 143 ----------------------------------------
  .           		result = clish_shell__get_pwd_full(shell, depth);
  .           	}
  .           
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *find_var(const char *name, lub_bintree_t *tree, clish_context_t *context)
 48 ( 0.00%)  {
 18 ( 0.00%)  	clish_var_t *var = lub_bintree_find(tree, name);
204 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c:lub_bintree_find (6x)
  .           	char *value;
  .           	bool_t dynamic;
  .           	char *res = NULL;
  .           
 12 ( 0.00%)  	if (!var)
 12 ( 0.00%)  		return NULL;
  .           
  .           	/* Try to get saved value for static var */
  .           	dynamic = clish_var__get_dynamic(var);
  .           	if (!dynamic) {
  .           		char *saved = clish_var__get_saved(var);
  .           		if (saved)
  .           			return lub_string_dup(saved);
  .           	}
-- line 166 ----------------------------------------
-- line 183 ----------------------------------------
  .           		res = out;
  .           	}
  .           
  .           	/* Save value for static var */
  .           	if (!dynamic && res)
  .           		clish_var__set_saved(var, res);
  .           
  .           	return res;
 36 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *find_global_var(const char *name, clish_context_t *context)
  .           {
  9 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (3x)
 12 ( 0.00%)  	return find_var(name, &shell->var_tree, context);
165 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:find_var (3x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *find_viewid_var(const char *name, clish_context_t *context)
  .           {
 12 ( 0.00%)  	clish_shell_t *shell = clish_context__get_shell(context);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (3x)
 13 ( 0.00%)  	int depth = clish_shell__get_depth(shell);
665 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_view.c:clish_shell__get_depth (2x)
  6 ( 0.00%)  	if (depth < 0)
  .           		return NULL;
 24 ( 0.00%)  	return find_var(name, &shell->pwdv[depth]->viewid, context);
165 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:find_var (3x)
  .           }
  .           
  .           static char * chardiff(const char *syms, const char *minus)
  .           {
  .           	char *dst = malloc(strlen(syms) + 1);
  .           	char *p = dst;
  .           	const char *src;
  .           
-- line 215 ----------------------------------------
-- line 225 ----------------------------------------
  .           /*
  .            * return the next segment of text from the provided string
  .            * segments are delimited by variables within the string.
  .            */
  .           static char *expand_nextsegment(const char **string, const char *escape_chars,
  .           	clish_context_t *this)
  .           {
  .           	const char *p = *string;
 12 ( 0.00%)  	char *result = NULL;
  .           	size_t len = 0;
  .           
 24 ( 0.00%)  	if (!p)
  .           		return NULL;
  .           
 42 ( 0.00%)  	if (*p && (p[0] == '$') && (p[1] == '{')) {
  .           		/* start of a variable */
  .           		const char *tmp;
  3 ( 0.00%)  		p += 2;
  .           		tmp = p;
  .           
  .           		/*
  .           		 * find the end of the variable 
  .           		 */
255 ( 0.00%)  		while (*p && p++[0] != '}')
 39 ( 0.00%)  			len++;
  .           
  .           		/* ignore non-terminated variables */
  6 ( 0.00%)  		if (p[-1] == '}') {
  .           			bool_t valid = BOOL_FALSE;
  .           			char *text, *q;
  .           			char *saveptr = NULL;
  .           
  .           			/* get the variable text */
 12 ( 0.00%)  			text = lub_string_dupn(tmp, len);
464 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (3x)
  .           			/*
  .           			 * tokenise this INTO ':' separated words
  .           			 * and either expand or duplicate into the result string.
  .           			 * Only return a result if at least 
  .           			 * of the words is an expandable variable
  .           			 */
  .           			for (q = strtok_r(text, ":", &saveptr);
  .           				q; q = strtok_r(NULL, ":", &saveptr)) {
  .           				char *var;
  .           				int mod_quote = 0; /* quote modifier */
  .           				int mod_esc = 0; /* internal escape modifier */
  .           				int mod_esc_chars = 1; /* escaping */
  4 ( 0.00%)  				int mod_esc_dec = 0; /* remove internal chars from escaping */
  .           				char *space;
  3 ( 0.00%)  				char *all_esc = NULL;
  .           
  .           				/* Search for modifiers */
 43 ( 0.00%)  				while (*q && !isalpha(*q)) {
1,587 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  6 ( 0.00%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (2x)
  4 ( 0.00%)  					if ('#' == *q) {
  .           						mod_quote = 1;
  .           						mod_esc = 1;
  4 ( 0.00%)  					} else if ('\\' == *q) {
  .           						mod_esc = 1;
  4 ( 0.00%)  					} else if ('!' == *q) {
  .           						mod_quote = 1;
  .           						mod_esc = 1;
  .           						mod_esc_chars = 0;
  4 ( 0.00%)  					} else if ('~' == *q) {
  .           						mod_esc = 1;
  .           						mod_esc_chars = 0;
  .           					/* Internal automatic variable like ${__line} */
  8 ( 0.00%)  					} else if (('_' == *q) && ('_' == *(q+1))) {
  .           						mod_esc_dec = 1;
  .           						q++;
  .           						break;
  .           					/* No escaping at all. Usefull for macros VAR */
  .           					} else if ('^' == *q) {
  .           						mod_quote = 0;
  .           						mod_esc = 0;
  .           						mod_esc_chars = 0;
  .           					} else
  .           						break;
  .           					q++;
  .           				}
  .           
  .           				/* Get clean variable value */
 19 ( 0.00%)  				var = clish_shell_expand_var(q, this);
4,400 ( 0.08%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,682 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand_var (2x)
  6 ( 0.00%)  				if (!var) {
 15 ( 0.00%)  					lub_string_cat(&result, q);
876 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (3x)
  .           					continue;
  .           				}
 12 ( 0.00%)  				valid = BOOL_TRUE;
  .           
  .           				/* Quoting */
  .           				if (mod_quote)
  .           					space = strchr(var, ' ');
  .           				if (mod_quote && space)
  .           					lub_string_cat(&result, "\"");
  .           
  .           				/* Escape special chars */
-- line 318 ----------------------------------------
-- line 322 ----------------------------------------
  .           						all_esc = chardiff(escape_chars,
  .           							lub_string_esc_quoted);
  .           					else
  .           						all_esc = lub_string_dup(escape_chars);
  .           				}
  .           
  .           				/* Internal escaping */
  .           				if (mod_esc)
 12 ( 0.00%)  					lub_string_cat(&all_esc,
  .           						lub_string_esc_quoted);
  .           
  .           				/* Real escaping */
  .           				if (all_esc) {
  .           					char *tstr = lub_string_encode(var,
  .           						all_esc);
  .           					lub_string_free(var);
  .           					var = tstr;
-- line 338 ----------------------------------------
-- line 344 ----------------------------------------
  .           
  .           				/* Quoting */
  .           				if (mod_quote && space)
  .           					lub_string_cat(&result, "\"");
  .           
  .           				lub_string_free(var);
  .           			}
  .           
 12 ( 0.00%)  			if (!valid) {
  .           				/* not a valid variable expansion */
  9 ( 0.00%)  				lub_string_free(result);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 15 ( 0.00%)  				result = lub_string_dup("");
468 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
  .           			}
  .           
  .           			/* finished with the variable text */
 12 ( 0.00%)  			lub_string_free(text);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
  .           		}
  .           	} else {
  .           		/* find the start of a variable */
318 ( 0.01%)  		while (*p) {
156 ( 0.00%)  			if ((p[0] == '$') && (p[1] == '{'))
  .           				break;
 76 ( 0.00%)  			len++;
 76 ( 0.00%)  			p++;
  .           		}
  8 ( 0.00%)  		if (len > 0)
 28 ( 0.00%)  			result = lub_string_dupn(*string, len);
670 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dupn (4x)
  .           	}
  .           	/* move the string pointer on for next time... */
  .           	*string = p;
  .           
  .           	return result;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           /*
  .            * This function builds a dynamic string based on that provided
  .            * subtituting each occurance of a "${FRED}" type variable sub-string
  .            * with the appropriate value.
  .            */
  .           char *clish_shell_expand(const char *str, clish_shell_var_e vtype, clish_context_t *context)
 55 ( 0.00%)  {
  5 ( 0.00%)  	char *seg, *result = NULL;
  5 ( 0.00%)  	const char *escape_chars = NULL;
 10 ( 0.00%)  	const clish_command_t *cmd = clish_context__get_cmd(context);
 10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_cmd (5x)
  .           
  .           	/* Escape special characters */
 10 ( 0.00%)  	if (SHELL_VAR_REGEX == vtype) {
  .           		if (cmd)
  .           			escape_chars = clish_command__get_regex_chars(cmd);
  .           		if (!escape_chars)
  .           			escape_chars = lub_string_esc_regex;
 10 ( 0.00%)  	} else if (SHELL_VAR_ACTION == vtype) {
  4 ( 0.00%)  		if (cmd)
 12 ( 0.00%)  			escape_chars = clish_command__get_escape_chars(cmd);
743 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_escape_chars (1x)
  4 ( 0.00%)  		if (!escape_chars)
  8 ( 0.00%)  			escape_chars = lub_string_esc_default;
  .           	}
  .           
  .           	/* read each segment and extend the result */
 22 ( 0.00%)  	while ((seg = expand_nextsegment(&str, escape_chars, context))) {
 44 ( 0.00%)  		lub_string_cat(&result, seg);
2,062 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (7x)
 21 ( 0.00%)  		lub_string_free(seg);
630 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (7x)
  .           	}
  .           
  5 ( 0.00%)  	return result;
 40 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_shell__get_params(clish_context_t *context)
  .           {
  .           	clish_pargv_t *pargv = clish_context__get_pargv(context);
  .           	char *line = NULL;
  .           	unsigned i, cnt;
  .           	const clish_param_t *param;
-- line 418 ----------------------------------------
-- line 438 ----------------------------------------
  .           	line = clish_shell_expand(request, SHELL_VAR_NONE, context);
  .           	lub_string_free(request);
  .           
  .           	return line;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static char *internal_get_line(clish_context_t *context, int cmd_type)
  7 ( 0.00%)  {
  3 ( 0.00%)  	const clish_command_t *cmd = clish_context__get_cmd(context);
  2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_cmd (1x)
  8 ( 0.00%)  	clish_pargv_t *pargv = clish_context__get_pargv(context);
679 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  1 ( 0.00%)  	char *line = NULL;
  .           	char *params = NULL;
  .           
  2 ( 0.00%)  	if (0 == cmd_type) /* __cmd */
  8 ( 0.00%)  		lub_string_cat(&line, clish_command__get_name(
667 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           			clish_command__get_cmd(cmd)));
  .           	else /* __full_cmd */
 11 ( 0.00%)  		lub_string_cat(&line, clish_command__get_name(cmd));
673 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
256 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_cat (1x)
  .           
  2 ( 0.00%)  	if (!pargv)
  .           		return line;
  .           
  .           	params = clish_shell__get_params(context);
  .           	if (params) {
  .           		lub_string_cat(&line, " ");
  .           		lub_string_cat(&line, params);
  .           	}
  .           	lub_string_free(params);
  .           
  1 ( 0.00%)  	return line;
  6 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_shell__get_line(clish_context_t *context)
  .           {
  2 ( 0.00%)  	return internal_get_line(context, 0); /* __cmd */
2,326 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:internal_get_line (1x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_shell__get_full_line(clish_context_t *context)
  .           {
  .           	return internal_get_line(context, 1); /* __full_cmd */
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_shell_expand_var(const char *name, clish_context_t *context)
  .           {
 13 ( 0.00%)  	return clish_shell_expand_var_ex(name, context, SHELL_EXPAND_ALL);
3,732 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,676 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_var.c:clish_shell_expand_var_ex (2x)
  .           }
  .           
  .           /*----------------------------------------------------------- */
  .           char *clish_shell_expand_var_ex(const char *name, clish_context_t *context, clish_shell_expand_e flags)
 21 ( 0.00%)  {
  .           	clish_shell_t *this;
  .           	const clish_command_t *cmd;
  .           	clish_pargv_t *pargv;
  .           	const char *tmp = NULL;
  .           	char *string = NULL;
  .           
  6 ( 0.00%)  	assert(name);
 12 ( 0.00%)  	if (!context)
  .           		return NULL;
 15 ( 0.00%)  	this = clish_context__get_shell(context);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_shell (3x)
 12 ( 0.00%)  	cmd = clish_context__get_cmd(context);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_cmd (3x)
  9 ( 0.00%)  	pargv = clish_context__get_pargv(context);
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__get_pargv (3x)
  .           
  .           	/* try and substitute a parameter value */
  6 ( 0.00%)  	if (pargv && (flags & SHELL_EXPAND_PARAM)) {
  .           		const clish_parg_t *parg = clish_pargv_find_arg(pargv, name);
  .           		if (parg)
  .           			tmp = clish_parg__get_value(parg);
  .           	}
  .           
  .           	/* try and substitute the param's default */
  6 ( 0.00%)  	if (!tmp && cmd && (flags & SHELL_EXPAND_PARAM))
  .           		tmp = clish_paramv_find_default(
  .           			clish_command__get_paramv(cmd), name);
  .           
  .           	/* try and substitute a viewId variable */
 21 ( 0.00%)  	if (!tmp && this && (flags & SHELL_EXPAND_VIEW))
  .           		tmp = string = find_viewid_var(name, context);
  .           
  .           	/* try and substitute context fixed variable */
 12 ( 0.00%)  	if (!tmp && (flags & SHELL_EXPAND_CONTEXT))
  .           		tmp = string = find_context_var(name, context);
  .           
  .           	/* try and substitute a global var value */
 12 ( 0.00%)  	if (!tmp && this && (flags & SHELL_EXPAND_VAR))
  .           		tmp = string = find_global_var(name, context);
  .           
  .           	/* get the contents of an environment variable */
 18 ( 0.00%)  	if (!tmp && (flags & SHELL_EXPAND_ENV))
 16 ( 0.00%)  		tmp = getenv(name);
1,860 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
760 ( 0.01%)  => /opt/build/glibc/glibc-2.24/stdlib/getenv.c:getenv (2x)
  .           
  9 ( 0.00%)  	if (string)
  .           		return string;
 12 ( 0.00%)  	return lub_string_dup(tmp);
 12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
 27 ( 0.00%)  }
  .           
  .           /*----------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/ctype/ctype.c
--------------------------------------------------------------------------------
Ir              

-- line 8 ----------------------------------------
     .           bool_t lub_ctype_isdigit(char c)
     .           {
     .           	unsigned char tmp = (unsigned char)c;
     .           	return isdigit(tmp) ? BOOL_TRUE : BOOL_FALSE;
     .           }
     .           
     .           /*--------------------------------------------------------- */
     .           bool_t lub_ctype_isspace(char c)
   424 ( 0.01%)  {
     .           	unsigned char tmp = (unsigned char)c;
 1,272 ( 0.02%)  	return isspace(tmp) ? BOOL_TRUE : BOOL_FALSE;
   636 ( 0.01%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_b_loc (212x)
   424 ( 0.01%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char lub_ctype_tolower(char c)
21,200 ( 0.36%)  {
     .           	unsigned char tmp = (unsigned char)c;
42,404 ( 0.72%)  	return tolower(tmp);
31,797 ( 0.54%)  => /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h:__ctype_tolower_loc (10,599x)
 1,639 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
21,200 ( 0.36%)  }
     .           
     .           /*--------------------------------------------------------- */
     .           char lub_ctype_toupper(char c)
     .           {
     .           	unsigned char tmp = (unsigned char)c;
     .           	return toupper(tmp);
     .           }
     .           
-- line 34 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c
--------------------------------------------------------------------------------
Ir             

-- line 50 ----------------------------------------
    .           
    .           	this = this; /* Happy compiler */
    .           
    .           	return result;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_printf(const tinyrl_vt100_t * this, const char *fmt, ...)
1,197 ( 0.02%)  {
    .           	va_list args;
    .           	int len;
    .           
  342 ( 0.01%)  	if (!this->ostream)
  171 ( 0.00%)  		return 0;
1,026 ( 0.02%)  	va_start(args, fmt);
  513 ( 0.01%)  	len = tinyrl_vt100_vprintf(this, fmt, args);
79,838 ( 1.36%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_vprintf (171x)
    .           	va_end(args);
    .           
    .           	return len;
  342 ( 0.01%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           int
    .           tinyrl_vt100_vprintf(const tinyrl_vt100_t * this, const char *fmt, va_list args)
    .           {
  516 ( 0.01%)  	if (!this->ostream)
    .           		return 0;
  348 ( 0.01%)  	return vfprintf(this->ostream, fmt, args);
78,983 ( 1.35%)  => /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c:vfprintf (171x)
17,314 ( 0.30%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_getchar(const tinyrl_vt100_t *this)
  354 ( 0.01%)  {
    .           	unsigned char c;
    .           	int istream_fd;
    .           	fd_set rfds;
    .           	struct timeval tv;
    .           	int retval;
    .           	ssize_t res;
    .           
  177 ( 0.00%)  	if (!this->istream)
    .           		return VT100_ERR;
  236 ( 0.00%)  	istream_fd = fileno(this->istream);
  354 ( 0.01%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (59x)
    .           
    .           	/* Just wait for the input if no timeout */
  177 ( 0.00%)  	if (this->timeout <= 0) {
  417 ( 0.01%)  		while (((res = read(istream_fd, &c, 1)) < 0) &&
1,452 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  406 ( 0.01%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (58x)
    .           			(EAGAIN == errno));
    .           		/* EOF or error */
    .           		if (res < 0)
    .           			return VT100_ERR;
    .           		if (!res)
    .           			return VT100_EOF;
    .           		return c;
    .           	}
-- line 104 ----------------------------------------
-- line 115 ----------------------------------------
    .           		return VT100_ERR;
    .           	if (!retval)
    .           		return VT100_TIMEOUT;
    .           
    .           	res = read(istream_fd, &c, 1);
    .           	/* EOF or error */
    .           	if (res < 0)
    .           		return VT100_ERR;
   59 ( 0.00%)  	if (!res)
   59 ( 0.00%)  		return VT100_EOF;
    .           
   59 ( 0.00%)  	return c;
  472 ( 0.01%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_oflush(const tinyrl_vt100_t * this)
    .           {
  255 ( 0.00%)  	if (!this->ostream)
    .           		return 0;
  174 ( 0.00%)  	return fflush(this->ostream);
13,272 ( 0.23%)  => /opt/build/glibc/glibc-2.24/libio/iofflush.c:fflush (84x)
1,633 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           int tinyrl_vt100_ierror(const tinyrl_vt100_t * this)
    .           {
    .           	if (!this->istream)
    .           		return 0;
    .           	return ferror(this->istream);
-- line 142 ----------------------------------------
-- line 163 ----------------------------------------
    .           {
    .           	if (!this->istream)
    .           		return 0;
    .           	return feof(this->istream);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           unsigned int tinyrl_vt100__get_width(const tinyrl_vt100_t *this)
   75 ( 0.00%)  {
    .           #ifdef TIOCGWINSZ
    .           	struct winsize ws;
    .           	int res;
    .           #endif
    .           
  225 ( 0.00%)  	if(!this->ostream)
    .           		return 80;
    .           
    .           #ifdef TIOCGWINSZ
  150 ( 0.00%)  	ws.ws_col = 0;
  608 ( 0.01%)  	res = ioctl(fileno(this->ostream), TIOCGWINSZ, &ws);
2,925 ( 0.05%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
  444 ( 0.01%)  => /opt/build/glibc/glibc-2.24/libio/fileno.c:fileno (74x)
  370 ( 0.01%)  => /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/syscall-template.S:ioctl (74x)
  450 ( 0.01%)  	if (res || !ws.ws_col)
    .           		return 80;
    .           	return ws.ws_col;
    .           #else
    .           	return 80;
    .           #endif
  150 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           unsigned int tinyrl_vt100__get_height(const tinyrl_vt100_t *this)
    .           {
    .           #ifdef TIOCGWINSZ
    .           	struct winsize ws;
    .           	int res;
    .           #endif
-- line 197 ----------------------------------------
-- line 209 ----------------------------------------
    .           	return 25;
    .           #endif
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void
    .           tinyrl_vt100_init(tinyrl_vt100_t * this, FILE * istream, FILE * ostream)
    .           {
    1 ( 0.00%)  	this->istream = istream;
    1 ( 0.00%)  	this->ostream = ostream;
    1 ( 0.00%)  	this->timeout = -1; /* No timeout by default */
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           static void tinyrl_vt100_fini(tinyrl_vt100_t * this)
    .           {
    .           	/* nothing to do yet... */
    .           	this = this;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           tinyrl_vt100_t *tinyrl_vt100_new(FILE * istream, FILE * ostream)
    5 ( 0.00%)  {
    .           	tinyrl_vt100_t *this = NULL;
    .           
    3 ( 0.00%)  	this = malloc(sizeof(tinyrl_vt100_t));
  197 ( 0.00%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (1x)
    2 ( 0.00%)  	if (this) {
    .           		tinyrl_vt100_init(this, istream, ostream);
    .           	}
    .           
    .           	return this;
    4 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_delete(tinyrl_vt100_t * this)
    .           {
    .           	tinyrl_vt100_fini(this);
    .           	/* release the memory */
    .           	free(this);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_ding(const tinyrl_vt100_t * this)
   28 ( 0.00%)  {
   70 ( 0.00%)  	tinyrl_vt100_printf(this, "%c", KEY_BEL);
5,012 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (14x)
   42 ( 0.00%)  	(void)tinyrl_vt100_oflush(this);
2,702 ( 0.05%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_oflush (14x)
   14 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_attribute_reset(const tinyrl_vt100_t * this)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[0m", KEY_ESC);
    .           }
    .           
    .           /*-------------------------------------------------------- */
-- line 263 ----------------------------------------
-- line 325 ----------------------------------------
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_cursor_forward(const tinyrl_vt100_t * this, unsigned count)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[%dC", KEY_ESC, count);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_cursor_back(const tinyrl_vt100_t * this, unsigned count)
   21 ( 0.00%)  {
  105 ( 0.00%)  	tinyrl_vt100_printf(this, "%c[%dD", KEY_ESC, count);
16,737 ( 0.29%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (21x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_cursor_up(const tinyrl_vt100_t * this, unsigned count)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[%dA", KEY_ESC, count);
    .           }
    .           
-- line 342 ----------------------------------------
-- line 374 ----------------------------------------
    .           void tinyrl_vt100_erase(const tinyrl_vt100_t * this, unsigned count)
    .           {
    .           	tinyrl_vt100_printf(this, "%c[%dP", KEY_ESC, count);
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100__set_timeout(tinyrl_vt100_t *this, int timeout)
    .           {
    2 ( 0.00%)  	this->timeout = timeout;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100_erase_down(const tinyrl_vt100_t * this)
    .           {
  105 ( 0.00%)  	tinyrl_vt100_printf(this, "%c[J", KEY_ESC);
8,925 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/tinyrl/vt100/vt100.c:tinyrl_vt100_printf (21x)
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           void tinyrl_vt100__set_istream(tinyrl_vt100_t * this, FILE * istream)
    .           {
    4 ( 0.00%)  	this->istream = istream;
    .           }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl_vt100__get_istream(const tinyrl_vt100_t * this)
    .           {
    7 ( 0.00%)  	return this->istream;
    7 ( 0.00%)  }
    .           
    .           /*-------------------------------------------------------- */
    .           FILE *tinyrl_vt100__get_ostream(const tinyrl_vt100_t * this)
    .           {
    .           	return this->ostream;
    .           }
    .           
    .           /*-------------------------------------------------------- */
-- line 409 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/param/param.c
--------------------------------------------------------------------------------
Ir           

-- line 13 ----------------------------------------
  .           #include <string.h>
  .           
  .           /*---------------------------------------------------------
  .            * PRIVATE METHODS
  .            *--------------------------------------------------------- */
  .           static void clish_param_init(clish_param_t *this, const char *name,
  .           	const char *text, const char *ptype_name)
  .           {
100 ( 0.00%)  	this->name = lub_string_dup(name);
5,612 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  	this->text = lub_string_dup(text);
6,039 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  	this->ptype_name = lub_string_dup(ptype_name);
6,022 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
  .           
  .           	/* Set up defaults */
 25 ( 0.00%)  	this->ptype = NULL;
 25 ( 0.00%)  	this->defval = NULL;
 25 ( 0.00%)  	this->mode = CLISH_PARAM_COMMON;
 25 ( 0.00%)  	this->optional = BOOL_FALSE;
 25 ( 0.00%)  	this->order = BOOL_FALSE;
 25 ( 0.00%)  	this->value = NULL;
 25 ( 0.00%)  	this->hidden = BOOL_FALSE;
 25 ( 0.00%)  	this->test = NULL;
 25 ( 0.00%)  	this->completion = NULL;
 25 ( 0.00%)  	this->access = NULL;
  .           
 75 ( 0.00%)  	this->paramv = clish_paramv_new();
4,795 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_new (25x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_param_fini(clish_param_t * this)
  .           {
  .           	/* deallocate the memory for this instance */
  .           	lub_string_free(this->defval);
  .           	lub_string_free(this->name);
-- line 45 ----------------------------------------
-- line 53 ----------------------------------------
  .           	clish_paramv_delete(this->paramv);
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC META FUNCTIONS
  .            *--------------------------------------------------------- */
  .           clish_param_t *clish_param_new(const char *name, const char *text,
  .           	const char *ptype_name)
200 ( 0.00%)  {
100 ( 0.00%)  	clish_param_t *this = malloc(sizeof(clish_param_t));
6,326 ( 0.11%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (25x)
  .           
 50 ( 0.00%)  	if (this)
  .           		clish_param_init(this, name, text, ptype_name);
  .           	return this;
175 ( 0.00%)  }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC METHODS
  .            *--------------------------------------------------------- */
  .           void clish_param_delete(clish_param_t * this)
  .           {
  .           	clish_param_fini(this);
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param_insert_param(clish_param_t * this, clish_param_t * param)
  .           {
 15 ( 0.00%)  	return clish_paramv_insert(this->paramv, param);
1,173 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_insert (5x)
  .           }
  .           
  .           /*---------------------------------------------------------
  .            * PUBLIC ATTRIBUTES
  .            *--------------------------------------------------------- */
  .           void clish_param__set_ptype_name(clish_param_t *this, const char *ptype_name)
125 ( 0.00%)  {
 75 ( 0.00%)  	if (this->ptype_name)
 50 ( 0.00%)  		lub_string_free(this->ptype_name);
2,250 ( 0.04%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (25x)
100 ( 0.00%)  	this->ptype_name = lub_string_dup(ptype_name);
100 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (25x)
100 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char * clish_param__get_ptype_name(const clish_param_t *this)
  .           {
 25 ( 0.00%)  	return this->ptype_name;
 25 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_param__get_name(const clish_param_t * this)
  .           {
 46 ( 0.00%)  	if (!this)
  .           		return NULL;
 46 ( 0.00%)  	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_param__get_text(const clish_param_t * this)
  .           {
  .           	return this->text;
  .           }
  .           
-- line 113 ----------------------------------------
-- line 115 ----------------------------------------
  .           const char *clish_param__get_range(const clish_param_t * this)
  .           {
  .           	return clish_ptype__get_range(this->ptype);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_ptype_t *clish_param__get_ptype(const clish_param_t * this)
  .           {
  4 ( 0.00%)  	return this->ptype;
  4 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_ptype(clish_param_t *this, clish_ptype_t *ptype)
  .           {
 50 ( 0.00%)  	this->ptype = ptype;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_default(clish_param_t * this, const char *defval)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->defval);
 20 ( 0.00%)  	this->defval = lub_string_dup(defval);
1,157 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           const char *clish_param__get_default(const clish_param_t * this)
  .           {
  .           	return this->defval;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_mode(clish_param_t * this, clish_param_mode_e mode)
  .           {
 10 ( 0.00%)  	assert(this);
 10 ( 0.00%)  	this->mode = mode;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_mode_e clish_param__get_mode(const clish_param_t * this)
  .           {
 22 ( 0.00%)  	return this->mode;
 22 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_param_validate(const clish_param_t * this, const char *text)
 15 ( 0.00%)  {
 12 ( 0.00%)  	if (CLISH_PARAM_SUBCOMMAND == clish_param__get_mode(this)) {
  6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (3x)
  .           		if (lub_string_nocasecmp(clish_param__get_value(this), text))
  .           			return NULL;
  .           	}
 16 ( 0.00%)  	return clish_ptype_translate(this->ptype, text);
5,472 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_translate (2x)
3,389 ( 0.06%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  9 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param_help(const clish_param_t * this, clish_help_t *help)
  .           {
  .           	const char *range = clish_ptype__get_range(this->ptype);
  .           	const char *name;
  .           	char *str = NULL;
  .           
-- line 174 ----------------------------------------
-- line 217 ----------------------------------------
  .           	unsigned index)
  .           {
  .           	return clish_paramv__get_param(this->paramv, index);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_paramv_t *clish_param__get_paramv(clish_param_t * this)
  .           {
 31 ( 0.00%)  	return this->paramv;
 31 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned int clish_param__get_param_count(const clish_param_t * this)
  .           {
 21 ( 0.00%)  	return clish_paramv__get_count(this->paramv);
 14 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_count (7x)
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_optional(clish_param_t * this, bool_t optional)
  .           {
 48 ( 0.00%)  	this->optional = optional;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_optional(const clish_param_t * this)
  .           {
 21 ( 0.00%)  	return this->optional;
 21 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_order(clish_param_t * this, bool_t order)
  .           {
 38 ( 0.00%)  	this->order = order;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_order(const clish_param_t * this)
  .           {
  .           	return this->order;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           
  .           /* paramv methods */
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_paramv_init(clish_paramv_t * this)
  .           {
 52 ( 0.00%)  	this->paramc = 0;
 52 ( 0.00%)  	this->paramv = NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           static void clish_paramv_fini(clish_paramv_t * this)
  .           {
  .           	unsigned i;
  .           
  .           	/* finalize each of the parameter instances */
-- line 274 ----------------------------------------
-- line 277 ----------------------------------------
  .           	}
  .           	/* free the parameter vector */
  .           	free(this->paramv);
  .           	this->paramc = 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_paramv_t *clish_paramv_new(void)
 52 ( 0.00%)  {
156 ( 0.00%)  	clish_paramv_t *this = malloc(sizeof(clish_paramv_t));
8,884 ( 0.15%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (52x)
  .           
104 ( 0.00%)  	if (this)
  .           		clish_paramv_init(this);
  .           	return this;
104 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_paramv_delete(clish_paramv_t * this)
  .           {
  .           	clish_paramv_fini(this);
  .           	free(this);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_paramv_insert(clish_paramv_t * this, clish_param_t * param)
120 ( 0.00%)  {
 72 ( 0.00%)  	size_t new_size = ((this->paramc + 1) * sizeof(clish_param_t *));
  .           	clish_param_t **tmp;
  .           
  .           	/* resize the parameter vector */
 72 ( 0.00%)  	tmp = realloc(this->paramv, new_size);
4,299 ( 0.07%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:realloc (24x)
 48 ( 0.00%)  	if (tmp) {
 24 ( 0.00%)  		this->paramv = tmp;
  .           		/* insert reference to the parameter */
 96 ( 0.00%)  		this->paramv[this->paramc++] = param;
  .           	}
 96 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           int clish_paramv_remove(clish_paramv_t *this, unsigned int index)
  .           {
  .           	size_t new_size;
  .           	clish_param_t **tmp;
  .           	clish_param_t **dst, **src;
  .           	size_t n;
-- line 321 ----------------------------------------
-- line 345 ----------------------------------------
  .           
  .           	return 0;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_t *clish_paramv__get_param(const clish_paramv_t * this,
  .           	unsigned int index)
  .           {
 50 ( 0.00%)  	clish_param_t *result = NULL;
  .           
170 ( 0.00%)  	if (index < this->paramc)
140 ( 0.00%)  		result = this->paramv[index];
  .           	return result;
 50 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           clish_param_t *clish_paramv_find_param(const clish_paramv_t * this,
  .           	const char *name)
  .           {
  .           	clish_param_t *res = NULL;
  .           	unsigned int i;
  .           
-- line 366 ----------------------------------------
-- line 385 ----------------------------------------
  .           		return clish_param__get_default(res);
  .           
  .           	return NULL;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           unsigned int clish_paramv__get_count(const clish_paramv_t * this)
  .           {
 15 ( 0.00%)  	return this->paramc;
 15 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_value(clish_param_t * this, const char * value)
  5 ( 0.00%)  {
 15 ( 0.00%)  	assert(!this->value);
 20 ( 0.00%)  	this->value = lub_string_dup(value);
911 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (5x)
 10 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_param__get_value(const clish_param_t * this)
  .           {
  .           	if (this->value)
  .           		return this->value;
  .           	return this->name;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_hidden(clish_param_t * this, bool_t hidden)
  .           {
 38 ( 0.00%)  	this->hidden = hidden;
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           bool_t clish_param__get_hidden(const clish_param_t * this)
  .           {
  .           	return this->hidden;
  .           }
  .           
-- line 422 ----------------------------------------
-- line 425 ----------------------------------------
  .           {
  .           	assert(!this->test);
  .           	this->test = lub_string_dup(test);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_param__get_test(const clish_param_t *this)
  .           {
  7 ( 0.00%)  	return this->test;
  7 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_completion(clish_param_t *this, const char *completion)
  .           {
  .           	assert(!this->completion);
  .           	this->completion = lub_string_dup(completion);
  .           }
  .           
  .           /*--------------------------------------------------------- */
  .           char *clish_param__get_completion(const clish_param_t *this)
  .           {
  4 ( 0.00%)  	return this->completion;
  4 ( 0.00%)  }
  .           
  .           /*--------------------------------------------------------- */
  .           void clish_param__set_access(clish_param_t *this, const char *access)
  .           {
  .           	if (this->access)
  .           		lub_string_free(this->access);
  .           	this->access = lub_string_dup(access);
  .           }
-- line 455 ----------------------------------------

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/command/command.c
--------------------------------------------------------------------------------
Ir             

-- line 15 ----------------------------------------
    .           
    .           /*---------------------------------------------------------
    .            * PRIVATE METHODS
    .            *--------------------------------------------------------- */
    .           static void
    .           clish_command_init(clish_command_t *this, const char *name, const char *text)
    .           {
    .           	/* initialise the node part */
  108 ( 0.00%)  	this->name = lub_string_dup(name);
5,722 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
  108 ( 0.00%)  	this->text = lub_string_dup(text);
5,797 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (27x)
    .           
    .           	/* Be a good binary tree citizen */
   81 ( 0.00%)  	lub_bintree_node_init(&this->bt_node);
  135 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_node_init.c:lub_bintree_node_init (27x)
    .           
    .           	/* set up defaults */
   27 ( 0.00%)  	this->link = NULL;
   27 ( 0.00%)  	this->alias = NULL;
   27 ( 0.00%)  	this->alias_view = NULL;
   85 ( 0.00%)  	this->paramv = clish_paramv_new();
4,421 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_new (26x)
  801 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   27 ( 0.00%)  	this->viewid = NULL;
   27 ( 0.00%)  	this->viewname = NULL;
   85 ( 0.00%)  	this->action = clish_action_new();
4,443 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/clish/action/action.c:clish_action_new (26x)
  802 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   85 ( 0.00%)  	this->config = clish_config_new();
5,589 ( 0.10%)  => /home/ykuznetsov/klish-2.1.3/clish/config/config.c:clish_config_new (26x)
  808 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   27 ( 0.00%)  	this->detail = NULL;
   27 ( 0.00%)  	this->escape_chars = NULL;
   27 ( 0.00%)  	this->regex_chars = NULL;
   27 ( 0.00%)  	this->args = NULL;
   27 ( 0.00%)  	this->pview = NULL;
   27 ( 0.00%)  	this->lock = BOOL_TRUE;
   27 ( 0.00%)  	this->interrupt = BOOL_FALSE;
   27 ( 0.00%)  	this->dynamic = BOOL_FALSE;
   27 ( 0.00%)  	this->access = NULL;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           static void clish_command_fini(clish_command_t * this)
    .           {
    .           	lub_string_free(this->name);
    .           	lub_string_free(this->text);
    .           
-- line 54 ----------------------------------------
-- line 74 ----------------------------------------
    .           }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC META FUNCTIONS
    .            *--------------------------------------------------------- */
    .           size_t clish_command_bt_offset(void)
    .           {
    .           	return offsetof(clish_command_t, bt_node);
   10 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_bt_compare(const void *clientnode, const void *clientkey)
    .           {
    .           	const clish_command_t *this = clientnode;
    .           	const char *key = clientkey;
    .           
4,461 ( 0.08%)  	return lub_string_nocasecmp(this->name, key);
219,257 ( 3.74%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (1,487x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command_bt_getkey(const void *clientnode, lub_bintree_key_t * key)
   47 ( 0.00%)  {
    .           	const clish_command_t *this = clientnode;
    .           
    .           	/* fill out the opaque key */
  188 ( 0.00%)  	strcpy((char *)key, this->name);
1,033 ( 0.02%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strcpy_sse2_unaligned (47x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_new(const char *name, const char *help)
  135 ( 0.00%)  {
  108 ( 0.00%)  	clish_command_t *this = malloc(sizeof(clish_command_t));
9,888 ( 0.17%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (27x)
    .           
   54 ( 0.00%)  	if (this)
    .           		clish_command_init(this, name, help);
    .           
    .           	return this;
  135 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_new_link(const char *name,
    .           	const char *help, const clish_command_t * ref)
    .           {
    .           	if (!ref)
    .           		return NULL;
    .           
-- line 119 ----------------------------------------
-- line 162 ----------------------------------------
    .           {
    .           	clish_command_fini(this);
    .           	free(this);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command_insert_param(clish_command_t * this, clish_param_t * param)
    .           {
   61 ( 0.00%)  	clish_paramv_insert(this->paramv, param);
3,426 ( 0.06%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv_insert (18x)
  865 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_help(const clish_command_t *this)
    .           {
    .           	this = this; /* Happy compiler */
    .           
    .           	return 0;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_command_t *clish_command_choose_longest(clish_command_t * cmd1,
    .           	clish_command_t * cmd2)
   78 ( 0.00%)  {
   26 ( 0.00%)  	unsigned len1 = (cmd1 ? strlen(clish_command__get_name(cmd1)) : 0);
   62 ( 0.00%)  	unsigned len2 = (cmd2 ? strlen(clish_command__get_name(cmd2)) : 0);
   96 ( 0.00%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (6x)
   24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (6x)
    .           
    .           	if (len2 < len1) {
    .           		return cmd1;
   12 ( 0.00%)  	} else if (len1 < len2) {
    .           		return cmd2;
    .           	} else {
    .           		/* let local view override */
    7 ( 0.00%)  		return cmd1;
    .           	}
   65 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           int clish_command_diff(const clish_command_t * cmd1,
    .           	const clish_command_t * cmd2)
   80 ( 0.00%)  {
   80 ( 0.00%)  	if (NULL == cmd1) {
   96 ( 0.00%)  		if (NULL != cmd2)
    .           			return 1;
    .           		else
    .           			return 0;
    .           	}
   32 ( 0.00%)  	if (NULL == cmd2)
    .           		return -1;
    .           
  160 ( 0.00%)  	return lub_string_nocasecmp(clish_command__get_name(cmd1),
  896 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_nocasecmp (16x)
  128 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (32x)
    .           		clish_command__get_name(cmd2));
   48 ( 0.00%)  }
    .           
    .           /*---------------------------------------------------------
    .            * PUBLIC ATTRIBUTES
    .            *--------------------------------------------------------- */
    .           const char *clish_command__get_name(const clish_command_t * this)
    .           {
  506 ( 0.01%)  	if (!this)
    .           		return NULL;
  506 ( 0.01%)  	return this->name;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_text(const clish_command_t * this)
    .           {
    .           	return this->text;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_detail(const clish_command_t * this)
    .           {
    1 ( 0.00%)  	return this->detail;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_detail(clish_command_t * this, const char *detail)
    4 ( 0.00%)  {
   12 ( 0.00%)  	assert(NULL == this->detail);
   16 ( 0.00%)  	this->detail = lub_string_dup(detail);
2,047 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (4x)
    8 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_action_t *clish_command__get_action(const clish_command_t *this)
    .           {
   33 ( 0.00%)  	return this->action;
   33 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_config_t *clish_command__get_config(const clish_command_t *this)
    .           {
   10 ( 0.00%)  	return this->config;
   10 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_viewname(clish_command_t * this, const char *viewname)
    .           {
   18 ( 0.00%)  	assert(NULL == this->viewname);
   22 ( 0.00%)  	clish_command__force_viewname(this, viewname);
1,849 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewname (8x)
  985 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__force_viewname(clish_command_t * this, const char *viewname)
   45 ( 0.00%)  {
   27 ( 0.00%)  	if (this->viewname)
    .           		lub_string_free(this->viewname);
   36 ( 0.00%)  	this->viewname = lub_string_dup(viewname);
1,949 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (9x)
   36 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_viewname(const clish_command_t * this)
    .           {
    4 ( 0.00%)  	return this->viewname;
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_viewid(clish_command_t * this, const char *viewid)
    .           {
    6 ( 0.00%)  	assert(NULL == this->viewid);
   10 ( 0.00%)  	clish_command__force_viewid(this, viewid);
1,136 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  455 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__force_viewid (2x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__force_viewid(clish_command_t * this, const char *viewid)
   15 ( 0.00%)  {
    9 ( 0.00%)  	if (this->viewid)
    .           		lub_string_free(this->viewid);
   12 ( 0.00%)  	this->viewid = lub_string_dup(viewid);
  734 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (3x)
   12 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_viewid(const clish_command_t * this)
    .           {
    1 ( 0.00%)  	return this->viewid;
    1 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_param_t *clish_command__get_param(const clish_command_t * this,
    .           	unsigned index)
    .           {
    .           	return clish_paramv__get_param(this->paramv, index);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_suffix(const clish_command_t * this)
    .           {
   94 ( 0.00%)  	return lub_string_suffix(this->name);
4,432 ( 0.08%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_suffix (29x)
1,719 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void
    .           clish_command__set_escape_chars(clish_command_t * this,
    .           	const char *escape_chars)
    1 ( 0.00%)  {
    3 ( 0.00%)  	assert(!this->escape_chars);
    4 ( 0.00%)  	this->escape_chars = lub_string_dup(escape_chars);
  156 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const char *clish_command__get_escape_chars(const clish_command_t * this)
    .           {
    2 ( 0.00%)  	return this->escape_chars;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_regex_chars(clish_command_t *this,
    .           	const char *escape_chars)
    .           {
    .           	assert(!this->regex_chars);
    .           	this->regex_chars = lub_string_dup(escape_chars);
    .           }
-- line 332 ----------------------------------------
-- line 335 ----------------------------------------
    .           const char *clish_command__get_regex_chars(const clish_command_t *this)
    .           {
    .           	return this->regex_chars;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_args(clish_command_t * this, clish_param_t * args)
    .           {
    2 ( 0.00%)  	assert(NULL == this->args);
    2 ( 0.00%)  	this->args = args;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_param_t *clish_command__get_args(const clish_command_t * this)
    .           {
   30 ( 0.00%)  	return this->args;
   30 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           unsigned int clish_command__get_param_count(const clish_command_t * this)
    .           {
   13 ( 0.00%)  	return clish_paramv__get_count(this->paramv);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_count (2x)
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_paramv_t *clish_command__get_paramv(const clish_command_t * this)
    .           {
   36 ( 0.00%)  	return this->paramv;
   36 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_pview(clish_command_t * this, clish_view_t * view)
    .           {
   52 ( 0.00%)  	this->pview = view;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_t *clish_command__get_pview(const clish_command_t * this)
    .           {
    .           	return this->pview;
    .           }
    .           
-- line 376 ----------------------------------------
-- line 380 ----------------------------------------
    .           	if (!this->pview)
    .           		return 0;
    .           	return clish_view__get_depth(this->pview);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           clish_view_restore_e clish_command__get_restore(const clish_command_t * this)
    .           {
    6 ( 0.00%)  	if (!this->pview)
    .           		return CLISH_RESTORE_NONE;
    6 ( 0.00%)  	return clish_view__get_restore(this->pview);
  671 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t * clish_command__get_orig(const clish_command_t * this)
    .           {
    .           	if (this->link)
    .           		return clish_command__get_orig(this->link);
    .           	return this;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_lock(const clish_command_t * this)
    .           {
    2 ( 0.00%)  	return this->lock;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_lock(clish_command_t * this, bool_t lock)
    .           {
   56 ( 0.00%)  	this->lock = lock;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_alias(clish_command_t * this, const char * alias)
    .           {
    .           	if (this->alias)
    .           		lub_string_free(this->alias);
    .           	this->alias = lub_string_dup(alias);
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const char * clish_command__get_alias(const clish_command_t * this)
    .           {
   26 ( 0.00%)  	return this->alias;
   26 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_alias_view(clish_command_t *this,
    .           	const char *alias_view)
    .           {
    .           	if (this->alias_view)
    .           		lub_string_free(this->alias_view);
    .           	this->alias_view = lub_string_dup(alias_view);
-- line 433 ----------------------------------------
-- line 448 ----------------------------------------
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_dynamic(const clish_command_t * this)
    .           {
    .           	return this->dynamic;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           const clish_command_t * clish_command__get_cmd(const clish_command_t * this)
    4 ( 0.00%)  {
    6 ( 0.00%)  	if (!this->dynamic)
    .           		return this;
    .           	if (this->link)
    .           		return clish_command__get_cmd(this->link);
    .           	return NULL;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           bool_t clish_command__get_interrupt(const clish_command_t * this)
    .           {
    2 ( 0.00%)  	return this->interrupt;
    2 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_interrupt(clish_command_t * this, bool_t interrupt)
    .           {
   54 ( 0.00%)  	this->interrupt = interrupt;
    .           }
    .           
    .           /*--------------------------------------------------------- */
    .           void clish_command__set_access(clish_command_t *this, const char *access)
    5 ( 0.00%)  {
    3 ( 0.00%)  	if (this->access)
    .           		lub_string_free(this->access);
    4 ( 0.00%)  	this->access = lub_string_dup(access);
  155 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_dup (1x)
    4 ( 0.00%)  }
    .           
    .           /*--------------------------------------------------------- */
    .           char *clish_command__get_access(const clish_command_t *this)
    .           {
    .           	return this->access;
    .           }

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_find.c
--------------------------------------------------------------------------------
Ir           

-- line 29 ----------------------------------------
  .            *   Initial version 
  .            *---------------------------------------------------------------
  .            * Copyright (C) 2004 3Com Corporation. All Rights Reserved.
  .            **************************************************************** */
  .           #include "private.h"
  .           
  .           /*--------------------------------------------------------- */
  .           void *lub_bintree_find(lub_bintree_t * this, const void *clientkey)
560 ( 0.01%)  {
564 ( 0.01%)  	this->root = lub_bintree_splay(this, this->root, clientkey);
38,537 ( 0.66%)  => /home/ykuznetsov/klish-2.1.3/lub/bintree/bintree_splay.c:lub_bintree_splay (111x)
773 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
  .           
224 ( 0.00%)  	if (NULL != this->root) {
594 ( 0.01%)  		if (lub_bintree_compare(this, this->root, clientkey) == 0)
6,779 ( 0.12%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command_bt_compare (51x)
1,986 ( 0.03%)  => /home/ykuznetsov/klish-2.1.3/clish/ptype/ptype.c:clish_ptype_bt_compare (42x)
144 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/view/view.c:clish_view_bt_compare (6x)
 88 ( 0.00%)  			return lub_bintree_getclientnode(this, this->root);
  .           	}
 68 ( 0.00%)  	return NULL;
448 ( 0.01%)  }
  .           
  .           /*--------------------------------------------------------- */

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c
--------------------------------------------------------------------------------
Ir              

-- line 78 ----------------------------------------
     .            * @param node element to add
     .            * @return new first element of the list
     .            */
     .           static clish_xmlnode_t *clish_expat_list_push_back(clish_xmlnode_t *first, clish_xmlnode_t *node)
     .           {
     .           	clish_xmlnode_t *cur = first;
     .           	clish_xmlnode_t *prev = NULL;
     .           
25,493 ( 0.43%)  	while (cur) {
     .           		prev = cur;
 7,754 ( 0.13%)  		cur = cur->next;
     .           	}
     .           	if (prev) {
   906 ( 0.02%)  		prev->next = node;
     .           		return first;
     .           	}
     .           	return node;
     .           }
     .           
     .           /** Generic add_attr() function
     .            *
     .            * @param first first attribute in the attribute list
-- line 99 ----------------------------------------
-- line 100 ----------------------------------------
     .            * @param n attribute name
     .            * @param v attribute value
     .            * @return the new first attribute in the attribute list
     .            */
     .           static clish_xmlnode_t *clish_expat_add_attr(clish_xmlnode_t *first, const char *n, const char *v)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   868 ( 0.01%)  	node = malloc(sizeof(clish_xmlnode_t));
44,425 ( 0.76%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (217x)
   434 ( 0.01%)  	if (!node)
     .           		return first;
     .           
   868 ( 0.01%)  	node->name = strdup(n);
49,586 ( 0.85%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   868 ( 0.01%)  	node->content = strdup(v);
54,365 ( 0.93%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (217x)
   217 ( 0.00%)  	node->children = NULL;
   217 ( 0.00%)  	node->attributes = NULL;
   217 ( 0.00%)  	node->next = NULL;
   217 ( 0.00%)  	node->type = CLISH_XMLNODE_ATTR;
   217 ( 0.00%)  	node->depth = 0;
     .           
     .           	return clish_expat_list_push_back(first, node);
     .           }
     .           
     .           /** Run through an expat attribute list, and create a DOM-like attribute list
     .            *
     .            * @param node parent node
     .            * @param attr NULL-terminated attribute liste
-- line 126 ----------------------------------------
-- line 127 ----------------------------------------
     .            *
     .            * Each attribute uses two slots in the expat attribute list. The first one is
     .            * used to store the name, the second one is used to store the value.
     .            */
     .           static void clish_expat_add_attrlist(clish_xmlnode_t *node, const char **attr)
     .           {
     .           	int i;
     .           
 1,173 ( 0.02%)  	for (i = 0; attr[i]; i += 2) {
   434 ( 0.01%)  		node->attributes = clish_expat_add_attr(node->attributes,
     .           			attr[i], attr[i+1]);
     .           	}
     .           }
     .           
     .           /** Generic make_node() function
     .            *
     .            * @param parent XML parent node
     .            * @param type XML node type
-- line 144 ----------------------------------------
-- line 147 ----------------------------------------
     .            * @param attr attribute list
     .            * @return a new node or NULL on error
     .            */
     .           static clish_xmlnode_t *clish_expat_make_node(clish_xmlnode_t *parent,
     .           					      clish_xmlnodetype_e type,
     .           					      const char *n,
     .           					      const char *v,
     .           					      const char **attr)
 7,428 ( 0.13%)  {
     .           	clish_xmlnode_t *node;
     .           
 2,476 ( 0.04%)  	node = malloc(sizeof(clish_xmlnode_t));
122,324 ( 2.09%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (619x)
 1,238 ( 0.02%)  	if (!node)
     .           		return NULL;
 2,770 ( 0.05%)  	node->name = n ? strdup(n) : NULL;
18,524 ( 0.32%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (98x)
 4,039 ( 0.07%)  	node->content = v ? strdup(v) : NULL;
127,516 ( 2.18%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (521x)
   619 ( 0.01%)  	node->children = NULL;
   619 ( 0.01%)  	node->attributes = NULL;
   619 ( 0.01%)  	node->next = NULL;
 1,238 ( 0.02%)  	node->parent = parent;
 3,085 ( 0.05%)  	node->doc = parent ? parent->doc : NULL;
 2,446 ( 0.04%)  	node->depth = parent ? parent->depth + 1 : 0;
   619 ( 0.01%)  	node->type = type;
     .           
 1,238 ( 0.02%)  	if (attr)
     .           		clish_expat_add_attrlist(node, attr);
     .           
   152 ( 0.00%)  	if (parent)
 2,436 ( 0.04%)  		parent->children = clish_expat_list_push_back(parent->children, node);
     .           
     .           	return node;
 5,571 ( 0.10%)  }
     .           
     .           /** Add a new XML root
     .            *
     .            * @param doc XML document
     .            * @param el root node name
     .            * @param attr expat attribute list
     .            * @return a new root element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_root(clish_xmldoc_t *doc, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   314 ( 0.01%)  	node = clish_expat_make_node(NULL, CLISH_XMLNODE_ELM, el, NULL, attr);
25,901 ( 0.44%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (10x)
    20 ( 0.00%)  	if (!node)
     .           		return doc->root;
     .           
    30 ( 0.00%)  	doc->root = clish_expat_list_push_back(doc->root, node);
     .           
     .           	return node;
     .           }
     .           
     .           /** Add a new XML element as a child
     .            *
     .            * @param cur parent XML element
     .            * @param el element name
     .            * @param attr expat attribute list
     .            * @return a new XMl element
     .            */
     .           static clish_xmlnode_t *clish_expat_add_child(clish_xmlnode_t *cur, const char *el, const char **attr)
     .           {
     .           	clish_xmlnode_t *node;
     .           
   176 ( 0.00%)  	node = clish_expat_make_node(cur, CLISH_XMLNODE_ELM, el, NULL, attr);
176,849 ( 3.02%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (88x)
   176 ( 0.00%)  	if (!node)
     .           		return cur;
     .           
     .           	return node;
     .           }
     .           
     .           /** Expat handler: element content
     .            *
     .            * @param data user data
     .            * @param s content (not nul-termainated)
     .            * @param len content length
     .            */
     .           static void clish_expat_chardata_handler(void *data, const char *s, int len)
 2,605 ( 0.04%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
 2,605 ( 0.04%)  	if (doc->current) {
 2,605 ( 0.04%)  		char *content = malloc(len + 1);
66,819 ( 1.14%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (521x)
 2,609 ( 0.04%)  		strncpy(content, s, len);
18,080 ( 0.31%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S:__strncpy_sse2_unaligned (520x)
 1,541 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   521 ( 0.01%)  		content[len] = '\0';
     .           
 3,126 ( 0.05%)  		clish_expat_make_node(doc->current, CLISH_XMLNODE_TEXT, NULL, content, NULL);
290,424 ( 4.95%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_make_node (521x)
     .           		/*
     .           		 * the previous call is a bit too generic, and strdup() content
     .           		 * so we need to free out own version of content.
     .           		 */
 1,567 ( 0.03%)  		free(content);
45,760 ( 0.78%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (520x)
 1,569 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           	}
 2,605 ( 0.04%)  }
     .           
     .           /** Expat handler: start XML element
     .            *
     .            * @param data user data
     .            * @param el element name (nul-terminated)
     .            * @param attr expat attribute list
     .            */
     .           static void clish_expat_element_start(void *data, const char *el, const char **attr)
   490 ( 0.01%)  {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (!doc->current) {
     .           		doc->current = clish_expat_add_root(doc, el, attr);
     .           	} else {
    98 ( 0.00%)  		doc->current = clish_expat_add_child(doc->current, el, attr);
     .           	}
   392 ( 0.01%)  }
     .           
     .           /** Expat handler: end XML element
     .            *
     .            * @param data user data
     .            * @param el element name
     .            */
     .           static void clish_expat_element_end(void *data, const char *el)
     .           {
     .           	clish_xmldoc_t *doc = data;
     .           
   294 ( 0.01%)  	if (doc->current) {
   294 ( 0.01%)  		doc->current = doc->current->parent;
     .           	}
     .           
     .           	el = el; /* Happy compiler */
     .           }
     .           
     .           /** Free a node, its children and its attributes
     .            *
     .            * @param node node to free
     .            */
     .           static void clish_expat_free_node(clish_xmlnode_t *cur)
 3,344 ( 0.06%)  {
     .           	clish_xmlnode_t *node;
     .           	clish_xmlnode_t *first;
     .           
 2,584 ( 0.04%)  	if (cur->attributes) {
     .           		first = cur->attributes;
   651 ( 0.01%)  		while (first) {
     .           			node = first;
   217 ( 0.00%)  			first = first->next;
   217 ( 0.00%)  			clish_expat_free_node(node);
 8,700 ( 0.15%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (30x)
     .           		}
     .           	}
 2,569 ( 0.04%)  	if (cur->children) {
     .           		first = cur->children;
 1,827 ( 0.03%)  		while (first) {
     .           			node = first;
   609 ( 0.01%)  			first = first->next;
   609 ( 0.01%)  			clish_expat_free_node(node);
179,286 ( 3.06%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node'2 (174x)
     .           		}
     .           	}
 2,508 ( 0.04%)  	if (cur->name)
   630 ( 0.01%)  		free(cur->name);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.04%)  	if (cur->content)
 1,476 ( 0.03%)  		free(cur->content);
64,973 ( 1.11%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (738x)
 2,508 ( 0.04%)  	free(cur);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
 2,508 ( 0.04%)  }
     .           
     .           /*
     .            * Public interface
     .            */
     .           
     .           int clish_xmldoc_start(void)
     .           {
     .           	return 0;
-- line 313 ----------------------------------------
-- line 314 ----------------------------------------
     .           }
     .           
     .           int clish_xmldoc_stop(void)
     .           {
     .           	return 0;
     .           }
     .           
     .           clish_xmldoc_t *clish_xmldoc_read(const char *filename)
    70 ( 0.00%)  {
     .           	clish_xmldoc_t *doc;
     .           	struct stat sb;
     .           	int fd;
     .           	char *buffer;
     .           	XML_Parser parser;
     .           	int rb;
     .           
    54 ( 0.00%)  	doc = malloc(sizeof(clish_xmldoc_t));
 1,728 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,269 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:calloc (9x)
    20 ( 0.00%)  	if (!doc)
     .           		return NULL;
     .           	memset(doc, 0, sizeof(clish_xmldoc_t));
    44 ( 0.00%)  	doc->filename = strdup(filename);
 1,751 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
 1,723 ( 0.03%)  => /opt/build/glibc/glibc-2.24/string/strdup.c:strdup (9x)
    44 ( 0.00%)  	parser = XML_ParserCreate(NULL);
 2,156 ( 0.04%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
95,826 ( 1.63%)  => ???:XML_ParserCreate (9x)
    20 ( 0.00%)  	if (!parser)
     .           		goto error_parser_create;
    44 ( 0.00%)  	XML_SetUserData(parser, doc);
   949 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    54 ( 0.00%)  => ???:XML_SetUserData (9x)
    44 ( 0.00%)  	XML_SetCharacterDataHandler(parser, clish_expat_chardata_handler);
 1,060 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    18 ( 0.00%)  => ???:XML_SetCharacterDataHandler (9x)
    54 ( 0.00%)  	XML_SetElementHandler(parser,
 1,011 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    27 ( 0.00%)  => ???:XML_SetElementHandler (9x)
     .           		clish_expat_element_start,
     .           		clish_expat_element_end);
     .           
    64 ( 0.00%)  	fd = open(filename, O_RDONLY);
 1,430 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:open (9x)
    20 ( 0.00%)  	if (fd < 0)
     .           		goto error_open;
     .           	fstat(fd, &sb);
    50 ( 0.00%)  	buffer = malloc(sb.st_size+1);
 2,681 ( 0.05%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:malloc (10x)
    54 ( 0.00%)  	rb = read(fd, buffer, sb.st_size);
 1,446 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:read (9x)
    20 ( 0.00%)  	if (rb < 0) {
     .           		close(fd);
     .           		goto error_parse;
     .           	}
    20 ( 0.00%)  	buffer[sb.st_size] = 0;
    34 ( 0.00%)  	close(fd);
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
    63 ( 0.00%)  => /opt/build/glibc/glibc-2.24/io/../sysdeps/unix/syscall-template.S:close (9x)
     .           
    84 ( 0.00%)  	if (!XML_Parse(parser, buffer, sb.st_size, 1))
1,302,462 (22.22%)  => ???:XML_Parse (9x)
112,859 ( 1.93%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           		goto error_parse;
     .           
    34 ( 0.00%)  	XML_ParserFree(parser);
 6,192 ( 0.11%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
46,609 ( 0.80%)  => ???:XML_ParserFree (9x)
    30 ( 0.00%)  	free(buffer);
 1,380 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           
     .           	return doc;
     .           
     .           error_parse:
     .           	free(buffer);
     .           
     .           error_open:
     .           	XML_ParserFree(parser);
     .           
     .           error_parser_create:
     .           	clish_xmldoc_release(doc);
     .           
     .           	return NULL;
    80 ( 0.00%)  }
     .           
     .           void clish_xmldoc_release(clish_xmldoc_t *doc)
    20 ( 0.00%)  {
    20 ( 0.00%)  	if (doc) {
     .           		clish_xmlnode_t *node;
    70 ( 0.00%)  		while (doc->root) {
     .           			node = doc->root;
    20 ( 0.00%)  			doc->root = node->next;
    10 ( 0.00%)  			clish_expat_free_node(node);
191,026 ( 3.26%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_expat.c:clish_expat_free_node (10x)
     .           		}
    30 ( 0.00%)  		if (doc->filename)
    20 ( 0.00%)  			free(doc->filename);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
    30 ( 0.00%)  		free(doc);
   880 ( 0.02%)  => /opt/build/glibc/glibc-2.24/malloc/malloc.c:free (10x)
     .           	}
    10 ( 0.00%)  }
     .           
     .           int clish_xmldoc_is_valid(clish_xmldoc_t *doc)
     .           {
    53 ( 0.00%)  	return doc && doc->root;
    12 ( 0.00%)  }
     .           
     .           int clish_xmldoc_error_caps(clish_xmldoc_t *doc)
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return CLISH_XMLERR_NOCAPS;
     .           }
     .           
-- line 403 ----------------------------------------
-- line 419 ----------------------------------------
     .           {
     .           	doc = doc; /* Happy compiler */
     .           
     .           	return "";
     .           }
     .           
     .           int clish_xmlnode_get_type(clish_xmlnode_t *node)
     .           {
 1,281 ( 0.02%)  	if (node)
   427 ( 0.01%)  		return node->type;
     .           	return CLISH_XMLNODE_UNKNOWN;
   427 ( 0.01%)  }
     .           
     .           clish_xmlnode_t *clish_xmldoc_get_root(clish_xmldoc_t *doc)
     .           {
    20 ( 0.00%)  	if (doc)
    20 ( 0.00%)  		return doc->root;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_parent(clish_xmlnode_t *node)
     .           {
    80 ( 0.00%)  	if (node)
    80 ( 0.00%)  		return node->parent;
     .           	return NULL;
     .           }
     .           
     .           clish_xmlnode_t *clish_xmlnode_next_child(clish_xmlnode_t *parent,
     .           					  clish_xmlnode_t *curchild)
     .           {
   956 ( 0.02%)  	if (curchild)
   834 ( 0.01%)  		return curchild->next;
   122 ( 0.00%)  	if (parent)
   122 ( 0.00%)  		return parent->children;
     .           	return NULL;
     .           }
     .           
     .           char *clish_xmlnode_fetch_attr(clish_xmlnode_t *node,
     .           			       const char *attrname)
 2,648 ( 0.05%)  {
 1,324 ( 0.02%)  	if (node) {
   662 ( 0.01%)  		clish_xmlnode_t *n = node->attributes;
 4,292 ( 0.07%)  		while (n) {
 9,924 ( 0.17%)  			if (strcmp(n->name, attrname) == 0)
32,589 ( 0.56%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S:__strcmp_sse2_unaligned (1,654x)
   187 ( 0.00%)  				return n->content;
 1,467 ( 0.03%)  			n = n->next;
     .           		}
     .           	}
   475 ( 0.01%)  	return NULL;
 2,648 ( 0.05%)  }
     .           
     .           int clish_xmlnode_get_content(clish_xmlnode_t *node, char *content,
     .           			      unsigned int *contentlen)
   182 ( 0.00%)  {
     .           	unsigned int minlen = 1;
     .           
   208 ( 0.00%)  	if (node && content && contentlen) {
    26 ( 0.00%)  		clish_xmlnode_t *children = node->children;
   505 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   576 ( 0.01%)  				minlen += strlen(children->content);
 5,074 ( 0.09%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (192x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    52 ( 0.00%)  		if (minlen >= *contentlen) {
     .           			*contentlen = minlen + 1;
     .           			return -E2BIG;
     .           		}
     .           		children = node->children;
    52 ( 0.00%)  		*content = 0;
   407 ( 0.01%)  		while (children) {
   960 ( 0.02%)  			if (children->type == CLISH_XMLNODE_TEXT && children->content)
   580 ( 0.01%)  				strcat(content, children->content);
29,191 ( 0.50%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S:__strcat_sse2_unaligned (191x)
 1,492 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
   192 ( 0.00%)  			children = children->next;
     .           		}
    26 ( 0.00%)  		return 0;
     .           	}
     .           
     .           	return -EINVAL;
   156 ( 0.00%)  }
     .           
     .           int clish_xmlnode_get_name(clish_xmlnode_t *node, char *name,
     .           	unsigned int *namelen)
   552 ( 0.01%)  {
 1,104 ( 0.02%)  	if (node && name && namelen) {
 1,108 ( 0.02%)  		if (strlen(node->name) >= *namelen) {
 2,192 ( 0.04%)  => /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S:strlen (137x)
 1,497 ( 0.03%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
     .           			*namelen = strlen(node->name) + 1;
     .           			return -E2BIG;
     .           		}
   828 ( 0.01%)  		snprintf(name, *namelen, "%s", node->name);
72,205 ( 1.23%)  => /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c:snprintf (138x)
   414 ( 0.01%)  		name[*namelen - 1] = '\0';
   138 ( 0.00%)  		return 0;
     .           	}
     .           	return -EINVAL;
   552 ( 0.01%)  }
     .           
     .           void clish_xmlnode_print(clish_xmlnode_t *node, FILE *out)
     .           {
     .           	if (node) {
     .           		int i;
     .           		clish_xmlnode_t *a;
     .           		for (i=0; i<node->depth; ++i) {
     .           			fprintf(out, "  ");
-- line 520 ----------------------------------------
-- line 525 ----------------------------------------
     .           			fprintf(out, " %s='%s'", a->name, a->content);
     .           			a = a->next;
     .           		}
     .           		fprintf(out, ">...");
     .           	}
     .           }
     .           
     .           void clish_xml_release(void *p)
   661 ( 0.01%)  {
     .           	p = p; /* Happy compiler */
     .           	/* nothing to release */
     .           }
     .           
     .           #endif /* HAVE_LIB_EXPAT */
     .           

--------------------------------------------------------------------------------
-- Auto-annotated source: /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c
--------------------------------------------------------------------------------
Ir          

-- line 8 ----------------------------------------
 .           #include "lub/string.h"
 .           #include "lub/system.h"
 .           #include "private.h"
 .           
 .           /*----------------------------------------------------------- */
 .           clish_pargv_status_e clish_shell_parse(
 .           	clish_shell_t *this, const char *line,
 .           	const clish_command_t **ret_cmd, clish_pargv_t **pargv)
20 ( 0.00%)  {
 .           	clish_pargv_status_e result = CLISH_BAD_CMD;
 .           	clish_context_t context;
 .           	const clish_command_t *cmd;
 .           	lub_argv_t *argv = NULL;
 .           	unsigned int idx;
 .           
 6 ( 0.00%)  	*ret_cmd = cmd = clish_shell_resolve_command(this, line);
7,717 ( 0.13%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_command.c:clish_shell_resolve_command (2x)
 4 ( 0.00%)  	if (!cmd)
 2 ( 0.00%)  		return result;
 .           
 .           	/* Now construct the parameters for the command */
 .           	/* Prepare context */
 3 ( 0.00%)  	*pargv = clish_pargv_new();
113 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_new (1x)
 6 ( 0.00%)  	clish_context_init(&context, this);
 8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context_init (1x)
 4 ( 0.00%)  	clish_context__set_cmd(&context, cmd);
 4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__set_cmd (1x)
 4 ( 0.00%)  	clish_context__set_pargv(&context, *pargv);
 4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/context.c:clish_context__set_pargv (1x)
 .           
 7 ( 0.00%)  	idx = lub_string_wordcount(clish_command__get_name(cmd));
206 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_wordcount (1x)
 4 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_name (1x)
 5 ( 0.00%)  	argv = lub_argv_new(line, 0);
864 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_new (1x)
14 ( 0.00%)  	result = clish_shell_parse_pargv(*pargv, cmd, &context,
63 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:clish_shell_parse_pargv (1x)
 2 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (1x)
 .           		clish_command__get_paramv(cmd),
 .           		argv, &idx, NULL, 0);
 3 ( 0.00%)  	lub_argv_delete(argv);
292 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv_delete (1x)
 4 ( 0.00%)  	if (CLISH_LINE_OK != result) {
 .           		clish_pargv_delete(*pargv);
 .           		*pargv = NULL;
 .           	}
 .           
 .           	return result;
16 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           static bool_t line_test(const clish_param_t *param, void *context)
21 ( 0.00%)  {
 .           	char *str = NULL;
 .           	char *teststr = NULL;
 .           	bool_t res;
 .           
21 ( 0.00%)  	if (!param)
 .           		return BOOL_FALSE;
18 ( 0.00%)  	teststr = clish_param__get_test(param);
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_test (6x)
14 ( 0.00%)  	if (!teststr)
 7 ( 0.00%)  		return BOOL_TRUE;
 .           	str = clish_shell_expand(teststr, SHELL_VAR_ACTION, context);
 .           	if (!str)
 .           		return BOOL_FALSE;
 .           	res = lub_system_line_test(str);
 .           	lub_string_free(str);
 .           
 .           	return res;
35 ( 0.00%)  }
 .           
 .           /*--------------------------------------------------------- */
 .           clish_pargv_status_e clish_shell_parse_pargv(clish_pargv_t *pargv,
 .           	const clish_command_t *cmd,
 .           	void *context,
 .           	clish_paramv_t *paramv,
 .           	const lub_argv_t *argv,
 .           	unsigned *idx, clish_pargv_t *last, unsigned need_index)
75 ( 0.00%)  {
20 ( 0.00%)  	unsigned argc = lub_argv__get_count(argv);
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_count (5x)
 .           	unsigned index = 0;
 .           	unsigned nopt_index = 0;
 .           	clish_param_t *nopt_param = NULL;
 .           	unsigned i;
 .           	clish_pargv_status_e retval;
20 ( 0.00%)  	unsigned paramc = clish_paramv__get_count(paramv);
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_count (5x)
 .           	int up_level = 0; /* Is it a first level of param nesting? */
 .           
10 ( 0.00%)  	assert(pargv);
10 ( 0.00%)  	assert(cmd);
 .           
 .           	/* Check is it a first level of PARAM nesting. */
30 ( 0.00%)  	if (paramv == clish_command__get_paramv(cmd))
10 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/command/command.c:clish_command__get_paramv (5x)
 .           		up_level = 1;
 .           
35 ( 0.00%)  	while (index < paramc) {
 7 ( 0.00%)  		const char *arg = NULL;
35 ( 0.00%)  		clish_param_t *param = clish_paramv__get_param(paramv, index);
42 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (7x)
 .           		clish_param_t *cparam = NULL;
 .           		int is_switch = 0;
 .           
14 ( 0.00%)  		if (!param)
 .           			return CLISH_BAD_PARAM;
 .           
 .           		/* Use real arg or PARAM's default value as argument */
21 ( 0.00%)  		if (*idx < argc)
15 ( 0.00%)  			arg = lub_argv__get_arg(argv, *idx);
30 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/argv/argv.c:lub_argv__get_arg (3x)
 .           
 .           		/* Is parameter in "switch" mode? */
32 ( 0.00%)  		if (CLISH_PARAM_SWITCH == clish_param__get_mode(param))
655 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (6x)
 .           			is_switch = 1;
 .           
 .           		/* Check the 'test' conditions */
35 ( 0.00%)  		if (!line_test(param, context)) {
783 ( 0.01%)  => /home/ykuznetsov/klish-2.1.3/clish/shell/shell_parse.c:line_test (7x)
 .           			index++;
 .           			continue;
 .           		}
 .           
 .           		/* Add param for help and completion */
43 ( 0.00%)  		if (last && (*idx == need_index) &&
36 ( 0.00%)  			(NULL == clish_pargv_find_arg(pargv, clish_param__get_name(param)))) {
1,341 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (2x)
157 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_find_arg (3x)
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_name (3x)
 8 ( 0.00%)  			if (is_switch) {
 4 ( 0.00%)  				unsigned rec_paramc = clish_param__get_param_count(param);
 .           				for (i = 0; i < rec_paramc; i++) {
 .           					cparam = clish_param__get_param(param, i);
 .           					if (!cparam)
 .           						break;
 .           					if (!line_test(cparam, context))
 .           						continue;
 .           					if (CLISH_PARAM_SUBCOMMAND ==
 .           						clish_param__get_mode(cparam)) {
-- line 128 ----------------------------------------
-- line 134 ----------------------------------------
 .           							clish_pargv_insert(last,
 .           								cparam, arg);
 .           					} else {
 .           						clish_pargv_insert(last,
 .           							cparam, arg);
 .           					}
 .           				}
 .           			} else {
 8 ( 0.00%)  				if (CLISH_PARAM_SUBCOMMAND ==
 8 ( 0.00%)  					clish_param__get_mode(param)) {
 8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_mode (4x)
 .           					const char *pname =
 .           					    clish_param__get_value(param);
 .           					if (!arg || (arg &&
 .           						(pname == lub_string_nocasestr(pname, arg))))
 .           						clish_pargv_insert(last, param, arg);
 .           				} else {
28 ( 0.00%)  					clish_pargv_insert(last, param, arg);
939 ( 0.02%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
1,089 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_insert (3x)
 .           				}
 .           			}
 .           		}
 .           
 .           		/* Set parameter value */
 .           		{
 .           			char *validated = NULL;
28 ( 0.00%)  			clish_paramv_t *rec_paramv =
14 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_paramv (7x)
 .           			    clish_param__get_paramv(param);
32 ( 0.00%)  			unsigned rec_paramc =
714 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
30 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_param_count (6x)
 .           			    clish_param__get_param_count(param);
 .           
 .           			/* Save the index of last non-option parameter
 .           			 * to restore index if the optional parameters
 .           			 * will be used.
 .           			 */
53 ( 0.00%)  			if (!clish_param__get_optional(param)) {
687 ( 0.01%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
12 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_optional (6x)
 .           				nopt_param = param;
 .           				nopt_index = index;
 .           			}
 .           
 .           			/* Validate the current parameter. */
63 ( 0.00%)  			if (clish_pargv_find_arg(pargv, clish_param__get_name(param))) {
293 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_find_arg (7x)
28 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_name (7x)
 .           				/* Duplicated parameter */
 .           				validated = NULL;
14 ( 0.00%)  			} else if (is_switch) {
 .           				for (i = 0; i < rec_paramc; i++) {
 .           					cparam = clish_param__get_param(param, i);
 .           					if (!cparam)
 .           						break;
 .           					if (!line_test(cparam, context))
 .           						continue;
 .           					if ((validated = arg ?
 .           						clish_param_validate(cparam, arg) : NULL)) {
 .           						rec_paramv = clish_param__get_paramv(cparam);
 .           						rec_paramc = clish_param__get_param_count(cparam);
 .           						break;
 .           					}
 .           				}
 .           			} else {
 .           				validated = arg ?
33 ( 0.00%)  					clish_param_validate(param, arg) : NULL;
4,072 ( 0.07%)  => /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h:_dl_runtime_resolve_fxsave'2 (1x)
5,508 ( 0.09%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param_validate (2x)
 .           			}
 .           
 6 ( 0.00%)  			if (validated) {
 .           				/* add (or update) this parameter */
 .           				if (is_switch) {
 .           					clish_pargv_insert(pargv, param,
 .           						clish_param__get_name(cparam));
 .           					clish_pargv_insert(pargv, cparam,
 .           						validated);
 .           				} else {
18 ( 0.00%)  					clish_pargv_insert(pargv, param,
1,455 ( 0.02%)  => /home/ykuznetsov/klish-2.1.3/clish/pargv/pargv.c:clish_pargv_insert (3x)
 .           						validated);
 .           				}
 9 ( 0.00%)  				lub_string_free(validated);
270 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/lub/string/string.c:lub_string_free (3x)
 .           
 .           				/* Next command line argument */
 .           				/* Don't change idx if this is the last
 .           				   unfinished optional argument.
 .           				 */
18 ( 0.00%)  				if (!(clish_param__get_optional(param) &&
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_optional (3x)
 .           					(*idx == need_index) &&
16 ( 0.00%)  					(need_index == (argc - 1)))) {
 6 ( 0.00%)  					(*idx)++;
 .           					/* Walk through the nested parameters */
 9 ( 0.00%)  					if (rec_paramc) {
 .           						retval = clish_shell_parse_pargv(pargv, cmd,
 .           							context, rec_paramv,
 .           							argv, idx, last, need_index);
 .           						if (CLISH_LINE_OK != retval)
 .           							return retval;
 .           					}
 .           				}
 .           
 .           				/* Choose the next parameter */
15 ( 0.00%)  				if (clish_param__get_optional(param) &&
 6 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_optional (3x)
 .           					!clish_param__get_order(param)) {
 .           					if (nopt_param)
 .           						index = nopt_index + 1;
 .           					else
 .           						index = 0;
 .           				} else {
 .           					/* Save non-option position in
 .           					   case of ordered optional param */
 .           					nopt_param = param;
 .           					nopt_index = index;
12 ( 0.00%)  					index++;
 .           				}
 .           
 .           			} else {
 .           				/* Choose the next parameter if current
 .           				 * is not validated.
 .           				 */
20 ( 0.00%)  				if (clish_param__get_optional(param))
 8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_optional (4x)
 .           					index++;
 .           				else {
 8 ( 0.00%)  					if (!arg)
 .           						break;
 .           					else
 .           						return CLISH_BAD_PARAM;
 .           				}
 .           			}
 .           		}
 .           	}
 .           
 .           	/* Check for non-optional parameters without values */
40 ( 0.00%)  	if ((*idx >= argc) && (index < paramc)) {
 .           		unsigned j = index;
 .           		const clish_param_t *param;
 .           		while (j < paramc) {
16 ( 0.00%)  			param = clish_paramv__get_param(paramv, j++);
24 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_paramv__get_param (4x)
20 ( 0.00%)  			if (BOOL_TRUE != clish_param__get_optional(param))
 8 ( 0.00%)  => /home/ykuznetsov/klish-2.1.3/clish/param/param.c:clish_param__get_optional (4x)
 8 ( 0.00%)  				return CLISH_LINE_PARTIAL;
 .           		}
 .           	}
 .           
 .           	/* If the number of arguments is bigger than number of
 .           	 * params than it's a args. So generate the args entry
 .           	 * in the list of completions.
 .           	 */
 2 ( 0.00%)  	if (last && up_level &&
 3 ( 0.00%)  			clish_command__get_args(cmd) &&
 .           			(clish_pargv__get_count(last) == 0) &&
 .           			(*idx <= argc) && (index >= paramc)) {
 .           		clish_pargv_insert(last, clish_command__get_args(cmd), "");
 .           	}
 .           
 .           	/*
 .           	 * if we've satisfied all the parameters we can now construct
 .           	 * an 'args' parameter if one exists
 .           	 */
 5 ( 0.00%)  	if (up_level && (*idx < argc) && (index >= paramc)) {
 .           		const char *arg = lub_argv__get_arg(argv, *idx);
 .           		const clish_param_t *param = clish_command__get_args(cmd);
 .           		char *args = NULL;
 .           
 .           		if (!param)
 .           			return CLISH_BAD_CMD;
 .           
 .           		/*
-- line 291 ----------------------------------------
-- line 308 ----------------------------------------
 .           				lub_string_cat(&args, " ");
 .           			}
 .           		}
 .           		/* add (or update) this parameter */
 .           		clish_pargv_insert(pargv, param, args);
 .           		lub_string_free(args);
 .           	}
 .           
 1 ( 0.00%)  	return CLISH_LINE_OK;
40 ( 0.00%)  }
 .           
 .           /*----------------------------------------------------------- */
 .           clish_shell_state_e clish_shell__get_state(const clish_shell_t *this)
 .           {
 .           	return this->state;
 .           }
 .           
 .           /*----------------------------------------------------------- */
-- line 325 ----------------------------------------

--------------------------------------------------------------------------------
The following files chosen for auto-annotation could not be found:
--------------------------------------------------------------------------------
  /opt/build/glibc/glibc-2.24/ctype/../include/ctype.h
  /opt/build/glibc/glibc-2.24/dirent/../sysdeps/posix/readdir.c
  /opt/build/glibc/glibc-2.24/elf/../elf/dl-runtime.c
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/generic/ldsodefs.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-machine.h
  /opt/build/glibc/glibc-2.24/elf/../sysdeps/x86_64/dl-trampoline.h
  /opt/build/glibc/glibc-2.24/elf/./dl-map-segments.h
  /opt/build/glibc/glibc-2.24/elf/dl-addr.c
  /opt/build/glibc/glibc-2.24/elf/dl-cache.c
  /opt/build/glibc/glibc-2.24/elf/dl-deps.c
  /opt/build/glibc/glibc-2.24/elf/dl-error.c
  /opt/build/glibc/glibc-2.24/elf/dl-load.c
  /opt/build/glibc/glibc-2.24/elf/dl-lookup.c
  /opt/build/glibc/glibc-2.24/elf/dl-minimal.c
  /opt/build/glibc/glibc-2.24/elf/dl-misc.c
  /opt/build/glibc/glibc-2.24/elf/dl-object.c
  /opt/build/glibc/glibc-2.24/elf/dl-profstub.c
  /opt/build/glibc/glibc-2.24/elf/dl-reloc.c
  /opt/build/glibc/glibc-2.24/elf/dl-version.c
  /opt/build/glibc/glibc-2.24/elf/do-rel.h
  /opt/build/glibc/glibc-2.24/elf/get-dynamic-info.h
  /opt/build/glibc/glibc-2.24/elf/rtld.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/loop.c
  /opt/build/glibc/glibc-2.24/iconv/../iconv/skeleton.c
  /opt/build/glibc/glibc-2.24/iconv/gconv_simple.c
  /opt/build/glibc/glibc-2.24/libio/fileno.c
  /opt/build/glibc/glibc-2.24/libio/fileops.c
  /opt/build/glibc/glibc-2.24/libio/genops.c
  /opt/build/glibc/glibc-2.24/libio/iofflush.c
  /opt/build/glibc/glibc-2.24/libio/iogetline.c
  /opt/build/glibc/glibc-2.24/libio/iopadn.c
  /opt/build/glibc/glibc-2.24/libio/libioP.h
  /opt/build/glibc/glibc-2.24/libio/strops.c
  /opt/build/glibc/glibc-2.24/libio/vsnprintf.c
  /opt/build/glibc/glibc-2.24/locale/coll-lookup.c
  /opt/build/glibc/glibc-2.24/locale/findlocale.c
  /opt/build/glibc/glibc-2.24/locale/loadarchive.c
  /opt/build/glibc/glibc-2.24/locale/loadlocale.c
  /opt/build/glibc/glibc-2.24/locale/setlocale.c
  /opt/build/glibc/glibc-2.24/malloc/malloc.c
  /opt/build/glibc/glibc-2.24/misc/../sysdeps/unix/sysv/linux/wordsize-64/mmap.c
  /opt/build/glibc/glibc-2.24/posix/regcomp.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.c
  /opt/build/glibc/glibc-2.24/posix/regex_internal.h
  /opt/build/glibc/glibc-2.24/setjmp/../sysdeps/x86_64/setjmp.S
  /opt/build/glibc/glibc-2.24/signal/../sysdeps/unix/sysv/linux/x86_64/sigaction.c
  /opt/build/glibc/glibc-2.24/stdio-common/../libio/libioP.h
  /opt/build/glibc/glibc-2.24/stdio-common/_itoa.c
  /opt/build/glibc/glibc-2.24/stdio-common/printf-parse.h
  /opt/build/glibc/glibc-2.24/stdio-common/snprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfprintf.c
  /opt/build/glibc/glibc-2.24/stdio-common/vfscanf.c
  /opt/build/glibc/glibc-2.24/stdlib/../stdlib/strtol_l.c
  /opt/build/glibc/glibc-2.24/stdlib/getenv.c
  /opt/build/glibc/glibc-2.24/string/../bits/stdlib-bsearch.h
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86/cacheinfo.c
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/memchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../memcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memmove-vec-unaligned-erms.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../multiarch/memset-vec-unaligned-erms.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/../strcmp.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/memcmp-sse4.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strchr.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strlen.S
  /opt/build/glibc/glibc-2.24/string/../sysdeps/x86_64/strtok.S
  /opt/build/glibc/glibc-2.24/string/strdup.c
  /opt/build/glibc/glibc-2.24/wcsmbs/./wcsmbsload.h
  /opt/build/glibc/glibc-2.24/wcsmbs/btowc.c
  /opt/build/glibc/glibc-2.24/wcsmbs/mbrtowc.c
  /opt/build/glibc/glibc-2.24/wctype/wcfuncs.c

--------------------------------------------------------------------------------
Ir               
--------------------------------------------------------------------------------
677,711 (11.56%)  events annotated

